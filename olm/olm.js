/*! For license information please see olm.js.LICENSE.txt */
var Olm=function(){var n,_,t,e,o={},r=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(t=t||__filename),function(e){var r,l,i,s;if(e=e||{},r||(r=void 0!==e?e:{}),r.ready=new Promise((function(n,_){l=n,i=_})),"undefined"!=typeof window)s=function(n){window.crypto.getRandomValues(n)};else{if(!module.exports)throw Error("Cannot find global to attach library to");var u=require("crypto");s=function(n){var _=u.randomBytes(n.length);n.set(_)},process=global.process}if("undefined"!=typeof OLM_OPTIONS)for(var a in OLM_OPTIONS)OLM_OPTIONS.hasOwnProperty(a)&&(r[a]=OLM_OPTIONS[a]);r.onRuntimeInitialized=function(){$n=r._olm_error(),o.PRIVATE_KEY_LENGTH=r._olm_pk_private_key_length(),n&&n()},r.onAbort=function(n){_&&_(n)};var p,c,m,y,f,h,g=Object.assign({},r),b="object"==typeof window,d="function"==typeof importScripts,k="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,v="";k?(v=d?require("path").dirname(v)+"/":__dirname+"/",h=()=>{f||(y=require("fs"),f=require("path"))},p=function(n,_){return h(),n=f.normalize(n),y.readFileSync(n,_?void 0:"utf8")},m=n=>((n=p(n,!0)).buffer||(n=new Uint8Array(n)),n),c=(n,_,t)=>{h(),n=f.normalize(n),y.readFile(n,(function(n,e){n?t(n):_(e.buffer)}))},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(n){throw n})),process.on("unhandledRejection",(function(n){throw n})),r.inspect=function(){return"[Emscripten Module object]"}):(b||d)&&(d?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),t&&(v=t),v=0!==v.indexOf("blob:")?v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):"",p=n=>{var _=new XMLHttpRequest;return _.open("GET",n,!1),_.send(null),_.responseText},d&&(m=n=>{var _=new XMLHttpRequest;return _.open("GET",n,!1),_.responseType="arraybuffer",_.send(null),new Uint8Array(_.response)}),c=(n,_,t)=>{var e=new XMLHttpRequest;e.open("GET",n,!0),e.responseType="arraybuffer",e.onload=()=>{200==e.status||0==e.status&&e.response?_(e.response):t()},e.onerror=t,e.send(null)}),r.print||console.log.bind(console);var $,w=r.printErr||console.warn.bind(console);Object.assign(r,g),g=null,r.wasmBinary&&($=r.wasmBinary),r.noExitRuntime,"object"!=typeof WebAssembly&&X("no native wasm support detected");var x,A,E,O,S,z,R,P,U,M=!1,I="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function L(n,_){if(n){var t=O,e=n+_;for(_=n;t[_]&&!(_>=e);)++_;if(16<_-n&&t.buffer&&I)n=I.decode(t.subarray(n,_));else{for(e="";n<_;){var o=t[n++];if(128&o){var r=63&t[n++];if(192==(224&o))e+=String.fromCharCode((31&o)<<6|r);else{var l=63&t[n++];65536>(o=224==(240&o)?(15&o)<<12|r<<6|l:(7&o)<<18|r<<12|l<<6|63&t[n++])?e+=String.fromCharCode(o):(o-=65536,e+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else e+=String.fromCharCode(o)}n=e}}else n="";return n}function T(n,_,t,e){if(!(0<e))return 0;var o=t;e=t+e-1;for(var r=0;r<n.length;++r){var l=n.charCodeAt(r);if(55296<=l&&57343>=l&&(l=65536+((1023&l)<<10)|1023&n.charCodeAt(++r)),127>=l){if(t>=e)break;_[t++]=l}else{if(2047>=l){if(t+1>=e)break;_[t++]=192|l>>6}else{if(65535>=l){if(t+2>=e)break;_[t++]=224|l>>12}else{if(t+3>=e)break;_[t++]=240|l>>18,_[t++]=128|l>>12&63}_[t++]=128|l>>6&63}_[t++]=128|63&l}}return _[t]=0,t-o}function H(n){for(var _=0,t=0;t<n.length;++t){var e=n.charCodeAt(t);127>=e?_++:2047>=e?_+=2:55296<=e&&57343>=e?(_+=4,++t):_+=3}return _}function C(){var n=x.buffer;A=n,r.HEAP8=E=new Int8Array(n),r.HEAP16=S=new Int16Array(n),r.HEAP32=z=new Int32Array(n),r.HEAPU8=O=new Uint8Array(n),r.HEAPU16=new Uint16Array(n),r.HEAPU32=R=new Uint32Array(n),r.HEAPF32=P=new Float32Array(n),r.HEAPF64=U=new Float64Array(n)}var W=[],j=[],F=[];function q(){var n=r.preRun.shift();W.unshift(n)}var D,N,B=0,G=null,V=null;function X(n){throw r.onAbort&&r.onAbort(n),w(n="Aborted("+n+")"),M=!0,n=new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info."),i(n),n}function K(){return D.startsWith("data:application/octet-stream;base64,")}if(D="olm.wasm",!K()){var Y=D;D=r.locateFile?r.locateFile(Y,v):v+Y}function J(){var n=D;try{if(n==D&&$)return new Uint8Array($);if(m)return m(n);throw"both async and sync fetching of the wasm failed"}catch(n){X(n)}}function Q(n){for(;0<n.length;)n.shift()(r)}function Z(n,_="i8"){switch(_.endsWith("*")&&(_="*"),_){case"i1":case"i8":return E[n>>0];case"i16":return S[n>>1];case"i32":case"i64":return z[n>>2];case"float":return P[n>>2];case"double":return U[n>>3];case"*":return R[n>>2];default:X("invalid type for getValue: "+_)}return null}function nn(n){var _="i8";switch(_.endsWith("*")&&(_="*"),_){case"i1":case"i8":E[n>>0]=0;break;case"i16":S[n>>1]=0;break;case"i32":z[n>>2]=0;break;case"i64":N=[0,0],z[n>>2]=N[0],z[n+4>>2]=N[1];break;case"float":P[n>>2]=0;break;case"double":U[n>>3]=0;break;case"*":R[n>>2]=0;break;default:X("invalid type for setValue: "+_)}}function _n(n,_,t){for(var e=0;e<n.length;++e)E[_++>>0]=n.charCodeAt(e);t||(E[_>>0]=0)}function tn(n,_,t){return n=T(n,t=Array(0<t?t:H(n)+1),0,t.length),_&&(t.length=n),t}var en={b:function(n,_,t){O.copyWithin(n,_,_+t)},a:function(n){var _=O.length;if(2147483648<(n>>>=0))return!1;for(var t=1;4>=t;t*=2){var e=_*(1+.2/t);e=Math.min(e,n+100663296);var o=Math;e=Math.max(n,e),o=o.min.call(o,2147483648,e+(65536-e%65536)%65536);n:{try{x.grow(o-A.byteLength+65535>>>16),C();var r=1;break n}catch(n){}r=void 0}if(r)return!0}return!1}};!function(){function n(n){r.asm=n.exports,x=r.asm.c,C(),j.unshift(r.asm.d),B--,r.monitorRunDependencies&&r.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),V&&(n=V,V=null,n()))}function _(_){n(_.instance)}function t(n){return function(){if(!$&&(b||d)){if("function"==typeof fetch&&!D.startsWith("file://"))return fetch(D,{credentials:"same-origin"}).then((function(n){if(!n.ok)throw"failed to load wasm binary file at '"+D+"'";return n.arrayBuffer()})).catch((function(){return J()}));if(c)return new Promise((function(n,_){c(D,(function(_){n(new Uint8Array(_))}),_)}))}return Promise.resolve().then((function(){return J()}))}().then((function(n){return WebAssembly.instantiate(n,e)})).then((function(n){return n})).then(n,(function(n){w("failed to asynchronously prepare wasm: "+n),X(n)}))}var e={a:en};if(B++,r.monitorRunDependencies&&r.monitorRunDependencies(B),r.instantiateWasm)try{return r.instantiateWasm(e,n)}catch(n){return w("Module.instantiateWasm callback failed with error: "+n),!1}($||"function"!=typeof WebAssembly.instantiateStreaming||K()||D.startsWith("file://")||k||"function"!=typeof fetch?t(_):fetch(D,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(_,(function(n){return w("wasm streaming compile failed: "+n),w("falling back to ArrayBuffer instantiation"),t(_)}))}))).catch(i)}(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.d).apply(null,arguments)},r._olm_get_library_version=function(){return(r._olm_get_library_version=r.asm.f).apply(null,arguments)},r._olm_error=function(){return(r._olm_error=r.asm.g).apply(null,arguments)},r._olm_account_last_error=function(){return(r._olm_account_last_error=r.asm.h).apply(null,arguments)},r.__olm_error_to_string=function(){return(r.__olm_error_to_string=r.asm.i).apply(null,arguments)},r._olm_account_last_error_code=function(){return(r._olm_account_last_error_code=r.asm.j).apply(null,arguments)},r._olm_session_last_error=function(){return(r._olm_session_last_error=r.asm.k).apply(null,arguments)},r._olm_session_last_error_code=function(){return(r._olm_session_last_error_code=r.asm.l).apply(null,arguments)},r._olm_utility_last_error=function(){return(r._olm_utility_last_error=r.asm.m).apply(null,arguments)},r._olm_utility_last_error_code=function(){return(r._olm_utility_last_error_code=r.asm.n).apply(null,arguments)},r._olm_account_size=function(){return(r._olm_account_size=r.asm.o).apply(null,arguments)},r._olm_session_size=function(){return(r._olm_session_size=r.asm.p).apply(null,arguments)},r._olm_utility_size=function(){return(r._olm_utility_size=r.asm.q).apply(null,arguments)},r._olm_account=function(){return(r._olm_account=r.asm.r).apply(null,arguments)},r._olm_session=function(){return(r._olm_session=r.asm.s).apply(null,arguments)},r._olm_utility=function(){return(r._olm_utility=r.asm.t).apply(null,arguments)},r._olm_clear_account=function(){return(r._olm_clear_account=r.asm.u).apply(null,arguments)},r._olm_clear_session=function(){return(r._olm_clear_session=r.asm.v).apply(null,arguments)},r._olm_clear_utility=function(){return(r._olm_clear_utility=r.asm.w).apply(null,arguments)},r._olm_pickle_account_length=function(){return(r._olm_pickle_account_length=r.asm.x).apply(null,arguments)},r._olm_pickle_session_length=function(){return(r._olm_pickle_session_length=r.asm.y).apply(null,arguments)},r._olm_pickle_account=function(){return(r._olm_pickle_account=r.asm.z).apply(null,arguments)},r._olm_pickle_session=function(){return(r._olm_pickle_session=r.asm.A).apply(null,arguments)},r._olm_unpickle_account=function(){return(r._olm_unpickle_account=r.asm.B).apply(null,arguments)},r._olm_unpickle_session=function(){return(r._olm_unpickle_session=r.asm.C).apply(null,arguments)},r._olm_create_account_random_length=function(){return(r._olm_create_account_random_length=r.asm.D).apply(null,arguments)},r._olm_create_account=function(){return(r._olm_create_account=r.asm.E).apply(null,arguments)},r._olm_account_identity_keys_length=function(){return(r._olm_account_identity_keys_length=r.asm.F).apply(null,arguments)},r._olm_account_identity_keys=function(){return(r._olm_account_identity_keys=r.asm.G).apply(null,arguments)},r._olm_account_signature_length=function(){return(r._olm_account_signature_length=r.asm.H).apply(null,arguments)},r._olm_account_sign=function(){return(r._olm_account_sign=r.asm.I).apply(null,arguments)},r._olm_account_one_time_keys_length=function(){return(r._olm_account_one_time_keys_length=r.asm.J).apply(null,arguments)},r._olm_account_one_time_keys=function(){return(r._olm_account_one_time_keys=r.asm.K).apply(null,arguments)},r._olm_account_mark_keys_as_published=function(){return(r._olm_account_mark_keys_as_published=r.asm.L).apply(null,arguments)},r._olm_account_max_number_of_one_time_keys=function(){return(r._olm_account_max_number_of_one_time_keys=r.asm.M).apply(null,arguments)},r._olm_account_generate_one_time_keys_random_length=function(){return(r._olm_account_generate_one_time_keys_random_length=r.asm.N).apply(null,arguments)},r._olm_account_generate_one_time_keys=function(){return(r._olm_account_generate_one_time_keys=r.asm.O).apply(null,arguments)},r._olm_account_generate_fallback_key_random_length=function(){return(r._olm_account_generate_fallback_key_random_length=r.asm.P).apply(null,arguments)},r._olm_account_generate_fallback_key=function(){return(r._olm_account_generate_fallback_key=r.asm.Q).apply(null,arguments)},r._olm_account_fallback_key_length=function(){return(r._olm_account_fallback_key_length=r.asm.R).apply(null,arguments)},r._olm_account_fallback_key=function(){return(r._olm_account_fallback_key=r.asm.S).apply(null,arguments)},r._olm_account_unpublished_fallback_key_length=function(){return(r._olm_account_unpublished_fallback_key_length=r.asm.T).apply(null,arguments)},r._olm_account_unpublished_fallback_key=function(){return(r._olm_account_unpublished_fallback_key=r.asm.U).apply(null,arguments)},r._olm_account_forget_old_fallback_key=function(){return(r._olm_account_forget_old_fallback_key=r.asm.V).apply(null,arguments)},r._olm_create_outbound_session_random_length=function(){return(r._olm_create_outbound_session_random_length=r.asm.W).apply(null,arguments)},r._olm_create_outbound_session=function(){return(r._olm_create_outbound_session=r.asm.X).apply(null,arguments)},r._olm_create_inbound_session=function(){return(r._olm_create_inbound_session=r.asm.Y).apply(null,arguments)},r._olm_create_inbound_session_from=function(){return(r._olm_create_inbound_session_from=r.asm.Z).apply(null,arguments)},r._olm_session_id_length=function(){return(r._olm_session_id_length=r.asm._).apply(null,arguments)},r._olm_session_id=function(){return(r._olm_session_id=r.asm.$).apply(null,arguments)},r._olm_session_has_received_message=function(){return(r._olm_session_has_received_message=r.asm.aa).apply(null,arguments)},r._olm_session_describe=function(){return(r._olm_session_describe=r.asm.ba).apply(null,arguments)},r._olm_matches_inbound_session=function(){return(r._olm_matches_inbound_session=r.asm.ca).apply(null,arguments)},r._olm_matches_inbound_session_from=function(){return(r._olm_matches_inbound_session_from=r.asm.da).apply(null,arguments)},r._olm_remove_one_time_keys=function(){return(r._olm_remove_one_time_keys=r.asm.ea).apply(null,arguments)},r._olm_encrypt_message_type=function(){return(r._olm_encrypt_message_type=r.asm.fa).apply(null,arguments)},r._olm_encrypt_random_length=function(){return(r._olm_encrypt_random_length=r.asm.ga).apply(null,arguments)},r._olm_encrypt_message_length=function(){return(r._olm_encrypt_message_length=r.asm.ha).apply(null,arguments)},r._olm_encrypt=function(){return(r._olm_encrypt=r.asm.ia).apply(null,arguments)},r._olm_decrypt_max_plaintext_length=function(){return(r._olm_decrypt_max_plaintext_length=r.asm.ja).apply(null,arguments)},r._olm_decrypt=function(){return(r._olm_decrypt=r.asm.ka).apply(null,arguments)},r._olm_sha256_length=function(){return(r._olm_sha256_length=r.asm.la).apply(null,arguments)},r._olm_sha256=function(){return(r._olm_sha256=r.asm.ma).apply(null,arguments)},r._olm_ed25519_verify=function(){return(r._olm_ed25519_verify=r.asm.na).apply(null,arguments)},r._olm_pk_encryption_last_error=function(){return(r._olm_pk_encryption_last_error=r.asm.oa).apply(null,arguments)},r._olm_pk_encryption_last_error_code=function(){return(r._olm_pk_encryption_last_error_code=r.asm.pa).apply(null,arguments)},r._olm_pk_encryption_size=function(){return(r._olm_pk_encryption_size=r.asm.qa).apply(null,arguments)},r._olm_pk_encryption=function(){return(r._olm_pk_encryption=r.asm.ra).apply(null,arguments)},r._olm_clear_pk_encryption=function(){return(r._olm_clear_pk_encryption=r.asm.sa).apply(null,arguments)},r._olm_pk_encryption_set_recipient_key=function(){return(r._olm_pk_encryption_set_recipient_key=r.asm.ta).apply(null,arguments)},r._olm_pk_key_length=function(){return(r._olm_pk_key_length=r.asm.ua).apply(null,arguments)},r._olm_pk_ciphertext_length=function(){return(r._olm_pk_ciphertext_length=r.asm.va).apply(null,arguments)},r._olm_pk_mac_length=function(){return(r._olm_pk_mac_length=r.asm.wa).apply(null,arguments)},r._olm_pk_encrypt_random_length=function(){return(r._olm_pk_encrypt_random_length=r.asm.xa).apply(null,arguments)},r._olm_pk_encrypt=function(){return(r._olm_pk_encrypt=r.asm.ya).apply(null,arguments)},r._olm_pk_decryption_last_error=function(){return(r._olm_pk_decryption_last_error=r.asm.za).apply(null,arguments)},r._olm_pk_decryption_last_error_code=function(){return(r._olm_pk_decryption_last_error_code=r.asm.Aa).apply(null,arguments)},r._olm_pk_decryption_size=function(){return(r._olm_pk_decryption_size=r.asm.Ba).apply(null,arguments)},r._olm_pk_decryption=function(){return(r._olm_pk_decryption=r.asm.Ca).apply(null,arguments)},r._olm_clear_pk_decryption=function(){return(r._olm_clear_pk_decryption=r.asm.Da).apply(null,arguments)},r._olm_pk_private_key_length=function(){return(r._olm_pk_private_key_length=r.asm.Ea).apply(null,arguments)},r._olm_pk_generate_key_random_length=function(){return(r._olm_pk_generate_key_random_length=r.asm.Fa).apply(null,arguments)},r._olm_pk_key_from_private=function(){return(r._olm_pk_key_from_private=r.asm.Ga).apply(null,arguments)},r._olm_pk_generate_key=function(){return(r._olm_pk_generate_key=r.asm.Ha).apply(null,arguments)},r._olm_pickle_pk_decryption_length=function(){return(r._olm_pickle_pk_decryption_length=r.asm.Ia).apply(null,arguments)},r._olm_pickle_pk_decryption=function(){return(r._olm_pickle_pk_decryption=r.asm.Ja).apply(null,arguments)},r._olm_unpickle_pk_decryption=function(){return(r._olm_unpickle_pk_decryption=r.asm.Ka).apply(null,arguments)},r._olm_pk_max_plaintext_length=function(){return(r._olm_pk_max_plaintext_length=r.asm.La).apply(null,arguments)},r._olm_pk_decrypt=function(){return(r._olm_pk_decrypt=r.asm.Ma).apply(null,arguments)},r._olm_pk_get_private_key=function(){return(r._olm_pk_get_private_key=r.asm.Na).apply(null,arguments)},r._olm_pk_signing_size=function(){return(r._olm_pk_signing_size=r.asm.Oa).apply(null,arguments)},r._olm_pk_signing=function(){return(r._olm_pk_signing=r.asm.Pa).apply(null,arguments)},r._olm_pk_signing_last_error=function(){return(r._olm_pk_signing_last_error=r.asm.Qa).apply(null,arguments)},r._olm_pk_signing_last_error_code=function(){return(r._olm_pk_signing_last_error_code=r.asm.Ra).apply(null,arguments)},r._olm_clear_pk_signing=function(){return(r._olm_clear_pk_signing=r.asm.Sa).apply(null,arguments)},r._olm_pk_signing_seed_length=function(){return(r._olm_pk_signing_seed_length=r.asm.Ta).apply(null,arguments)},r._olm_pk_signing_public_key_length=function(){return(r._olm_pk_signing_public_key_length=r.asm.Ua).apply(null,arguments)},r._olm_pk_signing_key_from_seed=function(){return(r._olm_pk_signing_key_from_seed=r.asm.Va).apply(null,arguments)},r._olm_pk_signature_length=function(){return(r._olm_pk_signature_length=r.asm.Wa).apply(null,arguments)},r._olm_pk_sign=function(){return(r._olm_pk_sign=r.asm.Xa).apply(null,arguments)},r._olm_inbound_group_session_size=function(){return(r._olm_inbound_group_session_size=r.asm.Ya).apply(null,arguments)},r._olm_inbound_group_session=function(){return(r._olm_inbound_group_session=r.asm.Za).apply(null,arguments)},r._olm_clear_inbound_group_session=function(){return(r._olm_clear_inbound_group_session=r.asm._a).apply(null,arguments)},r._olm_inbound_group_session_last_error=function(){return(r._olm_inbound_group_session_last_error=r.asm.$a).apply(null,arguments)},r._olm_inbound_group_session_last_error_code=function(){return(r._olm_inbound_group_session_last_error_code=r.asm.ab).apply(null,arguments)},r._olm_init_inbound_group_session=function(){return(r._olm_init_inbound_group_session=r.asm.bb).apply(null,arguments)},r._olm_import_inbound_group_session=function(){return(r._olm_import_inbound_group_session=r.asm.cb).apply(null,arguments)},r._olm_pickle_inbound_group_session_length=function(){return(r._olm_pickle_inbound_group_session_length=r.asm.db).apply(null,arguments)},r._olm_pickle_inbound_group_session=function(){return(r._olm_pickle_inbound_group_session=r.asm.eb).apply(null,arguments)},r._olm_unpickle_inbound_group_session=function(){return(r._olm_unpickle_inbound_group_session=r.asm.fb).apply(null,arguments)},r._olm_group_decrypt_max_plaintext_length=function(){return(r._olm_group_decrypt_max_plaintext_length=r.asm.gb).apply(null,arguments)},r._olm_group_decrypt=function(){return(r._olm_group_decrypt=r.asm.hb).apply(null,arguments)},r._olm_inbound_group_session_id_length=function(){return(r._olm_inbound_group_session_id_length=r.asm.ib).apply(null,arguments)},r._olm_inbound_group_session_id=function(){return(r._olm_inbound_group_session_id=r.asm.jb).apply(null,arguments)},r._olm_inbound_group_session_first_known_index=function(){return(r._olm_inbound_group_session_first_known_index=r.asm.kb).apply(null,arguments)},r._olm_inbound_group_session_is_verified=function(){return(r._olm_inbound_group_session_is_verified=r.asm.lb).apply(null,arguments)},r._olm_export_inbound_group_session_length=function(){return(r._olm_export_inbound_group_session_length=r.asm.mb).apply(null,arguments)},r._olm_export_inbound_group_session=function(){return(r._olm_export_inbound_group_session=r.asm.nb).apply(null,arguments)},r._olm_outbound_group_session_size=function(){return(r._olm_outbound_group_session_size=r.asm.ob).apply(null,arguments)},r._olm_outbound_group_session=function(){return(r._olm_outbound_group_session=r.asm.pb).apply(null,arguments)},r._olm_clear_outbound_group_session=function(){return(r._olm_clear_outbound_group_session=r.asm.qb).apply(null,arguments)},r._olm_outbound_group_session_last_error=function(){return(r._olm_outbound_group_session_last_error=r.asm.rb).apply(null,arguments)},r._olm_outbound_group_session_last_error_code=function(){return(r._olm_outbound_group_session_last_error_code=r.asm.sb).apply(null,arguments)},r._olm_pickle_outbound_group_session_length=function(){return(r._olm_pickle_outbound_group_session_length=r.asm.tb).apply(null,arguments)},r._olm_pickle_outbound_group_session=function(){return(r._olm_pickle_outbound_group_session=r.asm.ub).apply(null,arguments)},r._olm_unpickle_outbound_group_session=function(){return(r._olm_unpickle_outbound_group_session=r.asm.vb).apply(null,arguments)},r._olm_init_outbound_group_session_random_length=function(){return(r._olm_init_outbound_group_session_random_length=r.asm.wb).apply(null,arguments)},r._olm_init_outbound_group_session=function(){return(r._olm_init_outbound_group_session=r.asm.xb).apply(null,arguments)},r._olm_group_encrypt_message_length=function(){return(r._olm_group_encrypt_message_length=r.asm.yb).apply(null,arguments)},r._olm_group_encrypt=function(){return(r._olm_group_encrypt=r.asm.zb).apply(null,arguments)},r._olm_outbound_group_session_id_length=function(){return(r._olm_outbound_group_session_id_length=r.asm.Ab).apply(null,arguments)},r._olm_outbound_group_session_id=function(){return(r._olm_outbound_group_session_id=r.asm.Bb).apply(null,arguments)},r._olm_outbound_group_session_message_index=function(){return(r._olm_outbound_group_session_message_index=r.asm.Cb).apply(null,arguments)},r._olm_outbound_group_session_key_length=function(){return(r._olm_outbound_group_session_key_length=r.asm.Db).apply(null,arguments)},r._olm_outbound_group_session_key=function(){return(r._olm_outbound_group_session_key=r.asm.Eb).apply(null,arguments)},r._olm_sas_last_error=function(){return(r._olm_sas_last_error=r.asm.Fb).apply(null,arguments)},r._olm_sas_last_error_code=function(){return(r._olm_sas_last_error_code=r.asm.Gb).apply(null,arguments)},r._olm_sas_size=function(){return(r._olm_sas_size=r.asm.Hb).apply(null,arguments)},r._olm_sas=function(){return(r._olm_sas=r.asm.Ib).apply(null,arguments)},r._olm_clear_sas=function(){return(r._olm_clear_sas=r.asm.Jb).apply(null,arguments)},r._olm_create_sas_random_length=function(){return(r._olm_create_sas_random_length=r.asm.Kb).apply(null,arguments)},r._olm_create_sas=function(){return(r._olm_create_sas=r.asm.Lb).apply(null,arguments)},r._olm_sas_pubkey_length=function(){return(r._olm_sas_pubkey_length=r.asm.Mb).apply(null,arguments)},r._olm_sas_get_pubkey=function(){return(r._olm_sas_get_pubkey=r.asm.Nb).apply(null,arguments)},r._olm_sas_set_their_key=function(){return(r._olm_sas_set_their_key=r.asm.Ob).apply(null,arguments)},r._olm_sas_is_their_key_set=function(){return(r._olm_sas_is_their_key_set=r.asm.Pb).apply(null,arguments)},r._olm_sas_generate_bytes=function(){return(r._olm_sas_generate_bytes=r.asm.Qb).apply(null,arguments)},r._olm_sas_mac_length=function(){return(r._olm_sas_mac_length=r.asm.Rb).apply(null,arguments)},r._olm_sas_calculate_mac_fixed_base64=function(){return(r._olm_sas_calculate_mac_fixed_base64=r.asm.Sb).apply(null,arguments)},r._olm_sas_calculate_mac=function(){return(r._olm_sas_calculate_mac=r.asm.Tb).apply(null,arguments)},r._olm_sas_calculate_mac_long_kdf=function(){return(r._olm_sas_calculate_mac_long_kdf=r.asm.Ub).apply(null,arguments)},r._malloc=function(){return(r._malloc=r.asm.Vb).apply(null,arguments)},r._free=function(){return(r._free=r.asm.Wb).apply(null,arguments)};var on,rn=r.stackSave=function(){return(rn=r.stackSave=r.asm.Xb).apply(null,arguments)},ln=r.stackRestore=function(){return(ln=r.stackRestore=r.asm.Yb).apply(null,arguments)},sn=r.stackAlloc=function(){return(sn=r.stackAlloc=r.asm.Zb).apply(null,arguments)};function un(){function n(){if(!on&&(on=!0,r.calledRun=!0,!M)){if(Q(j),l(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;){var n=r.postRun.shift();F.unshift(n)}Q(F)}}if(!(0<B)){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)q();Q(W),0<B||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),n()}),1)):n())}}if(r.intArrayFromString=tn,r.writeAsciiToMemory=_n,r.ALLOC_STACK=1,V=function n(){on||un(),on||(V=n)},r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();function an(){var n=r._olm_outbound_group_session_size();this.ac=wn(n),this.$b=r._olm_outbound_group_session(this.ac)}function pn(n){return function(){var _=n.apply(this,arguments);if(_===$n)throw _=L(r._olm_outbound_group_session_last_error(arguments[0])),Error("OLM."+_);return _}}function cn(){var n=r._olm_inbound_group_session_size();this.ac=wn(n),this.$b=r._olm_inbound_group_session(this.ac)}function mn(n){return function(){var _=n.apply(this,arguments);if(_===$n)throw _=L(r._olm_inbound_group_session_last_error(arguments[0])),Error("OLM."+_);return _}}function yn(){var n=r._olm_pk_encryption_size();this.ac=wn(n),this.$b=r._olm_pk_encryption(this.ac)}function fn(n){return function(){var _=n.apply(this,arguments);if(_===$n)throw _=L(r._olm_pk_encryption_last_error(arguments[0])),Error("OLM."+_);return _}}function hn(){var n=r._olm_pk_decryption_size();this.ac=wn(n),this.$b=r._olm_pk_decryption(this.ac)}function gn(n){return function(){var _=n.apply(this,arguments);if(_===$n)throw _=L(r._olm_pk_decryption_last_error(arguments[0])),Error("OLM."+_);return _}}function bn(){var n=r._olm_pk_signing_size();this.ac=wn(n),this.$b=r._olm_pk_signing(this.ac)}function dn(n){return function(){var _=n.apply(this,arguments);if(_===$n)throw _=L(r._olm_pk_signing_last_error(arguments[0])),Error("OLM."+_);return _}}function kn(){var n=r._olm_sas_size(),_=r._olm_create_sas_random_length(),t=An(_,s);this.ac=wn(n),this.$b=r._olm_sas(this.ac),r._olm_create_sas(this.$b,t,_),zn(t,_)}function vn(n){return function(){var _=n.apply(this,arguments);if(_===$n)throw _=L(r._olm_sas_last_error(arguments[0])),Error("OLM."+_);return _}}un(),an.prototype.free=function(){r._olm_clear_outbound_group_session(this.$b),xn(this.$b)},an.prototype.pickle=Sn((function(n){n=On(n);var _=pn(r._olm_pickle_outbound_group_session_length)(this.$b),t=En(n),e=En(_+1);try{pn(r._olm_pickle_outbound_group_session)(this.$b,t,n.length,e,_)}finally{for(zn(t,n.length),t=0;t<n.length;t++)n[t]=0}return L(e,_)})),an.prototype.unpickle=Sn((function(n,_){var t=En(n=On(n)),e=En(_=On(_));try{pn(r._olm_unpickle_outbound_group_session)(this.$b,t,n.length,e,_.length)}finally{for(zn(t,n.length),t=0;t<n.length;t++)n[t]=0}})),an.prototype.create=Sn((function(){var n=pn(r._olm_init_outbound_group_session_random_length)(this.$b),_=An(n,s);try{pn(r._olm_init_outbound_group_session)(this.$b,_,n)}finally{zn(_,n)}})),an.prototype.encrypt=function(n){try{var _=H(n),t=pn(r._olm_group_encrypt_message_length)(this.$b,_),e=wn(_+1);T(n,O,e,_+1);var o=wn(t+1);return pn(r._olm_group_encrypt)(this.$b,e,_,o,t),nn(o+t),L(o,t)}finally{void 0!==e&&(zn(e,_+1),xn(e)),void 0!==o&&xn(o)}},an.prototype.session_id=Sn((function(){var n=pn(r._olm_outbound_group_session_id_length)(this.$b),_=En(n+1);return pn(r._olm_outbound_group_session_id)(this.$b,_,n),L(_,n)})),an.prototype.session_key=Sn((function(){var n=pn(r._olm_outbound_group_session_key_length)(this.$b),_=En(n+1);pn(r._olm_outbound_group_session_key)(this.$b,_,n);var t=L(_,n);return zn(_,n),t})),an.prototype.message_index=function(){return pn(r._olm_outbound_group_session_message_index)(this.$b)},o.OutboundGroupSession=an,cn.prototype.free=function(){r._olm_clear_inbound_group_session(this.$b),xn(this.$b)},cn.prototype.pickle=Sn((function(n){n=On(n);var _=mn(r._olm_pickle_inbound_group_session_length)(this.$b),t=En(n),e=En(_+1);try{mn(r._olm_pickle_inbound_group_session)(this.$b,t,n.length,e,_)}finally{for(zn(t,n.length),t=0;t<n.length;t++)n[t]=0}return L(e,_)})),cn.prototype.unpickle=Sn((function(n,_){var t=En(n=On(n)),e=En(_=On(_));try{mn(r._olm_unpickle_inbound_group_session)(this.$b,t,n.length,e,_.length)}finally{for(zn(t,n.length),t=0;t<n.length;t++)n[t]=0}})),cn.prototype.create=Sn((function(n){var _=En(n=On(n));try{mn(r._olm_init_inbound_group_session)(this.$b,_,n.length)}finally{for(zn(_,n.length),_=0;_<n.length;_++)n[_]=0}})),cn.prototype.import_session=Sn((function(n){var _=En(n=On(n));try{mn(r._olm_import_inbound_group_session)(this.$b,_,n.length)}finally{for(zn(_,n.length),_=0;_<n.length;_++)n[_]=0}})),cn.prototype.decrypt=Sn((function(n){try{var _=wn(n.length);_n(n,_,!0);var t=mn(r._olm_group_decrypt_max_plaintext_length)(this.$b,_,n.length);_n(n,_,!0);var e=wn(t+1),o=En(4),l=mn(r._olm_group_decrypt)(this.$b,_,n.length,e,t,o);return nn(e+l),{plaintext:L(e,l),message_index:Z(o,"i32")}}finally{void 0!==_&&xn(_),void 0!==e&&(zn(e,l),xn(e))}})),cn.prototype.session_id=Sn((function(){var n=mn(r._olm_inbound_group_session_id_length)(this.$b),_=En(n+1);return mn(r._olm_inbound_group_session_id)(this.$b,_,n),L(_,n)})),cn.prototype.first_known_index=Sn((function(){return mn(r._olm_inbound_group_session_first_known_index)(this.$b)})),cn.prototype.export_session=Sn((function(n){var _=mn(r._olm_export_inbound_group_session_length)(this.$b),t=En(_+1);return pn(r._olm_export_inbound_group_session)(this.$b,t,_,n),n=L(t,_),zn(t,_),n})),o.InboundGroupSession=cn,yn.prototype.free=function(){r._olm_clear_pk_encryption(this.$b),xn(this.$b)},yn.prototype.set_recipient_key=Sn((function(n){var _=En(n=On(n));fn(r._olm_pk_encryption_set_recipient_key)(this.$b,_,n.length)})),yn.prototype.encrypt=Sn((function(n){try{var _=H(n),t=wn(_+1);T(n,O,t,_+1);var e=fn(r._olm_pk_encrypt_random_length)(),o=An(e,s),l=fn(r._olm_pk_ciphertext_length)(this.$b,_),i=wn(l+1),u=fn(r._olm_pk_mac_length)(this.$b),a=En(u+1);nn(a+u);var p=fn(r._olm_pk_key_length)(),c=En(p+1);return nn(c+p),fn(r._olm_pk_encrypt)(this.$b,t,_,i,l,a,u,c,p,o,e),nn(i+l),{ciphertext:L(i,l),mac:L(a,u),ephemeral:L(c,p)}}finally{void 0!==o&&zn(o,e),void 0!==t&&(zn(t,_+1),xn(t)),void 0!==i&&xn(i)}})),hn.prototype.free=function(){r._olm_clear_pk_decryption(this.$b),xn(this.$b)},hn.prototype.init_with_private_key=Sn((function(n){var _=En(n.length);r.HEAPU8.set(n,_);var t=gn(r._olm_pk_key_length)(),e=En(t+1);try{gn(r._olm_pk_key_from_private)(this.$b,e,t,_,n.length)}finally{zn(_,n.length)}return L(e,t)})),hn.prototype.generate_key=Sn((function(){var n=gn(r._olm_pk_private_key_length)(),_=An(n,s),t=gn(r._olm_pk_key_length)(),e=En(t+1);try{gn(r._olm_pk_key_from_private)(this.$b,e,t,_,n)}finally{zn(_,n)}return L(e,t)})),hn.prototype.get_private_key=Sn((function(){var n=fn(r._olm_pk_private_key_length)(),_=En(n);gn(r._olm_pk_get_private_key)(this.$b,_,n);var t=new Uint8Array(new Uint8Array(r.HEAPU8.buffer,_,n));return zn(_,n),t})),hn.prototype.pickle=Sn((function(n){n=On(n);var _=gn(r._olm_pickle_pk_decryption_length)(this.$b),t=En(n),e=En(_+1);try{gn(r._olm_pickle_pk_decryption)(this.$b,t,n.length,e,_)}finally{for(zn(t,n.length),t=0;t<n.length;t++)n[t]=0}return L(e,_)})),hn.prototype.unpickle=Sn((function(n,_){var t=En(n=On(n)),e=On(_),o=En(e),l=En((_=gn(r._olm_pk_key_length)())+1);try{gn(r._olm_unpickle_pk_decryption)(this.$b,t,n.length,o,e.length,l,_)}finally{for(zn(t,n.length),t=0;t<n.length;t++)n[t]=0}return L(l,_)})),hn.prototype.decrypt=Sn((function(n,_,t){try{var e=H(t),o=wn(e+1);T(t,O,o,e+1);var l=On(n),i=En(l),s=On(_),u=En(s),a=gn(r._olm_pk_max_plaintext_length)(this.$b,e),p=wn(a+1),c=gn(r._olm_pk_decrypt)(this.$b,i,l.length,u,s.length,o,e,p,a);return nn(p+c),L(p,c)}finally{void 0!==p&&(zn(p,c+1),xn(p)),void 0!==o&&xn(o)}})),bn.prototype.free=function(){r._olm_clear_pk_signing(this.$b),xn(this.$b)},bn.prototype.init_with_seed=Sn((function(n){var _=En(n.length);r.HEAPU8.set(n,_);var t=dn(r._olm_pk_signing_public_key_length)(),e=En(t+1);try{dn(r._olm_pk_signing_key_from_seed)(this.$b,e,t,_,n.length)}finally{zn(_,n.length)}return L(e,t)})),bn.prototype.generate_seed=Sn((function(){var n=dn(r._olm_pk_signing_seed_length)(),_=An(n,s),t=new Uint8Array(new Uint8Array(r.HEAPU8.buffer,_,n));return zn(_,n),t})),bn.prototype.sign=Sn((function(n){try{var _=H(n),t=wn(_+1);T(n,O,t,_+1);var e=dn(r._olm_pk_signature_length)(),o=En(e+1);return dn(r._olm_pk_sign)(this.$b,t,_,o,e),L(o,e)}finally{void 0!==t&&(zn(t,_+1),xn(t))}})),kn.prototype.free=function(){r._olm_clear_sas(this.$b),xn(this.$b)},kn.prototype.get_pubkey=Sn((function(){var n=vn(r._olm_sas_pubkey_length)(this.$b),_=En(n+1);return vn(r._olm_sas_get_pubkey)(this.$b,_,n),L(_,n)})),kn.prototype.set_their_key=Sn((function(n){var _=En(n=On(n));vn(r._olm_sas_set_their_key)(this.$b,_,n.length)})),kn.prototype.is_their_key_set=Sn((function(){return!!vn(r._olm_sas_is_their_key_set)(this.$b)})),kn.prototype.generate_bytes=Sn((function(n,_){var t=En(n=On(n)),e=En(_);return vn(r._olm_sas_generate_bytes)(this.$b,t,n.length,e,_),new Uint8Array(new Uint8Array(r.HEAPU8.buffer,e,_))})),kn.prototype.calculate_mac=Sn((function(n,_){var t=En(n=On(n)),e=En(_=On(_)),o=vn(r._olm_sas_mac_length)(this.$b),l=En(o+1);return vn(r._olm_sas_calculate_mac)(this.$b,t,n.length,e,_.length,l,o),L(l,o)})),kn.prototype.calculate_mac_fixed_base64=Sn((function(n,_){var t=En(n=On(n)),e=En(_=On(_)),o=vn(r._olm_sas_mac_length)(this.$b),l=En(o+1);return vn(r._olm_sas_calculate_mac_fixed_base64)(this.$b,t,n.length,e,_.length,l,o),L(l,o)})),kn.prototype.calculate_mac_long_kdf=Sn((function(n,_){var t=En(n=On(n)),e=En(_=On(_)),o=vn(r._olm_sas_mac_length)(this.$b),l=En(o+1);return vn(r._olm_sas_calculate_mac_long_kdf)(this.$b,t,n.length,e,_.length,l,o),L(l,o)}));var $n,wn=r._malloc,xn=r._free;function An(n,_){var t=sn(n);return _(new Uint8Array(r.HEAPU8.buffer,t,n)),t}function En(n){return"number"==typeof n?An(n,(function(n){n.fill(0)})):An(n.length,(function(_){_.set(n)}))}function On(n){return n instanceof Uint8Array?n:tn(n,!0)}function Sn(n){return function(){var _=rn();try{return n.apply(this,arguments)}finally{ln(_)}}}function zn(n,_){for(;0<_--;)r.HEAP8[n++]=0}function Rn(){var n=r._olm_account_size();this.ac=wn(n),this.$b=r._olm_account(this.ac)}function Pn(n){return function(){var _=n.apply(this,arguments);if(_===$n)throw _=L(r._olm_account_last_error(arguments[0])),Error("OLM."+_);return _}}function Un(){var n=r._olm_session_size();this.ac=wn(n),this.$b=r._olm_session(this.ac)}function Mn(n){return function(){var _=n.apply(this,arguments);if(_===$n)throw _=L(r._olm_session_last_error(arguments[0])),Error("OLM."+_);return _}}function In(){var n=r._olm_utility_size();this.ac=wn(n),this.$b=r._olm_utility(this.ac)}function Ln(n){return function(){var _=n.apply(this,arguments);if(_===$n)throw _=L(r._olm_utility_last_error(arguments[0])),Error("OLM."+_);return _}}return Rn.prototype.free=function(){r._olm_clear_account(this.$b),xn(this.$b)},Rn.prototype.create=Sn((function(){var n=Pn(r._olm_create_account_random_length)(this.$b),_=An(n,s);try{Pn(r._olm_create_account)(this.$b,_,n)}finally{zn(_,n)}})),Rn.prototype.identity_keys=Sn((function(){var n=Pn(r._olm_account_identity_keys_length)(this.$b),_=En(n+1);return Pn(r._olm_account_identity_keys)(this.$b,_,n),L(_,n)})),Rn.prototype.sign=Sn((function(n){var _=Pn(r._olm_account_signature_length)(this.$b),t=En(n=On(n)),e=En(_+1);try{Pn(r._olm_account_sign)(this.$b,t,n.length,e,_)}finally{for(zn(t,n.length),t=0;t<n.length;t++)n[t]=0}return L(e,_)})),Rn.prototype.one_time_keys=Sn((function(){var n=Pn(r._olm_account_one_time_keys_length)(this.$b),_=En(n+1);return Pn(r._olm_account_one_time_keys)(this.$b,_,n),L(_,n)})),Rn.prototype.mark_keys_as_published=Sn((function(){Pn(r._olm_account_mark_keys_as_published)(this.$b)})),Rn.prototype.max_number_of_one_time_keys=Sn((function(){return Pn(r._olm_account_max_number_of_one_time_keys)(this.$b)})),Rn.prototype.generate_one_time_keys=Sn((function(n){var _=Pn(r._olm_account_generate_one_time_keys_random_length)(this.$b,n),t=An(_,s);try{Pn(r._olm_account_generate_one_time_keys)(this.$b,n,t,_)}finally{zn(t,_)}})),Rn.prototype.remove_one_time_keys=Sn((function(n){Pn(r._olm_remove_one_time_keys)(this.$b,n.$b)})),Rn.prototype.generate_fallback_key=Sn((function(){var n=Pn(r._olm_account_generate_fallback_key_random_length)(this.$b),_=An(n,s);try{Pn(r._olm_account_generate_fallback_key)(this.$b,_,n)}finally{zn(_,n)}})),Rn.prototype.fallback_key=Sn((function(){var n=Pn(r._olm_account_fallback_key_length)(this.$b),_=En(n+1);return Pn(r._olm_account_fallback_key)(this.$b,_,n),L(_,n)})),Rn.prototype.unpublished_fallback_key=Sn((function(){var n=Pn(r._olm_account_unpublished_fallback_key_length)(this.$b),_=En(n+1);return Pn(r._olm_account_unpublished_fallback_key)(this.$b,_,n),L(_,n)})),Rn.prototype.forget_old_fallback_key=Sn((function(){Pn(r._olm_account_forget_old_fallback_key)(this.$b)})),Rn.prototype.pickle=Sn((function(n){n=On(n);var _=Pn(r._olm_pickle_account_length)(this.$b),t=En(n),e=En(_+1);try{Pn(r._olm_pickle_account)(this.$b,t,n.length,e,_)}finally{for(zn(t,n.length),t=0;t<n.length;t++)n[t]=0}return L(e,_)})),Rn.prototype.unpickle=Sn((function(n,_){var t=En(n=On(n)),e=En(_=On(_));try{Pn(r._olm_unpickle_account)(this.$b,t,n.length,e,_.length)}finally{for(zn(t,n.length),t=0;t<n.length;t++)n[t]=0}})),Un.prototype.free=function(){r._olm_clear_session(this.$b),xn(this.$b)},Un.prototype.pickle=Sn((function(n){n=On(n);var _=Mn(r._olm_pickle_session_length)(this.$b),t=En(n),e=En(_+1);try{Mn(r._olm_pickle_session)(this.$b,t,n.length,e,_)}finally{for(zn(t,n.length),t=0;t<n.length;t++)n[t]=0}return L(e,_)})),Un.prototype.unpickle=Sn((function(n,_){var t=En(n=On(n)),e=En(_=On(_));try{Mn(r._olm_unpickle_session)(this.$b,t,n.length,e,_.length)}finally{for(zn(t,n.length),t=0;t<n.length;t++)n[t]=0}})),Un.prototype.create_outbound=Sn((function(n,_,t){var e=Mn(r._olm_create_outbound_session_random_length)(this.$b),o=An(e,s);_=On(_),t=On(t);var l=En(_),i=En(t);try{Mn(r._olm_create_outbound_session)(this.$b,n.$b,l,_.length,i,t.length,o,e)}finally{zn(o,e)}})),Un.prototype.create_inbound=Sn((function(n,_){var t=En(_=On(_));try{Mn(r._olm_create_inbound_session)(this.$b,n.$b,t,_.length)}finally{for(zn(t,_.length),n=0;n<_.length;n++)_[n]=0}})),Un.prototype.create_inbound_from=Sn((function(n,_,t){var e=En(_=On(_)),o=En(t=On(t));try{Mn(r._olm_create_inbound_session_from)(this.$b,n.$b,e,_.length,o,t.length)}finally{for(zn(o,t.length),n=0;n<t.length;n++)t[n]=0}})),Un.prototype.session_id=Sn((function(){var n=Mn(r._olm_session_id_length)(this.$b),_=En(n+1);return Mn(r._olm_session_id)(this.$b,_,n),L(_,n)})),Un.prototype.has_received_message=function(){return!!Mn(r._olm_session_has_received_message)(this.$b)},Un.prototype.matches_inbound=Sn((function(n){var _=En(n=On(n));return!!Mn(r._olm_matches_inbound_session)(this.$b,_,n.length)})),Un.prototype.matches_inbound_from=Sn((function(n,_){var t=En(n=On(n)),e=En(_=On(_));return!!Mn(r._olm_matches_inbound_session_from)(this.$b,t,n.length,e,_.length)})),Un.prototype.encrypt=Sn((function(n){try{var _=Mn(r._olm_encrypt_random_length)(this.$b),t=Mn(r._olm_encrypt_message_type)(this.$b),e=H(n),o=Mn(r._olm_encrypt_message_length)(this.$b,e),l=An(_,s),i=wn(e+1);T(n,O,i,e+1);var u=wn(o+1);return Mn(r._olm_encrypt)(this.$b,i,e,l,_,u,o),nn(u+o),{type:t,body:L(u,o)}}finally{void 0!==l&&zn(l,_),void 0!==i&&(zn(i,e+1),xn(i)),void 0!==u&&xn(u)}})),Un.prototype.decrypt=Sn((function(n,_){try{var t=wn(_.length);_n(_,t,!0);var e=Mn(r._olm_decrypt_max_plaintext_length)(this.$b,n,t,_.length);_n(_,t,!0);var o=wn(e+1),l=Mn(r._olm_decrypt)(this.$b,n,t,_.length,o,e);return nn(o+l),L(o,l)}finally{void 0!==t&&xn(t),void 0!==o&&(zn(o,e),xn(o))}})),Un.prototype.describe=Sn((function(){try{var n=wn(256);return Mn(r._olm_session_describe)(this.$b,n,256),L(n)}finally{void 0!==n&&xn(n)}})),In.prototype.free=function(){r._olm_clear_utility(this.$b),xn(this.$b)},In.prototype.sha256=Sn((function(n){var _=Ln(r._olm_sha256_length)(this.$b),t=En(n=On(n)),e=En(_+1);try{Ln(r._olm_sha256)(this.$b,t,n.length,e,_)}finally{for(zn(t,n.length),t=0;t<n.length;t++)n[t]=0}return L(e,_)})),In.prototype.ed25519_verify=Sn((function(n,_,t){var e=En(n=On(n)),o=En(_=On(_)),l=En(t=On(t));try{Ln(r._olm_ed25519_verify)(this.$b,e,n.length,o,_.length,l,t.length)}finally{for(zn(o,_.length),n=0;n<_.length;n++)_[n]=0}})),o.Account=Rn,o.Session=Un,o.Utility=In,o.PkEncryption=yn,o.PkDecryption=hn,o.PkSigning=bn,o.SAS=kn,o.get_library_version=Sn((function(){var n=En(3);return r._olm_get_library_version(n,n+1,n+2),[Z(n,"i8"),Z(n+1,"i8"),Z(n+2,"i8")]})),e.ready});return"object"==typeof exports&&"object"==typeof module?module.exports=r:"function"==typeof define&&define.amd?define([],(function(){return r})):"object"==typeof exports&&(exports.Module=r),o.init=function(t){return e||(t&&(OLM_OPTIONS=t),e=new Promise((function(t,e){n=function(){t()},_=function(n){e(n)},r()})))},o}();"undefined"!=typeof window&&(window.Olm=Olm),"object"==typeof module&&(module.exports=Olm);