(self.webpackChunkfiles_sdk_demo=self.webpackChunkfiles_sdk_demo||[]).push([[179],{82285:(t,e,n)=>{"use strict";var r=n(24234),o=n(55161),$=n.n(o),s=n(36798),c=n(84250),i=n(26427);async function a(t){const e=new URL(t);return e.search="",e.pathname="/.well-known/matrix/client",(await fetch(e.href)).json()}async function l(t){return(0,s.createClient)({baseUrl:t}).loginFlows()}async function f(t,e,n,r,o){const $=await p(t,{baseUrl:e,accessToken:n,userId:r,deviceId:o});return await $.client.waitForClientWellKnown(),$}async function p(t,e){const n=new c.LocalStorageCryptoStore(t);await n.startup();const r=(0,s.createClient)(Object.assign(Object.assign({},e),{cryptoStore:n,useAuthorizationHeader:!0,cryptoCallbacks:{},timelineSupport:!0}));return new i.MatrixFiles(r)}var d=n(34296);const u=(0,d.getLogger)("Storage");function g(t){return`mx_f_${t}`}function m(t,e){const n=g(t);u.debug(`localStorage.setItem(${n}) = ${e}`),localStorage.setItem(n,JSON.stringify(e))}function y(t,e){const n=g(t),r=localStorage.getItem(n);if(u.debug(`localStorage.getItem(${n}) = ${r}`),null==r)return e;try{return JSON.parse(r)}catch(t){return m(n,e),e}}var h=n(17187),v=n.n(h),w=n(12600);class x extends(v()){constructor(t){super(),this.client=t,t.on(w.CryptoEvent.KeyBackupStatus,this.onKeyBackupStatus)}async init(){await this.client.initCrypto(),this.client.setCryptoTrustCrossSignedDevices(!0);const t=this.client.getUserId();t&&await this.client.downloadKeys([t]),this.client.setGlobalErrorOnUnknownDevices(!1)}async isKeyBackupAvailable(){return!!await this.client.getKeyBackupVersion()}async getKeyBackupInfo(){return this.client.getKeyBackupVersion()}async connectToExistingKeyBackup(t){const e=await this.client.getKeyBackupVersion();if(!e)throw new Error("No key backup available");return{restoreResult:await this.client.restoreKeyBackupWithPassword(t,void 0,void 0,e,{}),trustInfo:await this.client.isKeyBackupTrusted(e)}}isConnectedToKeyBackup(){return!!this.client.getKeyBackupEnabled()}async createNewKeyBackup(t){const e=await this.client.prepareKeyBackupVersion(t);return await this.client.createKeyBackupVersion(e),e.recovery_key}onKeyBackupStatus(t){this.emit("keyBackupStatus",this,t)}}class L{constructor(t){this.listeners=[],this.value=t}onUpdate(t){this.listeners.push(t)}update(t){this.value=t;for(const e of this.listeners)e(t)}close(){this.listeners=[]}}var I=n(8274),T=n(66128),U=n(44586),C=n(25108);const b=(0,d.getLogger)("ClientManager"),Y={"https://dev-6525741.okta.com/":{client_id:"0oa5qpnjvfLILbe3W5d7"},"http://localhost:8091/realms/master/":{client_id:"files-sdk-demo"},"https://keycloak-oidc.lab.element.dev/realms/master/":{client_id:"files-sdk-demo"}};class E{constructor(){this.authedState=new L(!1),this.password="",this.keyBackupPassphrase="",this.grant_types_supported=[]}get homeserverUrl(){return y("homeserverUrl","http://localhost:8080")}set homeserverUrl(t){m("homeserverUrl",t)}get oidcIssuer(){return y("oidcIssuer","")}set oidcIssuer(t){m("oidcIssuer",t)}get oidcClientIssuer(){return y("oidcClientIssuer","")}set oidcClientIssuer(t){m("oidcClientIssuer",t)}get oidcClientId(){return y("oidcClientId","")}set oidcClientId(t){m("oidcClientId",t)}get oidcClientSecret(){return y("oidcClientSecret",void 0)}set oidcClientSecret(t){m("oidcClientSecret",t)}get accessToken(){return y("accessToken","")}set accessToken(t){m("accessToken",t)}get deviceId(){return y("deviceId","")}set deviceId(t){m("deviceId",t)}get userId(){return y("userId","")}set userId(t){m("userId",t)}get files(){if(!this._files)throw new Error("No MatrixFiles connected");return this._files}get client(){if(!this._files)throw new Error("No MatrixFiles connected");return this._files.getClient()}get crypto(){if(!this._crypto)throw new Error("No MatrixFiles connected");return this._crypto}async getIssuerMetadata(){if(!this.oidcIssuerMetadata||this.oidcIssuer!==this.oidcIssuerMetadata.issuer){this.oidcIssuerMetadata=await new T.Do(new T.EB({authority:this.oidcIssuer,redirect_uri:"notused",client_id:"notused"})).getMetadata();const{grant_types_supported:t,device_authorization_endpoint:e,authorization_endpoint:n}=this.oidcIssuerMetadata;t?this.grant_types_supported=t:(this.grant_types_supported=[],n&&(this.grant_types_supported.push("authorization_code"),this.grant_types_supported.push("refresh_token")),e&&this.grant_types_supported.push("urn:ietf:params:oauth:grant-type:device_code"))}return this.oidcIssuerMetadata}async assertOidcClientId(){const t=this.authority;if(Y[t])this.oidcClientId=Y[t].client_id,this.oidcClientSecret=Y[t].client_secret,this.oidcClientIssuer=t,b.info(`Using existing OIDC client_id ${this.oidcClientId} with issuer ${t}`);else if(!this.oidcClientId||this.oidcClientIssuer!==t){const{registration_endpoint:e}=await this.getIssuerMetadata();if(!e)throw new Error("Unable to register with issuer");const n=["authorization_code","refresh_token","urn:ietf:params:oauth:grant-type:device_code"].filter((t=>this.grant_types_supported.includes(t)));if(0===n.length||1===n.length&&n.includes("refresh_token"))throw new Error("No supported authentication flow available");b.info(`Attempting registration with OIDC issuer at ${e}`);const r={client_name:"Files SDK Demo",logo_uri:new URL("logo.svg",this.client_uri).href,client_uri:this.client_uri,tos_uri:"https://element.io/terms-of-service",policy_uri:"https://element.io/privacy",response_types:["code"],grant_types:n,redirect_uris:[this.redirect_uri],id_token_signed_response_alg:"RS256",token_endpoint_auth_method:"none"};try{const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"omit",cache:"no-cache",body:JSON.stringify(r)}),o=await n.json();if(o.error)throw new Error(`${o.error}: ${o.error_description}`);Y[t]={client_id:o.client_id,client_secret:o.client_secret},b.info(`Registered with OIDC issuer as ${o.client_id}`),t===this.authority&&(this.oidcClientId=o.client_id,this.oidcClientSecret=o.client_secret,this.oidcClientIssuer=t)}catch(e){throw b.error(e),new Error(`Unable to register with OIDC Provider (${t}) - ${null==e?void 0:e.message}`)}}if(!await this.hasUsableGrant())throw new Error("No supported authentication flow available")}async hasUsableGrant(){return await this.getIssuerMetadata(),!!this.grant_types_supported.some((t=>E.supportedGrants.includes(t)))}async supportsDeviceCode(){const{device_authorization_endpoint:t}=await this.getIssuerMetadata();return!(!this.grant_types_supported.includes("urn:ietf:params:oauth:grant-type:device_code")||!t)}get authority(){return`${this.oidcIssuer}${this.oidcIssuer.endsWith("/")?"":"/"}`}get client_uri(){return document.location.origin+document.location.pathname}get redirect_uri(){return this.client_uri}async getOidcUserManager(){return this.userManager&&this.userManager.settings.authority!==this.oidcIssuer&&(b.info("Recreating OIDC UserManager as issuer changed"),this.userManager.stopSilentRenew(),this.userManager=void 0),this.userManager||(await this.assertOidcClientId(),this.deviceId||(this.deviceId=(0,U.Z)()),this.userManager=new T.ws({authority:this.authority,client_id:this.oidcClientId,client_secret:this.oidcClientSecret,redirect_uri:this.redirect_uri,accessTokenExpiringNotificationTimeInSeconds:30,scope:`openid urn:matrix:org.matrix.msc2967.client:api:* urn:matrix:org.matrix.msc2967.client:device:${this.deviceId}`}),this.userManager.events.addUserLoaded((({access_token:t,expires_in:e})=>{b.debug(`Access token renewed with new expiry in ${e}s`),this.accessToken=t,this._files&&(this._files.client.http.opts.accessToken=t)}))),this.userManager}get hasAuthData(){return b.debug(`hasAuthData() homeserverUrl=${!!this.homeserverUrl} accessToken=${!!this.accessToken} deviceId=${!!this.deviceId} userId=${!!this.userId}`),!!(this.homeserverUrl&&this.accessToken&&this.deviceId&&this.userId)}async wrapForbidden(t){try{await t()}catch(t){if(b.error(t),!(t instanceof s.MatrixError&&"M_FORBIDDEN"===t.errcode))throw t;I.Vy.warning("You have been signed out",{duration:5e3}),await this._logout(),$().redirect("/signin")}}async rehydrate(){this.oidcIssuer&&await this.getOidcUserManager(),await this.wrapForbidden((async()=>{this._files=await f(localStorage,this.homeserverUrl,this.accessToken,this.userId,this.deviceId),await this.bootstrap()}))}async loginWithOidcNormalFlow(){b.info("loginWithOidcNormalFlow()");const t=await this.getOidcUserManager();await t.signinRedirect()}async startLoginWithOidcDeviceFlow(){b.info("startLoginWithOidcDeviceFlow()");const t=await this.getOidcUserManager();return this.deviceFlow=await t.startDeviceAuthorization(),this.deviceFlow}async waitForLoginWithOidcDeviceFlow(){if(b.info("waitForLoginWithOidcDeviceFlow()"),!this.deviceFlow)throw new Error("Device flow not started");const t=await this.getOidcUserManager(),e=await t.waitForDeviceAuthorization(this.deviceFlow);this.deviceFlow=void 0;const{access_token:n}=e;return n&&(await this.whoami(n),await this.rehydrate()),$().redirect("/"),e}async registerWithOidc(){b.info("registerWithOidc()"),await(await this.getOidcUserManager()).signinRedirect({prompt:"create"})}async whoami(t){const e=new URL(this.homeserverUrl);e.search="",e.pathname="/_matrix/client/v3/account/whoami";const n=await fetch(e.href,{headers:{Authorization:`Bearer ${t}`}}),{device_id:r,user_id:o}=await n.json();b.info(`whoami() => device_id=${r} user_id=${o}`),this.accessToken=t,this.deviceId=r,this.userId=o,this.password=""}async completeOidcLogin(){if(b.info("completeOidcLogin()"),this.oidcIssuer){const t=await(await this.getOidcUserManager()).signinCallback();if(t){const{access_token:e}=t;await this.whoami(e),window.history.pushState("object",document.title,location.href.split("?")[0]),await this.rehydrate(),$().replace("/")}}else b.warn("Received OIDC code but no issuer available")}async loginWithPassword(){var t,e,n;b.info("loginWithPassword()"),this._files=await async function(t,e,n,r){var o,$;const c=(0,s.createClient)({baseUrl:e}),i=await c.loginWithPassword(n,r),{access_token:a,user_id:l,well_known:f,device_id:d}=i;return p(t,{baseUrl:null!==($=null===(o=null==f?void 0:f["m.homeserver"])||void 0===o?void 0:o.base_url)&&void 0!==$?$:e,accessToken:a,userId:l,deviceId:d})}(localStorage,this.homeserverUrl,this.userId,this.password),this.homeserverUrl=this.client.getHomeserverUrl(),this.accessToken=null!==(t=this.client.getAccessToken())&&void 0!==t?t:"",this.deviceId=null!==(e=this.client.deviceId)&&void 0!==e?e:"",this.userId=null!==(n=this.client.getUserId())&&void 0!==n?n:"",await this.wrapForbidden(this.bootstrap)}async register(){var t,e,n;b.info("register()"),this._files=await async function(t,e,n,r){var o,$;const c=(0,s.createClient)({baseUrl:e}),i=await c.register(n,r,null,{type:"m.login.dummy"}),{access_token:a,user_id:l,device_id:p}=i,d=await c.waitForClientWellKnown(),u=null!==($=null===(o=null==d?void 0:d["m.homeserver"])||void 0===o?void 0:o.base_url)&&void 0!==$?$:e;if(!a)throw new Error("No access token returned from registration");return f(t,u,a,l,p)}(localStorage,this.homeserverUrl,this.userId,this.password),this.homeserverUrl=this.client.getHomeserverUrl(),this.accessToken=null!==(t=this.client.getAccessToken())&&void 0!==t?t:"",this.deviceId=null!==(e=this.client.deviceId)&&void 0!==e?e:"",this.userId=null!==(n=this.client.getUserId())&&void 0!==n?n:"",await this.wrapForbidden(this.bootstrap)}async bootstrap(){if(!this._files)throw new Error("Not logged in");this.client.on(s.HttpApiEvent.SessionLoggedOut,(()=>{C.log("Session.logged_out"),this._logout()})),await this.client.whoami(),this._crypto=new x(this._files.client),await this._crypto.init(),await this._files.sync(),I.Vy.info(`${this.userId} logged in`,{duration:5e3}),this.authedState.update(!0)}async _logout(){this.userId="",this.keyBackupPassphrase="",this.password="",this.deviceId="",this.accessToken="",this.authedState.update(!1)}async logout(){if(b.info("logout()"),this._files){try{await this._files.logout()}catch(t){b.warn(t)}this._files=void 0,this._crypto=void 0}if(this.oidcIssuer){const t=await this.getOidcUserManager();await t.revokeTokens(["access_token","refresh_token"])}localStorage.clear(),sessionStorage.clear(),await this._logout()}on(t,e){this._files&&this._files.on(t,e)}off(t,e){this._files&&this._files.off(t,e)}}function D(t){let e;return{c(){e=(0,r.bGB)("h1"),e.textContent="Oh no, page not found.",(0,r.Ljt)(e,"class","svelte-oqiykx")},m(t,n){(0,r.$Tr)(t,e,n)},p:r.ZTd,i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function k(t,e,n){let{clientManager:r}=e;return t.$$set=t=>{"clientManager"in t&&n(0,r=t.clientManager)},[r]}E.supportedGrants=["authorization_code","urn:ietf:params:oauth:grant-type:device_code"];class _ extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,k,D,r.N8,{clientManager:0})}}const X=_;var W=n(79389),R=n(68568),B=n(27484),S=n.n(B),Z=n(78392);function O(t,e,n){const r=t.slice();return r[10]=e[n],r}function M(t){let e,n,o;return{c(){e=(0,r.bGB)("p"),n=(0,r.bGB)("a"),o=(0,r.fLW)("Manage account"),(0,r.Ljt)(n,"href",t[7]),(0,r.Ljt)(n,"target","_blank")},m(t,$){(0,r.$Tr)(t,e,$),(0,r.R3I)(e,n),(0,r.R3I)(n,o)},p(t,e){128&e&&(0,r.Ljt)(n,"href",t[7])},d(t){t&&(0,r.ogt)(e)}}}function G(t){let e,n=t[6][t[10].device_id].crossSigningVerified||t[8]().getDeviceId()===t[10].device_id?"gpp_good":"gpp_maybe";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){96&o&&n!==(n=t[6][t[10].device_id].crossSigningVerified||t[8]().getDeviceId()===t[10].device_id?"gpp_good":"gpp_maybe")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function j(t){let e,n,o,$,s,c,i,a,l,f,p=(t[10].display_name||t[10].device_id)+"",d=(t[10].last_seen_ip??"unknown")+"",u=(t[10].last_seen_ts?S()(t[10].last_seen_ts).format("LT"):"unknown")+"",g=t[8]().getDeviceId()===t[10].device_id?" this session":"";return n=new Z.JO({props:{class:"material-icons-round",style:t[6][t[10].device_id].crossSigningVerified||t[8]().getDeviceId()===t[10].device_id?"color: var(--mdc-theme-primary)":"color: var(--mdc-theme-error)",$$slots:{default:[G]},$$scope:{ctx:t}}}),{c(){e=(0,r.bGB)("li"),(0,r.YCL)(n.$$.fragment),o=(0,r.fLW)(p),$=(0,r.fLW)(" from "),s=(0,r.fLW)(d),c=(0,r.fLW)(" at "),i=(0,r.fLW)(u),a=(0,r.fLW)(g),(0,r.Ljt)(e,"title",l=t[10].device_id)},m(t,l){(0,r.$Tr)(t,e,l),(0,r.yef)(n,e,null),(0,r.R3I)(e,o),(0,r.R3I)(e,$),(0,r.R3I)(e,s),(0,r.R3I)(e,c),(0,r.R3I)(e,i),(0,r.R3I)(e,a),f=!0},p(t,$){const c={};96&$&&(c.style=t[6][t[10].device_id].crossSigningVerified||t[8]().getDeviceId()===t[10].device_id?"color: var(--mdc-theme-primary)":"color: var(--mdc-theme-error)"),8288&$&&(c.$$scope={dirty:$,ctx:t}),n.$set(c),(!f||32&$)&&p!==(p=(t[10].display_name||t[10].device_id)+"")&&(0,r.rTO)(o,p),(!f||32&$)&&d!==(d=(t[10].last_seen_ip??"unknown")+"")&&(0,r.rTO)(s,d),(!f||32&$)&&u!==(u=(t[10].last_seen_ts?S()(t[10].last_seen_ts).format("LT"):"unknown")+"")&&(0,r.rTO)(i,u),(!f||32&$)&&g!==(g=t[8]().getDeviceId()===t[10].device_id?" this session":"")&&(0,r.rTO)(a,g),(!f||32&$&&l!==(l=t[10].device_id))&&(0,r.Ljt)(e,"title",l)},i(t){f||((0,r.Ui)(n.$$.fragment,t),f=!0)},o(t){(0,r.etI)(n.$$.fragment,t),f=!1},d(t){t&&(0,r.ogt)(e),(0,r.vpE)(n)}}}function N(t){let e,n,o,$,s,c,i,a,l,f,p,d,u,g,m,y,h,v,w,x,L,I,T,U,C,b,Y,E,D,k,_,X,R,B,S,Z,G,N,F,z,P,V,K=(void 0===t[1]?"checking":t[1])+"",A=(void 0===t[2]?"checking":t[2])+"",H=(void 0===t[3]?"checking":t[3])+"",q=t[0].crypto.isConnectedToKeyBackup()+"",J=t[7]&&M(t),Q=t[5],tt=[];for(let e=0;e<Q.length;e+=1)tt[e]=j(O(t,Q,e));const et=t=>(0,r.etI)(tt[t],1,1,(()=>{tt[t]=null}));return P=new W.g({props:{json:t[4]}}),{c(){e=(0,r.DhX)(),n=(0,r.bGB)("h3"),n.textContent="General",o=(0,r.DhX)(),$=(0,r.bGB)("p"),$.textContent=`Homeserver: ${t[8]().getHomeserverUrl()}`,s=(0,r.DhX)(),c=(0,r.bGB)("p"),c.textContent=`User ID: ${t[8]().getUserId()}`,i=(0,r.DhX)(),a=(0,r.bGB)("p"),a.textContent=`Device ID: ${t[8]().getDeviceId()}`,l=(0,r.DhX)(),f=(0,r.bGB)("p"),p=(0,r.fLW)("MatrixClient.isCrossSigningReady: "),d=(0,r.fLW)(K),u=(0,r.DhX)(),g=(0,r.bGB)("p"),m=(0,r.fLW)("MatrixClient.isSecretStorageReady: "),y=(0,r.fLW)(A),h=(0,r.DhX)(),J&&J.c(),v=(0,r.DhX)(),w=(0,r.bGB)("hr"),x=(0,r.DhX)(),L=(0,r.bGB)("h3"),L.textContent="Sessions",I=(0,r.DhX)(),T=(0,r.bGB)("ul");for(let t=0;t<tt.length;t+=1)tt[t].c();U=(0,r.DhX)(),C=(0,r.bGB)("hr"),b=(0,r.DhX)(),Y=(0,r.bGB)("h3"),Y.textContent="Key backup",E=(0,r.DhX)(),D=(0,r.bGB)("p"),k=(0,r.fLW)("MatrixCrypto.isKeyBackupAvailable: "),_=(0,r.fLW)(H),X=(0,r.DhX)(),R=(0,r.bGB)("p"),B=(0,r.fLW)("MatrixCrypto.isConnectedToKeyBackup: "),S=(0,r.fLW)(q),Z=(0,r.DhX)(),G=(0,r.bGB)("p"),N=(0,r.fLW)("MatrixCrypto.getKeyBackupInfo():"),F=(0,r.bGB)("br"),z=(0,r.DhX)(),(0,r.YCL)(P.$$.fragment),document.title="Settings"},m(t,W){(0,r.$Tr)(t,e,W),(0,r.$Tr)(t,n,W),(0,r.$Tr)(t,o,W),(0,r.$Tr)(t,$,W),(0,r.$Tr)(t,s,W),(0,r.$Tr)(t,c,W),(0,r.$Tr)(t,i,W),(0,r.$Tr)(t,a,W),(0,r.$Tr)(t,l,W),(0,r.$Tr)(t,f,W),(0,r.R3I)(f,p),(0,r.R3I)(f,d),(0,r.$Tr)(t,u,W),(0,r.$Tr)(t,g,W),(0,r.R3I)(g,m),(0,r.R3I)(g,y),(0,r.$Tr)(t,h,W),J&&J.m(t,W),(0,r.$Tr)(t,v,W),(0,r.$Tr)(t,w,W),(0,r.$Tr)(t,x,W),(0,r.$Tr)(t,L,W),(0,r.$Tr)(t,I,W),(0,r.$Tr)(t,T,W);for(let t=0;t<tt.length;t+=1)tt[t].m(T,null);(0,r.$Tr)(t,U,W),(0,r.$Tr)(t,C,W),(0,r.$Tr)(t,b,W),(0,r.$Tr)(t,Y,W),(0,r.$Tr)(t,E,W),(0,r.$Tr)(t,D,W),(0,r.R3I)(D,k),(0,r.R3I)(D,_),(0,r.$Tr)(t,X,W),(0,r.$Tr)(t,R,W),(0,r.R3I)(R,B),(0,r.R3I)(R,S),(0,r.$Tr)(t,Z,W),(0,r.$Tr)(t,G,W),(0,r.R3I)(G,N),(0,r.R3I)(G,F),(0,r.R3I)(G,z),(0,r.yef)(P,G,null),V=!0},p(t,[e]){if((!V||2&e)&&K!==(K=(void 0===t[1]?"checking":t[1])+"")&&(0,r.rTO)(d,K),(!V||4&e)&&A!==(A=(void 0===t[2]?"checking":t[2])+"")&&(0,r.rTO)(y,A),t[7]?J?J.p(t,e):(J=M(t),J.c(),J.m(v.parentNode,v)):J&&(J.d(1),J=null),352&e){let n;for(Q=t[5],n=0;n<Q.length;n+=1){const o=O(t,Q,n);tt[n]?(tt[n].p(o,e),(0,r.Ui)(tt[n],1)):(tt[n]=j(o),tt[n].c(),(0,r.Ui)(tt[n],1),tt[n].m(T,null))}for((0,r.dvw)(),n=Q.length;n<tt.length;n+=1)et(n);(0,r.gbL)()}(!V||8&e)&&H!==(H=(void 0===t[3]?"checking":t[3])+"")&&(0,r.rTO)(_,H),(!V||1&e)&&q!==(q=t[0].crypto.isConnectedToKeyBackup()+"")&&(0,r.rTO)(S,q);const n={};16&e&&(n.json=t[4]),P.$set(n)},i(t){if(!V){for(let t=0;t<Q.length;t+=1)(0,r.Ui)(tt[t]);(0,r.Ui)(P.$$.fragment,t),V=!0}},o(t){tt=tt.filter(Boolean);for(let t=0;t<tt.length;t+=1)(0,r.etI)(tt[t]);(0,r.etI)(P.$$.fragment,t),V=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),t&&(0,r.ogt)(o),t&&(0,r.ogt)($),t&&(0,r.ogt)(s),t&&(0,r.ogt)(c),t&&(0,r.ogt)(i),t&&(0,r.ogt)(a),t&&(0,r.ogt)(l),t&&(0,r.ogt)(f),t&&(0,r.ogt)(u),t&&(0,r.ogt)(g),t&&(0,r.ogt)(h),J&&J.d(t),t&&(0,r.ogt)(v),t&&(0,r.ogt)(w),t&&(0,r.ogt)(x),t&&(0,r.ogt)(L),t&&(0,r.ogt)(I),t&&(0,r.ogt)(T),(0,r.RMB)(tt,t),t&&(0,r.ogt)(U),t&&(0,r.ogt)(C),t&&(0,r.ogt)(b),t&&(0,r.ogt)(Y),t&&(0,r.ogt)(E),t&&(0,r.ogt)(D),t&&(0,r.ogt)(X),t&&(0,r.ogt)(R),t&&(0,r.ogt)(Z),t&&(0,r.ogt)(G),(0,r.vpE)(P)}}}function F(t,e,n){let r,o,$,s,{clientManager:c}=e;function i(){return c.client}let l,f=[],p={};return(0,R.H3)((async function(){var t,e;n(1,r=await i().isCrossSigningReady()),n(2,o=await i().isSecretStorageReady()),n(3,$=await c.crypto.isKeyBackupAvailable()),n(4,s=null!==(t=await c.crypto.getKeyBackupInfo())&&void 0!==t?t:void 0),n(5,f=(await i().getDevices()).devices);const d=c.client.getUserId();d&&n(6,p=f.reduce(((t,e)=>(t[e.device_id]=c.client.checkDeviceTrust(d,e.device_id),t)),{})),n(7,l=null===(e=(await a(i().baseUrl))["org.matrix.msc2965.authentication"])||void 0===e?void 0:e.account)})),t.$$set=t=>{"clientManager"in t&&n(0,c=t.clientManager)},[c,r,o,$,s,f,p,l,i]}class z extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,F,N,r.N8,{clientManager:0})}}const P=z;var V=n(8830),K=n(25108);function A(t){return t.sort(((t,e)=>t.name.localeCompare(e.name)))}function H(t){return t.match(/\.(png|jpg|jpeg|tiff|tif|gif)$/)?"image":t.match(/\.(pdf)$/)?"picture_as_pdf":"article"}async function q(t,e){let n=!1;try{await t()}catch(t){t.message.match(/Failed to find event/)&&(n=!0),K.error(t),I.Vy.error(`${e}: ${t.message}`)}return n}function J(t,e,n){return r=>{const o=tt(t,e.map((t=>t.name)),"folder")(r);return!0!==o?o:tt(t,n.map((t=>t.name)),"file")(r)}}function Q(t,e){return tt(t,e.map((t=>t.name)),"workspace")}function tt(t,e,n){return r=>"string"==typeof t&&r===t||(""===r?"You must enter a name":!e.find((t=>t===r))||`A ${n} called ${r} already exists`)}function et(t){document.querySelectorAll(".mdc-menu-surface").forEach((e=>e.setAttribute("style",`left: ${t.clientX}px; top: ${t.clientY}px; position: fixed;`)))}function nt(t){et(t),setTimeout((()=>et(t)),10),setTimeout((()=>et(t)),100)}function rt(t,e){let n;return r=>{n&&clearTimeout(n),n=setTimeout((()=>{t(r)}),e)}}function ot(t,e,n){const r=t.slice();return r[7]=e[n],r}function $t(t){let e;return{c(){e=(0,r.fLW)("Shared with me")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function st(t){let e;return{c(){e=(0,r.fLW)("Name")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function ct(t){let e;return{c(){e=(0,r.fLW)("Shared by")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function it(t){let e;return{c(){e=(0,r.fLW)("Accepted")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function at(t){let e,n,o,$,s,c,i,a;return e=new V.bL({}),o=new V.bL({props:{$$slots:{default:[st]},$$scope:{ctx:t}}}),s=new V.bL({props:{$$slots:{default:[ct]},$$scope:{ctx:t}}}),i=new V.bL({props:{$$slots:{default:[it]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment)},m(t,l){(0,r.yef)(e,t,l),(0,r.$Tr)(t,n,l),(0,r.yef)(o,t,l),(0,r.$Tr)(t,$,l),(0,r.yef)(s,t,l),(0,r.$Tr)(t,c,l),(0,r.yef)(i,t,l),a=!0},p(t,e){const n={};1024&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const r={};1024&e&&(r.$$scope={dirty:e,ctx:t}),s.$set(r);const $={};1024&e&&($.$$scope={dirty:e,ctx:t}),i.$set($)},i(t){a||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),a=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),a=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t),t&&(0,r.ogt)(c),(0,r.vpE)(i,t)}}}function lt(t){let e,n;return e=new V.X2({props:{$$slots:{default:[at]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};1024&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function ft(t){let e;return{c(){e=(0,r.bGB)("span"),e.textContent="work",(0,r.Ljt)(e,"class","material-icons-round solo-icon svelte-1mth730")},m(t,n){(0,r.$Tr)(t,e,n)},p:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function pt(t){let e,n=t[7].name+"";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){1&o&&n!==(n=t[7].name+"")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function dt(t){let e,n=t[7].sharedBy+"";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){1&o&&n!==(n=t[7].sharedBy+"")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function ut(t){let e,n;return e=new Z.ZP({props:{$$slots:{default:[yt]},$$scope:{ctx:t}}}),e.$on("click",(function(){return t[4](t[7])})),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(n,r){t=n;const o={};1024&r&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function gt(t){return{c:r.ZTd,m:r.ZTd,p:r.ZTd,i:r.ZTd,o:r.ZTd,d:r.ZTd}}function mt(t){let e;return{c(){e=(0,r.fLW)("Accept")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function yt(t){let e,n;return e=new Z.__({props:{$$slots:{default:[mt]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};1024&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function ht(t){let e,n,o,$;const s=[gt,ut],c=[];function i(t,e){return t[7].accepted?0:1}return e=i(t),n=c[e]=s[e](t),{c(){n.c(),o=(0,r.cSb)()},m(t,n){c[e].m(t,n),(0,r.$Tr)(t,o,n),$=!0},p(t,$){let a=e;e=i(t),e===a?c[e].p(t,$):((0,r.dvw)(),(0,r.etI)(c[a],1,1,(()=>{c[a]=null})),(0,r.gbL)(),n=c[e],n?n.p(t,$):(n=c[e]=s[e](t),n.c()),(0,r.Ui)(n,1),n.m(o.parentNode,o))},i(t){$||((0,r.Ui)(n),$=!0)},o(t){(0,r.etI)(n),$=!1},d(t){c[e].d(t),t&&(0,r.ogt)(o)}}}function vt(t){let e,n,o,$,s,c,i,a,l;return e=new V.bL({props:{$$slots:{default:[ft]},$$scope:{ctx:t}}}),o=new V.bL({props:{$$slots:{default:[pt]},$$scope:{ctx:t}}}),s=new V.bL({props:{$$slots:{default:[dt]},$$scope:{ctx:t}}}),i=new V.bL({props:{$$slots:{default:[ht]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment),a=(0,r.DhX)()},m(t,f){(0,r.yef)(e,t,f),(0,r.$Tr)(t,n,f),(0,r.yef)(o,t,f),(0,r.$Tr)(t,$,f),(0,r.yef)(s,t,f),(0,r.$Tr)(t,c,f),(0,r.yef)(i,t,f),(0,r.$Tr)(t,a,f),l=!0},p(t,n){const r={};1024&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};1025&n&&($.$$scope={dirty:n,ctx:t}),o.$set($);const c={};1025&n&&(c.$$scope={dirty:n,ctx:t}),s.$set(c);const a={};1025&n&&(a.$$scope={dirty:n,ctx:t}),i.$set(a)},i(t){l||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),l=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),l=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t),t&&(0,r.ogt)(c),(0,r.vpE)(i,t),t&&(0,r.ogt)(a)}}}function wt(t){let e,n;return e=new V.X2({props:{class:"cursor-pointer",$$slots:{default:[vt]},$$scope:{ctx:t}}}),e.$on("dblclick:preventDefault",(function(){return t[5](t[7])})),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(n,r){t=n;const o={};1025&r&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function xt(t){let e,n,o=t[0],$=[];for(let e=0;e<o.length;e+=1)$[e]=wt(ot(t,o,e));const s=t=>(0,r.etI)($[t],1,1,(()=>{$[t]=null}));return{c(){for(let t=0;t<$.length;t+=1)$[t].c();e=(0,r.cSb)()},m(t,o){for(let e=0;e<$.length;e+=1)$[e].m(t,o);(0,r.$Tr)(t,e,o),n=!0},p(t,n){if(3&n){let c;for(o=t[0],c=0;c<o.length;c+=1){const s=ot(t,o,c);$[c]?($[c].p(s,n),(0,r.Ui)($[c],1)):($[c]=wt(s),$[c].c(),(0,r.Ui)($[c],1),$[c].m(e.parentNode,e))}for((0,r.dvw)(),c=o.length;c<$.length;c+=1)s(c);(0,r.gbL)()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)(0,r.Ui)($[t]);n=!0}},o(t){$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)(0,r.etI)($[t]);n=!1},d(t){(0,r.RMB)($,t),t&&(0,r.ogt)(e)}}}function Lt(t){let e,n,o,$;return e=new V.Fb({props:{$$slots:{default:[lt]},$$scope:{ctx:t}}}),o=new V.uT({props:{$$slots:{default:[xt]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};1024&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};1025&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function It(t){let e,n,o,$,s,c;return o=new Z.ZP({props:{href:"#",variant:"text",$$slots:{default:[$t]},$$scope:{ctx:t}}}),o.$on("click:preventDefault",t[3]),s=new V.ZP({props:{style:"width: 100%; border: none;",$$slots:{default:[Lt]},$$scope:{ctx:t}}}),{c(){e=(0,r.DhX)(),n=(0,r.bGB)("div"),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),document.title="Shared with me",(0,r.Ljt)(n,"class","svelte-1mth730")},m(t,i){(0,r.$Tr)(t,e,i),(0,r.$Tr)(t,n,i),(0,r.yef)(o,n,null),(0,r.$Tr)(t,$,i),(0,r.yef)(s,t,i),c=!0},p(t,[e]){const n={};1024&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const r={};1025&e&&(r.$$scope={dirty:e,ctx:t}),s.$set(r)},i(t){c||((0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),c=!0)},o(t){(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),c=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),(0,r.vpE)(o),t&&(0,r.ogt)($),(0,r.vpE)(s,t)}}}function Tt(t,e,n){let{clientManager:r}=e,o=[];async function s(){const t=[],e=await r.files.getPendingInvites();for(const n of e)t.push({sharedBy:"",accepted:!1,id:n.roomId,name:n.name,room:n});const $=r.client.getUserId(),s=await r.files.getChildren();for(const e of s){const n=await e.getCreatedByUserId();n&&n!==$&&t.push({accepted:!0,name:e.name,id:e.id,sharedBy:n})}n(0,o=t)}async function c(t){await q((async()=>{t.room&&await r.files.acceptInvite(t.room)}),`Failed to accept invite to ${t.name}`)}return(0,R.H3)((()=>{s(),r.on("modified",s)})),(0,R.ev)((()=>{r.off("modified",s)})),t.$$set=t=>{"clientManager"in t&&n(2,r=t.clientManager)},[o,c,r,()=>$().show("/shared"),t=>c(t),t=>t.accepted&&$().show(`/directory/${t.id}`)]}class Ut extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,Tt,It,r.N8,{clientManager:2})}}const Ct=Ut;var bt=n(26901),Yt=n(24307),Et=n(47028),Dt=n(3663),kt=n(60058),_t=n(42113);const{document:Xt}=r.lig;function Wt(t){let e;return{c(){e=(0,r.fLW)("Sign in")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Rt(t){let e;return{c(){e=(0,r.fLW)("e.g. https://matrix.org")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Bt(t){let e,n;return e=new Yt.Z({props:{slot:"helper",$$slots:{default:[Rt]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function St(t){let e,n;return{c(){e=(0,r.bGB)("p"),n=(0,r.fLW)(t[3]),(0,r.czc)(e,"color","red"),(0,r.czc)(e,"text-align","center"),(0,r.czc)(e,"font-weight","bold")},m(t,o){(0,r.$Tr)(t,e,o),(0,r.R3I)(e,n)},p(t,e){8&e&&(0,r.rTO)(n,t[3])},d(t){t&&(0,r.ogt)(e)}}}function Zt(t){let e,n,o,$,s,c,i,a,l,f,p,d,u,g=t[0].homeserverUrl+"";function m(e){t[17](e)}let y={variant:"outlined",label:"Username",type:"text",required:!0,style:"margin-top: 16px;",$$slots:{helper:[jt]},$$scope:{ctx:t}};function h(e){t[18](e)}void 0!==t[0].userId&&(y.value=t[0].userId),c=new bt.ZP({props:y}),r.VnY.push((()=>(0,r.akz)(c,"value",m)));let v={variant:"outlined",label:"Password",type:"password",required:!0,style:"margin-top: 16px;",$$slots:{helper:[Ft]},$$scope:{ctx:t}};return void 0!==t[0].password&&(v.value=t[0].password),l=new bt.ZP({props:v}),r.VnY.push((()=>(0,r.akz)(l,"value",h))),d=new Z.ZP({props:{type:"submit",variant:"unelevated",disabled:t[4],$$slots:{default:[Pt]},$$scope:{ctx:t}}}),d.$on("click",t[19]),{c(){e=(0,r.bGB)("p"),n=(0,r.fLW)("Homeserver "),o=(0,r.fLW)(g),$=(0,r.fLW)(" supports auth via Matrix password:"),s=(0,r.DhX)(),(0,r.YCL)(c.$$.fragment),a=(0,r.DhX)(),(0,r.YCL)(l.$$.fragment),p=(0,r.DhX)(),(0,r.YCL)(d.$$.fragment)},m(t,i){(0,r.$Tr)(t,e,i),(0,r.R3I)(e,n),(0,r.R3I)(e,o),(0,r.R3I)(e,$),(0,r.$Tr)(t,s,i),(0,r.yef)(c,t,i),(0,r.$Tr)(t,a,i),(0,r.yef)(l,t,i),(0,r.$Tr)(t,p,i),(0,r.yef)(d,t,i),u=!0},p(t,e){(!u||1&e)&&g!==(g=t[0].homeserverUrl+"")&&(0,r.rTO)(o,g);const n={};4194304&e&&(n.$$scope={dirty:e,ctx:t}),!i&&1&e&&(i=!0,n.value=t[0].userId,(0,r.hjT)((()=>i=!1))),c.$set(n);const $={};4194304&e&&($.$$scope={dirty:e,ctx:t}),!f&&1&e&&(f=!0,$.value=t[0].password,(0,r.hjT)((()=>f=!1))),l.$set($);const s={};16&e&&(s.disabled=t[4]),4194320&e&&(s.$$scope={dirty:e,ctx:t}),d.$set(s)},i(t){u||((0,r.Ui)(c.$$.fragment,t),(0,r.Ui)(l.$$.fragment,t),(0,r.Ui)(d.$$.fragment,t),u=!0)},o(t){(0,r.etI)(c.$$.fragment,t),(0,r.etI)(l.$$.fragment,t),(0,r.etI)(d.$$.fragment,t),u=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(s),(0,r.vpE)(c,t),t&&(0,r.ogt)(a),(0,r.vpE)(l,t),t&&(0,r.ogt)(p),(0,r.vpE)(d,t)}}}function Ot(t){let e,n,o,$,s,c,i,a,l=t[0].homeserverUrl+"",f=t[5]&&Vt(t);return i=new Z.ZP({props:{variant:"unelevated",disabled:t[4],$$slots:{default:[qt]},$$scope:{ctx:t}}}),i.$on("click",t[16]),{c(){e=(0,r.bGB)("p"),n=(0,r.fLW)("Homeserver "),o=(0,r.fLW)(l),$=(0,r.fLW)(" supports auth via OIDC:"),s=(0,r.DhX)(),f&&f.c(),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment)},m(t,l){(0,r.$Tr)(t,e,l),(0,r.R3I)(e,n),(0,r.R3I)(e,o),(0,r.R3I)(e,$),(0,r.$Tr)(t,s,l),f&&f.m(t,l),(0,r.$Tr)(t,c,l),(0,r.yef)(i,t,l),a=!0},p(t,e){(!a||1&e)&&l!==(l=t[0].homeserverUrl+"")&&(0,r.rTO)(o,l),t[5]?f?(f.p(t,e),32&e&&(0,r.Ui)(f,1)):(f=Vt(t),f.c(),(0,r.Ui)(f,1),f.m(c.parentNode,c)):f&&((0,r.dvw)(),(0,r.etI)(f,1,1,(()=>{f=null})),(0,r.gbL)());const n={};16&e&&(n.disabled=t[4]),4194352&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n)},i(t){a||((0,r.Ui)(f),(0,r.Ui)(i.$$.fragment,t),a=!0)},o(t){(0,r.etI)(f),(0,r.etI)(i.$$.fragment,t),a=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(s),f&&f.d(t),t&&(0,r.ogt)(c),(0,r.vpE)(i,t)}}}function Mt(t){let e,n,o,$,s,c,i,a,l,f,p,d,u,g,m,y,h,v,w,x,L=t[6].verification_uri_complete?"or go":"Go",I=t[6].verification_uri+"",T=t[6].user_code+"",U=t[6].verification_uri_complete&&Jt(t);return w=new Z.ZP({props:{variant:"unelevated",disabled:t[4],$$slots:{default:[te]},$$scope:{ctx:t}}}),w.$on("click",t[14]),{c(){e=(0,r.bGB)("div"),U&&U.c(),n=(0,r.DhX)(),o=(0,r.bGB)("p"),$=(0,r.fLW)(L),s=(0,r.fLW)(" to:"),c=(0,r.DhX)(),i=(0,r.bGB)("p"),a=(0,r.bGB)("strong"),l=(0,r.fLW)(I),f=(0,r.DhX)(),p=(0,r.bGB)("p"),p.textContent="and enter code:",d=(0,r.DhX)(),u=(0,r.bGB)("p"),g=(0,r.bGB)("strong"),m=(0,r.fLW)(T),y=(0,r.DhX)(),h=(0,r.bGB)("p"),h.textContent="Changed your mind?",v=(0,r.DhX)(),(0,r.YCL)(w.$$.fragment),(0,r.czc)(e,"text-align","center")},m(t,L){(0,r.$Tr)(t,e,L),U&&U.m(e,null),(0,r.R3I)(e,n),(0,r.R3I)(e,o),(0,r.R3I)(o,$),(0,r.R3I)(o,s),(0,r.R3I)(e,c),(0,r.R3I)(e,i),(0,r.R3I)(i,a),(0,r.R3I)(a,l),(0,r.R3I)(e,f),(0,r.R3I)(e,p),(0,r.R3I)(e,d),(0,r.R3I)(e,u),(0,r.R3I)(u,g),(0,r.R3I)(g,m),(0,r.R3I)(e,y),(0,r.R3I)(e,h),(0,r.R3I)(e,v),(0,r.yef)(w,e,null),x=!0},p(t,o){t[6].verification_uri_complete?U?(U.p(t,o),64&o&&(0,r.Ui)(U,1)):(U=Jt(t),U.c(),(0,r.Ui)(U,1),U.m(e,n)):U&&((0,r.dvw)(),(0,r.etI)(U,1,1,(()=>{U=null})),(0,r.gbL)()),(!x||64&o)&&L!==(L=t[6].verification_uri_complete?"or go":"Go")&&(0,r.rTO)($,L),(!x||64&o)&&I!==(I=t[6].verification_uri+"")&&(0,r.rTO)(l,I),(!x||64&o)&&T!==(T=t[6].user_code+"")&&(0,r.rTO)(m,T);const s={};16&o&&(s.disabled=t[4]),4194320&o&&(s.$$scope={dirty:o,ctx:t}),w.$set(s)},i(t){x||((0,r.Ui)(U),(0,r.Ui)(w.$$.fragment,t),x=!0)},o(t){(0,r.etI)(U),(0,r.etI)(w.$$.fragment,t),x=!1},d(t){t&&(0,r.ogt)(e),U&&U.d(),(0,r.vpE)(w)}}}function Gt(t){let e;return{c(){e=(0,r.fLW)("Your matrix username")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function jt(t){let e,n;return e=new Yt.Z({props:{slot:"helper",$$slots:{default:[Gt]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Nt(t){let e;return{c(){e=(0,r.fLW)("Your matrix password")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Ft(t){let e,n;return e=new Yt.Z({props:{slot:"helper",$$slots:{default:[Nt]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function zt(t){let e,n;return e=new Dt.Z({props:{indeterminate:!0,style:"height: 24px; width: 24px; margin-left: 8px;"}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Pt(t){let e,n,o,$=t[4]&&zt();return{c(){e=(0,r.fLW)("Sign in with HS password\n                    "),$&&$.c(),n=(0,r.cSb)()},m(t,s){(0,r.$Tr)(t,e,s),$&&$.m(t,s),(0,r.$Tr)(t,n,s),o=!0},p(t,e){t[4]?$?16&e&&(0,r.Ui)($,1):($=zt(),$.c(),(0,r.Ui)($,1),$.m(n.parentNode,n)):$&&((0,r.dvw)(),(0,r.etI)($,1,1,(()=>{$=null})),(0,r.gbL)())},i(t){o||((0,r.Ui)($),o=!0)},o(t){(0,r.etI)($),o=!1},d(t){t&&(0,r.ogt)(e),$&&$.d(t),t&&(0,r.ogt)(n)}}}function Vt(t){let e,n,o,$,s,c;return o=new Z.ZP({props:{variant:"unelevated",disabled:t[4],$$slots:{default:[At]},$$scope:{ctx:t}}}),o.$on("click",t[15]),{c(){e=(0,r.bGB)("p"),e.textContent="Already signed in on another device? You can use it to complete sign in",n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),s=(0,r.bGB)("p"),s.textContent="or:",(0,r.czc)(s,"text-align","center")},m(t,i){(0,r.$Tr)(t,e,i),(0,r.$Tr)(t,n,i),(0,r.yef)(o,t,i),(0,r.$Tr)(t,$,i),(0,r.$Tr)(t,s,i),c=!0},p(t,e){const n={};16&e&&(n.disabled=t[4]),4194320&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){c||((0,r.Ui)(o.$$.fragment,t),c=!0)},o(t){(0,r.etI)(o.$$.fragment,t),c=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),t&&(0,r.ogt)(s)}}}function Kt(t){let e,n;return e=new Dt.Z({props:{indeterminate:!0,style:"height: 24px; width: 24px; margin-left: 8px;"}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function At(t){let e,n,o,$=t[4]&&Kt();return{c(){e=(0,r.fLW)("Use another device\n                        "),$&&$.c(),n=(0,r.cSb)()},m(t,s){(0,r.$Tr)(t,e,s),$&&$.m(t,s),(0,r.$Tr)(t,n,s),o=!0},p(t,e){t[4]?$?16&e&&(0,r.Ui)($,1):($=Kt(),$.c(),(0,r.Ui)($,1),$.m(n.parentNode,n)):$&&((0,r.dvw)(),(0,r.etI)($,1,1,(()=>{$=null})),(0,r.gbL)())},i(t){o||((0,r.Ui)($),o=!0)},o(t){(0,r.etI)($),o=!1},d(t){t&&(0,r.ogt)(e),$&&$.d(t),t&&(0,r.ogt)(n)}}}function Ht(t){let e,n;return e=new Dt.Z({props:{indeterminate:!0,style:"height: 24px; width: 24px; margin-left: 8px;"}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function qt(t){let e,n,o,$,s=t[5]?"Continue on this device":"Continue",c=t[4]&&Ht();return{c(){e=(0,r.fLW)(s),n=(0,r.DhX)(),c&&c.c(),o=(0,r.cSb)()},m(t,s){(0,r.$Tr)(t,e,s),(0,r.$Tr)(t,n,s),c&&c.m(t,s),(0,r.$Tr)(t,o,s),$=!0},p(t,n){(!$||32&n)&&s!==(s=t[5]?"Continue on this device":"Continue")&&(0,r.rTO)(e,s),t[4]?c?16&n&&(0,r.Ui)(c,1):(c=Ht(),c.c(),(0,r.Ui)(c,1),c.m(o.parentNode,o)):c&&((0,r.dvw)(),(0,r.etI)(c,1,1,(()=>{c=null})),(0,r.gbL)())},i(t){$||((0,r.Ui)(c),$=!0)},o(t){(0,r.etI)(c),$=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),c&&c.d(t),t&&(0,r.ogt)(o)}}}function Jt(t){let e,n,o,$,s;return $=new _t.Z({props:{value:t[6].verification_uri_complete}}),{c(){e=(0,r.bGB)("p"),e.textContent="Scan this code on your other device to continue sign in",n=(0,r.DhX)(),o=(0,r.bGB)("div"),(0,r.YCL)($.$$.fragment)},m(t,c){(0,r.$Tr)(t,e,c),(0,r.$Tr)(t,n,c),(0,r.$Tr)(t,o,c),(0,r.yef)($,o,null),s=!0},p(t,e){const n={};64&e&&(n.value=t[6].verification_uri_complete),$.$set(n)},i(t){s||((0,r.Ui)($.$$.fragment,t),s=!0)},o(t){(0,r.etI)($.$$.fragment,t),s=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),t&&(0,r.ogt)(o),(0,r.vpE)($)}}}function Qt(t){let e,n;return e=new Dt.Z({props:{indeterminate:!0,style:"height: 24px; width: 24px; margin-left: 8px;"}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function te(t){let e,n,o,$=t[4]&&Qt();return{c(){e=(0,r.fLW)("Continue on this device\n                        "),$&&$.c(),n=(0,r.cSb)()},m(t,s){(0,r.$Tr)(t,e,s),$&&$.m(t,s),(0,r.$Tr)(t,n,s),o=!0},p(t,e){t[4]?$?16&e&&(0,r.Ui)($,1):($=Qt(),$.c(),(0,r.Ui)($,1),$.m(n.parentNode,n)):$&&((0,r.dvw)(),(0,r.etI)($,1,1,(()=>{$=null})),(0,r.gbL)())},i(t){o||((0,r.Ui)($),o=!0)},o(t){(0,r.etI)($),o=!1},d(t){t&&(0,r.ogt)(e),$&&$.d(t),t&&(0,r.ogt)(n)}}}function ee(t){let e;return{c(){e=(0,r.fLW)("Register")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function ne(t){let e,n;return e=new Z.__({props:{$$slots:{default:[ee]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function re(t){let e,n,o,$,s,c,i,a,l,f,p;function d(e){t[13](e)}let u={variant:"outlined",label:"Homeserver",type:"text",required:!0,style:"margin-top: 16px;",$$slots:{helper:[Bt]},$$scope:{ctx:t}};void 0!==t[7]&&(u.value=t[7]),e=new bt.ZP({props:u}),r.VnY.push((()=>(0,r.akz)(e,"value",d))),e.$on("keyup",t[10]);let g=t[3]&&St(t);const m=[Mt,Ot,Zt],y=[];function h(t,e){return t[6]?0:t[2]?1:t[1]?2:-1}return~(s=h(t))&&(c=y[s]=m[s](t)),f=new Z.ZP({props:{href:"#",$$slots:{default:[ne]},$$scope:{ctx:t}}}),f.$on("click:preventDefault",t[20]),{c(){(0,r.YCL)(e.$$.fragment),o=(0,r.DhX)(),g&&g.c(),$=(0,r.DhX)(),c&&c.c(),i=(0,r.DhX)(),a=(0,r.bGB)("p"),l=(0,r.fLW)("Not got an account?\n                "),(0,r.YCL)(f.$$.fragment)},m(t,n){(0,r.yef)(e,t,n),(0,r.$Tr)(t,o,n),g&&g.m(t,n),(0,r.$Tr)(t,$,n),~s&&y[s].m(t,n),(0,r.$Tr)(t,i,n),(0,r.$Tr)(t,a,n),(0,r.R3I)(a,l),(0,r.yef)(f,a,null),p=!0},p(t,o){const a={};4194304&o&&(a.$$scope={dirty:o,ctx:t}),!n&&128&o&&(n=!0,a.value=t[7],(0,r.hjT)((()=>n=!1))),e.$set(a),t[3]?g?g.p(t,o):(g=St(t),g.c(),g.m($.parentNode,$)):g&&(g.d(1),g=null);let l=s;s=h(t),s===l?~s&&y[s].p(t,o):(c&&((0,r.dvw)(),(0,r.etI)(y[l],1,1,(()=>{y[l]=null})),(0,r.gbL)()),~s?(c=y[s],c?c.p(t,o):(c=y[s]=m[s](t),c.c()),(0,r.Ui)(c,1),c.m(i.parentNode,i)):c=null);const p={};4194304&o&&(p.$$scope={dirty:o,ctx:t}),f.$set(p)},i(t){p||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(c),(0,r.Ui)(f.$$.fragment,t),p=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(c),(0,r.etI)(f.$$.fragment,t),p=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(o),g&&g.d(t),t&&(0,r.ogt)($),~s&&y[s].d(t),t&&(0,r.ogt)(i),t&&(0,r.ogt)(a),(0,r.vpE)(f)}}}function oe(t){let e,n,o,$,s,c,i,a,l,f,p,d,u;return o=new Et.Dx({props:{style:"font-size: 24px; font-weight: 600; ",$$slots:{default:[Wt]},$$scope:{ctx:t}}}),a=new kt.ZP({props:{padded:!0,style:"max-width: 500px",$$slots:{default:[re]},$$scope:{ctx:t}}}),{c(){e=(0,r.DhX)(),n=(0,r.bGB)("div"),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),s=(0,r.bGB)("p"),s.innerHTML="<strong>Please use a dedicated test account. The homeserver also needs to allow high request rates.</strong>",c=(0,r.DhX)(),i=(0,r.bGB)("form"),(0,r.YCL)(a.$$.fragment),l=(0,r.DhX)(),f=(0,r.bGB)("p"),f.innerHTML="<i>It is recommended to use a dedicated test account as the E2E encryption settings used in this beta version may clash with your existing account and your keys get lost.</i>",Xt.title="Sign in"},m(t,g){(0,r.$Tr)(t,e,g),(0,r.$Tr)(t,n,g),(0,r.yef)(o,n,null),(0,r.R3I)(n,$),(0,r.R3I)(n,s),(0,r.R3I)(n,c),(0,r.R3I)(n,i),(0,r.yef)(a,i,null),(0,r.R3I)(i,l),(0,r.R3I)(i,f),p=!0,d||(u=(0,r.oLt)(i,"submit",(0,r.AT7)($e)),d=!0)},p(t,[e]){const n={};4194304&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const r={};4194559&e&&(r.$$scope={dirty:e,ctx:t}),a.$set(r)},i(t){p||((0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(a.$$.fragment,t),p=!0)},o(t){(0,r.etI)(o.$$.fragment,t),(0,r.etI)(a.$$.fragment,t),p=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),(0,r.vpE)(o),(0,r.vpE)(a),d=!1,u()}}}const $e=()=>{};function se(t,e,n){let r,{clientManager:o}=e;const s=(0,d.getLogger)("Login");let c,i="",f=!1,p=!1,u=!1,g=!1,m=o.homeserverUrl,y="";async function h(){var t,e;s.info("loginWithPassword()");try{n(3,i=""),n(4,f=!0),await o.loginWithPassword(),$().replace("/")}catch(r){s.error(r),n(3,i=[r.errcode,null!==(e=null===(t=r.cause)||void 0===t?void 0:t.message)&&void 0!==e?e:r.message].filter((t=>!!t)).join(": "))}finally{n(4,f=!1)}}async function v(t){var e,r,$;s.info("loginWithOidc()"),n(3,i="");try{t?(n(6,c=await o.startLoginWithOidcDeviceFlow()),await o.waitForLoginWithOidcDeviceFlow(),n(6,c=void 0)):await o.loginWithOidcNormalFlow()}catch(t){s.warn(t),n(3,i=`Unable to sign in: ${null!==($=null!==(r=null!==(e=t.error_description)&&void 0!==e?e:t.error)&&void 0!==r?r:t.message)&&void 0!==$?$:"An error occurred"}`)}}const w=rt((()=>n(0,o.homeserverUrl=m,o)),250);return(0,R.H3)((async()=>{var t,e,$;s.debug("onMount()"),r.has("error")?(s.warn(`Received OIDC error: ${null!==(t=r.get("error_description"))&&void 0!==t?t:r.get("error")}`),n(3,i=null!==($=null!==(e=r.get("error_description"))&&void 0!==e?e:r.get("error"))&&void 0!==$?$:"An error occurred")):r.has("code")?await o.completeOidcLogin():r.has("state")})),(0,R.ev)((()=>s.debug("onDestroy()"))),t.$$set=t=>{"clientManager"in t&&n(0,o=t.clientManager)},t.$$.update=()=>{6151&t.$$.dirty&&(async()=>{var t,e,$,c,f,d,m;if(r.has("error_description")&&(n(3,i=null!==(e=null!==(t=r.get("error_description"))&&void 0!==t?t:r.get("error"))&&void 0!==e?e:""),window.history.pushState("object",document.title,location.href.split("?")[0]),n(12,r=new URLSearchParams(document.location.search)),n(11,y=o.homeserverUrl)),r.has("code"));else if(y!==o.homeserverUrl){try{n(3,i=""),n(1,p=!1),n(2,u=!1),n(5,g=!1),n(0,o.oidcIssuer="",o);try{const t=await a(o.homeserverUrl);(null===($=t["m.homeserver"])||void 0===$?void 0:$.base_url)&&t["m.homeserver"].base_url!==o.homeserverUrl&&n(0,o.homeserverUrl=t["m.homeserver"].base_url,o),n(0,o.oidcIssuer=null!==(f=null===(c=t["org.matrix.msc2965.authentication"])||void 0===c?void 0:c.issuer)&&void 0!==f?f:"",o),n(2,u=!!o.oidcIssuer)}catch(t){s.warn(t)}if(n(1,p=(await l(o.homeserverUrl)).flows.some((t=>"m.login.password"===t.type))),u)try{await o.assertOidcClientId(),n(5,g=await o.supportsDeviceCode())}catch(t){if(s.warn(t),n(2,u=!1),!p)throw new Error(`Homeserver is not compatible with this Matrix client: ${null!==(d=null==t?void 0:t.message)&&void 0!==d?d:"An error occured"}`)}}catch(t){n(3,i=null!==(m=null==t?void 0:t.message)&&void 0!==m?m:"An error occured")}n(11,y=o.homeserverUrl)}})()},n(12,r=new URLSearchParams(document.location.search)),[o,p,u,i,f,g,c,m,h,v,w,y,r,function(t){m=t,n(7,m)},()=>v(!1),()=>v(!0),()=>v(!1),function(e){t.$$.not_equal(o.userId,e)&&(o.userId=e,n(0,o),n(12,r),n(11,y),n(2,u),n(1,p))},function(e){t.$$.not_equal(o.password,e)&&(o.password=e,n(0,o),n(12,r),n(11,y),n(2,u),n(1,p))},()=>h(),()=>$().show("/register")]}class ce extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,se,oe,r.N8,{clientManager:0})}}const ie=ce;var ae=n(25108);function le(t){let e;return{c(){e=(0,r.fLW)("Reconnect")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function fe(t){let e,n;return{c(){e=(0,r.bGB)("p"),n=(0,r.fLW)(t[1]),(0,r.czc)(e,"color","red"),(0,r.czc)(e,"text-align","center"),(0,r.czc)(e,"font-weight","bold")},m(t,o){(0,r.$Tr)(t,e,o),(0,r.R3I)(e,n)},p(t,e){2&e&&(0,r.rTO)(n,t[1])},d(t){t&&(0,r.ogt)(e)}}}function pe(t){let e;return{c(){e=(0,r.fLW)("Try again now")},m(t,n){(0,r.$Tr)(t,e,n)},i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function de(t){let e,n,o;return e=new Dt.Z({props:{indeterminate:!0,style:"height: 24px; width: 24px; margin-left: 8px;"}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.fLW)("\n                Connecting...")},m(t,$){(0,r.yef)(e,t,$),(0,r.$Tr)(t,n,$),o=!0},i(t){o||((0,r.Ui)(e.$$.fragment,t),o=!0)},o(t){(0,r.etI)(e.$$.fragment,t),o=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n)}}}function ue(t){let e,n,o,$;const s=[de,pe],c=[];function i(t,e){return t[2]?0:1}return e=i(t),n=c[e]=s[e](t),{c(){n.c(),o=(0,r.cSb)()},m(t,n){c[e].m(t,n),(0,r.$Tr)(t,o,n),$=!0},p(t,$){let a=e;e=i(t),e!==a&&((0,r.dvw)(),(0,r.etI)(c[a],1,1,(()=>{c[a]=null})),(0,r.gbL)(),n=c[e],n||(n=c[e]=s[e](t),n.c()),(0,r.Ui)(n,1),n.m(o.parentNode,o))},i(t){$||((0,r.Ui)(n),$=!0)},o(t){(0,r.etI)(n),$=!1},d(t){c[e].d(t),t&&(0,r.ogt)(o)}}}function ge(t){let e;return{c(){e=(0,r.fLW)("Sign out")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function me(t){let e,n;return e=new Z.__({props:{$$slots:{default:[ge]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};512&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function ye(t){let e,n,o,$,s,c,i,a,l,f,p,d,u,g,m,y,h,v;n=new Et.Dx({props:{style:"font-size: 24px; font-weight: 600; ",$$slots:{default:[le]},$$scope:{ctx:t}}});let w=t[1]&&fe(t);function x(e){t[5](e)}let L={variant:"outlined",label:"Homeserver",type:"text",style:"margin-top: 16px;",disabled:!0};function I(e){t[6](e)}void 0!==t[0].homeserverUrl&&(L.value=t[0].homeserverUrl),c=new bt.ZP({props:L}),r.VnY.push((()=>(0,r.akz)(c,"value",x)));let T={variant:"outlined",label:"Username",type:"text",style:"margin-top: 16px;",disabled:!0};return void 0!==t[0].userId&&(T.value=t[0].userId),l=new bt.ZP({props:T}),r.VnY.push((()=>(0,r.akz)(l,"value",I))),d=new Z.ZP({props:{type:"submit",variant:"unelevated",disabled:t[2],$$slots:{default:[ue]},$$scope:{ctx:t}}}),m=new Z.ZP({props:{href:"#",$$slots:{default:[me]},$$scope:{ctx:t}}}),m.$on("click:preventDefault",t[7]),{c(){e=(0,r.bGB)("div"),(0,r.YCL)(n.$$.fragment),o=(0,r.DhX)(),w&&w.c(),$=(0,r.DhX)(),s=(0,r.bGB)("form"),(0,r.YCL)(c.$$.fragment),a=(0,r.DhX)(),(0,r.YCL)(l.$$.fragment),p=(0,r.DhX)(),(0,r.YCL)(d.$$.fragment),u=(0,r.DhX)(),g=(0,r.bGB)("p"),(0,r.YCL)(m.$$.fragment)},m(i,f){(0,r.$Tr)(i,e,f),(0,r.yef)(n,e,null),(0,r.R3I)(e,o),w&&w.m(e,null),(0,r.R3I)(e,$),(0,r.R3I)(e,s),(0,r.yef)(c,s,null),(0,r.R3I)(s,a),(0,r.yef)(l,s,null),(0,r.R3I)(s,p),(0,r.yef)(d,s,null),(0,r.R3I)(s,u),(0,r.R3I)(s,g),(0,r.yef)(m,g,null),y=!0,h||(v=(0,r.oLt)(s,"submit",(0,r.AT7)(t[8])),h=!0)},p(t,[o]){const s={};512&o&&(s.$$scope={dirty:o,ctx:t}),n.$set(s),t[1]?w?w.p(t,o):(w=fe(t),w.c(),w.m(e,$)):w&&(w.d(1),w=null);const a={};!i&&1&o&&(i=!0,a.value=t[0].homeserverUrl,(0,r.hjT)((()=>i=!1))),c.$set(a);const p={};!f&&1&o&&(f=!0,p.value=t[0].userId,(0,r.hjT)((()=>f=!1))),l.$set(p);const u={};4&o&&(u.disabled=t[2]),516&o&&(u.$$scope={dirty:o,ctx:t}),d.$set(u);const g={};512&o&&(g.$$scope={dirty:o,ctx:t}),m.$set(g)},i(t){y||((0,r.Ui)(n.$$.fragment,t),(0,r.Ui)(c.$$.fragment,t),(0,r.Ui)(l.$$.fragment,t),(0,r.Ui)(d.$$.fragment,t),(0,r.Ui)(m.$$.fragment,t),y=!0)},o(t){(0,r.etI)(n.$$.fragment,t),(0,r.etI)(c.$$.fragment,t),(0,r.etI)(l.$$.fragment,t),(0,r.etI)(d.$$.fragment,t),(0,r.etI)(m.$$.fragment,t),y=!1},d(t){t&&(0,r.ogt)(e),(0,r.vpE)(n),w&&w.d(),(0,r.vpE)(c),(0,r.vpE)(l),(0,r.vpE)(d),(0,r.vpE)(m),h=!1,v()}}}function he(t,e,n){let{clientManager:r}=e,o="",c=!1;async function i(){var t,e,i;try{n(1,o=""),n(2,c=!0),await r.rehydrate(),$().redirect(null!==(t=r.nextRoute)&&void 0!==t?t:"/home"),n(0,r.nextRoute=void 0,r)}catch(t){ae.error(t),n(1,o=[t.errcode,null!==(i=null===(e=t.cause)||void 0===e?void 0:e.message)&&void 0!==i?i:t.message].filter((t=>!!t)).join(": ")),t instanceof s.ConnectionError&&n(1,o+=". Is the homeserver up?")}finally{n(2,c=!1)}}async function a(){await r.logout(),$().redirect("/signin")}return i().then().catch(ae.error),t.$$set=t=>{"clientManager"in t&&n(0,r=t.clientManager)},[r,o,c,i,a,function(e){t.$$.not_equal(r.homeserverUrl,e)&&(r.homeserverUrl=e,n(0,r))},function(e){t.$$.not_equal(r.userId,e)&&(r.userId=e,n(0,r))},()=>a(),()=>i()]}class ve extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,he,ye,r.N8,{clientManager:0})}}const we=ve;var xe=n(40214),Le=n(14868),Ie=n(48261);const Te="undefined"!=typeof window,Ue=(0,Ie.fZ)(Te?window.location.href:"blank://"),Ce=Te?window.URL:n(8575).URL;if(Te){const t=history.pushState,e=history.replaceState,n=()=>Ue.set(window.location.href);history.pushState=function(...e){t.apply(this,e),n()},history.replaceState=function(...t){e.apply(this,t),n()},window.addEventListener("popstate",n),window.addEventListener("hashchange",n)}const be={subscribe:(0,Ie.nK)(Ue,(t=>new Ce(t))).subscribe,ssrSet:t=>Ue.set(t)};function Ye(t,e,n){const r=t.slice();return r[9]=e[n],r}function Ee(t){let e,n;return e=new Le.ZP({props:{class:"sidebar",$$slots:{default:[Ne]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4102&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function De(t){let e;return{c(){e=(0,r.fLW)("home")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function ke(t){let e;return{c(){e=(0,r.fLW)("Home")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function _e(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[De]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[ke]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};4096&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};4096&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Xe(t){let e;return{c(){e=(0,r.fLW)("work")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function We(t){let e,n=t[9].name+"";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){2&o&&n!==(n=t[9].name+"")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function Re(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[Xe]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[We]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};4096&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};4098&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Be(t){let e,n;return e=new Le.ck({props:{href:"#",selected:t[2].startsWith(`#!/directory/${t[9].id}`),$$slots:{default:[Re]},$$scope:{ctx:t}}}),e.$on("click:preventDefault",(function(){return t[6](t[9])})),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(n,r){t=n;const o={};6&r&&(o.selected=t[2].startsWith(`#!/directory/${t[9].id}`)),4098&r&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Se(t){let e;return{c(){e=(0,r.fLW)("people_outline")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Ze(t){let e;return{c(){e=(0,r.fLW)("Shared with me")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Oe(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[Se]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[Ze]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};4096&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};4096&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Me(t){let e;return{c(){e=(0,r.fLW)("delete")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Ge(t){let e;return{c(){e=(0,r.fLW)("Trash")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function je(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[Me]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[Ge]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};4096&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};4096&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Ne(t){let e,n,o,$,s,c,i,a,l;e=new Le.ck({props:{href:"#",selected:"#!/home"===t[2],$$slots:{default:[_e]},$$scope:{ctx:t}}}),e.$on("click:preventDefault",t[5]);let f=t[1],p=[];for(let e=0;e<f.length;e+=1)p[e]=Be(Ye(t,f,e));const d=t=>(0,r.etI)(p[t],1,1,(()=>{p[t]=null}));return $=new Le.Z0({}),c=new Le.ck({props:{href:"#",selected:t[2].startsWith("#!/shared"),$$slots:{default:[Oe]},$$scope:{ctx:t}}}),c.$on("click:preventDefault",t[7]),a=new Le.ck({props:{disabled:!0,$$slots:{default:[je]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)();for(let t=0;t<p.length;t+=1)p[t].c();o=(0,r.DhX)(),(0,r.YCL)($.$$.fragment),s=(0,r.DhX)(),(0,r.YCL)(c.$$.fragment),i=(0,r.DhX)(),(0,r.YCL)(a.$$.fragment)},m(t,f){(0,r.yef)(e,t,f),(0,r.$Tr)(t,n,f);for(let e=0;e<p.length;e+=1)p[e].m(t,f);(0,r.$Tr)(t,o,f),(0,r.yef)($,t,f),(0,r.$Tr)(t,s,f),(0,r.yef)(c,t,f),(0,r.$Tr)(t,i,f),(0,r.yef)(a,t,f),l=!0},p(t,n){const $={};if(4&n&&($.selected="#!/home"===t[2]),4096&n&&($.$$scope={dirty:n,ctx:t}),e.$set($),6&n){let e;for(f=t[1],e=0;e<f.length;e+=1){const $=Ye(t,f,e);p[e]?(p[e].p($,n),(0,r.Ui)(p[e],1)):(p[e]=Be($),p[e].c(),(0,r.Ui)(p[e],1),p[e].m(o.parentNode,o))}for((0,r.dvw)(),e=f.length;e<p.length;e+=1)d(e);(0,r.gbL)()}const s={};4&n&&(s.selected=t[2].startsWith("#!/shared")),4096&n&&(s.$$scope={dirty:n,ctx:t}),c.$set(s);const i={};4096&n&&(i.$$scope={dirty:n,ctx:t}),a.$set(i)},i(t){if(!l){(0,r.Ui)(e.$$.fragment,t);for(let t=0;t<f.length;t+=1)(0,r.Ui)(p[t]);(0,r.Ui)($.$$.fragment,t),(0,r.Ui)(c.$$.fragment,t),(0,r.Ui)(a.$$.fragment,t),l=!0}},o(t){(0,r.etI)(e.$$.fragment,t),p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)(0,r.etI)(p[t]);(0,r.etI)($.$$.fragment,t),(0,r.etI)(c.$$.fragment,t),(0,r.etI)(a.$$.fragment,t),l=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.RMB)(p,t),t&&(0,r.ogt)(o),(0,r.vpE)($,t),t&&(0,r.ogt)(s),(0,r.vpE)(c,t),t&&(0,r.ogt)(i),(0,r.vpE)(a,t)}}}function Fe(t){let e,n,o=t[0]&&Ee(t);return{c(){o&&o.c(),e=(0,r.cSb)()},m(t,$){o&&o.m(t,$),(0,r.$Tr)(t,e,$),n=!0},p(t,[n]){t[0]?o?(o.p(t,n),1&n&&(0,r.Ui)(o,1)):(o=Ee(t),o.c(),(0,r.Ui)(o,1),o.m(e.parentNode,e)):o&&((0,r.dvw)(),(0,r.etI)(o,1,1,(()=>{o=null})),(0,r.gbL)())},i(t){n||((0,r.Ui)(o),n=!0)},o(t){(0,r.etI)(o),n=!1},d(t){o&&o.d(t),t&&(0,r.ogt)(e)}}}function ze(t,e,n){let o;(0,r.FIv)(t,be,(t=>n(4,o=t)));let{clientManager:s}=e,c=s.authedState.value;s.authedState.onUpdate((t=>{n(0,c=t)}));let i=[];async function a(){n(1,i=A(await s.files.getChildren()))}s.on("modified",a),(0,R.ev)((()=>s.off("modified",a))),(0,R.H3)(a);let l=o.hash;return t.$$set=t=>{"clientManager"in t&&n(3,s=t.clientManager)},t.$$.update=()=>{16&t.$$.dirty&&n(2,l=o.hash)},[c,i,l,s,o,()=>$().show("/home"),t=>$().show(`/directory/${t.id}`),()=>$().show("/shared")]}class Pe extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,ze,Fe,r.N8,{clientManager:3})}}const Ve=Pe;var Ke=n(41139),Ae=n(30330),He=n(28245);function qe(t){let e,n;return e=new Ae.Dx({props:{style:"font-size: 24px; font-weight: 600;",$$slots:{default:[Je]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};131080&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Je(t){let e;return{c(){e=(0,r.fLW)(t[3])},m(t,n){(0,r.$Tr)(t,e,n)},p(t,n){8&n&&(0,r.rTO)(e,t[3])},d(t){t&&(0,r.ogt)(e)}}}function Qe(t){let e;return{c(){e=(0,r.fLW)(t[5])},m(t,n){(0,r.$Tr)(t,e,n)},p(t,n){32&n&&(0,r.rTO)(e,t[5])},d(t){t&&(0,r.ogt)(e)}}}function tn(t){let e,n;return e=new Yt.Z({props:{slot:"helper",$$slots:{default:[Qe]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};131104&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function en(t){let e,n,o;function $(e){t[12](e)}let s={use:[Ae.$Y],variant:"outlined",type:"text",required:!0,label:t[6],invalid:t[1],style:"width: 100%;",$$slots:{helper:[tn]},$$scope:{ctx:t}};return void 0!==t[0]&&(s.value=t[0]),e=new bt.ZP({props:s}),r.VnY.push((()=>(0,r.akz)(e,"value",$))),t[13](e),e.$on("keyup",t[8]),{c(){(0,r.YCL)(e.$$.fragment)},m(t,n){(0,r.yef)(e,t,n),o=!0},p(t,o){const $={};64&o&&($.label=t[6]),2&o&&($.invalid=t[1]),131104&o&&($.$$scope={dirty:o,ctx:t}),!n&&1&o&&(n=!0,$.value=t[0],(0,r.hjT)((()=>n=!1))),e.$set($)},i(t){o||((0,r.Ui)(e.$$.fragment,t),o=!0)},o(t){(0,r.etI)(e.$$.fragment,t),o=!1},d(n){t[13](null),(0,r.vpE)(e,n)}}}function nn(t){let e;return{c(){e=(0,r.fLW)("Cancel")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function rn(t){let e,n;return e=new Z.__({props:{$$slots:{default:[nn]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};131072&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function on(t){let e;return{c(){e=(0,r.fLW)(t[7])},m(t,n){(0,r.$Tr)(t,e,n)},p(t,n){128&n&&(0,r.rTO)(e,t[7])},d(t){t&&(0,r.ogt)(e)}}}function $n(t){let e,n;return e=new Z.__({props:{$$slots:{default:[on]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};131200&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function sn(t){let e,n,o,$;return e=new Z.ZP({props:{variant:"outlined",$$slots:{default:[rn]},$$scope:{ctx:t}}}),o=new Z.ZP({props:{action:"ok",variant:"unelevated",disabled:t[1],$$slots:{default:[$n]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};131072&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};2&n&&($.disabled=t[1]),131200&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function cn(t){let e,n,o,$,s,c=t[3]&&qe(t);return n=new Ae.VY({props:{$$slots:{default:[en]},$$scope:{ctx:t}}}),$=new Ae.eX({props:{$$slots:{default:[sn]},$$scope:{ctx:t}}}),{c(){c&&c.c(),e=(0,r.DhX)(),(0,r.YCL)(n.$$.fragment),o=(0,r.DhX)(),(0,r.YCL)($.$$.fragment)},m(t,i){c&&c.m(t,i),(0,r.$Tr)(t,e,i),(0,r.yef)(n,t,i),(0,r.$Tr)(t,o,i),(0,r.yef)($,t,i),s=!0},p(t,o){t[3]?c?(c.p(t,o),8&o&&(0,r.Ui)(c,1)):(c=qe(t),c.c(),(0,r.Ui)(c,1),c.m(e.parentNode,e)):c&&((0,r.dvw)(),(0,r.etI)(c,1,1,(()=>{c=null})),(0,r.gbL)());const s={};131175&o&&(s.$$scope={dirty:o,ctx:t}),n.$set(s);const i={};131202&o&&(i.$$scope={dirty:o,ctx:t}),$.$set(i)},i(t){s||((0,r.Ui)(c),(0,r.Ui)(n.$$.fragment,t),(0,r.Ui)($.$$.fragment,t),s=!0)},o(t){(0,r.etI)(c),(0,r.etI)(n.$$.fragment,t),(0,r.etI)($.$$.fragment,t),s=!1},d(t){c&&c.d(t),t&&(0,r.ogt)(e),(0,r.vpE)(n,t),t&&(0,r.ogt)(o),(0,r.vpE)($,t)}}}function an(t){let e,n,o;function $(e){t[14](e)}let s={class:"textfield-dialog",$$slots:{default:[cn]},$$scope:{ctx:t}};return void 0!==t[4]&&(s.open=t[4]),e=new Ae.ZP({props:s}),r.VnY.push((()=>(0,r.akz)(e,"open",$))),e.$on("MDCDialog:closed",t[9]),{c(){(0,r.YCL)(e.$$.fragment)},m(t,n){(0,r.yef)(e,t,n),o=!0},p(t,[o]){const $={};131311&o&&($.$$scope={dirty:o,ctx:t}),!n&&16&o&&(n=!0,$.open=t[4],(0,r.hjT)((()=>n=!1))),e.$set($)},i(t){o||((0,r.Ui)(e.$$.fragment,t),o=!0)},o(t){(0,r.etI)(e.$$.fragment,t),o=!1},d(t){(0,r.vpE)(e,t)}}}function ln(t,e,n){let o,$,s,c,i="",a=!1,l=!1,f="",p="",d="";return t.$$.update=()=>{if(2051&t.$$.dirty&&s){const t=s(i);n(1,l=!0!==t),n(5,f=l&&"string"==typeof t?t:"")}},[i,l,o,$,a,f,p,d,function(t){l||"Enter"!==t.key||(c(i),n(4,a=!1))},function(t){"ok"===t.detail.action?c(i):c(void 0),n(4,a=!1)},async function(t,e,r,l,f){return n(3,$=t),n(0,i=e),n(4,a=!0),n(6,p=r),n(7,d=l),n(11,s=f),setTimeout((()=>{var t;return null===(t=o.getElement().getElementsByTagName("input").item(0))||void 0===t?void 0:t.select()}),100),new Promise((t=>{c=t}))},s,function(t){i=t,n(0,i)},function(t){r.VnY[t?"unshift":"push"]((()=>{o=t,n(2,o)}))},function(t){a=t,n(4,a)}]}class fn extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,ln,an,r.N8,{open:10})}get open(){return this.$$.ctx[10]}}const pn=fn;function dn(t){let e;return{c(){e=(0,r.bGB)("span"),e.textContent="-"},m(t,n){(0,r.$Tr)(t,e,n)},p:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function un(t){let e,n,o;function $(t,e){return 1&e&&(n=null),null==n&&(n=!!(S()().diff(t[0],"hours")<24)),n?mn:gn}let s=$(t,-1),c=s(t);return{c(){e=(0,r.bGB)("span"),c.c(),(0,r.Ljt)(e,"title",o=t[0].format("LLLL"))},m(t,n){(0,r.$Tr)(t,e,n),c.m(e,null)},p(t,n){s===(s=$(t,n))&&c?c.p(t,n):(c.d(1),c=s(t),c&&(c.c(),c.m(e,null))),1&n&&o!==(o=t[0].format("LLLL"))&&(0,r.Ljt)(e,"title",o)},d(t){t&&(0,r.ogt)(e),c.d()}}}function gn(t){let e,n=t[0].format("L")+"";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){1&o&&n!==(n=t[0].format("L")+"")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function mn(t){let e,n=t[0].format("LT")+"";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){1&o&&n!==(n=t[0].format("LT")+"")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function yn(t){let e;function n(t,e){return t[0]?un:dn}let o=n(t),$=o(t);return{c(){$.c(),e=(0,r.cSb)()},m(t,n){$.m(t,n),(0,r.$Tr)(t,e,n)},p(t,[r]){o===(o=n(t))&&$?$.p(t,r):($.d(1),$=o(t),$&&($.c(),$.m(e.parentNode,e)))},i:r.ZTd,o:r.ZTd,d(t){$.d(t),t&&(0,r.ogt)(e)}}}function hn(t,e,n){let r,{date:o}=e;return t.$$set=t=>{"date"in t&&n(1,o=t.date)},t.$$.update=()=>{2&t.$$.dirty&&n(0,r=o?S()(o):null)},[r,o]}class vn extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,hn,yn,r.N8,{date:1})}}const wn=vn;function xn(t){let e,n;return e=new wn({props:{date:t[0]}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,[n]){const r={};1&n&&(r.date=t[0]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Ln(t,e,n){let{entry:r}=e,{lastModified:o=!1}=e,$=null;return t.$$set=t=>{"entry"in t&&n(1,r=t.entry),"lastModified"in t&&n(2,o=t.lastModified)},t.$$.update=()=>{6&t.$$.dirty&&(async()=>{var t,e;n(0,$=o?null!==(t=await r.getLastModifiedDate())&&void 0!==t?t:null:null!==(e=await r.getCreationDate())&&void 0!==e?e:null)})()},[$,r,o]}class In extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,Ln,xn,r.N8,{entry:1,lastModified:2})}}const Tn=In;var Un=n(3630);function Cn(t){let e,n=t[0].encryptionStatus+"";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){1&o&&n!==(n=t[0].encryptionStatus+"")&&(0,r.rTO)(e,n)},i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function bn(t){let e,n;return e=new Un.O({}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p:r.ZTd,i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Yn(t){let e;return{c(){e=(0,r.fLW)("Unable to decrypt")},m(t,n){(0,r.$Tr)(t,e,n)},p:r.ZTd,i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function En(t){let e,n;return{c(){e=(0,r.bGB)("span"),n=(0,r.fLW)(t[1])},m(t,o){(0,r.$Tr)(t,e,o),(0,r.R3I)(e,n)},p(t,e){2&e&&(0,r.rTO)(n,t[1])},i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function Dn(t){let e,n,o,$;const s=[En,Yn,bn,Cn],c=[];function i(t,e){return t[1]?0:"decryptionFailed"===t[0].encryptionStatus?1:"decryptionPending"===t[0].encryptionStatus?2:3}return e=i(t),n=c[e]=s[e](t),{c(){n.c(),o=(0,r.cSb)()},m(t,n){c[e].m(t,n),(0,r.$Tr)(t,o,n),$=!0},p(t,[$]){let a=e;e=i(t),e===a?c[e].p(t,$):((0,r.dvw)(),(0,r.etI)(c[a],1,1,(()=>{c[a]=null})),(0,r.gbL)(),n=c[e],n?n.p(t,$):(n=c[e]=s[e](t),n.c()),(0,r.Ui)(n,1),n.m(o.parentNode,o))},i(t){$||((0,r.Ui)(n),$=!0)},o(t){(0,r.etI)(n),$=!1},d(t){c[e].d(t),t&&(0,r.ogt)(o)}}}function kn(t,e,n){let{entry:r}=e,o=null;return t.$$set=t=>{"entry"in t&&n(0,r=t.entry)},t.$$.update=()=>{1&t.$$.dirty&&(async()=>{const t=await r.getSize();n(1,o="number"==typeof t?t>=0?function(t){const e=["B","kB","MB","GB","TB"];let n=0;for(;t>1e3&&n<e.length;)n++,t/=1e3;return`${t.toFixed(0)} ${e[n]}`}(t):"-":null)})()},[r,o]}class _n extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,kn,Dn,r.N8,{entry:0})}}const Xn=_n;function Wn(t){let e,n;return e=new Un.O({}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p:r.ZTd,i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Rn(t){let e,n;return{c(){e=(0,r.bGB)("span"),n=(0,r.fLW)(t[0])},m(t,o){(0,r.$Tr)(t,e,o),(0,r.R3I)(e,n)},p(t,e){1&e&&(0,r.rTO)(n,t[0])},i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function Bn(t){let e,n,o,$;const s=[Rn,Wn],c=[];function i(t,e){return t[1]?0:1}return e=i(t),n=c[e]=s[e](t),{c(){n.c(),o=(0,r.cSb)()},m(t,n){c[e].m(t,n),(0,r.$Tr)(t,o,n),$=!0},p(t,[$]){let a=e;e=i(t),e===a?c[e].p(t,$):((0,r.dvw)(),(0,r.etI)(c[a],1,1,(()=>{c[a]=null})),(0,r.gbL)(),n=c[e],n?n.p(t,$):(n=c[e]=s[e](t),n.c()),(0,r.Ui)(n,1),n.m(o.parentNode,o))},i(t){$||((0,r.Ui)(n),$=!0)},o(t){(0,r.etI)(n),$=!1},d(t){c[e].d(t),t&&(0,r.ogt)(o)}}}function Sn(t,e,n){let r,{entry:o}=e,$=!1;return t.$$set=t=>{"entry"in t&&n(2,o=t.entry)},t.$$.update=()=>{4&t.$$.dirty&&(async()=>{var t;n(0,r=null!==(t=await o.getCreatedByUserId())&&void 0!==t?t:"-"),n(1,$=!0)})()},[r,$,o]}class Zn extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,Sn,Bn,r.N8,{entry:2})}}const On=Zn;var Mn=n(44594),Gn=n(31668),jn=n(25108);function Nn(t){let e;return{c(){e=(0,r.fLW)("Get missing encryption keys")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Fn(t){let e,n,o,$,s,c,i,a,l,f,p=t[8].imported+"",d=t[8].total+"",u=1===t[8].total?"":"s";function g(t,e){return t[9]&&t[9].usable?Kn:Vn}let m=g(t),y=m(t);return{c(){e=(0,r.bGB)("p"),n=(0,r.fLW)("Restored "),o=(0,r.fLW)(p),$=(0,r.fLW)(" of "),s=(0,r.fLW)(d),c=(0,r.fLW)(" key"),i=(0,r.fLW)(u),a=(0,r.fLW)(" from the backup."),l=(0,r.DhX)(),y.c(),f=(0,r.cSb)()},m(t,p){(0,r.$Tr)(t,e,p),(0,r.R3I)(e,n),(0,r.R3I)(e,o),(0,r.R3I)(e,$),(0,r.R3I)(e,s),(0,r.R3I)(e,c),(0,r.R3I)(e,i),(0,r.R3I)(e,a),(0,r.$Tr)(t,l,p),y.m(t,p),(0,r.$Tr)(t,f,p)},p(t,e){256&e&&p!==(p=t[8].imported+"")&&(0,r.rTO)(o,p),256&e&&d!==(d=t[8].total+"")&&(0,r.rTO)(s,d),256&e&&u!==(u=1===t[8].total?"":"s")&&(0,r.rTO)(i,u),m!==(m=g(t))&&(y.d(1),y=m(t),y&&(y.c(),y.m(f.parentNode,f)))},i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(l),y.d(t),t&&(0,r.ogt)(f)}}}function zn(t){let e,n,o,$,s,c,i,a,l=t[10]&&An(t);function f(e){t[15](e)}let p={use:[Ae.$Y],variant:"outlined",type:"password",required:!0,label:"Passphrase",style:"width: 100%;",$$slots:{helper:[qn]},$$scope:{ctx:t}};return void 0!==t[6]&&(p.value=t[6]),$=new bt.ZP({props:p}),r.VnY.push((()=>(0,r.akz)($,"value",f))),$.$on("keyup",t[16]),i=new Z.ZP({props:{variant:"unelevated",disabled:t[11]||void 0,$$slots:{default:[Qn]},$$scope:{ctx:t}}}),i.$on("click",t[17]),{c(){e=(0,r.bGB)("p"),e.textContent="Please enter your online key backup passphrase:",n=(0,r.DhX)(),l&&l.c(),o=(0,r.DhX)(),(0,r.YCL)($.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment)},m(t,s){(0,r.$Tr)(t,e,s),(0,r.$Tr)(t,n,s),l&&l.m(t,s),(0,r.$Tr)(t,o,s),(0,r.yef)($,t,s),(0,r.$Tr)(t,c,s),(0,r.yef)(i,t,s),a=!0},p(t,e){t[10]?l?l.p(t,e):(l=An(t),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null);const n={};524288&e&&(n.$$scope={dirty:e,ctx:t}),!s&&64&e&&(s=!0,n.value=t[6],(0,r.hjT)((()=>s=!1))),$.$set(n);const c={};2048&e&&(c.disabled=t[11]||void 0),526336&e&&(c.$$scope={dirty:e,ctx:t}),i.$set(c)},i(t){a||((0,r.Ui)($.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),a=!0)},o(t){(0,r.etI)($.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),a=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),l&&l.d(t),t&&(0,r.ogt)(o),(0,r.vpE)($,t),t&&(0,r.ogt)(c),(0,r.vpE)(i,t)}}}function Pn(t){let e,n,o,$,s,c,i,a,l,f,p,d,u,g,m,y,h,v,w,x,L,I,T;function U(t,e){return t[3]?rr:t[2]?nr:er}i=new Z.JO({props:{class:"material-icons-round foo",$$slots:{default:[tr]},$$scope:{ctx:t}}});let C=U(t),b=C(t);function Y(t,e){return 1===t[4]?cr:sr}y=new Z.JO({props:{class:"material-icons-round foo",$$slots:{default:[$r]},$$scope:{ctx:t}}});let E=Y(t),D=E(t);return{c(){e=(0,r.bGB)("p"),e.textContent="You are missing encryption keys for one or more files. To get access to these files you will need to share the keys with this session:",n=(0,r.DhX)(),o=(0,r.bGB)("div"),$=(0,r.bGB)("div"),s=(0,r.bGB)("p"),s.textContent="Use online key backup",c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment),a=(0,r.DhX)(),l=(0,r.bGB)("p"),l.textContent="You can restore your keys from your online key backup if available",f=(0,r.DhX)(),b.c(),d=(0,r.DhX)(),u=(0,r.bGB)("div"),g=(0,r.bGB)("p"),g.textContent="Verify this session",m=(0,r.DhX)(),(0,r.YCL)(y.$$.fragment),h=(0,r.DhX)(),v=(0,r.bGB)("p"),v.textContent="You can verify this session from another of your sessions",w=(0,r.DhX)(),D.c(),(0,r.Ljt)($,"disabled",p=t[7]||void 0),(0,r.Ljt)($,"class","svelte-ikz9j4"),(0,r.Ljt)(u,"disabled",x=ur||void 0),(0,r.Ljt)(u,"class","svelte-ikz9j4"),(0,r.Ljt)(o,"class","options svelte-ikz9j4")},m(p,x){(0,r.$Tr)(p,e,x),(0,r.$Tr)(p,n,x),(0,r.$Tr)(p,o,x),(0,r.R3I)(o,$),(0,r.R3I)($,s),(0,r.R3I)($,c),(0,r.yef)(i,$,null),(0,r.R3I)($,a),(0,r.R3I)($,l),(0,r.R3I)($,f),b.m($,null),(0,r.R3I)(o,d),(0,r.R3I)(o,u),(0,r.R3I)(u,g),(0,r.R3I)(u,m),(0,r.yef)(y,u,null),(0,r.R3I)(u,h),(0,r.R3I)(u,v),(0,r.R3I)(u,w),D.m(u,null),L=!0,I||(T=(0,r.oLt)($,"click",t[14]),I=!0)},p(t,e){const n={};524288&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n),C===(C=U(t))&&b?b.p(t,e):(b.d(1),b=C(t),b&&(b.c(),b.m($,null))),(!L||128&e&&p!==(p=t[7]||void 0))&&(0,r.Ljt)($,"disabled",p);const o={};524288&e&&(o.$$scope={dirty:e,ctx:t}),y.$set(o),E!==(E=Y(t))&&(D.d(1),D=E(t),D&&(D.c(),D.m(u,null)))},i(t){L||((0,r.Ui)(i.$$.fragment,t),(0,r.Ui)(y.$$.fragment,t),L=!0)},o(t){(0,r.etI)(i.$$.fragment,t),(0,r.etI)(y.$$.fragment,t),L=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),t&&(0,r.ogt)(o),(0,r.vpE)(i),b.d(),(0,r.vpE)(y),D.d(),I=!1,T()}}}function Vn(t){let e;return{c(){e=(0,r.bGB)("p"),e.textContent="However, your session is unable to add keys to the backup because it isn't trusted."},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Kn(t){let e;return{c(){e=(0,r.bGB)("p"),e.textContent="Your session will add encryption keys to the backup."},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function An(t){let e,n;return{c(){e=(0,r.bGB)("p"),n=(0,r.fLW)(t[10]),(0,r.czc)(e,"color","red"),(0,r.czc)(e,"text-align","center"),(0,r.czc)(e,"font-weight","bold")},m(t,o){(0,r.$Tr)(t,e,o),(0,r.R3I)(e,n)},p(t,e){1024&e&&(0,r.rTO)(n,t[10])},d(t){t&&(0,r.ogt)(e)}}}function Hn(t){let e;return{c(){e=(0,r.fLW)("The is the passphrase that you chose when you setup the backup")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function qn(t){let e,n;return e=new bt.uw({props:{slot:"helper",$$slots:{default:[Hn]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};524288&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Jn(t){let e,n;return e=new Dt.Z({props:{indeterminate:!0,style:"height: 24px; width: 24px; margin-left: 8px;"}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Qn(t){let e,n,o,$=t[11]&&Jn();return{c(){e=(0,r.fLW)("Connect to backup\n                "),$&&$.c(),n=(0,r.cSb)()},m(t,s){(0,r.$Tr)(t,e,s),$&&$.m(t,s),(0,r.$Tr)(t,n,s),o=!0},p(t,e){t[11]?$?2048&e&&(0,r.Ui)($,1):($=Jn(),$.c(),(0,r.Ui)($,1),$.m(n.parentNode,n)):$&&((0,r.dvw)(),(0,r.etI)($,1,1,(()=>{$=null})),(0,r.gbL)())},i(t){o||((0,r.Ui)($),o=!0)},o(t){(0,r.etI)($),o=!1},d(t){t&&(0,r.ogt)(e),$&&$.d(t),t&&(0,r.ogt)(n)}}}function tr(t){let e;return{c(){e=(0,r.fLW)("cloud_download")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function er(t){let e;return{c(){e=(0,r.bGB)("p"),e.textContent="You don't have a key backup available",(0,r.czc)(e,"color","var(--mdc-theme-error)")},m(t,n){(0,r.$Tr)(t,e,n)},p:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function nr(t){let e,n,o=t[2].count&&or(t);return{c(){e=(0,r.bGB)("p"),n=(0,r.fLW)("Backup available "),o&&o.c(),(0,r.czc)(e,"color","var(--mdc-theme-primary)")},m(t,$){(0,r.$Tr)(t,e,$),(0,r.R3I)(e,n),o&&o.m(e,null)},p(t,n){t[2].count?o?o.p(t,n):(o=or(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&(0,r.ogt)(e),o&&o.d()}}}function rr(t){let e;return{c(){e=(0,r.bGB)("p"),e.textContent="You are already connected to online key backup",(0,r.czc)(e,"color","var(--mdc-theme-primary)")},m(t,n){(0,r.$Tr)(t,e,n)},p:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function or(t){let e,n,o,$=t[2].count+"";return{c(){e=(0,r.fLW)("containing "),n=(0,r.fLW)($),o=(0,r.fLW)(" keys")},m(t,$){(0,r.$Tr)(t,e,$),(0,r.$Tr)(t,n,$),(0,r.$Tr)(t,o,$)},p(t,e){4&e&&$!==($=t[2].count+"")&&(0,r.rTO)(n,$)},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),t&&(0,r.ogt)(o)}}}function $r(t){let e;return{c(){e=(0,r.fLW)("verified_user")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function sr(t){let e;return{c(){e=(0,r.bGB)("p"),e.textContent="Session verification is not yet implemented",(0,r.czc)(e,"color","var(--mdc-theme-error)")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function cr(t){let e;return{c(){e=(0,r.bGB)("p"),e.textContent="You don't have any other sessions that you can verify with",(0,r.czc)(e,"color","var(--mdc-theme-error)")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function ir(t){let e,n,o,$;const s=[Pn,zn,Fn],c=[];function i(t,e){return t[5]?t[8]?2:1:0}return e=i(t),n=c[e]=s[e](t),{c(){n.c(),o=(0,r.cSb)()},m(t,n){c[e].m(t,n),(0,r.$Tr)(t,o,n),$=!0},p(t,$){let a=e;e=i(t),e===a?c[e].p(t,$):((0,r.dvw)(),(0,r.etI)(c[a],1,1,(()=>{c[a]=null})),(0,r.gbL)(),n=c[e],n?n.p(t,$):(n=c[e]=s[e](t),n.c()),(0,r.Ui)(n,1),n.m(o.parentNode,o))},i(t){$||((0,r.Ui)(n),$=!0)},o(t){(0,r.etI)(n),$=!1},d(t){c[e].d(t),t&&(0,r.ogt)(o)}}}function ar(t){let e,n=t[8]?"Done":"Cancel";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){256&o&&n!==(n=t[8]?"Done":"Cancel")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function lr(t){let e,n;return e=new Z.__({props:{$$slots:{default:[ar]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};524544&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function fr(t){let e,n;return e=new Z.ZP({props:{variant:"unelevated",$$slots:{default:[lr]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};524544&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function pr(t){let e,n,o,$,s,c;return e=new Ae.Dx({props:{style:"font-size: 24px; font-weight: 600;",$$slots:{default:[Nn]},$$scope:{ctx:t}}}),o=new Ae.VY({props:{$$slots:{default:[ir]},$$scope:{ctx:t}}}),s=new Ae.eX({props:{$$slots:{default:[fr]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment)},m(t,i){(0,r.yef)(e,t,i),(0,r.$Tr)(t,n,i),(0,r.yef)(o,t,i),(0,r.$Tr)(t,$,i),(0,r.yef)(s,t,i),c=!0},p(t,n){const r={};524288&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};528380&n&&($.$$scope={dirty:n,ctx:t}),o.$set($);const c={};524544&n&&(c.$$scope={dirty:n,ctx:t}),s.$set(c)},i(t){c||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),c=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),c=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t)}}}function dr(t){let e,n;return e=new Ae.ZP({props:{open:t[0],surface$style:"width: fit-content; max-width: calc(100vw - 32px);",$$slots:{default:[pr]},$$scope:{ctx:t}}}),e.$on("MDCDialog:closed",(function(){(0,r.sBU)(t[1])&&t[1].apply(this,arguments)})),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(n,[r]){t=n;const o={};1&r&&(o.open=t[0]),528380&r&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}let ur=!0;function gr(t,e,n){let r,o,{clientManager:$}=e,{open:s}=e,{closed:c}=e,i=null,a=1,l=!1,f="",p=!0,d=!1;async function u(t,e){n(3,d=e)}(0,R.H3)((()=>{$.on("keyBackupStatus",u),u($.files,$.crypto.isConnectedToKeyBackup())})),(0,R.ev)((()=>$.off("keyBackupStatus",u)));let g="",m=!1;async function y(){if(i){n(11,m=!0);try{n(10,g=""),n(8,r=void 0),n(9,o=void 0);const t=await $.crypto.connectToExistingKeyBackup(f);n(8,r=t.restoreResult),n(9,o=t.trustInfo)}catch(t){jn.error(t),n(10,g=[t.errcode,t.message].filter((t=>!!t)).join(": "))}finally{n(11,m=!1)}}}return t.$$set=t=>{"clientManager"in t&&n(13,$=t.clientManager),"open"in t&&n(0,s=t.open),"closed"in t&&n(1,c=t.closed)},t.$$.update=()=>{8192&t.$$.dirty&&(async()=>{n(2,i=await $.crypto.getKeyBackupInfo())})(),8192&t.$$.dirty&&(async()=>{n(4,a=(await $.files.client.getDevices()).devices.length)})(),1&t.$$.dirty&&s&&(n(5,l=!1),n(6,f=""),n(8,r=void 0),n(9,o=void 0),n(10,g="")),12&t.$$.dirty&&n(7,p=!i||d)},[s,c,i,d,a,l,f,p,r,o,g,m,y,$,()=>{p||n(5,l=!0)},function(t){f=t,n(6,f),n(0,s)},t=>"Enter"===t.detail.key&&y(),()=>y()]}class mr extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,gr,dr,r.N8,{clientManager:13,open:0,closed:1})}}const yr=mr;var hr=n(25108);function vr(t){let e;return{c(){e=(0,r.fLW)("Setup online key backup")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function wr(t){let e,n,o,$;return{c(){e=(0,r.bGB)("p"),e.textContent="Online backup has been setup. Your recovery key is:",n=(0,r.DhX)(),o=(0,r.bGB)("div"),$=(0,r.fLW)(t[5]),(0,r.czc)(o,"white-space","pre-wrap"),(0,r.czc)(o,"font-family","monospace")},m(t,s){(0,r.$Tr)(t,e,s),(0,r.$Tr)(t,n,s),(0,r.$Tr)(t,o,s),(0,r.R3I)(o,$)},p(t,e){32&e&&(0,r.rTO)($,t[5])},i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),t&&(0,r.ogt)(o)}}}function xr(t){let e,n,o,$,s,c,i,a,l,f,p=t[3]&&Lr(t);function d(e){t[8](e)}let u={use:[Ae.$Y],variant:"outlined",type:"password",required:!0,label:"Passphrase",style:"width: 100%;",$$slots:{helper:[Tr]},$$scope:{ctx:t}};return void 0!==t[2]&&(u.value=t[2]),c=new bt.ZP({props:u}),r.VnY.push((()=>(0,r.akz)(c,"value",d))),c.$on("keyup",t[9]),l=new Z.ZP({props:{variant:"unelevated",disabled:t[4],$$slots:{default:[Cr]},$$scope:{ctx:t}}}),l.$on("click",t[10]),{c(){e=(0,r.bGB)("p"),e.textContent="Securely backup your encryption keys online so that you can use them in other sessions.",n=(0,r.DhX)(),o=(0,r.bGB)("p"),o.textContent="Please enter your online key backup passphrase:",$=(0,r.DhX)(),p&&p.c(),s=(0,r.DhX)(),(0,r.YCL)(c.$$.fragment),a=(0,r.DhX)(),(0,r.YCL)(l.$$.fragment)},m(t,i){(0,r.$Tr)(t,e,i),(0,r.$Tr)(t,n,i),(0,r.$Tr)(t,o,i),(0,r.$Tr)(t,$,i),p&&p.m(t,i),(0,r.$Tr)(t,s,i),(0,r.yef)(c,t,i),(0,r.$Tr)(t,a,i),(0,r.yef)(l,t,i),f=!0},p(t,e){t[3]?p?p.p(t,e):(p=Lr(t),p.c(),p.m(s.parentNode,s)):p&&(p.d(1),p=null);const n={};2048&e&&(n.$$scope={dirty:e,ctx:t}),!i&&4&e&&(i=!0,n.value=t[2],(0,r.hjT)((()=>i=!1))),c.$set(n);const o={};16&e&&(o.disabled=t[4]),2064&e&&(o.$$scope={dirty:e,ctx:t}),l.$set(o)},i(t){f||((0,r.Ui)(c.$$.fragment,t),(0,r.Ui)(l.$$.fragment,t),f=!0)},o(t){(0,r.etI)(c.$$.fragment,t),(0,r.etI)(l.$$.fragment,t),f=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),t&&(0,r.ogt)(o),t&&(0,r.ogt)($),p&&p.d(t),t&&(0,r.ogt)(s),(0,r.vpE)(c,t),t&&(0,r.ogt)(a),(0,r.vpE)(l,t)}}}function Lr(t){let e,n;return{c(){e=(0,r.bGB)("p"),n=(0,r.fLW)(t[3]),(0,r.czc)(e,"color","red"),(0,r.czc)(e,"text-align","center"),(0,r.czc)(e,"font-weight","bold")},m(t,o){(0,r.$Tr)(t,e,o),(0,r.R3I)(e,n)},p(t,e){8&e&&(0,r.rTO)(n,t[3])},d(t){t&&(0,r.ogt)(e)}}}function Ir(t){let e;return{c(){e=(0,r.fLW)("You will use this passphrase to access this backup in future")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Tr(t){let e,n;return e=new bt.uw({props:{slot:"helper",$$slots:{default:[Ir]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};2048&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Ur(t){let e,n;return e=new Dt.Z({props:{indeterminate:!0,style:"height: 24px; width: 24px; margin-left: 8px;"}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Cr(t){let e,n,o,$=t[4]&&Ur();return{c(){e=(0,r.fLW)("Create backup\n                "),$&&$.c(),n=(0,r.cSb)()},m(t,s){(0,r.$Tr)(t,e,s),$&&$.m(t,s),(0,r.$Tr)(t,n,s),o=!0},p(t,e){t[4]?$?16&e&&(0,r.Ui)($,1):($=Ur(),$.c(),(0,r.Ui)($,1),$.m(n.parentNode,n)):$&&((0,r.dvw)(),(0,r.etI)($,1,1,(()=>{$=null})),(0,r.gbL)())},i(t){o||((0,r.Ui)($),o=!0)},o(t){(0,r.etI)($),o=!1},d(t){t&&(0,r.ogt)(e),$&&$.d(t),t&&(0,r.ogt)(n)}}}function br(t){let e,n,o,$;const s=[xr,wr],c=[];function i(t,e){return t[5]?1:0}return e=i(t),n=c[e]=s[e](t),{c(){n.c(),o=(0,r.cSb)()},m(t,n){c[e].m(t,n),(0,r.$Tr)(t,o,n),$=!0},p(t,$){let a=e;e=i(t),e===a?c[e].p(t,$):((0,r.dvw)(),(0,r.etI)(c[a],1,1,(()=>{c[a]=null})),(0,r.gbL)(),n=c[e],n?n.p(t,$):(n=c[e]=s[e](t),n.c()),(0,r.Ui)(n,1),n.m(o.parentNode,o))},i(t){$||((0,r.Ui)(n),$=!0)},o(t){(0,r.etI)(n),$=!1},d(t){c[e].d(t),t&&(0,r.ogt)(o)}}}function Yr(t){let e,n=t[5]?"Done":"Cancel";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){32&o&&n!==(n=t[5]?"Done":"Cancel")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function Er(t){let e,n;return e=new Z.__({props:{$$slots:{default:[Yr]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};2080&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Dr(t){let e,n;return e=new Z.ZP({props:{variant:"unelevated",$$slots:{default:[Er]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};2080&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function kr(t){let e,n,o,$,s,c;return e=new Ae.Dx({props:{style:"font-size: 24px; font-weight: 600;",$$slots:{default:[vr]},$$scope:{ctx:t}}}),o=new Ae.VY({props:{$$slots:{default:[br]},$$scope:{ctx:t}}}),s=new Ae.eX({props:{$$slots:{default:[Dr]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment)},m(t,i){(0,r.yef)(e,t,i),(0,r.$Tr)(t,n,i),(0,r.yef)(o,t,i),(0,r.$Tr)(t,$,i),(0,r.yef)(s,t,i),c=!0},p(t,n){const r={};2048&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};2108&n&&($.$$scope={dirty:n,ctx:t}),o.$set($);const c={};2080&n&&(c.$$scope={dirty:n,ctx:t}),s.$set(c)},i(t){c||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),c=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),c=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t)}}}function _r(t){let e,n;return e=new Ae.ZP({props:{open:t[0],surface$style:"width: fit-content; max-width: calc(100vw - 32px);",$$slots:{default:[kr]},$$scope:{ctx:t}}}),e.$on("MDCDialog:closed",(function(){(0,r.sBU)(t[1])&&t[1].apply(this,arguments)})),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(n,[r]){t=n;const o={};1&r&&(o.open=t[0]),2108&r&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Xr(t,e,n){let{clientManager:r}=e,{open:o}=e,{closed:$}=e,s="",c="",i=!1,a="";async function l(){n(4,i=!0);try{n(3,c=""),n(5,a=await r.crypto.createNewKeyBackup(s))}catch(t){hr.error(t),n(3,c=[t.errcode,t.message].filter((t=>!!t)).join(": "))}finally{n(4,i=!1)}}return t.$$set=t=>{"clientManager"in t&&n(7,r=t.clientManager),"open"in t&&n(0,o=t.open),"closed"in t&&n(1,$=t.closed)},t.$$.update=()=>{1&t.$$.dirty&&o&&(n(2,s=""),n(3,c=""),n(5,a=""))},[o,$,s,c,i,a,l,r,function(t){s=t,n(2,s),n(0,o)},t=>"Enter"===t.detail.key&&l(),()=>l()]}class Wr extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,Xr,_r,r.N8,{clientManager:7,open:0,closed:1})}}const Rr=Wr;n(45213),n(31037);var Br=n(30454),Sr=n(53314),Zr=n(97482);const Or=["image/jpeg","image/gif","image/png","video/mp4","video/webm","video/ogg","audio/mp4","audio/webm","audio/aac","audio/mpeg","audio/ogg","audio/wave","audio/wav","audio/x-wav","audio/x-pn-wav","audio/flac","audio/x-flac"];function Mr(t){return URL.createObjectURL(new Blob([t.data],{type:(e=t.mimetype,Or.includes(e)?e:"application/octet-stream")}));var e}function Gr(t){let e,n,o,$;return e=new Ae.Dx({props:{style:"font-size: 24px; font-weight: 600;",$$slots:{default:[jr]},$$scope:{ctx:t}}}),o=new Ae.VY({props:{$$slots:{default:[Qr]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};4194306&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};4194750&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function jr(t){let e,n=t[1].name+"";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){2&o&&n!==(n=t[1].name+"")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function Nr(t){let e,n;return e=new Un.O({}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p:r.ZTd,i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Fr(t){let e,n;return{c(){e=(0,r.bGB)("p"),n=(0,r.fLW)(t[5])},m(t,o){(0,r.$Tr)(t,e,o),(0,r.R3I)(e,n)},p(t,e){32&e&&(0,r.rTO)(n,t[5])},i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function zr(t){let e,n,o,$,s;const c=[Hr,Ar,Kr,Vr,Pr],i=[];function a(t,n){return 12&n&&(e=null),null==e&&(e=!(!t[3].mimetype.startsWith("image")&&!["png","svg","jpg","jpeg","gif"].includes(t[2]))),e?0:"application/pdf"===t[3].mimetype||"pdf"===t[2]?1:"text/markdown"===t[3].mimetype||"md"===t[2]?2:"text/plain"===t[3].mimetype||"txt"===t[2]?3:4}return n=a(t,-1),o=i[n]=c[n](t),{c(){o.c(),$=(0,r.cSb)()},m(t,e){i[n].m(t,e),(0,r.$Tr)(t,$,e),s=!0},p(t,e){let s=n;n=a(t,e),n===s?i[n].p(t,e):((0,r.dvw)(),(0,r.etI)(i[s],1,1,(()=>{i[s]=null})),(0,r.gbL)(),o=i[n],o?o.p(t,e):(o=i[n]=c[n](t),o.c()),(0,r.Ui)(o,1),o.m($.parentNode,$))},i(t){s||((0,r.Ui)(o),s=!0)},o(t){(0,r.etI)(o),s=!1},d(t){i[n].d(t),t&&(0,r.ogt)($)}}}function Pr(t){let e,n,o,$,s=t[3].mimetype+"";return{c(){e=(0,r.fLW)("Unable to preview/open files of this type: "),n=(0,r.bGB)("pre"),o=(0,r.fLW)(s),$=(0,r.fLW)(".")},m(t,s){(0,r.$Tr)(t,e,s),(0,r.$Tr)(t,n,s),(0,r.R3I)(n,o),(0,r.$Tr)(t,$,s)},p(t,e){8&e&&s!==(s=t[3].mimetype+"")&&(0,r.rTO)(o,s)},i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),t&&(0,r.ogt)($)}}}function Vr(t){let e,n,o,$,s=go(t[3].data)+"";return{c(){e=(0,r.bGB)("pre"),n=(0,r.fLW)("                        "),o=(0,r.fLW)(s),$=(0,r.fLW)("\n                    ")},m(t,s){(0,r.$Tr)(t,e,s),(0,r.R3I)(e,n),(0,r.R3I)(e,o),(0,r.R3I)(e,$)},p(t,e){8&e&&s!==(s=go(t[3].data)+"")&&(0,r.rTO)(o,s)},i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function Kr(t){let e,n,o,$;const s=[Jr,qr],c=[];function i(t,e){return t[7]?0:1}return e=i(t),n=c[e]=s[e](t),{c(){n.c(),o=(0,r.cSb)()},m(t,n){c[e].m(t,n),(0,r.$Tr)(t,o,n),$=!0},p(t,$){let a=e;e=i(t),e===a?c[e].p(t,$):((0,r.dvw)(),(0,r.etI)(c[a],1,1,(()=>{c[a]=null})),(0,r.gbL)(),n=c[e],n?n.p(t,$):(n=c[e]=s[e](t),n.c()),(0,r.Ui)(n,1),n.m(o.parentNode,o))},i(t){$||((0,r.Ui)(n),$=!0)},o(t){(0,r.etI)(n),$=!1},d(t){c[e].d(t),t&&(0,r.ogt)(o)}}}function Ar(t){let e,n,o;return{c(){e=(0,r.bGB)("iframe"),(0,r.Jn4)(e.src,n=t[4])||(0,r.Ljt)(e,"src",n),(0,r.Ljt)(e,"height","100%"),(0,r.Ljt)(e,"width","100%"),(0,r.Ljt)(e,"title",o=t[1].name)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,$){16&$&&!(0,r.Jn4)(e.src,n=t[4])&&(0,r.Ljt)(e,"src",n),2&$&&o!==(o=t[1].name)&&(0,r.Ljt)(e,"title",o)},i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function Hr(t){let e,n,o;return{c(){e=(0,r.bGB)("img"),(0,r.Jn4)(e.src,n=t[4])||(0,r.Ljt)(e,"src",n),(0,r.Ljt)(e,"alt",o=t[1].name),(0,r.czc)(e,"max-width","100%"),(0,r.czc)(e,"max-height","100%")},m(t,n){(0,r.$Tr)(t,e,n)},p(t,$){16&$&&!(0,r.Jn4)(e.src,n=t[4])&&(0,r.Ljt)(e,"src",n),2&$&&o!==(o=t[1].name)&&(0,r.Ljt)(e,"alt",o)},i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function qr(t){let e,n;return e=new Br.AE({props:{value:t[8],plugins:t[10],sanitize:mo}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};256&n&&(r.value=t[8]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Jr(t){let e,n;return e=new Br.ML({props:{value:t[8],plugins:t[10],sanitize:mo,placeholder:"",editorConfig:{},locale:"en",overridePreview:void 0,uploadImages:void 0}}),e.$on("change",t[12]),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};256&n&&(r.value=t[8]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Qr(t){let e,n,o,$;const s=[zr,Fr,Nr],c=[];function i(t,e){return t[3]?0:t[5]?1:2}return e=i(t),n=c[e]=s[e](t),{c(){n.c(),o=(0,r.cSb)()},m(t,n){c[e].m(t,n),(0,r.$Tr)(t,o,n),$=!0},p(t,$){let a=e;e=i(t),e===a?c[e].p(t,$):((0,r.dvw)(),(0,r.etI)(c[a],1,1,(()=>{c[a]=null})),(0,r.gbL)(),n=c[e],n?n.p(t,$):(n=c[e]=s[e](t),n.c()),(0,r.Ui)(n,1),n.m(o.parentNode,o))},i(t){$||((0,r.Ui)(n),$=!0)},o(t){(0,r.etI)(n),$=!1},d(t){c[e].d(t),t&&(0,r.ogt)(o)}}}function to(t){let e,n,o,$=t[6]&&no(t);return n=new Z.ZP({props:{action:"download",variant:"unelevated",$$slots:{default:[so]},$$scope:{ctx:t}}}),{c(){$&&$.c(),e=(0,r.DhX)(),(0,r.YCL)(n.$$.fragment)},m(t,s){$&&$.m(t,s),(0,r.$Tr)(t,e,s),(0,r.yef)(n,t,s),o=!0},p(t,o){t[6]?$?($.p(t,o),64&o&&(0,r.Ui)($,1)):($=no(t),$.c(),(0,r.Ui)($,1),$.m(e.parentNode,e)):$&&((0,r.dvw)(),(0,r.etI)($,1,1,(()=>{$=null})),(0,r.gbL)());const s={};4194304&o&&(s.$$scope={dirty:o,ctx:t}),n.$set(s)},i(t){o||((0,r.Ui)($),(0,r.Ui)(n.$$.fragment,t),o=!0)},o(t){(0,r.etI)($),(0,r.etI)(n.$$.fragment,t),o=!1},d(t){$&&$.d(t),t&&(0,r.ogt)(e),(0,r.vpE)(n,t)}}}function eo(t){let e,n,o,$;return e=new Z.ZP({props:{variant:"outlined",$$slots:{default:[io]},$$scope:{ctx:t}}}),e.$on("click",t[16]),o=new Z.ZP({props:{action:"save",variant:"unelevated",disabled:!t[9],$$slots:{default:[lo]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};512&n&&($.disabled=!t[9]),4194304&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function no(t){let e,n;return e=new Z.ZP({props:{variant:"outlined",$$slots:{default:[oo]},$$scope:{ctx:t}}}),e.$on("click",t[17]),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function ro(t){let e;return{c(){e=(0,r.fLW)("Edit")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function oo(t){let e,n;return e=new Z.__({props:{$$slots:{default:[ro]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function $o(t){let e;return{c(){e=(0,r.fLW)("Download")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function so(t){let e,n;return e=new Z.__({props:{$$slots:{default:[$o]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function co(t){let e;return{c(){e=(0,r.fLW)("Cancel")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function io(t){let e,n;return e=new Z.__({props:{$$slots:{default:[co]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function ao(t){let e;return{c(){e=(0,r.fLW)("Save")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function lo(t){let e,n;return e=new Z.__({props:{$$slots:{default:[ao]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function fo(t){let e,n,o,$;const s=[eo,to],c=[];function i(t,e){return t[7]?0:1}return e=i(t),n=c[e]=s[e](t),{c(){n.c(),o=(0,r.cSb)()},m(t,n){c[e].m(t,n),(0,r.$Tr)(t,o,n),$=!0},p(t,$){let a=e;e=i(t),e===a?c[e].p(t,$):((0,r.dvw)(),(0,r.etI)(c[a],1,1,(()=>{c[a]=null})),(0,r.gbL)(),n=c[e],n?n.p(t,$):(n=c[e]=s[e](t),n.c()),(0,r.Ui)(n,1),n.m(o.parentNode,o))},i(t){$||((0,r.Ui)(n),$=!0)},o(t){(0,r.etI)(n),$=!1},d(t){c[e].d(t),t&&(0,r.ogt)(o)}}}function po(t){let e,n,o,$=t[1]&&Gr(t);return n=new Ae.eX({props:{$$slots:{default:[fo]},$$scope:{ctx:t}}}),{c(){$&&$.c(),e=(0,r.DhX)(),(0,r.YCL)(n.$$.fragment)},m(t,s){$&&$.m(t,s),(0,r.$Tr)(t,e,s),(0,r.yef)(n,t,s),o=!0},p(t,o){t[1]?$?($.p(t,o),2&o&&(0,r.Ui)($,1)):($=Gr(t),$.c(),(0,r.Ui)($,1),$.m(e.parentNode,e)):$&&((0,r.dvw)(),(0,r.etI)($,1,1,(()=>{$=null})),(0,r.gbL)());const s={};4195008&o&&(s.$$scope={dirty:o,ctx:t}),n.$set(s)},i(t){o||((0,r.Ui)($),(0,r.Ui)(n.$$.fragment,t),o=!0)},o(t){(0,r.etI)($),(0,r.etI)(n.$$.fragment,t),o=!1},d(t){$&&$.d(t),t&&(0,r.ogt)(e),(0,r.vpE)(n,t)}}}function uo(t){let e,n,o;function $(e){t[18](e)}let s={surface$style:"width: calc(100vw - 100px); max-width: calc(100vw - 32px); height: calc(100vh - 100px);",$$slots:{default:[po]},$$scope:{ctx:t}};return void 0!==t[0]&&(s.open=t[0]),e=new Ae.ZP({props:s}),r.VnY.push((()=>(0,r.akz)(e,"open",$))),e.$on("MDCDialog:closed",t[11]),{c(){(0,r.YCL)(e.$$.fragment)},m(t,n){(0,r.yef)(e,t,n),o=!0},p(t,[o]){const $={};4195326&o&&($.$$scope={dirty:o,ctx:t}),!n&&1&o&&(n=!0,$.open=t[0],(0,r.hjT)((()=>n=!1))),e.$set($)},i(t){o||((0,r.Ui)(e.$$.fragment,t),o=!0)},o(t){(0,r.etI)(e.$$.fragment,t),o=!1},d(t){(0,r.vpE)(e,t)}}}function go(t){return(new TextDecoder).decode(t)}function mo(t){return t}function yo(t,e,n){const r=[(0,Sr.Z)(),(0,Zr.Z)({test:()=>!0})];let o,$,s,c,i,a,l=!1,f="",p=!1,d=!1,u="",g=!1;function m(){!s||"text/markdown"!==s.mimetype&&"md"!==$||n(8,u=go(s.data)),n(7,d=!0)}function y(){!s||"text/markdown"!==s.mimetype&&"md"!==$||n(8,u=go(s.data)),n(7,d=!1)}return[l,o,$,s,i,f,p,d,u,g,r,async function(t){var e;if("save"===t.detail.action){const t=(new TextEncoder).encode(u);return await o.addVersion({data:t,size:t.length,mimetype:"text/markdown"}),a(!0)}if("download"===t.detail.action){const t=document.createElement("a");t.href=null!==(!c&&s&&(c=Mr(s)),e=c)&&void 0!==e?e:"",t.download=o.name,t.click()}a(!1)},function(t){u!==t.detail.value&&n(9,g=!0),n(8,u=t.detail.value)},m,y,async function(t){return n(0,l=!0),n(1,o=t),n(5,f=""),c=void 0,n(4,i=void 0),n(6,p=!1),n(7,d=!1),n(9,g=!1),n(8,u=""),n(3,s=void 0),n(2,$=o.name.split(".").pop().toLowerCase()),await q((async()=>{let t;try{t=I.Vy.info(`Downloading ${o.name} for preview...`),n(3,s=await o.getBlob()),t.remove(),I.Vy.success(`Downloaded ${o.name} for preview`,{duration:4e3,showProgress:!0}),s&&(n(4,i=await function(t){return new Promise(((e,n)=>{const r=new FileReader;r.readAsDataURL(new Blob([t.data],{type:t.mimetype})),r.onload=()=>{var t;return e((null===(t=r.result)||void 0===t?void 0:t.toString())||"")},r.onerror=t=>n(t)}))}(s)),"text/markdown"!==s.mimetype&&"md"!==$||(n(8,u=go(s.data)),n(6,p=!0)))}catch(e){throw n(5,f=`Failed to download file: ${e.message}`),t&&t.remove(),e}}),`Failed to download ${o.name} for preview`),new Promise((t=>{a=t}))},()=>y(),()=>m(),function(t){l=t,n(0,l)}]}class ho extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,yo,uo,r.N8,{open:15})}get open(){return this.$$.ctx[15]}}const vo=ho;var wo=n(80983);function xo(t){const e=wo.lookup(t);return"string"==typeof e?e:"application/octet-stream"}function Lo(t,e,n){const r=t.slice();return r[81]=e[n],r}function Io(t,e,n){const r=t.slice();return r[81]=e[n],r}function To(t,e,n){const r=t.slice();return r[86]=e[n],r}function Uo(t){let e,n,o,$,s,c,i,a,l,f;return n=new Z.JO({props:{class:"material-icons-round",$$slots:{default:[Co]},$$scope:{ctx:t}}}),i=new Z.ZP({props:{$$slots:{default:[bo]},$$scope:{ctx:t}}}),i.$on("click",t[42]),l=new Z.ZP({props:{secondary:!0,$$slots:{default:[Yo]},$$scope:{ctx:t}}}),l.$on("click",t[43]),{c(){e=(0,r.bGB)("div"),(0,r.YCL)(n.$$.fragment),o=(0,r.DhX)(),$=(0,r.bGB)("div"),$.textContent="You are missing encryption keys for some of your files",s=(0,r.DhX)(),c=(0,r.bGB)("div"),(0,r.YCL)(i.$$.fragment),a=(0,r.DhX)(),(0,r.YCL)(l.$$.fragment),(0,r.Ljt)(e,"class","alert-banner svelte-1dyruly")},m(t,p){(0,r.$Tr)(t,e,p),(0,r.yef)(n,e,null),(0,r.R3I)(e,o),(0,r.R3I)(e,$),(0,r.R3I)(e,s),(0,r.R3I)(e,c),(0,r.yef)(i,c,null),(0,r.R3I)(c,a),(0,r.yef)(l,c,null),f=!0},p(t,e){const r={};134217728&e[2]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r);const o={};134217728&e[2]&&(o.$$scope={dirty:e,ctx:t}),i.$set(o);const $={};134217728&e[2]&&($.$$scope={dirty:e,ctx:t}),l.$set($)},i(t){f||((0,r.Ui)(n.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),(0,r.Ui)(l.$$.fragment,t),f=!0)},o(t){(0,r.etI)(n.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),(0,r.etI)(l.$$.fragment,t),f=!1},d(t){t&&(0,r.ogt)(e),(0,r.vpE)(n),(0,r.vpE)(i),(0,r.vpE)(l)}}}function Co(t){let e;return{c(){e=(0,r.fLW)("warning")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function bo(t){let e;return{c(){e=(0,r.fLW)("Help me fix this")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Yo(t){let e;return{c(){e=(0,r.fLW)("Dismiss")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Eo(t){let e,n,o,$,s,c,i,a,l,f,p;n=new Z.JO({props:{class:"material-icons-round",$$slots:{default:[Do]},$$scope:{ctx:t}}});let d=1===t[22]&&ko();return a=new Z.ZP({props:{$$slots:{default:[_o]},$$scope:{ctx:t}}}),a.$on("click",t[45]),f=new Z.ZP({props:{secondary:!0,$$slots:{default:[Xo]},$$scope:{ctx:t}}}),f.$on("click",t[46]),{c(){e=(0,r.bGB)("div"),(0,r.YCL)(n.$$.fragment),o=(0,r.DhX)(),$=(0,r.bGB)("div"),s=(0,r.fLW)("Your encryption keys are not being backed up"),d&&d.c(),c=(0,r.DhX)(),i=(0,r.bGB)("div"),(0,r.YCL)(a.$$.fragment),l=(0,r.DhX)(),(0,r.YCL)(f.$$.fragment),(0,r.Ljt)(e,"class","alert-banner svelte-1dyruly")},m(t,u){(0,r.$Tr)(t,e,u),(0,r.yef)(n,e,null),(0,r.R3I)(e,o),(0,r.R3I)(e,$),(0,r.R3I)($,s),d&&d.m($,null),(0,r.R3I)(e,c),(0,r.R3I)(e,i),(0,r.yef)(a,i,null),(0,r.R3I)(i,l),(0,r.yef)(f,i,null),p=!0},p(t,e){const r={};134217728&e[2]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r),1===t[22]?d||(d=ko(),d.c(),d.m($,null)):d&&(d.d(1),d=null);const o={};134217728&e[2]&&(o.$$scope={dirty:e,ctx:t}),a.$set(o);const s={};134217728&e[2]&&(s.$$scope={dirty:e,ctx:t}),f.$set(s)},i(t){p||((0,r.Ui)(n.$$.fragment,t),(0,r.Ui)(a.$$.fragment,t),(0,r.Ui)(f.$$.fragment,t),p=!0)},o(t){(0,r.etI)(n.$$.fragment,t),(0,r.etI)(a.$$.fragment,t),(0,r.etI)(f.$$.fragment,t),p=!1},d(t){t&&(0,r.ogt)(e),(0,r.vpE)(n),d&&d.d(),(0,r.vpE)(a),(0,r.vpE)(f)}}}function Do(t){let e;return{c(){e=(0,r.fLW)("warning")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function ko(t){let e;return{c(){e=(0,r.fLW)(". As you don't have any other sessions the keys will be lost when you sign out or close the browser.")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function _o(t){let e;return{c(){e=(0,r.fLW)("Setup now")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Xo(t){let e;return{c(){e=(0,r.fLW)("Dismiss")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Wo(t){let e,n;return e=new Le.ZP({props:{dense:!0,$$slots:{default:[$$]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};1024&n[0]|134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Ro(t){let e;return{c(){e=(0,r.fLW)("file_open")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Bo(t){let e;return{c(){e=(0,r.fLW)("Preview")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function So(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[Ro]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[Bo]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Zo(t){let e;return{c(){e=(0,r.fLW)("file_download")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Oo(t){let e;return{c(){e=(0,r.fLW)("Download")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Mo(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[Zo]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[Oo]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Go(t){let e;return{c(){e=(0,r.fLW)("history")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function jo(t){let e;return{c(){e=(0,r.fLW)("Version history")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function No(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[Go]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[jo]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Fo(t){let e;return{c(){e=(0,r.fLW)("drive_file_rename_outline")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function zo(t){let e;return{c(){e=(0,r.fLW)("Rename")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Po(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[Fo]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[zo]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Vo(t){let e;return{c(){e=(0,r.fLW)("file_copy")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Ko(t){let e;return{c(){e=(0,r.fLW)("Make a copy")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Ao(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[Vo]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[Ko]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Ho(t){let e,n=t[10].locked?"lock_open":"lock";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){1024&o[0]&&n!==(n=t[10].locked?"lock_open":"lock")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function qo(t){let e,n=t[10].locked?"Unlock":"Lock";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){1024&o[0]&&n!==(n=t[10].locked?"Unlock":"Lock")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function Jo(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[Ho]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[qo]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};1024&n[0]|134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};1024&n[0]|134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Qo(t){let e;return{c(){e=(0,r.fLW)("delete")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function t$(t){let e;return{c(){e=(0,r.fLW)("Delete")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function e$(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[Qo]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[t$]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function n$(t){let e;return{c(){e=(0,r.fLW)("code_off")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function r$(t){let e;return{c(){e=(0,r.fLW)("View source")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function o$(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[n$]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[r$]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function $$(t){let e,n,o,$,s,c,i,a,l,f,p,d,u,g,m,y,h,v,w,x,L,I;return e=new Le.ck({props:{$$slots:{default:[So]},$$scope:{ctx:t}}}),e.$on("SMUI:action",t[50]),o=new Le.ck({props:{$$slots:{default:[Mo]},$$scope:{ctx:t}}}),o.$on("SMUI:action",t[51]),s=new Le.ck({props:{$$slots:{default:[No]},$$scope:{ctx:t}}}),s.$on("SMUI:action",t[52]),i=new Le.Z0({}),l=new Le.ck({props:{$$slots:{default:[Po]},$$scope:{ctx:t}}}),l.$on("SMUI:action",t[53]),p=new Le.ck({props:{$$slots:{default:[Ao]},$$scope:{ctx:t}}}),p.$on("SMUI:action",t[54]),u=new Le.ck({props:{$$slots:{default:[Jo]},$$scope:{ctx:t}}}),u.$on("SMUI:action",t[55]),m=new Le.Z0({}),h=new Le.ck({props:{$$slots:{default:[e$]},$$scope:{ctx:t}}}),h.$on("SMUI:action",t[56]),w=new Le.Z0({}),L=new Le.ck({props:{$$slots:{default:[o$]},$$scope:{ctx:t}}}),L.$on("SMUI:action",t[57]),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment),a=(0,r.DhX)(),(0,r.YCL)(l.$$.fragment),f=(0,r.DhX)(),(0,r.YCL)(p.$$.fragment),d=(0,r.DhX)(),(0,r.YCL)(u.$$.fragment),g=(0,r.DhX)(),(0,r.YCL)(m.$$.fragment),y=(0,r.DhX)(),(0,r.YCL)(h.$$.fragment),v=(0,r.DhX)(),(0,r.YCL)(w.$$.fragment),x=(0,r.DhX)(),(0,r.YCL)(L.$$.fragment)},m(t,T){(0,r.yef)(e,t,T),(0,r.$Tr)(t,n,T),(0,r.yef)(o,t,T),(0,r.$Tr)(t,$,T),(0,r.yef)(s,t,T),(0,r.$Tr)(t,c,T),(0,r.yef)(i,t,T),(0,r.$Tr)(t,a,T),(0,r.yef)(l,t,T),(0,r.$Tr)(t,f,T),(0,r.yef)(p,t,T),(0,r.$Tr)(t,d,T),(0,r.yef)(u,t,T),(0,r.$Tr)(t,g,T),(0,r.yef)(m,t,T),(0,r.$Tr)(t,y,T),(0,r.yef)(h,t,T),(0,r.$Tr)(t,v,T),(0,r.yef)(w,t,T),(0,r.$Tr)(t,x,T),(0,r.yef)(L,t,T),I=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($);const c={};134217728&n[2]&&(c.$$scope={dirty:n,ctx:t}),s.$set(c);const i={};134217728&n[2]&&(i.$$scope={dirty:n,ctx:t}),l.$set(i);const a={};134217728&n[2]&&(a.$$scope={dirty:n,ctx:t}),p.$set(a);const f={};1024&n[0]|134217728&n[2]&&(f.$$scope={dirty:n,ctx:t}),u.$set(f);const d={};134217728&n[2]&&(d.$$scope={dirty:n,ctx:t}),h.$set(d);const g={};134217728&n[2]&&(g.$$scope={dirty:n,ctx:t}),L.$set(g)},i(t){I||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),(0,r.Ui)(l.$$.fragment,t),(0,r.Ui)(p.$$.fragment,t),(0,r.Ui)(u.$$.fragment,t),(0,r.Ui)(m.$$.fragment,t),(0,r.Ui)(h.$$.fragment,t),(0,r.Ui)(w.$$.fragment,t),(0,r.Ui)(L.$$.fragment,t),I=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),(0,r.etI)(l.$$.fragment,t),(0,r.etI)(p.$$.fragment,t),(0,r.etI)(u.$$.fragment,t),(0,r.etI)(m.$$.fragment,t),(0,r.etI)(h.$$.fragment,t),(0,r.etI)(w.$$.fragment,t),(0,r.etI)(L.$$.fragment,t),I=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t),t&&(0,r.ogt)(c),(0,r.vpE)(i,t),t&&(0,r.ogt)(a),(0,r.vpE)(l,t),t&&(0,r.ogt)(f),(0,r.vpE)(p,t),t&&(0,r.ogt)(d),(0,r.vpE)(u,t),t&&(0,r.ogt)(g),(0,r.vpE)(m,t),t&&(0,r.ogt)(y),(0,r.vpE)(h,t),t&&(0,r.ogt)(v),(0,r.vpE)(w,t),t&&(0,r.ogt)(x),(0,r.vpE)(L,t)}}}function s$(t){let e,n,o=t[10]&&Wo(t);return{c(){o&&o.c(),e=(0,r.cSb)()},m(t,$){o&&o.m(t,$),(0,r.$Tr)(t,e,$),n=!0},p(t,n){t[10]?o?(o.p(t,n),1024&n[0]&&(0,r.Ui)(o,1)):(o=Wo(t),o.c(),(0,r.Ui)(o,1),o.m(e.parentNode,e)):o&&((0,r.dvw)(),(0,r.etI)(o,1,1,(()=>{o=null})),(0,r.gbL)())},i(t){n||((0,r.Ui)(o),n=!0)},o(t){(0,r.etI)(o),n=!1},d(t){o&&o.d(t),t&&(0,r.ogt)(e)}}}function c$(t){let e,n;return e=new Le.ZP({props:{dense:!0,$$slots:{default:[y$]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4096&n[0]|134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function i$(t){let e;return{c(){e=(0,r.fLW)("drive_file_rename_outline")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function a$(t){let e;return{c(){e=(0,r.fLW)("Rename")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function l$(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[i$]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[a$]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function f$(t){let e;return{c(){e=(0,r.fLW)("content_copy")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function p$(t){let e;return{c(){e=(0,r.fLW)("Make a copy")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function d$(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[f$]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[p$]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function u$(t){let e;return{c(){e=(0,r.fLW)("delete")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function g$(t){let e;return{c(){e=(0,r.fLW)("Delete")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function m$(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[u$]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[g$]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function y$(t){let e,n,o,$,s,c,i,a;return e=new Le.ck({props:{$$slots:{default:[l$]},$$scope:{ctx:t}}}),e.$on("SMUI:action",t[59]),o=new Le.ck({props:{$$slots:{default:[d$]},$$scope:{ctx:t}}}),o.$on("SMUI:action",t[60]),s=new Le.Z0({}),i=new Le.ck({props:{$$slots:{default:[m$]},$$scope:{ctx:t}}}),i.$on("SMUI:action",t[61]),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment)},m(t,l){(0,r.yef)(e,t,l),(0,r.$Tr)(t,n,l),(0,r.yef)(o,t,l),(0,r.$Tr)(t,$,l),(0,r.yef)(s,t,l),(0,r.$Tr)(t,c,l),(0,r.yef)(i,t,l),a=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($);const s={};134217728&n[2]&&(s.$$scope={dirty:n,ctx:t}),i.$set(s)},i(t){a||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),a=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),a=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t),t&&(0,r.ogt)(c),(0,r.vpE)(i,t)}}}function h$(t){let e,n,o=t[12]&&c$(t);return{c(){o&&o.c(),e=(0,r.cSb)()},m(t,$){o&&o.m(t,$),(0,r.$Tr)(t,e,$),n=!0},p(t,n){t[12]?o?(o.p(t,n),4096&n[0]&&(0,r.Ui)(o,1)):(o=c$(t),o.c(),(0,r.Ui)(o,1),o.m(e.parentNode,e)):o&&((0,r.dvw)(),(0,r.etI)(o,1,1,(()=>{o=null})),(0,r.gbL)())},i(t){n||((0,r.Ui)(o),n=!0)},o(t){(0,r.etI)(o),n=!1},d(t){o&&o.d(t),t&&(0,r.ogt)(e)}}}function v$(t){let e,n;return e=new He.Z({}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function w$(t){let e;return{c(){e=(0,r.fLW)("Name")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function x$(t){let e;return{c(){e=(0,r.fLW)("Last modified")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function L$(t){let e;return{c(){e=(0,r.fLW)("File size")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function I$(t){let e,n,o,$,s,c,i,a;return e=new V.bL({props:{checkbox:!0,$$slots:{default:[v$]},$$scope:{ctx:t}}}),o=new V.bL({props:{$$slots:{default:[w$]},$$scope:{ctx:t}}}),s=new V.bL({props:{$$slots:{default:[x$]},$$scope:{ctx:t}}}),i=new V.bL({props:{$$slots:{default:[L$]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment)},m(t,l){(0,r.yef)(e,t,l),(0,r.$Tr)(t,n,l),(0,r.yef)(o,t,l),(0,r.$Tr)(t,$,l),(0,r.yef)(s,t,l),(0,r.$Tr)(t,c,l),(0,r.yef)(i,t,l),a=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($);const c={};134217728&n[2]&&(c.$$scope={dirty:n,ctx:t}),s.$set(c);const a={};134217728&n[2]&&(a.$$scope={dirty:n,ctx:t}),i.$set(a)},i(t){a||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),a=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),a=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t),t&&(0,r.ogt)(c),(0,r.vpE)(i,t)}}}function T$(t){let e,n;return e=new V.X2({props:{class:"header",$$slots:{default:[I$]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function U$(t){let e;return{c(){e=(0,r.fLW)("Loading...")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function C$(t){let e,n,o;function $(e){t[63](e)}let s={value:t[86],valueKey:t[86].id};return void 0!==t[4]&&(s.group=t[4]),e=new He.Z({props:s}),r.VnY.push((()=>(0,r.akz)(e,"group",$))),{c(){(0,r.YCL)(e.$$.fragment)},m(t,n){(0,r.yef)(e,t,n),o=!0},p(t,o){const $={};4&o[0]&&($.value=t[86]),4&o[0]&&($.valueKey=t[86].id),!n&&16&o[0]&&(n=!0,$.group=t[4],(0,r.hjT)((()=>n=!1))),e.$set($)},i(t){o||((0,r.Ui)(e.$$.fragment,t),o=!0)},o(t){(0,r.etI)(e.$$.fragment,t),o=!1},d(t){(0,r.vpE)(e,t)}}}function b$(t){let e,n,o,$,s,c=t[86].name+"";return{c(){e=(0,r.bGB)("div"),n=(0,r.bGB)("div"),n.innerHTML='<span class="material-icons-round svelte-1dyruly">folder_outline</span>',o=(0,r.DhX)(),$=(0,r.bGB)("div"),s=(0,r.fLW)(c),(0,r.Ljt)(n,"class","svelte-1dyruly"),(0,r.Ljt)($,"class","svelte-1dyruly"),(0,r.Ljt)(e,"class","name-col svelte-1dyruly")},m(t,c){(0,r.$Tr)(t,e,c),(0,r.R3I)(e,n),(0,r.R3I)(e,o),(0,r.R3I)(e,$),(0,r.R3I)($,s)},p(t,e){4&e[0]&&c!==(c=t[86].name+"")&&(0,r.rTO)(s,c)},d(t){t&&(0,r.ogt)(e)}}}function Y$(t){let e,n;return e=new Tn({props:{entry:t[86]}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4&n[0]&&(r.entry=t[86]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function E$(t){let e;return{c(){e=(0,r.fLW)("-")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function D$(t){let e,n,o,$,s,c,i,a;return e=new V.bL({props:{checkbox:!0,$$slots:{default:[C$]},$$scope:{ctx:t}}}),o=new V.bL({props:{$$slots:{default:[b$]},$$scope:{ctx:t}}}),s=new V.bL({props:{$$slots:{default:[Y$]},$$scope:{ctx:t}}}),i=new V.bL({props:{$$slots:{default:[E$]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment)},m(t,l){(0,r.yef)(e,t,l),(0,r.$Tr)(t,n,l),(0,r.yef)(o,t,l),(0,r.$Tr)(t,$,l),(0,r.yef)(s,t,l),(0,r.$Tr)(t,c,l),(0,r.yef)(i,t,l),a=!0},p(t,n){const r={};20&n[0]|134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};4&n[0]|134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($);const c={};4&n[0]|134217728&n[2]&&(c.$$scope={dirty:n,ctx:t}),s.$set(c);const a={};134217728&n[2]&&(a.$$scope={dirty:n,ctx:t}),i.$set(a)},i(t){a||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),a=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),a=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t),t&&(0,r.ogt)(c),(0,r.vpE)(i,t)}}}function k$(t){let e,n;return e=new V.X2({props:{class:"cursor-pointer",$$slots:{default:[D$]},$$scope:{ctx:t}}}),e.$on("dblclick:preventDefault",(function(){return t[64](t[86])})),e.$on("contextmenu:preventDefault",(function(...e){return t[65](t[86],...e)})),e.$on("mousedown:preventDefault",_s),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(n,r){t=n;const o={};20&r[0]|134217728&r[2]&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function _$(t){let e,n,o;function $(e){t[66](e)}let s={value:t[81],valueKey:t[81].id};return void 0!==t[4]&&(s.group=t[4]),e=new He.Z({props:s}),r.VnY.push((()=>(0,r.akz)(e,"group",$))),{c(){(0,r.YCL)(e.$$.fragment)},m(t,n){(0,r.yef)(e,t,n),o=!0},p(t,o){const $={};8&o[0]&&($.value=t[81]),8&o[0]&&($.valueKey=t[81].id),!n&&16&o[0]&&(n=!0,$.group=t[4],(0,r.hjT)((()=>n=!1))),e.$set($)},i(t){o||((0,r.Ui)(e.$$.fragment,t),o=!0)},o(t){(0,r.etI)(e.$$.fragment,t),o=!1},d(t){(0,r.vpE)(e,t)}}}function X$(t){let e;return{c(){e=(0,r.bGB)("div"),e.innerHTML='<span class="material-icons-round svelte-1dyruly">lock</span>',(0,r.Ljt)(e,"class","icon svelte-1dyruly")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function W$(t){let e,n,o,$,s,c,i,a,l=H(t[81].name)+"",f=t[81].name+"",p=t[81].locked&&X$();return{c(){e=(0,r.bGB)("div"),n=(0,r.bGB)("div"),o=(0,r.bGB)("span"),$=(0,r.fLW)(l),s=(0,r.DhX)(),c=(0,r.bGB)("div"),i=(0,r.fLW)(f),a=(0,r.DhX)(),p&&p.c(),(0,r.Ljt)(o,"class","material-icons-round svelte-1dyruly"),(0,r.Ljt)(n,"class","svelte-1dyruly"),(0,r.Ljt)(c,"class","svelte-1dyruly"),(0,r.Ljt)(e,"class","name-col svelte-1dyruly")},m(t,l){(0,r.$Tr)(t,e,l),(0,r.R3I)(e,n),(0,r.R3I)(n,o),(0,r.R3I)(o,$),(0,r.R3I)(e,s),(0,r.R3I)(e,c),(0,r.R3I)(c,i),(0,r.R3I)(e,a),p&&p.m(e,null)},p(t,n){8&n[0]&&l!==(l=H(t[81].name)+"")&&(0,r.rTO)($,l),8&n[0]&&f!==(f=t[81].name+"")&&(0,r.rTO)(i,f),t[81].locked?p||(p=X$(),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(t){t&&(0,r.ogt)(e),p&&p.d()}}}function R$(t){let e,n;return e=new Tn({props:{entry:t[81],lastModified:!0}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};8&n[0]&&(r.entry=t[81]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function B$(t){let e,n;return e=new Xn({props:{entry:t[81]}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};8&n[0]&&(r.entry=t[81]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function S$(t){let e,n,o,$,s,c,i,a,l;return e=new V.bL({props:{checkbox:!0,$$slots:{default:[_$]},$$scope:{ctx:t}}}),o=new V.bL({props:{$$slots:{default:[W$]},$$scope:{ctx:t}}}),o.$on("click:preventDefault",(function(...e){return t[67](t[81],...e)})),s=new V.bL({props:{$$slots:{default:[R$]},$$scope:{ctx:t}}}),i=new V.bL({props:{$$slots:{default:[B$]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment),a=(0,r.DhX)()},m(t,f){(0,r.yef)(e,t,f),(0,r.$Tr)(t,n,f),(0,r.yef)(o,t,f),(0,r.$Tr)(t,$,f),(0,r.yef)(s,t,f),(0,r.$Tr)(t,c,f),(0,r.yef)(i,t,f),(0,r.$Tr)(t,a,f),l=!0},p(n,r){t=n;const $={};24&r[0]|134217728&r[2]&&($.$$scope={dirty:r,ctx:t}),e.$set($);const c={};8&r[0]|134217728&r[2]&&(c.$$scope={dirty:r,ctx:t}),o.$set(c);const a={};8&r[0]|134217728&r[2]&&(a.$$scope={dirty:r,ctx:t}),s.$set(a);const l={};8&r[0]|134217728&r[2]&&(l.$$scope={dirty:r,ctx:t}),i.$set(l)},i(t){l||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),l=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),l=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t),t&&(0,r.ogt)(c),(0,r.vpE)(i,t),t&&(0,r.ogt)(a)}}}function Z$(t){let e,n;return e=new V.X2({props:{class:"cursor-pointer",$$slots:{default:[S$]},$$scope:{ctx:t}}}),e.$on("dblclick:preventDefault",(function(){return t[68](t[81])})),e.$on("contextmenu:preventDefault",(function(...e){return t[69](t[81],...e)})),e.$on("mousedown:preventDefault",Xs),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(n,r){t=n;const o={};24&r[0]|134217728&r[2]&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function O$(t){let e,n,o,$,s=!t[1]&&U$(),c=t[2],i=[];for(let e=0;e<c.length;e+=1)i[e]=k$(To(t,c,e));const a=t=>(0,r.etI)(i[t],1,1,(()=>{i[t]=null}));let l=t[3],f=[];for(let e=0;e<l.length;e+=1)f[e]=Z$(Io(t,l,e));const p=t=>(0,r.etI)(f[t],1,1,(()=>{f[t]=null}));return{c(){s&&s.c(),e=(0,r.DhX)();for(let t=0;t<i.length;t+=1)i[t].c();n=(0,r.DhX)();for(let t=0;t<f.length;t+=1)f[t].c();o=(0,r.cSb)()},m(t,c){s&&s.m(t,c),(0,r.$Tr)(t,e,c);for(let e=0;e<i.length;e+=1)i[e].m(t,c);(0,r.$Tr)(t,n,c);for(let e=0;e<f.length;e+=1)f[e].m(t,c);(0,r.$Tr)(t,o,c),$=!0},p(t,$){if(t[1]?s&&(s.d(1),s=null):s||(s=U$(),s.c(),s.m(e.parentNode,e)),20&$[0]|2&$[1]){let e;for(c=t[2],e=0;e<c.length;e+=1){const o=To(t,c,e);i[e]?(i[e].p(o,$),(0,r.Ui)(i[e],1)):(i[e]=k$(o),i[e].c(),(0,r.Ui)(i[e],1),i[e].m(n.parentNode,n))}for((0,r.dvw)(),e=c.length;e<i.length;e+=1)a(e);(0,r.gbL)()}if(637534232&$[0]){let e;for(l=t[3],e=0;e<l.length;e+=1){const n=Io(t,l,e);f[e]?(f[e].p(n,$),(0,r.Ui)(f[e],1)):(f[e]=Z$(n),f[e].c(),(0,r.Ui)(f[e],1),f[e].m(o.parentNode,o))}for((0,r.dvw)(),e=l.length;e<f.length;e+=1)p(e);(0,r.gbL)()}},i(t){if(!$){for(let t=0;t<c.length;t+=1)(0,r.Ui)(i[t]);for(let t=0;t<l.length;t+=1)(0,r.Ui)(f[t]);$=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)(0,r.etI)(i[t]);f=f.filter(Boolean);for(let t=0;t<f.length;t+=1)(0,r.etI)(f[t]);$=!1},d(t){s&&s.d(t),t&&(0,r.ogt)(e),(0,r.RMB)(i,t),t&&(0,r.ogt)(n),(0,r.RMB)(f,t),t&&(0,r.ogt)(o)}}}function M$(t){let e,n,o,$;return e=new V.Fb({props:{$$slots:{default:[T$]},$$scope:{ctx:t}}}),o=new V.uT({props:{$$slots:{default:[O$]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};30&n[0]|134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function G$(t){let e,n,o,$,s;return n=new Z.JO({props:{class:"material-icons-round",style:"font-size: 64px",$$slots:{default:[j$]},$$scope:{ctx:t}}}),{c(){e=(0,r.bGB)("div"),(0,r.YCL)(n.$$.fragment),o=(0,r.DhX)(),$=(0,r.bGB)("div"),$.textContent="You can drop a file here to upload",(0,r.Ljt)(e,"class","uploadarea svelte-1dyruly")},m(t,c){(0,r.$Tr)(t,e,c),(0,r.yef)(n,e,null),(0,r.R3I)(e,o),(0,r.R3I)(e,$),s=!0},i(t){s||((0,r.Ui)(n.$$.fragment,t),s=!0)},o(t){(0,r.etI)(n.$$.fragment,t),s=!1},d(t){t&&(0,r.ogt)(e),(0,r.vpE)(n)}}}function j$(t){let e;return{c(){e=(0,r.fLW)("drive_folder_upload")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function N$(t){let e;return{c(){e=(0,r.fLW)("Version history")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function F$(t){let e,n;return e=new Ae.VY({props:{$$slots:{default:[as]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};32&n[0]|134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function z$(t){let e;return{c(){e=(0,r.fLW)("Version")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function P$(t){let e;return{c(){e=(0,r.fLW)("Name")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function V$(t){let e;return{c(){e=(0,r.fLW)("File size")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function K$(t){let e;return{c(){e=(0,r.fLW)("Created at")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function A$(t){let e;return{c(){e=(0,r.fLW)("By")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function H$(t){let e,n,o,$,s,c,i,a,l,f,p,d;return e=new V.bL({props:{$$slots:{default:[z$]},$$scope:{ctx:t}}}),o=new V.bL({props:{$$slots:{default:[P$]},$$scope:{ctx:t}}}),s=new V.bL({props:{$$slots:{default:[V$]},$$scope:{ctx:t}}}),i=new V.bL({props:{$$slots:{default:[K$]},$$scope:{ctx:t}}}),l=new V.bL({props:{$$slots:{default:[A$]},$$scope:{ctx:t}}}),p=new V.bL({}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment),a=(0,r.DhX)(),(0,r.YCL)(l.$$.fragment),f=(0,r.DhX)(),(0,r.YCL)(p.$$.fragment)},m(t,u){(0,r.yef)(e,t,u),(0,r.$Tr)(t,n,u),(0,r.yef)(o,t,u),(0,r.$Tr)(t,$,u),(0,r.yef)(s,t,u),(0,r.$Tr)(t,c,u),(0,r.yef)(i,t,u),(0,r.$Tr)(t,a,u),(0,r.yef)(l,t,u),(0,r.$Tr)(t,f,u),(0,r.yef)(p,t,u),d=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($);const c={};134217728&n[2]&&(c.$$scope={dirty:n,ctx:t}),s.$set(c);const a={};134217728&n[2]&&(a.$$scope={dirty:n,ctx:t}),i.$set(a);const f={};134217728&n[2]&&(f.$$scope={dirty:n,ctx:t}),l.$set(f)},i(t){d||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),(0,r.Ui)(l.$$.fragment,t),(0,r.Ui)(p.$$.fragment,t),d=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),(0,r.etI)(l.$$.fragment,t),(0,r.etI)(p.$$.fragment,t),d=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t),t&&(0,r.ogt)(c),(0,r.vpE)(i,t),t&&(0,r.ogt)(a),(0,r.vpE)(l,t),t&&(0,r.ogt)(f),(0,r.vpE)(p,t)}}}function q$(t){let e,n;return e=new V.X2({props:{class:"header",$$slots:{default:[H$]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function J$(t){let e,n=t[81].version+"";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){32&o[0]&&n!==(n=t[81].version+"")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function Q$(t){let e,n=t[81].name+"";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){32&o[0]&&n!==(n=t[81].name+"")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function ts(t){let e,n;return e=new Xn({props:{entry:t[81]}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};32&n[0]&&(r.entry=t[81]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function es(t){let e,n;return e=new Tn({props:{entry:t[81],lastModified:!0}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};32&n[0]&&(r.entry=t[81]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function ns(t){let e,n;return e=new On({props:{entry:t[81]}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};32&n[0]&&(r.entry=t[81]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function rs(t){let e;return{c(){e=(0,r.fLW)("download")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function os(t){let e,n;return e=new Mn.Z({props:{class:"material-icons-round",variant:"unelevated",$$slots:{default:[rs]},$$scope:{ctx:t}}}),e.$on("click",(function(){return t[70](t[81])})),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(n,r){t=n;const o={};134217728&r[2]&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function $s(t){let e,n,o,$,s,c,i,a,l,f,p,d,u;return e=new V.bL({props:{title:t[81].id,$$slots:{default:[J$]},$$scope:{ctx:t}}}),o=new V.bL({props:{$$slots:{default:[Q$]},$$scope:{ctx:t}}}),s=new V.bL({props:{$$slots:{default:[ts]},$$scope:{ctx:t}}}),i=new V.bL({props:{$$slots:{default:[es]},$$scope:{ctx:t}}}),l=new V.bL({props:{$$slots:{default:[ns]},$$scope:{ctx:t}}}),p=new V.bL({props:{$$slots:{default:[os]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment),a=(0,r.DhX)(),(0,r.YCL)(l.$$.fragment),f=(0,r.DhX)(),(0,r.YCL)(p.$$.fragment),d=(0,r.DhX)()},m(t,g){(0,r.yef)(e,t,g),(0,r.$Tr)(t,n,g),(0,r.yef)(o,t,g),(0,r.$Tr)(t,$,g),(0,r.yef)(s,t,g),(0,r.$Tr)(t,c,g),(0,r.yef)(i,t,g),(0,r.$Tr)(t,a,g),(0,r.yef)(l,t,g),(0,r.$Tr)(t,f,g),(0,r.yef)(p,t,g),(0,r.$Tr)(t,d,g),u=!0},p(t,n){const r={};32&n[0]&&(r.title=t[81].id),32&n[0]|134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};32&n[0]|134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($);const c={};32&n[0]|134217728&n[2]&&(c.$$scope={dirty:n,ctx:t}),s.$set(c);const a={};32&n[0]|134217728&n[2]&&(a.$$scope={dirty:n,ctx:t}),i.$set(a);const f={};32&n[0]|134217728&n[2]&&(f.$$scope={dirty:n,ctx:t}),l.$set(f);const d={};32&n[0]|134217728&n[2]&&(d.$$scope={dirty:n,ctx:t}),p.$set(d)},i(t){u||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),(0,r.Ui)(l.$$.fragment,t),(0,r.Ui)(p.$$.fragment,t),u=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),(0,r.etI)(l.$$.fragment,t),(0,r.etI)(p.$$.fragment,t),u=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t),t&&(0,r.ogt)(c),(0,r.vpE)(i,t),t&&(0,r.ogt)(a),(0,r.vpE)(l,t),t&&(0,r.ogt)(f),(0,r.vpE)(p,t),t&&(0,r.ogt)(d)}}}function ss(t){let e,n;return e=new V.X2({props:{class:"cursor-pointer",$$slots:{default:[$s]},$$scope:{ctx:t}}}),e.$on("dblclick:preventDefault",(function(){return t[71](t[81])})),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(n,r){t=n;const o={};32&r[0]|134217728&r[2]&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function cs(t){let e,n,o=t[5],$=[];for(let e=0;e<o.length;e+=1)$[e]=ss(Lo(t,o,e));const s=t=>(0,r.etI)($[t],1,1,(()=>{$[t]=null}));return{c(){for(let t=0;t<$.length;t+=1)$[t].c();e=(0,r.cSb)()},m(t,o){for(let e=0;e<$.length;e+=1)$[e].m(t,o);(0,r.$Tr)(t,e,o),n=!0},p(t,n){if(67108896&n[0]){let c;for(o=t[5],c=0;c<o.length;c+=1){const s=Lo(t,o,c);$[c]?($[c].p(s,n),(0,r.Ui)($[c],1)):($[c]=ss(s),$[c].c(),(0,r.Ui)($[c],1),$[c].m(e.parentNode,e))}for((0,r.dvw)(),c=o.length;c<$.length;c+=1)s(c);(0,r.gbL)()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)(0,r.Ui)($[t]);n=!0}},o(t){$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)(0,r.etI)($[t]);n=!1},d(t){(0,r.RMB)($,t),t&&(0,r.ogt)(e)}}}function is(t){let e,n,o,$;return e=new V.Fb({props:{$$slots:{default:[q$]},$$scope:{ctx:t}}}),o=new V.uT({props:{$$slots:{default:[cs]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};32&n[0]|134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function as(t){let e,n;return e=new V.ZP({props:{style:"width: 100%; border: none;",$$slots:{default:[is]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};32&n[0]|134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function ls(t){let e;return{c(){e=(0,r.fLW)("Close")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function fs(t){let e,n;return e=new Z.__({props:{$$slots:{default:[ls]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function ps(t){let e,n;return e=new Z.ZP({props:{variant:"unelevated",$$slots:{default:[fs]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function ds(t){let e,n,o,$,s;e=new Ae.Dx({props:{style:"font-size: 24px; font-weight: 600;",$$slots:{default:[N$]},$$scope:{ctx:t}}});let c=t[5]&&F$(t);return $=new Ae.eX({props:{$$slots:{default:[ps]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),c&&c.c(),o=(0,r.DhX)(),(0,r.YCL)($.$$.fragment)},m(t,i){(0,r.yef)(e,t,i),(0,r.$Tr)(t,n,i),c&&c.m(t,i),(0,r.$Tr)(t,o,i),(0,r.yef)($,t,i),s=!0},p(t,n){const s={};134217728&n[2]&&(s.$$scope={dirty:n,ctx:t}),e.$set(s),t[5]?c?(c.p(t,n),32&n[0]&&(0,r.Ui)(c,1)):(c=F$(t),c.c(),(0,r.Ui)(c,1),c.m(o.parentNode,o)):c&&((0,r.dvw)(),(0,r.etI)(c,1,1,(()=>{c=null})),(0,r.gbL)());const i={};134217728&n[2]&&(i.$$scope={dirty:n,ctx:t}),$.$set(i)},i(t){s||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(c),(0,r.Ui)($.$$.fragment,t),s=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(c),(0,r.etI)($.$$.fragment,t),s=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),c&&c.d(t),t&&(0,r.ogt)(o),(0,r.vpE)($,t)}}}function us(t){let e;return{c(){e=(0,r.fLW)("View source")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function gs(t){let e,n;return e=new Ae.VY({props:{$$slots:{default:[Cs]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};49152&n[0]|134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function ms(t){let e;return{c(){e=(0,r.fLW)("Not found")},m(t,n){(0,r.$Tr)(t,e,n)},p:r.ZTd,i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function ys(t){let e,n;return e=new W.g({props:{class:"monospace",json:t[14].branch.indexEvent.event}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};16384&n[0]&&(r.json=t[14].branch.indexEvent.event),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function hs(t){let e,n,o,$;const s=[ys,ms],c=[];function i(t,e){return t[14].branch.indexEvent?0:1}return e=i(t),n=c[e]=s[e](t),{c(){n.c(),o=(0,r.cSb)()},m(t,n){c[e].m(t,n),(0,r.$Tr)(t,o,n),$=!0},p(t,$){let a=e;e=i(t),e===a?c[e].p(t,$):((0,r.dvw)(),(0,r.etI)(c[a],1,1,(()=>{c[a]=null})),(0,r.gbL)(),n=c[e],n?n.p(t,$):(n=c[e]=s[e](t),n.c()),(0,r.Ui)(n,1),n.m(o.parentNode,o))},i(t){$||((0,r.Ui)(n),$=!0)},o(t){(0,r.etI)(n),$=!1},d(t){c[e].d(t),t&&(0,r.ogt)(o)}}}function vs(t){let e;return{c(){e=(0,r.fLW)("Not found")},m(t,n){(0,r.$Tr)(t,e,n)},p:r.ZTd,i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function ws(t){let e,n;return e=new W.g({props:{class:"monospace",json:t[15].getClearContent()}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};32768&n[0]&&(r.json=t[15].getClearContent()),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function xs(t){let e,n,o,$;const s=[ws,vs],c=[];function i(t,e){return t[15]?0:1}return e=i(t),n=c[e]=s[e](t),{c(){n.c(),o=(0,r.cSb)()},m(t,n){c[e].m(t,n),(0,r.$Tr)(t,o,n),$=!0},p(t,$){let a=e;e=i(t),e===a?c[e].p(t,$):((0,r.dvw)(),(0,r.etI)(c[a],1,1,(()=>{c[a]=null})),(0,r.gbL)(),n=c[e],n?n.p(t,$):(n=c[e]=s[e](t),n.c()),(0,r.Ui)(n,1),n.m(o.parentNode,o))},i(t){$||((0,r.Ui)(n),$=!0)},o(t){(0,r.etI)(n),$=!1},d(t){c[e].d(t),t&&(0,r.ogt)(o)}}}function Ls(t){let e;return{c(){e=(0,r.fLW)("Not found")},m(t,n){(0,r.$Tr)(t,e,n)},p:r.ZTd,i:r.ZTd,o:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function Is(t){let e,n;return e=new W.g({props:{class:"monospace",json:t[15].event}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};32768&n[0]&&(r.json=t[15].event),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Ts(t){let e,n,o,$;const s=[Is,Ls],c=[];function i(t,e){return t[15]?0:1}return e=i(t),n=c[e]=s[e](t),{c(){n.c(),o=(0,r.cSb)()},m(t,n){c[e].m(t,n),(0,r.$Tr)(t,o,n),$=!0},p(t,$){let a=e;e=i(t),e===a?c[e].p(t,$):((0,r.dvw)(),(0,r.etI)(c[a],1,1,(()=>{c[a]=null})),(0,r.gbL)(),n=c[e],n?n.p(t,$):(n=c[e]=s[e](t),n.c()),(0,r.Ui)(n,1),n.m(o.parentNode,o))},i(t){$||((0,r.Ui)(n),$=!0)},o(t){(0,r.etI)(n),$=!1},d(t){c[e].d(t),t&&(0,r.ogt)(o)}}}function Us(t){let e,n,o,$,s,c;return e=new Gn.Z.Section({props:{title:"Index event source",$$slots:{default:[hs]},$$scope:{ctx:t}}}),o=new Gn.Z.Section({props:{title:"Decrypted file event source",$$slots:{default:[xs]},$$scope:{ctx:t}}}),s=new Gn.Z.Section({props:{title:"Original file event source",$$slots:{default:[Ts]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment)},m(t,i){(0,r.yef)(e,t,i),(0,r.$Tr)(t,n,i),(0,r.yef)(o,t,i),(0,r.$Tr)(t,$,i),(0,r.yef)(s,t,i),c=!0},p(t,n){const r={};16384&n[0]|134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};32768&n[0]|134217728&n[2]&&($.$$scope={dirty:n,ctx:t}),o.$set($);const c={};32768&n[0]|134217728&n[2]&&(c.$$scope={dirty:n,ctx:t}),s.$set(c)},i(t){c||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),c=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),c=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t)}}}function Cs(t){let e,n,o,$,s,c,i,a,l,f,p,d,u,g,m=t[14].parent.id+"",y=t[14].id+"",h=t[14].encryptionStatus+"";return u=new Gn.Z({props:{$$slots:{default:[Us]},$$scope:{ctx:t}}}),{c(){e=(0,r.bGB)("p"),n=(0,r.fLW)("Room ID: "),o=(0,r.fLW)(m),$=(0,r.bGB)("br"),s=(0,r.fLW)("\n                Event ID: "),c=(0,r.fLW)(y),i=(0,r.bGB)("br"),a=(0,r.fLW)("\n                Encryption status: "),l=(0,r.fLW)(h),f=(0,r.DhX)(),p=(0,r.bGB)("hr"),d=(0,r.DhX)(),(0,r.YCL)(u.$$.fragment)},m(t,m){(0,r.$Tr)(t,e,m),(0,r.R3I)(e,n),(0,r.R3I)(e,o),(0,r.R3I)(e,$),(0,r.R3I)(e,s),(0,r.R3I)(e,c),(0,r.R3I)(e,i),(0,r.R3I)(e,a),(0,r.R3I)(e,l),(0,r.$Tr)(t,f,m),(0,r.$Tr)(t,p,m),(0,r.$Tr)(t,d,m),(0,r.yef)(u,t,m),g=!0},p(t,e){(!g||16384&e[0])&&m!==(m=t[14].parent.id+"")&&(0,r.rTO)(o,m),(!g||16384&e[0])&&y!==(y=t[14].id+"")&&(0,r.rTO)(c,y),(!g||16384&e[0])&&h!==(h=t[14].encryptionStatus+"")&&(0,r.rTO)(l,h);const n={};49152&e[0]|134217728&e[2]&&(n.$$scope={dirty:e,ctx:t}),u.$set(n)},i(t){g||((0,r.Ui)(u.$$.fragment,t),g=!0)},o(t){(0,r.etI)(u.$$.fragment,t),g=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(f),t&&(0,r.ogt)(p),t&&(0,r.ogt)(d),(0,r.vpE)(u,t)}}}function bs(t){let e;return{c(){e=(0,r.fLW)("Close")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Ys(t){let e,n;return e=new Z.__({props:{$$slots:{default:[bs]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Es(t){let e,n;return e=new Z.ZP({props:{variant:"unelevated",$$slots:{default:[Ys]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};134217728&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Ds(t){let e,n,o,$,s;e=new Ae.Dx({props:{style:"font-size: 24px; font-weight: 600;",$$slots:{default:[us]},$$scope:{ctx:t}}});let c=t[14]&&gs(t);return $=new Ae.eX({props:{$$slots:{default:[Es]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),c&&c.c(),o=(0,r.DhX)(),(0,r.YCL)($.$$.fragment)},m(t,i){(0,r.yef)(e,t,i),(0,r.$Tr)(t,n,i),c&&c.m(t,i),(0,r.$Tr)(t,o,i),(0,r.yef)($,t,i),s=!0},p(t,n){const s={};134217728&n[2]&&(s.$$scope={dirty:n,ctx:t}),e.$set(s),t[14]?c?(c.p(t,n),16384&n[0]&&(0,r.Ui)(c,1)):(c=gs(t),c.c(),(0,r.Ui)(c,1),c.m(o.parentNode,o)):c&&((0,r.dvw)(),(0,r.etI)(c,1,1,(()=>{c=null})),(0,r.gbL)());const i={};134217728&n[2]&&(i.$$scope={dirty:n,ctx:t}),$.$set(i)},i(t){s||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(c),(0,r.Ui)($.$$.fragment,t),s=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(c),(0,r.etI)($.$$.fragment,t),s=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),c&&c.d(t),t&&(0,r.ogt)(o),(0,r.vpE)($,t)}}}function ks(t){let e,n,o,$,s,c,i,a,l,f,p,d,u,g,m,y,h,v,w,x,L,I,T,U=t[6]&&!t[7]&&Uo(t);n=new yr({props:{clientManager:t[0],open:t[18],closed:t[44]}});let C=!t[19]&&!t[21]&&Eo(t);s=new Rr({props:{clientManager:t[0],open:t[20],closed:t[47]}}),i=new vo({props:{}}),t[48](i),l=new pn({props:{}}),t[49](l);let b={anchor:!1,quickOpen:!0,$$slots:{default:[s$]},$$scope:{ctx:t}};p=new Ke.ZP({props:b}),t[58](p);let Y={anchor:!1,quickOpen:!0,$$slots:{default:[h$]},$$scope:{ctx:t}};u=new Ke.ZP({props:Y}),t[62](u),m=new V.ZP({props:{style:"width: 100%; border: none;",$$slots:{default:[M$]},$$scope:{ctx:t}}});let E=0===t[2].length&&0===t[3].length&&G$(t);function D(e){t[72](e)}let k={surface$style:"width: fit-content; max-width: calc(100vw - 32px);",$$slots:{default:[ds]},$$scope:{ctx:t}};function _(e){t[74](e)}void 0!==t[17]&&(k.open=t[17]),v=new Ae.ZP({props:k}),r.VnY.push((()=>(0,r.akz)(v,"open",D))),v.$on("MDCDialog:closed",t[73]);let X={surface$style:"width: fit-content; max-width: calc(100vw - 32px);",$$slots:{default:[Ds]},$$scope:{ctx:t}};return void 0!==t[16]&&(X.open=t[16]),L=new Ae.ZP({props:X}),r.VnY.push((()=>(0,r.akz)(L,"open",_))),L.$on("MDCDialog:closed",t[75]),{c(){U&&U.c(),e=(0,r.DhX)(),(0,r.YCL)(n.$$.fragment),o=(0,r.DhX)(),C&&C.c(),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment),a=(0,r.DhX)(),(0,r.YCL)(l.$$.fragment),f=(0,r.DhX)(),(0,r.YCL)(p.$$.fragment),d=(0,r.DhX)(),(0,r.YCL)(u.$$.fragment),g=(0,r.DhX)(),(0,r.YCL)(m.$$.fragment),y=(0,r.DhX)(),E&&E.c(),h=(0,r.DhX)(),(0,r.YCL)(v.$$.fragment),x=(0,r.DhX)(),(0,r.YCL)(L.$$.fragment)},m(t,w){U&&U.m(t,w),(0,r.$Tr)(t,e,w),(0,r.yef)(n,t,w),(0,r.$Tr)(t,o,w),C&&C.m(t,w),(0,r.$Tr)(t,$,w),(0,r.yef)(s,t,w),(0,r.$Tr)(t,c,w),(0,r.yef)(i,t,w),(0,r.$Tr)(t,a,w),(0,r.yef)(l,t,w),(0,r.$Tr)(t,f,w),(0,r.yef)(p,t,w),(0,r.$Tr)(t,d,w),(0,r.yef)(u,t,w),(0,r.$Tr)(t,g,w),(0,r.yef)(m,t,w),(0,r.$Tr)(t,y,w),E&&E.m(t,w),(0,r.$Tr)(t,h,w),(0,r.yef)(v,t,w),(0,r.$Tr)(t,x,w),(0,r.yef)(L,t,w),T=!0},p(t,o){t[6]&&!t[7]?U?(U.p(t,o),192&o[0]&&(0,r.Ui)(U,1)):(U=Uo(t),U.c(),(0,r.Ui)(U,1),U.m(e.parentNode,e)):U&&((0,r.dvw)(),(0,r.etI)(U,1,1,(()=>{U=null})),(0,r.gbL)());const c={};1&o[0]&&(c.clientManager=t[0]),262144&o[0]&&(c.open=t[18]),262144&o[0]&&(c.closed=t[44]),n.$set(c),t[19]||t[21]?C&&((0,r.dvw)(),(0,r.etI)(C,1,1,(()=>{C=null})),(0,r.gbL)()):C?(C.p(t,o),2621440&o[0]&&(0,r.Ui)(C,1)):(C=Eo(t),C.c(),(0,r.Ui)(C,1),C.m($.parentNode,$));const a={};1&o[0]&&(a.clientManager=t[0]),1048576&o[0]&&(a.open=t[20]),s.$set(a),i.$set({}),l.$set({});const f={};1024&o[0]|134217728&o[2]&&(f.$$scope={dirty:o,ctx:t}),p.$set(f);const d={};4096&o[0]|134217728&o[2]&&(d.$$scope={dirty:o,ctx:t}),u.$set(d);const g={};30&o[0]|134217728&o[2]&&(g.$$scope={dirty:o,ctx:t}),m.$set(g),0===t[2].length&&0===t[3].length?E?12&o[0]&&(0,r.Ui)(E,1):(E=G$(t),E.c(),(0,r.Ui)(E,1),E.m(h.parentNode,h)):E&&((0,r.dvw)(),(0,r.etI)(E,1,1,(()=>{E=null})),(0,r.gbL)());const y={};32&o[0]|134217728&o[2]&&(y.$$scope={dirty:o,ctx:t}),!w&&131072&o[0]&&(w=!0,y.open=t[17],(0,r.hjT)((()=>w=!1))),v.$set(y);const x={};49152&o[0]|134217728&o[2]&&(x.$$scope={dirty:o,ctx:t}),!I&&65536&o[0]&&(I=!0,x.open=t[16],(0,r.hjT)((()=>I=!1))),L.$set(x)},i(t){T||((0,r.Ui)(U),(0,r.Ui)(n.$$.fragment,t),(0,r.Ui)(C),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),(0,r.Ui)(l.$$.fragment,t),(0,r.Ui)(p.$$.fragment,t),(0,r.Ui)(u.$$.fragment,t),(0,r.Ui)(m.$$.fragment,t),(0,r.Ui)(E),(0,r.Ui)(v.$$.fragment,t),(0,r.Ui)(L.$$.fragment,t),T=!0)},o(t){(0,r.etI)(U),(0,r.etI)(n.$$.fragment,t),(0,r.etI)(C),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),(0,r.etI)(l.$$.fragment,t),(0,r.etI)(p.$$.fragment,t),(0,r.etI)(u.$$.fragment,t),(0,r.etI)(m.$$.fragment,t),(0,r.etI)(E),(0,r.etI)(v.$$.fragment,t),(0,r.etI)(L.$$.fragment,t),T=!1},d(w){U&&U.d(w),w&&(0,r.ogt)(e),(0,r.vpE)(n,w),w&&(0,r.ogt)(o),C&&C.d(w),w&&(0,r.ogt)($),(0,r.vpE)(s,w),w&&(0,r.ogt)(c),t[48](null),(0,r.vpE)(i,w),w&&(0,r.ogt)(a),t[49](null),(0,r.vpE)(l,w),w&&(0,r.ogt)(f),t[58](null),(0,r.vpE)(p,w),w&&(0,r.ogt)(d),t[62](null),(0,r.vpE)(u,w),w&&(0,r.ogt)(g),(0,r.vpE)(m,w),w&&(0,r.ogt)(y),E&&E.d(w),w&&(0,r.ogt)(h),(0,r.vpE)(v,w),w&&(0,r.ogt)(x),(0,r.vpE)(L,w)}}}const _s=()=>{},Xs=()=>{};function Ws(t,e,n){let{clientManager:o}=e,{directory:s}=e;const c=(0,d.getLogger)("Listing"),i=[];let a,l=null,f=[],p=[],u=[];function g(){c.info("onModified"),n(1,l=null)}c.info("loaded");let m=s;(0,R.H3)((()=>{Q(),m.on("modified",g),o.on("keyBackupStatus",Q)})),(0,R.ev)((()=>{i.forEach((t=>URL.revokeObjectURL(t))),m.off("modified",g),o.off("keyBackupStatus",Q)}));let y,h,v,w,x,L,T,U,C,b=!1,Y=!1;async function E(t){T.setOpen(!1),await q((async()=>{await t.delete()}),`Failed to delete folder ${t.name}`)}async function D(t){x.setOpen(!1),await q((async()=>{await t.delete()}),`Failed to delete file ${t.name}`)}async function k(t,e){1===(null==t?void 0:t.detail)?h=setTimeout((async()=>{x.setOpen(!1),await y.open(e)}),200):t||(x.setOpen(!1),await y.open(e))}async function _(t){h&&clearTimeout(h),x.setOpen(!1),await q((async()=>{let e;try{e=I.Vy.info(`Downloading ${t.name}...`);const n=await t.getBlob(),r=document.createElement("a");r.href=Mr(n),r.download=t.name,r.click(),e.remove(),I.Vy.success(`Downloaded ${t.name}`,{duration:4e3,showProgress:!0})}catch(t){throw e&&e.remove(),t}}),`Failed to download ${t.name}`)&&n(7,Y=!1)}async function X(t,e){x.setOpen(!1),await q((async()=>{await t.setLocked(e)}),`Failed to ${e?"":"un"}lock file ${t.name}`),n(3,u),n(41,m),n(37,s),n(1,l),n(2,p)}async function W(t){x.setOpen(!1),await q((async()=>{n(5,a=await t.getVersionHistory()),n(17,F=!0)}),`Failed to get version history for ${t.name}`)&&n(7,Y=!1)}function B(t,e){n(10,w=t),T.setOpen(!1),x.setOpen(!0),nt(e)}async function S(t){x.setOpen(!1);const e=await v.open("Rename file",t.name,"File name","Rename",J(t.name,p,u));e&&await q((async()=>{await t.rename(e)}),`Failed to rename file ${t.name}`)}async function Z(t){x.setOpen(!1);const e=await v.open("Copy file",`Copy of ${t.name}`,"File name","Copy",J(t.name,p,u));e&&await q((async()=>{await t.copyTo(t.parent,e)}),`Failed to copy file ${t.name}`)}function O(t,e){n(12,L=t),x.setOpen(!1),T.setOpen(!0),nt(e)}async function M(t){T.setOpen(!1);const e=await v.open("Rename folder",t.name,"Folder name","Rename",J(t.name,p,u));e&&await q((async()=>{await t.rename(e)}),`Failed to rename folder ${t.name}`)}async function G(t){T.setOpen(!1);const e=await v.open("Copy folder",`Copy of ${t.name}`,"Folder name","Copy",J(t.name,p,u));e&&await q((async()=>{await t.copyTo(t.parent,e)}),`Failed to copy folder ${t.name}`)}let j=!1;async function N(t){x.setOpen(!1),await q((async()=>{n(14,U=t),n(15,C=void 0);try{n(15,C=await U.branch.getFileEvent())}catch(t){}n(16,j=!0)}),`Failed to get version history for ${t.name}`)&&n(7,Y=!1)}let F=!1,z=!1,P=!1,V=!1,K=!1,A=1;async function H(){n(20,V=!1),await Q()}async function Q(){n(19,P=await o.crypto.isKeyBackupAvailable()),n(22,A=(await o.client.getDevices()).devices.length)}return t.$$set=t=>{"clientManager"in t&&n(0,o=t.clientManager),"directory"in t&&n(37,s=t.directory)},t.$$.update=()=>{14&t.$$.dirty[0]|1088&t.$$.dirty[1]&&(async()=>{if(m&&(null==m?void 0:m.id)===s.id||(m&&m.off("modified",g),n(41,m=s),m.on("modified",g)),l===s.id)return;n(1,l=null);const t=await s.getChildren(),e=p.map((t=>Object.assign({},t)))||[],r=u.map((t=>Object.assign({},t)))||[];n(2,p=t.filter((t=>t.isFolder)).map((t=>t)).map((t=>{let n=e.find((e=>e.id===t.id));return n&&(n=Object.assign({},n)),t})).sort(((t,e)=>t.name.localeCompare(e.name)))),n(3,u=t.filter((t=>!t.isFolder)).map((t=>t)).map((t=>{let e=r.find((e=>e.id===t.id));return e&&(e=Object.assign({},e)),t})).sort(((t,e)=>t.name.localeCompare(e.name)))),n(1,l=s.id),n(6,b=u.some((t=>["encrypted","decryptionFailed"].includes(t.encryptionStatus))))})()},[o,l,p,u,f,a,b,Y,y,v,w,x,L,T,U,C,j,F,z,P,V,K,A,E,D,k,_,X,W,B,S,Z,O,M,G,N,H,s,async function(){const t=await v.open("New folder","Untitled folder","Folder name","Create",J(void 0,p,u));t&&await q((async()=>{await s.addFolder(t)}),`Failed to create folder ${t}`)},async function(){const t=await v.open("New file","Untitled.md","File name","Create",J(void 0,p,u));t&&await q((async()=>{await s.addFile(t,{data:new ArrayBuffer(0),size:0,mimetype:"text/plain"})}),`Failed to create file ${t}`)},async function(t){for(const e of t)await q((async()=>{const t=I.Vy.info(`Uploading ${e.name}...`);await s.addFile(e.name,{data:await e.arrayBuffer(),mimetype:e.type||xo(e.name),size:e.size}),t.remove&&t.remove(),I.Vy.success(`Uploaded ${e.name}`,{duration:4e3,showProgress:!0})}),`Failed to upload ${e.name}`)},m,()=>n(18,z=!0),()=>n(7,Y=!0),()=>n(18,z=!1),()=>n(20,V=!0),()=>n(21,K=!0),()=>H(),function(t){r.VnY[t?"unshift":"push"]((()=>{y=t,n(8,y)}))},function(t){r.VnY[t?"unshift":"push"]((()=>{v=t,n(9,v)}))},t=>k(void 0,w),()=>_(w),()=>W(w),()=>S(w),()=>Z(w),()=>X(w,!w.locked),()=>D(w),()=>N(w),function(t){r.VnY[t?"unshift":"push"]((()=>{x=t,n(11,x)}))},()=>M(L),()=>G(L),()=>E(L),function(t){r.VnY[t?"unshift":"push"]((()=>{T=t,n(13,T)}))},function(t){f=t,n(4,f)},t=>$().show(`/directory/${t.id}`),(t,e)=>O(t,e),function(t){f=t,n(4,f)},(t,e)=>k(e,t),t=>_(t),(t,e)=>B(t,e),t=>_(t),t=>_(t),function(t){F=t,n(17,F)},()=>{n(17,F=!1)},function(t){j=t,n(16,j)},()=>{n(16,j=!1)}]}class Rs extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,Ws,ks,r.N8,{clientManager:0,directory:37,newFolder:38,newFile:39,uploadFiles:40},null,[-1,-1,-1])}get newFolder(){return this.$$.ctx[38]}get newFile(){return this.$$.ctx[39]}get uploadFiles(){return this.$$.ctx[40]}}const Bs=Rs;var Ss=n(26564);function Zs(t,e,n){const r=t.slice();return r[12]=e[n],r}function Os(t,e,n){const r=t.slice();return r[23]=e[n],r}function Ms(t){let e;return{c(){e=(0,r.fLW)("User")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Gs(t){let e;return{c(){e=(0,r.fLW)("Role")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function js(t){let e,n,o,$,s,c;return e=new V.bL({props:{$$slots:{default:[Ms]},$$scope:{ctx:t}}}),o=new V.bL({props:{$$slots:{default:[Gs]},$$scope:{ctx:t}}}),s=new V.bL({}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment)},m(t,i){(0,r.yef)(e,t,i),(0,r.$Tr)(t,n,i),(0,r.yef)(o,t,i),(0,r.$Tr)(t,$,i),(0,r.yef)(s,t,i),c=!0},p(t,n){const r={};67108864&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};67108864&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){c||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),c=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),c=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t)}}}function Ns(t){let e,n;return e=new V.X2({props:{class:"header",$$slots:{default:[js]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};67108864&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Fs(t){let e,n=t[12].userId+"";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){4&o&&n!==(n=t[12].userId+"")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function zs(t){let e,n,o,$,s=t[11](t[12].role)+"";return o=new Mn.Z({props:{class:"material-icons-round",disabled:!!t[3]||t[12].role===i.FolderRole.Owner||!t[12].canManageRoles,variant:"unelevated",$$slots:{default:[Vs]},$$scope:{ctx:t}}}),o.$on("click",(function(){return t[17](t[12])})),{c(){e=(0,r.fLW)(s),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.$Tr)(t,e,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(n,c){t=n,(!$||4&c)&&s!==(s=t[11](t[12].role)+"")&&(0,r.rTO)(e,s);const a={};12&c&&(a.disabled=!!t[3]||t[12].role===i.FolderRole.Owner||!t[12].canManageRoles),67108864&c&&(a.$$scope={dirty:c,ctx:t}),o.$set(a)},i(t){$||((0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(o.$$.fragment,t),$=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Ps(t){let e,n,o,$,s,c,i;function a(e){t[14](e)}let l={$$slots:{default:[Hs]},$$scope:{ctx:t}};return void 0!==t[4]&&(l.value=t[4]),e=new Ss.ZP({props:l}),r.VnY.push((()=>(0,r.akz)(e,"value",a))),$=new Mn.Z({props:{class:"material-icons-round",variant:"unelevated",$$slots:{default:[qs]},$$scope:{ctx:t}}}),$.$on("click",t[15]),c=new Mn.Z({props:{class:"material-icons-round",variant:"unelevated",$$slots:{default:[Js]},$$scope:{ctx:t}}}),c.$on("click",t[16]),{c(){(0,r.YCL)(e.$$.fragment),o=(0,r.DhX)(),(0,r.YCL)($.$$.fragment),s=(0,r.DhX)(),(0,r.YCL)(c.$$.fragment)},m(t,n){(0,r.yef)(e,t,n),(0,r.$Tr)(t,o,n),(0,r.yef)($,t,n),(0,r.$Tr)(t,s,n),(0,r.yef)(c,t,n),i=!0},p(t,o){const s={};67108864&o&&(s.$$scope={dirty:o,ctx:t}),!n&&16&o&&(n=!0,s.value=t[4],(0,r.hjT)((()=>n=!1))),e.$set(s);const i={};67108864&o&&(i.$$scope={dirty:o,ctx:t}),$.$set(i);const a={};67108864&o&&(a.$$scope={dirty:o,ctx:t}),c.$set(a)},i(t){i||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)($.$$.fragment,t),(0,r.Ui)(c.$$.fragment,t),i=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)($.$$.fragment,t),(0,r.etI)(c.$$.fragment,t),i=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(o),(0,r.vpE)($,t),t&&(0,r.ogt)(s),(0,r.vpE)(c,t)}}}function Vs(t){let e;return{c(){e=(0,r.fLW)("edit")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Ks(t){let e,n=t[11](t[23])+"";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function As(t){let e,n;return e=new Ss.Wx({props:{value:t[23],$$slots:{default:[Ks]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};67108864&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Hs(t){let e,n,o=t[10],$=[];for(let e=0;e<o.length;e+=1)$[e]=As(Os(t,o,e));const s=t=>(0,r.etI)($[t],1,1,(()=>{$[t]=null}));return{c(){for(let t=0;t<$.length;t+=1)$[t].c();e=(0,r.cSb)()},m(t,o){for(let e=0;e<$.length;e+=1)$[e].m(t,o);(0,r.$Tr)(t,e,o),n=!0},p(t,n){if(3072&n){let c;for(o=t[10],c=0;c<o.length;c+=1){const s=Os(t,o,c);$[c]?($[c].p(s,n),(0,r.Ui)($[c],1)):($[c]=As(s),$[c].c(),(0,r.Ui)($[c],1),$[c].m(e.parentNode,e))}for((0,r.dvw)(),c=o.length;c<$.length;c+=1)s(c);(0,r.gbL)()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)(0,r.Ui)($[t]);n=!0}},o(t){$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)(0,r.etI)($[t]);n=!1},d(t){(0,r.RMB)($,t),t&&(0,r.ogt)(e)}}}function qs(t){let e;return{c(){e=(0,r.fLW)("save")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Js(t){let e;return{c(){e=(0,r.fLW)("cancel")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Qs(t){let e,n,o,$;const s=[Ps,zs],c=[];function i(t,e){return t[3]?.userId===t[12].userId?0:1}return e=i(t),n=c[e]=s[e](t),{c(){n.c(),o=(0,r.cSb)()},m(t,n){c[e].m(t,n),(0,r.$Tr)(t,o,n),$=!0},p(t,$){let a=e;e=i(t),e===a?c[e].p(t,$):((0,r.dvw)(),(0,r.etI)(c[a],1,1,(()=>{c[a]=null})),(0,r.gbL)(),n=c[e],n?n.p(t,$):(n=c[e]=s[e](t),n.c()),(0,r.Ui)(n,1),n.m(o.parentNode,o))},i(t){$||((0,r.Ui)(n),$=!0)},o(t){(0,r.etI)(n),$=!1},d(t){c[e].d(t),t&&(0,r.ogt)(o)}}}function tc(t){let e;return{c(){e=(0,r.fLW)("delete")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function ec(t){let e,n;return e=new Mn.Z({props:{class:"material-icons-round",disabled:!!t[3]||t[12].role===i.FolderRole.Owner||!t[12].canRemove,variant:"unelevated",$$slots:{default:[tc]},$$scope:{ctx:t}}}),e.$on("click",(function(){return t[18](t[12])})),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(n,r){t=n;const o={};12&r&&(o.disabled=!!t[3]||t[12].role===i.FolderRole.Owner||!t[12].canRemove),67108864&r&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function nc(t){let e,n,o,$,s,c,i;return e=new V.bL({props:{$$slots:{default:[Fs]},$$scope:{ctx:t}}}),o=new V.bL({props:{$$slots:{default:[Qs]},$$scope:{ctx:t}}}),s=new V.bL({props:{$$slots:{default:[ec]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)()},m(t,a){(0,r.yef)(e,t,a),(0,r.$Tr)(t,n,a),(0,r.yef)(o,t,a),(0,r.$Tr)(t,$,a),(0,r.yef)(s,t,a),(0,r.$Tr)(t,c,a),i=!0},p(t,n){const r={};67108868&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};67108892&n&&($.$$scope={dirty:n,ctx:t}),o.$set($);const c={};67108876&n&&(c.$$scope={dirty:n,ctx:t}),s.$set(c)},i(t){i||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),i=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),i=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t),t&&(0,r.ogt)(c)}}}function rc(t){let e,n;return e=new V.X2({props:{$$slots:{default:[nc]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};67108892&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function oc(t){let e,n,o=t[2],$=[];for(let e=0;e<o.length;e+=1)$[e]=rc(Zs(t,o,e));const s=t=>(0,r.etI)($[t],1,1,(()=>{$[t]=null}));return{c(){for(let t=0;t<$.length;t+=1)$[t].c();e=(0,r.cSb)()},m(t,o){for(let e=0;e<$.length;e+=1)$[e].m(t,o);(0,r.$Tr)(t,e,o),n=!0},p(t,n){if(3580&n){let c;for(o=t[2],c=0;c<o.length;c+=1){const s=Zs(t,o,c);$[c]?($[c].p(s,n),(0,r.Ui)($[c],1)):($[c]=rc(s),$[c].c(),(0,r.Ui)($[c],1),$[c].m(e.parentNode,e))}for((0,r.dvw)(),c=o.length;c<$.length;c+=1)s(c);(0,r.gbL)()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)(0,r.Ui)($[t]);n=!0}},o(t){$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)(0,r.etI)($[t]);n=!1},d(t){(0,r.RMB)($,t),t&&(0,r.ogt)(e)}}}function $c(t){let e,n,o,$;return e=new V.Fb({props:{$$slots:{default:[Ns]},$$scope:{ctx:t}}}),o=new V.uT({props:{$$slots:{default:[oc]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};67108864&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};67108892&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function sc(t){let e;return{c(){e=(0,r.fLW)("Sent!")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function cc(t){let e,n,o,$,s,c,i,a,l,f,p,d,u,g;e=new V.ZP({props:{style:"width: 100%; border: none;",$$slots:{default:[$c]},$$scope:{ctx:t}}});let m=t[1]&&sc();return{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),o=(0,r.bGB)("tr"),$=(0,r.bGB)("td"),s=(0,r.bGB)("form"),c=(0,r.bGB)("input"),i=(0,r.DhX)(),a=(0,r.bGB)("button"),l=(0,r.fLW)("Invite as viewer"),p=(0,r.DhX)(),m&&m.c(),(0,r.Ljt)(c,"type","text"),(0,r.Ljt)(c,"placeholder","@user:example.org"),(0,r.Ljt)(a,"type","submit"),a.disabled=f=!t[12].canInvite,(0,r.Ljt)($,"colspan","3")},m(f,y){(0,r.yef)(e,f,y),(0,r.$Tr)(f,n,y),(0,r.$Tr)(f,o,y),(0,r.R3I)(o,$),(0,r.R3I)($,s),(0,r.R3I)(s,c),(0,r.BmG)(c,t[0]),(0,r.R3I)(s,i),(0,r.R3I)(s,a),(0,r.R3I)(a,l),(0,r.R3I)(s,p),m&&m.m(s,null),d=!0,u||(g=[(0,r.oLt)(c,"input",t[19]),(0,r.oLt)(s,"submit",(0,r.AT7)(t[9]))],u=!0)},p(t,[n]){const o={};67108892&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o),1&n&&c.value!==t[0]&&(0,r.BmG)(c,t[0]),t[1]?m||(m=sc(),m.c(),m.m(s,null)):m&&(m.d(1),m=null)},i(t){d||((0,r.Ui)(e.$$.fragment,t),d=!0)},o(t){(0,r.etI)(e.$$.fragment,t),d=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),t&&(0,r.ogt)(o),m&&m.d(),u=!1,(0,r.j7q)(g)}}}function ic(t,e,n){let r,{folder:o}=e,$=!1,s=o.members;const c=o.ownMembership;let a=null,l=null;function f(){n(2,s)}async function p(t){await q((async()=>{await o.removeMember(t.userId),n(2,s=o.members)}),`Failed to remove ${t.userId}`)}function d(t){n(3,a=t),n(4,l=t.role)}async function u(){if(!a)return;const t=a;await q((async()=>{await o.setMemberRole(t.userId,l),n(3,a=null),n(4,l=null),n(2,s=o.members)}),`Failed to set permissions for ${t.userId}`),n(2,s)}function g(){n(3,a=null),n(4,l=null)}o.on("modified",f),(0,R.ev)((()=>o.off("modified",f)));const m=[i.FolderRole.Owner,i.FolderRole.Editor,i.FolderRole.Viewer];return t.$$set=t=>{"folder"in t&&n(13,o=t.folder)},[r,$,s,a,l,p,d,u,g,async function(){n(1,$=!1),await q((async()=>{await o.inviteMember(r,i.FolderRole.Viewer),n(2,s=o.members),n(0,r=""),n(1,$=!0)}),`Failed to invite ${r}`)},m,function(t){switch(t){case i.FolderRole.Owner:return"Owner";case i.FolderRole.Editor:return"Editor";case i.FolderRole.Viewer:return"Viewer"}},c,o,function(t){l=t,n(4,l)},()=>u(),()=>g(),t=>d(t),t=>p(t),function(){r=this.value,n(0,r)}]}class ac extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,ic,cc,r.N8,{folder:13})}}const lc=ac;function fc(t,e,n){const r=t.slice();return r[19]=e[n],r}function pc(t){let e,n;return e=new Le.ZP({props:{dense:!0,$$slots:{default:[Lc]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4194308&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function dc(t){let e;return{c(){e=(0,r.fLW)("drive_file_rename_outline")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function uc(t){let e;return{c(){e=(0,r.fLW)("Rename")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function gc(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[dc]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[uc]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};4194304&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function mc(t){let e;return{c(){e=(0,r.fLW)("supervised_user_circle")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function yc(t){let e;return{c(){e=(0,r.fLW)("Permissions")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function hc(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[mc]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[yc]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};4194304&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function vc(t){let e;return{c(){e=(0,r.fLW)("delete")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function wc(t){let e;return{c(){e=(0,r.fLW)("Delete")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function xc(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[vc]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[wc]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};4194304&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Lc(t){let e,n,o,$,s,c,i,a,l,f;return e=new Le.ck({props:{$$slots:{default:[gc]},$$scope:{ctx:t}}}),e.$on("SMUI:action",t[11]),o=new Le.Z0({}),s=new Le.ck({props:{$$slots:{default:[hc]},$$scope:{ctx:t}}}),s.$on("SMUI:action",t[12]),i=new Le.Z0({}),l=new Le.ck({props:{$$slots:{default:[xc]},$$scope:{ctx:t}}}),l.$on("SMUI:action",t[13]),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment),a=(0,r.DhX)(),(0,r.YCL)(l.$$.fragment)},m(t,p){(0,r.yef)(e,t,p),(0,r.$Tr)(t,n,p),(0,r.yef)(o,t,p),(0,r.$Tr)(t,$,p),(0,r.yef)(s,t,p),(0,r.$Tr)(t,c,p),(0,r.yef)(i,t,p),(0,r.$Tr)(t,a,p),(0,r.yef)(l,t,p),f=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const o={};4194304&n&&(o.$$scope={dirty:n,ctx:t}),s.$set(o);const $={};4194304&n&&($.$$scope={dirty:n,ctx:t}),l.$set($)},i(t){f||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),(0,r.Ui)(l.$$.fragment,t),f=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),(0,r.etI)(l.$$.fragment,t),f=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t),t&&(0,r.ogt)(c),(0,r.vpE)(i,t),t&&(0,r.ogt)(a),(0,r.vpE)(l,t)}}}function Ic(t){let e,n,o=t[2]&&pc(t);return{c(){o&&o.c(),e=(0,r.cSb)()},m(t,$){o&&o.m(t,$),(0,r.$Tr)(t,e,$),n=!0},p(t,n){t[2]?o?(o.p(t,n),4&n&&(0,r.Ui)(o,1)):(o=pc(t),o.c(),(0,r.Ui)(o,1),o.m(e.parentNode,e)):o&&((0,r.dvw)(),(0,r.etI)(o,1,1,(()=>{o=null})),(0,r.gbL)())},i(t){n||((0,r.Ui)(o),n=!0)},o(t){(0,r.etI)(o),n=!1},d(t){o&&o.d(t),t&&(0,r.ogt)(e)}}}function Tc(t){let e;return{c(){e=(0,r.fLW)("Name")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Uc(t){let e;return{c(){e=(0,r.fLW)("Created")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Cc(t){let e,n,o,$,s,c;return e=new V.bL({}),o=new V.bL({props:{$$slots:{default:[Tc]},$$scope:{ctx:t}}}),s=new V.bL({props:{$$slots:{default:[Uc]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment)},m(t,i){(0,r.yef)(e,t,i),(0,r.$Tr)(t,n,i),(0,r.yef)(o,t,i),(0,r.$Tr)(t,$,i),(0,r.yef)(s,t,i),c=!0},p(t,e){const n={};4194304&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const r={};4194304&e&&(r.$$scope={dirty:e,ctx:t}),s.$set(r)},i(t){c||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),c=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),c=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t)}}}function bc(t){let e,n;return e=new V.X2({props:{$$slots:{default:[Cc]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Yc(t){let e;return{c(){e=(0,r.bGB)("span"),e.textContent="work",(0,r.Ljt)(e,"class","material-icons-round solo-icon svelte-kwso1l")},m(t,n){(0,r.$Tr)(t,e,n)},p:r.ZTd,d(t){t&&(0,r.ogt)(e)}}}function Ec(t){let e,n=t[19].name+"";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){1&o&&n!==(n=t[19].name+"")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function Dc(t){let e,n;return e=new Tn({props:{entry:t[19]}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};1&n&&(r.entry=t[19]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function kc(t){let e,n,o,$,s,c,i;return e=new V.bL({props:{$$slots:{default:[Yc]},$$scope:{ctx:t}}}),o=new V.bL({props:{$$slots:{default:[Ec]},$$scope:{ctx:t}}}),s=new V.bL({props:{$$slots:{default:[Dc]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)()},m(t,a){(0,r.yef)(e,t,a),(0,r.$Tr)(t,n,a),(0,r.yef)(o,t,a),(0,r.$Tr)(t,$,a),(0,r.yef)(s,t,a),(0,r.$Tr)(t,c,a),i=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};4194305&n&&($.$$scope={dirty:n,ctx:t}),o.$set($);const c={};4194305&n&&(c.$$scope={dirty:n,ctx:t}),s.$set(c)},i(t){i||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),i=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),i=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t),t&&(0,r.ogt)(c)}}}function _c(t){let e,n;return e=new V.X2({props:{class:"cursor-pointer",$$slots:{default:[kc]},$$scope:{ctx:t}}}),e.$on("dblclick:preventDefault",(function(){return t[15](t[19])})),e.$on("contextmenu:preventDefault",(function(...e){return t[16](t[19],...e)})),e.$on("mousedown:preventDefault",jc),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(n,r){t=n;const o={};4194305&r&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Xc(t){let e,n,o=t[0],$=[];for(let e=0;e<o.length;e+=1)$[e]=_c(fc(t,o,e));const s=t=>(0,r.etI)($[t],1,1,(()=>{$[t]=null}));return{c(){for(let t=0;t<$.length;t+=1)$[t].c();e=(0,r.cSb)()},m(t,o){for(let e=0;e<$.length;e+=1)$[e].m(t,o);(0,r.$Tr)(t,e,o),n=!0},p(t,n){if(257&n){let c;for(o=t[0],c=0;c<o.length;c+=1){const s=fc(t,o,c);$[c]?($[c].p(s,n),(0,r.Ui)($[c],1)):($[c]=_c(s),$[c].c(),(0,r.Ui)($[c],1),$[c].m(e.parentNode,e))}for((0,r.dvw)(),c=o.length;c<$.length;c+=1)s(c);(0,r.gbL)()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)(0,r.Ui)($[t]);n=!0}},o(t){$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)(0,r.etI)($[t]);n=!1},d(t){(0,r.RMB)($,t),t&&(0,r.ogt)(e)}}}function Wc(t){let e,n,o,$;return e=new V.Fb({props:{$$slots:{default:[bc]},$$scope:{ctx:t}}}),o=new V.uT({props:{$$slots:{default:[Xc]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};4194305&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Rc(t){let e,n,o,$;return e=new Ae.Dx({props:{style:"font-size: 24px; font-weight: 600;",$$slots:{default:[Bc]},$$scope:{ctx:t}}}),o=new Ae.VY({props:{$$slots:{default:[Sc]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};4194306&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};4194306&n&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Bc(t){let e,n,o=t[1].name+"";return{c(){e=(0,r.fLW)("Permissions for "),n=(0,r.fLW)(o)},m(t,o){(0,r.$Tr)(t,e,o),(0,r.$Tr)(t,n,o)},p(t,e){2&e&&o!==(o=t[1].name+"")&&(0,r.rTO)(n,o)},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n)}}}function Sc(t){let e,n;return e=new lc({props:{folder:t[1]}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};2&n&&(r.folder=t[1]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Zc(t){let e;return{c(){e=(0,r.fLW)("Close")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Oc(t){let e,n;return e=new Z.ZP({props:{variant:"unelevated",$$slots:{default:[Zc]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4194304&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Mc(t){let e,n,o,$=t[1]&&Rc(t);return n=new Ae.eX({props:{$$slots:{default:[Oc]},$$scope:{ctx:t}}}),{c(){$&&$.c(),e=(0,r.DhX)(),(0,r.YCL)(n.$$.fragment)},m(t,s){$&&$.m(t,s),(0,r.$Tr)(t,e,s),(0,r.yef)(n,t,s),o=!0},p(t,o){t[1]?$?($.p(t,o),2&o&&(0,r.Ui)($,1)):($=Rc(t),$.c(),(0,r.Ui)($,1),$.m(e.parentNode,e)):$&&((0,r.dvw)(),(0,r.etI)($,1,1,(()=>{$=null})),(0,r.gbL)());const s={};4194304&o&&(s.$$scope={dirty:o,ctx:t}),n.$set(s)},i(t){o||((0,r.Ui)($),(0,r.Ui)(n.$$.fragment,t),o=!0)},o(t){(0,r.etI)($),(0,r.etI)(n.$$.fragment,t),o=!1},d(t){$&&$.d(t),t&&(0,r.ogt)(e),(0,r.vpE)(n,t)}}}function Gc(t){let e,n,o,$,s,c,i,a,l;e=new pn({props:{}}),t[10](e);let f={anchor:!1,quickOpen:!0,$$slots:{default:[Ic]},$$scope:{ctx:t}};function p(e){t[17](e)}o=new Ke.ZP({props:f}),t[14](o),s=new V.ZP({props:{style:"width: 100%; border: none;",$$slots:{default:[Wc]},$$scope:{ctx:t}}});let d={surface$style:"width: fit-content; max-width: calc(100vw - 32px);",$$slots:{default:[Mc]},$$scope:{ctx:t}};return void 0!==t[5]&&(d.open=t[5]),i=new Ae.ZP({props:d}),r.VnY.push((()=>(0,r.akz)(i,"open",p))),i.$on("MDCDialog:closed",t[18]),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment)},m(t,a){(0,r.yef)(e,t,a),(0,r.$Tr)(t,n,a),(0,r.yef)(o,t,a),(0,r.$Tr)(t,$,a),(0,r.yef)(s,t,a),(0,r.$Tr)(t,c,a),(0,r.yef)(i,t,a),l=!0},p(t,[n]){e.$set({});const $={};4194308&n&&($.$$scope={dirty:n,ctx:t}),o.$set($);const c={};4194305&n&&(c.$$scope={dirty:n,ctx:t}),s.$set(c);const l={};4194306&n&&(l.$$scope={dirty:n,ctx:t}),!a&&32&n&&(a=!0,l.open=t[5],(0,r.hjT)((()=>a=!1))),i.$set(l)},i(t){l||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),l=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),l=!1},d(a){t[10](null),(0,r.vpE)(e,a),a&&(0,r.ogt)(n),t[14](null),(0,r.vpE)(o,a),a&&(0,r.ogt)($),(0,r.vpE)(s,a),a&&(0,r.ogt)(c),(0,r.vpE)(i,a)}}}const jc=()=>{};function Nc(t,e,n){let o,s,c,i,{workspaces:a}=e;async function l(t){c.setOpen(!1),await q((async()=>{await t.delete(),I.Vy.success(`Deleted ${t.name}`,{duration:4e3,showProgress:!0})}),`Failed to delete workspace ${t.name}`),n(0,a)}function f(t){n(5,u=!0),c.setOpen(!1),n(1,o=t)}function p(t,e){n(2,s=t),c.setOpen(!0),nt(e)}async function d(t){c.setOpen(!1);const e=await i.open("Rename workspace",t.name,"Workspace name","Rename",Q(t.name,a));e&&(await q((async()=>{await t.rename(e)}),`Failed to rename ${t.name}`),n(0,a))}let u=!1;return t.$$set=t=>{"workspaces"in t&&n(0,a=t.workspaces)},[a,o,s,c,i,u,l,f,p,d,function(t){r.VnY[t?"unshift":"push"]((()=>{i=t,n(4,i)}))},()=>d(s),()=>f(s),()=>l(s),function(t){r.VnY[t?"unshift":"push"]((()=>{c=t,n(3,c)}))},t=>$().show(`/directory/${t.id}`),(t,e)=>p(t,e),function(t){u=t,n(5,u)},()=>{n(5,u=!1)}]}class Fc extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,Nc,Gc,r.N8,{workspaces:0})}}const zc=Fc;function Pc(t,e,n){const r=t.slice();return r[4]=e[n],r}function Vc(t){let e;return{c(){e=(0,r.fLW)("Home")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Kc(t){let e,n=t[4].name+"";return{c(){e=(0,r.fLW)(n)},m(t,n){(0,r.$Tr)(t,e,n)},p(t,o){1&o&&n!==(n=t[4].name+"")&&(0,r.rTO)(e,n)},d(t){t&&(0,r.ogt)(e)}}}function Ac(t){let e,n,o,$;return o=new Z.ZP({props:{href:"#",variant:"text",$$slots:{default:[Kc]},$$scope:{ctx:t}}}),o.$on("click:preventDefault",(function(){return t[3](t[4])})),{c(){e=(0,r.bGB)("span"),e.textContent="chevron_right",n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),(0,r.Ljt)(e,"class","material-icons-round svelte-1mth730")},m(t,s){(0,r.$Tr)(t,e,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(e,n){t=e;const r={};129&n&&(r.$$scope={dirty:n,ctx:t}),o.$set(r)},i(t){$||((0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(o.$$.fragment,t),$=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Hc(t){let e,n,o,$;n=new Z.ZP({props:{href:"#",variant:"text",$$slots:{default:[Vc]},$$scope:{ctx:t}}}),n.$on("click:preventDefault",t[2]);let s=t[0],c=[];for(let e=0;e<s.length;e+=1)c[e]=Ac(Pc(t,s,e));const i=t=>(0,r.etI)(c[t],1,1,(()=>{c[t]=null}));return{c(){e=(0,r.bGB)("div"),(0,r.YCL)(n.$$.fragment),o=(0,r.DhX)();for(let t=0;t<c.length;t+=1)c[t].c();(0,r.Ljt)(e,"class","svelte-1mth730")},m(t,s){(0,r.$Tr)(t,e,s),(0,r.yef)(n,e,null),(0,r.R3I)(e,o);for(let t=0;t<c.length;t+=1)c[t].m(e,null);$=!0},p(t,[o]){const $={};if(128&o&&($.$$scope={dirty:o,ctx:t}),n.$set($),1&o){let n;for(s=t[0],n=0;n<s.length;n+=1){const $=Pc(t,s,n);c[n]?(c[n].p($,o),(0,r.Ui)(c[n],1)):(c[n]=Ac($),c[n].c(),(0,r.Ui)(c[n],1),c[n].m(e,null))}for((0,r.dvw)(),n=s.length;n<c.length;n+=1)i(n);(0,r.gbL)()}},i(t){if(!$){(0,r.Ui)(n.$$.fragment,t);for(let t=0;t<s.length;t+=1)(0,r.Ui)(c[t]);$=!0}},o(t){(0,r.etI)(n.$$.fragment,t),c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)(0,r.etI)(c[t]);$=!1},d(t){t&&(0,r.ogt)(e),(0,r.vpE)(n),(0,r.RMB)(c,t)}}}function qc(t,e,n){let{directory:r}=e,o=[];return t.$$set=t=>{"directory"in t&&n(1,r=t.directory)},t.$$.update=()=>{if(3&t.$$.dirty){n(0,o=[]);let t=r;for(;t;)o.push(t),t=t.parent;o.pop(),o.reverse(),n(0,o),n(1,r)}},[o,r,()=>$().show("/home"),t=>$().show(`/directory/${t.id}`)]}class Jc extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,qc,Hc,r.N8,{directory:1})}}const Qc=Jc;var ti=n(93886);function ei(t){let e,n,o,$,s,c=(t[3]||!t[1])&&ri(t);const i=[$i,oi],a=[];function l(t,e){return t[3]?0:t[1]?-1:1}return~(n=l(t))&&(o=a[n]=i[n](t)),{c(){c&&c.c(),e=(0,r.DhX)(),o&&o.c(),$=(0,r.cSb)()},m(t,o){c&&c.m(t,o),(0,r.$Tr)(t,e,o),~n&&a[n].m(t,o),(0,r.$Tr)(t,$,o),s=!0},p(t,s){t[3]||!t[1]?c?(c.p(t,s),10&s&&(0,r.Ui)(c,1)):(c=ri(t),c.c(),(0,r.Ui)(c,1),c.m(e.parentNode,e)):c&&((0,r.dvw)(),(0,r.etI)(c,1,1,(()=>{c=null})),(0,r.gbL)());let f=n;n=l(t),n===f?~n&&a[n].p(t,s):(o&&((0,r.dvw)(),(0,r.etI)(a[f],1,1,(()=>{a[f]=null})),(0,r.gbL)()),~n?(o=a[n],o?o.p(t,s):(o=a[n]=i[n](t),o.c()),(0,r.Ui)(o,1),o.m($.parentNode,$)):o=null)},i(t){s||((0,r.Ui)(c),(0,r.Ui)(o),s=!0)},o(t){(0,r.etI)(c),(0,r.etI)(o),s=!1},d(t){c&&c.d(t),t&&(0,r.ogt)(e),~n&&a[n].d(t),t&&(0,r.ogt)($)}}}function ni(t){let e,n;return e=new Un.O({}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p:r.ZTd,i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function ri(t){let e,n;return e=new Qc({props:{directory:t[3]}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};8&n&&(r.directory=t[3]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function oi(t){let e,n;return e=new zc({props:{workspaces:t[2]}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};4&n&&(r.workspaces=t[2]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function $i(t){let e,n,o,$,s,c,i;return n=new ti.Z({props:{noClick:!0,accept:void 0,$$slots:{default:[si]},$$scope:{ctx:t}}}),n.$on("drop",t[9]),n.$on("dragenter",t[11]),n.$on("dragleave",t[12]),{c(){e=(0,r.bGB)("div"),(0,r.YCL)(n.$$.fragment),o=(0,r.DhX)(),$=(0,r.bGB)("input"),(0,r.Ljt)(e,"class","dropzone-container svelte-o8hq7c"),(0,r.Ljt)($,"type","file"),(0,r.Ljt)($,"autocomplete","off"),(0,r.Ljt)($,"tabindex","-1"),(0,r.czc)($,"display","none"),$.multiple=!0},m(a,l){(0,r.$Tr)(a,e,l),(0,r.yef)(n,e,null),t[20](e),(0,r.$Tr)(a,o,l),(0,r.$Tr)(a,$,l),t[21]($),s=!0,c||(i=(0,r.oLt)($,"change",t[10]),c=!0)},p(t,e){const r={};8388745&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){s||((0,r.Ui)(n.$$.fragment,t),s=!0)},o(t){(0,r.etI)(n.$$.fragment,t),s=!1},d(s){s&&(0,r.ogt)(e),(0,r.vpE)(n),t[20](null),s&&(0,r.ogt)(o),s&&(0,r.ogt)($),t[21](null),c=!1,i()}}}function si(t){let e,n,o={clientManager:t[0],directory:t[3]};return e=new Bs({props:o}),t[19](e),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};1&n&&(r.clientManager=t[0]),8&n&&(r.directory=t[3]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(n){t[19](null),(0,r.vpE)(e,n)}}}function ci(t){let e,n,o,$,s,c;document.title=e=t[4];const i=[ni,ei],a=[];function l(t,e){return t[5]?0:1}return $=l(t),s=a[$]=i[$](t),{c(){n=(0,r.DhX)(),o=(0,r.bGB)("div"),s.c(),(0,r.Ljt)(o,"class","browser svelte-o8hq7c")},m(t,e){(0,r.$Tr)(t,n,e),(0,r.$Tr)(t,o,e),a[$].m(o,null),c=!0},p(t,[n]){(!c||16&n)&&e!==(e=t[4])&&(document.title=e);let f=$;$=l(t),$===f?a[$].p(t,n):((0,r.dvw)(),(0,r.etI)(a[f],1,1,(()=>{a[f]=null})),(0,r.gbL)(),s=a[$],s?s.p(t,n):(s=a[$]=i[$](t),s.c()),(0,r.Ui)(s,1),s.m(o,null))},i(t){c||((0,r.Ui)(s),c=!0)},o(t){(0,r.etI)(s),c=!1},d(t){t&&(0,r.ogt)(n),t&&(0,r.ogt)(o),a[$].d()}}}function ii(t,e,n){var o,$,s;let c,{clientManager:i}=e,{directoryId:a}=e,{workspaces:l}=e,f="";function p(){n(3,c),n(1,a),n(0,i)}let d,u,g,m=!0;function y(){g&&g.classList.remove("drag-over")}return t.$$set=t=>{"clientManager"in t&&n(0,i=t.clientManager),"directoryId"in t&&n(1,a=t.directoryId),"workspaces"in t&&n(2,l=t.workspaces)},t.$$.update=()=>{11&t.$$.dirty&&(async()=>{if(a&&(null==c?void 0:c.id)!==a){const t=await i.files.getDescendentById(a);(null==t?void 0:t.isFolder)?(n(3,c=t),c.on("modified",p),n(5,m=!1)):(c&&c.off("modified",p),n(3,c=void 0),I.Vy.error(`Unable to find folder: ${a}`))}else a||(c&&c.off("modified",p),n(5,m=!1),n(3,c=void 0))})(),458762&t.$$.dirty&&n(4,f=a?`${(null===n(16,o=null==c?void 0:c.parent)||void 0===o?void 0:o.parent)?`... > ${null===n(17,$=null==c?void 0:c.parent)||void 0===$?void 0:$.name}`:"Home"} > ${null!==n(18,s=null==c?void 0:c.name)&&void 0!==s?s:""}`:"Home")},[i,a,l,c,f,m,d,u,g,async function(t){if(y(),!u)return;const{acceptedFiles:e}=t.detail;await u.uploadFiles(e)},async function(t){u&&await u.uploadFiles(t.target.files)},function(){g&&g.classList.add("drag-over")},y,async function(){u&&await u.newFolder()},async function(){u&&await u.newFile()},function(){d&&d.click()},o,$,s,function(t){r.VnY[t?"unshift":"push"]((()=>{u=t,n(7,u)}))},function(t){r.VnY[t?"unshift":"push"]((()=>{g=t,n(8,g)}))},function(t){r.VnY[t?"unshift":"push"]((()=>{d=t,n(6,d)}))}]}class ai extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,ii,ci,r.N8,{clientManager:0,directoryId:1,workspaces:2,newFolder:13,newFile:14,fileUpload:15})}get newFolder(){return this.$$.ctx[13]}get newFile(){return this.$$.ctx[14]}get fileUpload(){return this.$$.ctx[15]}}const li=ai;var fi=n(25108);const{document:pi}=r.lig;function di(t){let e;return{c(){e=(0,r.fLW)("Create account")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function ui(t){let e;return{c(){e=(0,r.fLW)("e.g. https://matrix.org")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function gi(t){let e,n;return e=new Yt.Z({props:{slot:"helper",$$slots:{default:[ui]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};262144&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function mi(t){let e,n;return{c(){e=(0,r.bGB)("p"),n=(0,r.fLW)(t[1]),(0,r.czc)(e,"color","red"),(0,r.czc)(e,"text-align","center"),(0,r.czc)(e,"font-weight","bold")},m(t,o){(0,r.$Tr)(t,e,o),(0,r.R3I)(e,n)},p(t,e){2&e&&(0,r.rTO)(n,t[1])},d(t){t&&(0,r.ogt)(e)}}}function yi(t){let e,n,o,$,s,c,i,a,l,f,p,d,u,g=t[0].homeserverUrl+"";function m(e){t[13](e)}let y={variant:"outlined",label:"Username",type:"text",required:!0,style:"margin-top: 16px;",$$slots:{helper:[vi]},$$scope:{ctx:t}};function h(e){t[14](e)}void 0!==t[0].userId&&(y.value=t[0].userId),c=new bt.ZP({props:y}),r.VnY.push((()=>(0,r.akz)(c,"value",m)));let v={variant:"outlined",label:"Password",type:"password",required:!0,style:"margin-top: 16px;",$$slots:{helper:[wi]},$$scope:{ctx:t}};return void 0!==t[0].password&&(v.value=t[0].password),l=new bt.ZP({props:v}),r.VnY.push((()=>(0,r.akz)(l,"value",h))),d=new Z.ZP({props:{type:"submit",variant:"unelevated",disabled:t[2],$$slots:{default:[Li]},$$scope:{ctx:t}}}),d.$on("click",t[15]),{c(){e=(0,r.bGB)("p"),n=(0,r.fLW)("Homeserver "),o=(0,r.fLW)(g),$=(0,r.fLW)(" supports auth via Matrix password:"),s=(0,r.DhX)(),(0,r.YCL)(c.$$.fragment),a=(0,r.DhX)(),(0,r.YCL)(l.$$.fragment),p=(0,r.DhX)(),(0,r.YCL)(d.$$.fragment)},m(t,i){(0,r.$Tr)(t,e,i),(0,r.R3I)(e,n),(0,r.R3I)(e,o),(0,r.R3I)(e,$),(0,r.$Tr)(t,s,i),(0,r.yef)(c,t,i),(0,r.$Tr)(t,a,i),(0,r.yef)(l,t,i),(0,r.$Tr)(t,p,i),(0,r.yef)(d,t,i),u=!0},p(t,e){(!u||1&e)&&g!==(g=t[0].homeserverUrl+"")&&(0,r.rTO)(o,g);const n={};262144&e&&(n.$$scope={dirty:e,ctx:t}),!i&&1&e&&(i=!0,n.value=t[0].userId,(0,r.hjT)((()=>i=!1))),c.$set(n);const $={};262144&e&&($.$$scope={dirty:e,ctx:t}),!f&&1&e&&(f=!0,$.value=t[0].password,(0,r.hjT)((()=>f=!1))),l.$set($);const s={};4&e&&(s.disabled=t[2]),262148&e&&(s.$$scope={dirty:e,ctx:t}),d.$set(s)},i(t){u||((0,r.Ui)(c.$$.fragment,t),(0,r.Ui)(l.$$.fragment,t),(0,r.Ui)(d.$$.fragment,t),u=!0)},o(t){(0,r.etI)(c.$$.fragment,t),(0,r.etI)(l.$$.fragment,t),(0,r.etI)(d.$$.fragment,t),u=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(s),(0,r.vpE)(c,t),t&&(0,r.ogt)(a),(0,r.vpE)(l,t),t&&(0,r.ogt)(p),(0,r.vpE)(d,t)}}}function hi(t){let e,n,o,$,s,c,i,a=t[0].homeserverUrl+"";return c=new Z.ZP({props:{variant:"unelevated",disabled:t[2],$$slots:{default:[Ti]},$$scope:{ctx:t}}}),c.$on("click",t[12]),{c(){e=(0,r.bGB)("p"),n=(0,r.fLW)("Homeserver "),o=(0,r.fLW)(a),$=(0,r.fLW)(" supports auth via OIDC:"),s=(0,r.DhX)(),(0,r.YCL)(c.$$.fragment)},m(t,a){(0,r.$Tr)(t,e,a),(0,r.R3I)(e,n),(0,r.R3I)(e,o),(0,r.R3I)(e,$),(0,r.$Tr)(t,s,a),(0,r.yef)(c,t,a),i=!0},p(t,e){(!i||1&e)&&a!==(a=t[0].homeserverUrl+"")&&(0,r.rTO)(o,a);const n={};4&e&&(n.disabled=t[2]),262148&e&&(n.$$scope={dirty:e,ctx:t}),c.$set(n)},i(t){i||((0,r.Ui)(c.$$.fragment,t),i=!0)},o(t){(0,r.etI)(c.$$.fragment,t),i=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(s),(0,r.vpE)(c,t)}}}function vi(t){let e,n;return e=new Yt.Z({props:{slot:"helper"}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p:r.ZTd,i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function wi(t){let e,n;return e=new Yt.Z({props:{slot:"helper"}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p:r.ZTd,i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function xi(t){let e,n;return e=new Dt.Z({props:{indeterminate:!0,style:"height: 24px; width: 24px; margin-left: 8px;"}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Li(t){let e,n,o,$=t[2]&&xi();return{c(){e=(0,r.fLW)("Register with HS password\n                    "),$&&$.c(),n=(0,r.cSb)()},m(t,s){(0,r.$Tr)(t,e,s),$&&$.m(t,s),(0,r.$Tr)(t,n,s),o=!0},p(t,e){t[2]?$?4&e&&(0,r.Ui)($,1):($=xi(),$.c(),(0,r.Ui)($,1),$.m(n.parentNode,n)):$&&((0,r.dvw)(),(0,r.etI)($,1,1,(()=>{$=null})),(0,r.gbL)())},i(t){o||((0,r.Ui)($),o=!0)},o(t){(0,r.etI)($),o=!1},d(t){t&&(0,r.ogt)(e),$&&$.d(t),t&&(0,r.ogt)(n)}}}function Ii(t){let e,n;return e=new Dt.Z({props:{indeterminate:!0,style:"height: 24px; width: 24px; margin-left: 8px;"}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Ti(t){let e,n,o,$=t[2]&&Ii();return{c(){e=(0,r.fLW)("Continue\n                    "),$&&$.c(),n=(0,r.cSb)()},m(t,s){(0,r.$Tr)(t,e,s),$&&$.m(t,s),(0,r.$Tr)(t,n,s),o=!0},p(t,e){t[2]?$?4&e&&(0,r.Ui)($,1):($=Ii(),$.c(),(0,r.Ui)($,1),$.m(n.parentNode,n)):$&&((0,r.dvw)(),(0,r.etI)($,1,1,(()=>{$=null})),(0,r.gbL)())},i(t){o||((0,r.Ui)($),o=!0)},o(t){(0,r.etI)($),o=!1},d(t){t&&(0,r.ogt)(e),$&&$.d(t),t&&(0,r.ogt)(n)}}}function Ui(t){let e;return{c(){e=(0,r.fLW)("Sign in")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Ci(t){let e,n;return e=new Z.__({props:{$$slots:{default:[Ui]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};262144&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function bi(t){let e,n,o,$,s,c,i,a,l,f,p;function d(e){t[11](e)}let u={variant:"outlined",label:"Homeserver",type:"text",required:!0,style:"margin-top: 16px;",$$slots:{helper:[gi]},$$scope:{ctx:t}};void 0!==t[5]&&(u.value=t[5]),e=new bt.ZP({props:u}),r.VnY.push((()=>(0,r.akz)(e,"value",d))),e.$on("keyup",t[8]);let g=t[1]&&mi(t);const m=[hi,yi],y=[];function h(t,e){return t[4]?0:t[3]?1:-1}return~(s=h(t))&&(c=y[s]=m[s](t)),f=new Z.ZP({props:{href:"#",$$slots:{default:[Ci]},$$scope:{ctx:t}}}),f.$on("click:preventDefault",t[16]),{c(){(0,r.YCL)(e.$$.fragment),o=(0,r.DhX)(),g&&g.c(),$=(0,r.DhX)(),c&&c.c(),i=(0,r.DhX)(),a=(0,r.bGB)("p"),l=(0,r.fLW)("Already have an account?\n                "),(0,r.YCL)(f.$$.fragment)},m(t,n){(0,r.yef)(e,t,n),(0,r.$Tr)(t,o,n),g&&g.m(t,n),(0,r.$Tr)(t,$,n),~s&&y[s].m(t,n),(0,r.$Tr)(t,i,n),(0,r.$Tr)(t,a,n),(0,r.R3I)(a,l),(0,r.yef)(f,a,null),p=!0},p(t,o){const a={};262144&o&&(a.$$scope={dirty:o,ctx:t}),!n&&32&o&&(n=!0,a.value=t[5],(0,r.hjT)((()=>n=!1))),e.$set(a),t[1]?g?g.p(t,o):(g=mi(t),g.c(),g.m($.parentNode,$)):g&&(g.d(1),g=null);let l=s;s=h(t),s===l?~s&&y[s].p(t,o):(c&&((0,r.dvw)(),(0,r.etI)(y[l],1,1,(()=>{y[l]=null})),(0,r.gbL)()),~s?(c=y[s],c?c.p(t,o):(c=y[s]=m[s](t),c.c()),(0,r.Ui)(c,1),c.m(i.parentNode,i)):c=null);const p={};262144&o&&(p.$$scope={dirty:o,ctx:t}),f.$set(p)},i(t){p||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(c),(0,r.Ui)(f.$$.fragment,t),p=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(c),(0,r.etI)(f.$$.fragment,t),p=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(o),g&&g.d(t),t&&(0,r.ogt)($),~s&&y[s].d(t),t&&(0,r.ogt)(i),t&&(0,r.ogt)(a),(0,r.vpE)(f)}}}function Yi(t){let e,n,o,$,s,c,i,a,l,f,p;return o=new Et.Dx({props:{style:"font-size: 24px; font-weight: 600; ",$$slots:{default:[di]},$$scope:{ctx:t}}}),a=new kt.ZP({props:{padded:!0,style:"max-width: 500px",$$slots:{default:[bi]},$$scope:{ctx:t}}}),{c(){e=(0,r.DhX)(),n=(0,r.bGB)("div"),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),s=(0,r.bGB)("p"),s.innerHTML="<strong>The homeserver needs to allow high request rates.</strong>",c=(0,r.DhX)(),i=(0,r.bGB)("form"),(0,r.YCL)(a.$$.fragment),pi.title="Register"},m(t,d){(0,r.$Tr)(t,e,d),(0,r.$Tr)(t,n,d),(0,r.yef)(o,n,null),(0,r.R3I)(n,$),(0,r.R3I)(n,s),(0,r.R3I)(n,c),(0,r.R3I)(n,i),(0,r.yef)(a,i,null),l=!0,f||(p=(0,r.oLt)(i,"submit",(0,r.AT7)(Ei)),f=!0)},p(t,[e]){const n={};262144&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const r={};262207&e&&(r.$$scope={dirty:e,ctx:t}),a.$set(r)},i(t){l||((0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(a.$$.fragment,t),l=!0)},o(t){(0,r.etI)(o.$$.fragment,t),(0,r.etI)(a.$$.fragment,t),l=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(n),(0,r.vpE)(o),(0,r.vpE)(a),f=!1,p()}}}const Ei=()=>{};function Di(t,e,n){let r,{clientManager:o}=e;const s=(0,d.getLogger)("Register");let c="",i=!1,f=!1,p=!1,u=o.homeserverUrl,g="";async function m(){var t,e;s.info("registerWithPassword()");try{n(1,c=""),n(2,i=!0),await o.register(),$().replace("/")}catch(r){fi.error(r),n(1,c=[r.errcode,null!==(e=null===(t=r.cause)||void 0===t?void 0:t.message)&&void 0!==e?e:r.message].filter((t=>!!t)).join(": "))}finally{n(2,i=!1)}}async function y(){s.info("registerWithOidc()"),await o.registerWithOidc()}const h=rt((()=>n(0,o.homeserverUrl=u,o)),250);return(0,R.H3)((async()=>{var t,e,$;s.debug("onMount()"),r.has("error")?(s.warn(`Received OIDC error: ${null!==(t=r.get("error_description"))&&void 0!==t?t:r.get("error")}`),n(1,c=null!==($=null!==(e=r.get("error_description"))&&void 0!==e?e:r.get("error"))&&void 0!==$?$:"An error occurred")):r.has("code")?await o.completeOidcLogin():r.has("state")})),t.$$set=t=>{"clientManager"in t&&n(0,o=t.clientManager)},t.$$.update=()=>{1537&t.$$.dirty&&(async()=>{var t,e,$,i;if(r.has("code"));else if(g!==o.homeserverUrl){try{n(1,c=""),n(3,f=!1),n(4,p=!1),n(0,o.oidcIssuer="",o);try{const r=await a(o.homeserverUrl);(null===(t=r["m.homeserver"])||void 0===t?void 0:t.base_url)&&r["m.homeserver"].base_url!==o.homeserverUrl&&n(0,o.homeserverUrl=r["m.homeserver"].base_url,o),n(0,o.oidcIssuer=null!==($=null===(e=r["org.matrix.msc2965.authentication"])||void 0===e?void 0:e.issuer)&&void 0!==$?$:"",o),n(4,p=!!o.oidcIssuer)}catch(t){s.warn(t)}n(3,f=(await l(o.homeserverUrl)).flows.some((t=>"m.login.password"===t.type)))}catch(t){n(1,c=null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"An error occured")}n(9,g=o.homeserverUrl)}})()},n(10,r=new URLSearchParams(document.location.search)),[o,c,i,f,p,u,m,y,h,g,r,function(t){u=t,n(5,u)},()=>y(),function(e){t.$$.not_equal(o.userId,e)&&(o.userId=e,n(0,o),n(10,r),n(9,g))},function(e){t.$$.not_equal(o.password,e)&&(o.password=e,n(0,o),n(10,r),n(9,g))},()=>m(),()=>$().show("/signin")]}class ki extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,Di,Yi,r.N8,{clientManager:0})}}const _i=ki;n(25054);var Xi=n(56176),Wi=n.n(Xi);function Ri(t){let e,n;return e=new I.sz({props:{data:t[30]}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};1073741824&n[0]&&(r.data=t[30]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Bi(t){let e,n,o,$,s,c,i,a,l,f,p,d,u,g=t[4].client.getUserIdLocalpart()+"";e=new Z.ZP({props:{style:"left: 6px; border-radius: 21px; min-width: 108px; margin-bottom: 16px;",variant:"unelevated",$$slots:{default:[Oi]},$$scope:{ctx:t}}}),e.$on("click",t[14]);let m={quickOpen:!0,anchor:!1,$$slots:{default:[Hi]},$$scope:{ctx:t}};return o=new Ke.ZP({props:m}),t[18](o),s=new Ve({props:{clientManager:t[4]}}),d=new Z.ZP({props:{$$slots:{default:[Ji]},$$scope:{ctx:t}}}),d.$on("click",t[19]),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),i=(0,r.bGB)("p"),a=(0,r.fLW)("Signed in as @"),l=(0,r.fLW)(g),f=(0,r.DhX)(),p=(0,r.bGB)("div"),(0,r.YCL)(d.$$.fragment),(0,r.czc)(i,"text-align","center"),(0,r.czc)(i,"font-size","0.9em"),(0,r.czc)(p,"text-align","center")},m(t,g){(0,r.yef)(e,t,g),(0,r.$Tr)(t,n,g),(0,r.yef)(o,t,g),(0,r.$Tr)(t,$,g),(0,r.yef)(s,t,g),(0,r.$Tr)(t,c,g),(0,r.$Tr)(t,i,g),(0,r.R3I)(i,a),(0,r.R3I)(i,l),(0,r.$Tr)(t,f,g),(0,r.$Tr)(t,p,g),(0,r.yef)(d,p,null),u=!0},p(t,n){const $={};1&n[1]&&($.$$scope={dirty:n,ctx:t}),e.$set($);const c={};1&n[1]&&(c.$$scope={dirty:n,ctx:t}),o.$set(c);const i={};16&n[0]&&(i.clientManager=t[4]),s.$set(i),(!u||16&n[0])&&g!==(g=t[4].client.getUserIdLocalpart()+"")&&(0,r.rTO)(l,g);const a={};1&n[1]&&(a.$$scope={dirty:n,ctx:t}),d.$set(a)},i(t){u||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(d.$$.fragment,t),u=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(d.$$.fragment,t),u=!1},d(a){(0,r.vpE)(e,a),a&&(0,r.ogt)(n),t[18](null),(0,r.vpE)(o,a),a&&(0,r.ogt)($),(0,r.vpE)(s,a),a&&(0,r.ogt)(c),a&&(0,r.ogt)(i),a&&(0,r.ogt)(f),a&&(0,r.ogt)(p),(0,r.vpE)(d)}}}function Si(t){let e;return{c(){e=(0,r.fLW)("add")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Zi(t){let e;return{c(){e=(0,r.fLW)("New")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Oi(t){let e,n,o,$;return e=new Z.JO({props:{class:"material-icons-round",$$slots:{default:[Si]},$$scope:{ctx:t}}}),o=new Z.__({props:{$$slots:{default:[Zi]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};1&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};1&n[1]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Mi(t){let e;return{c(){e=(0,r.fLW)("create_new_folder")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Gi(t){let e;return{c(){e=(0,r.fLW)("New folder")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function ji(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[Mi]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[Gi]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};1&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};1&n[1]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Ni(t){let e;return{c(){e=(0,r.fLW)("insert_drive_file")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Fi(t){let e;return{c(){e=(0,r.fLW)("New File")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function zi(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[Ni]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[Fi]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};1&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};1&n[1]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Pi(t){let e;return{c(){e=(0,r.fLW)("upload_file")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Vi(t){let e;return{c(){e=(0,r.fLW)("File upload")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Ki(t){let e,n,o,$;return e=new Le.zs({props:{class:"material-icons-round",$$slots:{default:[Pi]},$$scope:{ctx:t}}}),o=new Le.xv({props:{$$slots:{default:[Vi]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment)},m(t,s){(0,r.yef)(e,t,s),(0,r.$Tr)(t,n,s),(0,r.yef)(o,t,s),$=!0},p(t,n){const r={};1&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const $={};1&n[1]&&($.$$scope={dirty:n,ctx:t}),o.$set($)},i(t){$||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),$=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),$=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t)}}}function Ai(t){let e,n,o,$,s,c,i,a;return e=new Le.ck({props:{$$slots:{default:[ji]},$$scope:{ctx:t}}}),e.$on("SMUI:action",t[15]),o=new Le.Z0({}),s=new Le.ck({props:{$$slots:{default:[zi]},$$scope:{ctx:t}}}),s.$on("SMUI:action",t[16]),i=new Le.ck({props:{$$slots:{default:[Ki]},$$scope:{ctx:t}}}),i.$on("SMUI:action",t[17]),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),(0,r.YCL)(o.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment)},m(t,l){(0,r.yef)(e,t,l),(0,r.$Tr)(t,n,l),(0,r.yef)(o,t,l),(0,r.$Tr)(t,$,l),(0,r.yef)(s,t,l),(0,r.$Tr)(t,c,l),(0,r.yef)(i,t,l),a=!0},p(t,n){const r={};1&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const o={};1&n[1]&&(o.$$scope={dirty:n,ctx:t}),s.$set(o);const $={};1&n[1]&&($.$$scope={dirty:n,ctx:t}),i.$set($)},i(t){a||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(o.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),a=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(o.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),a=!1},d(t){(0,r.vpE)(e,t),t&&(0,r.ogt)(n),(0,r.vpE)(o,t),t&&(0,r.ogt)($),(0,r.vpE)(s,t),t&&(0,r.ogt)(c),(0,r.vpE)(i,t)}}}function Hi(t){let e,n;return e=new Le.ZP({props:{$$slots:{default:[Ai]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};1&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function qi(t){let e;return{c(){e=(0,r.fLW)("Sign out")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function Ji(t){let e,n;return e=new Z.__({props:{$$slots:{default:[qi]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};1&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function Qi(t){let e,n,o,$,s,c=t[2]&&Bi(t);return{c(){e=(0,r.bGB)("img"),o=(0,r.DhX)(),c&&c.c(),$=(0,r.cSb)(),(0,r.Jn4)(e.src,n="logo.svg")||(0,r.Ljt)(e,"src","logo.svg"),(0,r.Ljt)(e,"alt","Files SDK Demo"),(0,r.czc)(e,"margin-bottom","20px"),(0,r.czc)(e,"width","206px")},m(t,n){(0,r.$Tr)(t,e,n),(0,r.$Tr)(t,o,n),c&&c.m(t,n),(0,r.$Tr)(t,$,n),s=!0},p(t,e){t[2]?c?(c.p(t,e),4&e[0]&&(0,r.Ui)(c,1)):(c=Bi(t),c.c(),(0,r.Ui)(c,1),c.m($.parentNode,$)):c&&((0,r.dvw)(),(0,r.etI)(c,1,1,(()=>{c=null})),(0,r.gbL)())},i(t){s||((0,r.Ui)(c),s=!0)},o(t){(0,r.etI)(c),s=!1},d(t){t&&(0,r.ogt)(e),t&&(0,r.ogt)(o),c&&c.d(t),t&&(0,r.ogt)($)}}}function ta(t){let e,n;return e=new xe.VY({props:{class:"drawer-content",$$slots:{default:[Qi]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};28&n[0]|1&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function ea(t){let e,n,o,$,s,c;function i(e){t[20](e)}let a={label:"Search Files",style:"width: 100%;",noLabel:!0,$$slots:{leadingIcon:[ra]},$$scope:{ctx:t}};return void 0!==t[1]&&(a.value=t[1]),n=new bt.ZP({props:a}),r.VnY.push((()=>(0,r.akz)(n,"value",i))),s=new Mn.Z({props:{href:"#",$$slots:{default:[$a]},$$scope:{ctx:t}}}),s.$on("click:preventDefault",t[21]),{c(){e=(0,r.bGB)("div"),(0,r.YCL)(n.$$.fragment),$=(0,r.DhX)(),(0,r.YCL)(s.$$.fragment),(0,r.Ljt)(e,"class","search-bar svelte-1eb1gjl")},m(t,o){(0,r.$Tr)(t,e,o),(0,r.yef)(n,e,null),(0,r.R3I)(e,$),(0,r.yef)(s,e,null),c=!0},p(t,e){const $={};1&e[1]&&($.$$scope={dirty:e,ctx:t}),!o&&2&e[0]&&(o=!0,$.value=t[1],(0,r.hjT)((()=>o=!1))),n.$set($);const c={};1&e[1]&&(c.$$scope={dirty:e,ctx:t}),s.$set(c)},i(t){c||((0,r.Ui)(n.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),c=!0)},o(t){(0,r.etI)(n.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),c=!1},d(t){t&&(0,r.ogt)(e),(0,r.vpE)(n),(0,r.vpE)(s)}}}function na(t){let e;return{c(){e=(0,r.fLW)("search")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function ra(t){let e,n;return e=new Z.JO({props:{class:"material-icons-round",slot:"leadingIcon",$$slots:{default:[na]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};1&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function oa(t){let e;return{c(){e=(0,r.fLW)("settings")},m(t,n){(0,r.$Tr)(t,e,n)},d(t){t&&(0,r.ogt)(e)}}}function $a(t){let e,n;return e=new Z.JO({props:{class:"material-icons-round",$$slots:{default:[oa]},$$scope:{ctx:t}}}),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};1&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(t){(0,r.vpE)(e,t)}}}function sa(t){let e,n,o={clientManager:t[4],workspaces:t[6],directoryId:t[5]};return e=new li({props:o}),t[22](e),{c(){(0,r.YCL)(e.$$.fragment)},m(t,o){(0,r.yef)(e,t,o),n=!0},p(t,n){const r={};16&n[0]&&(r.clientManager=t[4]),64&n[0]&&(r.workspaces=t[6]),32&n[0]&&(r.directoryId=t[5]),e.$set(r)},i(t){n||((0,r.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,r.etI)(e.$$.fragment,t),n=!1},d(n){t[22](null),(0,r.vpE)(e,n)}}}function ca(t){let e,n,o;var $=t[0];function s(t){return{props:{clientManager:t[4]}}}return $&&(e=new $(s(t))),{c(){e&&(0,r.YCL)(e.$$.fragment),n=(0,r.cSb)()},m(t,$){e&&(0,r.yef)(e,t,$),(0,r.$Tr)(t,n,$),o=!0},p(t,o){const c={};if(16&o[0]&&(c.clientManager=t[4]),$!==($=t[0])){if(e){(0,r.dvw)();const t=e;(0,r.etI)(t.$$.fragment,1,0,(()=>{(0,r.vpE)(t,1)})),(0,r.gbL)()}$?(e=new $(s(t)),(0,r.YCL)(e.$$.fragment),(0,r.Ui)(e.$$.fragment,1),(0,r.yef)(e,n.parentNode,n)):e=null}else $&&e.$set(c)},i(t){o||(e&&(0,r.Ui)(e.$$.fragment,t),o=!0)},o(t){e&&(0,r.etI)(e.$$.fragment,t),o=!1},d(t){t&&(0,r.ogt)(n),e&&(0,r.vpE)(e,t)}}}function ia(t){let e,n,o,$,s,c=t[2]&&ea(t);const i=[ca,sa],a=[];function l(t,e){return t[0]?0:t[2]?1:-1}return~(n=l(t))&&(o=a[n]=i[n](t)),{c(){c&&c.c(),e=(0,r.DhX)(),o&&o.c(),$=(0,r.cSb)()},m(t,o){c&&c.m(t,o),(0,r.$Tr)(t,e,o),~n&&a[n].m(t,o),(0,r.$Tr)(t,$,o),s=!0},p(t,s){t[2]?c?(c.p(t,s),4&s[0]&&(0,r.Ui)(c,1)):(c=ea(t),c.c(),(0,r.Ui)(c,1),c.m(e.parentNode,e)):c&&((0,r.dvw)(),(0,r.etI)(c,1,1,(()=>{c=null})),(0,r.gbL)());let f=n;n=l(t),n===f?~n&&a[n].p(t,s):(o&&((0,r.dvw)(),(0,r.etI)(a[f],1,1,(()=>{a[f]=null})),(0,r.gbL)()),~n?(o=a[n],o?o.p(t,s):(o=a[n]=i[n](t),o.c()),(0,r.Ui)(o,1),o.m($.parentNode,$)):o=null)},i(t){s||((0,r.Ui)(c),(0,r.Ui)(o),s=!0)},o(t){(0,r.etI)(c),(0,r.etI)(o),s=!1},d(t){c&&c.d(t),t&&(0,r.ogt)(e),~n&&a[n].d(t),t&&(0,r.ogt)($)}}}function aa(t){let e,n,o,$,s,c,i,a,l,f,p,d,u,g,m,y;return e=new I.Ix({props:{placement:"top-right",theme:"light",duration:0,$$slots:{default:[Ri,({data:t})=>({30:t}),({data:t})=>[t?1073741824:0]]},$$scope:{ctx:t}}}),s=new xe.ZP({props:{$$slots:{default:[ta]},$$scope:{ctx:t}}}),i=new xe.Lk({props:{class:"app-content",$$slots:{default:[ia]},$$scope:{ctx:t}}}),l=new pn({props:{}}),t[23](l),{c(){(0,r.YCL)(e.$$.fragment),n=(0,r.DhX)(),o=(0,r.bGB)("div"),$=(0,r.bGB)("div"),(0,r.YCL)(s.$$.fragment),c=(0,r.DhX)(),(0,r.YCL)(i.$$.fragment),a=(0,r.DhX)(),(0,r.YCL)(l.$$.fragment),f=(0,r.DhX)(),p=(0,r.bGB)("link"),d=(0,r.DhX)(),u=(0,r.bGB)("link"),g=(0,r.DhX)(),m=(0,r.bGB)("link"),(0,r.Ljt)($,"class","drawer-container svelte-1eb1gjl"),(0,r.Ljt)(o,"class","app svelte-1eb1gjl"),(0,r.Ljt)(p,"rel","stylesheet"),(0,r.Ljt)(p,"href","https://fonts.googleapis.com/icon?family=Material+Icons+Round"),(0,r.Ljt)(u,"rel","stylesheet"),(0,r.Ljt)(u,"href","https://fonts.googleapis.com/css2?family=Inter&display=swap"),(0,r.Ljt)(m,"rel","stylesheet"),(0,r.Ljt)(m,"href","https://cdn.jsdelivr.net/npm/svelte-material-ui@4.0.0/bare.min.css")},m(t,h){(0,r.yef)(e,t,h),(0,r.$Tr)(t,n,h),(0,r.$Tr)(t,o,h),(0,r.R3I)(o,$),(0,r.yef)(s,$,null),(0,r.R3I)($,c),(0,r.yef)(i,$,null),(0,r.$Tr)(t,a,h),(0,r.yef)(l,t,h),(0,r.$Tr)(t,f,h),(0,r.$Tr)(t,p,h),(0,r.$Tr)(t,d,h),(0,r.$Tr)(t,u,h),(0,r.$Tr)(t,g,h),(0,r.$Tr)(t,m,h),y=!0},p(t,n){const r={};1073741824&n[0]|1&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r);const o={};28&n[0]|1&n[1]&&(o.$$scope={dirty:n,ctx:t}),s.$set(o);const $={};247&n[0]|1&n[1]&&($.$$scope={dirty:n,ctx:t}),i.$set($),l.$set({})},i(t){y||((0,r.Ui)(e.$$.fragment,t),(0,r.Ui)(s.$$.fragment,t),(0,r.Ui)(i.$$.fragment,t),(0,r.Ui)(l.$$.fragment,t),y=!0)},o(t){(0,r.etI)(e.$$.fragment,t),(0,r.etI)(s.$$.fragment,t),(0,r.etI)(i.$$.fragment,t),(0,r.etI)(l.$$.fragment,t),y=!1},d($){(0,r.vpE)(e,$),$&&(0,r.ogt)(n),$&&(0,r.ogt)(o),(0,r.vpE)(s),(0,r.vpE)(i),$&&(0,r.ogt)(a),t[23](null),(0,r.vpE)(l,$),$&&(0,r.ogt)(f),$&&(0,r.ogt)(p),$&&(0,r.ogt)(d),$&&(0,r.ogt)(u),$&&(0,r.ogt)(g),$&&(0,r.ogt)(m)}}}function la(t,e,n){const o=(0,d.getLogger)("App");let s;S().extend(Wi()),S().locale("en");let c,i="",a=!1;async function l(t){g?(c.setOpen(!0),nt(t)):async function(){const t=await h.open("New workspace","Untitled workspace","Workspace name","Create",Q(void 0,v));t&&await q((async()=>{await f.files.addFolder(t)}),`Failed to create workspace ${t}`)}()}const f=new E;async function p(t){a?$().redirect("/home"):f.hasAuthData&&"/reconnect"!==$().current?(f.nextRoute||n(4,f.nextRoute=$().current,f),$().replace("/reconnect")):t()}function u(t,e){return(r,o)=>{a?e?e(r,o):o():($().redirect("/"),n(4,f.nextRoute="function"==typeof t?t(r):t,f),o())}}let g;function m(t){n(5,g=null==t?void 0:t.directoryId),n(0,s=void 0)}f.authedState.onUpdate((t=>{n(2,a=t),t?(w(),f.on("modified",w)):$().redirect("/")}));let y,h,v=[];async function w(){o.info("loadWorkspaces()"),n(6,v=A(await f.files.getChildren())),v.forEach((t=>o.info(t.treespace.room.getMyMembership())))}function x(){c.setOpen(!1),y.newFolder()}function L(){c.setOpen(!1),y.newFile()}function I(){c.setOpen(!1),y.fileUpload()}async function T(){n(4,f.nextRoute=void 0,f),n(1,i=""),await f.logout(),$().redirect("/signin")}return $()("*",(({path:t,querystring:e,hash:n},r)=>{o.info(`GET ${t}${n?`#${n}`:""}${e?`?${e}`:""}`),r()})),$()("/",(async()=>{await p((()=>$().redirect("/signin")))})),$()("/signin",(async(t,e)=>{await p((()=>e()))}),(()=>n(0,s=ie))),$()("/register",(async(t,e)=>{await p((()=>e()))}),(()=>n(0,s=_i))),$()("/reconnect",(async(t,e)=>{await p((()=>e()))}),(()=>n(0,s=we))),$()("/shared",u("/shared"),(()=>n(0,s=Ct))),$()("/settings",u("/settings"),(()=>n(0,s=P))),$()("/home",u("/home"),(()=>m(void 0))),$()("/directory/:directoryId",u((t=>`/directory/${t.params.directoryId}`)),(t=>m(t.params))),$()("/*",(()=>n(0,s=X))),$().base("#!"),$()({hashbang:!0}),$().start(),[s,i,a,c,f,g,v,y,h,l,x,L,I,T,t=>l(t),()=>x(),()=>L(),()=>I(),function(t){r.VnY[t?"unshift":"push"]((()=>{c=t,n(3,c)}))},()=>T(),function(t){i=t,n(1,i)},()=>$().show("/settings"),function(t){r.VnY[t?"unshift":"push"]((()=>{y=t,n(7,y)}))},function(t){r.VnY[t?"unshift":"push"]((()=>{h=t,n(8,h)}))}]}class fa extends r.f_C{constructor(t){super(),(0,r.S1n)(this,t,la,aa,r.N8,{},null,[-1,-1])}}new fa({target:document.body})},46601:()=>{},89214:()=>{},71922:()=>{},2363:()=>{},52361:()=>{},94616:()=>{}},t=>{t.O(0,[921,943,417],(()=>(82285,t(t.s=82285)))),t.O()}]);