/*! For license information please see 150.js.LICENSE.txt */
(self.webpackChunkfiles_sdk_demo=self.webpackChunkfiles_sdk_demo||[]).push([[150],{59713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},95318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},6479:(e,t,n)=>{var i=n(37316);e.exports=function(e,t){if(null==e)return{};var n,r,o=i(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},e.exports.default=e.exports,e.exports.__esModule=!0},37316:e=>{e.exports=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r},e.exports.default=e.exports,e.exports.__esModule=!0},97482:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(62854),r=n.n(i);const o=function({test:e,internalProps:t={},externalProps:n={target:"_blank",rel:"nofollow noopener noreferrer"}}){return{rehype:i=>i.use((()=>i=>{r()(i,"element",(i=>{var r;if("a"!==i.tagName||!(null===(r=i.properties)||void 0===r?void 0:r.href))return;const o=i.properties.href;/https?:\/\//.test(o)&&Object.assign(i.properties,e(o)?n:t)}))}))}}},53314:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(10043),r=n.n(i),o={strike:"Strikethrough",strikeText:"text",task:"Task list",taskText:"todo",table:"Table",tableHeading:"Heading"};const s=function({locale:e,...t}={}){const n={...o,...e};return{remark:e=>e.use(r(),t),actions:[{title:n.strike,icon:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 24h38M24 24c16 6 10 20 0 20s-12-8-12-8M36 12s-3-8-12-8-12.564 7.6-8.39 14" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 36s4 8 12 8 12.564-7.6 8.39-14" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',cheatsheet:`~~${n.strikeText}~~`,handler:{type:"action",click({wrapText:e,editor:t}){e("~~"),t.focus()}}},{title:n.task,icon:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"><path d="M42 20v19a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h21"/><path d="m16 20 10 8L41 7"/></g><defs><clipPath id="a"><path fill="currentColor" d="M0 0h48v48H0z"/></clipPath></defs></svg>',cheatsheet:`- [ ] ${n.taskText}`,handler:{type:"action",click({replaceLines:e,editor:t}){e((e=>"- [ ] "+e)),t.focus()}}},{title:n.table,icon:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39.3 6H8.7A2.7 2.7 0 0 0 6 8.7v30.6A2.7 2.7 0 0 0 8.7 42h30.6a2.7 2.7 0 0 0 2.7-2.7V8.7A2.7 2.7 0 0 0 39.3 6z" stroke="currentColor" stroke-width="4"/><path d="M18 6v36M30 6v36M6 18h36M6 30h36" stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>',handler:{type:"action",click({editor:e,appendBlock:t,codemirror:i}){const{line:r}=t(`| ${n.tableHeading} |  |\n| --- | --- |\n|  |  |\n`);e.setSelection(i.Pos(r,2),i.Pos(r,2+n.tableHeading.length)),e.focus()}}}]}}},56310:(e,t,n)=>{class i{log(){}isLevelEnabled(){return!1}addContext(){}removeContext(){}clearContext(){}}["Trace","Debug","Info","Warn","Error","Fatal","Mark"].forEach((e=>{i.prototype[e.toLowerCase()]=()=>{},i.prototype[`is${e}Enabled`]=()=>!1}));const r=(()=>{try{return n(34296)}catch(e){return null}})(),o=r?r.getLogger:()=>new i;e.exports={getLogger:o}},6308:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var i=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}()},79397:(e,t,n)=>{"use strict";function i(e){return void 0===e&&(e=window),!!function(e){void 0===e&&(e=window);var t=!1;try{var n={get passive(){return t=!0,!1}},i=function(){};e.document.addEventListener("test",i,n),e.document.removeEventListener("test",i,n)}catch(e){t=!1}return t}(e)&&{passive:!0}}n.r(t),n.d(t,{applyPassive:()=>i})},1343:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FocusTrap:()=>r});var i="mdc-dom-focus-sentinel",r=function(){function e(e,t){void 0===t&&(t={}),this.root=e,this.options=t,this.elFocusedBeforeTrapFocus=null}return e.prototype.trapFocus=function(){var e=this.getFocusableElements(this.root);if(0===e.length)throw new Error("FocusTrap: Element must have at least one focusable child.");this.elFocusedBeforeTrapFocus=document.activeElement instanceof HTMLElement?document.activeElement:null,this.wrapTabFocus(this.root),this.options.skipInitialFocus||this.focusInitialElement(e,this.options.initialFocusEl)},e.prototype.releaseFocus=function(){[].slice.call(this.root.querySelectorAll("."+i)).forEach((function(e){e.parentElement.removeChild(e)})),!this.options.skipRestoreFocus&&this.elFocusedBeforeTrapFocus&&this.elFocusedBeforeTrapFocus.focus()},e.prototype.wrapTabFocus=function(e){var t=this,n=this.createSentinel(),i=this.createSentinel();n.addEventListener("focus",(function(){var n=t.getFocusableElements(e);n.length>0&&n[n.length-1].focus()})),i.addEventListener("focus",(function(){var n=t.getFocusableElements(e);n.length>0&&n[0].focus()})),e.insertBefore(n,e.children[0]),e.appendChild(i)},e.prototype.focusInitialElement=function(e,t){var n=0;t&&(n=Math.max(e.indexOf(t),0)),e[n].focus()},e.prototype.getFocusableElements=function(e){return[].slice.call(e.querySelectorAll("[autofocus], [tabindex], a, input, textarea, select, button")).filter((function(e){var t="true"===e.getAttribute("aria-disabled")||null!=e.getAttribute("disabled")||null!=e.getAttribute("hidden")||"true"===e.getAttribute("aria-hidden"),n=e.tabIndex>=0&&e.getBoundingClientRect().width>0&&!e.classList.contains(i)&&!t,r=!1;if(n){var o=getComputedStyle(e);r="none"===o.display||"hidden"===o.visibility}return n&&!r}))},e.prototype.createSentinel=function(){var e=document.createElement("div");return e.setAttribute("tabindex","0"),e.setAttribute("aria-hidden","true"),e.classList.add(i),e},e}()},99502:(e,t,n)=>{"use strict";n.d(t,{Fn:()=>i,ku:()=>a});var i={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},r=new Set;r.add(i.BACKSPACE),r.add(i.ENTER),r.add(i.SPACEBAR),r.add(i.PAGE_UP),r.add(i.PAGE_DOWN),r.add(i.END),r.add(i.HOME),r.add(i.ARROW_LEFT),r.add(i.ARROW_UP),r.add(i.ARROW_RIGHT),r.add(i.ARROW_DOWN),r.add(i.DELETE),r.add(i.ESCAPE),r.add(i.TAB);var o=new Map;o.set(8,i.BACKSPACE),o.set(13,i.ENTER),o.set(32,i.SPACEBAR),o.set(33,i.PAGE_UP),o.set(34,i.PAGE_DOWN),o.set(35,i.END),o.set(36,i.HOME),o.set(37,i.ARROW_LEFT),o.set(38,i.ARROW_UP),o.set(39,i.ARROW_RIGHT),o.set(40,i.ARROW_DOWN),o.set(46,i.DELETE),o.set(27,i.ESCAPE),o.set(9,i.TAB);var s=new Set;function a(e){var t=e.key;return r.has(t)?t:o.get(e.keyCode)||i.UNKNOWN}s.add(i.PAGE_UP),s.add(i.PAGE_DOWN),s.add(i.END),s.add(i.HOME),s.add(i.ARROW_LEFT),s.add(i.ARROW_UP),s.add(i.ARROW_RIGHT),s.add(i.ARROW_DOWN)},42851:(e,t,n)=>{"use strict";function i(e,t){if(e.closest)return e.closest(t);for(var n=e;n;){if(r(n,t))return n;n=n.parentElement}return null}function r(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}function o(e){var t=e;if(null!==t.offsetParent)return t.scrollWidth;var n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);var i=n.scrollWidth;return document.documentElement.removeChild(n),i}n.r(t),n.d(t,{closest:()=>i,matches:()=>r,estimateScrollWidth:()=>o})},55794:(e,t,n)=>{"use strict";var i,r;n.d(t,{j2:()=>a,UX:()=>o,KT:()=>c});var o={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"},s=((i={})[""+o.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",i[""+o.LIST_ITEM_CLASS]="mdc-list-item",i[""+o.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",i[""+o.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",i[""+o.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",i[""+o.ROOT]="mdc-list",(r={})[""+o.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",r[""+o.LIST_ITEM_CLASS]="mdc-deprecated-list-item",r[""+o.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",r[""+o.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",r[""+o.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",r[""+o.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",r[""+o.ROOT]="mdc-deprecated-list",r),a={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:"\n    ."+o.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+o.LIST_ITEM_CLASS+" a,\n    ."+s[o.LIST_ITEM_CLASS]+" button:not(:disabled),\n    ."+s[o.LIST_ITEM_CLASS]+" a\n  ",DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:"\n    ."+o.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+o.LIST_ITEM_CLASS+" a,\n    ."+o.LIST_ITEM_CLASS+' input[type="radio"]:not(:disabled),\n    .'+o.LIST_ITEM_CLASS+' input[type="checkbox"]:not(:disabled),\n    .'+s[o.LIST_ITEM_CLASS]+" button:not(:disabled),\n    ."+s[o.LIST_ITEM_CLASS]+" a,\n    ."+s[o.LIST_ITEM_CLASS]+' input[type="radio"]:not(:disabled),\n    .'+s[o.LIST_ITEM_CLASS]+' input[type="checkbox"]:not(:disabled)\n  ',RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},c={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300}},85479:(e,t,n)=>{"use strict";n.d(t,{UX:()=>o,j2:()=>s,KT:()=>a,HX:()=>i,Ns:()=>r});var i,r,o={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},s={CLOSED_EVENT:"MDCMenuSurface:closed",CLOSING_EVENT:"MDCMenuSurface:closing",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},a={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67};!function(e){e[e.BOTTOM=1]="BOTTOM",e[e.CENTER=2]="CENTER",e[e.RIGHT=4]="RIGHT",e[e.FLIP_RTL=8]="FLIP_RTL"}(i||(i={})),function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=4]="TOP_RIGHT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",e[e.TOP_START=8]="TOP_START",e[e.TOP_END=12]="TOP_END",e[e.BOTTOM_START=9]="BOTTOM_START",e[e.BOTTOM_END=13]="BOTTOM_END"}(r||(r={}))},17277:(e,t,n)=>{"use strict";n.d(t,{k:()=>s});var i=n(70655),r=n(6308),o=n(85479),s=function(e){function t(n){var r=e.call(this,(0,i.pi)((0,i.pi)({},t.defaultAdapter),n))||this;return r.isSurfaceOpen=!1,r.isQuickOpen=!1,r.isHoistedElement=!1,r.isFixedPosition=!1,r.isHorizontallyCenteredOnViewport=!1,r.maxHeight=0,r.openAnimationEndTimerId=0,r.closeAnimationEndTimerId=0,r.animationRequestId=0,r.anchorCorner=o.Ns.TOP_START,r.originCorner=o.Ns.TOP_START,r.anchorMargin={top:0,right:0,bottom:0,left:0},r.position={x:0,y:0},r}return(0,i.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return o.UX},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return o.j2},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return o.KT},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Corner",{get:function(){return o.Ns},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){},notifyClosing:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=t.cssClasses,n=e.ROOT,i=e.OPEN;if(!this.adapter.hasClass(n))throw new Error(n+" class required in root element.");this.adapter.hasClass(i)&&(this.isSurfaceOpen=!0)},t.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},t.prototype.setAnchorCorner=function(e){this.anchorCorner=e},t.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^o.HX.RIGHT},t.prototype.setAnchorMargin=function(e){this.anchorMargin.top=e.top||0,this.anchorMargin.right=e.right||0,this.anchorMargin.bottom=e.bottom||0,this.anchorMargin.left=e.left||0},t.prototype.setIsHoisted=function(e){this.isHoistedElement=e},t.prototype.setFixedPosition=function(e){this.isFixedPosition=e},t.prototype.setAbsolutePosition=function(e,t){this.position.x=this.isFinite(e)?e:0,this.position.y=this.isFinite(t)?t:0},t.prototype.setIsHorizontallyCenteredOnViewport=function(e){this.isHorizontallyCenteredOnViewport=e},t.prototype.setQuickOpen=function(e){this.isQuickOpen=e},t.prototype.setMaxHeight=function(e){this.maxHeight=e},t.prototype.isOpen=function(){return this.isSurfaceOpen},t.prototype.open=function(){var e=this;this.isSurfaceOpen||(this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(t.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(t.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame((function(){e.adapter.addClass(t.cssClasses.OPEN),e.dimensions=e.adapter.getInnerDimensions(),e.autoposition(),e.openAnimationEndTimerId=setTimeout((function(){e.openAnimationEndTimerId=0,e.adapter.removeClass(t.cssClasses.ANIMATING_OPEN),e.adapter.notifyOpen()}),o.KT.TRANSITION_OPEN_DURATION)})),this.isSurfaceOpen=!0))},t.prototype.close=function(e){var n=this;if(void 0===e&&(e=!1),this.isSurfaceOpen){if(this.adapter.notifyClosing(),this.isQuickOpen)return this.isSurfaceOpen=!1,e||this.maybeRestoreFocus(),this.adapter.removeClass(t.cssClasses.OPEN),this.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),void this.adapter.notifyClose();this.adapter.addClass(t.cssClasses.ANIMATING_CLOSED),requestAnimationFrame((function(){n.adapter.removeClass(t.cssClasses.OPEN),n.adapter.removeClass(t.cssClasses.IS_OPEN_BELOW),n.closeAnimationEndTimerId=setTimeout((function(){n.closeAnimationEndTimerId=0,n.adapter.removeClass(t.cssClasses.ANIMATING_CLOSED),n.adapter.notifyClose()}),o.KT.TRANSITION_CLOSE_DURATION)})),this.isSurfaceOpen=!1,e||this.maybeRestoreFocus()}},t.prototype.handleBodyClick=function(e){var t=e.target;this.adapter.isElementInContainer(t)||this.close()},t.prototype.handleKeydown=function(e){var t=e.keyCode;("Escape"===e.key||27===t)&&this.close()},t.prototype.autoposition=function(){var e;this.measurements=this.getAutoLayoutmeasurements();var n=this.getoriginCorner(),i=this.getMenuSurfaceMaxHeight(n),r=this.hasBit(n,o.HX.BOTTOM)?"bottom":"top",s=this.hasBit(n,o.HX.RIGHT)?"right":"left",a=this.getHorizontalOriginOffset(n),c=this.getVerticalOriginOffset(n),l=this.measurements,u=l.anchorSize,d=l.surfaceSize,h=((e={})[s]=a,e[r]=c,e);u.width/d.width>o.KT.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(s="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(h),this.adapter.setTransformOrigin(s+" "+r),this.adapter.setPosition(h),this.adapter.setMaxHeight(i?i+"px":""),this.hasBit(n,o.HX.BOTTOM)||this.adapter.addClass(t.cssClasses.IS_OPEN_BELOW)},t.prototype.getAutoLayoutmeasurements=function(){var e=this.adapter.getAnchorDimensions(),t=this.adapter.getBodyDimensions(),n=this.adapter.getWindowDimensions(),i=this.adapter.getWindowScroll();return e||(e={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:e,bodySize:t,surfaceSize:this.dimensions,viewportDistance:{top:e.top,right:n.width-e.right,bottom:n.height-e.bottom,left:e.left},viewportSize:n,windowScroll:i}},t.prototype.getoriginCorner=function(){var e,n,i=this.originCorner,r=this.measurements,s=r.viewportDistance,a=r.anchorSize,c=r.surfaceSize,l=t.numbers.MARGIN_TO_EDGE;this.hasBit(this.anchorCorner,o.HX.BOTTOM)?(e=s.top-l+this.anchorMargin.bottom,n=s.bottom-l-this.anchorMargin.bottom):(e=s.top-l+this.anchorMargin.top,n=s.bottom-l+a.height-this.anchorMargin.top),!(n-c.height>0)&&e>n&&(i=this.setBit(i,o.HX.BOTTOM));var u,d,h,p=this.adapter.isRtl(),f=this.hasBit(this.anchorCorner,o.HX.FLIP_RTL),m=this.hasBit(this.anchorCorner,o.HX.RIGHT)||this.hasBit(i,o.HX.RIGHT);(h=p&&f?!m:m)?(u=s.left+a.width+this.anchorMargin.right,d=s.right-this.anchorMargin.right):(u=s.left+this.anchorMargin.left,d=s.right+a.width-this.anchorMargin.left);var g=u-c.width>0,v=d-c.width>0,y=this.hasBit(i,o.HX.FLIP_RTL)&&this.hasBit(i,o.HX.RIGHT);return v&&y&&p||!g&&y?i=this.unsetBit(i,o.HX.RIGHT):(g&&h&&p||g&&!h&&m||!v&&u>=d)&&(i=this.setBit(i,o.HX.RIGHT)),i},t.prototype.getMenuSurfaceMaxHeight=function(e){if(this.maxHeight>0)return this.maxHeight;var n=this.measurements.viewportDistance,i=0,r=this.hasBit(e,o.HX.BOTTOM),s=this.hasBit(this.anchorCorner,o.HX.BOTTOM),a=t.numbers.MARGIN_TO_EDGE;return r?(i=n.top+this.anchorMargin.top-a,s||(i+=this.measurements.anchorSize.height)):(i=n.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-a,s&&(i-=this.measurements.anchorSize.height)),i},t.prototype.getHorizontalOriginOffset=function(e){var t=this.measurements.anchorSize,n=this.hasBit(e,o.HX.RIGHT),i=this.hasBit(this.anchorCorner,o.HX.RIGHT);if(n){var r=i?t.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?r-(this.measurements.viewportSize.width-this.measurements.bodySize.width):r}return i?t.width-this.anchorMargin.right:this.anchorMargin.left},t.prototype.getVerticalOriginOffset=function(e){var t=this.measurements.anchorSize,n=this.hasBit(e,o.HX.BOTTOM),i=this.hasBit(this.anchorCorner,o.HX.BOTTOM);return n?i?t.height-this.anchorMargin.top:-this.anchorMargin.bottom:i?t.height+this.anchorMargin.bottom:this.anchorMargin.top},t.prototype.adjustPositionForHoistedElement=function(e){var t,n,r=this.measurements,o=r.windowScroll,s=r.viewportDistance,a=r.surfaceSize,c=r.viewportSize,l=Object.keys(e);try{for(var u=(0,i.XA)(l),d=u.next();!d.done;d=u.next()){var h=d.value,p=e[h]||0;!this.isHorizontallyCenteredOnViewport||"left"!==h&&"right"!==h?(p+=s[h],this.isFixedPosition||("top"===h?p+=o.y:"bottom"===h?p-=o.y:"left"===h?p+=o.x:p-=o.x),e[h]=p):e[h]=(c.width-a.width)/2}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}},t.prototype.maybeRestoreFocus=function(){var e=this.adapter.isFocused(),t=document.activeElement&&this.adapter.isElementInContainer(document.activeElement);(e||t)&&this.adapter.restoreFocus()},t.prototype.hasBit=function(e,t){return Boolean(e&t)},t.prototype.setBit=function(e,t){return e|t},t.prototype.unsetBit=function(e,t){return e^t},t.prototype.isFinite=function(e){return"number"==typeof e&&isFinite(e)},t}(r.K)},2934:(e,t,n)=>{"use strict";n.d(t,{g:()=>v});var i=n(24234);function r(e,t,n){const i=e.slice();return i[12]=t[n],i[14]=n,i}function o(e){let t,n,o,s,a,c,l,p,m,g,v,y,b,E,S,w,_,T=e[5],x=[];for(let t=0;t<T.length;t+=1)x[t]=u(r(e,T,t));const C=e=>(0,i.etI)(x[e],1,1,(()=>{x[e]=null}));let I=!e[3]&&d(),k=!e[3]&&e[8]&&h();return{c(){t=(0,i.bGB)("span"),n=(0,i.bGB)("span"),o=(0,i.fLW)(e[6]),s=(0,i.DhX)(),a=(0,i.bGB)("ul");for(let e=0;e<x.length;e+=1)x[e].c();c=(0,i.DhX)(),l=(0,i.bGB)("span"),p=(0,i.fLW)(e[7]),I&&I.c(),m=(0,i.DhX)(),g=(0,i.bGB)("span"),v=(0,i.fLW)(e[6]),y=(0,i.fLW)(f),b=(0,i.fLW)(e[7]),k&&k.c(),E=(0,i.cSb)(),(0,i.Ljt)(n,"class","bracket svelte-2mkk59"),(0,i.Ljt)(n,"tabindex","0"),(0,i.Ljt)(a,"class","svelte-2mkk59"),(0,i.Ljt)(l,"class","bracket svelte-2mkk59"),(0,i.Ljt)(l,"tabindex","0"),(0,i.Ljt)(t,"class","svelte-2mkk59"),(0,i.VHj)(t,"hidden",e[8]),(0,i.Ljt)(g,"class","bracket svelte-2mkk59"),(0,i.Ljt)(g,"tabindex","0"),(0,i.VHj)(g,"hidden",!e[8])},m(r,u){(0,i.$Tr)(r,t,u),(0,i.R3I)(t,n),(0,i.R3I)(n,o),(0,i.R3I)(t,s),(0,i.R3I)(t,a);for(let e=0;e<x.length;e+=1)x[e].m(a,null);(0,i.R3I)(t,c),(0,i.R3I)(t,l),(0,i.R3I)(l,p),I&&I.m(t,null),(0,i.$Tr)(r,m,u),(0,i.$Tr)(r,g,u),(0,i.R3I)(g,v),(0,i.R3I)(g,y),(0,i.R3I)(g,b),k&&k.m(r,u),(0,i.$Tr)(r,E,u),S=!0,w||(_=[(0,i.oLt)(n,"click",e[11]),(0,i.oLt)(l,"click",e[11]),(0,i.oLt)(g,"click",e[11])],w=!0)},p(e,n){if((!S||64&n)&&(0,i.rTO)(o,e[6]),1591&n){let t;for(T=e[5],t=0;t<T.length;t+=1){const o=r(e,T,t);x[t]?(x[t].p(o,n),(0,i.Ui)(x[t],1)):(x[t]=u(o),x[t].c(),(0,i.Ui)(x[t],1),x[t].m(a,null))}for((0,i.dvw)(),t=T.length;t<x.length;t+=1)C(t);(0,i.gbL)()}(!S||128&n)&&(0,i.rTO)(p,e[7]),e[3]?I&&(I.d(1),I=null):I||(I=d(),I.c(),I.m(t,null)),256&n&&(0,i.VHj)(t,"hidden",e[8]),(!S||64&n)&&(0,i.rTO)(v,e[6]),(!S||128&n)&&(0,i.rTO)(b,e[7]),256&n&&(0,i.VHj)(g,"hidden",!e[8]),!e[3]&&e[8]?k||(k=h(),k.c(),k.m(E.parentNode,E)):k&&(k.d(1),k=null)},i(e){if(!S){for(let e=0;e<T.length;e+=1)(0,i.Ui)(x[e]);S=!0}},o(e){x=x.filter(Boolean);for(let e=0;e<x.length;e+=1)(0,i.etI)(x[e]);S=!1},d(e){e&&(0,i.ogt)(t),(0,i.RMB)(x,e),I&&I.d(),e&&(0,i.ogt)(m),e&&(0,i.ogt)(g),k&&k.d(e),e&&(0,i.ogt)(E),w=!1,(0,i.j7q)(_)}}}function s(e){let t,n,r,o,s=e[12]+"";return{c(){t=(0,i.bGB)("span"),n=(0,i.fLW)('"'),r=(0,i.fLW)(s),o=(0,i.fLW)('":'),(0,i.Ljt)(t,"class","key")},m(e,s){(0,i.$Tr)(e,t,s),(0,i.R3I)(t,n),(0,i.R3I)(t,r),(0,i.R3I)(t,o)},p(e,t){32&t&&s!==(s=e[12]+"")&&(0,i.rTO)(r,s)},d(e){e&&(0,i.ogt)(t)}}}function a(e){let t,n,r,o=e[10](e[0][e[12]])+"",s=e[14]<e[5].length-1&&l();return{c(){t=(0,i.bGB)("span"),n=(0,i.fLW)(o),s&&s.c(),(0,i.Ljt)(t,"class",r="val "+e[9](e[0][e[12]])+" svelte-2mkk59")},m(e,r){(0,i.$Tr)(e,t,r),(0,i.R3I)(t,n),s&&s.m(t,null)},p(e,a){33&a&&o!==(o=e[10](e[0][e[12]])+"")&&(0,i.rTO)(n,o),e[14]<e[5].length-1?s||(s=l(),s.c(),s.m(t,null)):s&&(s.d(1),s=null),33&a&&r!==(r="val "+e[9](e[0][e[12]])+" svelte-2mkk59")&&(0,i.Ljt)(t,"class",r)},i:i.ZTd,o:i.ZTd,d(e){e&&(0,i.ogt)(t),s&&s.d()}}}function c(e){let t,n;return t=new g({props:{json:e[0][e[12]],depth:e[1],_lvl:e[2]+1,_last:e[14]===e[5].length-1}}),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const i={};33&n&&(i.json=e[0][e[12]]),2&n&&(i.depth=e[1]),4&n&&(i._lvl=e[2]+1),32&n&&(i._last=e[14]===e[5].length-1),t.$set(i)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(e){(0,i.vpE)(t,e)}}}function l(e){let t;return{c(){t=(0,i.bGB)("span"),t.textContent=",",(0,i.Ljt)(t,"class","comma svelte-2mkk59")},m(e,n){(0,i.$Tr)(e,t,n)},d(e){e&&(0,i.ogt)(t)}}}function u(e){let t,n,r,o,l,u,d,h=!e[4]&&s(e);const p=[c,a],f=[];function m(e,t){return 33&t&&(r=null),null==r&&(r=!("object"!==e[9](e[0][e[12]]))),r?0:1}return o=m(e,-1),l=f[o]=p[o](e),{c(){t=(0,i.bGB)("li"),h&&h.c(),n=(0,i.DhX)(),l.c(),u=(0,i.DhX)()},m(e,r){(0,i.$Tr)(e,t,r),h&&h.m(t,null),(0,i.R3I)(t,n),f[o].m(t,null),(0,i.R3I)(t,u),d=!0},p(e,r){e[4]?h&&(h.d(1),h=null):h?h.p(e,r):(h=s(e),h.c(),h.m(t,n));let a=o;o=m(e,r),o===a?f[o].p(e,r):((0,i.dvw)(),(0,i.etI)(f[a],1,1,(()=>{f[a]=null})),(0,i.gbL)(),l=f[o],l?l.p(e,r):(l=f[o]=p[o](e),l.c()),(0,i.Ui)(l,1),l.m(t,u))},i(e){d||((0,i.Ui)(l),d=!0)},o(e){(0,i.etI)(l),d=!1},d(e){e&&(0,i.ogt)(t),h&&h.d(),f[o].d()}}}function d(e){let t;return{c(){t=(0,i.bGB)("span"),t.textContent=",",(0,i.Ljt)(t,"class","comma svelte-2mkk59")},m(e,n){(0,i.$Tr)(e,t,n)},d(e){e&&(0,i.ogt)(t)}}}function h(e){let t;return{c(){t=(0,i.bGB)("span"),t.textContent=",",(0,i.Ljt)(t,"class","comma svelte-2mkk59")},m(e,n){(0,i.$Tr)(e,t,n)},d(e){e&&(0,i.ogt)(t)}}}function p(e){let t,n,r=e[5].length&&o(e);return{c(){r&&r.c(),t=(0,i.cSb)()},m(e,o){r&&r.m(e,o),(0,i.$Tr)(e,t,o),n=!0},p(e,[n]){e[5].length?r?(r.p(e,n),32&n&&(0,i.Ui)(r,1)):(r=o(e),r.c(),(0,i.Ui)(r,1),r.m(t.parentNode,t)):r&&((0,i.dvw)(),(0,i.etI)(r,1,1,(()=>{r=null})),(0,i.gbL)())},i(e){n||((0,i.Ui)(r),n=!0)},o(e){(0,i.etI)(r),n=!1},d(e){r&&r.d(e),e&&(0,i.ogt)(t)}}}const f="...";function m(e,t,n){let{json:i}=t,{depth:r=1/0}=t,{_lvl:o=0}=t,{_last:s=!0}=t;const a=e=>null===e?"null":typeof e;let c,l,u,d,h;return e.$$set=e=>{"json"in e&&n(0,i=e.json),"depth"in e&&n(1,r=e.depth),"_lvl"in e&&n(2,o=e._lvl),"_last"in e&&n(3,s=e._last)},e.$$.update=()=>{17&e.$$.dirty&&(n(5,c="object"===a(i)?Object.keys(i):[]),n(4,l=Array.isArray(i)),n(6,u=l?"[":"{"),n(7,d=l?"]":"}")),6&e.$$.dirty&&n(8,h=r<o)},[i,r,o,s,l,c,u,d,h,a,e=>{switch(a(e)){case"string":return`"${e}"`;case"function":return"f () {...}";case"symbol":return e.toString();default:return e}},()=>{n(8,h=!h)}]}class g extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,m,p,i.N8,{json:0,depth:1,_lvl:2,_last:3})}}const v=g},69141:e=>{"use strict";for(var t=/[\\\"\x00-\x1F]/g,n={},i=0;i<32;++i)n[String.fromCharCode(i)]="\\U"+("0000"+i.toString(16)).slice(-4).toUpperCase();function r(e){return t.lastIndex=0,e.replace(t,(function(e){return n[e]}))}n["\b"]="\\b",n["\t"]="\\t",n["\n"]="\\n",n["\f"]="\\f",n["\r"]="\\r",n['"']='\\"',n["\\"]="\\\\",e.exports={stringify:function e(t){switch(typeof t){case"string":return'"'+r(t)+'"';case"number":return isFinite(t)?t:"null";case"boolean":return t;case"object":return null===t?"null":Array.isArray(t)?function(t){for(var n="[",i="",r=0;r<t.length;++r)i+=n,n=",",i+=e(t[r]);return","!=n?"[]":i+"]"}(t):function(t){var n="{",i="",o=Object.keys(t);o.sort();for(var s=0;s<o.length;++s){var a=o[s];i+=n+'"'+r(a)+'":',n=",",i+=e(t[a])}return","!=n?"{}":i+"}"}(t);default:throw new Error("Cannot stringify: "+typeof t)}}}},39809:(e,t,n)=>{"use strict";const i=t;i.bignum=n(13550),i.define=n(22500).define,i.base=n(71979),i.constants=n(36826),i.decoders=n(78307),i.encoders=n(56579)},22500:(e,t,n)=>{"use strict";const i=n(56579),r=n(78307),o=n(35717);function s(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new s(e,t)},s.prototype._createNamed=function(e){const t=this.name;function n(e){this._initNamed(e,t)}return o(n,e),n.prototype._initNamed=function(t,n){e.call(this,t,n)},new n(this)},s.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(r[e])),this.decoders[e]},s.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},s.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(i[e])),this.encoders[e]},s.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}},36625:(e,t,n)=>{"use strict";const i=n(35717),r=n(98465).b,o=n(2399).Buffer;function s(e,t){r.call(this,t),o.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function a(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return a.isEncoderBuffer(e)||(e=new a(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=o.byteLength(e);else{if(!o.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}i(s,r),t.C=s,s.isDecoderBuffer=function(e){return e instanceof s||"object"==typeof e&&o.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},s.prototype.save=function(){return{offset:this.offset,reporter:r.prototype.save.call(this)}},s.prototype.restore=function(e){const t=new s(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,r.prototype.restore.call(this,e.reporter),t},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},s.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const n=new s(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},s.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.R=a,a.isEncoderBuffer=function(e){return e instanceof a||"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},a.prototype.join=function(e,t){return e||(e=o.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(n){n.join(e,t),t+=n.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):o.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},71979:(e,t,n)=>{"use strict";const i=t;i.Reporter=n(98465).b,i.DecoderBuffer=n(36625).C,i.EncoderBuffer=n(36625).R,i.Node=n(41949)},41949:(e,t,n)=>{"use strict";const i=n(98465).b,r=n(36625).R,o=n(36625).C,s=n(79746),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function l(e,t,n){const i={};this._baseState=i,i.name=n,i.enc=e,i.parent=t||null,i.children=null,i.tag=null,i.args=null,i.reverseArgs=null,i.choice=null,i.optional=!1,i.any=!1,i.obj=!1,i.use=null,i.useDecoder=null,i.key=null,i.default=null,i.explicit=null,i.implicit=null,i.contains=null,i.parent||(i.children=[],this._wrap())}e.exports=l;const u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){const e=this._baseState,t={};u.forEach((function(n){t[n]=e[n]}));const n=new this.constructor(t.parent);return n._baseState=t,n},l.prototype._wrap=function(){const e=this._baseState;c.forEach((function(t){this[t]=function(){const n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}}),this)},l.prototype._init=function(e){const t=this._baseState;s(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),s.equal(t.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(e){const t=this._baseState,n=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==n.length&&(s(null===t.children),t.children=n,n.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(s(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach((function(n){n==(0|n)&&(n|=0);const i=e[n];t[i]=n})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){l.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),a.forEach((function(e){l.prototype[e]=function(){const t=this._baseState,n=Array.prototype.slice.call(arguments);return s(null===t.tag),t.tag=e,this._useArgs(n),this}})),l.prototype.use=function(e){s(e);const t=this._baseState;return s(null===t.use),t.use=e,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(e){const t=this._baseState;return s(null===t.default),t.default=e,t.optional=!0,this},l.prototype.explicit=function(e){const t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.explicit=e,this},l.prototype.implicit=function(e){const t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.implicit=e,this},l.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},l.prototype.key=function(e){const t=this._baseState;return s(null===t.key),t.key=e,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(e){const t=this._baseState;return s(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},l.prototype.contains=function(e){const t=this._baseState;return s(null===t.use),t.contains=e,this},l.prototype._decode=function(e,t){const n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));let i,r=n.default,s=!0,a=null;if(null!==n.key&&(a=e.enterKey(n.key)),n.optional){let i=null;if(null!==n.explicit?i=n.explicit:null!==n.implicit?i=n.implicit:null!==n.tag&&(i=n.tag),null!==i||n.any){if(s=this._peekTag(e,i,n.any),e.isError(s))return s}else{const i=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),s=!0}catch(e){s=!1}e.restore(i)}}if(n.obj&&s&&(i=e.enterObject()),s){if(null!==n.explicit){const t=this._decodeTag(e,n.explicit);if(e.isError(t))return t;e=t}const i=e.offset;if(null===n.use&&null===n.choice){let t;n.any&&(t=e.save());const i=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(i))return i;n.any?r=e.raw(t):e=i}if(t&&t.track&&null!==n.tag&&t.track(e.path(),i,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),n.any||(r=null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t)),e.isError(r))return r;if(n.any||null!==n.choice||null===n.children||n.children.forEach((function(n){n._decode(e,t)})),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){const i=new o(r);r=this._getUse(n.contains,e._reporterState.obj)._decode(i,t)}}return n.obj&&s&&(r=e.leaveObject(i)),null===n.key||null===r&&!0!==s?null!==a&&e.exitKey(a):e.leaveKey(a,n.key,r),r},l.prototype._decodeGeneric=function(e,t,n){const i=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,i.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):"objid"===e&&i.args?this._decodeObjid(t,i.args[0],i.args[1],n):"objid"===e?this._decodeObjid(t,null,null,n):"gentime"===e||"utctime"===e?this._decodeTime(t,e,n):"null_"===e?this._decodeNull(t,n):"bool"===e?this._decodeBool(t,n):"objDesc"===e?this._decodeStr(t,e,n):"int"===e||"enum"===e?this._decodeInt(t,i.args&&i.args[0],n):null!==i.use?this._getUse(i.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)},l.prototype._getUse=function(e,t){const n=this._baseState;return n.useDecoder=this._use(e,t),s(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},l.prototype._decodeChoice=function(e,t){const n=this._baseState;let i=null,r=!1;return Object.keys(n.choice).some((function(o){const s=e.save(),a=n.choice[o];try{const n=a._decode(e,t);if(e.isError(n))return!1;i={type:o,value:n},r=!0}catch(t){return e.restore(s),!1}return!0}),this),r?i:e.error("Choice not matched")},l.prototype._createEncoderBuffer=function(e){return new r(e,this.reporter)},l.prototype._encode=function(e,t,n){const i=this._baseState;if(null!==i.default&&i.default===e)return;const r=this._encodeValue(e,t,n);return void 0===r||this._skipDefault(r,t,n)?void 0:r},l.prototype._encodeValue=function(e,t,n){const r=this._baseState;if(null===r.parent)return r.children[0]._encode(e,t||new i);let o=null;if(this.reporter=t,r.optional&&void 0===e){if(null===r.default)return;e=r.default}let s=null,a=!1;if(r.any)o=this._createEncoderBuffer(e);else if(r.choice)o=this._encodeChoice(e,t);else if(r.contains)s=this._getUse(r.contains,n)._encode(e,t),a=!0;else if(r.children)s=r.children.map((function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");const i=t.enterKey(n._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const r=n._encode(e[n._baseState.key],t,e);return t.leaveKey(i),r}),this).filter((function(e){return e})),s=this._createEncoderBuffer(s);else if("seqof"===r.tag||"setof"===r.tag){if(!r.args||1!==r.args.length)return t.error("Too many args for : "+r.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const n=this.clone();n._baseState.implicit=null,s=this._createEncoderBuffer(e.map((function(n){const i=this._baseState;return this._getUse(i.args[0],e)._encode(n,t)}),n))}else null!==r.use?o=this._getUse(r.use,n)._encode(e,t):(s=this._encodePrimitive(r.tag,e),a=!0);if(!r.any&&null===r.choice){const e=null!==r.implicit?r.implicit:r.tag,n=null===r.implicit?"universal":"context";null===e?null===r.use&&t.error("Tag could be omitted only for .use()"):null===r.use&&(o=this._encodeComposite(e,a,n,s))}return null!==r.explicit&&(o=this._encodeComposite(r.explicit,!1,"context",o)),o},l.prototype._encodeChoice=function(e,t){const n=this._baseState,i=n.choice[e.type];return i||s(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,t)},l.prototype._encodePrimitive=function(e,t){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},l.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},l.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},98465:(e,t,n)=>{"use strict";const i=n(35717);function r(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function o(e,t){this.path=e,this.rethrow(t)}t.b=r,r.prototype.isError=function(e){return e instanceof o},r.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},r.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},r.prototype.enterKey=function(e){return this._reporterState.path.push(e)},r.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},r.prototype.leaveKey=function(e,t,n){const i=this._reporterState;this.exitKey(e),null!==i.obj&&(i.obj[t]=n)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},r.prototype.leaveObject=function(e){const t=this._reporterState,n=t.obj;return t.obj=e,n},r.prototype.error=function(e){let t;const n=this._reporterState,i=e instanceof o;if(t=i?e:new o(n.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!n.options.partial)throw t;return i||n.errors.push(t),t},r.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},i(o,Error),o.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},70160:(e,t)=>{"use strict";function n(e){const t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);const i=e[n];t[i]=n})),t}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=n(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=n(t.tag)},36826:(e,t,n)=>{"use strict";const i=t;i._reverse=function(e){const t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);const i=e[n];t[i]=n})),t},i.der=n(70160)},41671:(e,t,n)=>{"use strict";const i=n(35717),r=n(13550),o=n(36625).C,s=n(41949),a=n(70160);function c(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new l,this.tree._init(e.body)}function l(e){s.call(this,"der",e)}function u(e,t){let n=e.readUInt8(t);if(e.isError(n))return n;const i=a.tagClass[n>>6],r=0==(32&n);if(31==(31&n)){let i=n;for(n=0;128==(128&i);){if(i=e.readUInt8(t),e.isError(i))return i;n<<=7,n|=127&i}}else n&=31;return{cls:i,primitive:r,tag:n,tagStr:a.tag[n]}}function d(e,t,n){let i=e.readUInt8(n);if(e.isError(i))return i;if(!t&&128===i)return null;if(0==(128&i))return i;const r=127&i;if(r>4)return e.error("length octect is too long");i=0;for(let t=0;t<r;t++){i<<=8;const t=e.readUInt8(n);if(e.isError(t))return t;i|=t}return i}e.exports=c,c.prototype.decode=function(e,t){return o.isDecoderBuffer(e)||(e=new o(e,t)),this.tree._decode(e,t)},i(l,s),l.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;const i=e.save(),r=u(e,'Failed to peek tag: "'+t+'"');return e.isError(r)?r:(e.restore(i),r.tag===t||r.tagStr===t||r.tagStr+"of"===t||n)},l.prototype._decodeTag=function(e,t,n){const i=u(e,'Failed to decode tag of "'+t+'"');if(e.isError(i))return i;let r=d(e,i.primitive,'Failed to get length of "'+t+'"');if(e.isError(r))return r;if(!n&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(i.primitive||null!==r)return e.skip(r,'Failed to match body of: "'+t+'"');const o=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(r=e.offset-o.offset,e.restore(o),e.skip(r,'Failed to match body of: "'+t+'"'))},l.prototype._skipUntilEnd=function(e,t){for(;;){const n=u(e,t);if(e.isError(n))return n;const i=d(e,n.primitive,t);if(e.isError(i))return i;let r;if(r=n.primitive||null!==i?e.skip(i):this._skipUntilEnd(e,t),e.isError(r))return r;if("end"===n.tagStr)break}},l.prototype._decodeList=function(e,t,n,i){const r=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const o=n.decode(e,"der",i);if(e.isError(o)&&t)break;r.push(o)}return r},l.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let n="";for(let e=0;e<t.length/2;e++)n+=String.fromCharCode(t.readUInt16BE(2*e));return n}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},l.prototype._decodeObjid=function(e,t,n){let i;const r=[];let o=0,s=0;for(;!e.isEmpty();)s=e.readUInt8(),o<<=7,o|=127&s,0==(128&s)&&(r.push(o),o=0);128&s&&r.push(o);const a=r[0]/40|0,c=r[0]%40;if(i=n?r:[a,c].concat(r.slice(1)),t){let e=t[i.join(" ")];void 0===e&&(e=t[i.join(".")]),void 0!==e&&(i=e)}return i},l.prototype._decodeTime=function(e,t){const n=e.raw().toString();let i,r,o,s,a,c;if("gentime"===t)i=0|n.slice(0,4),r=0|n.slice(4,6),o=0|n.slice(6,8),s=0|n.slice(8,10),a=0|n.slice(10,12),c=0|n.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");i=0|n.slice(0,2),r=0|n.slice(2,4),o=0|n.slice(4,6),s=0|n.slice(6,8),a=0|n.slice(8,10),c=0|n.slice(10,12),i=i<70?2e3+i:1900+i}return Date.UTC(i,r-1,o,s,a,c,0)},l.prototype._decodeNull=function(){return null},l.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},l.prototype._decodeInt=function(e,t){const n=e.raw();let i=new r(n);return t&&(i=t[i.toString(10)]||i),i},l.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},78307:(e,t,n)=>{"use strict";const i=t;i.der=n(41671),i.pem=n(59631)},59631:(e,t,n)=>{"use strict";const i=n(35717),r=n(2399).Buffer,o=n(41671);function s(e){o.call(this,e),this.enc="pem"}i(s,o),e.exports=s,s.prototype.decode=function(e,t){const n=e.toString().split(/[\r\n]+/g),i=t.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let a=-1,c=-1;for(let e=0;e<n.length;e++){const t=n[e].match(s);if(null!==t&&t[2]===i){if(-1!==a){if("END"!==t[1])break;c=e;break}if("BEGIN"!==t[1])break;a=e}}if(-1===a||-1===c)throw new Error("PEM section not found for: "+i);const l=n.slice(a+1,c).join("");l.replace(/[^a-z0-9+/=]+/gi,"");const u=r.from(l,"base64");return o.prototype.decode.call(this,u,t)}},66984:(e,t,n)=>{"use strict";const i=n(35717),r=n(2399).Buffer,o=n(41949),s=n(70160);function a(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){o.call(this,"der",e)}function l(e){return e<10?"0"+e:e}e.exports=a,a.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},i(c,o),c.prototype._encodeComposite=function(e,t,n,i){const o=function(e,t,n,i){let r;if("seqof"===e?e="seq":"setof"===e&&(e="set"),s.tagByName.hasOwnProperty(e))r=s.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return i.error("Unknown tag: "+e);r=e}return r>=31?i.error("Multi-octet tag encoding unsupported"):(t||(r|=32),r|=s.tagClassByName[n||"universal"]<<6,r)}(e,t,n,this.reporter);if(i.length<128){const e=r.alloc(2);return e[0]=o,e[1]=i.length,this._createEncoderBuffer([e,i])}let a=1;for(let e=i.length;e>=256;e>>=8)a++;const c=r.alloc(2+a);c[0]=o,c[1]=128|a;for(let e=1+a,t=i.length;t>0;e--,t>>=8)c[e]=255&t;return this._createEncoderBuffer([c,i])},c.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=r.alloc(2*e.length);for(let n=0;n<e.length;n++)t.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},c.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let i=0;for(let t=0;t<e.length;t++){let n=e[t];for(i++;n>=128;n>>=7)i++}const o=r.alloc(i);let s=o.length-1;for(let t=e.length-1;t>=0;t--){let n=e[t];for(o[s--]=127&n;(n>>=7)>0;)o[s--]=128|127&n}return this._createEncoderBuffer(o)},c.prototype._encodeTime=function(e,t){let n;const i=new Date(e);return"gentime"===t?n=[l(i.getUTCFullYear()),l(i.getUTCMonth()+1),l(i.getUTCDate()),l(i.getUTCHours()),l(i.getUTCMinutes()),l(i.getUTCSeconds()),"Z"].join(""):"utctime"===t?n=[l(i.getUTCFullYear()%100),l(i.getUTCMonth()+1),l(i.getUTCDate()),l(i.getUTCHours()),l(i.getUTCMinutes()),l(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!r.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=r.from(t)}if(r.isBuffer(e)){let t=e.length;0===e.length&&t++;const n=r.alloc(t);return e.copy(n),0===e.length&&(n[0]=0),this._createEncoderBuffer(n)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let t=e;t>=256;t>>=8)n++;const i=new Array(n);for(let t=i.length-1;t>=0;t--)i[t]=255&e,e>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(r.from(i))},c.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},c.prototype._skipDefault=function(e,t,n){const i=this._baseState;let r;if(null===i.default)return!1;const o=e.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,t,n).join()),o.length!==i.defaultBuffer.length)return!1;for(r=0;r<o.length;r++)if(o[r]!==i.defaultBuffer[r])return!1;return!0}},56579:(e,t,n)=>{"use strict";const i=t;i.der=n(66984),i.pem=n(2883)},2883:(e,t,n)=>{"use strict";const i=n(35717),r=n(66984);function o(e){r.call(this,e),this.enc="pem"}i(o,r),e.exports=o,o.prototype.encode=function(e,t){const n=r.prototype.encode.call(this,e).toString("base64"),i=["-----BEGIN "+t.label+"-----"];for(let e=0;e<n.length;e+=64)i.push(n.slice(e,e+64));return i.push("-----END "+t.label+"-----"),i.join("\n")}},9669:(e,t,n)=>{e.exports=n(51609)},55448:(e,t,n)=>{"use strict";var i=n(64867),r=n(36026),o=n(4372),s=n(15327),a=n(94097),c=n(84109),l=n(67985),u=n(85061),d=n(45655),h=n(65263);e.exports=function(e){return new Promise((function(t,n){var p,f=e.data,m=e.headers,g=e.responseType;function v(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}i.isFormData(f)&&delete m["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",E=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(b+":"+E)}var S=a(e.baseURL,e.url);function w(){if(y){var i="getAllResponseHeaders"in y?c(y.getAllResponseHeaders()):null,o={data:g&&"text"!==g&&"json"!==g?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:i,config:e,request:y};r((function(e){t(e),v()}),(function(e){n(e),v()}),o),y=null}}if(y.open(e.method.toUpperCase(),s(S,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=w:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(w)},y.onabort=function(){y&&(n(u("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){n(u("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",i=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,i.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},i.isStandardBrowserEnv()){var _=(e.withCredentials||l(S))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;_&&(m[e.xsrfHeaderName]=_)}"setRequestHeader"in y&&i.forEach(m,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete m[t]:y.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),g&&"json"!==g&&(y.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){y&&(n(!e||e&&e.type?new h("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),f||(f=null),y.send(f)}))}},51609:(e,t,n)=>{"use strict";var i=n(64867),r=n(91849),o=n(30321),s=n(47185),a=function e(t){var n=new o(t),a=r(o.prototype.request,n);return i.extend(a,o.prototype,n),i.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(45655));a.Axios=o,a.Cancel=n(65263),a.CancelToken=n(14972),a.isCancel=n(26502),a.VERSION=n(97288).version,a.all=function(e){return Promise.all(e)},a.spread=n(8713),a.isAxiosError=n(16268),e.exports=a,e.exports.default=a},65263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},14972:(e,t,n)=>{"use strict";var i=n(65263);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,i=n._listeners.length;for(t=0;t<i;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,i=new Promise((function(e){n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e){n.reason||(n.reason=new i(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},26502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},30321:(e,t,n)=>{"use strict";var i=n(64867),r=n(15327),o=n(80782),s=n(13572),a=n(47185),c=n(54875),l=c.validators;function u(e){this.defaults=e,this.interceptors={request:new o,response:new o}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var r,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!i){var u=[s,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(o),r=Promise.resolve(e);u.length;)r=r.then(u.shift(),u.shift());return r}for(var d=e;n.length;){var h=n.shift(),p=n.shift();try{d=h(d)}catch(e){p(e);break}}try{r=s(d)}catch(e){return Promise.reject(e)}for(;o.length;)r=r.then(o.shift(),o.shift());return r},u.prototype.getUri=function(e){return e=a(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),i.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,i){return this.request(a(i||{},{method:e,url:t,data:n}))}})),e.exports=u},80782:(e,t,n)=>{"use strict";var i=n(64867);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},94097:(e,t,n)=>{"use strict";var i=n(91793),r=n(7303);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},85061:(e,t,n)=>{"use strict";var i=n(80481);e.exports=function(e,t,n,r,o){var s=new Error(e);return i(s,t,n,r,o)}},13572:(e,t,n)=>{"use strict";var i=n(64867),r=n(18527),o=n(26502),s=n(45655),a=n(65263);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},80481:e=>{"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},47185:(e,t,n)=>{"use strict";var i=n(64867);e.exports=function(e,t){t=t||{};var n={};function r(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function o(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function s(e){if(!i.isUndefined(t[e]))return r(void 0,t[e])}function a(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function c(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return i.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||o,r=t(e);i.isUndefined(r)&&t!==c||(n[e]=r)})),n}},36026:(e,t,n)=>{"use strict";var i=n(85061);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(i("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},18527:(e,t,n)=>{"use strict";var i=n(64867),r=n(45655);e.exports=function(e,t,n){var o=this||r;return i.forEach(n,(function(n){e=n.call(o,e,t)})),e}},45655:(e,t,n)=>{"use strict";var i=n(34155),r=n(64867),o=n(16016),s=n(80481),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==i&&"[object process]"===Object.prototype.toString.call(i))&&(l=n(55448)),l),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||u.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw s(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(a)})),e.exports=u},97288:e=>{e.exports={version:"0.24.0"}},91849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},15327:(e,t,n)=>{"use strict";var i=n(64867);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var s=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var i=n(64867);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},91793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},16268:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},67985:(e,t,n)=>{"use strict";var i=n(64867);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16016:(e,t,n)=>{"use strict";var i=n(64867);e.exports=function(e,t){i.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))}},84109:(e,t,n)=>{"use strict";var i=n(64867),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(i.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=i.trim(e.substr(0,o)).toLowerCase(),n=i.trim(e.substr(o+1)),t){if(s[t]&&r.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},54875:(e,t,n)=>{"use strict";var i=n(25108),r=n(97288).version,o={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){o[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};o.transitional=function(e,t,n){function o(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new Error(o(r," has been removed"+(t?" in "+t:"")));return t&&!s[r]&&(s[r]=!0,i.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var i=Object.keys(e),r=i.length;r-- >0;){var o=i[r],s=t[o];if(s){var a=e[o],c=void 0===a||s(a,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:o}},64867:(e,t,n)=>{"use strict";var i=n(91849),r=Object.prototype.toString;function o(e){return"[object Array]"===r.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===r.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:c,isUndefined:s,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:l,isStream:function(e){return a(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function n(n,i){c(t[i])&&c(n)?t[i]=e(t[i],n):c(n)?t[i]=e({},n):o(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)u(arguments[i],n);return t},extend:function(e,t,n){return u(t,(function(t,r){e[r]=n&&"function"==typeof t?i(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},18869:e=>{"use strict";e.exports=function(e){if(e)throw e}},58162:e=>{"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var r=e.charAt(i),o=r.charCodeAt(0);if(255!==t[o])throw new TypeError(r+" is ambiguous");t[o]=i}var s=e.length,a=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var n=0,i=0,r=0;e[n]===a;)i++,n++;for(var o=(e.length-n)*c+1>>>0,l=new Uint8Array(o);e[n];){var u=t[e.charCodeAt(n)];if(255===u)return;for(var d=0,h=o-1;(0!==u||d<r)&&-1!==h;h--,d++)u+=s*l[h]>>>0,l[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");r=d,n++}for(var p=o-r;p!==o&&0===l[p];)p++;for(var f=new Uint8Array(i+(o-p)),m=i;p!==o;)f[m++]=l[p++];return f}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,i=0,r=0,o=t.length;r!==o&&0===t[r];)r++,n++;for(var c=(o-r)*l+1>>>0,u=new Uint8Array(c);r!==o;){for(var d=t[r],h=0,p=c-1;(0!==d||h<i)&&-1!==p;p--,h++)d+=256*u[p]>>>0,u[p]=d%s>>>0,d=d/s>>>0;if(0!==d)throw new Error("Non-zero carry");i=h,r++}for(var f=c-i;f!==c&&0===u[f];)f++;for(var m=a.repeat(n);f<c;++f)m+=e.charAt(u[f]);return m},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}},13550:function(e,t,n){!function(e,t){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(46601).Buffer}catch(e){}function a(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function c(e,t,n){var i=a(e,n);return n-1>=t&&(i|=a(e,n-1)<<4),i}function l(e,t,n,i){for(var r=0,o=Math.min(e.length,n),s=t;s<o;s++){var a=e.charCodeAt(s)-48;r*=i,r+=a>=49?a-49+10:a>=17?a-17+10:a}return r}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,n):(this._parseBase(e,t,r),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var o,s,a=0;if("be"===n)for(r=e.length-1,o=0;r>=0;r-=3)s=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(r=0,o=0;r<e.length;r+=3)s=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,o=0,s=0;if("be"===n)for(i=e.length-1;i>=t;i-=2)r=c(e,t,i)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)r=c(e,t,i)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var i=0,r=1;r<=67108863;r*=t)i++;i--,r=r/t|0;for(var o=e.length-n,s=o%i,a=Math.min(o,o-s)+n,c=0,u=n;u<a;u+=i)c=l(e,u,u+i,t),this.imuln(r),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var d=1;for(c=l(e,u,e.length,t),u=0;u<s;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(e,t,n){n.negative=t.negative^e.negative;var i=e.length+t.length|0;n.length=i,i=i-1|0;var r=0|e.words[0],o=0|t.words[0],s=r*o,a=67108863&s,c=s/67108864|0;n.words[0]=a;for(var l=1;l<i;l++){for(var u=c>>>26,d=67108863&c,h=Math.min(l,t.length-1),p=Math.max(0,l-e.length+1);p<=h;p++){var f=l-p|0;u+=(s=(r=0|e.words[f])*(o=0|t.words[p])+d)/67108864|0,d=67108863&s}n.words[l]=0|d,c=0|u}return 0!==c?n.words[l]=0|c:n.length--,n.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var r=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<r|o)).toString(16);n=0!=(o=a>>>24-r&16777215)||s!==this.length-1?u[6-c.length]+c+n:c+n,(r+=2)>=26&&(r-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var l=d[e],p=h[e];n="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modn(p).toString(e);n=(f=f.idivn(p)).isZero()?m+n:u[l-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return i(void 0!==s),this.toArrayLike(s,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var r=this.byteLength(),o=n||Math.max(1,r);i(r<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===t,l=new e(o),u=this.clone();if(c){for(a=0;!u.isZero();a++)s=u.andln(255),u.iushrn(8),l[a]=s;for(;a<o;a++)l[a]=0}else{for(a=0;a<o-r;a++)l[a]=0;for(a=0;!u.isZero();a++)s=u.andln(255),u.iushrn(8),l[o-a-1]=s}return l},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return i(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return i(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var i=0;i<n.length;i++)this.words[i]=t.words[i]^n.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return i(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return n>0&&(this.words[r]=~this.words[r]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var n=e/26|0,r=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<r:this.words[n]&~(1<<r),this.strip()},o.prototype.iadd=function(e){var t,n,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,i=e):(n=e,i=this);for(var r=0,o=0;o<i.length;o++)t=(0|n.words[o])+(0|i.words[o])+r,this.words[o]=67108863&t,r=t>>>26;for(;0!==r&&o<n.length;o++)t=(0|n.words[o])+r,this.words[o]=67108863&t,r=t>>>26;if(this.length=n.length,0!==r)this.words[this.length]=r,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,i,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(n=this,i=e):(n=e,i=this);for(var o=0,s=0;s<i.length;s++)o=(t=(0|n.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<n.length;s++)o=(t=(0|n.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,n){var i,r,o,s=e.words,a=t.words,c=n.words,l=0,u=0|s[0],d=8191&u,h=u>>>13,p=0|s[1],f=8191&p,m=p>>>13,g=0|s[2],v=8191&g,y=g>>>13,b=0|s[3],E=8191&b,S=b>>>13,w=0|s[4],_=8191&w,T=w>>>13,x=0|s[5],C=8191&x,I=x>>>13,k=0|s[6],M=8191&k,A=k>>>13,O=0|s[7],R=8191&O,L=O>>>13,D=0|s[8],N=8191&D,P=D>>>13,$=0|s[9],U=8191&$,B=$>>>13,F=0|a[0],j=8191&F,H=F>>>13,K=0|a[1],q=8191&K,V=K>>>13,G=0|a[2],W=8191&G,z=G>>>13,Y=0|a[3],X=8191&Y,J=Y>>>13,Q=0|a[4],Z=8191&Q,ee=Q>>>13,te=0|a[5],ne=8191&te,ie=te>>>13,re=0|a[6],oe=8191&re,se=re>>>13,ae=0|a[7],ce=8191&ae,le=ae>>>13,ue=0|a[8],de=8191&ue,he=ue>>>13,pe=0|a[9],fe=8191&pe,me=pe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(l+(i=Math.imul(d,j))|0)+((8191&(r=(r=Math.imul(d,H))+Math.imul(h,j)|0))<<13)|0;l=((o=Math.imul(h,H))+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(f,j),r=(r=Math.imul(f,H))+Math.imul(m,j)|0,o=Math.imul(m,H);var ve=(l+(i=i+Math.imul(d,q)|0)|0)+((8191&(r=(r=r+Math.imul(d,V)|0)+Math.imul(h,q)|0))<<13)|0;l=((o=o+Math.imul(h,V)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(v,j),r=(r=Math.imul(v,H))+Math.imul(y,j)|0,o=Math.imul(y,H),i=i+Math.imul(f,q)|0,r=(r=r+Math.imul(f,V)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,V)|0;var ye=(l+(i=i+Math.imul(d,W)|0)|0)+((8191&(r=(r=r+Math.imul(d,z)|0)+Math.imul(h,W)|0))<<13)|0;l=((o=o+Math.imul(h,z)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(E,j),r=(r=Math.imul(E,H))+Math.imul(S,j)|0,o=Math.imul(S,H),i=i+Math.imul(v,q)|0,r=(r=r+Math.imul(v,V)|0)+Math.imul(y,q)|0,o=o+Math.imul(y,V)|0,i=i+Math.imul(f,W)|0,r=(r=r+Math.imul(f,z)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,z)|0;var be=(l+(i=i+Math.imul(d,X)|0)|0)+((8191&(r=(r=r+Math.imul(d,J)|0)+Math.imul(h,X)|0))<<13)|0;l=((o=o+Math.imul(h,J)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(_,j),r=(r=Math.imul(_,H))+Math.imul(T,j)|0,o=Math.imul(T,H),i=i+Math.imul(E,q)|0,r=(r=r+Math.imul(E,V)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,V)|0,i=i+Math.imul(v,W)|0,r=(r=r+Math.imul(v,z)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,z)|0,i=i+Math.imul(f,X)|0,r=(r=r+Math.imul(f,J)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,J)|0;var Ee=(l+(i=i+Math.imul(d,Z)|0)|0)+((8191&(r=(r=r+Math.imul(d,ee)|0)+Math.imul(h,Z)|0))<<13)|0;l=((o=o+Math.imul(h,ee)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(C,j),r=(r=Math.imul(C,H))+Math.imul(I,j)|0,o=Math.imul(I,H),i=i+Math.imul(_,q)|0,r=(r=r+Math.imul(_,V)|0)+Math.imul(T,q)|0,o=o+Math.imul(T,V)|0,i=i+Math.imul(E,W)|0,r=(r=r+Math.imul(E,z)|0)+Math.imul(S,W)|0,o=o+Math.imul(S,z)|0,i=i+Math.imul(v,X)|0,r=(r=r+Math.imul(v,J)|0)+Math.imul(y,X)|0,o=o+Math.imul(y,J)|0,i=i+Math.imul(f,Z)|0,r=(r=r+Math.imul(f,ee)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,ee)|0;var Se=(l+(i=i+Math.imul(d,ne)|0)|0)+((8191&(r=(r=r+Math.imul(d,ie)|0)+Math.imul(h,ne)|0))<<13)|0;l=((o=o+Math.imul(h,ie)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(M,j),r=(r=Math.imul(M,H))+Math.imul(A,j)|0,o=Math.imul(A,H),i=i+Math.imul(C,q)|0,r=(r=r+Math.imul(C,V)|0)+Math.imul(I,q)|0,o=o+Math.imul(I,V)|0,i=i+Math.imul(_,W)|0,r=(r=r+Math.imul(_,z)|0)+Math.imul(T,W)|0,o=o+Math.imul(T,z)|0,i=i+Math.imul(E,X)|0,r=(r=r+Math.imul(E,J)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,J)|0,i=i+Math.imul(v,Z)|0,r=(r=r+Math.imul(v,ee)|0)+Math.imul(y,Z)|0,o=o+Math.imul(y,ee)|0,i=i+Math.imul(f,ne)|0,r=(r=r+Math.imul(f,ie)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,ie)|0;var we=(l+(i=i+Math.imul(d,oe)|0)|0)+((8191&(r=(r=r+Math.imul(d,se)|0)+Math.imul(h,oe)|0))<<13)|0;l=((o=o+Math.imul(h,se)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(R,j),r=(r=Math.imul(R,H))+Math.imul(L,j)|0,o=Math.imul(L,H),i=i+Math.imul(M,q)|0,r=(r=r+Math.imul(M,V)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,V)|0,i=i+Math.imul(C,W)|0,r=(r=r+Math.imul(C,z)|0)+Math.imul(I,W)|0,o=o+Math.imul(I,z)|0,i=i+Math.imul(_,X)|0,r=(r=r+Math.imul(_,J)|0)+Math.imul(T,X)|0,o=o+Math.imul(T,J)|0,i=i+Math.imul(E,Z)|0,r=(r=r+Math.imul(E,ee)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,ee)|0,i=i+Math.imul(v,ne)|0,r=(r=r+Math.imul(v,ie)|0)+Math.imul(y,ne)|0,o=o+Math.imul(y,ie)|0,i=i+Math.imul(f,oe)|0,r=(r=r+Math.imul(f,se)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,se)|0;var _e=(l+(i=i+Math.imul(d,ce)|0)|0)+((8191&(r=(r=r+Math.imul(d,le)|0)+Math.imul(h,ce)|0))<<13)|0;l=((o=o+Math.imul(h,le)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(N,j),r=(r=Math.imul(N,H))+Math.imul(P,j)|0,o=Math.imul(P,H),i=i+Math.imul(R,q)|0,r=(r=r+Math.imul(R,V)|0)+Math.imul(L,q)|0,o=o+Math.imul(L,V)|0,i=i+Math.imul(M,W)|0,r=(r=r+Math.imul(M,z)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,z)|0,i=i+Math.imul(C,X)|0,r=(r=r+Math.imul(C,J)|0)+Math.imul(I,X)|0,o=o+Math.imul(I,J)|0,i=i+Math.imul(_,Z)|0,r=(r=r+Math.imul(_,ee)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,ee)|0,i=i+Math.imul(E,ne)|0,r=(r=r+Math.imul(E,ie)|0)+Math.imul(S,ne)|0,o=o+Math.imul(S,ie)|0,i=i+Math.imul(v,oe)|0,r=(r=r+Math.imul(v,se)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,se)|0,i=i+Math.imul(f,ce)|0,r=(r=r+Math.imul(f,le)|0)+Math.imul(m,ce)|0,o=o+Math.imul(m,le)|0;var Te=(l+(i=i+Math.imul(d,de)|0)|0)+((8191&(r=(r=r+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;l=((o=o+Math.imul(h,he)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(U,j),r=(r=Math.imul(U,H))+Math.imul(B,j)|0,o=Math.imul(B,H),i=i+Math.imul(N,q)|0,r=(r=r+Math.imul(N,V)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,V)|0,i=i+Math.imul(R,W)|0,r=(r=r+Math.imul(R,z)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,z)|0,i=i+Math.imul(M,X)|0,r=(r=r+Math.imul(M,J)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,J)|0,i=i+Math.imul(C,Z)|0,r=(r=r+Math.imul(C,ee)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,ee)|0,i=i+Math.imul(_,ne)|0,r=(r=r+Math.imul(_,ie)|0)+Math.imul(T,ne)|0,o=o+Math.imul(T,ie)|0,i=i+Math.imul(E,oe)|0,r=(r=r+Math.imul(E,se)|0)+Math.imul(S,oe)|0,o=o+Math.imul(S,se)|0,i=i+Math.imul(v,ce)|0,r=(r=r+Math.imul(v,le)|0)+Math.imul(y,ce)|0,o=o+Math.imul(y,le)|0,i=i+Math.imul(f,de)|0,r=(r=r+Math.imul(f,he)|0)+Math.imul(m,de)|0,o=o+Math.imul(m,he)|0;var xe=(l+(i=i+Math.imul(d,fe)|0)|0)+((8191&(r=(r=r+Math.imul(d,me)|0)+Math.imul(h,fe)|0))<<13)|0;l=((o=o+Math.imul(h,me)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(U,q),r=(r=Math.imul(U,V))+Math.imul(B,q)|0,o=Math.imul(B,V),i=i+Math.imul(N,W)|0,r=(r=r+Math.imul(N,z)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,z)|0,i=i+Math.imul(R,X)|0,r=(r=r+Math.imul(R,J)|0)+Math.imul(L,X)|0,o=o+Math.imul(L,J)|0,i=i+Math.imul(M,Z)|0,r=(r=r+Math.imul(M,ee)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,ee)|0,i=i+Math.imul(C,ne)|0,r=(r=r+Math.imul(C,ie)|0)+Math.imul(I,ne)|0,o=o+Math.imul(I,ie)|0,i=i+Math.imul(_,oe)|0,r=(r=r+Math.imul(_,se)|0)+Math.imul(T,oe)|0,o=o+Math.imul(T,se)|0,i=i+Math.imul(E,ce)|0,r=(r=r+Math.imul(E,le)|0)+Math.imul(S,ce)|0,o=o+Math.imul(S,le)|0,i=i+Math.imul(v,de)|0,r=(r=r+Math.imul(v,he)|0)+Math.imul(y,de)|0,o=o+Math.imul(y,he)|0;var Ce=(l+(i=i+Math.imul(f,fe)|0)|0)+((8191&(r=(r=r+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;l=((o=o+Math.imul(m,me)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(U,W),r=(r=Math.imul(U,z))+Math.imul(B,W)|0,o=Math.imul(B,z),i=i+Math.imul(N,X)|0,r=(r=r+Math.imul(N,J)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,J)|0,i=i+Math.imul(R,Z)|0,r=(r=r+Math.imul(R,ee)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,ee)|0,i=i+Math.imul(M,ne)|0,r=(r=r+Math.imul(M,ie)|0)+Math.imul(A,ne)|0,o=o+Math.imul(A,ie)|0,i=i+Math.imul(C,oe)|0,r=(r=r+Math.imul(C,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,i=i+Math.imul(_,ce)|0,r=(r=r+Math.imul(_,le)|0)+Math.imul(T,ce)|0,o=o+Math.imul(T,le)|0,i=i+Math.imul(E,de)|0,r=(r=r+Math.imul(E,he)|0)+Math.imul(S,de)|0,o=o+Math.imul(S,he)|0;var Ie=(l+(i=i+Math.imul(v,fe)|0)|0)+((8191&(r=(r=r+Math.imul(v,me)|0)+Math.imul(y,fe)|0))<<13)|0;l=((o=o+Math.imul(y,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(U,X),r=(r=Math.imul(U,J))+Math.imul(B,X)|0,o=Math.imul(B,J),i=i+Math.imul(N,Z)|0,r=(r=r+Math.imul(N,ee)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,ee)|0,i=i+Math.imul(R,ne)|0,r=(r=r+Math.imul(R,ie)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,ie)|0,i=i+Math.imul(M,oe)|0,r=(r=r+Math.imul(M,se)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,se)|0,i=i+Math.imul(C,ce)|0,r=(r=r+Math.imul(C,le)|0)+Math.imul(I,ce)|0,o=o+Math.imul(I,le)|0,i=i+Math.imul(_,de)|0,r=(r=r+Math.imul(_,he)|0)+Math.imul(T,de)|0,o=o+Math.imul(T,he)|0;var ke=(l+(i=i+Math.imul(E,fe)|0)|0)+((8191&(r=(r=r+Math.imul(E,me)|0)+Math.imul(S,fe)|0))<<13)|0;l=((o=o+Math.imul(S,me)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(U,Z),r=(r=Math.imul(U,ee))+Math.imul(B,Z)|0,o=Math.imul(B,ee),i=i+Math.imul(N,ne)|0,r=(r=r+Math.imul(N,ie)|0)+Math.imul(P,ne)|0,o=o+Math.imul(P,ie)|0,i=i+Math.imul(R,oe)|0,r=(r=r+Math.imul(R,se)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,se)|0,i=i+Math.imul(M,ce)|0,r=(r=r+Math.imul(M,le)|0)+Math.imul(A,ce)|0,o=o+Math.imul(A,le)|0,i=i+Math.imul(C,de)|0,r=(r=r+Math.imul(C,he)|0)+Math.imul(I,de)|0,o=o+Math.imul(I,he)|0;var Me=(l+(i=i+Math.imul(_,fe)|0)|0)+((8191&(r=(r=r+Math.imul(_,me)|0)+Math.imul(T,fe)|0))<<13)|0;l=((o=o+Math.imul(T,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(U,ne),r=(r=Math.imul(U,ie))+Math.imul(B,ne)|0,o=Math.imul(B,ie),i=i+Math.imul(N,oe)|0,r=(r=r+Math.imul(N,se)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,se)|0,i=i+Math.imul(R,ce)|0,r=(r=r+Math.imul(R,le)|0)+Math.imul(L,ce)|0,o=o+Math.imul(L,le)|0,i=i+Math.imul(M,de)|0,r=(r=r+Math.imul(M,he)|0)+Math.imul(A,de)|0,o=o+Math.imul(A,he)|0;var Ae=(l+(i=i+Math.imul(C,fe)|0)|0)+((8191&(r=(r=r+Math.imul(C,me)|0)+Math.imul(I,fe)|0))<<13)|0;l=((o=o+Math.imul(I,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(U,oe),r=(r=Math.imul(U,se))+Math.imul(B,oe)|0,o=Math.imul(B,se),i=i+Math.imul(N,ce)|0,r=(r=r+Math.imul(N,le)|0)+Math.imul(P,ce)|0,o=o+Math.imul(P,le)|0,i=i+Math.imul(R,de)|0,r=(r=r+Math.imul(R,he)|0)+Math.imul(L,de)|0,o=o+Math.imul(L,he)|0;var Oe=(l+(i=i+Math.imul(M,fe)|0)|0)+((8191&(r=(r=r+Math.imul(M,me)|0)+Math.imul(A,fe)|0))<<13)|0;l=((o=o+Math.imul(A,me)|0)+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(U,ce),r=(r=Math.imul(U,le))+Math.imul(B,ce)|0,o=Math.imul(B,le),i=i+Math.imul(N,de)|0,r=(r=r+Math.imul(N,he)|0)+Math.imul(P,de)|0,o=o+Math.imul(P,he)|0;var Re=(l+(i=i+Math.imul(R,fe)|0)|0)+((8191&(r=(r=r+Math.imul(R,me)|0)+Math.imul(L,fe)|0))<<13)|0;l=((o=o+Math.imul(L,me)|0)+(r>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(U,de),r=(r=Math.imul(U,he))+Math.imul(B,de)|0,o=Math.imul(B,he);var Le=(l+(i=i+Math.imul(N,fe)|0)|0)+((8191&(r=(r=r+Math.imul(N,me)|0)+Math.imul(P,fe)|0))<<13)|0;l=((o=o+Math.imul(P,me)|0)+(r>>>13)|0)+(Le>>>26)|0,Le&=67108863;var De=(l+(i=Math.imul(U,fe))|0)+((8191&(r=(r=Math.imul(U,me))+Math.imul(B,fe)|0))<<13)|0;return l=((o=Math.imul(B,me))+(r>>>13)|0)+(De>>>26)|0,De&=67108863,c[0]=ge,c[1]=ve,c[2]=ye,c[3]=be,c[4]=Ee,c[5]=Se,c[6]=we,c[7]=_e,c[8]=Te,c[9]=xe,c[10]=Ce,c[11]=Ie,c[12]=ke,c[13]=Me,c[14]=Ae,c[15]=Oe,c[16]=Re,c[17]=Le,c[18]=De,0!==l&&(c[19]=l,n.length++),n};function m(e,t,n){return(new g).mulp(e,t,n)}function g(e,t){this.x=e,this.y=t}Math.imul||(f=p),o.prototype.mulTo=function(e,t){var n,i=this.length+e.length;return n=10===this.length&&10===e.length?f(this,e,t):i<63?p(this,e,t):i<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var i=0,r=0,o=0;o<n.length-1;o++){var s=r;r=0;for(var a=67108863&i,c=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=c;l++){var u=o-l,d=(0|e.words[u])*(0|t.words[l]),h=67108863&d;a=67108863&(h=h+a|0),r+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}n.words[o]=a,i=s,s=r}return 0!==i?n.words[o]=i:n.length--,n.strip()}(this,e,t):m(this,e,t),n},g.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,n,e);return t},g.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var i=0,r=0;r<t;r++)i|=(1&e)<<t-r-1,e>>=1;return i},g.prototype.permute=function(e,t,n,i,r,o){for(var s=0;s<o;s++)i[s]=t[e[s]],r[s]=n[e[s]]},g.prototype.transform=function(e,t,n,i,r,o){this.permute(o,e,t,n,i,r);for(var s=1;s<r;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),u=0;u<r;u+=a)for(var d=c,h=l,p=0;p<s;p++){var f=n[u+p],m=i[u+p],g=n[u+p+s],v=i[u+p+s],y=d*g-h*v;v=d*v+h*g,g=y,n[u+p]=f+g,i[u+p]=m+v,n[u+p+s]=f-g,i[u+p+s]=m-v,p!==a&&(y=c*d-l*h,h=c*h+l*d,d=y)}},g.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),i=1&n,r=0;for(n=n/2|0;n;n>>>=1)r++;return 1<<r+1+i},g.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var i=0;i<n/2;i++){var r=e[i];e[i]=e[n-i-1],e[n-i-1]=r,r=t[i],t[i]=-t[n-i-1],t[n-i-1]=-r}},g.prototype.normalize13b=function(e,t){for(var n=0,i=0;i<t/2;i++){var r=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+n;e[i]=67108863&r,n=r<67108864?0:r/67108864|0}return e},g.prototype.convert13b=function(e,t,n,r){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<r;++s)n[s]=0;i(0===o),i(0==(-8192&o))},g.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},g.prototype.mulp=function(e,t,n){var i=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(i),o=this.stub(i),s=new Array(i),a=new Array(i),c=new Array(i),l=new Array(i),u=new Array(i),d=new Array(i),h=n.words;h.length=i,this.convert13b(e.words,e.length,s,i),this.convert13b(t.words,t.length,l,i),this.transform(s,o,a,c,i,r),this.transform(l,o,u,d,i,r);for(var p=0;p<i;p++){var f=a[p]*u[p]-c[p]*d[p];c[p]=a[p]*d[p]+c[p]*u[p],a[p]=f}return this.conjugate(a,c,i),this.transform(a,c,h,o,i,r),this.conjugate(h,o,i),this.normalize13b(h,i),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),m(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){i("number"==typeof e),i(e<67108864);for(var t=0,n=0;n<this.length;n++){var r=(0|this.words[n])*e,o=(67108863&r)+(67108863&t);t>>=26,t+=r/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var i=n/26|0,r=n%26;t[n]=(e.words[i]&1<<r)>>>r}return t}(e);if(0===t.length)return new o(1);for(var n=this,i=0;i<t.length&&0===t[i];i++,n=n.sqr());if(++i<t.length)for(var r=n.sqr();i<t.length;i++,r=r.sqr())0!==t[i]&&(n=n.mul(r));return n},o.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,n=e%26,r=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,c=(0|this.words[t])-a<<n;this.words[t]=c|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this.strip()},o.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var r;i("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,c=n;if(r-=s,r=Math.max(0,r),c){for(var l=0;l<s;l++)c.words[l]=this.words[l];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,l=0;l<this.length;l++)this.words[l]=this.words[l+s];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=r);l--){var d=0|this.words[l];this.words[l]=u<<26-o|d>>>o,u=d&a}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return i(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,r=1<<t;return!(this.length<=n||!(this.words[n]&r))},o.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return i("number"==typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var r,o,s=e.length+n;this._expand(s);var a=0;for(r=0;r<e.length;r++){o=(0|this.words[r+n])+a;var c=(0|e.words[r])*t;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[r+n]=67108863&o}for(;r<this.length-n;r++)a=(o=(0|this.words[r+n])+a)>>26,this.words[r+n]=67108863&o;if(0===a)return this.strip();for(i(-1===a),a=0,r=0;r<this.length;r++)a=(o=-(0|this.words[r])+a)>>26,this.words[r]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=(this.length,e.length),i=this.clone(),r=e,s=0|r.words[r.length-1];0!=(n=26-this._countBits(s))&&(r=r.ushln(n),i.iushln(n),s=0|r.words[r.length-1]);var a,c=i.length-r.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var u=i.clone()._ishlnsubmul(r,1,c);0===u.negative&&(i=u,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|i.words[r.length+d])+(0|i.words[r.length+d-1]);for(h=Math.min(h/s|0,67108863),i._ishlnsubmul(r,h,d);0!==i.negative;)h--,i.negative=0,i._ishlnsubmul(r,1,d),i.isZero()||(i.negative^=1);a&&(a.words[d]=h)}return a&&a.strip(),i.strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:a||null,mod:i}},o.prototype.divmod=function(e,t,n){return i(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(r=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:r,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(r=a.div.neg()),{div:r,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var r,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),r=e.andln(1),o=n.cmp(i);return o<0||1===r&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){i(e<=67108863);for(var t=(1<<26)%e,n=0,r=this.length-1;r>=0;r--)n=(t*n+(0|this.words[r]))%e;return n},o.prototype.idivn=function(e){i(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var r=(0|this.words[n])+67108864*t;this.words[n]=r/e|0,t=r%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new o(1),s=new o(0),a=new o(0),c=new o(1),l=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++l;for(var u=n.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0==(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(d)),r.iushrn(1),s.iushrn(1);for(var f=0,m=1;0==(n.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(u),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),r.isub(a),s.isub(c)):(n.isub(t),a.isub(r),c.isub(s))}return{a,b:c,gcd:n.iushln(l)}},o.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,s=new o(1),a=new o(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var l=0,u=1;0==(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,h=1;0==(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(r=0===t.cmpn(1)?s:a).cmpn(0)<0&&r.iadd(e),r},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var i=0;t.isEven()&&n.isEven();i++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var r=t.cmp(n);if(r<0){var o=t;t=n,n=o}else if(0===r||0===n.cmpn(1))break;t.isub(n)}return n.iushln(i)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,n=(e-t)/26,r=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=r,this;for(var o=r,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),i(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],r=0|e.words[n];if(i!==r){i<r?t=-1:i>r&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new _(e)},o.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function T(e){_.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},r(b,y),b.prototype.split=function(e,t){for(var n=4194303,i=Math.min(e.length,9),r=0;r<i;r++)t.words[r]=e.words[r];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,r=10;r<e.length;r++){var s=0|e.words[r];e.words[r-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,e.words[r-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var i=0|e.words[n];t+=977*i,e.words[n]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(E,y),r(S,y),r(w,y),w.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var i=19*(0|e.words[n])+t,r=67108863&i;i>>>=26,e.words[n]=r,t=i}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(v[e])return v[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new E;else if("p192"===e)t=new S;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new w}return v[e]=t,t},_.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},_.prototype._verify2=function(e,t){i(0==(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},_.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},_.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},_.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},_.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},_.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},_.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},_.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},_.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},_.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},_.prototype.isqr=function(e){return this.imul(e,e.clone())},_.prototype.sqr=function(e){return this.mul(e,e)},_.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var r=this.m.subn(1),s=0;!r.isZero()&&0===r.andln(1);)s++,r.iushrn(1);i(!r.isZero());var a=new o(1).toRed(this),c=a.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new o(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var d=this.pow(u,r),h=this.pow(e,r.addn(1).iushrn(1)),p=this.pow(e,r),f=s;0!==p.cmp(a);){for(var m=p,g=0;0!==m.cmp(a);g++)m=m.redSqr();i(g<f);var v=this.pow(d,new o(1).iushln(f-g-1));h=h.redMul(v),d=v.redSqr(),p=p.redMul(d),f=g}return h},_.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},_.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var r=n[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],u=c-1;u>=0;u--){var d=l>>u&1;r!==n[0]&&(r=this.sqr(r)),0!==d||0!==s?(s<<=1,s|=d,(4==++a||0===i&&0===u)&&(r=this.mul(r,n[s]),a=0,s=0)):a=0}c=26}return r},_.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},_.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new T(e)},r(T,_),T.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},T.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},T.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),o=r;return r.cmp(this.m)>=0?o=r.isub(this.m):r.cmpn(0)<0&&(o=r.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),s=r;return r.cmp(this.m)>=0?s=r.isub(this.m):r.cmpn(0)<0&&(s=r.iadd(this.m)),s._forceRed(this)},T.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=n.nmd(e),this)},29931:(e,t,n)=>{var i;function r(e){this.rand=e}if(e.exports=function(e){return i||(i=new r(null)),i.generate(e)},e.exports.Rand=r,r.prototype.generate=function(e){return this._rand(e)},r.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?r.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?r.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(r.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=n(89214);if("function"!=typeof o.randomBytes)throw new Error("Not supported");r.prototype._rand=function(e){return o.randomBytes(e)}}catch(e){}},74497:(e,t,n)=>{var i=n(89509).Buffer;function r(e){i.isBuffer(e)||(e=i.from(e));for(var t=e.length/4|0,n=new Array(t),r=0;r<t;r++)n[r]=e.readUInt32BE(4*r);return n}function o(e){for(;0<e.length;e++)e[0]=0}function s(e,t,n,i,r){for(var o,s,a,c,l=n[0],u=n[1],d=n[2],h=n[3],p=e[0]^t[0],f=e[1]^t[1],m=e[2]^t[2],g=e[3]^t[3],v=4,y=1;y<r;y++)o=l[p>>>24]^u[f>>>16&255]^d[m>>>8&255]^h[255&g]^t[v++],s=l[f>>>24]^u[m>>>16&255]^d[g>>>8&255]^h[255&p]^t[v++],a=l[m>>>24]^u[g>>>16&255]^d[p>>>8&255]^h[255&f]^t[v++],c=l[g>>>24]^u[p>>>16&255]^d[f>>>8&255]^h[255&m]^t[v++],p=o,f=s,m=a,g=c;return o=(i[p>>>24]<<24|i[f>>>16&255]<<16|i[m>>>8&255]<<8|i[255&g])^t[v++],s=(i[f>>>24]<<24|i[m>>>16&255]<<16|i[g>>>8&255]<<8|i[255&p])^t[v++],a=(i[m>>>24]<<24|i[g>>>16&255]<<16|i[p>>>8&255]<<8|i[255&f])^t[v++],c=(i[g>>>24]<<24|i[p>>>16&255]<<16|i[f>>>8&255]<<8|i[255&m])^t[v++],[o>>>=0,s>>>=0,a>>>=0,c>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],c=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var n=[],i=[],r=[[],[],[],[]],o=[[],[],[],[]],s=0,a=0,c=0;c<256;++c){var l=a^a<<1^a<<2^a<<3^a<<4;l=l>>>8^255&l^99,n[s]=l,i[l]=s;var u=e[s],d=e[u],h=e[d],p=257*e[l]^16843008*l;r[0][s]=p<<24|p>>>8,r[1][s]=p<<16|p>>>16,r[2][s]=p<<8|p>>>24,r[3][s]=p,p=16843009*h^65537*d^257*u^16843008*s,o[0][l]=p<<24|p>>>8,o[1][l]=p<<16|p>>>16,o[2][l]=p<<8|p>>>24,o[3][l]=p,0===s?s=a=1:(s=u^e[e[e[h^u]]],a^=e[e[a]])}return{SBOX:n,INV_SBOX:i,SUB_MIX:r,INV_SUB_MIX:o}}();function l(e){this._key=r(e),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var e=this._key,t=e.length,n=t+6,i=4*(n+1),r=[],o=0;o<t;o++)r[o]=e[o];for(o=t;o<i;o++){var s=r[o-1];o%t==0?(s=s<<8|s>>>24,s=c.SBOX[s>>>24]<<24|c.SBOX[s>>>16&255]<<16|c.SBOX[s>>>8&255]<<8|c.SBOX[255&s],s^=a[o/t|0]<<24):t>6&&o%t==4&&(s=c.SBOX[s>>>24]<<24|c.SBOX[s>>>16&255]<<16|c.SBOX[s>>>8&255]<<8|c.SBOX[255&s]),r[o]=r[o-t]^s}for(var l=[],u=0;u<i;u++){var d=i-u,h=r[d-(u%4?0:4)];l[u]=u<4||d<=4?h:c.INV_SUB_MIX[0][c.SBOX[h>>>24]]^c.INV_SUB_MIX[1][c.SBOX[h>>>16&255]]^c.INV_SUB_MIX[2][c.SBOX[h>>>8&255]]^c.INV_SUB_MIX[3][c.SBOX[255&h]]}this._nRounds=n,this._keySchedule=r,this._invKeySchedule=l},l.prototype.encryptBlockRaw=function(e){return s(e=r(e),this._keySchedule,c.SUB_MIX,c.SBOX,this._nRounds)},l.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),n=i.allocUnsafe(16);return n.writeUInt32BE(t[0],0),n.writeUInt32BE(t[1],4),n.writeUInt32BE(t[2],8),n.writeUInt32BE(t[3],12),n},l.prototype.decryptBlock=function(e){var t=(e=r(e))[1];e[1]=e[3],e[3]=t;var n=s(e,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX,this._nRounds),o=i.allocUnsafe(16);return o.writeUInt32BE(n[0],0),o.writeUInt32BE(n[3],4),o.writeUInt32BE(n[2],8),o.writeUInt32BE(n[1],12),o},l.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},e.exports.AES=l},62422:(e,t,n)=>{var i=n(74497),r=n(89509).Buffer,o=n(71027),s=n(35717),a=n(83288),c=n(67295),l=n(20685);function u(e,t,n,s){o.call(this);var c=r.alloc(4,0);this._cipher=new i.AES(t);var u=this._cipher.encryptBlock(c);this._ghash=new a(u),n=function(e,t,n){if(12===t.length)return e._finID=r.concat([t,r.from([0,0,0,1])]),r.concat([t,r.from([0,0,0,2])]);var i=new a(n),o=t.length,s=o%16;i.update(t),s&&(s=16-s,i.update(r.alloc(s,0))),i.update(r.alloc(8,0));var c=8*o,u=r.alloc(8);u.writeUIntBE(c,0,8),i.update(u),e._finID=i.state;var d=r.from(e._finID);return l(d),d}(this,n,u),this._prev=r.from(n),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}s(u,o),u.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=r.alloc(t,0),this._ghash.update(t))}this._called=!0;var n=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(n),this._len+=e.length,n},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var n=0;e.length!==t.length&&n++;for(var i=Math.min(e.length,t.length),r=0;r<i;++r)n+=e[r]^t[r];return n}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!r.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},u.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=u},44696:(e,t,n)=>{var i=n(71494),r=n(66193),o=n(44946);t.createCipher=t.Cipher=i.createCipher,t.createCipheriv=t.Cipheriv=i.createCipheriv,t.createDecipher=t.Decipher=r.createDecipher,t.createDecipheriv=t.Decipheriv=r.createDecipheriv,t.listCiphers=t.getCiphers=function(){return Object.keys(o)}},66193:(e,t,n)=>{var i=n(62422),r=n(89509).Buffer,o=n(45),s=n(25969),a=n(71027),c=n(74497),l=n(13048);function u(e,t,n){a.call(this),this._cache=new d,this._last=void 0,this._cipher=new c.AES(t),this._prev=r.from(n),this._mode=e,this._autopadding=!0}function d(){this.cache=r.allocUnsafe(0)}function h(e,t,n){var a=o[e.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=r.from(n)),"GCM"!==a.mode&&n.length!==a.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof t&&(t=r.from(t)),t.length!==a.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===a.type?new s(a.module,t,n,!0):"auth"===a.type?new i(a.module,t,n,!0):new u(a.module,t,n)}n(35717)(u,a),u.prototype._update=function(e){var t,n;this._cache.add(e);for(var i=[];t=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,t),i.push(n);return r.concat(i)},u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");for(var n=-1;++n<t;)if(e[n+(16-t)]!==t)throw new Error("unable to decrypt data");if(16!==t)return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},d.prototype.add=function(e){this.cache=r.concat([this.cache,e])},d.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=function(e,t){var n=o[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=l(t,!1,n.key,n.iv);return h(e,i.key,i.iv)},t.createDecipheriv=h},71494:(e,t,n)=>{var i=n(45),r=n(62422),o=n(89509).Buffer,s=n(25969),a=n(71027),c=n(74497),l=n(13048);function u(e,t,n){a.call(this),this._cache=new h,this._cipher=new c.AES(t),this._prev=o.from(n),this._mode=e,this._autopadding=!0}n(35717)(u,a),u.prototype._update=function(e){var t,n;this._cache.add(e);for(var i=[];t=this._cache.get();)n=this._mode.encrypt(this,t),i.push(n);return o.concat(i)};var d=o.alloc(16,16);function h(){this.cache=o.allocUnsafe(0)}function p(e,t,n){var a=i[e.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=o.from(t)),t.length!==a.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof n&&(n=o.from(n)),"GCM"!==a.mode&&n.length!==a.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===a.type?new s(a.module,t,n):"auth"===a.type?new r(a.module,t,n):new u(a.module,t,n)}u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},h.prototype.add=function(e){this.cache=o.concat([this.cache,e])},h.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},h.prototype.flush=function(){for(var e=16-this.cache.length,t=o.allocUnsafe(e),n=-1;++n<e;)t.writeUInt8(e,n);return o.concat([this.cache,t])},t.createCipheriv=p,t.createCipher=function(e,t){var n=i[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=l(t,!1,n.key,n.iv);return p(e,r.key,r.iv)}},83288:(e,t,n)=>{var i=n(89509).Buffer,r=i.alloc(16,0);function o(e){var t=i.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function s(e){this.h=e,this.state=i.alloc(16,0),this.cache=i.allocUnsafe(0)}s.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},s.prototype._multiply=function(){for(var e,t,n,i=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],r=[0,0,0,0],s=-1;++s<128;){for(0!=(this.state[~~(s/8)]&1<<7-s%8)&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),n=0!=(1&i[3]),t=3;t>0;t--)i[t]=i[t]>>>1|(1&i[t-1])<<31;i[0]=i[0]>>>1,n&&(i[0]=i[0]^225<<24)}this.state=o(r)},s.prototype.update=function(e){var t;for(this.cache=i.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},s.prototype.final=function(e,t){return this.cache.length&&this.ghash(i.concat([this.cache,r],16)),this.ghash(o([0,e,0,t])),this.state},e.exports=s},20685:e=>{e.exports=function(e){for(var t,n=e.length;n--;){if(255!==(t=e.readUInt8(n))){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}},25292:(e,t,n)=>{var i=n(67295);t.encrypt=function(e,t){var n=i(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},t.decrypt=function(e,t){var n=e._prev;e._prev=t;var r=e._cipher.decryptBlock(t);return i(r,n)}},86311:(e,t,n)=>{var i=n(89509).Buffer,r=n(67295);function o(e,t,n){var o=t.length,s=r(t,e._cache);return e._cache=e._cache.slice(o),e._prev=i.concat([e._prev,n?t:s]),s}t.encrypt=function(e,t,n){for(var r,s=i.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=i.allocUnsafe(0)),!(e._cache.length<=t.length)){s=i.concat([s,o(e,t,n)]);break}r=e._cache.length,s=i.concat([s,o(e,t.slice(0,r),n)]),t=t.slice(r)}return s}},21510:(e,t,n)=>{var i=n(89509).Buffer;function r(e,t,n){for(var i,r,s=-1,a=0;++s<8;)i=t&1<<7-s?128:0,a+=(128&(r=e._cipher.encryptBlock(e._prev)[0]^i))>>s%8,e._prev=o(e._prev,n?i:r);return a}function o(e,t){var n=e.length,r=-1,o=i.allocUnsafe(e.length);for(e=i.concat([e,i.from([t])]);++r<n;)o[r]=e[r]<<1|e[r+1]>>7;return o}t.encrypt=function(e,t,n){for(var o=t.length,s=i.allocUnsafe(o),a=-1;++a<o;)s[a]=r(e,t[a],n);return s}},71964:(e,t,n)=>{var i=n(89509).Buffer;function r(e,t,n){var r=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=i.concat([e._prev.slice(1),i.from([n?t:r])]),r}t.encrypt=function(e,t,n){for(var o=t.length,s=i.allocUnsafe(o),a=-1;++a<o;)s[a]=r(e,t[a],n);return s}},96009:(e,t,n)=>{var i=n(67295),r=n(89509).Buffer,o=n(20685);function s(e){var t=e._cipher.encryptBlockRaw(e._prev);return o(e._prev),t}t.encrypt=function(e,t){var n=Math.ceil(t.length/16),o=e._cache.length;e._cache=r.concat([e._cache,r.allocUnsafe(16*n)]);for(var a=0;a<n;a++){var c=s(e),l=o+16*a;e._cache.writeUInt32BE(c[0],l+0),e._cache.writeUInt32BE(c[1],l+4),e._cache.writeUInt32BE(c[2],l+8),e._cache.writeUInt32BE(c[3],l+12)}var u=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),i(t,u)}},11084:(e,t)=>{t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},45:(e,t,n)=>{var i={ECB:n(11084),CBC:n(25292),CFB:n(86311),CFB8:n(71964),CFB1:n(21510),OFB:n(18861),CTR:n(96009),GCM:n(96009)},r=n(44946);for(var o in r)r[o].module=i[r[o].mode];e.exports=r},18861:(e,t,n)=>{var i=n(48764).Buffer,r=n(67295);function o(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}t.encrypt=function(e,t){for(;e._cache.length<t.length;)e._cache=i.concat([e._cache,o(e)]);var n=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),r(t,n)}},25969:(e,t,n)=>{var i=n(74497),r=n(89509).Buffer,o=n(71027);function s(e,t,n,s){o.call(this),this._cipher=new i.AES(t),this._prev=r.from(n),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=s,this._mode=e}n(35717)(s,o),s.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},e.exports=s},53614:(e,t,n)=>{var i=n(47667),r=n(44696),o=n(45),s=n(99715),a=n(13048);function c(e,t,n){if(e=e.toLowerCase(),o[e])return r.createCipheriv(e,t,n);if(s[e])return new i({key:t,iv:n,mode:e});throw new TypeError("invalid suite type")}function l(e,t,n){if(e=e.toLowerCase(),o[e])return r.createDecipheriv(e,t,n);if(s[e])return new i({key:t,iv:n,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}t.createCipher=t.Cipher=function(e,t){var n,i;if(e=e.toLowerCase(),o[e])n=o[e].key,i=o[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");n=8*s[e].key,i=s[e].iv}var r=a(t,!1,n,i);return c(e,r.key,r.iv)},t.createCipheriv=t.Cipheriv=c,t.createDecipher=t.Decipher=function(e,t){var n,i;if(e=e.toLowerCase(),o[e])n=o[e].key,i=o[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");n=8*s[e].key,i=s[e].iv}var r=a(t,!1,n,i);return l(e,r.key,r.iv)},t.createDecipheriv=t.Decipheriv=l,t.listCiphers=t.getCiphers=function(){return Object.keys(s).concat(r.getCiphers())}},47667:(e,t,n)=>{var i=n(71027),r=n(15251),o=n(35717),s=n(89509).Buffer,a={"des-ede3-cbc":r.CBC.instantiate(r.EDE),"des-ede3":r.EDE,"des-ede-cbc":r.CBC.instantiate(r.EDE),"des-ede":r.EDE,"des-cbc":r.CBC.instantiate(r.DES),"des-ecb":r.DES};function c(e){i.call(this);var t,n=e.mode.toLowerCase(),r=a[n];t=e.decrypt?"decrypt":"encrypt";var o=e.key;s.isBuffer(o)||(o=s.from(o)),"des-ede"!==n&&"des-ede-cbc"!==n||(o=s.concat([o,o.slice(0,8)]));var c=e.iv;s.isBuffer(c)||(c=s.from(c)),this._des=r.create({key:o,iv:c,type:t})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],e.exports=c,o(c,i),c.prototype._update=function(e){return s.from(this._des.update(e))},c.prototype._final=function(){return s.from(this._des.final())}},99715:(e,t)=>{t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},23663:(e,t,n)=>{var i=n(48764).Buffer,r=n(43982),o=n(61798);function s(e){var t,n=e.modulus.byteLength();do{t=new r(o(n))}while(t.cmp(e.modulus)>=0||!t.umod(e.prime1)||!t.umod(e.prime2));return t}function a(e,t){var n=function(e){var t=s(e);return{blinder:t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(t),o=t.modulus.byteLength(),a=new r(e).mul(n.blinder).umod(t.modulus),c=a.toRed(r.mont(t.prime1)),l=a.toRed(r.mont(t.prime2)),u=t.coefficient,d=t.prime1,h=t.prime2,p=c.redPow(t.exponent1).fromRed(),f=l.redPow(t.exponent2).fromRed(),m=p.isub(f).imul(u).umod(d).imul(h);return f.iadd(m).imul(n.unblinder).umod(t.modulus).toArrayLike(i,"be",o)}a.getr=s,e.exports=a},43982:function(e,t,n){!function(e,t){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(71922).Buffer}catch(e){}function a(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void i(!1,"Invalid character in "+e)}function c(e,t,n){var i=a(e,n);return n-1>=t&&(i|=a(e,n-1)<<4),i}function l(e,t,n,r){for(var o=0,s=0,a=Math.min(e.length,n),c=t;c<a;c++){var l=e.charCodeAt(c)-48;o*=r,s=l>=49?l-49+10:l>=17?l-17+10:l,i(l>=0&&s<r,"Invalid character"),o+=s}return o}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,n):(this._parseBase(e,t,r),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var o,s,a=0;if("be"===n)for(r=e.length-1,o=0;r>=0;r-=3)s=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(r=0,o=0;r<e.length;r+=3)s=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},o.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,o=0,s=0;if("be"===n)for(i=e.length-1;i>=t;i-=2)r=c(e,t,i)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)r=c(e,t,i)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;this._strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var i=0,r=1;r<=67108863;r*=t)i++;i--,r=r/t|0;for(var o=e.length-n,s=o%i,a=Math.min(o,o-s)+n,c=0,u=n;u<a;u+=i)c=l(e,u,u+i,t),this.imuln(r),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var d=1;for(c=l(e,u,e.length,t),u=0;u<s;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){u(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(e){o.prototype.inspect=d}else o.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(e,t,n){n.negative=t.negative^e.negative;var i=e.length+t.length|0;n.length=i,i=i-1|0;var r=0|e.words[0],o=0|t.words[0],s=r*o,a=67108863&s,c=s/67108864|0;n.words[0]=a;for(var l=1;l<i;l++){for(var u=c>>>26,d=67108863&c,h=Math.min(l,t.length-1),p=Math.max(0,l-e.length+1);p<=h;p++){var f=l-p|0;u+=(s=(r=0|e.words[f])*(o=0|t.words[p])+d)/67108864|0,d=67108863&s}n.words[l]=0|d,c=0|u}return 0!==c?n.words[l]=0|c:n.length--,n._strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var r=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<r|o)).toString(16);n=0!=(o=a>>>24-r&16777215)||s!==this.length-1?h[6-c.length]+c+n:c+n,(r+=2)>=26&&(r-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var l=p[e],u=f[e];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modrn(u).toString(e);n=(d=d.idivn(u)).isZero()?m+n:h[l-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){this._strip();var r=this.byteLength(),o=n||Math.max(1,r);i(r<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,r),s},o.prototype._toArrayLikeLE=function(e,t){for(var n=0,i=0,r=0,o=0;r<this.length;r++){var s=this.words[r]<<o|i;e[n++]=255&s,n<e.length&&(e[n++]=s>>8&255),n<e.length&&(e[n++]=s>>16&255),6===o?(n<e.length&&(e[n++]=s>>24&255),i=0,o=0):(i=s>>>24,o+=2)}if(n<e.length)for(e[n++]=i;n<e.length;)e[n++]=0},o.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,i=0,r=0,o=0;r<this.length;r++){var s=this.words[r]<<o|i;e[n--]=255&s,n>=0&&(e[n--]=s>>8&255),n>=0&&(e[n--]=s>>16&255),6===o?(n>=0&&(e[n--]=s>>24&255),i=0,o=0):(i=s>>>24,o+=2)}if(n>=0)for(e[n--]=i;n>=0;)e[n--]=0},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return i(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return i(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var i=0;i<n.length;i++)this.words[i]=t.words[i]^n.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return i(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return n>0&&(this.words[r]=~this.words[r]&67108863>>26-n),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var n=e/26|0,r=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<r:this.words[n]&~(1<<r),this._strip()},o.prototype.iadd=function(e){var t,n,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,i=e):(n=e,i=this);for(var r=0,o=0;o<i.length;o++)t=(0|n.words[o])+(0|i.words[o])+r,this.words[o]=67108863&t,r=t>>>26;for(;0!==r&&o<n.length;o++)t=(0|n.words[o])+r,this.words[o]=67108863&t,r=t>>>26;if(this.length=n.length,0!==r)this.words[this.length]=r,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,i,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(n=this,i=e):(n=e,i=this);for(var o=0,s=0;s<i.length;s++)o=(t=(0|n.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<n.length;s++)o=(t=(0|n.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,n){var i,r,o,s=e.words,a=t.words,c=n.words,l=0,u=0|s[0],d=8191&u,h=u>>>13,p=0|s[1],f=8191&p,m=p>>>13,g=0|s[2],v=8191&g,y=g>>>13,b=0|s[3],E=8191&b,S=b>>>13,w=0|s[4],_=8191&w,T=w>>>13,x=0|s[5],C=8191&x,I=x>>>13,k=0|s[6],M=8191&k,A=k>>>13,O=0|s[7],R=8191&O,L=O>>>13,D=0|s[8],N=8191&D,P=D>>>13,$=0|s[9],U=8191&$,B=$>>>13,F=0|a[0],j=8191&F,H=F>>>13,K=0|a[1],q=8191&K,V=K>>>13,G=0|a[2],W=8191&G,z=G>>>13,Y=0|a[3],X=8191&Y,J=Y>>>13,Q=0|a[4],Z=8191&Q,ee=Q>>>13,te=0|a[5],ne=8191&te,ie=te>>>13,re=0|a[6],oe=8191&re,se=re>>>13,ae=0|a[7],ce=8191&ae,le=ae>>>13,ue=0|a[8],de=8191&ue,he=ue>>>13,pe=0|a[9],fe=8191&pe,me=pe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(l+(i=Math.imul(d,j))|0)+((8191&(r=(r=Math.imul(d,H))+Math.imul(h,j)|0))<<13)|0;l=((o=Math.imul(h,H))+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(f,j),r=(r=Math.imul(f,H))+Math.imul(m,j)|0,o=Math.imul(m,H);var ve=(l+(i=i+Math.imul(d,q)|0)|0)+((8191&(r=(r=r+Math.imul(d,V)|0)+Math.imul(h,q)|0))<<13)|0;l=((o=o+Math.imul(h,V)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(v,j),r=(r=Math.imul(v,H))+Math.imul(y,j)|0,o=Math.imul(y,H),i=i+Math.imul(f,q)|0,r=(r=r+Math.imul(f,V)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,V)|0;var ye=(l+(i=i+Math.imul(d,W)|0)|0)+((8191&(r=(r=r+Math.imul(d,z)|0)+Math.imul(h,W)|0))<<13)|0;l=((o=o+Math.imul(h,z)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(E,j),r=(r=Math.imul(E,H))+Math.imul(S,j)|0,o=Math.imul(S,H),i=i+Math.imul(v,q)|0,r=(r=r+Math.imul(v,V)|0)+Math.imul(y,q)|0,o=o+Math.imul(y,V)|0,i=i+Math.imul(f,W)|0,r=(r=r+Math.imul(f,z)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,z)|0;var be=(l+(i=i+Math.imul(d,X)|0)|0)+((8191&(r=(r=r+Math.imul(d,J)|0)+Math.imul(h,X)|0))<<13)|0;l=((o=o+Math.imul(h,J)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(_,j),r=(r=Math.imul(_,H))+Math.imul(T,j)|0,o=Math.imul(T,H),i=i+Math.imul(E,q)|0,r=(r=r+Math.imul(E,V)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,V)|0,i=i+Math.imul(v,W)|0,r=(r=r+Math.imul(v,z)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,z)|0,i=i+Math.imul(f,X)|0,r=(r=r+Math.imul(f,J)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,J)|0;var Ee=(l+(i=i+Math.imul(d,Z)|0)|0)+((8191&(r=(r=r+Math.imul(d,ee)|0)+Math.imul(h,Z)|0))<<13)|0;l=((o=o+Math.imul(h,ee)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(C,j),r=(r=Math.imul(C,H))+Math.imul(I,j)|0,o=Math.imul(I,H),i=i+Math.imul(_,q)|0,r=(r=r+Math.imul(_,V)|0)+Math.imul(T,q)|0,o=o+Math.imul(T,V)|0,i=i+Math.imul(E,W)|0,r=(r=r+Math.imul(E,z)|0)+Math.imul(S,W)|0,o=o+Math.imul(S,z)|0,i=i+Math.imul(v,X)|0,r=(r=r+Math.imul(v,J)|0)+Math.imul(y,X)|0,o=o+Math.imul(y,J)|0,i=i+Math.imul(f,Z)|0,r=(r=r+Math.imul(f,ee)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,ee)|0;var Se=(l+(i=i+Math.imul(d,ne)|0)|0)+((8191&(r=(r=r+Math.imul(d,ie)|0)+Math.imul(h,ne)|0))<<13)|0;l=((o=o+Math.imul(h,ie)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(M,j),r=(r=Math.imul(M,H))+Math.imul(A,j)|0,o=Math.imul(A,H),i=i+Math.imul(C,q)|0,r=(r=r+Math.imul(C,V)|0)+Math.imul(I,q)|0,o=o+Math.imul(I,V)|0,i=i+Math.imul(_,W)|0,r=(r=r+Math.imul(_,z)|0)+Math.imul(T,W)|0,o=o+Math.imul(T,z)|0,i=i+Math.imul(E,X)|0,r=(r=r+Math.imul(E,J)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,J)|0,i=i+Math.imul(v,Z)|0,r=(r=r+Math.imul(v,ee)|0)+Math.imul(y,Z)|0,o=o+Math.imul(y,ee)|0,i=i+Math.imul(f,ne)|0,r=(r=r+Math.imul(f,ie)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,ie)|0;var we=(l+(i=i+Math.imul(d,oe)|0)|0)+((8191&(r=(r=r+Math.imul(d,se)|0)+Math.imul(h,oe)|0))<<13)|0;l=((o=o+Math.imul(h,se)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(R,j),r=(r=Math.imul(R,H))+Math.imul(L,j)|0,o=Math.imul(L,H),i=i+Math.imul(M,q)|0,r=(r=r+Math.imul(M,V)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,V)|0,i=i+Math.imul(C,W)|0,r=(r=r+Math.imul(C,z)|0)+Math.imul(I,W)|0,o=o+Math.imul(I,z)|0,i=i+Math.imul(_,X)|0,r=(r=r+Math.imul(_,J)|0)+Math.imul(T,X)|0,o=o+Math.imul(T,J)|0,i=i+Math.imul(E,Z)|0,r=(r=r+Math.imul(E,ee)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,ee)|0,i=i+Math.imul(v,ne)|0,r=(r=r+Math.imul(v,ie)|0)+Math.imul(y,ne)|0,o=o+Math.imul(y,ie)|0,i=i+Math.imul(f,oe)|0,r=(r=r+Math.imul(f,se)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,se)|0;var _e=(l+(i=i+Math.imul(d,ce)|0)|0)+((8191&(r=(r=r+Math.imul(d,le)|0)+Math.imul(h,ce)|0))<<13)|0;l=((o=o+Math.imul(h,le)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(N,j),r=(r=Math.imul(N,H))+Math.imul(P,j)|0,o=Math.imul(P,H),i=i+Math.imul(R,q)|0,r=(r=r+Math.imul(R,V)|0)+Math.imul(L,q)|0,o=o+Math.imul(L,V)|0,i=i+Math.imul(M,W)|0,r=(r=r+Math.imul(M,z)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,z)|0,i=i+Math.imul(C,X)|0,r=(r=r+Math.imul(C,J)|0)+Math.imul(I,X)|0,o=o+Math.imul(I,J)|0,i=i+Math.imul(_,Z)|0,r=(r=r+Math.imul(_,ee)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,ee)|0,i=i+Math.imul(E,ne)|0,r=(r=r+Math.imul(E,ie)|0)+Math.imul(S,ne)|0,o=o+Math.imul(S,ie)|0,i=i+Math.imul(v,oe)|0,r=(r=r+Math.imul(v,se)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,se)|0,i=i+Math.imul(f,ce)|0,r=(r=r+Math.imul(f,le)|0)+Math.imul(m,ce)|0,o=o+Math.imul(m,le)|0;var Te=(l+(i=i+Math.imul(d,de)|0)|0)+((8191&(r=(r=r+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;l=((o=o+Math.imul(h,he)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(U,j),r=(r=Math.imul(U,H))+Math.imul(B,j)|0,o=Math.imul(B,H),i=i+Math.imul(N,q)|0,r=(r=r+Math.imul(N,V)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,V)|0,i=i+Math.imul(R,W)|0,r=(r=r+Math.imul(R,z)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,z)|0,i=i+Math.imul(M,X)|0,r=(r=r+Math.imul(M,J)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,J)|0,i=i+Math.imul(C,Z)|0,r=(r=r+Math.imul(C,ee)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,ee)|0,i=i+Math.imul(_,ne)|0,r=(r=r+Math.imul(_,ie)|0)+Math.imul(T,ne)|0,o=o+Math.imul(T,ie)|0,i=i+Math.imul(E,oe)|0,r=(r=r+Math.imul(E,se)|0)+Math.imul(S,oe)|0,o=o+Math.imul(S,se)|0,i=i+Math.imul(v,ce)|0,r=(r=r+Math.imul(v,le)|0)+Math.imul(y,ce)|0,o=o+Math.imul(y,le)|0,i=i+Math.imul(f,de)|0,r=(r=r+Math.imul(f,he)|0)+Math.imul(m,de)|0,o=o+Math.imul(m,he)|0;var xe=(l+(i=i+Math.imul(d,fe)|0)|0)+((8191&(r=(r=r+Math.imul(d,me)|0)+Math.imul(h,fe)|0))<<13)|0;l=((o=o+Math.imul(h,me)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(U,q),r=(r=Math.imul(U,V))+Math.imul(B,q)|0,o=Math.imul(B,V),i=i+Math.imul(N,W)|0,r=(r=r+Math.imul(N,z)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,z)|0,i=i+Math.imul(R,X)|0,r=(r=r+Math.imul(R,J)|0)+Math.imul(L,X)|0,o=o+Math.imul(L,J)|0,i=i+Math.imul(M,Z)|0,r=(r=r+Math.imul(M,ee)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,ee)|0,i=i+Math.imul(C,ne)|0,r=(r=r+Math.imul(C,ie)|0)+Math.imul(I,ne)|0,o=o+Math.imul(I,ie)|0,i=i+Math.imul(_,oe)|0,r=(r=r+Math.imul(_,se)|0)+Math.imul(T,oe)|0,o=o+Math.imul(T,se)|0,i=i+Math.imul(E,ce)|0,r=(r=r+Math.imul(E,le)|0)+Math.imul(S,ce)|0,o=o+Math.imul(S,le)|0,i=i+Math.imul(v,de)|0,r=(r=r+Math.imul(v,he)|0)+Math.imul(y,de)|0,o=o+Math.imul(y,he)|0;var Ce=(l+(i=i+Math.imul(f,fe)|0)|0)+((8191&(r=(r=r+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;l=((o=o+Math.imul(m,me)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(U,W),r=(r=Math.imul(U,z))+Math.imul(B,W)|0,o=Math.imul(B,z),i=i+Math.imul(N,X)|0,r=(r=r+Math.imul(N,J)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,J)|0,i=i+Math.imul(R,Z)|0,r=(r=r+Math.imul(R,ee)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,ee)|0,i=i+Math.imul(M,ne)|0,r=(r=r+Math.imul(M,ie)|0)+Math.imul(A,ne)|0,o=o+Math.imul(A,ie)|0,i=i+Math.imul(C,oe)|0,r=(r=r+Math.imul(C,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,i=i+Math.imul(_,ce)|0,r=(r=r+Math.imul(_,le)|0)+Math.imul(T,ce)|0,o=o+Math.imul(T,le)|0,i=i+Math.imul(E,de)|0,r=(r=r+Math.imul(E,he)|0)+Math.imul(S,de)|0,o=o+Math.imul(S,he)|0;var Ie=(l+(i=i+Math.imul(v,fe)|0)|0)+((8191&(r=(r=r+Math.imul(v,me)|0)+Math.imul(y,fe)|0))<<13)|0;l=((o=o+Math.imul(y,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(U,X),r=(r=Math.imul(U,J))+Math.imul(B,X)|0,o=Math.imul(B,J),i=i+Math.imul(N,Z)|0,r=(r=r+Math.imul(N,ee)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,ee)|0,i=i+Math.imul(R,ne)|0,r=(r=r+Math.imul(R,ie)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,ie)|0,i=i+Math.imul(M,oe)|0,r=(r=r+Math.imul(M,se)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,se)|0,i=i+Math.imul(C,ce)|0,r=(r=r+Math.imul(C,le)|0)+Math.imul(I,ce)|0,o=o+Math.imul(I,le)|0,i=i+Math.imul(_,de)|0,r=(r=r+Math.imul(_,he)|0)+Math.imul(T,de)|0,o=o+Math.imul(T,he)|0;var ke=(l+(i=i+Math.imul(E,fe)|0)|0)+((8191&(r=(r=r+Math.imul(E,me)|0)+Math.imul(S,fe)|0))<<13)|0;l=((o=o+Math.imul(S,me)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(U,Z),r=(r=Math.imul(U,ee))+Math.imul(B,Z)|0,o=Math.imul(B,ee),i=i+Math.imul(N,ne)|0,r=(r=r+Math.imul(N,ie)|0)+Math.imul(P,ne)|0,o=o+Math.imul(P,ie)|0,i=i+Math.imul(R,oe)|0,r=(r=r+Math.imul(R,se)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,se)|0,i=i+Math.imul(M,ce)|0,r=(r=r+Math.imul(M,le)|0)+Math.imul(A,ce)|0,o=o+Math.imul(A,le)|0,i=i+Math.imul(C,de)|0,r=(r=r+Math.imul(C,he)|0)+Math.imul(I,de)|0,o=o+Math.imul(I,he)|0;var Me=(l+(i=i+Math.imul(_,fe)|0)|0)+((8191&(r=(r=r+Math.imul(_,me)|0)+Math.imul(T,fe)|0))<<13)|0;l=((o=o+Math.imul(T,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(U,ne),r=(r=Math.imul(U,ie))+Math.imul(B,ne)|0,o=Math.imul(B,ie),i=i+Math.imul(N,oe)|0,r=(r=r+Math.imul(N,se)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,se)|0,i=i+Math.imul(R,ce)|0,r=(r=r+Math.imul(R,le)|0)+Math.imul(L,ce)|0,o=o+Math.imul(L,le)|0,i=i+Math.imul(M,de)|0,r=(r=r+Math.imul(M,he)|0)+Math.imul(A,de)|0,o=o+Math.imul(A,he)|0;var Ae=(l+(i=i+Math.imul(C,fe)|0)|0)+((8191&(r=(r=r+Math.imul(C,me)|0)+Math.imul(I,fe)|0))<<13)|0;l=((o=o+Math.imul(I,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(U,oe),r=(r=Math.imul(U,se))+Math.imul(B,oe)|0,o=Math.imul(B,se),i=i+Math.imul(N,ce)|0,r=(r=r+Math.imul(N,le)|0)+Math.imul(P,ce)|0,o=o+Math.imul(P,le)|0,i=i+Math.imul(R,de)|0,r=(r=r+Math.imul(R,he)|0)+Math.imul(L,de)|0,o=o+Math.imul(L,he)|0;var Oe=(l+(i=i+Math.imul(M,fe)|0)|0)+((8191&(r=(r=r+Math.imul(M,me)|0)+Math.imul(A,fe)|0))<<13)|0;l=((o=o+Math.imul(A,me)|0)+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(U,ce),r=(r=Math.imul(U,le))+Math.imul(B,ce)|0,o=Math.imul(B,le),i=i+Math.imul(N,de)|0,r=(r=r+Math.imul(N,he)|0)+Math.imul(P,de)|0,o=o+Math.imul(P,he)|0;var Re=(l+(i=i+Math.imul(R,fe)|0)|0)+((8191&(r=(r=r+Math.imul(R,me)|0)+Math.imul(L,fe)|0))<<13)|0;l=((o=o+Math.imul(L,me)|0)+(r>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(U,de),r=(r=Math.imul(U,he))+Math.imul(B,de)|0,o=Math.imul(B,he);var Le=(l+(i=i+Math.imul(N,fe)|0)|0)+((8191&(r=(r=r+Math.imul(N,me)|0)+Math.imul(P,fe)|0))<<13)|0;l=((o=o+Math.imul(P,me)|0)+(r>>>13)|0)+(Le>>>26)|0,Le&=67108863;var De=(l+(i=Math.imul(U,fe))|0)+((8191&(r=(r=Math.imul(U,me))+Math.imul(B,fe)|0))<<13)|0;return l=((o=Math.imul(B,me))+(r>>>13)|0)+(De>>>26)|0,De&=67108863,c[0]=ge,c[1]=ve,c[2]=ye,c[3]=be,c[4]=Ee,c[5]=Se,c[6]=we,c[7]=_e,c[8]=Te,c[9]=xe,c[10]=Ce,c[11]=Ie,c[12]=ke,c[13]=Me,c[14]=Ae,c[15]=Oe,c[16]=Re,c[17]=Le,c[18]=De,0!==l&&(c[19]=l,n.length++),n};function v(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var i=0,r=0,o=0;o<n.length-1;o++){var s=r;r=0;for(var a=67108863&i,c=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=c;l++){var u=o-l,d=(0|e.words[u])*(0|t.words[l]),h=67108863&d;a=67108863&(h=h+a|0),r+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}n.words[o]=a,i=s,s=r}return 0!==i?n.words[o]=i:n.length--,n._strip()}function y(e,t,n){return v(e,t,n)}function b(e,t){this.x=e,this.y=t}Math.imul||(g=m),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?g(this,e,t):n<63?m(this,e,t):n<1024?v(this,e,t):y(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,n,e);return t},b.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var i=0,r=0;r<t;r++)i|=(1&e)<<t-r-1,e>>=1;return i},b.prototype.permute=function(e,t,n,i,r,o){for(var s=0;s<o;s++)i[s]=t[e[s]],r[s]=n[e[s]]},b.prototype.transform=function(e,t,n,i,r,o){this.permute(o,e,t,n,i,r);for(var s=1;s<r;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),u=0;u<r;u+=a)for(var d=c,h=l,p=0;p<s;p++){var f=n[u+p],m=i[u+p],g=n[u+p+s],v=i[u+p+s],y=d*g-h*v;v=d*v+h*g,g=y,n[u+p]=f+g,i[u+p]=m+v,n[u+p+s]=f-g,i[u+p+s]=m-v,p!==a&&(y=c*d-l*h,h=c*h+l*d,d=y)}},b.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),i=1&n,r=0;for(n=n/2|0;n;n>>>=1)r++;return 1<<r+1+i},b.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var i=0;i<n/2;i++){var r=e[i];e[i]=e[n-i-1],e[n-i-1]=r,r=t[i],t[i]=-t[n-i-1],t[n-i-1]=-r}},b.prototype.normalize13b=function(e,t){for(var n=0,i=0;i<t/2;i++){var r=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+n;e[i]=67108863&r,n=r<67108864?0:r/67108864|0}return e},b.prototype.convert13b=function(e,t,n,r){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<r;++s)n[s]=0;i(0===o),i(0==(-8192&o))},b.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},b.prototype.mulp=function(e,t,n){var i=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(i),o=this.stub(i),s=new Array(i),a=new Array(i),c=new Array(i),l=new Array(i),u=new Array(i),d=new Array(i),h=n.words;h.length=i,this.convert13b(e.words,e.length,s,i),this.convert13b(t.words,t.length,l,i),this.transform(s,o,a,c,i,r),this.transform(l,o,u,d,i,r);for(var p=0;p<i;p++){var f=a[p]*u[p]-c[p]*d[p];c[p]=a[p]*d[p]+c[p]*u[p],a[p]=f}return this.conjugate(a,c,i),this.transform(a,c,h,o,i,r),this.conjugate(h,o,i),this.normalize13b(h,i),n.negative=e.negative^t.negative,n.length=e.length+t.length,n._strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),y(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),i("number"==typeof e),i(e<67108864);for(var n=0,r=0;r<this.length;r++){var o=(0|this.words[r])*e,s=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=s>>>26,this.words[r]=67108863&s}return 0!==n&&(this.words[r]=n,this.length++),t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var i=n/26|0,r=n%26;t[n]=e.words[i]>>>r&1}return t}(e);if(0===t.length)return new o(1);for(var n=this,i=0;i<t.length&&0===t[i];i++,n=n.sqr());if(++i<t.length)for(var r=n.sqr();i<t.length;i++,r=r.sqr())0!==t[i]&&(n=n.mul(r));return n},o.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,n=e%26,r=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,c=(0|this.words[t])-a<<n;this.words[t]=c|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this._strip()},o.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var r;i("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,c=n;if(r-=s,r=Math.max(0,r),c){for(var l=0;l<s;l++)c.words[l]=this.words[l];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,l=0;l<this.length;l++)this.words[l]=this.words[l+s];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=r);l--){var d=0|this.words[l];this.words[l]=u<<26-o|d>>>o,u=d&a}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,n){return i(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,r=1<<t;return!(this.length<=n||!(this.words[n]&r))},o.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return i("number"==typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var r,o,s=e.length+n;this._expand(s);var a=0;for(r=0;r<e.length;r++){o=(0|this.words[r+n])+a;var c=(0|e.words[r])*t;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[r+n]=67108863&o}for(;r<this.length-n;r++)a=(o=(0|this.words[r+n])+a)>>26,this.words[r+n]=67108863&o;if(0===a)return this._strip();for(i(-1===a),a=0,r=0;r<this.length;r++)a=(o=-(0|this.words[r])+a)>>26,this.words[r]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var n=(this.length,e.length),i=this.clone(),r=e,s=0|r.words[r.length-1];0!=(n=26-this._countBits(s))&&(r=r.ushln(n),i.iushln(n),s=0|r.words[r.length-1]);var a,c=i.length-r.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var u=i.clone()._ishlnsubmul(r,1,c);0===u.negative&&(i=u,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|i.words[r.length+d])+(0|i.words[r.length+d-1]);for(h=Math.min(h/s|0,67108863),i._ishlnsubmul(r,h,d);0!==i.negative;)h--,i.negative=0,i._ishlnsubmul(r,1,d),i.isZero()||(i.negative^=1);a&&(a.words[d]=h)}return a&&a._strip(),i._strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:a||null,mod:i}},o.prototype.divmod=function(e,t,n){return i(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(r=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:r,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(r=a.div.neg()),{div:r,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var r,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),r=e.andln(1),o=n.cmp(i);return o<0||1===r&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var n=(1<<26)%e,r=0,o=this.length-1;o>=0;o--)r=(n*r+(0|this.words[o]))%e;return t?-r:r},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var n=0,r=this.length-1;r>=0;r--){var o=(0|this.words[r])+67108864*n;this.words[r]=o/e|0,n=o%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new o(1),s=new o(0),a=new o(0),c=new o(1),l=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++l;for(var u=n.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0==(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(d)),r.iushrn(1),s.iushrn(1);for(var f=0,m=1;0==(n.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(u),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),r.isub(a),s.isub(c)):(n.isub(t),a.isub(r),c.isub(s))}return{a,b:c,gcd:n.iushln(l)}},o.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,s=new o(1),a=new o(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var l=0,u=1;0==(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,h=1;0==(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(r=0===t.cmpn(1)?s:a).cmpn(0)<0&&r.iadd(e),r},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var i=0;t.isEven()&&n.isEven();i++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var r=t.cmp(n);if(r<0){var o=t;t=n,n=o}else if(0===r||0===n.cmpn(1))break;t.isub(n)}return n.iushln(i)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,n=(e-t)/26,r=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=r,this;for(var o=r,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),i(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],r=0|e.words[n];if(i!==r){i<r?t=-1:i>r&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new C(e)},o.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var E={k256:null,p224:null,p192:null,p25519:null};function S(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){S.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){S.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function T(){S.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){S.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function C(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function I(e){C.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},S.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},S.prototype.split=function(e,t){e.iushrn(this.n,0,t)},S.prototype.imulK=function(e){return e.imul(this.k)},r(w,S),w.prototype.split=function(e,t){for(var n=4194303,i=Math.min(e.length,9),r=0;r<i;r++)t.words[r]=e.words[r];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,r=10;r<e.length;r++){var s=0|e.words[r];e.words[r-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,e.words[r-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var i=0|e.words[n];t+=977*i,e.words[n]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(_,S),r(T,S),r(x,S),x.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var i=19*(0|e.words[n])+t,r=67108863&i;i>>>=26,e.words[n]=r,t=i}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(E[e])return E[e];var t;if("k256"===e)t=new w;else if("p224"===e)t=new _;else if("p192"===e)t=new T;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new x}return E[e]=t,t},C.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},C.prototype._verify2=function(e,t){i(0==(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},C.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},C.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},C.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},C.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},C.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},C.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},C.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},C.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},C.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},C.prototype.isqr=function(e){return this.imul(e,e.clone())},C.prototype.sqr=function(e){return this.mul(e,e)},C.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var r=this.m.subn(1),s=0;!r.isZero()&&0===r.andln(1);)s++,r.iushrn(1);i(!r.isZero());var a=new o(1).toRed(this),c=a.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new o(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var d=this.pow(u,r),h=this.pow(e,r.addn(1).iushrn(1)),p=this.pow(e,r),f=s;0!==p.cmp(a);){for(var m=p,g=0;0!==m.cmp(a);g++)m=m.redSqr();i(g<f);var v=this.pow(d,new o(1).iushln(f-g-1));h=h.redMul(v),d=v.redSqr(),p=p.redMul(d),f=g}return h},C.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},C.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var r=n[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],u=c-1;u>=0;u--){var d=l>>u&1;r!==n[0]&&(r=this.sqr(r)),0!==d||0!==s?(s<<=1,s|=d,(4==++a||0===i&&0===u)&&(r=this.mul(r,n[s]),a=0,s=0)):a=0}c=26}return r},C.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},C.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new I(e)},r(I,C),I.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},I.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},I.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),o=r;return r.cmp(this.m)>=0?o=r.isub(this.m):r.cmpn(0)<0&&(o=r.iadd(this.m)),o._forceRed(this)},I.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),s=r;return r.cmp(this.m)>=0?s=r.isub(this.m):r.cmpn(0)<0&&(s=r.iadd(this.m)),s._forceRed(this)},I.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=n.nmd(e),this)},56042:(e,t,n)=>{e.exports=n(75207)},64743:(e,t,n)=>{var i=n(89509).Buffer,r=n(23482),o=n(88473),s=n(35717),a=n(82957),c=n(47753),l=n(75207);function u(e){o.Writable.call(this);var t=l[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=r(t.hash),this._tag=t.id,this._signType=t.sign}function d(e){o.Writable.call(this);var t=l[e];if(!t)throw new Error("Unknown message digest");this._hash=r(t.hash),this._tag=t.id,this._signType=t.sign}function h(e){return new u(e)}function p(e){return new d(e)}Object.keys(l).forEach((function(e){l[e].id=i.from(l[e].id,"hex"),l[e.toLowerCase()]=l[e]})),s(u,o.Writable),u.prototype._write=function(e,t,n){this._hash.update(e),n()},u.prototype.update=function(e,t){return"string"==typeof e&&(e=i.from(e,t)),this._hash.update(e),this},u.prototype.sign=function(e,t){this.end();var n=this._hash.digest(),i=a(n,e,this._hashType,this._signType,this._tag);return t?i.toString(t):i},s(d,o.Writable),d.prototype._write=function(e,t,n){this._hash.update(e),n()},d.prototype.update=function(e,t){return"string"==typeof e&&(e=i.from(e,t)),this._hash.update(e),this},d.prototype.verify=function(e,t,n){"string"==typeof t&&(t=i.from(t,n)),this.end();var r=this._hash.digest();return c(t,r,e,this._signType,this._tag)},e.exports={Sign:h,Verify:p,createSign:h,createVerify:p}},82957:(e,t,n)=>{var i=n(89509).Buffer,r=n(58355),o=n(23663),s=n(86266).ec,a=n(58815),c=n(70980),l=n(1308);function u(e,t,n,o){if((e=i.from(e.toArray())).length<t.byteLength()){var s=i.alloc(t.byteLength()-e.length);e=i.concat([s,e])}var a=n.length,c=function(e,t){e=(e=d(e,t)).mod(t);var n=i.from(e.toArray());if(n.length<t.byteLength()){var r=i.alloc(t.byteLength()-n.length);n=i.concat([r,n])}return n}(n,t),l=i.alloc(a);l.fill(1);var u=i.alloc(a);return u=r(o,u).update(l).update(i.from([0])).update(e).update(c).digest(),l=r(o,u).update(l).digest(),{k:u=r(o,u).update(l).update(i.from([1])).update(e).update(c).digest(),v:l=r(o,u).update(l).digest()}}function d(e,t){var n=new a(e),i=(e.length<<3)-t.bitLength();return i>0&&n.ishrn(i),n}function h(e,t,n){var o,s;do{for(o=i.alloc(0);8*o.length<e.bitLength();)t.v=r(n,t.k).update(t.v).digest(),o=i.concat([o,t.v]);s=d(o,e),t.k=r(n,t.k).update(t.v).update(i.from([0])).digest(),t.v=r(n,t.k).update(t.v).digest()}while(-1!==s.cmp(e));return s}function p(e,t,n,i){return e.toRed(a.mont(n)).redPow(t).fromRed().mod(i)}e.exports=function(e,t,n,r,f){var m=c(t);if(m.curve){if("ecdsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");return function(e,t){var n=l[t.curve.join(".")];if(!n)throw new Error("unknown curve "+t.curve.join("."));var r=new s(n).keyFromPrivate(t.privateKey).sign(e);return i.from(r.toDER())}(e,m)}if("dsa"===m.type){if("dsa"!==r)throw new Error("wrong private key type");return function(e,t,n){for(var r,o=t.params.priv_key,s=t.params.p,c=t.params.q,l=t.params.g,f=new a(0),m=d(e,c).mod(c),g=!1,v=u(o,c,e,n);!1===g;)f=p(l,r=h(c,v,n),s,c),0===(g=r.invm(c).imul(m.add(o.mul(f))).mod(c)).cmpn(0)&&(g=!1,f=new a(0));return function(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e)),128&t[0]&&(t=[0].concat(t));var n=[48,e.length+t.length+4,2,e.length];return n=n.concat(e,[2,t.length],t),i.from(n)}(f,g)}(e,m,n)}if("rsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");e=i.concat([f,e]);for(var g=m.modulus.byteLength(),v=[0,1];e.length+v.length+1<g;)v.push(255);v.push(0);for(var y=-1;++y<e.length;)v.push(e[y]);return o(v,m)},e.exports.getKey=u,e.exports.makeKey=h},47753:(e,t,n)=>{var i=n(89509).Buffer,r=n(58815),o=n(86266).ec,s=n(70980),a=n(1308);function c(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}e.exports=function(e,t,n,l,u){var d=s(n);if("ec"===d.type){if("ecdsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");return function(e,t,n){var i=a[n.data.algorithm.curve.join(".")];if(!i)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var r=new o(i),s=n.data.subjectPrivateKey.data;return r.verify(t,e,s)}(e,t,d)}if("dsa"===d.type){if("dsa"!==l)throw new Error("wrong public key type");return function(e,t,n){var i=n.data.p,o=n.data.q,a=n.data.g,l=n.data.pub_key,u=s.signature.decode(e,"der"),d=u.s,h=u.r;c(d,o),c(h,o);var p=r.mont(i),f=d.invm(o);return 0===a.toRed(p).redPow(new r(t).mul(f).mod(o)).fromRed().mul(l.toRed(p).redPow(h.mul(f).mod(o)).fromRed()).mod(i).mod(o).cmp(h)}(e,t,d)}if("rsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");t=i.concat([u,t]);for(var h=d.modulus.byteLength(),p=[1],f=0;t.length+p.length+2<h;)p.push(255),f++;p.push(0);for(var m=-1;++m<t.length;)p.push(t[m]);p=i.from(p);var g=r.mont(d.modulus);e=(e=new r(e).toRed(g)).redPow(new r(d.publicExponent)),e=i.from(e.fromRed().toArray());var v=f<8?1:0;for(h=Math.min(e.length,p.length),e.length!==p.length&&(v=1),m=-1;++m<h;)v|=e[m]^p[m];return 0===v}},58815:function(e,t,n){!function(e,t){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(2363).Buffer}catch(e){}function a(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void i(!1,"Invalid character in "+e)}function c(e,t,n){var i=a(e,n);return n-1>=t&&(i|=a(e,n-1)<<4),i}function l(e,t,n,r){for(var o=0,s=0,a=Math.min(e.length,n),c=t;c<a;c++){var l=e.charCodeAt(c)-48;o*=r,s=l>=49?l-49+10:l>=17?l-17+10:l,i(l>=0&&s<r,"Invalid character"),o+=s}return o}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var r=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<e.length&&(16===t?this._parseHex(e,r,n):(this._parseBase(e,t,r),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var o,s,a=0;if("be"===n)for(r=e.length-1,o=0;r>=0;r-=3)s=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(r=0,o=0;r<e.length;r+=3)s=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},o.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,o=0,s=0;if("be"===n)for(i=e.length-1;i>=t;i-=2)r=c(e,t,i)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)r=c(e,t,i)<<o,this.words[s]|=67108863&r,o>=18?(o-=18,s+=1,this.words[s]|=r>>>26):o+=8;this._strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var i=0,r=1;r<=67108863;r*=t)i++;i--,r=r/t|0;for(var o=e.length-n,s=o%i,a=Math.min(o,o-s)+n,c=0,u=n;u<a;u+=i)c=l(e,u,u+i,t),this.imuln(r),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var d=1;for(c=l(e,u,e.length,t),u=0;u<s;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){u(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(e){o.prototype.inspect=d}else o.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(e,t,n){n.negative=t.negative^e.negative;var i=e.length+t.length|0;n.length=i,i=i-1|0;var r=0|e.words[0],o=0|t.words[0],s=r*o,a=67108863&s,c=s/67108864|0;n.words[0]=a;for(var l=1;l<i;l++){for(var u=c>>>26,d=67108863&c,h=Math.min(l,t.length-1),p=Math.max(0,l-e.length+1);p<=h;p++){var f=l-p|0;u+=(s=(r=0|e.words[f])*(o=0|t.words[p])+d)/67108864|0,d=67108863&s}n.words[l]=0|d,c=0|u}return 0!==c?n.words[l]=0|c:n.length--,n._strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var r=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<r|o)).toString(16);n=0!=(o=a>>>24-r&16777215)||s!==this.length-1?h[6-c.length]+c+n:c+n,(r+=2)>=26&&(r-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var l=p[e],u=f[e];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modrn(u).toString(e);n=(d=d.idivn(u)).isZero()?m+n:h[l-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){this._strip();var r=this.byteLength(),o=n||Math.max(1,r);i(r<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,r),s},o.prototype._toArrayLikeLE=function(e,t){for(var n=0,i=0,r=0,o=0;r<this.length;r++){var s=this.words[r]<<o|i;e[n++]=255&s,n<e.length&&(e[n++]=s>>8&255),n<e.length&&(e[n++]=s>>16&255),6===o?(n<e.length&&(e[n++]=s>>24&255),i=0,o=0):(i=s>>>24,o+=2)}if(n<e.length)for(e[n++]=i;n<e.length;)e[n++]=0},o.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,i=0,r=0,o=0;r<this.length;r++){var s=this.words[r]<<o|i;e[n--]=255&s,n>=0&&(e[n--]=s>>8&255),n>=0&&(e[n--]=s>>16&255),6===o?(n>=0&&(e[n--]=s>>24&255),i=0,o=0):(i=s>>>24,o+=2)}if(n>=0)for(e[n--]=i;n>=0;)e[n--]=0},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return i(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return i(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var i=0;i<n.length;i++)this.words[i]=t.words[i]^n.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return i(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var r=0;r<t;r++)this.words[r]=67108863&~this.words[r];return n>0&&(this.words[r]=~this.words[r]&67108863>>26-n),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var n=e/26|0,r=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<r:this.words[n]&~(1<<r),this._strip()},o.prototype.iadd=function(e){var t,n,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,i=e):(n=e,i=this);for(var r=0,o=0;o<i.length;o++)t=(0|n.words[o])+(0|i.words[o])+r,this.words[o]=67108863&t,r=t>>>26;for(;0!==r&&o<n.length;o++)t=(0|n.words[o])+r,this.words[o]=67108863&t,r=t>>>26;if(this.length=n.length,0!==r)this.words[this.length]=r,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,i,r=this.cmp(e);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(n=this,i=e):(n=e,i=this);for(var o=0,s=0;s<i.length;s++)o=(t=(0|n.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<n.length;s++)o=(t=(0|n.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,n){var i,r,o,s=e.words,a=t.words,c=n.words,l=0,u=0|s[0],d=8191&u,h=u>>>13,p=0|s[1],f=8191&p,m=p>>>13,g=0|s[2],v=8191&g,y=g>>>13,b=0|s[3],E=8191&b,S=b>>>13,w=0|s[4],_=8191&w,T=w>>>13,x=0|s[5],C=8191&x,I=x>>>13,k=0|s[6],M=8191&k,A=k>>>13,O=0|s[7],R=8191&O,L=O>>>13,D=0|s[8],N=8191&D,P=D>>>13,$=0|s[9],U=8191&$,B=$>>>13,F=0|a[0],j=8191&F,H=F>>>13,K=0|a[1],q=8191&K,V=K>>>13,G=0|a[2],W=8191&G,z=G>>>13,Y=0|a[3],X=8191&Y,J=Y>>>13,Q=0|a[4],Z=8191&Q,ee=Q>>>13,te=0|a[5],ne=8191&te,ie=te>>>13,re=0|a[6],oe=8191&re,se=re>>>13,ae=0|a[7],ce=8191&ae,le=ae>>>13,ue=0|a[8],de=8191&ue,he=ue>>>13,pe=0|a[9],fe=8191&pe,me=pe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(l+(i=Math.imul(d,j))|0)+((8191&(r=(r=Math.imul(d,H))+Math.imul(h,j)|0))<<13)|0;l=((o=Math.imul(h,H))+(r>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(f,j),r=(r=Math.imul(f,H))+Math.imul(m,j)|0,o=Math.imul(m,H);var ve=(l+(i=i+Math.imul(d,q)|0)|0)+((8191&(r=(r=r+Math.imul(d,V)|0)+Math.imul(h,q)|0))<<13)|0;l=((o=o+Math.imul(h,V)|0)+(r>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(v,j),r=(r=Math.imul(v,H))+Math.imul(y,j)|0,o=Math.imul(y,H),i=i+Math.imul(f,q)|0,r=(r=r+Math.imul(f,V)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,V)|0;var ye=(l+(i=i+Math.imul(d,W)|0)|0)+((8191&(r=(r=r+Math.imul(d,z)|0)+Math.imul(h,W)|0))<<13)|0;l=((o=o+Math.imul(h,z)|0)+(r>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(E,j),r=(r=Math.imul(E,H))+Math.imul(S,j)|0,o=Math.imul(S,H),i=i+Math.imul(v,q)|0,r=(r=r+Math.imul(v,V)|0)+Math.imul(y,q)|0,o=o+Math.imul(y,V)|0,i=i+Math.imul(f,W)|0,r=(r=r+Math.imul(f,z)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,z)|0;var be=(l+(i=i+Math.imul(d,X)|0)|0)+((8191&(r=(r=r+Math.imul(d,J)|0)+Math.imul(h,X)|0))<<13)|0;l=((o=o+Math.imul(h,J)|0)+(r>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(_,j),r=(r=Math.imul(_,H))+Math.imul(T,j)|0,o=Math.imul(T,H),i=i+Math.imul(E,q)|0,r=(r=r+Math.imul(E,V)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,V)|0,i=i+Math.imul(v,W)|0,r=(r=r+Math.imul(v,z)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,z)|0,i=i+Math.imul(f,X)|0,r=(r=r+Math.imul(f,J)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,J)|0;var Ee=(l+(i=i+Math.imul(d,Z)|0)|0)+((8191&(r=(r=r+Math.imul(d,ee)|0)+Math.imul(h,Z)|0))<<13)|0;l=((o=o+Math.imul(h,ee)|0)+(r>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(C,j),r=(r=Math.imul(C,H))+Math.imul(I,j)|0,o=Math.imul(I,H),i=i+Math.imul(_,q)|0,r=(r=r+Math.imul(_,V)|0)+Math.imul(T,q)|0,o=o+Math.imul(T,V)|0,i=i+Math.imul(E,W)|0,r=(r=r+Math.imul(E,z)|0)+Math.imul(S,W)|0,o=o+Math.imul(S,z)|0,i=i+Math.imul(v,X)|0,r=(r=r+Math.imul(v,J)|0)+Math.imul(y,X)|0,o=o+Math.imul(y,J)|0,i=i+Math.imul(f,Z)|0,r=(r=r+Math.imul(f,ee)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,ee)|0;var Se=(l+(i=i+Math.imul(d,ne)|0)|0)+((8191&(r=(r=r+Math.imul(d,ie)|0)+Math.imul(h,ne)|0))<<13)|0;l=((o=o+Math.imul(h,ie)|0)+(r>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(M,j),r=(r=Math.imul(M,H))+Math.imul(A,j)|0,o=Math.imul(A,H),i=i+Math.imul(C,q)|0,r=(r=r+Math.imul(C,V)|0)+Math.imul(I,q)|0,o=o+Math.imul(I,V)|0,i=i+Math.imul(_,W)|0,r=(r=r+Math.imul(_,z)|0)+Math.imul(T,W)|0,o=o+Math.imul(T,z)|0,i=i+Math.imul(E,X)|0,r=(r=r+Math.imul(E,J)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,J)|0,i=i+Math.imul(v,Z)|0,r=(r=r+Math.imul(v,ee)|0)+Math.imul(y,Z)|0,o=o+Math.imul(y,ee)|0,i=i+Math.imul(f,ne)|0,r=(r=r+Math.imul(f,ie)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,ie)|0;var we=(l+(i=i+Math.imul(d,oe)|0)|0)+((8191&(r=(r=r+Math.imul(d,se)|0)+Math.imul(h,oe)|0))<<13)|0;l=((o=o+Math.imul(h,se)|0)+(r>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(R,j),r=(r=Math.imul(R,H))+Math.imul(L,j)|0,o=Math.imul(L,H),i=i+Math.imul(M,q)|0,r=(r=r+Math.imul(M,V)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,V)|0,i=i+Math.imul(C,W)|0,r=(r=r+Math.imul(C,z)|0)+Math.imul(I,W)|0,o=o+Math.imul(I,z)|0,i=i+Math.imul(_,X)|0,r=(r=r+Math.imul(_,J)|0)+Math.imul(T,X)|0,o=o+Math.imul(T,J)|0,i=i+Math.imul(E,Z)|0,r=(r=r+Math.imul(E,ee)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,ee)|0,i=i+Math.imul(v,ne)|0,r=(r=r+Math.imul(v,ie)|0)+Math.imul(y,ne)|0,o=o+Math.imul(y,ie)|0,i=i+Math.imul(f,oe)|0,r=(r=r+Math.imul(f,se)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,se)|0;var _e=(l+(i=i+Math.imul(d,ce)|0)|0)+((8191&(r=(r=r+Math.imul(d,le)|0)+Math.imul(h,ce)|0))<<13)|0;l=((o=o+Math.imul(h,le)|0)+(r>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(N,j),r=(r=Math.imul(N,H))+Math.imul(P,j)|0,o=Math.imul(P,H),i=i+Math.imul(R,q)|0,r=(r=r+Math.imul(R,V)|0)+Math.imul(L,q)|0,o=o+Math.imul(L,V)|0,i=i+Math.imul(M,W)|0,r=(r=r+Math.imul(M,z)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,z)|0,i=i+Math.imul(C,X)|0,r=(r=r+Math.imul(C,J)|0)+Math.imul(I,X)|0,o=o+Math.imul(I,J)|0,i=i+Math.imul(_,Z)|0,r=(r=r+Math.imul(_,ee)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,ee)|0,i=i+Math.imul(E,ne)|0,r=(r=r+Math.imul(E,ie)|0)+Math.imul(S,ne)|0,o=o+Math.imul(S,ie)|0,i=i+Math.imul(v,oe)|0,r=(r=r+Math.imul(v,se)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,se)|0,i=i+Math.imul(f,ce)|0,r=(r=r+Math.imul(f,le)|0)+Math.imul(m,ce)|0,o=o+Math.imul(m,le)|0;var Te=(l+(i=i+Math.imul(d,de)|0)|0)+((8191&(r=(r=r+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;l=((o=o+Math.imul(h,he)|0)+(r>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(U,j),r=(r=Math.imul(U,H))+Math.imul(B,j)|0,o=Math.imul(B,H),i=i+Math.imul(N,q)|0,r=(r=r+Math.imul(N,V)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,V)|0,i=i+Math.imul(R,W)|0,r=(r=r+Math.imul(R,z)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,z)|0,i=i+Math.imul(M,X)|0,r=(r=r+Math.imul(M,J)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,J)|0,i=i+Math.imul(C,Z)|0,r=(r=r+Math.imul(C,ee)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,ee)|0,i=i+Math.imul(_,ne)|0,r=(r=r+Math.imul(_,ie)|0)+Math.imul(T,ne)|0,o=o+Math.imul(T,ie)|0,i=i+Math.imul(E,oe)|0,r=(r=r+Math.imul(E,se)|0)+Math.imul(S,oe)|0,o=o+Math.imul(S,se)|0,i=i+Math.imul(v,ce)|0,r=(r=r+Math.imul(v,le)|0)+Math.imul(y,ce)|0,o=o+Math.imul(y,le)|0,i=i+Math.imul(f,de)|0,r=(r=r+Math.imul(f,he)|0)+Math.imul(m,de)|0,o=o+Math.imul(m,he)|0;var xe=(l+(i=i+Math.imul(d,fe)|0)|0)+((8191&(r=(r=r+Math.imul(d,me)|0)+Math.imul(h,fe)|0))<<13)|0;l=((o=o+Math.imul(h,me)|0)+(r>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(U,q),r=(r=Math.imul(U,V))+Math.imul(B,q)|0,o=Math.imul(B,V),i=i+Math.imul(N,W)|0,r=(r=r+Math.imul(N,z)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,z)|0,i=i+Math.imul(R,X)|0,r=(r=r+Math.imul(R,J)|0)+Math.imul(L,X)|0,o=o+Math.imul(L,J)|0,i=i+Math.imul(M,Z)|0,r=(r=r+Math.imul(M,ee)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,ee)|0,i=i+Math.imul(C,ne)|0,r=(r=r+Math.imul(C,ie)|0)+Math.imul(I,ne)|0,o=o+Math.imul(I,ie)|0,i=i+Math.imul(_,oe)|0,r=(r=r+Math.imul(_,se)|0)+Math.imul(T,oe)|0,o=o+Math.imul(T,se)|0,i=i+Math.imul(E,ce)|0,r=(r=r+Math.imul(E,le)|0)+Math.imul(S,ce)|0,o=o+Math.imul(S,le)|0,i=i+Math.imul(v,de)|0,r=(r=r+Math.imul(v,he)|0)+Math.imul(y,de)|0,o=o+Math.imul(y,he)|0;var Ce=(l+(i=i+Math.imul(f,fe)|0)|0)+((8191&(r=(r=r+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;l=((o=o+Math.imul(m,me)|0)+(r>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(U,W),r=(r=Math.imul(U,z))+Math.imul(B,W)|0,o=Math.imul(B,z),i=i+Math.imul(N,X)|0,r=(r=r+Math.imul(N,J)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,J)|0,i=i+Math.imul(R,Z)|0,r=(r=r+Math.imul(R,ee)|0)+Math.imul(L,Z)|0,o=o+Math.imul(L,ee)|0,i=i+Math.imul(M,ne)|0,r=(r=r+Math.imul(M,ie)|0)+Math.imul(A,ne)|0,o=o+Math.imul(A,ie)|0,i=i+Math.imul(C,oe)|0,r=(r=r+Math.imul(C,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,i=i+Math.imul(_,ce)|0,r=(r=r+Math.imul(_,le)|0)+Math.imul(T,ce)|0,o=o+Math.imul(T,le)|0,i=i+Math.imul(E,de)|0,r=(r=r+Math.imul(E,he)|0)+Math.imul(S,de)|0,o=o+Math.imul(S,he)|0;var Ie=(l+(i=i+Math.imul(v,fe)|0)|0)+((8191&(r=(r=r+Math.imul(v,me)|0)+Math.imul(y,fe)|0))<<13)|0;l=((o=o+Math.imul(y,me)|0)+(r>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(U,X),r=(r=Math.imul(U,J))+Math.imul(B,X)|0,o=Math.imul(B,J),i=i+Math.imul(N,Z)|0,r=(r=r+Math.imul(N,ee)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,ee)|0,i=i+Math.imul(R,ne)|0,r=(r=r+Math.imul(R,ie)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,ie)|0,i=i+Math.imul(M,oe)|0,r=(r=r+Math.imul(M,se)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,se)|0,i=i+Math.imul(C,ce)|0,r=(r=r+Math.imul(C,le)|0)+Math.imul(I,ce)|0,o=o+Math.imul(I,le)|0,i=i+Math.imul(_,de)|0,r=(r=r+Math.imul(_,he)|0)+Math.imul(T,de)|0,o=o+Math.imul(T,he)|0;var ke=(l+(i=i+Math.imul(E,fe)|0)|0)+((8191&(r=(r=r+Math.imul(E,me)|0)+Math.imul(S,fe)|0))<<13)|0;l=((o=o+Math.imul(S,me)|0)+(r>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(U,Z),r=(r=Math.imul(U,ee))+Math.imul(B,Z)|0,o=Math.imul(B,ee),i=i+Math.imul(N,ne)|0,r=(r=r+Math.imul(N,ie)|0)+Math.imul(P,ne)|0,o=o+Math.imul(P,ie)|0,i=i+Math.imul(R,oe)|0,r=(r=r+Math.imul(R,se)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,se)|0,i=i+Math.imul(M,ce)|0,r=(r=r+Math.imul(M,le)|0)+Math.imul(A,ce)|0,o=o+Math.imul(A,le)|0,i=i+Math.imul(C,de)|0,r=(r=r+Math.imul(C,he)|0)+Math.imul(I,de)|0,o=o+Math.imul(I,he)|0;var Me=(l+(i=i+Math.imul(_,fe)|0)|0)+((8191&(r=(r=r+Math.imul(_,me)|0)+Math.imul(T,fe)|0))<<13)|0;l=((o=o+Math.imul(T,me)|0)+(r>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(U,ne),r=(r=Math.imul(U,ie))+Math.imul(B,ne)|0,o=Math.imul(B,ie),i=i+Math.imul(N,oe)|0,r=(r=r+Math.imul(N,se)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,se)|0,i=i+Math.imul(R,ce)|0,r=(r=r+Math.imul(R,le)|0)+Math.imul(L,ce)|0,o=o+Math.imul(L,le)|0,i=i+Math.imul(M,de)|0,r=(r=r+Math.imul(M,he)|0)+Math.imul(A,de)|0,o=o+Math.imul(A,he)|0;var Ae=(l+(i=i+Math.imul(C,fe)|0)|0)+((8191&(r=(r=r+Math.imul(C,me)|0)+Math.imul(I,fe)|0))<<13)|0;l=((o=o+Math.imul(I,me)|0)+(r>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(U,oe),r=(r=Math.imul(U,se))+Math.imul(B,oe)|0,o=Math.imul(B,se),i=i+Math.imul(N,ce)|0,r=(r=r+Math.imul(N,le)|0)+Math.imul(P,ce)|0,o=o+Math.imul(P,le)|0,i=i+Math.imul(R,de)|0,r=(r=r+Math.imul(R,he)|0)+Math.imul(L,de)|0,o=o+Math.imul(L,he)|0;var Oe=(l+(i=i+Math.imul(M,fe)|0)|0)+((8191&(r=(r=r+Math.imul(M,me)|0)+Math.imul(A,fe)|0))<<13)|0;l=((o=o+Math.imul(A,me)|0)+(r>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(U,ce),r=(r=Math.imul(U,le))+Math.imul(B,ce)|0,o=Math.imul(B,le),i=i+Math.imul(N,de)|0,r=(r=r+Math.imul(N,he)|0)+Math.imul(P,de)|0,o=o+Math.imul(P,he)|0;var Re=(l+(i=i+Math.imul(R,fe)|0)|0)+((8191&(r=(r=r+Math.imul(R,me)|0)+Math.imul(L,fe)|0))<<13)|0;l=((o=o+Math.imul(L,me)|0)+(r>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(U,de),r=(r=Math.imul(U,he))+Math.imul(B,de)|0,o=Math.imul(B,he);var Le=(l+(i=i+Math.imul(N,fe)|0)|0)+((8191&(r=(r=r+Math.imul(N,me)|0)+Math.imul(P,fe)|0))<<13)|0;l=((o=o+Math.imul(P,me)|0)+(r>>>13)|0)+(Le>>>26)|0,Le&=67108863;var De=(l+(i=Math.imul(U,fe))|0)+((8191&(r=(r=Math.imul(U,me))+Math.imul(B,fe)|0))<<13)|0;return l=((o=Math.imul(B,me))+(r>>>13)|0)+(De>>>26)|0,De&=67108863,c[0]=ge,c[1]=ve,c[2]=ye,c[3]=be,c[4]=Ee,c[5]=Se,c[6]=we,c[7]=_e,c[8]=Te,c[9]=xe,c[10]=Ce,c[11]=Ie,c[12]=ke,c[13]=Me,c[14]=Ae,c[15]=Oe,c[16]=Re,c[17]=Le,c[18]=De,0!==l&&(c[19]=l,n.length++),n};function v(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var i=0,r=0,o=0;o<n.length-1;o++){var s=r;r=0;for(var a=67108863&i,c=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=c;l++){var u=o-l,d=(0|e.words[u])*(0|t.words[l]),h=67108863&d;a=67108863&(h=h+a|0),r+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}n.words[o]=a,i=s,s=r}return 0!==i?n.words[o]=i:n.length--,n._strip()}function y(e,t,n){return v(e,t,n)}function b(e,t){this.x=e,this.y=t}Math.imul||(g=m),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?g(this,e,t):n<63?m(this,e,t):n<1024?v(this,e,t):y(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,n,e);return t},b.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var i=0,r=0;r<t;r++)i|=(1&e)<<t-r-1,e>>=1;return i},b.prototype.permute=function(e,t,n,i,r,o){for(var s=0;s<o;s++)i[s]=t[e[s]],r[s]=n[e[s]]},b.prototype.transform=function(e,t,n,i,r,o){this.permute(o,e,t,n,i,r);for(var s=1;s<r;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),u=0;u<r;u+=a)for(var d=c,h=l,p=0;p<s;p++){var f=n[u+p],m=i[u+p],g=n[u+p+s],v=i[u+p+s],y=d*g-h*v;v=d*v+h*g,g=y,n[u+p]=f+g,i[u+p]=m+v,n[u+p+s]=f-g,i[u+p+s]=m-v,p!==a&&(y=c*d-l*h,h=c*h+l*d,d=y)}},b.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),i=1&n,r=0;for(n=n/2|0;n;n>>>=1)r++;return 1<<r+1+i},b.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var i=0;i<n/2;i++){var r=e[i];e[i]=e[n-i-1],e[n-i-1]=r,r=t[i],t[i]=-t[n-i-1],t[n-i-1]=-r}},b.prototype.normalize13b=function(e,t){for(var n=0,i=0;i<t/2;i++){var r=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+n;e[i]=67108863&r,n=r<67108864?0:r/67108864|0}return e},b.prototype.convert13b=function(e,t,n,r){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<r;++s)n[s]=0;i(0===o),i(0==(-8192&o))},b.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},b.prototype.mulp=function(e,t,n){var i=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(i),o=this.stub(i),s=new Array(i),a=new Array(i),c=new Array(i),l=new Array(i),u=new Array(i),d=new Array(i),h=n.words;h.length=i,this.convert13b(e.words,e.length,s,i),this.convert13b(t.words,t.length,l,i),this.transform(s,o,a,c,i,r),this.transform(l,o,u,d,i,r);for(var p=0;p<i;p++){var f=a[p]*u[p]-c[p]*d[p];c[p]=a[p]*d[p]+c[p]*u[p],a[p]=f}return this.conjugate(a,c,i),this.transform(a,c,h,o,i,r),this.conjugate(h,o,i),this.normalize13b(h,i),n.negative=e.negative^t.negative,n.length=e.length+t.length,n._strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),y(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),i("number"==typeof e),i(e<67108864);for(var n=0,r=0;r<this.length;r++){var o=(0|this.words[r])*e,s=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=s>>>26,this.words[r]=67108863&s}return 0!==n&&(this.words[r]=n,this.length++),t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var i=n/26|0,r=n%26;t[n]=e.words[i]>>>r&1}return t}(e);if(0===t.length)return new o(1);for(var n=this,i=0;i<t.length&&0===t[i];i++,n=n.sqr());if(++i<t.length)for(var r=n.sqr();i<t.length;i++,r=r.sqr())0!==t[i]&&(n=n.mul(r));return n},o.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,n=e%26,r=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,c=(0|this.words[t])-a<<n;this.words[t]=c|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;t<r;t++)this.words[t]=0;this.length+=r}return this._strip()},o.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var r;i("number"==typeof e&&e>=0),r=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,c=n;if(r-=s,r=Math.max(0,r),c){for(var l=0;l<s;l++)c.words[l]=this.words[l];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,l=0;l<this.length;l++)this.words[l]=this.words[l+s];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=r);l--){var d=0|this.words[l];this.words[l]=u<<26-o|d>>>o,u=d&a}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,n){return i(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,r=1<<t;return!(this.length<=n||!(this.words[n]&r))},o.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return i("number"==typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var r,o,s=e.length+n;this._expand(s);var a=0;for(r=0;r<e.length;r++){o=(0|this.words[r+n])+a;var c=(0|e.words[r])*t;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[r+n]=67108863&o}for(;r<this.length-n;r++)a=(o=(0|this.words[r+n])+a)>>26,this.words[r+n]=67108863&o;if(0===a)return this._strip();for(i(-1===a),a=0,r=0;r<this.length;r++)a=(o=-(0|this.words[r])+a)>>26,this.words[r]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var n=(this.length,e.length),i=this.clone(),r=e,s=0|r.words[r.length-1];0!=(n=26-this._countBits(s))&&(r=r.ushln(n),i.iushln(n),s=0|r.words[r.length-1]);var a,c=i.length-r.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var u=i.clone()._ishlnsubmul(r,1,c);0===u.negative&&(i=u,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|i.words[r.length+d])+(0|i.words[r.length+d-1]);for(h=Math.min(h/s|0,67108863),i._ishlnsubmul(r,h,d);0!==i.negative;)h--,i.negative=0,i._ishlnsubmul(r,1,d),i.isZero()||(i.negative^=1);a&&(a.words[d]=h)}return a&&a._strip(),i._strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:a||null,mod:i}},o.prototype.divmod=function(e,t,n){return i(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(r=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:r,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(r=a.div.neg()),{div:r,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var r,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),r=e.andln(1),o=n.cmp(i);return o<0||1===r&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var n=(1<<26)%e,r=0,o=this.length-1;o>=0;o--)r=(n*r+(0|this.words[o]))%e;return t?-r:r},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var n=0,r=this.length-1;r>=0;r--){var o=(0|this.words[r])+67108864*n;this.words[r]=o/e|0,n=o%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new o(1),s=new o(0),a=new o(0),c=new o(1),l=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++l;for(var u=n.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0==(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(d)),r.iushrn(1),s.iushrn(1);for(var f=0,m=1;0==(n.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(u),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),r.isub(a),s.isub(c)):(n.isub(t),a.isub(r),c.isub(s))}return{a,b:c,gcd:n.iushln(l)}},o.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r,s=new o(1),a=new o(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var l=0,u=1;0==(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,h=1;0==(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(r=0===t.cmpn(1)?s:a).cmpn(0)<0&&r.iadd(e),r},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var i=0;t.isEven()&&n.isEven();i++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var r=t.cmp(n);if(r<0){var o=t;t=n,n=o}else if(0===r||0===n.cmpn(1))break;t.isub(n)}return n.iushln(i)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,n=(e-t)/26,r=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=r,this;for(var o=r,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),i(e<=67108863,"Number is too big");var r=0|this.words[0];t=r===e?0:r<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],r=0|e.words[n];if(i!==r){i<r?t=-1:i>r&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new C(e)},o.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var E={k256:null,p224:null,p192:null,p25519:null};function S(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){S.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){S.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function T(){S.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){S.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function C(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function I(e){C.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},S.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},S.prototype.split=function(e,t){e.iushrn(this.n,0,t)},S.prototype.imulK=function(e){return e.imul(this.k)},r(w,S),w.prototype.split=function(e,t){for(var n=4194303,i=Math.min(e.length,9),r=0;r<i;r++)t.words[r]=e.words[r];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,r=10;r<e.length;r++){var s=0|e.words[r];e.words[r-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,e.words[r-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var i=0|e.words[n];t+=977*i,e.words[n]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(_,S),r(T,S),r(x,S),x.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var i=19*(0|e.words[n])+t,r=67108863&i;i>>>=26,e.words[n]=r,t=i}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(E[e])return E[e];var t;if("k256"===e)t=new w;else if("p224"===e)t=new _;else if("p192"===e)t=new T;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new x}return E[e]=t,t},C.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},C.prototype._verify2=function(e,t){i(0==(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},C.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},C.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},C.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},C.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},C.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},C.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},C.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},C.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},C.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},C.prototype.isqr=function(e){return this.imul(e,e.clone())},C.prototype.sqr=function(e){return this.mul(e,e)},C.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var r=this.m.subn(1),s=0;!r.isZero()&&0===r.andln(1);)s++,r.iushrn(1);i(!r.isZero());var a=new o(1).toRed(this),c=a.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new o(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var d=this.pow(u,r),h=this.pow(e,r.addn(1).iushrn(1)),p=this.pow(e,r),f=s;0!==p.cmp(a);){for(var m=p,g=0;0!==m.cmp(a);g++)m=m.redSqr();i(g<f);var v=this.pow(d,new o(1).iushln(f-g-1));h=h.redMul(v),d=v.redSqr(),p=p.redMul(d),f=g}return h},C.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},C.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var r=n[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],u=c-1;u>=0;u--){var d=l>>u&1;r!==n[0]&&(r=this.sqr(r)),0!==d||0!==s?(s<<=1,s|=d,(4==++a||0===i&&0===u)&&(r=this.mul(r,n[s]),a=0,s=0)):a=0}c=26}return r},C.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},C.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new I(e)},r(I,C),I.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},I.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},I.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),o=r;return r.cmp(this.m)>=0?o=r.isub(this.m):r.cmpn(0)<0&&(o=r.iadd(this.m)),o._forceRed(this)},I.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),s=r;return r.cmp(this.m)>=0?s=r.isub(this.m):r.cmpn(0)<0&&(s=r.iadd(this.m)),s._forceRed(this)},I.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=n.nmd(e),this)},77191:(e,t,n)=>{const i=n(58162);e.exports=i("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},67295:(e,t,n)=>{var i=n(48764).Buffer;e.exports=function(e,t){for(var n=Math.min(e.length,t.length),r=new i(n),o=0;o<n;++o)r[o]=e[o]^t[o];return r}},30454:(e,t,n)=>{"use strict";n.d(t,{ML:()=>Kn,AE:()=>Ut});var i=n(24234),r=n(68568),o=n(91296),s=n.n(o),a=n(93096),c=n.n(a);const l={heading:'<svg width="16" height="16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 1v13.33M12.997 1v13.33M3 7.665h9.998" stroke="currentColor" stroke-width="1.33" stroke-linecap="round" stroke-linejoin="round"/></svg>',h1:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 8v32M25 8v32M6 24h19M34.226 24 39 19.017V40" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',h2:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 8v32M24 8v32M7 24h16M32 25c0-3.167 2.667-5 5-5s5 1.833 5 5c0 5.7-10 9.933-10 15h10" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',h3:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 8v32M24 8v32M7 24h16M32 20h10l-7 9c4 0 7 2 7 6s-3 5-5 5c-2.381 0-4-1-5-2.1" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',h4:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 8v32M24 8v32M7 24h16M39.977 40V20L31 32.997v2.023h12" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',h5:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 8v32M24 8v32M7 24h16M40 21.01h-8v7.024C32 28 34 27 37 27s4 2.534 4 6.5-1 6.5-5 6.5c-3 0-4-2-4-3.992" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',h6:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 8v32M24 8v32M7 24h16" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M36.5 40a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11z" stroke="currentColor" stroke-width="4"/><path d="M41.596 24.74C40.778 22.545 38.804 21 36.5 21c-3.038 0-5.5 2.686-5.5 6v7" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',bold:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M24 24c5.506 0 9.969-4.477 9.969-10S29.506 4 24 4H11v20h13zM28.031 44C33.537 44 38 39.523 38 34s-4.463-10-9.969-10H11v20h17.031z" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',italic:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 6h16M12 42h16M29 5.952 19 42" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',quote:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.853 9.116c-7.53 4.836-11.714 10.465-12.55 16.887C5 36 13.94 40.893 18.47 36.497 23 32.1 20.285 26.52 17.005 24.994c-3.28-1.525-5.286-.994-4.936-3.032.35-2.039 5.016-7.69 9.116-10.323a.749.749 0 0 0 .114-1.02L20.285 9.3c-.44-.572-.862-.55-1.432-.185zM38.679 9.116c-7.53 4.836-11.714 10.465-12.55 16.887-1.303 9.997 7.637 14.89 12.167 10.494 4.53-4.397 1.815-9.977-1.466-11.503-3.28-1.525-5.286-.994-4.936-3.032.35-2.039 5.017-7.69 9.117-10.323a.749.749 0 0 0 .113-1.02L40.11 9.3c-.44-.572-.862-.55-1.431-.185z" fill="currentColor"/></svg>',link:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m26.24 16.373-9.14-9.14c-2.661-2.661-7.035-2.603-9.769.131-2.733 2.734-2.792 7.107-.13 9.768l7.935 7.936M32.903 23.003l7.935 7.936c2.661 2.66 2.603 7.034-.13 9.768-2.735 2.734-7.108 2.792-9.77.131l-9.14-9.14" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M26.11 26.142c2.733-2.734 2.791-7.108.13-9.769M21.799 21.799c-2.734 2.733-2.793 7.107-.131 9.768" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',image:'<svg width="1em" height="1em" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" fill-rule="evenodd" d="M0 0h48v48H0z"/><g transform="translate(5 8)" stroke-width="4" stroke-linejoin="round" stroke="currentColor" fill="none"><path d="M2 0h34a2 2 0 0 1 2 2v28a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2z" stroke-linecap="round"/><circle stroke-linecap="round" cx="9.5" cy="8.5" r="1.5"/><path d="m10 16 5 4 6-7 17 13v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-4l10-10z"/></g></svg>',code:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 13 4 25.432 16 37M32 13l12 12.432L32 37" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="m28 4-7 40" stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>',codeBlock:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 4c-2 0-5 1-5 5v9c0 3-5 5-5 5s5 2 5 5v11c0 4 3 5 5 5M32 4c2 0 5 1 5 5v9c0 3 5 5 5 5s-5 2-5 5v11c0 4-3 5-5 5" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',ol:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 4v9M12 13H6M12 27H6M6 20s3-3 5 0-5 7-5 7M6 34.5s2-3 5-1 0 4.5 0 4.5 3 2.5 0 4.5-5-1-5-1M11 38H9M9 4 6 6M21 24h22M21 38h22M21 10h22" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',ul:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 42a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM9 14a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM9 28a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" stroke="currentColor" stroke-width="4" stroke-linejoin="round"/><path d="M21 24h22M21 38h22M21 10h22" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',hr:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 24h38M21 38h6M37 38h6M21 10h6M5 38h6M5 10h6M37 10h6" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',source:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"/><path d="M29.344 30.477c2.404-.5 4.585-1.366 6.28-2.638C38.52 25.668 40 22.314 40 19c0-2.325-.881-4.495-2.407-6.333-.85-1.024 1.636-8.667-.573-7.638-2.21 1.03-5.45 3.308-7.147 2.805A20.712 20.712 0 0 0 24 7c-1.8 0-3.532.223-5.147.635C16.505 8.232 14.259 6 12 5.029c-2.26-.97-1.026 6.934-1.697 7.766C8.84 14.605 8 16.729 8 19c0 3.314 1.79 6.668 4.686 8.84 1.93 1.446 4.348 2.368 7.054 2.822M19.74 30.662c-1.158 1.275-1.738 2.486-1.738 3.633v8.716M29.344 30.477c1.098 1.44 1.647 2.734 1.647 3.88v8.654M6 31.216c.899.11 1.566.523 2 1.24.652 1.074 3.074 5.062 5.825 5.062h4.177" stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>',fullscreenOn:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M33 6h9v9M42 33v9h-9M15 42H6v-9M6 15V6h9" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',fullscreenOff:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M33 6v9h9M15 6v9H6M15 42v-9H6M33 42v-9h8.9" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',help:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 6H9a3 3 0 0 0-3 3v30a3 3 0 0 0 3 3h30a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3z" stroke="currentColor" stroke-width="4" stroke-linejoin="round"/><path d="M24 28.625v-4a6 6 0 1 0-6-6" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path fill-rule="evenodd" clip-rule="evenodd" d="M24 37.625a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z" fill="currentColor"/></svg>',toc:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 6H9a3 3 0 0 0-3 3v30a3 3 0 0 0 3 3h30a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3z" stroke="currentColor" stroke-width="4" stroke-linejoin="round"/><path d="M26 24H14M34 15H14M32 33H14" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',close:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"/><path d="m8 8 32 32M8 40 40 8" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',left:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="6" y="6" width="28" height="36" rx="2" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 6v36" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',right:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="14" y="6" width="28" height="36" rx="2" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 6v36" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',more:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z"/><circle cx="12" cy="24" r="3" fill="currentColor"/><circle cx="24" cy="24" r="3" fill="currentColor"/><circle cx="36" cy="24" r="3" fill="currentColor"/></svg>',keyboard:'<svg width="1em" height="1em" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M42 7H6a2 2 0 0 0-2 2v28a2 2 0 0 0 2 2h36a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z" stroke="currentColor" stroke-width="4" stroke-linejoin="round"/><path d="M12 19h2M21 19h2M29 19h7M12 28h24" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>'};function u(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function d(e){return e instanceof u(e).Element||e instanceof Element}function h(e){return e instanceof u(e).HTMLElement||e instanceof HTMLElement}function p(e){return"undefined"!=typeof ShadowRoot&&(e instanceof u(e).ShadowRoot||e instanceof ShadowRoot)}var f=Math.max,m=Math.min,g=Math.round;function v(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),i=1,r=1;if(h(e)&&t){var o=e.offsetHeight,s=e.offsetWidth;s>0&&(i=g(n.width)/s||1),o>0&&(r=g(n.height)/o||1)}return{width:n.width/i,height:n.height/r,top:n.top/r,right:n.right/i,bottom:n.bottom/r,left:n.left/i,x:n.left/i,y:n.top/r}}function y(e){var t=u(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function b(e){return e?(e.nodeName||"").toLowerCase():null}function E(e){return((d(e)?e.ownerDocument:e.document)||window.document).documentElement}function S(e){return v(E(e)).left+y(e).scrollLeft}function w(e){return u(e).getComputedStyle(e)}function _(e){var t=w(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function T(e,t,n){void 0===n&&(n=!1);var i,r,o=h(t),s=h(t)&&function(e){var t=e.getBoundingClientRect(),n=g(t.width)/e.offsetWidth||1,i=g(t.height)/e.offsetHeight||1;return 1!==n||1!==i}(t),a=E(t),c=v(e,s),l={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(o||!o&&!n)&&(("body"!==b(t)||_(a))&&(l=(i=t)!==u(i)&&h(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:y(i)),h(t)?((d=v(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):a&&(d.x=S(a))),{x:c.left+l.scrollLeft-d.x,y:c.top+l.scrollTop-d.y,width:c.width,height:c.height}}function x(e){var t=v(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function C(e){return"html"===b(e)?e:e.assignedSlot||e.parentNode||(p(e)?e.host:null)||E(e)}function I(e){return["html","body","#document"].indexOf(b(e))>=0?e.ownerDocument.body:h(e)&&_(e)?e:I(C(e))}function k(e,t){var n;void 0===t&&(t=[]);var i=I(e),r=i===(null==(n=e.ownerDocument)?void 0:n.body),o=u(i),s=r?[o].concat(o.visualViewport||[],_(i)?i:[]):i,a=t.concat(s);return r?a:a.concat(k(C(s)))}function M(e){return["table","td","th"].indexOf(b(e))>=0}function A(e){return h(e)&&"fixed"!==w(e).position?e.offsetParent:null}function O(e){for(var t=u(e),n=A(e);n&&M(n)&&"static"===w(n).position;)n=A(n);return n&&("html"===b(n)||"body"===b(n)&&"static"===w(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&h(e)&&"fixed"===w(e).position)return null;for(var n=C(e);h(n)&&["html","body"].indexOf(b(n))<0;){var i=w(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e)||t}var R="top",L="bottom",D="right",N="left",P="auto",$=[R,L,D,N],U="start",B="end",F="viewport",j="popper",H=$.reduce((function(e,t){return e.concat([t+"-"+U,t+"-"+B])}),[]),K=[].concat($,[P]).reduce((function(e,t){return e.concat([t,t+"-"+U,t+"-"+B])}),[]),q=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function V(e){var t=new Map,n=new Set,i=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var i=t.get(e);i&&r(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||r(e)})),i}var G={placement:"bottom",modifiers:[],strategy:"absolute"};function W(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function z(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,r=t.defaultOptions,o=void 0===r?G:r;return function(e,t,n){void 0===n&&(n=o);var r,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},G,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],l=!1,u={state:a,setOptions:function(n){var r="function"==typeof n?n(a.options):n;h(),a.options=Object.assign({},o,a.options,r),a.scrollParents={reference:d(e)?k(e):e.contextElement?k(e.contextElement):[],popper:k(t)};var s,l,p=function(e){var t=V(e);return q.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((s=[].concat(i,a.options.modifiers),l=s.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(l).map((function(e){return l[e]}))));return a.orderedModifiers=p.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,i=void 0===n?{}:n,r=e.effect;if("function"==typeof r){var o=r({state:a,name:t,instance:u,options:i});c.push(o||function(){})}})),u.update()},forceUpdate:function(){if(!l){var e=a.elements,t=e.reference,n=e.popper;if(W(t,n)){a.rects={reference:T(t,O(n),"fixed"===a.options.strategy),popper:x(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var r=a.orderedModifiers[i],o=r.fn,s=r.options,c=void 0===s?{}:s,d=r.name;"function"==typeof o&&(a=o({state:a,options:c,name:d,instance:u})||a)}else a.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(e){u.forceUpdate(),e(a)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(r())}))}))),s}),destroy:function(){h(),l=!0}};if(!W(e,t))return u;function h(){c.forEach((function(e){return e()})),c=[]}return u.setOptions(n).then((function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var Y={passive:!0};const X={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=void 0===r||r,s=i.resize,a=void 0===s||s,c=u(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&l.forEach((function(e){e.addEventListener("scroll",n.update,Y)})),a&&c.addEventListener("resize",n.update,Y),function(){o&&l.forEach((function(e){e.removeEventListener("scroll",n.update,Y)})),a&&c.removeEventListener("resize",n.update,Y)}},data:{}};function J(e){return e.split("-")[0]}function Q(e){return e.split("-")[1]}function Z(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ee(e){var t,n=e.reference,i=e.element,r=e.placement,o=r?J(r):null,s=r?Q(r):null,a=n.x+n.width/2-i.width/2,c=n.y+n.height/2-i.height/2;switch(o){case R:t={x:a,y:n.y-i.height};break;case L:t={x:a,y:n.y+n.height};break;case D:t={x:n.x+n.width,y:c};break;case N:t={x:n.x-i.width,y:c};break;default:t={x:n.x,y:n.y}}var l=o?Z(o):null;if(null!=l){var u="y"===l?"height":"width";switch(s){case U:t[l]=t[l]-(n[u]/2-i[u]/2);break;case B:t[l]=t[l]+(n[u]/2-i[u]/2)}}return t}var te={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ne(e){var t,n=e.popper,i=e.popperRect,r=e.placement,o=e.variation,s=e.offsets,a=e.position,c=e.gpuAcceleration,l=e.adaptive,d=e.roundOffsets,h=e.isFixed,p=s.x,f=void 0===p?0:p,m=s.y,v=void 0===m?0:m,y="function"==typeof d?d({x:f,y:v}):{x:f,y:v};f=y.x,v=y.y;var b=s.hasOwnProperty("x"),S=s.hasOwnProperty("y"),_=N,T=R,x=window;if(l){var C=O(n),I="clientHeight",k="clientWidth";C===u(n)&&"static"!==w(C=E(n)).position&&"absolute"===a&&(I="scrollHeight",k="scrollWidth"),(r===R||(r===N||r===D)&&o===B)&&(T=L,v-=(h&&x.visualViewport?x.visualViewport.height:C[I])-i.height,v*=c?1:-1),r!==N&&(r!==R&&r!==L||o!==B)||(_=D,f-=(h&&x.visualViewport?x.visualViewport.width:C[k])-i.width,f*=c?1:-1)}var M,A=Object.assign({position:a},l&&te),P=!0===d?function(e){var t=e.x,n=e.y,i=window.devicePixelRatio||1;return{x:g(t*i)/i||0,y:g(n*i)/i||0}}({x:f,y:v}):{x:f,y:v};return f=P.x,v=P.y,c?Object.assign({},A,((M={})[T]=S?"0":"",M[_]=b?"0":"",M.transform=(x.devicePixelRatio||1)<=1?"translate("+f+"px, "+v+"px)":"translate3d("+f+"px, "+v+"px, 0)",M)):Object.assign({},A,((t={})[T]=S?v+"px":"",t[_]=b?f+"px":"",t.transform="",t))}const ie={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},r=t.elements[e];h(r)&&b(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(e){var t=i[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],r=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});h(i)&&b(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]};var re={left:"right",right:"left",bottom:"top",top:"bottom"};function oe(e){return e.replace(/left|right|bottom|top/g,(function(e){return re[e]}))}var se={start:"end",end:"start"};function ae(e){return e.replace(/start|end/g,(function(e){return se[e]}))}function ce(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&p(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function le(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ue(e,t){return t===F?le(function(e){var t=u(e),n=E(e),i=t.visualViewport,r=n.clientWidth,o=n.clientHeight,s=0,a=0;return i&&(r=i.width,o=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=i.offsetLeft,a=i.offsetTop)),{width:r,height:o,x:s+S(e),y:a}}(e)):d(t)?function(e){var t=v(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):le(function(e){var t,n=E(e),i=y(e),r=null==(t=e.ownerDocument)?void 0:t.body,o=f(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=f(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+S(e),c=-i.scrollTop;return"rtl"===w(r||n).direction&&(a+=f(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}(E(e)))}function de(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function he(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function pe(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=void 0===i?e.placement:i,o=n.boundary,s=void 0===o?"clippingParents":o,a=n.rootBoundary,c=void 0===a?F:a,l=n.elementContext,u=void 0===l?j:l,p=n.altBoundary,g=void 0!==p&&p,y=n.padding,S=void 0===y?0:y,_=de("number"!=typeof S?S:he(S,$)),T=u===j?"reference":j,x=e.rects.popper,I=e.elements[g?T:u],M=function(e,t,n){var i="clippingParents"===t?function(e){var t=k(C(e)),n=["absolute","fixed"].indexOf(w(e).position)>=0&&h(e)?O(e):e;return d(n)?t.filter((function(e){return d(e)&&ce(e,n)&&"body"!==b(e)})):[]}(e):[].concat(t),r=[].concat(i,[n]),o=r[0],s=r.reduce((function(t,n){var i=ue(e,n);return t.top=f(i.top,t.top),t.right=m(i.right,t.right),t.bottom=m(i.bottom,t.bottom),t.left=f(i.left,t.left),t}),ue(e,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}(d(I)?I:I.contextElement||E(e.elements.popper),s,c),A=v(e.elements.reference),N=ee({reference:A,element:x,strategy:"absolute",placement:r}),P=le(Object.assign({},x,N)),U=u===j?P:A,B={top:M.top-U.top+_.top,bottom:U.bottom-M.bottom+_.bottom,left:M.left-U.left+_.left,right:U.right-M.right+_.right},H=e.modifiersData.offset;if(u===j&&H){var K=H[r];Object.keys(B).forEach((function(e){var t=[D,L].indexOf(e)>=0?1:-1,n=[R,L].indexOf(e)>=0?"y":"x";B[e]+=K[n]*t}))}return B}function fe(e,t,n){return f(e,m(t,n))}function me(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ge(e){return[R,D,L,N].some((function(t){return e[t]>=0}))}var ve=z({defaultModifiers:[X,{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ee({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,c=void 0===a||a,l={placement:J(t.placement),variation:Q(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ne(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ne(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},ie,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.offset,o=void 0===r?[0,0]:r,s=K.reduce((function(e,n){return e[n]=function(e,t,n){var i=J(e),r=[N,R].indexOf(i)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[N,D].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],c=a.x,l=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[i]=s}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0===s||s,c=n.fallbackPlacements,l=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,v=J(g),y=c||(v!==g&&f?function(e){if(J(e)===P)return[];var t=oe(e);return[ae(e),t,ae(t)]}(g):[oe(g)]),b=[g].concat(y).reduce((function(e,n){return e.concat(J(n)===P?function(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?K:c,u=Q(i),d=u?a?H:H.filter((function(e){return Q(e)===u})):$,h=d.filter((function(e){return l.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,n){return t[n]=pe(e,{placement:n,boundary:r,rootBoundary:o,padding:s})[J(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:d,padding:l,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),E=t.rects.reference,S=t.rects.popper,w=new Map,_=!0,T=b[0],x=0;x<b.length;x++){var C=b[x],I=J(C),k=Q(C)===U,M=[R,L].indexOf(I)>=0,A=M?"width":"height",O=pe(t,{placement:C,boundary:u,rootBoundary:d,altBoundary:h,padding:l}),B=M?k?D:N:k?L:R;E[A]>S[A]&&(B=oe(B));var F=oe(B),j=[];if(o&&j.push(O[I]<=0),a&&j.push(O[B]<=0,O[F]<=0),j.every((function(e){return e}))){T=C,_=!1;break}w.set(C,j)}if(_)for(var q=function(e){var t=b.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return T=t,"break"},V=f?3:1;V>0&&"break"!==q(V);V--);t.placement!==T&&(t.modifiersData[i]._skip=!0,t.placement=T,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0!==s&&s,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=void 0===h||h,g=n.tetherOffset,v=void 0===g?0:g,y=pe(t,{boundary:c,rootBoundary:l,padding:d,altBoundary:u}),b=J(t.placement),E=Q(t.placement),S=!E,w=Z(b),_="x"===w?"y":"x",T=t.modifiersData.popperOffsets,C=t.rects.reference,I=t.rects.popper,k="function"==typeof v?v(Object.assign({},t.rects,{placement:t.placement})):v,M="number"==typeof k?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(T){if(o){var $,B="y"===w?R:N,F="y"===w?L:D,j="y"===w?"height":"width",H=T[w],K=H+y[B],q=H-y[F],V=p?-I[j]/2:0,G=E===U?C[j]:I[j],W=E===U?-I[j]:-C[j],z=t.elements.arrow,Y=p&&z?x(z):{width:0,height:0},X=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ee=X[B],te=X[F],ne=fe(0,C[j],Y[j]),ie=S?C[j]/2-V-ne-ee-M.mainAxis:G-ne-ee-M.mainAxis,re=S?-C[j]/2+V+ne+te+M.mainAxis:W+ne+te+M.mainAxis,oe=t.elements.arrow&&O(t.elements.arrow),se=oe?"y"===w?oe.clientTop||0:oe.clientLeft||0:0,ae=null!=($=null==A?void 0:A[w])?$:0,ce=H+re-ae,le=fe(p?m(K,H+ie-ae-se):K,H,p?f(q,ce):q);T[w]=le,P[w]=le-H}if(a){var ue,de="x"===w?R:N,he="x"===w?L:D,me=T[_],ge="y"===_?"height":"width",ve=me+y[de],ye=me-y[he],be=-1!==[R,N].indexOf(b),Ee=null!=(ue=null==A?void 0:A[_])?ue:0,Se=be?ve:me-C[ge]-I[ge]-Ee+M.altAxis,we=be?me+C[ge]+I[ge]-Ee-M.altAxis:ye,_e=p&&be?function(e,t,n){var i=fe(e,t,n);return i>n?n:i}(Se,me,we):fe(p?Se:ve,me,p?we:ye);T[_]=_e,P[_]=_e-me}t.modifiersData[i]=P}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,r=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=J(n.placement),c=Z(a),l=[N,D].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(e,t){return de("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:he(e,$))}(r.padding,n),d=x(o),h="y"===c?R:N,p="y"===c?L:D,f=n.rects.reference[l]+n.rects.reference[c]-s[c]-n.rects.popper[l],m=s[c]-n.rects.reference[c],g=O(o),v=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,y=f/2-m/2,b=u[h],E=v-d[l]-u[p],S=v/2-d[l]/2+y,w=fe(b,S,E),_=c;n.modifiersData[i]=((t={})[_]=w,t.centerOffset=w-S,t)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&ce(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,s=pe(t,{elementContext:"reference"}),a=pe(t,{altBoundary:!0}),c=me(s,i),l=me(a,r,o),u=ge(c),d=ge(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),ye=(n(25108),"tippy-content"),be="tippy-arrow",Ee="tippy-svg-arrow",Se={passive:!0,capture:!0},we=function(){return document.body};function _e(e,t,n){if(Array.isArray(e)){var i=e[t];return null==i?Array.isArray(n)?n[t]:n:i}return e}function Te(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function xe(e,t){return"function"==typeof e?e.apply(void 0,t):e}function Ce(e,t){return 0===t?e:function(i){clearTimeout(n),n=setTimeout((function(){e(i)}),t)};var n}function Ie(e){return[].concat(e)}function ke(e,t){-1===e.indexOf(t)&&e.push(t)}function Me(e){return[].slice.call(e)}function Ae(e){return Object.keys(e).reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{})}function Oe(){return document.createElement("div")}function Re(e){return["Element","Fragment"].some((function(t){return Te(e,t)}))}function Le(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function De(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function Ne(e,t,n){var i=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[i](t,n)}))}function Pe(e,t){for(var n=t;n;){var i;if(e.contains(n))return!0;n=null==n.getRootNode||null==(i=n.getRootNode())?void 0:i.host}return!1}var $e={isTouch:!1},Ue=0;function Be(){$e.isTouch||($e.isTouch=!0,window.performance&&document.addEventListener("mousemove",Fe))}function Fe(){var e=performance.now();e-Ue<20&&($e.isTouch=!1,document.removeEventListener("mousemove",Fe)),Ue=e}function je(){var e,t=document.activeElement;if((e=t)&&e._tippy&&e._tippy.reference===e){var n=t._tippy;t.blur&&!n.state.isVisible&&t.blur()}}var He=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto),Ke=Object.assign({appendTo:we,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),qe=Object.keys(Ke);function Ve(e){var t=(e.plugins||[]).reduce((function(t,n){var i,r=n.name,o=n.defaultValue;return r&&(t[r]=void 0!==e[r]?e[r]:null!=(i=Ke[r])?i:o),t}),{});return Object.assign({},e,t)}function Ge(e,t){var n=Object.assign({},t,{content:xe(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(Ve(Object.assign({},Ke,{plugins:t}))):qe).reduce((function(t,n){var i=(e.getAttribute("data-tippy-"+n)||"").trim();if(!i)return t;if("content"===n)t[n]=i;else try{t[n]=JSON.parse(i)}catch(e){t[n]=i}return t}),{})}(e,t.plugins));return n.aria=Object.assign({},Ke.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}function We(e,t){e.innerHTML=t}function ze(e){var t=Oe();return!0===e?t.className=be:(t.className=Ee,Re(e)?t.appendChild(e):We(t,e)),t}function Ye(e,t){Re(t.content)?(We(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?We(e,t.content):e.textContent=t.content)}function Xe(e){var t=e.firstElementChild,n=Me(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(ye)})),arrow:n.find((function(e){return e.classList.contains(be)||e.classList.contains(Ee)})),backdrop:n.find((function(e){return e.classList.contains("tippy-backdrop")}))}}function Je(e){var t=Oe(),n=Oe();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=Oe();function r(n,i){var r=Xe(t),o=r.box,s=r.content,a=r.arrow;i.theme?o.setAttribute("data-theme",i.theme):o.removeAttribute("data-theme"),"string"==typeof i.animation?o.setAttribute("data-animation",i.animation):o.removeAttribute("data-animation"),i.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof i.maxWidth?i.maxWidth+"px":i.maxWidth,i.role?o.setAttribute("role",i.role):o.removeAttribute("role"),n.content===i.content&&n.allowHTML===i.allowHTML||Ye(s,e.props),i.arrow?a?n.arrow!==i.arrow&&(o.removeChild(a),o.appendChild(ze(i.arrow))):o.appendChild(ze(i.arrow)):a&&o.removeChild(a)}return i.className=ye,i.setAttribute("data-state","hidden"),Ye(i,e.props),t.appendChild(n),n.appendChild(i),r(e.props,e.props),{popper:t,onUpdate:r}}Je.$$tippy=!0;var Qe=1,Ze=[],et=[];function tt(e,t){var n,i,r,o,s,a,c,l,u=Ge(e,Object.assign({},Ke,Ve(Ae(t)))),d=!1,h=!1,p=!1,f=!1,m=[],g=Ce(W,u.interactiveDebounce),v=Qe++,y=(l=u.plugins).filter((function(e,t){return l.indexOf(e)===t})),b={id:v,reference:e,popper:Oe(),popperInstance:null,props:u,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(i),cancelAnimationFrame(r)},setProps:function(t){if(!b.state.isDestroyed){L("onBeforeUpdate",[b,t]),V();var n=b.props,i=Ge(e,Object.assign({},n,Ae(t),{ignoreAttributes:!0}));b.props=i,q(),n.interactiveDebounce!==i.interactiveDebounce&&(P(),g=Ce(W,i.interactiveDebounce)),n.triggerTarget&&!i.triggerTarget?Ie(n.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):i.triggerTarget&&e.removeAttribute("aria-expanded"),N(),R(),w&&w(n,i),b.popperInstance&&(J(),Z().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)}))),L("onAfterUpdate",[b,t])}},setContent:function(e){b.setProps({content:e})},show:function(){var e=b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,i=$e.isTouch&&!b.props.touch,r=_e(b.props.duration,0,Ke.duration);if(!(e||t||n||i||k().hasAttribute("disabled")||(L("onShow",[b],!1),!1===b.props.onShow(b)))){if(b.state.isVisible=!0,I()&&(S.style.visibility="visible"),R(),F(),b.state.isMounted||(S.style.transition="none"),I()){var o=A();Le([o.box,o.content],0)}var s,c,l;a=function(){var e;if(b.state.isVisible&&!f){if(f=!0,S.offsetHeight,S.style.transition=b.props.moveTransition,I()&&b.props.animation){var t=A(),n=t.box,i=t.content;Le([n,i],r),De([n,i],"visible")}D(),N(),ke(et,b),null==(e=b.popperInstance)||e.forceUpdate(),L("onMount",[b]),b.props.animation&&I()&&function(e,t){H(e,(function(){b.state.isShown=!0,L("onShown",[b])}))}(r)}},c=b.props.appendTo,l=k(),(s=b.props.interactive&&c===we||"parent"===c?l.parentNode:xe(c,[l])).contains(S)||s.appendChild(S),b.state.isMounted=!0,J()}},hide:function(){var e=!b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,i=_e(b.props.duration,1,Ke.duration);if(!(e||t||n)&&(L("onHide",[b],!1),!1!==b.props.onHide(b))){if(b.state.isVisible=!1,b.state.isShown=!1,f=!1,d=!1,I()&&(S.style.visibility="hidden"),P(),j(),R(!0),I()){var r=A(),o=r.box,s=r.content;b.props.animation&&(Le([o,s],i),De([o,s],"hidden"))}D(),N(),b.props.animation?I()&&function(e,t){H(e,(function(){!b.state.isVisible&&S.parentNode&&S.parentNode.contains(S)&&t()}))}(i,b.unmount):b.unmount()}},hideWithInteractivity:function(e){M().addEventListener("mousemove",g),ke(Ze,g),g(e)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){b.state.isVisible&&b.hide(),b.state.isMounted&&(Q(),Z().forEach((function(e){e._tippy.unmount()})),S.parentNode&&S.parentNode.removeChild(S),et=et.filter((function(e){return e!==b})),b.state.isMounted=!1,L("onHidden",[b]))},destroy:function(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),V(),delete e._tippy,b.state.isDestroyed=!0,L("onDestroy",[b]))}};if(!u.render)return b;var E=u.render(b),S=E.popper,w=E.onUpdate;S.setAttribute("data-tippy-root",""),S.id="tippy-"+b.id,b.popper=S,e._tippy=b,S._tippy=b;var _=y.map((function(e){return e.fn(b)})),T=e.hasAttribute("aria-expanded");return q(),N(),R(),L("onCreate",[b]),u.showOnCreate&&ee(),S.addEventListener("mouseenter",(function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()})),S.addEventListener("mouseleave",(function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&M().addEventListener("mousemove",g)})),b;function x(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function C(){return"hold"===x()[0]}function I(){var e;return!(null==(e=b.props.render)||!e.$$tippy)}function k(){return c||e}function M(){var e,t,n=k().parentNode;return n?null!=(t=Ie(n)[0])&&null!=(e=t.ownerDocument)&&e.body?t.ownerDocument:document:document}function A(){return Xe(S)}function O(e){return b.state.isMounted&&!b.state.isVisible||$e.isTouch||o&&"focus"===o.type?0:_e(b.props.delay,e?0:1,Ke.delay)}function R(e){void 0===e&&(e=!1),S.style.pointerEvents=b.props.interactive&&!e?"":"none",S.style.zIndex=""+b.props.zIndex}function L(e,t,n){var i;void 0===n&&(n=!0),_.forEach((function(n){n[e]&&n[e].apply(n,t)})),n&&(i=b.props)[e].apply(i,t)}function D(){var t=b.props.aria;if(t.content){var n="aria-"+t.content,i=S.id;Ie(b.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(n);if(b.state.isVisible)e.setAttribute(n,t?t+" "+i:i);else{var r=t&&t.replace(i,"").trim();r?e.setAttribute(n,r):e.removeAttribute(n)}}))}}function N(){!T&&b.props.aria.expanded&&Ie(b.props.triggerTarget||e).forEach((function(e){b.props.interactive?e.setAttribute("aria-expanded",b.state.isVisible&&e===k()?"true":"false"):e.removeAttribute("aria-expanded")}))}function P(){M().removeEventListener("mousemove",g),Ze=Ze.filter((function(e){return e!==g}))}function $(t){if(!$e.isTouch||!p&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!b.props.interactive||!Pe(S,n)){if(Ie(b.props.triggerTarget||e).some((function(e){return Pe(e,n)}))){if($e.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else L("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),h=!0,setTimeout((function(){h=!1})),b.state.isMounted||j())}}}function U(){p=!0}function B(){p=!1}function F(){var e=M();e.addEventListener("mousedown",$,!0),e.addEventListener("touchend",$,Se),e.addEventListener("touchstart",B,Se),e.addEventListener("touchmove",U,Se)}function j(){var e=M();e.removeEventListener("mousedown",$,!0),e.removeEventListener("touchend",$,Se),e.removeEventListener("touchstart",B,Se),e.removeEventListener("touchmove",U,Se)}function H(e,t){var n=A().box;function i(e){e.target===n&&(Ne(n,"remove",i),t())}if(0===e)return t();Ne(n,"remove",s),Ne(n,"add",i),s=i}function K(t,n,i){void 0===i&&(i=!1),Ie(b.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,n,i),m.push({node:e,eventType:t,handler:n,options:i})}))}function q(){var e;C()&&(K("touchstart",G,{passive:!0}),K("touchend",z,{passive:!0})),(e=b.props.trigger,e.split(/\s+/).filter(Boolean)).forEach((function(e){if("manual"!==e)switch(K(e,G),e){case"mouseenter":K("mouseleave",z);break;case"focus":K(He?"focusout":"blur",Y);break;case"focusin":K("focusout",Y)}}))}function V(){m.forEach((function(e){var t=e.node,n=e.eventType,i=e.handler,r=e.options;t.removeEventListener(n,i,r)})),m=[]}function G(e){var t,n=!1;if(b.state.isEnabled&&!X(e)&&!h){var i="focus"===(null==(t=o)?void 0:t.type);o=e,c=e.currentTarget,N(),!b.state.isVisible&&Te(e,"MouseEvent")&&Ze.forEach((function(t){return t(e)})),"click"===e.type&&(b.props.trigger.indexOf("mouseenter")<0||d)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:ee(e),"click"===e.type&&(d=!n),n&&!i&&te(e)}}function W(e){var t=e.target,n=k().contains(t)||S.contains(t);if("mousemove"!==e.type||!n){var i=Z().concat(S).map((function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:u}:null})).filter(Boolean);(function(e,t){var n=t.clientX,i=t.clientY;return e.every((function(e){var t=e.popperRect,r=e.popperState,o=e.props.interactiveBorder,s=r.placement.split("-")[0],a=r.modifiersData.offset;if(!a)return!0;var c="bottom"===s?a.top.y:0,l="top"===s?a.bottom.y:0,u="right"===s?a.left.x:0,d="left"===s?a.right.x:0,h=t.top-i+c>o,p=i-t.bottom-l>o,f=t.left-n+u>o,m=n-t.right-d>o;return h||p||f||m}))})(i,e)&&(P(),te(e))}}function z(e){X(e)||b.props.trigger.indexOf("click")>=0&&d||(b.props.interactive?b.hideWithInteractivity(e):te(e))}function Y(e){b.props.trigger.indexOf("focusin")<0&&e.target!==k()||b.props.interactive&&e.relatedTarget&&S.contains(e.relatedTarget)||te(e)}function X(e){return!!$e.isTouch&&C()!==e.type.indexOf("touch")>=0}function J(){Q();var t=b.props,n=t.popperOptions,i=t.placement,r=t.offset,o=t.getReferenceClientRect,s=t.moveTransition,c=I()?Xe(S).arrow:null,l=o?{getBoundingClientRect:o,contextElement:o.contextElement||k()}:e,u=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(I()){var n=A().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)})),t.attributes.popper={}}}}];I()&&c&&u.push({name:"arrow",options:{element:c,padding:3}}),u.push.apply(u,(null==n?void 0:n.modifiers)||[]),b.popperInstance=ve(l,S,Object.assign({},n,{placement:i,onFirstUpdate:a,modifiers:u}))}function Q(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Z(){return Me(S.querySelectorAll("[data-tippy-root]"))}function ee(e){b.clearDelayTimeouts(),e&&L("onTrigger",[b,e]),F();var t=O(!0),i=x(),r=i[0],o=i[1];$e.isTouch&&"hold"===r&&o&&(t=o),t?n=setTimeout((function(){b.show()}),t):b.show()}function te(e){if(b.clearDelayTimeouts(),L("onUntrigger",[b,e]),b.state.isVisible){if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&d)){var t=O(!1);t?i=setTimeout((function(){b.state.isVisible&&b.hide()}),t):r=requestAnimationFrame((function(){b.hide()}))}}else j()}}function nt(e,t){void 0===t&&(t={});var n=Ke.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",Be,Se),window.addEventListener("blur",je);var i,r=Object.assign({},t,{plugins:n}),o=(i=e,Re(i)?[i]:function(e){return Te(e,"NodeList")}(i)?Me(i):Array.isArray(i)?i:Me(document.querySelectorAll(i))).reduce((function(e,t){var n=t&&tt(t,r);return n&&e.push(n),e}),[]);return Re(e)?o[0]:o}nt.defaultProps=Ke,nt.setDefaultProps=function(e){Object.keys(e).forEach((function(t){Ke[t]=e[t]}))},nt.currentInput=$e,Object.assign({},ie,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});var it={mouseover:"mouseenter",focusin:"focus",click:"click"};function rt(e,t){var n,i,r,o=[],s=[],a=!1,c=t.target,l=(n=t,i=["target"],r=Object.assign({},n),i.forEach((function(e){delete r[e]})),r),u=Object.assign({},l,{trigger:"manual",touch:!1}),d=Object.assign({touch:Ke.touch},l,{showOnCreate:!0}),h=nt(e,u);function p(e){if(e.target&&!a){var n=e.target.closest(c);if(n){var i=n.getAttribute("data-tippy-trigger")||t.trigger||Ke.trigger;if(!n._tippy&&!("touchstart"===e.type&&"boolean"==typeof d.touch||"touchstart"!==e.type&&i.indexOf(it[e.type])<0)){var r=nt(n,d);r&&(s=s.concat(r))}}}}function f(e,t,n,i){void 0===i&&(i=!1),e.addEventListener(t,n,i),o.push({node:e,eventType:t,handler:n,options:i})}return Ie(h).forEach((function(e){var t=e.destroy,n=e.enable,i=e.disable;e.destroy=function(e){void 0===e&&(e=!0),e&&s.forEach((function(e){e.destroy()})),s=[],o.forEach((function(e){var t=e.node,n=e.eventType,i=e.handler,r=e.options;t.removeEventListener(n,i,r)})),o=[],t()},e.enable=function(){n(),s.forEach((function(e){return e.enable()})),a=!1},e.disable=function(){i(),s.forEach((function(e){return e.disable()})),a=!0},function(e){var t=e.reference;f(t,"touchstart",p,Se),f(t,"mouseover",p),f(t,"focusin",p),f(t,"click",p)}(e)})),h}function ot(e,t,n){const i=e.slice();return i[21]=t[n],i[23]=n,i}function st(e,t,n){const i=e.slice();return i[21]=t[n],i[23]=n,i}function at(e){let t,n,r,o,s,a,c=e[2].write+"",l=e[2].preview+"";return{c(){t=(0,i.bGB)("div"),n=(0,i.fLW)(c),r=(0,i.bGB)("div"),o=(0,i.fLW)(l),(0,i.Ljt)(t,"class","bytemd-toolbar-tab"),(0,i.VHj)(t,"bytemd-toolbar-tab-active","preview"!==e[1]),(0,i.Ljt)(r,"class","bytemd-toolbar-tab"),(0,i.VHj)(r,"bytemd-toolbar-tab-active","preview"===e[1])},m(c,l){(0,i.$Tr)(c,t,l),(0,i.R3I)(t,n),(0,i.$Tr)(c,r,l),(0,i.R3I)(r,o),s||(a=[(0,i.oLt)(t,"click",e[15]),(0,i.oLt)(r,"click",e[16])],s=!0)},p(e,s){4&s&&c!==(c=e[2].write+"")&&(0,i.rTO)(n,c),2&s&&(0,i.VHj)(t,"bytemd-toolbar-tab-active","preview"!==e[1]),4&s&&l!==(l=e[2].preview+"")&&(0,i.rTO)(o,l),2&s&&(0,i.VHj)(r,"bytemd-toolbar-tab-active","preview"===e[1])},d(e){e&&(0,i.ogt)(t),e&&(0,i.ogt)(r),s=!1,(0,i.j7q)(a)}}}function ct(e){let t,n=e[3],r=[];for(let t=0;t<n.length;t+=1)r[t]=ut(st(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=(0,i.cSb)()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);(0,i.$Tr)(e,t,n)},p(e,i){if(8&i){let o;for(n=e[3],o=0;o<n.length;o+=1){const s=st(e,n,o);r[o]?r[o].p(s,i):(r[o]=ut(s),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){(0,i.RMB)(r,e),e&&(0,i.ogt)(t)}}}function lt(e){let t,n,r,o=e[21].icon+"";return{c(){t=(0,i.bGB)("div"),(0,i.Ljt)(t,"class",n=["bytemd-toolbar-icon",ft].join(" ")),(0,i.Ljt)(t,"bytemd-tippy-path",r=e[23])},m(e,n){(0,i.$Tr)(e,t,n),t.innerHTML=o},p(e,n){8&n&&o!==(o=e[21].icon+"")&&(t.innerHTML=o)},d(e){e&&(0,i.ogt)(t)}}}function ut(e){let t,n=e[21].handler&&lt(e);return{c(){n&&n.c(),t=(0,i.cSb)()},m(e,r){n&&n.m(e,r),(0,i.$Tr)(e,t,r)},p(e,i){e[21].handler?n?n.p(e,i):(n=lt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&(0,i.ogt)(t)}}}function dt(e){let t,n,r,o=e[21].icon+"";return{c(){t=(0,i.bGB)("div"),(0,i.Ljt)(t,"class",n=["bytemd-toolbar-icon",ft,mt].join(" ")),(0,i.Ljt)(t,"bytemd-tippy-path",r=e[23]),(0,i.VHj)(t,"bytemd-toolbar-icon-active",e[21].active)},m(e,n){(0,i.$Tr)(e,t,n),t.innerHTML=o},p(e,n){32&n&&o!==(o=e[21].icon+"")&&(t.innerHTML=o),32&n&&(0,i.VHj)(t,"bytemd-toolbar-icon-active",e[21].active)},d(e){e&&(0,i.ogt)(t)}}}function ht(e){let t,n=!e[21].hidden&&dt(e);return{c(){n&&n.c(),t=(0,i.cSb)()},m(e,r){n&&n.m(e,r),(0,i.$Tr)(e,t,r)},p(e,i){e[21].hidden?n&&(n.d(1),n=null):n?n.p(e,i):(n=dt(e),n.c(),n.m(t.parentNode,t))},d(e){n&&n.d(e),e&&(0,i.ogt)(t)}}}function pt(e){let t,n,r,o,s;function a(e,t){return e[0]?ct:at}let c=a(e),l=c(e),u=e[5],d=[];for(let t=0;t<u.length;t+=1)d[t]=ht(ot(e,u,t));return{c(){t=(0,i.bGB)("div"),n=(0,i.bGB)("div"),l.c(),r=(0,i.bGB)("div");for(let e=0;e<d.length;e+=1)d[e].c();(0,i.Ljt)(n,"class","bytemd-toolbar-left"),(0,i.Ljt)(r,"class","bytemd-toolbar-right"),(0,i.Ljt)(t,"class","bytemd-toolbar")},m(a,c){(0,i.$Tr)(a,t,c),(0,i.R3I)(t,n),l.m(n,null),(0,i.R3I)(t,r);for(let e=0;e<d.length;e+=1)d[e].m(r,null);e[17](t),o||(s=(0,i.oLt)(t,"click",e[7]),o=!0)},p(e,[t]){if(c===(c=a(e))&&l?l.p(e,t):(l.d(1),l=c(e),l&&(l.c(),l.m(n,null))),32&t){let n;for(u=e[5],n=0;n<u.length;n+=1){const i=ot(e,u,n);d[n]?d[n].p(i,t):(d[n]=ht(i),d[n].c(),d[n].m(r,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=u.length}},i:i.ZTd,o:i.ZTd,d(n){n&&(0,i.ogt)(t),l.d(),(0,i.RMB)(d,n),e[17](null),o=!1,s()}}}nt.setDefaultProps({render:Je});const ft="bytemd-tippy",mt="bytemd-tippy-right",gt="bytemd-tippy-path";function vt(e,t,n){let o,s,a,c,u;const d=(0,r.x)();let h,p,{context:f}=t,{split:m}=t,{activeTab:g}=t,{fullscreen:v}=t,{sidebar:y}=t,{locale:b}=t,{actions:E}=t;function S(e){var t,n;const i=null===(n=null===(t=e.getAttribute(gt))||void 0===t?void 0:t.split("-"))||void 0===n?void 0:n.map((e=>parseInt(e,10)));if(!i)return;let r={title:"",handler:{type:"dropdown",actions:e.classList.contains(mt)?u:E}};return null==i||i.forEach((e=>{var t;"dropdown"===(null===(t=r.handler)||void 0===t?void 0:t.type)&&(r=r.handler.actions[e])})),{paths:i,item:r}}function w(){p=rt(h,{target:`.${ft}`,onCreate({setProps:e,reference:t}){const n=S(t);if(!n)return;const{item:i,paths:r}=n,{handler:o}=i;if(o)if("action"===o.type)e({content:i.title,onHidden(e){e.destroy()}});else if("dropdown"===o.type){const n=document.createElement("div");if(n.classList.add("bytemd-dropdown"),i.title){const e=document.createElement("div");e.classList.add("bytemd-dropdown-title"),e.appendChild(document.createTextNode(i.title)),n.appendChild(e)}o.actions.forEach(((e,i)=>{var o;const s=document.createElement("div");s.classList.add("bytemd-dropdown-item"),s.setAttribute(gt,[...r,i].join("-")),"dropdown"===(null===(o=e.handler)||void 0===o?void 0:o.type)&&s.classList.add(ft),t.classList.contains(mt)&&s.classList.add(mt),s.innerHTML=`${e.icon?`<div class="bytemd-dropdown-item-icon">${e.icon}</div>`:""}<div class="bytemd-dropdown-item-title">${e.title}</div>`,n.appendChild(s)})),e({allowHTML:!0,showOnCreate:!0,theme:"light-border",placement:"bottom-start",interactive:!0,interactiveDebounce:50,arrow:!1,offset:[0,4],content:n.outerHTML,onHidden(e){e.destroy()},onCreate(e){[...e.popper.querySelectorAll(".bytemd-dropdown-item")].forEach(((e,t)=>{var n;const i=null===(n=o.actions[t])||void 0===n?void 0:n.handler;if("action"===(null==i?void 0:i.type)){const{mouseenter:t,mouseleave:n}=i;t&&e.addEventListener("mouseenter",(()=>{t(f)})),n&&e.addEventListener("mouseleave",(()=>{n(f)}))}}))}})}}})}return(0,r.H3)((()=>{w()})),e.$$set=e=>{"context"in e&&n(8,f=e.context),"split"in e&&n(0,m=e.split),"activeTab"in e&&n(1,g=e.activeTab),"fullscreen"in e&&n(9,v=e.fullscreen),"sidebar"in e&&n(10,y=e.sidebar),"locale"in e&&n(2,b=e.locale),"actions"in e&&n(3,E=e.actions)},e.$$.update=()=>{1024&e.$$.dirty&&n(14,o="toc"===y),1024&e.$$.dirty&&n(13,s="help"===y),2&e.$$.dirty&&n(12,a="write"===g),2&e.$$.dirty&&n(11,c="preview"===g),31237&e.$$.dirty&&n(5,u=[{title:o?b.closeToc:b.toc,icon:l.toc,handler:{type:"action",click(){d("click","toc")}},active:o},{title:s?b.closeHelp:b.help,icon:l.help,handler:{type:"action",click(){d("click","help")}},active:s},{title:a?b.exitWriteOnly:b.writeOnly,icon:l.left,handler:{type:"action",click(){d("tab","write")}},active:a,hidden:!m},{title:c?b.exitPreviewOnly:b.previewOnly,icon:l.right,handler:{type:"action",click(){d("tab","preview")}},active:c,hidden:!m},{title:v?b.exitFullscreen:b.fullscreen,icon:v?l.fullscreenOff:l.fullscreenOn,handler:{type:"action",click(){d("click","fullscreen")}}},{title:b.source,icon:l.source,handler:{type:"action",click(){window.open("https://github.com/bytedance/bytemd")}}}])},[m,g,b,E,h,u,d,function(e){var t,n;const i=e.target.closest(`[${gt}]`);if(!i)return;const r=null===(n=null===(t=S(i))||void 0===t?void 0:t.item)||void 0===n?void 0:n.handler;"action"===(null==r?void 0:r.type)&&r.click(f),null==p||p.destroy(),w()},f,v,y,c,a,s,o,()=>d("tab","write"),()=>d("tab","preview"),function(e){i.VnY[e?"unshift":"push"]((()=>{h=e,n(4,h)}))}]}class yt extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,vt,pt,i.AqN,{context:8,split:0,activeTab:1,fullscreen:9,sidebar:10,locale:2,actions:3})}}const bt=yt;var Et=n(18835),St=n.n(Et),wt=n(12861),_t=n.n(wt),Tt=n(78818),xt=n.n(Tt),Ct=n(76388),It=n.n(Ct),kt=n(1667),Mt=n.n(kt),At=n(17532),Ot=n.n(At),Rt=n(29370);const Lt=JSON.stringify(Rt);var Dt=n(25108);function Nt(e){let t;return{c(){t=(0,i.bGB)("div"),(0,i.Ljt)(t,"class","markdown-body")},m(n,r){(0,i.$Tr)(n,t,r),t.innerHTML=e[1],e[7](t)},p(e,[n]){2&n&&(t.innerHTML=e[1])},i:i.ZTd,o:i.ZTd,d(n){n&&(0,i.ogt)(t),e[7](null)}}}function Pt(e,t,n){let o;const s=(0,r.x)();let a,c,{value:l=""}=t,{plugins:u=[]}=t,{sanitize:d}=t,h=[];function p(){h.forEach((e=>null==e?void 0:e()))}(0,r.H3)((()=>{a.addEventListener("click",(e=>{var t;const n=e.target;if("A"!==n.tagName)return;const i=n.getAttribute("href");(null==i?void 0:i.startsWith("#"))&&(null===(t=a.querySelector("#user-content-"+i.slice(1)))||void 0===t||t.scrollIntoView())}))})),(0,r.ev)(p);let f=0;return(0,r.gx)((()=>{p(),h=u.map((e=>{var t;return null===(t=e.viewerEffect)||void 0===t?void 0:t.call(e,{markdownBody:a,file:c})}))})),e.$$set=e=>{"value"in e&&n(2,l=e.value),"plugins"in e&&n(3,u=e.plugins),"sanitize"in e&&n(4,d=e.sanitize)},e.$$.update=()=>{if(92&e.$$.dirty)try{n(5,c=function({sanitize:e,plugins:t}){let n=St()().use(_t());null==t||t.forEach((({remark:e})=>{e&&(n=e(n))})),n=n.use(xt(),{allowDangerousHtml:!0}).use(It());let i=JSON.parse(Lt);return i.attributes["*"].push("className"),"function"==typeof e&&(i=e(i)),n=n.use(Mt(),i),null==t||t.forEach((({rehype:e})=>{e&&(n=e(n))})),n.use(Ot())}({sanitize:d,plugins:[...u,{rehype:e=>e.use((()=>(e,t)=>{(0,r.Ky)().then((()=>{s("hast",{hast:e,file:t})}))}))}]}).processSync(l)),n(6,f++,f)}catch(e){Dt.error(e)}96&e.$$.dirty&&n(1,o=`${c}\x3c!--${f}--\x3e`)},[a,o,l,u,d,c,f,function(e){i.VnY[e?"unshift":"push"]((()=>{a=e,n(0,a)}))}]}class $t extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,Pt,Nt,i.AqN,{value:2,plugins:3,sanitize:4})}}const Ut=$t;var Bt=n(62854),Ft=n.n(Bt);function jt(e,t,n){const i=e.slice();return i[10]=t[n],i[12]=n,i}function Ht(e){let t,n,r,o,s,a,c=e[10].text+"";function l(){return e[8](e[12])}return{c(){t=(0,i.bGB)("li"),n=(0,i.fLW)(c),(0,i.Ljt)(t,"class",r=`bytemd-toc-${e[10].level}`),(0,i.Ljt)(t,"style",o=`padding-left:${16*(e[10].level-e[3])+8}px`),(0,i.VHj)(t,"bytemd-toc-active",e[4]===e[12]),(0,i.VHj)(t,"bytemd-toc-first",e[10].level===e[3])},m(e,r){(0,i.$Tr)(e,t,r),(0,i.R3I)(t,n),s||(a=(0,i.oLt)(t,"click",l),s=!0)},p(s,a){e=s,4&a&&c!==(c=e[10].text+"")&&(0,i.rTO)(n,c),4&a&&r!==(r=`bytemd-toc-${e[10].level}`)&&(0,i.Ljt)(t,"class",r),12&a&&o!==(o=`padding-left:${16*(e[10].level-e[3])+8}px`)&&(0,i.Ljt)(t,"style",o),20&a&&(0,i.VHj)(t,"bytemd-toc-active",e[4]===e[12]),12&a&&(0,i.VHj)(t,"bytemd-toc-first",e[10].level===e[3])},d(e){e&&(0,i.ogt)(t),s=!1,a()}}}function Kt(e){let t,n,r,o,s=e[0].toc+"",a=e[2],c=[];for(let t=0;t<a.length;t+=1)c[t]=Ht(jt(e,a,t));return{c(){t=(0,i.bGB)("div"),n=(0,i.bGB)("h2"),r=(0,i.fLW)(s),o=(0,i.bGB)("ul");for(let e=0;e<c.length;e+=1)c[e].c();(0,i.Ljt)(t,"class","bytemd-toc"),(0,i.VHj)(t,"bytemd-hidden",!e[1])},m(e,s){(0,i.$Tr)(e,t,s),(0,i.R3I)(t,n),(0,i.R3I)(n,r),(0,i.R3I)(t,o);for(let e=0;e<c.length;e+=1)c[e].m(o,null)},p(e,[n]){if(1&n&&s!==(s=e[0].toc+"")&&(0,i.rTO)(r,s),60&n){let t;for(a=e[2],t=0;t<a.length;t+=1){const i=jt(e,a,t);c[t]?c[t].p(i,n):(c[t]=Ht(i),c[t].c(),c[t].m(o,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=a.length}2&n&&(0,i.VHj)(t,"bytemd-hidden",!e[1])},i:i.ZTd,o:i.ZTd,d(e){e&&(0,i.ogt)(t),(0,i.RMB)(c,e)}}}function qt(e,t,n){let{hast:i}=t,{currentBlockIndex:o}=t,{locale:s}=t,{visible:a}=t;const c=(0,r.x)();let l,u=6,d=0;function h(e){let t="";return Ft()(e,(e=>{"text"===e.type&&(t+=e.value)})),t}return e.$$set=e=>{"hast"in e&&n(6,i=e.hast),"currentBlockIndex"in e&&n(7,o=e.currentBlockIndex),"locale"in e&&n(0,s=e.locale),"visible"in e&&n(1,a=e.visible)},e.$$.update=()=>{204&e.$$.dirty&&(n(2,l=[]),n(4,d=0),i.children.filter((e=>"element"===e.type)).forEach(((e,t)=>{if("h"===e.tagName[0]&&e.children.length){const t=Number(e.tagName[1]);n(3,u=Math.min(u,t)),l.push({level:t,text:h(e)})}o>=t&&n(4,d=l.length-1)})))},[s,a,l,u,d,c,i,o,e=>{c("click",e)}]}class Vt extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,qt,Kt,i.AqN,{hast:6,currentBlockIndex:7,locale:0,visible:1})}}const Gt=Vt,Wt=function(e){return new Promise((function(t){var n=function(e){void 0===e&&(e={});var t=e.accept;void 0===t&&(t="");var n=e.capture;void 0===n&&(n=!1);var i=e.multiple;void 0===i&&(i=!1);var r=document.createElement("input");return r.type="file",r.accept=t,r.capture=n,r.multiple=i,r}(e);n.addEventListener("change",(function(){return t(n.files||null)})),setTimeout((function(){var e=new MouseEvent("click");n.dispatchEvent(e)}),0)}))};function zt(e,t){let n=t.length-2;for(let i=0;i<t.length;i++)if(e<t[i]){n=i-1;break}return n=Math.max(n,0),n}const Yt=(e,t=!1)=>(t?"Shift-":"")+("undefined"!=typeof navigator&&/Mac/.test(navigator.platform)?"Cmd-":"Ctrl-")+e;async function Xt({editor:e,appendBlock:t,codemirror:n},i,r){const o=await i(r),s=t(o.map((({url:e,alt:t,title:n},i)=>`![${t=null!=t?t:r[i].name}](${e}${n?` "${n}"`:""})`)).join("\n\n"));e.setSelection(s,n.Pos(s.line+2*o.length-2)),e.focus()}var Jt=n(7143),Qt=n.n(Jt);function Zt(e){let t,n,r=e[2].limited+"";return{c(){t=(0,i.bGB)("span"),n=(0,i.fLW)(r),(0,i.Ljt)(t,"class","bytemd-status-error")},m(e,r){(0,i.$Tr)(e,t,r),(0,i.R3I)(t,n)},p(e,t){4&t&&r!==(r=e[2].limited+"")&&(0,i.rTO)(n,r)},d(e){e&&(0,i.ogt)(t)}}}function en(e){let t,n,r,o,s,a=e[2].sync+"";return{c(){t=(0,i.bGB)("label"),n=(0,i.bGB)("input"),r=(0,i.fLW)(a),(0,i.Ljt)(n,"type","checkbox"),n.checked=e[1]},m(a,c){(0,i.$Tr)(a,t,c),(0,i.R3I)(t,n),(0,i.R3I)(t,r),o||(s=(0,i.oLt)(n,"change",e[8]),o=!0)},p(e,t){2&t&&(n.checked=e[1]),4&t&&a!==(a=e[2].sync+"")&&(0,i.rTO)(r,a)},d(e){e&&(0,i.ogt)(t),o=!1,s()}}}function tn(e){let t,n,r,o,s,a,c,l,u,d,h,p,f,m,g,v,y,b=e[2].words+"",E=e[2].lines+"",S=e[2].top+"",w=e[3]&&Zt(e),_=e[0]&&en(e);return{c(){t=(0,i.bGB)("div"),n=(0,i.bGB)("div"),r=(0,i.bGB)("span"),o=(0,i.fLW)(b),s=(0,i.fLW)(": "),a=(0,i.bGB)("strong"),c=(0,i.fLW)(e[5]),l=(0,i.bGB)("span"),u=(0,i.fLW)(E),d=(0,i.fLW)(": "),h=(0,i.bGB)("strong"),p=(0,i.fLW)(e[4]),w&&w.c(),f=(0,i.bGB)("div"),_&&_.c(),m=(0,i.bGB)("span"),g=(0,i.fLW)(S),(0,i.Ljt)(n,"class","bytemd-status-left"),(0,i.Ljt)(f,"class","bytemd-status-right"),(0,i.Ljt)(t,"class","bytemd-status")},m(b,E){(0,i.$Tr)(b,t,E),(0,i.R3I)(t,n),(0,i.R3I)(n,r),(0,i.R3I)(r,o),(0,i.R3I)(r,s),(0,i.R3I)(r,a),(0,i.R3I)(a,c),(0,i.R3I)(n,l),(0,i.R3I)(l,u),(0,i.R3I)(l,d),(0,i.R3I)(l,h),(0,i.R3I)(h,p),w&&w.m(n,null),(0,i.R3I)(t,f),_&&_.m(f,null),(0,i.R3I)(f,m),(0,i.R3I)(m,g),v||(y=(0,i.oLt)(m,"click",e[9]),v=!0)},p(e,[t]){4&t&&b!==(b=e[2].words+"")&&(0,i.rTO)(o,b),32&t&&(0,i.rTO)(c,e[5]),4&t&&E!==(E=e[2].lines+"")&&(0,i.rTO)(u,E),16&t&&(0,i.rTO)(p,e[4]),e[3]?w?w.p(e,t):(w=Zt(e),w.c(),w.m(n,null)):w&&(w.d(1),w=null),e[0]?_?_.p(e,t):(_=en(e),_.c(),_.m(f,m)):_&&(_.d(1),_=null),4&t&&S!==(S=e[2].top+"")&&(0,i.rTO)(g,S)},i:i.ZTd,o:i.ZTd,d(e){e&&(0,i.ogt)(t),w&&w.d(),_&&_.d(),v=!1,y()}}}function nn(e,t,n){let i,o,{showSync:s}=t,{value:a}=t,{syncEnabled:c}=t,{locale:l}=t,{islimited:u}=t;const d=(0,r.x)();return e.$$set=e=>{"showSync"in e&&n(0,s=e.showSync),"value"in e&&n(7,a=e.value),"syncEnabled"in e&&n(1,c=e.syncEnabled),"locale"in e&&n(2,l=e.locale),"islimited"in e&&n(3,u=e.islimited)},e.$$.update=()=>{128&e.$$.dirty&&n(5,i=Qt()(a)),128&e.$$.dirty&&n(4,o=a.split("\n").length)},[s,c,l,u,o,i,d,a,()=>d("sync",!c),()=>d("top")]}class rn extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,nn,tn,i.N8,{showSync:0,value:7,syncEnabled:1,locale:2,islimited:3})}}const on=rn,sn=JSON.parse('{"write":"Write","preview":"Preview","writeOnly":"Write only","exitWriteOnly":"Exit write only","previewOnly":"Preview only","exitPreviewOnly":"Exit preview only","help":"Help","closeHelp":"Close help","toc":"Table of contents","closeToc":"Close table of contents","fullscreen":"Fullscreen","exitFullscreen":"Exit fullscreen","source":"Source code","cheatsheet":"Markdown Cheatsheet","shortcuts":"Shortcuts","words":"Words","lines":"Lines","sync":"Scroll sync","top":"Scroll to top","limited":"The maximum character limit has been reached","h1":"Heading 1","h2":"Heading 2","h3":"Heading 3","h4":"Heading 4","h5":"Heading 5","h6":"Heading 6","headingText":"heading","bold":"Bold","boldText":"bold text","italic":"Italic","italicText":"italic text","quote":"Quote","quotedText":"quoted text","link":"Link","linkText":"link text","image":"Image","imageAlt":"alt","imageTitle":"title","code":"Code","codeText":"code","codeBlock":"Code block","codeLang":"lang","ul":"Unordered list","ulItem":"item","ol":"Ordered list","olItem":"item","hr":"Horizontal rule"}');function an(e,t,n){const i=e.slice();return i[5]=t[n],i}function cn(e,t,n){const i=e.slice();return i[5]=t[n],i}function ln(e){let t,n,r,o,s,a,c,l=e[5].icon+"",u=e[5].title+"",d=e[5].cheatsheet+"";return{c(){t=(0,i.bGB)("li"),n=(0,i.bGB)("div"),r=(0,i.bGB)("div"),o=(0,i.fLW)(u),s=(0,i.bGB)("div"),a=(0,i.bGB)("code"),c=(0,i.fLW)(d),(0,i.Ljt)(n,"class","bytemd-help-icon"),(0,i.Ljt)(r,"class","bytemd-help-title"),(0,i.Ljt)(s,"class","bytemd-help-content")},m(e,u){(0,i.$Tr)(e,t,u),(0,i.R3I)(t,n),n.innerHTML=l,(0,i.R3I)(t,r),(0,i.R3I)(r,o),(0,i.R3I)(t,s),(0,i.R3I)(s,a),(0,i.R3I)(a,c)},p(e,t){4&t&&l!==(l=e[5].icon+"")&&(n.innerHTML=l),4&t&&u!==(u=e[5].title+"")&&(0,i.rTO)(o,u),4&t&&d!==(d=e[5].cheatsheet+"")&&(0,i.rTO)(c,d)},d(e){e&&(0,i.ogt)(t)}}}function un(e){let t,n=e[5].cheatsheet&&ln(e);return{c(){n&&n.c(),t=(0,i.cSb)()},m(e,r){n&&n.m(e,r),(0,i.$Tr)(e,t,r)},p(e,i){e[5].cheatsheet?n?n.p(e,i):(n=ln(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&(0,i.ogt)(t)}}}function dn(e){let t,n,r,o,s,a,c,l=e[5].icon+"",u=e[5].title+"",d=e[5].handler.shortcut+"";return{c(){t=(0,i.bGB)("li"),n=(0,i.bGB)("div"),r=(0,i.bGB)("div"),o=(0,i.fLW)(u),s=(0,i.bGB)("div"),a=(0,i.bGB)("kbd"),c=(0,i.fLW)(d),(0,i.Ljt)(n,"class","bytemd-help-icon"),(0,i.Ljt)(r,"class","bytemd-help-title"),(0,i.Ljt)(s,"class","bytemd-help-content")},m(e,u){(0,i.$Tr)(e,t,u),(0,i.R3I)(t,n),n.innerHTML=l,(0,i.R3I)(t,r),(0,i.R3I)(r,o),(0,i.R3I)(t,s),(0,i.R3I)(s,a),(0,i.R3I)(a,c)},p(e,t){4&t&&l!==(l=e[5].icon+"")&&(n.innerHTML=l),4&t&&u!==(u=e[5].title+"")&&(0,i.rTO)(o,u),4&t&&d!==(d=e[5].handler.shortcut+"")&&(0,i.rTO)(c,d)},d(e){e&&(0,i.ogt)(t)}}}function hn(e){let t,n=e[5].handler&&"action"===e[5].handler.type&&e[5].handler.shortcut&&dn(e);return{c(){n&&n.c(),t=(0,i.cSb)()},m(e,r){n&&n.m(e,r),(0,i.$Tr)(e,t,r)},p(e,i){e[5].handler&&"action"===e[5].handler.type&&e[5].handler.shortcut?n?n.p(e,i):(n=dn(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&(0,i.ogt)(t)}}}function pn(e){let t,n,r,o,s,a,c,l=e[0].cheatsheet+"",u=e[0].shortcuts+"",d=e[2],h=[];for(let t=0;t<d.length;t+=1)h[t]=un(cn(e,d,t));let p=e[2],f=[];for(let t=0;t<p.length;t+=1)f[t]=hn(an(e,p,t));return{c(){t=(0,i.bGB)("div"),n=(0,i.bGB)("h2"),r=(0,i.fLW)(l),o=(0,i.bGB)("ul");for(let e=0;e<h.length;e+=1)h[e].c();s=(0,i.bGB)("h2"),a=(0,i.fLW)(u),c=(0,i.bGB)("ul");for(let e=0;e<f.length;e+=1)f[e].c();(0,i.Ljt)(t,"class","bytemd-help"),(0,i.VHj)(t,"bytemd-hidden",!e[1])},m(e,l){(0,i.$Tr)(e,t,l),(0,i.R3I)(t,n),(0,i.R3I)(n,r),(0,i.R3I)(t,o);for(let e=0;e<h.length;e+=1)h[e].m(o,null);(0,i.R3I)(t,s),(0,i.R3I)(s,a),(0,i.R3I)(t,c);for(let e=0;e<f.length;e+=1)f[e].m(c,null)},p(e,[n]){if(1&n&&l!==(l=e[0].cheatsheet+"")&&(0,i.rTO)(r,l),4&n){let t;for(d=e[2],t=0;t<d.length;t+=1){const i=cn(e,d,t);h[t]?h[t].p(i,n):(h[t]=un(i),h[t].c(),h[t].m(o,null))}for(;t<h.length;t+=1)h[t].d(1);h.length=d.length}if(1&n&&u!==(u=e[0].shortcuts+"")&&(0,i.rTO)(a,u),4&n){let t;for(p=e[2],t=0;t<p.length;t+=1){const i=an(e,p,t);f[t]?f[t].p(i,n):(f[t]=hn(i),f[t].c(),f[t].m(c,null))}for(;t<f.length;t+=1)f[t].d(1);f.length=p.length}2&n&&(0,i.VHj)(t,"bytemd-hidden",!e[1])},i:i.ZTd,o:i.ZTd,d(e){e&&(0,i.ogt)(t),(0,i.RMB)(h,e),(0,i.RMB)(f,e)}}}function fn(e,t,n){let i,{actions:r}=t,{locale:o}=t,{visible:s}=t;function a(e){let t=[];return e.forEach((e=>{const{handler:n,cheatsheet:i}=e;"dropdown"===(null==n?void 0:n.type)&&t.push(...a(n.actions)),i&&t.push(e)})),t}return e.$$set=e=>{"actions"in e&&n(3,r=e.actions),"locale"in e&&n(0,o=e.locale),"visible"in e&&n(1,s=e.visible)},e.$$.update=()=>{8&e.$$.dirty&&n(2,i=a(r))},[o,s,i,r]}class mn extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,fn,pn,i.N8,{actions:3,locale:0,visible:1})}}const gn=mn;var vn=n(38910),yn=n.n(vn),bn=n(31250),En=n.n(bn),Sn=n(97553),wn=n.n(Sn),_n=n(54324),Tn=n.n(_n),xn=n(81742),Cn=n.n(xn),In=n(35929),kn=n.n(In),Mn=n(54610),An=n.n(Mn),On=n(39242),Rn=n.n(On),Ln=n(80607),Dn=n.n(Ln),Nn=n(23456),Pn=n.n(Nn),$n=n(53784),Un=n.n($n);function Bn(e){let t,n;return t=new Ut({props:{value:e[15],plugins:e[1],sanitize:e[2]}}),t.$on("hast",e[34]),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const i={};32768&n[0]&&(i.value=e[15]),2&n[0]&&(i.plugins=e[1]),4&n[0]&&(i.sanitize=e[2]),t.$set(i)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(e){(0,i.vpE)(t,e)}}}function Fn(e){let t,n,r,o,s,a,c,u,d,h,p,f,m,g,v,y=l.close+"";n=new bt({props:{context:e[9],split:e[10],activeTab:e[7],sidebar:e[8],fullscreen:e[14],locale:e[11],actions:e[20]}}),n.$on("key",e[30]),n.$on("tab",e[31]),n.$on("click",e[32]);let b=!e[3]&&Bn(e);return h=new gn({props:{locale:e[11],actions:e[20],visible:"help"===e[8]}}),p=new Gt({props:{hast:e[17],locale:e[11],currentBlockIndex:e[19],visible:"toc"===e[8]}}),p.$on("click",e[37]),f=new on({props:{locale:e[11],showSync:!e[3]&&e[10],value:e[15],syncEnabled:e[16],islimited:e[0].length>e[4]}}),f.$on("sync",e[38]),f.$on("top",e[39]),{c(){t=(0,i.bGB)("div"),(0,i.YCL)(n.$$.fragment),r=(0,i.bGB)("div"),o=(0,i.bGB)("div"),a=(0,i.bGB)("div"),b&&b.c(),u=(0,i.bGB)("div"),d=(0,i.bGB)("div"),(0,i.YCL)(h.$$.fragment),(0,i.YCL)(p.$$.fragment),(0,i.YCL)(f.$$.fragment),(0,i.Ljt)(o,"class","bytemd-editor"),(0,i.Ljt)(o,"style",s=e[21].edit),(0,i.Ljt)(a,"class","bytemd-preview"),(0,i.Ljt)(a,"style",c=e[21].preview),(0,i.Ljt)(d,"class","bytemd-sidebar-close"),(0,i.Ljt)(u,"class","bytemd-sidebar"),(0,i.VHj)(u,"bytemd-hidden",!1===e[8]),(0,i.Ljt)(r,"class","bytemd-body"),(0,i.Ljt)(t,"class","bytemd"),(0,i.VHj)(t,"bytemd-split",e[10]&&!1===e[7]),(0,i.VHj)(t,"bytemd-fullscreen",e[14])},m(s,c){(0,i.$Tr)(s,t,c),(0,i.yef)(n,t,null),(0,i.R3I)(t,r),(0,i.R3I)(r,o),e[33](o),(0,i.R3I)(r,a),b&&b.m(a,null),e[35](a),(0,i.R3I)(r,u),(0,i.R3I)(u,d),d.innerHTML=y,(0,i.yef)(h,u,null),(0,i.yef)(p,u,null),(0,i.yef)(f,t,null),e[40](t),m=!0,g||(v=(0,i.oLt)(d,"click",e[36]),g=!0)},p(e,r){const l={};512&r[0]&&(l.context=e[9]),1024&r[0]&&(l.split=e[10]),128&r[0]&&(l.activeTab=e[7]),256&r[0]&&(l.sidebar=e[8]),16384&r[0]&&(l.fullscreen=e[14]),2048&r[0]&&(l.locale=e[11]),1048576&r[0]&&(l.actions=e[20]),n.$set(l),(!m||2097152&r[0]&&s!==(s=e[21].edit))&&(0,i.Ljt)(o,"style",s),e[3]?b&&((0,i.dvw)(),(0,i.etI)(b,1,1,(()=>{b=null})),(0,i.gbL)()):b?(b.p(e,r),8&r[0]&&(0,i.Ui)(b,1)):(b=Bn(e),b.c(),(0,i.Ui)(b,1),b.m(a,null)),(!m||2097152&r[0]&&c!==(c=e[21].preview))&&(0,i.Ljt)(a,"style",c);const d={};2048&r[0]&&(d.locale=e[11]),1048576&r[0]&&(d.actions=e[20]),256&r[0]&&(d.visible="help"===e[8]),h.$set(d);const g={};131072&r[0]&&(g.hast=e[17]),2048&r[0]&&(g.locale=e[11]),524288&r[0]&&(g.currentBlockIndex=e[19]),256&r[0]&&(g.visible="toc"===e[8]),p.$set(g),256&r[0]&&(0,i.VHj)(u,"bytemd-hidden",!1===e[8]);const v={};2048&r[0]&&(v.locale=e[11]),1032&r[0]&&(v.showSync=!e[3]&&e[10]),32768&r[0]&&(v.value=e[15]),65536&r[0]&&(v.syncEnabled=e[16]),17&r[0]&&(v.islimited=e[0].length>e[4]),f.$set(v),1152&r[0]&&(0,i.VHj)(t,"bytemd-split",e[10]&&!1===e[7]),16384&r[0]&&(0,i.VHj)(t,"bytemd-fullscreen",e[14])},i(e){m||((0,i.Ui)(n.$$.fragment,e),(0,i.Ui)(b),(0,i.Ui)(h.$$.fragment,e),(0,i.Ui)(p.$$.fragment,e),(0,i.Ui)(f.$$.fragment,e),m=!0)},o(e){(0,i.etI)(n.$$.fragment,e),(0,i.etI)(b),(0,i.etI)(h.$$.fragment,e),(0,i.etI)(p.$$.fragment,e),(0,i.etI)(f.$$.fragment,e),m=!1},d(r){r&&(0,i.ogt)(t),(0,i.vpE)(n),e[33](null),b&&b.d(),e[35](null),(0,i.vpE)(h),(0,i.vpE)(p),(0,i.vpE)(f),e[40](null),g=!1,v()}}}function jn(e,t,n){let o,a,u,d,h;var p=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))};let{value:f=""}=t,{plugins:m=[]}=t,{sanitize:g}=t,{mode:v="auto"}=t,{previewDebounce:y=300}=t,{placeholder:b}=t,{editorConfig:E}=t,{locale:S}=t,{uploadImages:w}=t,{overridePreview:_}=t,{maxLength:T=1/0}=t;const x=(0,r.x)();let C,I,k,M,A,O,R=1/0,L=!1,D=!1,N=[],P={};function $(){N.forEach((e=>e&&e())),null==A||A.removeKeyMap(P)}let U=f;const B=s()((e=>{n(15,U=e),null==_||_(k,{value:U,plugins:m,sanitize:g})}),y);let F,j,H,K=!0,q=!1,V=!1,G={type:"root",children:[]},W=0;return(0,r.H3)((()=>p(void 0,void 0,void 0,(function*(){n(29,M=yn()()),En()(M),wn()(M),Tn()(M),Cn()(M),kn()(M),An()(M),Rn()(M),Dn()(M),Pn()(M),Un()(M),n(6,A=M(I,Object.assign(Object.assign({value:f,mode:"yaml-frontmatter",lineWrapping:!0,tabSize:8,indentUnit:4},E),{placeholder:b,lint:()=>H?H.messages.map((e=>({from:M.Pos(e.location.start.line-1,e.location.start.column-1),to:null==e.location.end.line?M.Pos(e.location.start.line-1):M.Pos(e.location.end.line-1,e.location.end.column-1),message:e.message}))):[]}))),A.addKeyMap({Tab:"indentMore","Shift-Tab":"indentLess"}),A.on("change",(()=>{x("change",{value:A.getValue()})}));const e=c()((()=>{F=[],j=[];const e=A.getScrollInfo(),t=k.childNodes[0];if(!(t instanceof HTMLElement))return;const n=G.children.filter((e=>"element"===e.type)),i=[...t.childNodes].filter((e=>e instanceof HTMLElement));for(let r=0;r<n.length;r++){const o=n[r],s=i[r];if(!o.position)continue;const a=A.heightAtLine(o.position.start.line-1,"local")/(e.height-e.clientHeight),c=(s.offsetTop-t.offsetTop)/(k.scrollHeight-k.clientHeight);if(a>=1||c>=1)break;F.push(a),j.push(c)}F.push(1),j.push(1)}),1e3);A.on("scroll",(()=>{if(_)return;if(!K)return;if(V)return void(V=!1);e();const t=A.getScrollInfo(),n=t.top/(t.height-t.clientHeight),i=zt(n,F),r=(n-F[i])*(j[i+1]-j[i])/(F[i+1]-F[i])+j[i];k.scrollTo(0,r*(k.scrollHeight-k.clientHeight)),q=!0})),k.addEventListener("scroll",(()=>{if(_)return;if(e(),n(19,W=zt(k.scrollTop/(k.scrollHeight-k.offsetHeight),j)),!K)return;if(q)return void(q=!1);const t=k.scrollTop/(k.scrollHeight-k.clientHeight),i=zt(t,j),r=(t-j[i])*(F[i+1]-F[i])/(j[i+1]-j[i])+F[i],o=A.getScrollInfo();A.scrollTo(0,r*(o.height-o.clientHeight)),V=!0}),{passive:!0});const t=(e,t)=>p(void 0,void 0,void 0,(function*(){if(!w)return;const n=Array.from(null!=t?t:[]).map((e=>{if(e.type.startsWith("image/"))return e.getAsFile()})).filter((e=>null!=e));n.length&&(e.preventDefault(),yield Xt(h,w,n))}));A.on("drop",((e,n)=>p(void 0,void 0,void 0,(function*(){var e;t(n,null===(e=n.dataTransfer)||void 0===e?void 0:e.items)})))),A.on("paste",((e,n)=>p(void 0,void 0,void 0,(function*(){var e;t(n,null===(e=n.clipboardData)||void 0===e?void 0:e.items)})))),new ResizeObserver((e=>{n(28,R=e[0].contentRect.width)})).observe(C,{box:"border-box"})})))),(0,r.ev)($),e.$$set=e=>{"value"in e&&n(0,f=e.value),"plugins"in e&&n(1,m=e.plugins),"sanitize"in e&&n(2,g=e.sanitize),"mode"in e&&n(22,v=e.mode),"previewDebounce"in e&&n(23,y=e.previewDebounce),"placeholder"in e&&n(24,b=e.placeholder),"editorConfig"in e&&n(25,E=e.editorConfig),"locale"in e&&n(26,S=e.locale),"uploadImages"in e&&n(27,w=e.uploadImages),"overridePreview"in e&&n(3,_=e.overridePreview),"maxLength"in e&&n(4,T=e.maxLength)},e.$$.update=()=>{67108864&e.$$.dirty[0]&&n(11,o=Object.assign(Object.assign({},sn),S)),134219778&e.$$.dirty[0]&&n(20,a=function(e,t,n){const i=[{icon:l.heading,handler:{type:"dropdown",actions:[1,2,3,4,5,6].map((t=>({title:e[`h${t}`],icon:l[`h${t}`],cheatsheet:t<=3?`${"#".repeat(t)} ${e.headingText}`:void 0,handler:{type:"action",click({replaceLines:e,editor:n}){e((e=>(e=e.trim().replace(/^#*/,"").trim(),"#".repeat(t)+" "+e))),n.focus()}}})))}},{title:e.bold,icon:l.bold,cheatsheet:`**${e.boldText}**`,handler:{type:"action",shortcut:Yt("B"),click({wrapText:e,editor:t}){e("**"),t.focus()}}},{title:e.italic,icon:l.italic,cheatsheet:`*${e.italicText}*`,handler:{type:"action",shortcut:Yt("I"),click({wrapText:e,editor:t}){e("*"),t.focus()}}},{title:e.quote,icon:l.quote,cheatsheet:`> ${e.quotedText}`,handler:{type:"action",click({replaceLines:e,editor:t}){e((e=>"> "+e)),t.focus()}}},{title:e.link,icon:l.link,cheatsheet:`[${e.linkText}](url)`,handler:{type:"action",shortcut:Yt("K"),click({editor:e,wrapText:t,codemirror:n}){t("[","](url)");const i=e.getCursor();e.setSelection(n.Pos(i.line,i.ch+2),n.Pos(i.line,i.ch+5)),e.focus()}}},{title:e.image,icon:l.image,cheatsheet:`![${e.imageAlt}](url "${e.imageTitle}")`,handler:n?{type:"action",shortcut:Yt("I",!0),async click(e){const t=await Wt({accept:"image/*",multiple:!0});(null==t?void 0:t.length)&&await Xt(e,n,Array.from(t))}}:void 0},{title:e.code,icon:l.code,cheatsheet:"`"+e.codeText+"`",handler:{type:"action",shortcut:Yt("K",!0),click({wrapText:e,editor:t}){e("`"),t.focus()}}},{title:e.codeBlock,icon:l.codeBlock,cheatsheet:"```"+e.codeLang+"",handler:{type:"action",shortcut:Yt("C",!0),click({editor:e,appendBlock:t,codemirror:n}){const i=t("```js\n```");e.setSelection(n.Pos(i.line,3),n.Pos(i.line,5)),e.focus()}}},{title:e.ul,icon:l.ul,cheatsheet:`- ${e.ulItem}`,handler:{type:"action",shortcut:Yt("U",!0),click({replaceLines:e,editor:t}){e((e=>"- "+e)),t.focus()}}},{title:e.ol,icon:l.ol,cheatsheet:`1. ${e.olItem}`,handler:{type:"action",shortcut:Yt("O",!0),click({replaceLines:e,editor:t}){e(((e,t)=>`${t+1}. ${e}`)),t.focus()}}},{title:e.hr,icon:l.hr,cheatsheet:"---"}];return t.forEach((({actions:e})=>{e&&i.push(...e)})),i}(o,m,w)),272629760&e.$$.dirty[0]&&n(10,u="split"===v||"auto"===v&&R>=800),1024&e.$$.dirty[0]&&u&&n(7,O=!1),1408&e.$$.dirty[0]&&n(21,d=(()=>{let e,t;return u&&!1===O?D?(e=`width:calc(50% - ${D?140:0}px)`,t=`width:calc(50% - ${D?140:0}px)`):(e="width:50%",t="width:50%"):"preview"===O?(e="display:none",t=`width:calc(100% - ${D?280:0}px)`):(e=`width:calc(100% - ${D?280:0}px)`,t="display:none"),{edit:e,preview:t}})()),536871008&e.$$.dirty[0]&&n(9,h=(()=>{const e=Object.assign({codemirror:M,editor:A,root:C},function(e,t){return{wrapText(n,i=n){const r=t.somethingSelected()?t.listSelections()[0]:t.findWordAt(t.getCursor()),o=r.from(),s=r.to(),a=t.getRange(o,s),c=e.Pos(o.line,o.ch-n.length),l=e.Pos(s.line,s.ch+i.length);if(t.getRange(c,o)===n&&t.getRange(s,l)===i)t.replaceRange(a,c,l),t.setSelection(c,e.Pos(c.line,c.ch+a.length));else{t.replaceRange(n+a+i,o,s);const r=t.getCursor();t.setSelection(e.Pos(r.line,r.ch-i.length-a.length),e.Pos(r.line,r.ch-i.length))}},replaceLines(n){const[i]=t.listSelections(),r=[e.Pos(i.from().line,0),e.Pos(i.to().line)],o=t.getRange(...r).split("\n");t.replaceRange(o.map(n).join("\n"),...r),t.setSelection(...r)},appendBlock(n){let i=-1;for(let e=t.getCursor().line;e<t.lineCount();e++)if(!t.getLine(e).trim()){i=e;break}return-1===i&&(t.replaceRange("\n",e.Pos(t.lineCount())),i=t.lineCount()),t.replaceRange("\n"+n,e.Pos(i)),e.Pos(i+1,0)},selectFiles:Wt}}(M,A));return e})()),1&e.$$.dirty[0]&&B(f),65&e.$$.dirty[0]&&A&&f!==A.getValue()&&A.setValue(f),66&e.$$.dirty[0]&&A&&m&&($(),(0,r.Ky)().then((()=>{N=m.map((e=>{var t;return null===(t=e.editorEffect)||void 0===t?void 0:t.call(e,h)})),P={},a.forEach((({handler:e})=>{"action"===(null==e?void 0:e.type)&&e.shortcut&&(P[e.shortcut]=()=>{e.click(h)})})),A.addKeyMap(P)})))},[f,m,g,_,T,C,A,O,D,h,u,o,I,k,L,U,K,G,H,W,a,d,v,y,b,E,S,w,R,M,e=>{A.setOption("keyMap",e.detail),A.focus()},e=>{const t=e.detail;n(7,O=u?O!==t&&t:t),"write"===O&&(0,r.Ky)().then((()=>{A&&A.focus()}))},e=>{switch(e.detail){case"fullscreen":n(14,L=!L);break;case"help":n(8,D="help"!==D&&"help");break;case"toc":n(8,D="toc"!==D&&"toc")}},function(e){i.VnY[e?"unshift":"push"]((()=>{I=e,n(12,I)}))},e=>{n(17,G=e.detail.hast),n(18,H=e.detail.file)},function(e){i.VnY[e?"unshift":"push"]((()=>{k=e,n(13,k)}))},()=>{n(8,D=!1)},e=>{k.querySelectorAll("h1,h2,h3,h4,h5,h6")[e.detail].scrollIntoView()},e=>{n(16,K=e.detail)},()=>{A.scrollTo(null,0),k.scrollTo({top:0})},function(e){i.VnY[e?"unshift":"push"]((()=>{C=e,n(5,C)}))}]}class Hn extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,jn,Fn,i.AqN,{value:0,plugins:1,sanitize:2,mode:22,previewDebounce:23,placeholder:24,editorConfig:25,locale:26,uploadImages:27,overridePreview:3,maxLength:4},null,[-1,-1])}}const Kn=Hn},30932:e=>{"use strict";e.exports=function(e,t){var n,i=String(e),r=0;if("string"!=typeof t)throw new Error("Expected character");for(n=i.indexOf(t);-1!==n;)r++,n=i.indexOf(t,n+t.length);return r}},71027:(e,t,n)=>{var i=n(89509).Buffer,r=n(42830).Transform,o=n(32553).s;function s(e){r.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(35717)(s,r),s.prototype.update=function(e,t,n){"string"==typeof e&&(e=i.from(e,t));var r=this._update(e);return this.hashMode?this:(n&&(r=this._toString(r,n)),r)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(e,t,n){var i;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){i=e}finally{n(i)}},s.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},s.prototype._finalOrDigest=function(e){var t=this.__final()||i.alloc(0);return e&&(t=this._toString(t,e,!0)),t},s.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new o(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var i=this._decoder.write(e);return n&&(i+=this._decoder.end()),i},e.exports=s},31250:e=>{e.exports=function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function n(e){t(e);var n=e.state.placeholder=document.createElement("pre");n.style.cssText="height: 0; overflow: visible",n.style.direction=e.getOption("direction"),n.className="CodeMirror-placeholder CodeMirror-line-like";var i=e.getOption("placeholder");"string"==typeof i&&(i=document.createTextNode(i)),n.appendChild(i),e.display.lineSpace.insertBefore(n,e.display.lineSpace.firstChild)}function i(e){o(e)&&n(e)}function r(e){var i=e.getWrapperElement(),r=o(e);i.className=i.className.replace(" CodeMirror-empty","")+(r?" CodeMirror-empty":""),r?n(e):t(e)}function o(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",(function(o,s,a){var c=a&&a!=e.Init;if(s&&!c)o.on("blur",i),o.on("change",r),o.on("swapDoc",r),e.on(o.getInputField(),"compositionupdate",o.state.placeholderCompose=function(){!function(e){setTimeout((function(){var i=!1;if(1==e.lineCount()){var r=e.getInputField();i="TEXTAREA"==r.nodeName?!e.getLine(0).length:!/[^\u200b]/.test(r.querySelector(".CodeMirror-line").textContent)}i?n(e):t(e)}),20)}(o)}),r(o);else if(!s&&c){o.off("blur",i),o.off("change",r),o.off("swapDoc",r),e.off(o.getInputField(),"compositionupdate",o.state.placeholderCompose),t(o);var l=o.getWrapperElement();l.className=l.className.replace(" CodeMirror-empty","")}s&&!o.hasFocus()&&i(o)}))}},53784:e=>{e.exports=function(e){"use strict";var t="CodeMirror-lint-markers";function n(e){e.parentNode&&e.parentNode.removeChild(e)}function i(t,i,r,o){var s=function(t,n,i){var r=document.createElement("div");function o(t){if(!r.parentNode)return e.off(document,"mousemove",o);r.style.top=Math.max(0,t.clientY-r.offsetHeight-5)+"px",r.style.left=t.clientX+5+"px"}return r.className="CodeMirror-lint-tooltip cm-s-"+t.options.theme,r.appendChild(i.cloneNode(!0)),t.state.lint.options.selfContain?t.getWrapperElement().appendChild(r):document.body.appendChild(r),e.on(document,"mousemove",o),o(n),null!=r.style.opacity&&(r.style.opacity=1),r}(t,i,r);function a(){var t;e.off(o,"mouseout",a),s&&((t=s).parentNode&&(null==t.style.opacity&&n(t),t.style.opacity=0,setTimeout((function(){n(t)}),600)),s=null)}var c=setInterval((function(){if(s)for(var e=o;;e=e.parentNode){if(e&&11==e.nodeType&&(e=e.host),e==document.body)return;if(!e){a();break}}if(!s)return clearInterval(c)}),400);e.on(o,"mouseout",a)}function r(e,t,n){this.marked=[],this.options=t,this.timeout=null,this.hasGutter=n,this.onMouseOver=function(t){!function(e,t){var n=t.target||t.srcElement;if(/\bCodeMirror-lint-mark-/.test(n.className)){for(var r=n.getBoundingClientRect(),o=(r.left+r.right)/2,s=(r.top+r.bottom)/2,c=e.findMarksAt(e.coordsChar({left:o,top:s},"client")),l=[],u=0;u<c.length;++u){var d=c[u].__annotation;d&&l.push(d)}l.length&&function(e,t,n){for(var r=n.target||n.srcElement,o=document.createDocumentFragment(),s=0;s<t.length;s++){var c=t[s];o.appendChild(a(c))}i(e,n,o,r)}(e,l,t)}}(e,t)},this.waitingFor=0}function o(e){var n=e.state.lint;n.hasGutter&&e.clearGutter(t);for(var i=0;i<n.marked.length;++i)n.marked[i].clear();n.marked.length=0}function s(t,n,r,o,s){var a=document.createElement("div"),c=a;return a.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+r,o&&((c=a.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),0!=s&&e.on(c,"mouseover",(function(e){i(t,e,n,c)})),a}function a(e){var t=e.severity;t||(t="error");var n=document.createElement("div");return n.className="CodeMirror-lint-message CodeMirror-lint-message-"+t,void 0!==e.messageHTML?n.innerHTML=e.messageHTML:n.appendChild(document.createTextNode(e.message)),n}function c(t){var n=t.state.lint.options,i=n.options||n,r=n.getAnnotations||t.getHelper(e.Pos(0,0),"lint");if(r)if(n.async||r.async)!function(t,n,i){var r=t.state.lint,o=++r.waitingFor;function s(){o=-1,t.off("change",s)}t.on("change",s),n(t.getValue(),(function(n,i){t.off("change",s),r.waitingFor==o&&(i&&n instanceof e&&(n=i),t.operation((function(){l(t,n)})))}),i,t)}(t,r,i);else{var o=r(t.getValue(),i,t);if(!o)return;o.then?o.then((function(e){t.operation((function(){l(t,e)}))})):t.operation((function(){l(t,o)}))}}function l(e,n){o(e);for(var i,r=e.state.lint,c=r.options,l=function(e){for(var t=[],n=0;n<e.length;++n){var i=e[n],r=i.from.line;(t[r]||(t[r]=[])).push(i)}return t}(n),u=0;u<l.length;++u){var d=l[u];if(d){var h=[];d=d.filter((function(e){return!(h.indexOf(e.message)>-1)&&h.push(e.message)}));for(var p=null,f=r.hasGutter&&document.createDocumentFragment(),m=0;m<d.length;++m){var g=d[m],v=g.severity;v||(v="error"),p="error"==(i=p)?i:v,c.formatAnnotation&&(g=c.formatAnnotation(g)),r.hasGutter&&f.appendChild(a(g)),g.to&&r.marked.push(e.markText(g.from,g.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+v,__annotation:g}))}r.hasGutter&&e.setGutterMarker(u,t,s(e,f,p,l[u].length>1,r.options.tooltips))}}c.onUpdateLinting&&c.onUpdateLinting(n,l,e)}function u(e){var t=e.state.lint;t&&(clearTimeout(t.timeout),t.timeout=setTimeout((function(){c(e)}),t.options.delay||500))}e.defineOption("lint",!1,(function(n,i,s){if(s&&s!=e.Init&&(o(n),!1!==n.state.lint.options.lintOnChange&&n.off("change",u),e.off(n.getWrapperElement(),"mouseover",n.state.lint.onMouseOver),clearTimeout(n.state.lint.timeout),delete n.state.lint),i){for(var a=n.getOption("gutters"),l=!1,d=0;d<a.length;++d)a[d]==t&&(l=!0);var h=n.state.lint=new r(n,(p=i)instanceof Function?{getAnnotations:p}:(p&&!0!==p||(p={}),p),l);!1!==h.options.lintOnChange&&n.on("change",u),0!=h.options.tooltips&&"gutter"!=h.options.tooltips&&e.on(n.getWrapperElement(),"mouseover",h.onMouseOver),c(n)}var p})),e.defineExtension("performLint",(function(){this.state.lint&&c(this)}))}},97553:e=>{e.exports=function(e){"use strict";e.overlayMode=function(t,n,i){return{startState:function(){return{base:e.startState(t),overlay:e.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(i){return{base:e.copyState(t,i.base),overlay:e.copyState(n,i.overlay),basePos:i.basePos,baseCur:null,overlayPos:i.overlayPos,overlayCur:null}},token:function(e,r){return(e!=r.streamSeen||Math.min(r.basePos,r.overlayPos)<e.start)&&(r.streamSeen=e,r.basePos=r.overlayPos=e.start),e.start==r.basePos&&(r.baseCur=t.token(e,r.base),r.basePos=e.pos),e.start==r.overlayPos&&(e.pos=e.start,r.overlayCur=n.token(e,r.overlay),r.overlayPos=e.pos),e.pos=Math.min(r.basePos,r.overlayPos),null==r.overlayCur?r.baseCur:null!=r.baseCur&&r.overlay.combineTokens||i&&null==r.overlay.combineTokens?r.baseCur+" "+r.overlayCur:r.overlayCur},indent:t.indent&&function(e,n,i){return t.indent(e.base,n,i)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){var r,o;return t.blankLine&&(r=t.blankLine(e.base)),n.blankLine&&(o=n.blankLine(e.overlay)),null==o?r:i&&null!=r?r+" "+o:o}}}}},23456:e=>{e.exports=function(e){"use strict";var t=e.Pos;function n(e,t){return e.line==t.line&&e.ch==t.ch}var i=[];function r(e){i.push(e),i.length>50&&i.shift()}function o(e){return i[i.length-(e?Math.min(e,1):1)]||""}var s=null;function a(e,t,o,a,c){null==c&&(c=e.getRange(t,o)),"grow"==a&&s&&s.cm==e&&n(t,s.pos)&&e.isClean(s.gen)?function(e){if(!i.length)return r(e);i[i.length-1]+=e}(c):!1!==a&&r(c),e.replaceRange("",t,o,"+delete"),s="grow"==a?{cm:e,pos:t,gen:e.changeGeneration()}:null}function c(e,t,n){return e.findPosH(t,n,"char",!0)}function l(e,t,n){return e.findPosH(t,n,"word",!0)}function u(e,t,n){return e.findPosV(t,n,"line",e.doc.sel.goalColumn)}function d(e,t,n){return e.findPosV(t,n,"page",e.doc.sel.goalColumn)}function h(e,n,i){for(var r=n.line,o=e.getLine(r),s=/\S/.test(i<0?o.slice(0,n.ch):o.slice(n.ch)),a=e.firstLine(),c=e.lastLine();;){if((r+=i)<a||r>c)return e.clipPos(t(r-i,i<0?0:null));if(o=e.getLine(r),/\S/.test(o))s=!0;else if(s)return t(r,0)}}function p(e,n,i){for(var r=n.line,o=n.ch,s=e.getLine(n.line),a=!1;;){var c=s.charAt(o+(i<0?-1:0));if(c){if(a&&/[!?.]/.test(c))return t(r,o+(i>0?1:0));a||(a=/\w/.test(c)),o+=i}else{if(r==(i<0?e.firstLine():e.lastLine()))return t(r,o);if(s=e.getLine(r+i),!/\S/.test(s))return t(r,o);r+=i,o=i<0?s.length:0}}}function f(e,i,r){var o;if(e.findMatchingBracket&&(o=e.findMatchingBracket(i,{strict:!0}))&&o.match&&(o.forward?1:-1)==r)return r>0?t(o.to.line,o.to.ch+1):o.to;for(var s=!0;;s=!1){var a=e.getTokenAt(i),c=t(i.line,r<0?a.start:a.end);if(!(s&&r>0&&a.end==i.ch)&&/\w/.test(a.string))return c;var l=e.findPosH(c,r,"char");if(n(c,l))return i;i=l}}function m(e,t){var n=e.state.emacsPrefix;return n?(T(e),"-"==n?-1:Number(n)):t?null:1}function g(e){var t="string"==typeof e?function(t){t.execCommand(e)}:e;return function(e){var n=m(e);t(e);for(var i=1;i<n;++i)t(e)}}function v(e,t,i,r){var o=m(e);o<0&&(r=-r,o=-o);for(var s=0;s<o;++s){var a=i(e,t,r);if(n(a,t))break;t=a}return t}function y(e,t){var n=function(n){n.extendSelection(v(n,n.getCursor(),e,t))};return n.motion=!0,n}function b(e,t,n,i){for(var r,o=e.listSelections(),s=o.length;s--;)a(e,r=o[s].head,v(e,r,t,n),i)}function E(e,t){if(e.somethingSelected()){for(var n,i=e.listSelections(),r=i.length;r--;)a(e,(n=i[r]).anchor,n.head,t);return!0}}function S(e,t){e.state.emacsPrefix?"-"!=t&&(e.state.emacsPrefix+=t):(e.state.emacsPrefix=t,e.on("keyHandled",_),e.on("inputRead",x))}var w={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0};function _(e,t){e.state.emacsPrefixMap||w.hasOwnProperty(t)||T(e)}function T(e){e.state.emacsPrefix=null,e.off("keyHandled",_),e.off("inputRead",x)}function x(e,t){var n=m(e);if(n>1&&"+input"==t.origin){for(var i=t.text.join("\n"),r="",o=1;o<n;++o)r+=i;e.replaceSelection(r)}}function C(e,t){("string"!=typeof t||!/^\d$/.test(t)&&"Ctrl-U"!=t)&&(e.removeKeyMap(O),e.state.emacsPrefixMap=!1,e.off("keyHandled",C),e.off("inputRead",C))}function I(e){e.setCursor(e.getCursor()),e.setExtending(!e.getExtending()),e.on("change",(function(){e.setExtending(!1)}))}function k(e){e.setExtending(!1),e.setCursor(e.getCursor())}function M(e,t){var n=e.getCursor(),i=e.findPosH(n,1,"word");e.replaceRange(t(e.getRange(n,i)),n,i),e.setCursor(i)}e.emacs={kill:a,killRegion:E,repeated:g};var A=e.keyMap.emacs=e.normalizeKeyMap({"Ctrl-W":function(e){a(e,e.getCursor("start"),e.getCursor("end"),!0)},"Ctrl-K":g((function(e){var n=e.getCursor(),i=e.clipPos(t(n.line)),r=e.getRange(n,i);/\S/.test(r)||(r+="\n",i=t(n.line+1,0)),a(e,n,i,"grow",r)})),"Alt-W":function(e){r(e.getSelection()),k(e)},"Ctrl-Y":function(e){var t=e.getCursor();e.replaceRange(o(m(e)),t,t,"paste"),e.setSelection(t,e.getCursor())},"Alt-Y":function(e){e.replaceSelection((i.length>1&&i.pop(),o()),"around","paste")},"Ctrl-Space":I,"Ctrl-Shift-2":I,"Ctrl-F":y(c,1),"Ctrl-B":y(c,-1),Right:y(c,1),Left:y(c,-1),"Ctrl-D":function(e){b(e,c,1,!1)},Delete:function(e){E(e,!1)||b(e,c,1,!1)},"Ctrl-H":function(e){b(e,c,-1,!1)},Backspace:function(e){E(e,!1)||b(e,c,-1,!1)},"Alt-F":y(l,1),"Alt-B":y(l,-1),"Alt-Right":y(l,1),"Alt-Left":y(l,-1),"Alt-D":function(e){b(e,l,1,"grow")},"Alt-Backspace":function(e){b(e,l,-1,"grow")},"Ctrl-N":y(u,1),"Ctrl-P":y(u,-1),Down:y(u,1),Up:y(u,-1),"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":y(d,-1),"Ctrl-V":y(d,1),PageUp:y(d,-1),PageDown:y(d,1),"Ctrl-Up":y(h,-1),"Ctrl-Down":y(h,1),"Alt-A":y(p,-1),"Alt-E":y(p,1),"Alt-K":function(e){b(e,p,1,"grow")},"Ctrl-Alt-K":function(e){b(e,f,1,"grow")},"Ctrl-Alt-Backspace":function(e){b(e,f,-1,"grow")},"Ctrl-Alt-F":y(f,1),"Ctrl-Alt-B":y(f,-1),"Shift-Ctrl-Alt-2":function(e){var t=e.getCursor();e.setSelection(v(e,t,f,1),t)},"Ctrl-Alt-T":function(e){var t=f(e,e.getCursor(),-1),n=f(e,t,1),i=f(e,n,1),r=f(e,i,-1);e.replaceRange(e.getRange(r,i)+e.getRange(n,r)+e.getRange(t,n),t,i)},"Ctrl-Alt-U":g((function(e){for(var n=e.getCursor(),i=n.line,r=n.ch,o=[];i>=e.firstLine();){for(var s=e.getLine(i),a=null==r?s.length:r;a>0;)if(")"==(r=s.charAt(--a)))o.push("(");else if("]"==r)o.push("[");else if("}"==r)o.push("{");else if(/[\(\{\[]/.test(r)&&(!o.length||o.pop()!=r))return e.extendSelection(t(i,a));--i,r=null}})),"Alt-Space":function(e){for(var n=e.getCursor(),i=n.ch,r=n.ch,o=e.getLine(n.line);i&&/\s/.test(o.charAt(i-1));)--i;for(;r<o.length&&/\s/.test(o.charAt(r));)++r;e.replaceRange(" ",t(n.line,i),t(n.line,r))},"Ctrl-O":g((function(e){e.replaceSelection("\n","start")})),"Ctrl-T":g((function(e){e.execCommand("transposeChars")})),"Alt-C":g((function(e){M(e,(function(e){var t=e.search(/\w/);return-1==t?e:e.slice(0,t)+e.charAt(t).toUpperCase()+e.slice(t+1).toLowerCase()}))})),"Alt-U":g((function(e){M(e,(function(e){return e.toUpperCase()}))})),"Alt-L":g((function(e){M(e,(function(e){return e.toLowerCase()}))})),"Alt-;":"toggleComment","Ctrl-/":g("undo"),"Shift-Ctrl--":g("undo"),"Ctrl-Z":g("undo"),"Cmd-Z":g("undo"),"Shift-Ctrl-Z":"redo","Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findPersistentNext","Ctrl-R":"findPersistentPrev","Ctrl-G":function(e){e.execCommand("clearSearch"),k(e)},"Shift-Alt-5":"replace","Alt-/":"autocomplete",Enter:"newlineAndIndent","Ctrl-J":g((function(e){e.replaceSelection("\n","end")})),Tab:"indentAuto","Alt-G G":function(e){var t=m(e,!0);if(null!=t&&t>0)return e.setCursor(t-1);!function(e,t,n){e.openDialog?e.openDialog(function(e){var t=document.createDocumentFragment(),n=document.createElement("input");return n.setAttribute("type","text"),n.style.width="10em",t.appendChild(document.createTextNode(e+": ")),t.appendChild(n),t}(t),n,{bottom:!0}):n(prompt(t,""))}(e,"Goto line",(function(t){var n;t&&!isNaN(n=Number(t))&&n==(0|n)&&n>0&&e.setCursor(n-1)}))},"Ctrl-X Tab":function(e){e.indentSelection(m(e,!0)||e.getOption("indentUnit"))},"Ctrl-X Ctrl-X":function(e){e.setSelection(e.getCursor("head"),e.getCursor("anchor"))},"Ctrl-X Ctrl-S":"save","Ctrl-X Ctrl-W":"save","Ctrl-X S":"saveAll","Ctrl-X F":"open","Ctrl-X U":g("undo"),"Ctrl-X K":"close","Ctrl-X Delete":function(e){a(e,e.getCursor(),p(e,e.getCursor(),1),"grow")},"Ctrl-X H":"selectAll","Ctrl-Q Tab":g("insertTab"),"Ctrl-U":function(e){e.state.emacsPrefixMap=!0,e.addKeyMap(O),e.on("keyHandled",C),e.on("inputRead",C)},fallthrough:"default"}),O={"Ctrl-G":T};function R(e){O[e]=function(t){S(t,e)},A["Ctrl-"+e]=function(t){S(t,e)},w["Ctrl-"+e]=!0}for(var L=0;L<10;++L)R(String(L));R("-")}},80607:(e,t,n)=>{var i=n(25108);e.exports=function(e){"use strict";var t=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],n=t.length,r=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"global",shortName:"g"}],o=e.Pos;e.Vim=function(){function s(t,n){this==e.keyMap.vim&&(e.rmClass(t.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==t.getOption("inputStyle")&&null!=document.body.style.caretColor&&(function(e){l(e),e.off("cursorActivity",c),e.state.fatCursorMarks=null}(t),t.getInputField().style.caretColor="")),n&&n.attach==a||function(t){t.setOption("disableInput",!1),t.off("cursorActivity",Ze),e.off(t.getInputField(),"paste",p(t)),t.state.vim=null}(t)}function a(t,n){this==e.keyMap.vim&&(e.addClass(t.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==t.getOption("inputStyle")&&null!=document.body.style.caretColor&&(function(e){e.state.fatCursorMarks=[],c(e),e.on("cursorActivity",c)}(t),t.getInputField().style.caretColor="transparent")),n&&n.attach==a||function(t){t.setOption("disableInput",!0),t.setOption("showCursorWhenSelecting",!1),e.signal(t,"vim-mode-change",{mode:"normal"}),t.on("cursorActivity",Ze),U(t),e.on(t.getInputField(),"paste",p(t))}(t)}function c(e){if(e.state.fatCursorMarks){l(e);for(var t=e.listSelections(),n=[],i=0;i<t.length;i++){var r=t[i];if(r.empty()){var s=e.getLine(r.anchor.line).length;r.anchor.ch<s?n.push(e.markText(r.anchor,o(r.anchor.line,r.anchor.ch+1),{className:"cm-fat-cursor-mark"})):n.push(e.markText(o(r.anchor.line,s-1),o(r.anchor.line,s),{className:"cm-fat-cursor-mark"}))}}e.state.fatCursorMarks=n}}function l(e){var t=e.state.fatCursorMarks;if(t)for(var n=0;n<t.length;n++)t[n].clear()}function u(t,n){if(n){if(this[t])return this[t];var i=function(e){if("'"==e.charAt(0))return e.charAt(1);var t=e.split(/-(?!$)/),n=t[t.length-1];if(1==t.length&&1==t[0].length)return!1;if(2==t.length&&"Shift"==t[0]&&1==n.length)return!1;for(var i=!1,r=0;r<t.length;r++){var o=t[r];o in d?t[r]=d[o]:i=!0,o in h&&(t[r]=h[o])}return!!i&&(x(n)&&(t[t.length-1]=n.toLowerCase()),"<"+t.join("-")+">")}(t);if(!i)return!1;var r=e.Vim.findKey(n,i);return"function"==typeof r&&e.signal(n,"vim-keypress",i),r}}e.defineOption("vimMode",!1,(function(t,n,i){n&&"vim"!=t.getOption("keyMap")?t.setOption("keyMap","vim"):!n&&i!=e.Init&&/^vim/.test(t.getOption("keyMap"))&&t.setOption("keyMap","default")}));var d={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A",CapsLock:""},h={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function p(e){var t=e.state.vim;return t.onPasteFn||(t.onPasteFn=function(){t.insertMode||(e.setCursor(Z(e.getCursor(),0,1)),X.enterInsertMode(e,{},t))}),t.onPasteFn}var f=/[\d]/,m=[e.isWordChar,function(t){return t&&!e.isWordChar(t)&&!/\s/.test(t)}],g=[function(e){return/\S/.test(e)}];function v(e,t){for(var n=[],i=e;i<e+t;i++)n.push(String.fromCharCode(i));return n}var y=v(65,26),b=v(97,26),E=v(48,10),S=[].concat(y,b,E,["<",">"]),w=[].concat(y,b,E,["-",'"',".",":","_","/"]);function _(e,t){return t>=e.firstLine()&&t<=e.lastLine()}function T(e){return/^[a-z]$/.test(e)}function x(e){return/^[A-Z]$/.test(e)}function C(e){return/^\s*$/.test(e)}function I(e){return-1!=".?!".indexOf(e)}function k(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}var M={};function A(e,t,n,i,r){if(void 0===t&&!r)throw Error("defaultValue is required unless callback is provided");if(n||(n="string"),M[e]={type:n,defaultValue:t,callback:r},i)for(var o=0;o<i.length;o++)M[i[o]]=M[e];t&&O(e,t)}function O(e,t,n,i){var r=M[e],o=(i=i||{}).scope;if(!r)return new Error("Unknown option: "+e);if("boolean"==r.type){if(t&&!0!==t)return new Error("Invalid argument: "+e+"="+t);!1!==t&&(t=!0)}r.callback?("local"!==o&&r.callback(t,void 0),"global"!==o&&n&&r.callback(t,n)):("local"!==o&&(r.value="boolean"==r.type?!!t:t),"global"!==o&&n&&(n.state.vim.options[e]={value:t}))}function R(e,t,n){var i=M[e],r=(n=n||{}).scope;if(!i)return new Error("Unknown option: "+e);if(i.callback){var o=t&&i.callback(void 0,t);return"global"!==r&&void 0!==o?o:"local"!==r?i.callback():void 0}return((o="global"!==r&&t&&t.state.vim.options[e])||"local"!==r&&i||{}).value}A("filetype",void 0,"string",["ft"],(function(e,t){if(void 0!==t){if(void 0===e)return"null"==(n=t.getOption("mode"))?"":n;var n=""==e?"null":e;t.setOption("mode",n)}}));var L,D,N=function(){var e=100,t=-1,n=0,i=0,r=new Array(e);function o(o,s){(t+=s)>n?t=n:t<i&&(t=i);var a=r[(e+t)%e];if(a&&!a.find()){var c,l=s>0?1:-1,u=o.getCursor();do{if((a=r[(e+(t+=l))%e])&&(c=a.find())&&!ie(u,c))break}while(t<n&&t>i)}return a}return{cachedCursor:void 0,add:function(o,s,a){var c=r[t%e];function l(n){var i=++t%e,s=r[i];s&&s.clear(),r[i]=o.setBookmark(n)}if(c){var u=c.find();u&&!ie(u,s)&&l(s)}else l(s);l(a),n=t,(i=t-e+1)<0&&(i=0)},find:function(e,n){var i=t,r=o(e,n);return t=i,r&&r.find()},move:o}},P=function(e){return e?{changes:e.changes,expectCursorActivityForChange:e.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function $(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=P()}function U(e){return e.state.vim||(e.state.vim={inputState:new j,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),e.state.vim}function B(){for(var e in L={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:N(),macroModeState:new $,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new q({}),searchHistoryController:new V,exCommandHistoryController:new V},M){var t=M[e];t.value=t.defaultValue}}$.prototype={exitMacroRecordMode:function(){var e=L.macroModeState;e.onRecordingDone&&e.onRecordingDone(),e.onRecordingDone=void 0,e.isRecording=!1},enterMacroRecordMode:function(e,t){var n=L.registerController.getRegister(t);n&&(n.clear(),this.latestRegister=t,e.openDialog&&(this.onRecordingDone=e.openDialog("(recording)["+t+"]",null,{bottom:!0})),this.isRecording=!0)}};var F={buildKeyMap:function(){},getRegisterController:function(){return L.registerController},resetVimGlobalState_:B,getVimGlobalState_:function(){return L},maybeInitVimState_:U,suppressErrorLogging:!1,InsertModeKey:nt,map:function(e,t,n){ze.map(e,t,n)},unmap:function(e,t){ze.unmap(e,t)},noremap:function(e,i,r){function o(e){return e?[e]:["normal","insert","visual"]}for(var s=o(r),a=t.length,c=a-n;c<a&&s.length;c++){var l=t[c];if(!(l.keys!=i||r&&l.context&&l.context!==r||"ex"===l.type.substr(0,2)||"key"===l.type.substr(0,3))){var u={};for(var d in l)u[d]=l[d];u.keys=e,r&&!u.context&&(u.context=r),this._mapCommand(u);var h=o(l.context);s=s.filter((function(e){return-1===h.indexOf(e)}))}}},mapclear:function(e){var i=t.length,r=n,o=t.slice(0,i-r);if(t=t.slice(i-r),e)for(var s=o.length-1;s>=0;s--){var a=o[s];if(e!==a.context)if(a.context)this._mapCommand(a);else{var c=["normal","insert","visual"];for(var l in c)if(c[l]!==e){var u={};for(var d in a)u[d]=a[d];u.context=c[l],this._mapCommand(u)}}}},setOption:O,getOption:R,defineOption:A,defineEx:function(e,t,n){if(t){if(0!==e.indexOf(t))throw new Error('(Vim.defineEx) "'+t+'" is not a prefix of "'+e+'", command not registered')}else t=e;We[e]=n,ze.commandMap_[t]={name:e,shortName:t,type:"api"}},handleKey:function(e,t,n){var i=this.findKey(e,t,n);if("function"==typeof i)return i()},findKey:function(n,r,o){var s,a=U(n);function c(){if("<Esc>"==r)return H(n),a.visualMode?ge(n):a.insertMode&&Ye(n),!0}return!1===(s=a.insertMode?function(){if(c())return!0;for(var e=a.inputState.keyBuffer=a.inputState.keyBuffer+r,i=1==r.length,o=G.matchCommand(e,t,a.inputState,"insert");e.length>1&&"full"!=o.type;){e=a.inputState.keyBuffer=e.slice(1);var s=G.matchCommand(e,t,a.inputState,"insert");"none"!=s.type&&(o=s)}if("none"==o.type)return H(n),!1;if("partial"==o.type)return D&&window.clearTimeout(D),D=window.setTimeout((function(){a.insertMode&&a.inputState.keyBuffer&&H(n)}),R("insertModeEscKeysTimeout")),!i;if(D&&window.clearTimeout(D),i){for(var l=n.listSelections(),u=0;u<l.length;u++){var d=l[u].head;n.replaceRange("",Z(d,0,-(e.length-1)),d,"+input")}L.macroModeState.lastInsertModeChanges.changes.pop()}return H(n),o.command}():function(){if(function(){var e=L.macroModeState;if(e.isRecording){if("q"==r)return e.exitMacroRecordMode(),H(n),!0;"mapping"!=o&&function(e,t){if(!e.isPlaying){var n=e.latestRegister,i=L.registerController.getRegister(n);i&&i.pushText(t)}}(e,r)}}()||c())return!0;var e=a.inputState.keyBuffer=a.inputState.keyBuffer+r;if(/^[1-9]\d*$/.test(e))return!0;if(!(i=/^(\d*)(.*)$/.exec(e)))return H(n),!1;var i,s=a.visualMode?"visual":"normal",l=G.matchCommand(i[2]||i[1],t,a.inputState,s);return"none"==l.type?(H(n),!1):"partial"==l.type||(a.inputState.keyBuffer="",(i=/^(\d*)(.*)$/.exec(e))[1]&&"0"!=i[1]&&a.inputState.pushRepeatDigit(i[1]),l.command)}())?a.insertMode||1!==r.length?void 0:function(){return!0}:!0===s?function(){return!0}:function(){return n.operation((function(){n.curOp.isVimOp=!0;try{"keyToKey"==s.type?function(t){for(var i;t;)i=/<\w+-.+?>|<\w+>|./.exec(t),r=i[0],t=t.substring(i.index+r.length),e.Vim.handleKey(n,r,"mapping")}(s.toKeys):G.processCommand(n,a,s)}catch(t){throw n.state.vim=void 0,U(n),e.Vim.suppressErrorLogging||i.log(t),t}return!0}))}},handleEx:function(e,t){ze.processCommand(e,t)},defineMotion:function(e,t){W[e]=t},defineAction:function(e,t){X[e]=t},defineOperator:function(e,t){Y[e]=t},mapCommand:function(e,t,n,i,r){var o={keys:e,type:t};for(var s in o[t]=n,o[t+"Args"]=i,r)o[s]=r[s];Xe(o)},_mapCommand:Xe,defineRegister:function(e,t){var n=L.registerController.registers;if(!e||1!=e.length)throw Error("Register name must be 1 character");if(n[e])throw Error("Register already defined "+e);n[e]=t,w.push(e)},exitVisualMode:ge,exitInsertMode:Ye};function j(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function H(t,n){t.state.vim.inputState=new j,e.signal(t,"vim-command-done",n)}function K(e,t,n){this.clear(),this.keyBuffer=[e||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!t,this.blockwise=!!n}function q(e){this.registers=e,this.unnamedRegister=e['"']=new K,e["."]=new K,e[":"]=new K,e["/"]=new K}function V(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}j.prototype.pushRepeatDigit=function(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)},j.prototype.getRepeat=function(){var e=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10))),e},K.prototype={setText:function(e,t,n){this.keyBuffer=[e||""],this.linewise=!!t,this.blockwise=!!n},pushText:function(e,t){t&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0),this.keyBuffer.push(e)},pushInsertModeChanges:function(e){this.insertModeChanges.push(P(e))},pushSearchQuery:function(e){this.searchQueries.push(e)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},q.prototype={pushText:function(e,t,n,i,r){if("_"!==e){i&&"\n"!==n.charAt(n.length-1)&&(n+="\n");var o=this.isValidRegister(e)?this.getRegister(e):null;if(o)x(e)?o.pushText(n,i):o.setText(n,i,r),this.unnamedRegister.setText(o.toString(),i);else{switch(t){case"yank":this.registers[0]=new K(n,i,r);break;case"delete":case"change":-1==n.indexOf("\n")?this.registers["-"]=new K(n,i):(this.shiftNumericRegisters_(),this.registers[1]=new K(n,i))}this.unnamedRegister.setText(n,i,r)}}},getRegister:function(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||(this.registers[e]=new K),this.registers[e]):this.unnamedRegister},isValidRegister:function(e){return e&&k(e,w)},shiftNumericRegisters_:function(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}},V.prototype={nextMatch:function(e,t){var n=this.historyBuffer,i=t?-1:1;null===this.initialPrefix&&(this.initialPrefix=e);for(var r=this.iterator+i;t?r>=0:r<n.length;r+=i)for(var o=n[r],s=0;s<=o.length;s++)if(this.initialPrefix==o.substring(0,s))return this.iterator=r,o;return r>=n.length?(this.iterator=n.length,this.initialPrefix):r<0?e:void 0},pushInput:function(e){var t=this.historyBuffer.indexOf(e);t>-1&&this.historyBuffer.splice(t,1),e.length&&this.historyBuffer.push(e)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var G={matchCommand:function(e,t,n,i){var r,o=function(e,t,n,i){for(var r,o=[],s=[],a=0;a<t.length;a++){var c=t[a];"insert"==n&&"insert"!=c.context||c.context&&c.context!=n||i.operator&&"action"==c.type||!(r=ee(e,c.keys))||("partial"==r&&o.push(c),"full"==r&&s.push(c))}return{partial:o.length&&o,full:s.length&&s}}(e,t,i,n);if(!o.full&&!o.partial)return{type:"none"};if(!o.full&&o.partial)return{type:"partial"};for(var s=0;s<o.full.length;s++){var a=o.full[s];r||(r=a)}if("<character>"==r.keys.slice(-11)){var c=function(e){var t=/^.*(<[^>]+>)$/.exec(e),n=t?t[1]:e.slice(-1);if(n.length>1)switch(n){case"<CR>":n="\n";break;case"<Space>":n=" ";break;default:n=""}return n}(e);if(!c)return{type:"none"};n.selectedCharacter=c}return{type:"full",command:r}},processCommand:function(e,t,n){switch(t.inputState.repeatOverride=n.repeatOverride,n.type){case"motion":this.processMotion(e,t,n);break;case"operator":this.processOperator(e,t,n);break;case"operatorMotion":this.processOperatorMotion(e,t,n);break;case"action":this.processAction(e,t,n);break;case"search":this.processSearch(e,t,n);break;case"ex":case"keyToEx":this.processEx(e,t,n)}},processMotion:function(e,t,n){t.inputState.motion=n.motion,t.inputState.motionArgs=Q(n.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,n){var i=t.inputState;if(i.operator){if(i.operator==n.operator)return i.motion="expandToLine",i.motionArgs={linewise:!0},void this.evalInput(e,t);H(e)}i.operator=n.operator,i.operatorArgs=Q(n.operatorArgs),n.exitVisualBlock&&(t.visualBlock=!1,fe(e)),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,n){var i=t.visualMode,r=Q(n.operatorMotionArgs);r&&i&&r.visualLine&&(t.visualLine=!0),this.processOperator(e,t,n),i||this.processMotion(e,t,n)},processAction:function(e,t,n){var i=t.inputState,r=i.getRepeat(),o=!!r,s=Q(n.actionArgs)||{};i.selectedCharacter&&(s.selectedCharacter=i.selectedCharacter),n.operator&&this.processOperator(e,t,n),n.motion&&this.processMotion(e,t,n),(n.motion||n.operator)&&this.evalInput(e,t),s.repeat=r||1,s.repeatIsExplicit=o,s.registerName=i.registerName,H(e),t.lastMotion=null,n.isEdit&&this.recordLastEdit(t,i,n),X[n.action](e,s,t)},processSearch:function(t,n,i){if(t.getSearchCursor){var r=i.searchArgs.forward,o=i.searchArgs.wholeWordOnly;Ae(t).setReversed(!r);var s=r?"/":"?",a=Ae(t).getQuery(),c=t.getScrollInfo();switch(i.searchArgs.querySrc){case"prompt":var l=L.macroModeState;l.isPlaying?p(h=l.replaySearchQueries.shift(),!0,!1):$e(t,{onClose:function(e){t.scrollTo(c.left,c.top),p(e,!0,!0);var n=L.macroModeState;n.isRecording&&function(e,t){if(!e.isPlaying){var n=e.latestRegister,i=L.registerController.getRegister(n);i&&i.pushSearchQuery&&i.pushSearchQuery(t)}}(n,e)},prefix:s,desc:"(JavaScript regexp)",onKeyUp:function(n,i,o){var s,a,l,u=e.keyName(n);"Up"==u||"Down"==u?(s="Up"==u,a=n.target?n.target.selectionEnd:0,o(i=L.searchHistoryController.nextMatch(i,s)||""),a&&n.target&&(n.target.selectionEnd=n.target.selectionStart=Math.min(a,n.target.value.length))):"Left"!=u&&"Right"!=u&&"Ctrl"!=u&&"Alt"!=u&&"Shift"!=u&&L.searchHistoryController.reset();try{l=Ue(t,i,!0,!0)}catch(n){}l?t.scrollIntoView(je(t,!r,l),30):(He(t),t.scrollTo(c.left,c.top))},onKeyDown:function(n,i,r){var o=e.keyName(n);"Esc"==o||"Ctrl-C"==o||"Ctrl-["==o||"Backspace"==o&&""==i?(L.searchHistoryController.pushInput(i),L.searchHistoryController.reset(),Ue(t,a),He(t),t.scrollTo(c.left,c.top),e.e_stop(n),H(t),r(),t.focus()):"Up"==o||"Down"==o?e.e_stop(n):"Ctrl-U"==o&&(e.e_stop(n),r(""))}});break;case"wordUnderCursor":var u=ye(t,!1,0,!1,!0),d=!0;if(u||(u=ye(t,!1,0,!1,!1),d=!1),!u)return;var h=t.getLine(u.start.line).substring(u.start.ch,u.end.ch);h=d&&o?"\\b"+h+"\\b":h.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1"),L.jumpList.cachedCursor=t.getCursor(),t.setCursor(u.start),p(h,!0,!1)}}function p(e,r,o){L.searchHistoryController.pushInput(e),L.searchHistoryController.reset();try{Ue(t,e,r,o)}catch(n){return Pe(t,"Invalid regex: "+e),void H(t)}G.processMotion(t,n,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:i.searchArgs.toJumplist}})}},processEx:function(t,n,i){function r(e){L.exCommandHistoryController.pushInput(e),L.exCommandHistoryController.reset(),ze.processCommand(t,e)}function o(n,i,r){var o,s,a=e.keyName(n);("Esc"==a||"Ctrl-C"==a||"Ctrl-["==a||"Backspace"==a&&""==i)&&(L.exCommandHistoryController.pushInput(i),L.exCommandHistoryController.reset(),e.e_stop(n),H(t),r(),t.focus()),"Up"==a||"Down"==a?(e.e_stop(n),o="Up"==a,s=n.target?n.target.selectionEnd:0,r(i=L.exCommandHistoryController.nextMatch(i,o)||""),s&&n.target&&(n.target.selectionEnd=n.target.selectionStart=Math.min(s,n.target.value.length))):"Ctrl-U"==a?(e.e_stop(n),r("")):"Left"!=a&&"Right"!=a&&"Ctrl"!=a&&"Alt"!=a&&"Shift"!=a&&L.exCommandHistoryController.reset()}"keyToEx"==i.type?ze.processCommand(t,i.exArgs.input):n.visualMode?$e(t,{onClose:r,prefix:":",value:"'<,'>",onKeyDown:o,selectValueOnOpen:!1}):$e(t,{onClose:r,prefix:":",onKeyDown:o})},evalInput:function(e,t){var n,i,r,s=t.inputState,a=s.motion,c=s.motionArgs||{},l=s.operator,u=s.operatorArgs||{},d=s.registerName,h=t.sel,p=ne(t.visualMode?J(e,h.head):e.getCursor("head")),f=ne(t.visualMode?J(e,h.anchor):e.getCursor("anchor")),m=ne(p),g=ne(f);if(l&&this.recordLastEdit(t,s),(r=void 0!==s.repeatOverride?s.repeatOverride:s.getRepeat())>0&&c.explicitRepeat?c.repeatIsExplicit=!0:(c.noRepeat||!c.explicitRepeat&&0===r)&&(r=1,c.repeatIsExplicit=!1),s.selectedCharacter&&(c.selectedCharacter=u.selectedCharacter=s.selectedCharacter),c.repeat=r,H(e),a){var v=W[a](e,p,c,t,s);if(t.lastMotion=W[a],!v)return;if(c.toJumplist){var y=L.jumpList,b=y.cachedCursor;b?(be(e,b,v),delete y.cachedCursor):be(e,p,v)}v instanceof Array?(i=v[0],n=v[1]):n=v,n||(n=ne(p)),t.visualMode?(t.visualBlock&&n.ch===1/0||(n=J(e,n)),i&&(i=J(e,i)),i=i||g,h.anchor=i,h.head=n,fe(e),Ce(e,t,"<",re(i,n)?i:n),Ce(e,t,">",re(i,n)?n:i)):l||(n=J(e,n),e.setCursor(n.line,n.ch))}if(l){if(u.lastSel){i=g;var E=u.lastSel,S=Math.abs(E.head.line-E.anchor.line),w=Math.abs(E.head.ch-E.anchor.ch);n=E.visualLine?o(g.line+S,g.ch):E.visualBlock?o(g.line+S,g.ch+w):E.head.line==E.anchor.line?o(g.line,g.ch+w):o(g.line+S,g.ch),t.visualMode=!0,t.visualLine=E.visualLine,t.visualBlock=E.visualBlock,h=t.sel={anchor:i,head:n},fe(e)}else t.visualMode&&(u.lastSel={anchor:ne(h.anchor),head:ne(h.head),visualBlock:t.visualBlock,visualLine:t.visualLine});var _,T,x,I,k;if(t.visualMode){if(_=oe(h.head,h.anchor),T=se(h.head,h.anchor),x=t.visualLine||u.linewise,k=me(e,{anchor:_,head:T},I=t.visualBlock?"block":x?"line":"char"),x){var M=k.ranges;if("block"==I)for(var A=0;A<M.length;A++)M[A].head.ch=ce(e,M[A].head.line);else"line"==I&&(M[0].head=o(M[0].head.line+1,0))}}else{if(_=ne(i||g),re(T=ne(n||m),_)){var O=_;_=T,T=O}(x=c.linewise||u.linewise)?function(e,t,n){t.ch=0,n.ch=0,n.line++}(0,_,T):c.forward&&function(e,t,n){var i=e.getRange(t,n);if(/\n\s*$/.test(i)){var r=i.split("\n");r.pop();for(var o=r.pop();r.length>0&&o&&C(o);o=r.pop())n.line--,n.ch=0;o?(n.line--,n.ch=ce(e,n.line)):n.ch=0}}(e,_,T),k=me(e,{anchor:_,head:T},I="char",!c.inclusive||x)}e.setSelections(k.ranges,k.primary),t.lastMotion=null,u.repeat=r,u.registerName=d,u.linewise=x;var R=Y[l](e,u,k.ranges,g,n);t.visualMode&&ge(e,null!=R),R&&e.setCursor(R)}},recordLastEdit:function(e,t,n){var i=L.macroModeState;i.isPlaying||(e.lastEditInputState=t,e.lastEditActionCommand=n,i.lastInsertModeChanges.changes=[],i.lastInsertModeChanges.expectCursorActivityForChange=!1,i.lastInsertModeChanges.visualBlock=e.visualBlock?e.sel.head.line-e.sel.anchor.line:0)}},W={moveToTopLine:function(e,t,n){var i=Ke(e).top+n.repeat-1;return o(i,ve(e.getLine(i)))},moveToMiddleLine:function(e){var t=Ke(e),n=Math.floor(.5*(t.top+t.bottom));return o(n,ve(e.getLine(n)))},moveToBottomLine:function(e,t,n){var i=Ke(e).bottom-n.repeat+1;return o(i,ve(e.getLine(i)))},expandToLine:function(e,t,n){return o(t.line+n.repeat-1,1/0)},findNext:function(e,t,n){var i=Ae(e),r=i.getQuery();if(r){var o=!n.forward;return o=i.isReversed()?!o:o,Fe(e,r),je(e,o,r,n.repeat)}},findAndSelectNextInclusive:function(t,n,i,r,s){var a=Ae(t),c=a.getQuery();if(c){var l=!i.forward,u=function(e,t,n,i,r){return void 0===i&&(i=1),e.operation((function(){var s=e.getCursor(),a=e.getSearchCursor(n,s),c=a.find(!t);!r.visualMode&&c&&ie(a.from(),s)&&a.find(!t);for(var l=0;l<i;l++)if(!(c=a.find(t))&&!(a=e.getSearchCursor(n,t?o(e.lastLine()):o(e.firstLine(),0))).find(t))return;return[a.from(),a.to()]}))}(t,l=a.isReversed()?!l:l,c,i.repeat,r);if(u){if(s.operator)return u;var d=u[0],h=o(u[1].line,u[1].ch-1);if(r.visualMode){(r.visualLine||r.visualBlock)&&(r.visualLine=!1,r.visualBlock=!1,e.signal(t,"vim-mode-change",{mode:"visual",subMode:""}));var p=r.sel.anchor;if(p)return a.isReversed()?i.forward?[p,d]:[p,h]:i.forward?[p,h]:[p,d]}else r.visualMode=!0,r.visualLine=!1,r.visualBlock=!1,e.signal(t,"vim-mode-change",{mode:"visual",subMode:""});return l?[h,d]:[d,h]}}},goToMark:function(e,t,n,i){var r=qe(e,i,n.selectedCharacter);return r?n.linewise?{line:r.line,ch:ve(e.getLine(r.line))}:r:null},moveToOtherHighlightedEnd:function(e,t,n,i){if(i.visualBlock&&n.sameLine){var r=i.sel;return[J(e,o(r.anchor.line,r.head.ch)),J(e,o(r.head.line,r.anchor.ch))]}return[i.sel.head,i.sel.anchor]},jumpToMark:function(e,t,n,i){for(var r=t,s=0;s<n.repeat;s++){var a=r;for(var c in i.marks)if(T(c)){var l=i.marks[c].find();if(!((n.forward?re(l,a):re(a,l))||n.linewise&&l.line==a.line)){var u=ie(a,r),d=n.forward?ae(a,l,r):ae(r,l,a);(u||d)&&(r=l)}}}return n.linewise&&(r=o(r.line,ve(e.getLine(r.line)))),r},moveByCharacters:function(e,t,n){var i=t,r=n.repeat,s=n.forward?i.ch+r:i.ch-r;return o(i.line,s)},moveByLines:function(e,t,n,i){var r=t,s=r.ch;switch(i.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:s=i.lastHPos;break;default:i.lastHPos=s}var a=n.repeat+(n.repeatOffset||0),c=n.forward?r.line+a:r.line-a,l=e.firstLine(),u=e.lastLine(),d=e.findPosV(r,n.forward?a:-a,"line",i.lastHSPos);return(n.forward?d.line>c:d.line<c)&&(c=d.line,s=d.ch),c<l&&r.line==l?this.moveToStartOfLine(e,t,n,i):c>u&&r.line==u?Te(e,t,n,i,!0):(n.toFirstChar&&(s=ve(e.getLine(c)),i.lastHPos=s),i.lastHSPos=e.charCoords(o(c,s),"div").left,o(c,s))},moveByDisplayLines:function(e,t,n,i){var r=t;switch(i.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:i.lastHSPos=e.charCoords(r,"div").left}var s=n.repeat;if((c=e.findPosV(r,n.forward?s:-s,"line",i.lastHSPos)).hitSide)if(n.forward)var a={top:e.charCoords(c,"div").top+8,left:i.lastHSPos},c=e.coordsChar(a,"div");else{var l=e.charCoords(o(e.firstLine(),0),"div");l.left=i.lastHSPos,c=e.coordsChar(l,"div")}return i.lastHPos=c.ch,c},moveByPage:function(e,t,n){var i=t,r=n.repeat;return e.findPosV(i,n.forward?r:-r,"page")},moveByParagraph:function(e,t,n){var i=n.forward?1:-1;return ke(e,t,n.repeat,i)},moveBySentence:function(e,t,n){var i=n.forward?1:-1;return function(e,t,n,i){function r(e,t){if(t.pos+t.dir<0||t.pos+t.dir>=t.line.length){if(t.ln+=t.dir,!_(e,t.ln))return t.line=null,t.ln=null,void(t.pos=null);t.line=e.getLine(t.ln),t.pos=t.dir>0?0:t.line.length-1}else t.pos+=t.dir}function s(e,t,n,i){var o=""===(l=e.getLine(t)),s={line:l,ln:t,pos:n,dir:i},a={ln:s.ln,pos:s.pos},c=""===s.line;for(r(e,s);null!==s.line;){if(a.ln=s.ln,a.pos=s.pos,""===s.line&&!c)return{ln:s.ln,pos:s.pos};if(o&&""!==s.line&&!C(s.line[s.pos]))return{ln:s.ln,pos:s.pos};!I(s.line[s.pos])||o||s.pos!==s.line.length-1&&!C(s.line[s.pos+1])||(o=!0),r(e,s)}var l=e.getLine(a.ln);a.pos=0;for(var u=l.length-1;u>=0;--u)if(!C(l[u])){a.pos=u;break}return a}function a(e,t,n,i){var o={line:e.getLine(t),ln:t,pos:n,dir:i},s={ln:o.ln,pos:null},a=""===o.line;for(r(e,o);null!==o.line;){if(""===o.line&&!a)return null!==s.pos?s:{ln:o.ln,pos:o.pos};if(I(o.line[o.pos])&&null!==s.pos&&(o.ln!==s.ln||o.pos+1!==s.pos))return s;""===o.line||C(o.line[o.pos])||(a=!1,s={ln:o.ln,pos:o.pos}),r(e,o)}var c=e.getLine(s.ln);s.pos=0;for(var l=0;l<c.length;++l)if(!C(c[l])){s.pos=l;break}return s}for(var c={ln:t.line,pos:t.ch};n>0;)c=i<0?a(e,c.ln,c.pos,i):s(e,c.ln,c.pos,i),n--;return o(c.ln,c.pos)}(e,t,n.repeat,i)},moveByScroll:function(e,t,n,i){var r,o=e.getScrollInfo(),s=n.repeat;s||(s=o.clientHeight/(2*e.defaultTextHeight()));var a=e.charCoords(t,"local");if(n.repeat=s,!(r=W.moveByDisplayLines(e,t,n,i)))return null;var c=e.charCoords(r,"local");return e.scrollTo(null,o.top+c.top-a.top),r},moveByWords:function(e,t,n){return function(e,t,n,i,r,s){var a=ne(t),c=[];(i&&!r||!i&&r)&&n++;for(var l=!(i&&r),u=0;u<n;u++){var d=_e(e,t,i,s,l);if(!d){var h=ce(e,e.lastLine());c.push(i?{line:e.lastLine(),from:h,to:h}:{line:0,from:0,to:0});break}c.push(d),t=o(d.line,i?d.to-1:d.from)}var p=c.length!=n,f=c[0],m=c.pop();return i&&!r?(p||f.from==a.ch&&f.line==a.line||(m=c.pop()),o(m.line,m.from)):i&&r?o(m.line,m.to-1):!i&&r?(p||f.to==a.ch&&f.line==a.line||(m=c.pop()),o(m.line,m.to)):o(m.line,m.from)}(e,t,n.repeat,!!n.forward,!!n.wordEnd,!!n.bigWord)},moveTillCharacter:function(e,t,n){var i=xe(e,n.repeat,n.forward,n.selectedCharacter),r=n.forward?-1:1;return Ee(r,n),i?(i.ch+=r,i):null},moveToCharacter:function(e,t,n){var i=n.repeat;return Ee(0,n),xe(e,i,n.forward,n.selectedCharacter)||t},moveToSymbol:function(e,t,n){return function(e,t,n,i){var r=ne(e.getCursor()),s=n?1:-1,a=n?e.lineCount():-1,c=r.ch,l=r.line,u=e.getLine(l),d={lineText:u,nextCh:u.charAt(c),lastCh:null,index:c,symb:i,reverseSymb:(n?{")":"(","}":"{"}:{"(":")","{":"}"})[i],forward:n,depth:0,curMoveThrough:!1},h=Se[i];if(!h)return r;var p=we[h].init,f=we[h].isComplete;for(p&&p(d);l!==a&&t;){if(d.index+=s,d.nextCh=d.lineText.charAt(d.index),!d.nextCh){if(l+=s,d.lineText=e.getLine(l)||"",s>0)d.index=0;else{var m=d.lineText.length;d.index=m>0?m-1:0}d.nextCh=d.lineText.charAt(d.index)}f(d)&&(r.line=l,r.ch=d.index,t--)}return d.nextCh||d.curMoveThrough?o(l,d.index):r}(e,n.repeat,n.forward,n.selectedCharacter)||t},moveToColumn:function(e,t,n,i){var r=n.repeat;return i.lastHPos=r-1,i.lastHSPos=e.charCoords(t,"div").left,function(e,t){var n=e.getCursor().line;return J(e,o(n,t-1))}(e,r)},moveToEol:function(e,t,n,i){return Te(e,t,n,i,!1)},moveToFirstNonWhiteSpaceCharacter:function(e,t){var n=t;return o(n.line,ve(e.getLine(n.line)))},moveToMatchedSymbol:function(e,t){for(var n,i=t,r=i.line,s=i.ch,a=e.getLine(r);s<a.length;s++)if((n=a.charAt(s))&&-1!="()[]{}".indexOf(n)){var c=e.getTokenTypeAt(o(r,s+1));if("string"!==c&&"comment"!==c)break}if(s<a.length){var l="<"===s||">"===s?/[(){}[\]<>]/:/[(){}[\]]/;return e.findMatchingBracket(o(r,s),{bracketRegex:l}).to}return i},moveToStartOfLine:function(e,t){return o(t.line,0)},moveToLineOrEdgeOfDocument:function(e,t,n){var i=n.forward?e.lastLine():e.firstLine();return n.repeatIsExplicit&&(i=n.repeat-e.getOption("firstLineNumber")),o(i,ve(e.getLine(i)))},textObjectManipulation:function(t,n,i,r){var s=i.selectedCharacter;"b"==s?s="(":"B"==s&&(s="{");var a,c=!i.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"}[s])a=function(e,t,n,i){var r,s,a=t,c={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[n],l={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[n],u=e.getLine(a.line).charAt(a.ch)===l?1:0;if(r=e.scanForBracket(o(a.line,a.ch+u),-1,void 0,{bracketRegex:c}),s=e.scanForBracket(o(a.line,a.ch+u),1,void 0,{bracketRegex:c}),!r||!s)return{start:a,end:a};if(r=r.pos,s=s.pos,r.line==s.line&&r.ch>s.ch||r.line>s.line){var d=r;r=s,s=d}return i?s.ch+=1:r.ch+=1,{start:r,end:s}}(t,n,s,c);else if({"'":!0,'"':!0,"`":!0}[s])a=function(e,t,n,i){var r,s,a,c,l=ne(t),u=e.getLine(l.line).split(""),d=u.indexOf(n);if(l.ch<d?l.ch=d:d<l.ch&&u[l.ch]==n&&(s=l.ch,--l.ch),u[l.ch]!=n||s)for(a=l.ch;a>-1&&!r;a--)u[a]==n&&(r=a+1);else r=l.ch+1;if(r&&!s)for(a=r,c=u.length;a<c&&!s;a++)u[a]==n&&(s=a);return r&&s?(i&&(--r,++s),{start:o(l.line,r),end:o(l.line,s)}):{start:l,end:l}}(t,n,s,c);else if("W"===s)a=ye(t,c,0,!0);else if("w"===s)a=ye(t,c,0,!1);else if("p"===s)if(a=ke(t,n,i.repeat,0,c),i.linewise=!0,r.visualMode)r.visualLine||(r.visualLine=!0);else{var l=r.inputState.operatorArgs;l&&(l.linewise=!0),a.end.line--}else{if("t"!==s)return null;a=function(t,n,i){var r=n;if(!e.findMatchingTag||!e.findEnclosingTag)return{start:r,end:r};var o=e.findMatchingTag(t,n)||e.findEnclosingTag(t,n);return o&&o.open&&o.close?i?{start:o.open.from,end:o.close.to}:{start:o.open.to,end:o.close.from}:{start:r,end:r}}(t,n,c)}return t.state.vim.visualMode?function(e,t,n){var i,r=e.state.vim.sel,s=r.head,a=r.anchor;return re(n,t)&&(i=n,n=t,t=i),re(s,a)?(s=oe(t,s),a=se(a,n)):(a=oe(t,a),-1==(s=Z(s=se(s,n),0,-1)).ch&&s.line!=e.firstLine()&&(s=o(s.line-1,ce(e,s.line-1)))),[a,s]}(t,a.start,a.end):[a.start,a.end]},repeatLastCharacterSearch:function(e,t,n){var i=L.lastCharacterSearch,r=n.repeat,o=n.forward===i.forward,s=(i.increment?1:0)*(o?-1:1);e.moveH(-s,"char"),n.inclusive=!!o;var a=xe(e,r,o,i.selectedCharacter);return a?(a.ch+=s,a):(e.moveH(s,"char"),t)}};function z(e,t){for(var n=[],i=0;i<t;i++)n.push(e);return n}var Y={change:function(t,n,i){var r,s,a=t.state.vim,c=i[0].anchor,l=i[0].head;if(a.visualMode)if(n.fullLine)l.ch=Number.MAX_VALUE,l.line--,t.setSelection(c,l),s=t.getSelection(),t.replaceSelection(""),r=c;else{s=t.getSelection();var u=z("",i.length);t.replaceSelections(u),r=oe(i[0].head,i[0].anchor)}else{s=t.getRange(c,l);var d=a.lastEditInputState||{};if("moveByWords"==d.motion&&!C(s)){var h=/\s+$/.exec(s);h&&d.motionArgs&&d.motionArgs.forward&&(l=Z(l,0,-h[0].length),s=s.slice(0,-h[0].length))}var p=new o(c.line-1,Number.MAX_VALUE),f=t.firstLine()==t.lastLine();l.line>t.lastLine()&&n.linewise&&!f?t.replaceRange("",p,l):t.replaceRange("",c,l),n.linewise&&(f||(t.setCursor(p),e.commands.newlineAndIndent(t)),c.ch=Number.MAX_VALUE),r=c}L.registerController.pushText(n.registerName,"change",s,n.linewise,i.length>1),X.enterInsertMode(t,{head:r},t.state.vim)},delete:function(e,t,n){var i,r,s=e.state.vim;if(s.visualBlock){r=e.getSelection();var a=z("",n.length);e.replaceSelections(a),i=n[0].anchor}else{var c=n[0].anchor,l=n[0].head;t.linewise&&l.line!=e.firstLine()&&c.line==e.lastLine()&&c.line==l.line-1&&(c.line==e.firstLine()?c.ch=0:c=o(c.line-1,ce(e,c.line-1))),r=e.getRange(c,l),e.replaceRange("",c,l),i=c,t.linewise&&(i=W.moveToFirstNonWhiteSpaceCharacter(e,c))}return L.registerController.pushText(t.registerName,"delete",r,t.linewise,s.visualBlock),J(e,i)},indent:function(e,t,n){var i=e.state.vim,r=n[0].anchor.line,o=i.visualBlock?n[n.length-1].anchor.line:n[0].head.line,s=i.visualMode?t.repeat:1;t.linewise&&o--;for(var a=r;a<=o;a++)for(var c=0;c<s;c++)e.indentLine(a,t.indentRight);return W.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},indentAuto:function(e,t,n){return e.execCommand("indentAuto"),W.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},changeCase:function(e,t,n,i,r){for(var o=e.getSelections(),s=[],a=t.toLower,c=0;c<o.length;c++){var l=o[c],u="";if(!0===a)u=l.toLowerCase();else if(!1===a)u=l.toUpperCase();else for(var d=0;d<l.length;d++){var h=l.charAt(d);u+=x(h)?h.toLowerCase():h.toUpperCase()}s.push(u)}return e.replaceSelections(s),t.shouldMoveCursor?r:!e.state.vim.visualMode&&t.linewise&&n[0].anchor.line+1==n[0].head.line?W.moveToFirstNonWhiteSpaceCharacter(e,i):t.linewise?i:oe(n[0].anchor,n[0].head)},yank:function(e,t,n,i){var r=e.state.vim,o=e.getSelection(),s=r.visualMode?oe(r.sel.anchor,r.sel.head,n[0].head,n[0].anchor):i;return L.registerController.pushText(t.registerName,"yank",o,t.linewise,r.visualBlock),s}},X={jumpListWalk:function(e,t,n){if(!n.visualMode){var i=t.repeat,r=t.forward,o=L.jumpList.move(e,r?i:-i),s=o?o.find():void 0;s=s||e.getCursor(),e.setCursor(s)}},scroll:function(e,t,n){if(!n.visualMode){var i=t.repeat||1,r=e.defaultTextHeight(),o=e.getScrollInfo().top,s=r*i,a=t.forward?o+s:o-s,c=ne(e.getCursor()),l=e.charCoords(c,"local");if(t.forward)a>l.top?(c.line+=(a-l.top)/r,c.line=Math.ceil(c.line),e.setCursor(c),l=e.charCoords(c,"local"),e.scrollTo(null,l.top)):e.scrollTo(null,a);else{var u=a+e.getScrollInfo().clientHeight;u<l.bottom?(c.line-=(l.bottom-u)/r,c.line=Math.floor(c.line),e.setCursor(c),l=e.charCoords(c,"local"),e.scrollTo(null,l.bottom-e.getScrollInfo().clientHeight)):e.scrollTo(null,a)}}},scrollToCursor:function(e,t){var n=e.getCursor().line,i=e.charCoords(o(n,0),"local"),r=e.getScrollInfo().clientHeight,s=i.top,a=i.bottom-s;switch(t.position){case"center":s=s-r/2+a;break;case"bottom":s=s-r+a}e.scrollTo(null,s)},replayMacro:function(e,t,n){var i=t.selectedCharacter,r=t.repeat,o=L.macroModeState;for("@"==i?i=o.latestRegister:o.latestRegister=i;r--;)Je(e,n,o,i)},enterMacroRecordMode:function(e,t){var n=L.macroModeState,i=t.selectedCharacter;L.registerController.isValidRegister(i)&&n.enterMacroRecordMode(e,i)},toggleOverwrite:function(t){t.state.overwrite?(t.toggleOverwrite(!1),t.setOption("keyMap","vim-insert"),e.signal(t,"vim-mode-change",{mode:"insert"})):(t.toggleOverwrite(!0),t.setOption("keyMap","vim-replace"),e.signal(t,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(t,n,i){if(!t.getOption("readOnly")){i.insertMode=!0,i.insertModeRepeat=n&&n.repeat||1;var r=n?n.insertAt:null,s=i.sel,a=n.head||t.getCursor("head"),c=t.listSelections().length;if("eol"==r)a=o(a.line,ce(t,a.line));else if("bol"==r)a=o(a.line,0);else if("charAfter"==r)a=Z(a,0,1);else if("firstNonBlank"==r)a=W.moveToFirstNonWhiteSpaceCharacter(t,a);else if("startOfSelectedArea"==r){if(!i.visualMode)return;i.visualBlock?(a=o(Math.min(s.head.line,s.anchor.line),Math.min(s.head.ch,s.anchor.ch)),c=Math.abs(s.head.line-s.anchor.line)+1):a=s.head.line<s.anchor.line?s.head:o(s.anchor.line,0)}else if("endOfSelectedArea"==r){if(!i.visualMode)return;i.visualBlock?(a=o(Math.min(s.head.line,s.anchor.line),Math.max(s.head.ch+1,s.anchor.ch)),c=Math.abs(s.head.line-s.anchor.line)+1):a=s.head.line>=s.anchor.line?Z(s.head,0,1):o(s.anchor.line,0)}else if("inplace"==r){if(i.visualMode)return}else"lastEdit"==r&&(a=Ve(t)||a);t.setOption("disableInput",!1),n&&n.replace?(t.toggleOverwrite(!0),t.setOption("keyMap","vim-replace"),e.signal(t,"vim-mode-change",{mode:"replace"})):(t.toggleOverwrite(!1),t.setOption("keyMap","vim-insert"),e.signal(t,"vim-mode-change",{mode:"insert"})),L.macroModeState.isPlaying||(t.on("change",Qe),e.on(t.getInputField(),"keydown",it)),i.visualMode&&ge(t),he(t,a,c)}},toggleVisualMode:function(t,n,i){var r,s=n.repeat,a=t.getCursor();i.visualMode?i.visualLine^n.linewise||i.visualBlock^n.blockwise?(i.visualLine=!!n.linewise,i.visualBlock=!!n.blockwise,e.signal(t,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":i.visualBlock?"blockwise":""}),fe(t)):ge(t):(i.visualMode=!0,i.visualLine=!!n.linewise,i.visualBlock=!!n.blockwise,r=J(t,o(a.line,a.ch+s-1)),i.sel={anchor:a,head:r},e.signal(t,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":i.visualBlock?"blockwise":""}),fe(t),Ce(t,i,"<",oe(a,r)),Ce(t,i,">",se(a,r)))},reselectLastSelection:function(t,n,i){var r=i.lastSelection;if(i.visualMode&&pe(t,i),r){var o=r.anchorMark.find(),s=r.headMark.find();if(!o||!s)return;i.sel={anchor:o,head:s},i.visualMode=!0,i.visualLine=r.visualLine,i.visualBlock=r.visualBlock,fe(t),Ce(t,i,"<",oe(o,s)),Ce(t,i,">",se(o,s)),e.signal(t,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":i.visualBlock?"blockwise":""})}},joinLines:function(e,t,n){var i,r;if(n.visualMode){if(i=e.getCursor("anchor"),re(r=e.getCursor("head"),i)){var s=r;r=i,i=s}r.ch=ce(e,r.line)-1}else{var a=Math.max(t.repeat,2);i=e.getCursor(),r=J(e,o(i.line+a-1,1/0))}for(var c=0,l=i.line;l<r.line;l++){c=ce(e,i.line),s=o(i.line+1,ce(e,i.line+1));var u=e.getRange(i,s);u=t.keepSpaces?u.replace(/\n\r?/g,""):u.replace(/\n\s*/g," "),e.replaceRange(u,i,s)}var d=o(i.line,c);n.visualMode&&ge(e,!1),e.setCursor(d)},newLineAndEnterInsertMode:function(t,n,i){i.insertMode=!0;var r=ne(t.getCursor());r.line!==t.firstLine()||n.after?(r.line=n.after?r.line:r.line-1,r.ch=ce(t,r.line),t.setCursor(r),(e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent)(t)):(t.replaceRange("\n",o(t.firstLine(),0)),t.setCursor(t.firstLine(),0)),this.enterInsertMode(t,{repeat:n.repeat},i)},paste:function(e,t,n){var i=ne(e.getCursor()),r=L.registerController.getRegister(t.registerName);if(p=r.toString()){if(t.matchIndent){var s=e.getOption("tabSize"),a=function(e){var t=e.split("\t").length-1,n=e.split(" ").length-1;return t*s+1*n},c=e.getLine(e.getCursor().line),l=a(c.match(/^\s*/)[0]),u=p.replace(/\n$/,""),d=p!==u,h=a(p.match(/^\s*/)[0]),p=u.replace(/^\s*/gm,(function(t){var n=l+(a(t)-h);if(n<0)return"";if(e.getOption("indentWithTabs")){var i=Math.floor(n/s);return Array(i+1).join("\t")}return Array(n+1).join(" ")}));p+=d?"\n":""}t.repeat>1&&(p=Array(t.repeat+1).join(p));var f,m,g=r.linewise,v=r.blockwise;if(v){p=p.split("\n"),g&&p.pop();for(var y=0;y<p.length;y++)p[y]=""==p[y]?" ":p[y];i.ch+=t.after?1:0,i.ch=Math.min(ce(e,i.line),i.ch)}else g?n.visualMode?p=n.visualLine?p.slice(0,-1):"\n"+p.slice(0,p.length-1)+"\n":t.after?(p="\n"+p.slice(0,p.length-1),i.ch=ce(e,i.line)):i.ch=0:i.ch+=t.after?1:0;if(n.visualMode){var b;n.lastPastedText=p;var E=function(e,t){var n=t.lastSelection;return t.visualMode?function(){var t=e.listSelections(),n=t[0],i=t[t.length-1];return[re(n.anchor,n.head)?n.anchor:n.head,re(i.anchor,i.head)?i.head:i.anchor]}():function(){var t=e.getCursor(),i=e.getCursor(),r=n.visualBlock;if(r){var s=r.width,a=r.height;i=o(t.line+a,t.ch+s);for(var c=[],l=t.line;l<i.line;l++){var u={anchor:o(l,t.ch),head:o(l,i.ch)};c.push(u)}e.setSelections(c)}else{var d=n.anchorMark.find(),h=n.headMark.find(),p=h.line-d.line,f=h.ch-d.ch;i={line:i.line+p,ch:p?i.ch:f+i.ch},n.visualLine&&(t=o(t.line,0),i=o(i.line,ce(e,i.line))),e.setSelection(t,i)}return[t,i]}()}(e,n),S=E[0],w=E[1],_=e.getSelection(),T=e.listSelections(),x=new Array(T.length).join("1").split("1");n.lastSelection&&(b=n.lastSelection.headMark.find()),L.registerController.unnamedRegister.setText(_),v?(e.replaceSelections(x),w=o(S.line+p.length-1,S.ch),e.setCursor(S),de(e,w),e.replaceSelections(p),f=S):n.visualBlock?(e.replaceSelections(x),e.setCursor(S),e.replaceRange(p,S,S),f=S):(e.replaceRange(p,S,w),f=e.posFromIndex(e.indexFromPos(S)+p.length-1)),b&&(n.lastSelection.headMark=e.setBookmark(b)),g&&(f.ch=0)}else if(v){for(e.setCursor(i),y=0;y<p.length;y++){var C=i.line+y;C>e.lastLine()&&e.replaceRange("\n",o(C,0)),ce(e,C)<i.ch&&ue(e,C,i.ch)}e.setCursor(i),de(e,o(i.line+p.length-1,i.ch)),e.replaceSelections(p),f=i}else e.replaceRange(p,i),g&&t.after?f=o(i.line+1,ve(e.getLine(i.line+1))):g&&!t.after?f=o(i.line,ve(e.getLine(i.line))):!g&&t.after?(m=e.indexFromPos(i),f=e.posFromIndex(m+p.length-1)):(m=e.indexFromPos(i),f=e.posFromIndex(m+p.length));n.visualMode&&ge(e,!1),e.setCursor(f)}},undo:function(t,n){t.operation((function(){te(t,e.commands.undo,n.repeat)(),t.setCursor(t.getCursor("anchor"))}))},redo:function(t,n){te(t,e.commands.redo,n.repeat)()},setRegister:function(e,t,n){n.inputState.registerName=t.selectedCharacter},setMark:function(e,t,n){Ce(e,n,t.selectedCharacter,e.getCursor())},replace:function(t,n,i){var r,s,a=n.selectedCharacter,c=t.getCursor(),l=t.listSelections();if(i.visualMode)c=t.getCursor("start"),s=t.getCursor("end");else{var u=t.getLine(c.line);(r=c.ch+n.repeat)>u.length&&(r=u.length),s=o(c.line,r)}if("\n"==a)i.visualMode||t.replaceRange("",c,s),(e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent)(t);else{var d=t.getRange(c,s);if(d=d.replace(/[^\n]/g,a),i.visualBlock){var h=new Array(t.getOption("tabSize")+1).join(" ");d=(d=t.getSelection()).replace(/\t/g,h).replace(/[^\n]/g,a).split("\n"),t.replaceSelections(d)}else t.replaceRange(d,c,s);i.visualMode?(c=re(l[0].anchor,l[0].head)?l[0].anchor:l[0].head,t.setCursor(c),ge(t,!1)):t.setCursor(Z(s,0,-1))}},incrementNumberToken:function(e,t){for(var n,i,r,s,a=e.getCursor(),c=e.getLine(a.line),l=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi;null!==(n=l.exec(c))&&(r=(i=n.index)+n[0].length,!(a.ch<r)););if((t.backtrack||!(r<=a.ch))&&n){var u=n[2]||n[4],d=n[3]||n[5],h=t.increase?1:-1,p={"0b":2,0:8,"":10,"0x":16}[u.toLowerCase()];s=(parseInt(n[1]+d,p)+h*t.repeat).toString(p);var f=u?new Array(d.length-s.length+1+n[1].length).join("0"):"";s="-"===s.charAt(0)?"-"+u+f+s.substr(1):u+f+s;var m=o(a.line,i),g=o(a.line,r);e.replaceRange(s,m,g),e.setCursor(o(a.line,i+s.length-1))}},repeatLastEdit:function(e,t,n){if(n.lastEditInputState){var i=t.repeat;i&&t.repeatIsExplicit?n.lastEditInputState.repeatOverride=i:i=n.lastEditInputState.repeatOverride||i,rt(e,n,i,!1)}},indent:function(e,t){e.indentLine(e.getCursor().line,t.indentRight)},exitInsertMode:Ye};function J(e,t){var n=e.state.vim,i=n.insertMode||n.visualMode,r=Math.min(Math.max(e.firstLine(),t.line),e.lastLine()),s=ce(e,r)-1+!!i,a=Math.min(Math.max(0,t.ch),s);return o(r,a)}function Q(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Z(e,t,n){return"object"==typeof t&&(n=t.ch,t=t.line),o(e.line+t,e.ch+n)}function ee(e,t){if("<character>"==t.slice(-11)){var n=t.length-11,i=e.slice(0,n),r=t.slice(0,n);return i==r&&e.length>n?"full":0==r.indexOf(i)&&"partial"}return e==t?"full":0==t.indexOf(e)&&"partial"}function te(e,t,n){return function(){for(var i=0;i<n;i++)t(e)}}function ne(e){return o(e.line,e.ch)}function ie(e,t){return e.ch==t.ch&&e.line==t.line}function re(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function oe(e,t){return arguments.length>2&&(t=oe.apply(void 0,Array.prototype.slice.call(arguments,1))),re(e,t)?e:t}function se(e,t){return arguments.length>2&&(t=se.apply(void 0,Array.prototype.slice.call(arguments,1))),re(e,t)?t:e}function ae(e,t,n){var i=re(e,t),r=re(t,n);return i&&r}function ce(e,t){return e.getLine(t).length}function le(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function ue(e,t,n){var i=ce(e,t),r=new Array(n-i+1).join(" ");e.setCursor(o(t,i)),e.replaceRange(r,e.getCursor())}function de(e,t){var n=[],i=e.listSelections(),r=ne(e.clipPos(t)),s=!ie(t,r),a=function(e,t,n){for(var i=0;i<e.length;i++){var r=ie(e[i].anchor,t),o=ie(e[i].head,t);if(r||o)return i}return-1}(i,e.getCursor("head")),c=ie(i[a].head,i[a].anchor),l=i.length-1,u=l-a>a?l:0,d=i[u].anchor,h=Math.min(d.line,r.line),p=Math.max(d.line,r.line),f=d.ch,m=r.ch,g=i[u].head.ch-f,v=m-f;g>0&&v<=0?(f++,s||m--):g<0&&v>=0?(f--,c||m++):g<0&&-1==v&&(f--,m++);for(var y=h;y<=p;y++){var b={anchor:new o(y,f),head:new o(y,m)};n.push(b)}return e.setSelections(n),t.ch=m,d.ch=f,d}function he(e,t,n){for(var i=[],r=0;r<n;r++){var o=Z(t,r,0);i.push({anchor:o,head:o})}e.setSelections(i,0)}function pe(e,t){var n=t.sel.anchor,i=t.sel.head;t.lastPastedText&&(i=e.posFromIndex(e.indexFromPos(n)+t.lastPastedText.length),t.lastPastedText=null),t.lastSelection={anchorMark:e.setBookmark(n),headMark:e.setBookmark(i),anchor:ne(n),head:ne(i),visualMode:t.visualMode,visualLine:t.visualLine,visualBlock:t.visualBlock}}function fe(e,t,n){var i=e.state.vim,r=me(e,t=t||i.sel,n=n||i.visualLine?"line":i.visualBlock?"block":"char");e.setSelections(r.ranges,r.primary),et(e)}function me(e,t,n,i){var r=ne(t.head),s=ne(t.anchor);if("char"==n){var a=i||re(t.head,t.anchor)?0:1,c=re(t.head,t.anchor)?1:0;return r=Z(t.head,0,a),{ranges:[{anchor:s=Z(t.anchor,0,c),head:r}],primary:0}}if("line"==n){if(re(t.head,t.anchor))r.ch=0,s.ch=ce(e,s.line);else{s.ch=0;var l=e.lastLine();r.line>l&&(r.line=l),r.ch=ce(e,r.line)}return{ranges:[{anchor:s,head:r}],primary:0}}if("block"==n){for(var u=Math.min(s.line,r.line),d=Math.min(s.ch,r.ch),h=Math.max(s.line,r.line),p=Math.max(s.ch,r.ch)+1,f=h-u+1,m=r.line==u?0:f-1,g=[],v=0;v<f;v++)g.push({anchor:o(u+v,d),head:o(u+v,p)});return{ranges:g,primary:m}}}function ge(t,n){var i=t.state.vim;!1!==n&&t.setCursor(J(t,i.sel.head)),pe(t,i),i.visualMode=!1,i.visualLine=!1,i.visualBlock=!1,i.insertMode||e.signal(t,"vim-mode-change",{mode:"normal"}),tt(i)}function ve(e){if(!e)return 0;var t=e.search(/\S/);return-1==t?e.length:t}function ye(e,t,n,i,r){for(var s=function(e){var t=e.getCursor("head");return 1==e.getSelection().length&&(t=oe(t,e.getCursor("anchor"))),t}(e),a=e.getLine(s.line),c=s.ch,l=r?m[0]:g[0];!l(a.charAt(c));)if(++c>=a.length)return null;i?l=g[0]:(l=m[0])(a.charAt(c))||(l=m[1]);for(var u=c,d=c;l(a.charAt(u))&&u<a.length;)u++;for(;l(a.charAt(d))&&d>=0;)d--;if(d++,t){for(var h=u;/\s/.test(a.charAt(u))&&u<a.length;)u++;if(h==u){for(var p=d;/\s/.test(a.charAt(d-1))&&d>0;)d--;d||(d=p)}}return{start:o(s.line,d),end:o(s.line,u)}}function be(e,t,n){ie(t,n)||L.jumpList.add(e,t,n)}function Ee(e,t){L.lastCharacterSearch.increment=e,L.lastCharacterSearch.forward=t.forward,L.lastCharacterSearch.selectedCharacter=t.selectedCharacter}var Se={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},we={bracket:{isComplete:function(e){if(e.nextCh===e.symb){if(e.depth++,e.depth>=1)return!0}else e.nextCh===e.reverseSymb&&e.depth--;return!1}},section:{init:function(e){e.curMoveThrough=!0,e.symb=(e.forward?"]":"[")===e.symb?"{":"}"},isComplete:function(e){return 0===e.index&&e.nextCh===e.symb}},comment:{isComplete:function(e){var t="*"===e.lastCh&&"/"===e.nextCh;return e.lastCh=e.nextCh,t}},method:{init:function(e){e.symb="m"===e.symb?"{":"}",e.reverseSymb="{"===e.symb?"}":"{"},isComplete:function(e){return e.nextCh===e.symb}},preprocess:{init:function(e){e.index=0},isComplete:function(e){if("#"===e.nextCh){var t=e.lineText.match(/^#(\w+)/)[1];if("endif"===t){if(e.forward&&0===e.depth)return!0;e.depth++}else if("if"===t){if(!e.forward&&0===e.depth)return!0;e.depth--}if("else"===t&&0===e.depth)return!0}return!1}}};function _e(e,t,n,i,r){var o=t.line,s=t.ch,a=e.getLine(o),c=n?1:-1,l=i?g:m;if(r&&""==a){if(o+=c,a=e.getLine(o),!_(e,o))return null;s=n?0:a.length}for(;;){if(r&&""==a)return{from:0,to:0,line:o};for(var u=c>0?a.length:-1,d=u,h=u;s!=u;){for(var p=!1,f=0;f<l.length&&!p;++f)if(l[f](a.charAt(s))){for(d=s;s!=u&&l[f](a.charAt(s));)s+=c;if(p=d!=(h=s),d==t.ch&&o==t.line&&h==d+c)continue;return{from:Math.min(d,h+1),to:Math.max(d,h),line:o}}p||(s+=c)}if(!_(e,o+=c))return null;a=e.getLine(o),s=c>0?0:a.length}}function Te(e,t,n,i,r){var s=o(t.line+n.repeat-1,1/0),a=e.clipPos(s);return a.ch--,r||(i.lastHPos=1/0,i.lastHSPos=e.charCoords(a,"div").left),s}function xe(e,t,n,i){for(var r,s=e.getCursor(),a=s.ch,c=0;c<t;c++){if(-1==(r=Ie(a,e.getLine(s.line),i,n,!0)))return null;a=r}return o(e.getCursor().line,r)}function Ce(e,t,n,i){k(n,S)&&(t.marks[n]&&t.marks[n].clear(),t.marks[n]=e.setBookmark(i))}function Ie(e,t,n,i,r){var o;return i?-1==(o=t.indexOf(n,e+1))||r||(o-=1):-1==(o=t.lastIndexOf(n,e-1))||r||(o+=1),o}function ke(e,t,n,i,r){var s,a=t.line,c=e.firstLine(),l=e.lastLine(),u=a;function d(t){return!e.getLine(t)}function h(e,t,n){return n?d(e)!=d(e+t):!d(e)&&d(e+t)}if(i){for(;c<=u&&u<=l&&n>0;)h(u,i)&&n--,u+=i;return new o(u,0)}var p=e.state.vim;if(p.visualLine&&h(a,1,!0)){var f=p.sel.anchor;h(f.line,-1,!0)&&(r&&f.line==a||(a+=1))}var m=d(a);for(u=a;u<=l&&n;u++)h(u,1,!0)&&(r&&d(u)==m||n--);for(s=new o(u,0),u>l&&!m?m=!0:r=!1,u=a;u>c&&(r&&d(u)!=m&&u!=a||!h(u,-1,!0));u--);return{start:new o(u,0),end:s}}function Me(){}function Ae(e){var t=e.state.vim;return t.searchState_||(t.searchState_=new Me)}function Oe(e,t){var n=Re(e,t)||[];if(!n.length)return[];var i=[];if(0===n[0]){for(var r=0;r<n.length;r++)"number"==typeof n[r]&&i.push(e.substring(n[r]+1,n[r+1]));return i}}function Re(e,t){t||(t="/");for(var n=!1,i=[],r=0;r<e.length;r++){var o=e.charAt(r);n||o!=t||i.push(r),n=!n&&"\\"==o}return i}A("pcre",!0,"boolean"),Me.prototype={getQuery:function(){return L.query},setQuery:function(e){L.query=e},getOverlay:function(){return this.searchOverlay},setOverlay:function(e){this.searchOverlay=e},isReversed:function(){return L.isReversed},setReversed:function(e){L.isReversed=e},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(e){this.annotate=e}};var Le={"\\n":"\n","\\r":"\r","\\t":"\t"},De={"\\/":"/","\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t","\\&":"&"};function Ne(e){"string"==typeof e&&(e=document.createElement(e));for(var t,n=1;n<arguments.length;n++)if(t=arguments[n])if("object"!=typeof t&&(t=document.createTextNode(t)),t.nodeType)e.appendChild(t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&("$"===i[0]?e.style[i.slice(1)]=t[i]:e.setAttribute(i,t[i]));return e}function Pe(e,t){var n=Ne("pre",{$color:"red"},t);e.openNotification?e.openNotification(n,{bottom:!0,duration:5e3}):alert(n.innerText)}function $e(e,t){var n,i,r=(t.prefix||"")+" "+(t.desc||""),o=(n=t.prefix,i=t.desc,Ne(document.createDocumentFragment(),Ne("span",{$fontFamily:"monospace",$whiteSpace:"pre"},n,Ne("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})),i&&Ne("span",{$color:"#888"},i)));e.openDialog?e.openDialog(o,t.onClose,{onKeyDown:t.onKeyDown,onKeyUp:t.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:t.value}):t.onClose(prompt(r,""))}function Ue(e,t,n,i){if(t){var r=Ae(e),o=function(e,t,n){if(L.registerController.getRegister("/").setText(e),e instanceof RegExp)return e;var i,r,o=Re(e,"/");return o.length?(i=e.substring(0,o[0]),r=-1!=e.substring(o[0]).indexOf("i")):i=e,i?(R("pcre")||(i=function(e){for(var t=!1,n=[],i=-1;i<e.length;i++){var r=e.charAt(i)||"",o=e.charAt(i+1)||"",s=o&&-1!="|(){".indexOf(o);t?("\\"===r&&s||n.push(r),t=!1):"\\"===r?(t=!0,o&&-1!="}".indexOf(o)&&(s=!0),s&&"\\"!==o||n.push(r)):(n.push(r),s&&"\\"!==o&&n.push("\\"))}return n.join("")}(i)),n&&(t=/^[^A-Z]*$/.test(i)),new RegExp(i,t||r?"i":void 0)):null}(t,!!n,!!i);if(o)return Fe(e,o),function(e,t){if(e instanceof RegExp&&t instanceof RegExp){for(var n=["global","multiline","ignoreCase","source"],i=0;i<n.length;i++){var r=n[i];if(e[r]!==t[r])return!1}return!0}return!1}(o,r.getQuery())||r.setQuery(o),o}}var Be=0;function Fe(e,t){clearTimeout(Be),Be=setTimeout((function(){var n=Ae(e),i=n.getOverlay();i&&t==i.query||(i&&e.removeOverlay(i),i=function(e){if("^"==e.source.charAt(0))var t=!0;return{token:function(n){if(!t||n.sol()){var i=n.match(e,!1);if(i)return 0==i[0].length?(n.next(),"searching"):n.sol()||(n.backUp(1),e.exec(n.next()+i[0]))?(n.match(e),"searching"):(n.next(),null);for(;!n.eol()&&(n.next(),!n.match(e,!1)););}else n.skipToEnd()},query:e}}(t),e.addOverlay(i),e.showMatchesOnScrollbar&&(n.getScrollbarAnnotate()&&n.getScrollbarAnnotate().clear(),n.setScrollbarAnnotate(e.showMatchesOnScrollbar(t))),n.setOverlay(i))}),50)}function je(e,t,n,i){return void 0===i&&(i=1),e.operation((function(){for(var r=e.getCursor(),s=e.getSearchCursor(n,r),a=0;a<i;a++){var c=s.find(t);if(0==a&&c&&ie(s.from(),r)&&(c=s.find(t)),!c&&!(s=e.getSearchCursor(n,t?o(e.lastLine()):o(e.firstLine(),0))).find(t))return}return s.from()}))}function He(e){var t=Ae(e);e.removeOverlay(Ae(e).getOverlay()),t.setOverlay(null),t.getScrollbarAnnotate()&&(t.getScrollbarAnnotate().clear(),t.setScrollbarAnnotate(null))}function Ke(e){var t=e.getScrollInfo(),n=e.coordsChar({left:0,top:6+t.top},"local"),i=t.clientHeight-10+t.top,r=e.coordsChar({left:0,top:i},"local");return{top:n.line,bottom:r.line}}function qe(e,t,n){if("'"==n||"`"==n)return L.jumpList.find(e,-1)||o(0,0);if("."==n)return Ve(e);var i=t.marks[n];return i&&i.find()}function Ve(e){for(var t=e.doc.history.done,n=t.length;n--;)if(t[n].changes)return ne(t[n].changes[0].to)}var Ge=function(){this.buildCommandMap_()};Ge.prototype={processCommand:function(e,t,n){var i=this;e.operation((function(){e.curOp.isVimOp=!0,i._processCommand(e,t,n)}))},_processCommand:function(t,n,i){var r=t.state.vim,o=L.registerController.getRegister(":"),s=o.toString();r.visualMode&&ge(t);var a=new e.StringStream(n);o.setText(n);var c,l,u=i||{};u.input=n;try{this.parseInput_(t,a,u)}catch(e){throw Pe(t,e.toString()),e}if(u.commandName){if(c=this.matchCommand_(u.commandName)){if(l=c.name,c.excludeFromCommandHistory&&o.setText(s),this.parseCommandArgs_(a,u,c),"exToKey"==c.type){for(var d=0;d<c.toKeys.length;d++)e.Vim.handleKey(t,c.toKeys[d],"mapping");return}if("exToEx"==c.type)return void this.processCommand(t,c.toInput)}}else void 0!==u.line&&(l="move");if(l)try{We[l](t,u),c&&c.possiblyAsync||!u.callback||u.callback()}catch(e){throw Pe(t,e.toString()),e}else Pe(t,'Not an editor command ":'+n+'"')},parseInput_:function(e,t,n){t.eatWhile(":"),t.eat("%")?(n.line=e.firstLine(),n.lineEnd=e.lastLine()):(n.line=this.parseLineSpec_(e,t),void 0!==n.line&&t.eat(",")&&(n.lineEnd=this.parseLineSpec_(e,t)));var i=t.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return n.commandName=i?i[1]:t.match(/.*/)[0],n},parseLineSpec_:function(e,t){var n=t.match(/^(\d+)/);if(n)return parseInt(n[1],10)-1;switch(t.next()){case".":return this.parseLineSpecOffset_(t,e.getCursor().line);case"$":return this.parseLineSpecOffset_(t,e.lastLine());case"'":var i=t.next(),r=qe(e,e.state.vim,i);if(!r)throw new Error("Mark not set");return this.parseLineSpecOffset_(t,r.line);case"-":case"+":return t.backUp(1),this.parseLineSpecOffset_(t,e.getCursor().line);default:return void t.backUp(1)}},parseLineSpecOffset_:function(e,t){var n=e.match(/^([+-])?(\d+)/);if(n){var i=parseInt(n[2],10);"-"==n[1]?t-=i:t+=i}return t},parseCommandArgs_:function(e,t,n){if(!e.eol()){t.argString=e.match(/.*/)[0];var i=n.argDelimiter||/\s+/,r=le(t.argString).split(i);r.length&&r[0]&&(t.args=r)}},matchCommand_:function(e){for(var t=e.length;t>0;t--){var n=e.substring(0,t);if(this.commandMap_[n]){var i=this.commandMap_[n];if(0===i.name.indexOf(e))return i}}return null},buildCommandMap_:function(){this.commandMap_={};for(var e=0;e<r.length;e++){var t=r[e],n=t.shortName||t.name;this.commandMap_[n]=t}},map:function(e,n,i){if(":"!=e&&":"==e.charAt(0)){if(i)throw Error("Mode not supported for ex mappings");var r=e.substring(1);":"!=n&&":"==n.charAt(0)?this.commandMap_[r]={name:r,type:"exToEx",toInput:n.substring(1),user:!0}:this.commandMap_[r]={name:r,type:"exToKey",toKeys:n,user:!0}}else if(":"!=n&&":"==n.charAt(0)){var o={keys:e,type:"keyToEx",exArgs:{input:n.substring(1)}};i&&(o.context=i),t.unshift(o)}else o={keys:e,type:"keyToKey",toKeys:n},i&&(o.context=i),t.unshift(o)},unmap:function(e,n){if(":"!=e&&":"==e.charAt(0)){if(n)throw Error("Mode not supported for ex mappings");var i=e.substring(1);if(this.commandMap_[i]&&this.commandMap_[i].user)return void delete this.commandMap_[i]}else for(var r=e,o=0;o<t.length;o++)if(r==t[o].keys&&t[o].context===n)return void t.splice(o,1);throw Error("No such mapping.")}};var We={colorscheme:function(e,t){!t.args||t.args.length<1?Pe(e,e.getOption("theme")):e.setOption("theme",t.args[0])},map:function(e,t,n){var i=t.args;!i||i.length<2?e&&Pe(e,"Invalid mapping: "+t.input):ze.map(i[0],i[1],n)},imap:function(e,t){this.map(e,t,"insert")},nmap:function(e,t){this.map(e,t,"normal")},vmap:function(e,t){this.map(e,t,"visual")},unmap:function(e,t,n){var i=t.args;!i||i.length<1?e&&Pe(e,"No such mapping: "+t.input):ze.unmap(i[0],n)},move:function(e,t){G.processCommand(e,e.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:t.line+1})},set:function(e,t){var n=t.args,i=t.setCfg||{};if(!n||n.length<1)e&&Pe(e,"Invalid mapping: "+t.input);else{var r=n[0].split("="),o=r[0],s=r[1],a=!1;if("?"==o.charAt(o.length-1)){if(s)throw Error("Trailing characters: "+t.argString);o=o.substring(0,o.length-1),a=!0}void 0===s&&"no"==o.substring(0,2)&&(o=o.substring(2),s=!1);var c=M[o]&&"boolean"==M[o].type;if(c&&null==s&&(s=!0),!c&&void 0===s||a){var l=R(o,e,i);l instanceof Error?Pe(e,l.message):Pe(e,!0===l||!1===l?" "+(l?"":"no")+o:"  "+o+"="+l)}else{var u=O(o,s,e,i);u instanceof Error&&Pe(e,u.message)}}},setlocal:function(e,t){t.setCfg={scope:"local"},this.set(e,t)},setglobal:function(e,t){t.setCfg={scope:"global"},this.set(e,t)},registers:function(e,t){var n=t.args,i=L.registerController.registers,r="----------Registers----------\n\n";if(n){n=n.join("");for(var o=0;o<n.length;o++)s=n.charAt(o),L.registerController.isValidRegister(s)&&(r+='"'+s+"    "+(i[s]||new K).toString()+"\n")}else for(var s in i){var a=i[s].toString();a.length&&(r+='"'+s+"    "+a+"\n")}Pe(e,r)},sort:function(t,n){var i,r,s,a,c,l=function(){if(n.argString){var t=new e.StringStream(n.argString);if(t.eat("!")&&(i=!0),t.eol())return;if(!t.eatSpace())return"Invalid arguments";var o=t.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!o&&!t.eol())return"Invalid arguments";if(o[1]){r=-1!=o[1].indexOf("i"),s=-1!=o[1].indexOf("u");var l=-1!=o[1].indexOf("d")||-1!=o[1].indexOf("n")&&1,u=-1!=o[1].indexOf("x")&&1,d=-1!=o[1].indexOf("o")&&1;if(l+u+d>1)return"Invalid arguments";a=(l?"decimal":u&&"hex")||d&&"octal"}o[2]&&(c=new RegExp(o[2].substr(1,o[2].length-2),r?"i":""))}}();if(l)Pe(t,l+": "+n.argString);else{var u=n.line||t.firstLine(),d=n.lineEnd||n.line||t.lastLine();if(u!=d){var h=o(u,0),p=o(d,ce(t,d)),f=t.getRange(h,p).split("\n"),m=c||("decimal"==a?/(-?)([\d]+)/:"hex"==a?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==a?/([0-7]+)/:null),g="decimal"==a?10:"hex"==a?16:"octal"==a?8:null,v=[],y=[];if(a||c)for(var b=0;b<f.length;b++){var E=c?f[b].match(c):null;E&&""!=E[0]?v.push(E):!c&&m.exec(f[b])?v.push(f[b]):y.push(f[b])}else y=f;if(v.sort(c?function(e,t){var n;return i&&(n=e,e=t,t=n),r&&(e[0]=e[0].toLowerCase(),t[0]=t[0].toLowerCase()),e[0]<t[0]?-1:1}:_),c)for(b=0;b<v.length;b++)v[b]=v[b].input;else a||y.sort(_);if(f=i?v.concat(y):y.concat(v),s){var S,w=f;for(f=[],b=0;b<w.length;b++)w[b]!=S&&f.push(w[b]),S=w[b]}t.replaceRange(f.join("\n"),h,p)}}function _(e,t){var n;i&&(n=e,e=t,t=n),r&&(e=e.toLowerCase(),t=t.toLowerCase());var o=a&&m.exec(e),s=a&&m.exec(t);return o?(o=parseInt((o[1]+o[2]).toLowerCase(),g))-(s=parseInt((s[1]+s[2]).toLowerCase(),g)):e<t?-1:1}},vglobal:function(e,t){this.global(e,t)},global:function(e,t){var n=t.argString;if(n){var i,r="v"===t.commandName[0],o=void 0!==t.line?t.line:e.firstLine(),s=t.lineEnd||t.line||e.lastLine(),a=function(e){return Oe(e,"/")}(n),c=n;if(a.length&&(c=a[0],i=a.slice(1,a.length).join("/")),c)try{Ue(e,c,!0,!0)}catch(t){return void Pe(e,"Invalid regex: "+c)}for(var l=Ae(e).getQuery(),u=[],d=o;d<=s;d++){var h=e.getLineHandle(d);l.test(h.text)!==r&&u.push(i?h:h.text)}if(i){var p=0,f=function(){if(p<u.length){var t=u[p++],n=e.getLineNumber(t);if(null==n)return void f();var r=n+1+i;ze.processCommand(e,r,{callback:f})}};f()}else Pe(e,u.join("\n"))}else Pe(e,"Regular Expression missing from global")},substitute:function(t,n){if(!t.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var i,r,s,a,c=n.argString,l=c?Oe(c,c[0]):[],u="",d=!1,h=!1;if(l.length)i=l[0],R("pcre")&&""!==i&&(i=new RegExp(i).source),u=l[1],/(^|[^\\])(\\\\)*\$$/.test(i)&&(i=i.slice(0,-1)+"\\n",u=(u||"")+"\n"),void 0!==u&&(u=R("pcre")?function(t){for(var n=new e.StringStream(t),i=[];!n.eol();){for(;n.peek()&&"\\"!=n.peek();)i.push(n.next());var r=!1;for(var o in De)if(n.match(o,!0)){r=!0,i.push(De[o]);break}r||i.push(n.next())}return i.join("")}(u.replace(/([^\\])&/g,"$1$$&")):function(e){for(var t,n=!1,i=[],r=-1;r<e.length;r++){var o=e.charAt(r)||"",s=e.charAt(r+1)||"";Le[o+s]?(i.push(Le[o+s]),r++):n?(i.push(o),n=!1):"\\"===o?(n=!0,t=s,f.test(t)||"$"===s?i.push("$"):"/"!==s&&"\\"!==s&&i.push("\\")):("$"===o&&i.push("$"),i.push(o),"/"===s&&i.push("\\"))}return i.join("")}(u),L.lastSubstituteReplacePart=u),r=l[2]?l[2].split(" "):[];else if(c&&c.length)return void Pe(t,"Substitutions should be of the form :s/pattern/replace/");if(r&&(s=r[0],a=parseInt(r[1]),s&&(-1!=s.indexOf("c")&&(d=!0),-1!=s.indexOf("g")&&(h=!0),i=R("pcre")?i+"/"+s:i.replace(/\//g,"\\/")+"/"+s)),i)try{Ue(t,i,!0,!0)}catch(e){return void Pe(t,"Invalid regex: "+i)}if(void 0!==(u=u||L.lastSubstituteReplacePart)){var p=Ae(t).getQuery(),m=void 0!==n.line?n.line:t.getCursor().line,g=n.lineEnd||m;m==t.firstLine()&&g==t.lastLine()&&(g=1/0),a&&(g=(m=g)+a-1);var v=J(t,o(m,0)),y=t.getSearchCursor(p,v);!function(t,n,i,r,o,s,a,c,l){t.state.vim.exMode=!0;var u,d,h,p=!1;function f(){t.operation((function(){for(;!p;)m(),g();v()}))}function m(){var e=t.getRange(s.from(),s.to()).replace(a,c),n=s.to().line;s.replace(e),d=s.to().line,o+=d-n,h=d<n}function g(){for(;s.findNext()&&(e=s.from(),n=r,a=o,"number"!=typeof e&&(e=e.line),n instanceof Array?k(e,n):"number"==typeof a?e>=n&&e<=a:e==n);)if(i||s.from().line!=d||h)return t.scrollIntoView(s.from(),30),t.setSelection(s.from(),s.to()),u=s.from(),void(p=!1);var e,n,a;p=!0}function v(e){if(e&&e(),t.focus(),u){t.setCursor(u);var n=t.state.vim;n.exMode=!1,n.lastHPos=n.lastHSPos=u.ch}l&&l()}if(g(),!p)return n?void $e(t,{prefix:Ne("span","replace with ",Ne("strong",c)," (y/n/a/q/l)"),onKeyDown:function(n,i,r){switch(e.e_stop(n),e.keyName(n)){case"Y":m(),g();break;case"N":g();break;case"A":var o=l;l=void 0,t.operation(f),l=o;break;case"L":m();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":v(r)}return p&&v(r),!0}}):(f(),void(l&&l()));Pe(t,"No matches for "+a.source)}(t,d,h,m,g,y,p,u,n.callback)}else Pe(t,"No previous substitute regular expression")},redo:e.commands.redo,undo:e.commands.undo,write:function(t){e.commands.save?e.commands.save(t):t.save&&t.save()},nohlsearch:function(e){He(e)},yank:function(e){var t=ne(e.getCursor()).line,n=e.getLine(t);L.registerController.pushText("0","yank",n,!0,!0)},delmarks:function(t,n){if(n.argString&&le(n.argString))for(var i=t.state.vim,r=new e.StringStream(le(n.argString));!r.eol();){r.eatSpace();var o=r.pos;if(!r.match(/[a-zA-Z]/,!1))return void Pe(t,"Invalid argument: "+n.argString.substring(o));var s=r.next();if(r.match("-",!0)){if(!r.match(/[a-zA-Z]/,!1))return void Pe(t,"Invalid argument: "+n.argString.substring(o));var a=s,c=r.next();if(!(T(a)&&T(c)||x(a)&&x(c)))return void Pe(t,"Invalid argument: "+a+"-");var l=a.charCodeAt(0),u=c.charCodeAt(0);if(l>=u)return void Pe(t,"Invalid argument: "+n.argString.substring(o));for(var d=0;d<=u-l;d++){var h=String.fromCharCode(l+d);delete i.marks[h]}}else delete i.marks[s]}else Pe(t,"Argument required")}},ze=new Ge;function Ye(t){var n=t.state.vim,i=L.macroModeState,r=L.registerController.getRegister("."),o=i.isPlaying,s=i.lastInsertModeChanges;o||(t.off("change",Qe),e.off(t.getInputField(),"keydown",it)),!o&&n.insertModeRepeat>1&&(rt(t,n,n.insertModeRepeat-1,!0),n.lastEditInputState.repeatOverride=n.insertModeRepeat),delete n.insertModeRepeat,n.insertMode=!1,t.setCursor(t.getCursor().line,t.getCursor().ch-1),t.setOption("keyMap","vim"),t.setOption("disableInput",!0),t.toggleOverwrite(!1),r.setText(s.changes.join("")),e.signal(t,"vim-mode-change",{mode:"normal"}),i.isRecording&&function(e){if(!e.isPlaying){var t=e.latestRegister,n=L.registerController.getRegister(t);n&&n.pushInsertModeChanges&&n.pushInsertModeChanges(e.lastInsertModeChanges)}}(i)}function Xe(e){t.unshift(e)}function Je(t,n,i,r){var o=L.registerController.getRegister(r);if(":"==r)return o.keyBuffer[0]&&ze.processCommand(t,o.keyBuffer[0]),void(i.isPlaying=!1);var s=o.keyBuffer,a=0;i.isPlaying=!0,i.replaySearchQueries=o.searchQueries.slice(0);for(var c=0;c<s.length;c++)for(var l,u,d=s[c];d;)if(u=(l=/<\w+-.+?>|<\w+>|./.exec(d))[0],d=d.substring(l.index+u.length),e.Vim.handleKey(t,u,"macro"),n.insertMode){var h=o.insertModeChanges[a++].changes;L.macroModeState.lastInsertModeChanges.changes=h,ot(t,h,1),Ye(t)}i.isPlaying=!1}function Qe(e,t){var n=L.macroModeState,i=n.lastInsertModeChanges;if(!n.isPlaying)for(;t;){if(i.expectCursorActivityForChange=!0,i.ignoreCount>1)i.ignoreCount--;else if("+input"==t.origin||"paste"==t.origin||void 0===t.origin){var r=e.listSelections().length;r>1&&(i.ignoreCount=r);var o=t.text.join("\n");i.maybeReset&&(i.changes=[],i.maybeReset=!1),o&&(e.state.overwrite&&!/\n/.test(o)?i.changes.push([o]):i.changes.push(o))}t=t.next}}function Ze(t){var n=t.state.vim;if(n.insertMode){var i=L.macroModeState;if(i.isPlaying)return;var r=i.lastInsertModeChanges;r.expectCursorActivityForChange?r.expectCursorActivityForChange=!1:r.maybeReset=!0}else t.curOp.isVimOp||function(t,n){var i=t.getCursor("anchor"),r=t.getCursor("head");if(n.visualMode&&!t.somethingSelected()?ge(t,!1):n.visualMode||n.insertMode||!t.somethingSelected()||(n.visualMode=!0,n.visualLine=!1,e.signal(t,"vim-mode-change",{mode:"visual"})),n.visualMode){var o=re(r,i)?0:-1,s=re(r,i)?-1:0;r=Z(r,0,o),i=Z(i,0,s),n.sel={anchor:i,head:r},Ce(t,n,"<",oe(r,i)),Ce(t,n,">",se(r,i))}else n.insertMode||(n.lastHPos=t.getCursor().ch)}(t,n);n.visualMode&&et(t)}function et(e){var t="cm-animate-fat-cursor",n=e.state.vim,i=J(e,ne(n.sel.head)),r=Z(i,0,1);if(tt(n),i.ch==e.getLine(i.line).length){var o=Ne("span",{class:t},"");n.fakeCursorBookmark=e.setBookmark(i,{widget:o})}else n.fakeCursor=e.markText(i,r,{className:t})}function tt(e){e.fakeCursor&&(e.fakeCursor.clear(),e.fakeCursor=null),e.fakeCursorBookmark&&(e.fakeCursorBookmark.clear(),e.fakeCursorBookmark=null)}function nt(e){this.keyName=e}function it(t){var n=L.macroModeState.lastInsertModeChanges,i=e.keyName(t);i&&(-1==i.indexOf("Delete")&&-1==i.indexOf("Backspace")||e.lookupKey(i,"vim-insert",(function(){return n.maybeReset&&(n.changes=[],n.maybeReset=!1),n.changes.push(new nt(i)),!0})))}function rt(e,t,n,i){var r=L.macroModeState;r.isPlaying=!0;var o=!!t.lastEditActionCommand,s=t.inputState;function a(){o?G.processAction(e,t,t.lastEditActionCommand):G.evalInput(e,t)}function c(n){if(r.lastInsertModeChanges.changes.length>0){n=t.lastEditActionCommand?n:1;var i=r.lastInsertModeChanges;ot(e,i.changes,n)}}if(t.inputState=t.lastEditInputState,o&&t.lastEditActionCommand.interlaceInsertRepeat)for(var l=0;l<n;l++)a(),c(1);else i||a(),c(n);t.inputState=s,t.insertMode&&!i&&Ye(e),r.isPlaying=!1}function ot(t,n,i){function r(n){return"string"==typeof n?e.commands[n](t):n(t),!0}var o=t.getCursor("head"),s=L.macroModeState.lastInsertModeChanges.visualBlock;s&&(he(t,o,s+1),i=t.listSelections().length,t.setCursor(o));for(var a=0;a<i;a++){s&&t.setCursor(Z(o,a,0));for(var c=0;c<n.length;c++){var l=n[c];if(l instanceof nt)e.lookupKey(l.keyName,"vim-insert",r);else if("string"==typeof l){var u=t.getCursor();t.replaceRange(l,u,u)}else{var d=t.getCursor(),h=Z(d,0,l[0].length);t.replaceRange(l[0],d,h)}}}s&&t.setCursor(Z(o,0,1))}return e.keyMap.vim={attach:a,detach:s,call:u},A("insertModeEscKeysTimeout",200,"number"),e.keyMap["vim-insert"]={fallthrough:["default"],attach:a,detach:s,call:u},e.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:a,detach:s,call:u},B(),F}()}},38910:e=>{e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),i=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),s=i||r||o,a=s&&(i?document.documentMode||6:+(o||r)[1]),c=!o&&/WebKit\//.test(e),l=c&&/Qt\/\d+\.\d+/.test(e),u=!o&&/Chrome\//.test(e),d=/Opera\//.test(e),h=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),f=/PhantomJS/.test(e),m=h&&(/Mobile\/\w+/.test(e)||navigator.maxTouchPoints>2),g=/Android/.test(e),v=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=m||/Mac/.test(t),b=/\bCrOS\b/.test(e),E=/win/i.test(t),S=d&&e.match(/Version\/(\d*\.\d*)/);S&&(S=Number(S[1])),S&&S>=15&&(d=!1,c=!0);var w=y&&(l||d&&(null==S||S<12.11)),_=n||s&&a>=9;function T(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var x,C=function(e,t){var n=e.className,i=T(t).exec(n);if(i){var r=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function I(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function k(e,t){return I(e).appendChild(t)}function M(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function A(e,t,n,i){var r=M(e,t,n,i);return r.setAttribute("role","presentation"),r}function O(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function R(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function L(e,t){var n=e.className;T(t).test(n)||(e.className+=(n?" ":"")+t)}function D(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!T(n[i]).test(t)&&(t+=" "+n[i]);return t}x=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var N=function(e){e.select()};function P(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function $(e,t,n){for(var i in t||(t={}),e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function U(e,t,n,i,r){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=i||0,s=r||0;;){var a=e.indexOf("\t",o);if(a<0||a>=t)return s+(t-o);s+=a-o,s+=n-s%n,o=a+1}}m?N=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(N=function(e){try{e.select()}catch(e){}});var B=function(){this.id=null,this.f=null,this.time=0,this.handler=P(this.onTimeout,this)};function F(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}B.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},B.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var j={toString:function(){return"CodeMirror.Pass"}},H={scroll:!1},K={origin:"*mouse"},q={origin:"+move"};function V(e,t,n){for(var i=0,r=0;;){var o=e.indexOf("\t",i);-1==o&&(o=e.length);var s=o-i;if(o==e.length||r+s>=t)return i+Math.min(s,t-r);if(r+=o-i,i=o+1,(r+=n-r%n)>=t)return i}}var G=[""];function W(e){for(;G.length<=e;)G.push(z(G)+" ");return G[e]}function z(e){return e[e.length-1]}function Y(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function X(){}function J(e,t){var n;return Object.create?n=Object.create(e):(X.prototype=e,n=new X),t&&$(t,n),n}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Z(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Q.test(e))}function ee(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Z(e))||t.test(e):Z(e)}function te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ne=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&ne.test(e)}function re(e,t,n){for(;(n<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function oe(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var r=(t+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+i}}var se=null;function ae(e,t,n){var i;se=null;for(var r=0;r<e.length;++r){var o=e[r];if(o.from<t&&o.to>t)return r;o.to==t&&(o.from!=o.to&&"before"==n?i=r:se=r),o.from==t&&(o.from!=o.to&&"before"!=n?i=r:se=r)}return null!=i?i:se}var ce=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,n=/[LRr]/,i=/[Lb1n]/,r=/[1n]/;function o(e,t,n){this.level=e,this.from=t,this.to=n}return function(s,a){var c="ltr"==a?"L":"R";if(0==s.length||"ltr"==a&&!e.test(s))return!1;for(var l,u=s.length,d=[],h=0;h<u;++h)d.push((l=s.charCodeAt(h))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(l):1424<=l&&l<=1524?"R":1536<=l&&l<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(l-1536):1774<=l&&l<=2220?"r":8192<=l&&l<=8203?"w":8204==l?"b":"L");for(var p=0,f=c;p<u;++p){var m=d[p];"m"==m?d[p]=f:f=m}for(var g=0,v=c;g<u;++g){var y=d[g];"1"==y&&"r"==v?d[g]="n":n.test(y)&&(v=y,"r"==y&&(d[g]="R"))}for(var b=1,E=d[0];b<u-1;++b){var S=d[b];"+"==S&&"1"==E&&"1"==d[b+1]?d[b]="1":","!=S||E!=d[b+1]||"1"!=E&&"n"!=E||(d[b]=E),E=S}for(var w=0;w<u;++w){var _=d[w];if(","==_)d[w]="N";else if("%"==_){var T=void 0;for(T=w+1;T<u&&"%"==d[T];++T);for(var x=w&&"!"==d[w-1]||T<u&&"1"==d[T]?"1":"N",C=w;C<T;++C)d[C]=x;w=T-1}}for(var I=0,k=c;I<u;++I){var M=d[I];"L"==k&&"1"==M?d[I]="L":n.test(M)&&(k=M)}for(var A=0;A<u;++A)if(t.test(d[A])){var O=void 0;for(O=A+1;O<u&&t.test(d[O]);++O);for(var R="L"==(A?d[A-1]:c),L=R==("L"==(O<u?d[O]:c))?R?"L":"R":c,D=A;D<O;++D)d[D]=L;A=O-1}for(var N,P=[],$=0;$<u;)if(i.test(d[$])){var U=$;for(++$;$<u&&i.test(d[$]);++$);P.push(new o(0,U,$))}else{var B=$,F=P.length,j="rtl"==a?1:0;for(++$;$<u&&"L"!=d[$];++$);for(var H=B;H<$;)if(r.test(d[H])){B<H&&(P.splice(F,0,new o(1,B,H)),F+=j);var K=H;for(++H;H<$&&r.test(d[H]);++H);P.splice(F,0,new o(2,K,H)),F+=j,B=H}else++H;B<$&&P.splice(F,0,new o(1,B,$))}return"ltr"==a&&(1==P[0].level&&(N=s.match(/^\s+/))&&(P[0].from=N[0].length,P.unshift(new o(0,0,N[0].length))),1==z(P).level&&(N=s.match(/\s+$/))&&(z(P).to-=N[0].length,P.push(new o(0,u-N[0].length,u)))),"rtl"==a?P.reverse():P}}();function le(e,t){var n=e.order;return null==n&&(n=e.order=ce(e.text,t)),n}var ue=[],de=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||ue).concat(n)}};function he(e,t){return e._handlers&&e._handlers[t]||ue}function pe(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,r=i&&i[t];if(r){var o=F(r,n);o>-1&&(i[t]=r.slice(0,o).concat(r.slice(o+1)))}}}function fe(e,t){var n=he(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function me(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),fe(e,n||t.type,e,t),Se(t)||t.codemirrorIgnore}function ge(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==F(n,t[i])&&n.push(t[i])}function ve(e,t){return he(e,t).length>0}function ye(e){e.prototype.on=function(e,t){de(this,e,t)},e.prototype.off=function(e,t){pe(this,e,t)}}function be(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Ee(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Se(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function we(e){be(e),Ee(e)}function _e(e){return e.target||e.srcElement}function Te(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),y&&e.ctrlKey&&1==t&&(t=3),t}var xe,Ce,Ie=function(){if(s&&a<9)return!1;var e=M("div");return"draggable"in e||"dragDrop"in e}();function ke(e){if(null==xe){var t=M("span","");k(e,M("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(xe=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&a<8))}var n=xe?M("span",""):M("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Me(e){if(null!=Ce)return Ce;var t=k(e,document.createTextNode("AA")),n=x(t,0,1).getBoundingClientRect(),i=x(t,1,2).getBoundingClientRect();return I(e),!(!n||n.left==n.right)&&(Ce=i.right-n.right<3)}var Ae,Oe=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),t+=s+1):(n.push(o),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Re=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Le="oncopy"in(Ae=M("div"))||(Ae.setAttribute("oncopy","return;"),"function"==typeof Ae.oncopy),De=null,Ne={},Pe={};function $e(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ne[e]=t}function Ue(e){if("string"==typeof e&&Pe.hasOwnProperty(e))e=Pe[e];else if(e&&"string"==typeof e.name&&Pe.hasOwnProperty(e.name)){var t=Pe[e.name];"string"==typeof t&&(t={name:t}),(e=J(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ue("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ue("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Be(e,t){t=Ue(t);var n=Ne[t.name];if(!n)return Be(e,"text/plain");var i=n(e,t);if(Fe.hasOwnProperty(t.name)){var r=Fe[t.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)i[s]=t.modeProps[s];return i}var Fe={};function je(e,t){$(t,Fe.hasOwnProperty(e)?Fe[e]:Fe[e]={})}function He(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Ke(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function qe(e,t,n){return!e.startState||e.startState(t,n)}var Ve=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Ge(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(t<o){n=r;break}t-=o}return n.lines[t]}function We(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,(function(e){var o=e.text;r==n.line&&(o=o.slice(0,n.ch)),r==t.line&&(o=o.slice(t.ch)),i.push(o),++r})),i}function ze(e,t,n){var i=[];return e.iter(t,n,(function(e){i.push(e.text)})),i}function Ye(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function Xe(e){if(null==e.parent)return null;for(var t=e.parent,n=F(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function Je(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],o=r.height;if(t<o){e=r;continue e}t-=o,n+=r.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var a=e.lines[s].height;if(t<a)break;t-=a}return n+s}function Qe(e,t){return t>=e.first&&t<e.first+e.size}function Ze(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function et(e,t,n){if(void 0===n&&(n=null),!(this instanceof et))return new et(e,t,n);this.line=e,this.ch=t,this.sticky=n}function tt(e,t){return e.line-t.line||e.ch-t.ch}function nt(e,t){return e.sticky==t.sticky&&0==tt(e,t)}function it(e){return et(e.line,e.ch)}function rt(e,t){return tt(e,t)<0?t:e}function ot(e,t){return tt(e,t)<0?e:t}function st(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function at(e,t){if(t.line<e.first)return et(e.first,0);var n=e.first+e.size-1;return t.line>n?et(n,Ge(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?et(e.line,t):n<0?et(e.line,0):e}(t,Ge(e,t.line).text.length)}function ct(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=at(e,t[i]);return n}Ve.prototype.eol=function(){return this.pos>=this.string.length},Ve.prototype.sol=function(){return this.pos==this.lineStart},Ve.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ve.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ve.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Ve.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ve.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ve.prototype.skipToEnd=function(){this.pos=this.string.length},Ve.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Ve.prototype.backUp=function(e){this.pos-=e},Ve.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=U(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?U(this.string,this.lineStart,this.tabSize):0)},Ve.prototype.indentation=function(){return U(this.string,null,this.tabSize)-(this.lineStart?U(this.string,this.lineStart,this.tabSize):0)},Ve.prototype.match=function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},Ve.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ve.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ve.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ve.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var lt=function(e,t){this.state=e,this.lookAhead=t},ut=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function dt(e,t,n,i){var r=[e.state.modeGen],o={};Et(e,t.text,e.doc.mode,n,(function(e,t){return r.push(e,t)}),o,i);for(var s=n.state,a=function(i){n.baseTokens=r;var a=e.state.overlays[i],c=1,l=0;n.state=!0,Et(e,t.text,a.mode,n,(function(e,t){for(var n=c;l<e;){var i=r[c];i>e&&r.splice(c,1,e,r[c+1],i),c+=2,l=Math.min(e,i)}if(t)if(a.opaque)r.splice(n,c-n,e,"overlay "+t),c=n+2;else for(;n<c;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+t}}),o),n.state=s,n.baseTokens=null,n.baseTokenPos=1},c=0;c<e.state.overlays.length;++c)a(c);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function ht(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=pt(e,Xe(t)),r=t.text.length>e.options.maxHighlightLength&&He(e.doc.mode,i.state),o=dt(e,t,i);r&&(i.state=r),t.stateAfter=i.save(!r),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function pt(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return new ut(i,!0,t);var o=function(e,t,n){for(var i,r,o=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=o.first)return o.first;var c=Ge(o,a-1),l=c.stateAfter;if(l&&(!n||a+(l instanceof lt?l.lookAhead:0)<=o.modeFrontier))return a;var u=U(c.text,null,e.options.tabSize);(null==r||i>u)&&(r=a-1,i=u)}return r}(e,t,n),s=o>i.first&&Ge(i,o-1).stateAfter,a=s?ut.fromSaved(i,s,o):new ut(i,qe(i.mode),o);return i.iter(o,t,(function(n){ft(e,n.text,a);var i=a.line;n.stateAfter=i==t-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?a.save():null,a.nextLine()})),n&&(i.modeFrontier=a.line),a}function ft(e,t,n,i){var r=e.doc.mode,o=new Ve(t,e.options.tabSize,n);for(o.start=o.pos=i||0,""==t&&mt(r,n.state);!o.eol();)gt(r,o,n.state),o.start=o.pos}function mt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ke(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function gt(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=Ke(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}ut.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ut.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ut.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ut.fromSaved=function(e,t,n){return t instanceof lt?new ut(e,He(e.mode,t.state),n,t.lookAhead):new ut(e,He(e.mode,t),n)},ut.prototype.save=function(e){var t=!1!==e?He(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new lt(t,this.maxLookAhead):t};var vt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function yt(e,t,n,i){var r,o,s=e.doc,a=s.mode,c=Ge(s,(t=at(s,t)).line),l=pt(e,t.line,n),u=new Ve(c.text,e.options.tabSize,l);for(i&&(o=[]);(i||u.pos<t.ch)&&!u.eol();)u.start=u.pos,r=gt(a,u,l.state),i&&o.push(new vt(u,r,He(s.mode,l.state)));return i?o:new vt(u,r,l.state)}function bt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[i])||(t[i]+=" "+n[2])}return e}function Et(e,t,n,i,r,o,s){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var c,l=0,u=null,d=new Ve(t,e.options.tabSize,i),h=e.options.addModeClass&&[null];for(""==t&&bt(mt(n,i.state),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(a=!1,s&&ft(e,t,i,d.pos),d.pos=t.length,c=null):c=bt(gt(n,d,i.state,h),o),h){var p=h[0].name;p&&(c="m-"+(c?p+" "+c:p))}if(!a||u!=c){for(;l<d.start;)r(l=Math.min(d.start,l+5e3),u);u=c}d.start=d.pos}for(;l<d.pos;){var f=Math.min(d.pos,l+5e3);r(f,u),l=f}}var St=!1,wt=!1;function _t(e,t,n){this.marker=e,this.from=t,this.to=n}function Tt(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function xt(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Ct(e,t){if(t.full)return null;var n=Qe(e,t.from.line)&&Ge(e,t.from.line).markedSpans,i=Qe(e,t.to.line)&&Ge(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,o=t.to.ch,s=0==tt(t.from,t.to),a=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],s=o.marker;if(null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var a=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push(new _t(s,o.from,a?null:o.to))}}return i}(n,r,s),c=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],s=o.marker;if(null==o.to||(s.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var a=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push(new _t(s,a?null:o.from-t,null==o.to?null:o.to-t))}}return i}(i,o,s),l=1==t.text.length,u=z(t.text).length+(l?r:0);if(a)for(var d=0;d<a.length;++d){var h=a[d];if(null==h.to){var p=Tt(c,h.marker);p?l&&(h.to=null==p.to?null:p.to+u):h.to=r}}if(c)for(var f=0;f<c.length;++f){var m=c[f];null!=m.to&&(m.to+=u),null==m.from?Tt(a,m.marker)||(m.from=u,l&&(a||(a=[])).push(m)):(m.from+=u,l&&(a||(a=[])).push(m))}a&&(a=It(a)),c&&c!=a&&(c=It(c));var g=[a];if(!l){var v,y=t.text.length-2;if(y>0&&a)for(var b=0;b<a.length;++b)null==a[b].to&&(v||(v=[])).push(new _t(a[b].marker,null,null));for(var E=0;E<y;++E)g.push(v);g.push(c)}return g}function It(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function kt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Mt(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function At(e){return e.inclusiveLeft?-1:0}function Ot(e){return e.inclusiveRight?1:0}function Rt(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),o=tt(i.from,r.from)||At(e)-At(t);return o?-o:tt(i.to,r.to)||Ot(e)-Ot(t)||t.id-e.id}function Lt(e,t){var n,i=wt&&e.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(t?r.from:r.to)&&(!n||Rt(n,r.marker)<0)&&(n=r.marker);return n}function Dt(e){return Lt(e,!0)}function Nt(e){return Lt(e,!1)}function Pt(e,t){var n,i=wt&&e.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||Rt(n,o.marker)<0)&&(n=o.marker)}return n}function $t(e,t,n,i,r){var o=Ge(e,t),s=wt&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var c=s[a];if(c.marker.collapsed){var l=c.marker.find(0),u=tt(l.from,n)||At(c.marker)-At(r),d=tt(l.to,i)||Ot(c.marker)-Ot(r);if(!(u>=0&&d<=0||u<=0&&d>=0)&&(u<=0&&(c.marker.inclusiveRight&&r.inclusiveLeft?tt(l.to,n)>=0:tt(l.to,n)>0)||u>=0&&(c.marker.inclusiveRight&&r.inclusiveLeft?tt(l.from,i)<=0:tt(l.from,i)<0)))return!0}}}function Ut(e){for(var t;t=Dt(e);)e=t.find(-1,!0).line;return e}function Bt(e,t){var n=Ge(e,t),i=Ut(n);return n==i?t:Xe(i)}function Ft(e,t){if(t>e.lastLine())return t;var n,i=Ge(e,t);if(!jt(e,i))return t;for(;n=Nt(i);)i=n.find(1,!0).line;return Xe(i)+1}function jt(e,t){var n=wt&&t.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Ht(e,t,i))return!0}}function Ht(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return Ht(e,i.line,Tt(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r=void 0,o=0;o<t.markedSpans.length;++o)if((r=t.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&Ht(e,t,r))return!0}function Kt(e){for(var t=0,n=(e=Ut(e)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var o=n.parent;o;o=(n=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;t+=a.height}return t}function qt(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=Dt(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=Nt(i);){var o=t.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function Vt(e){var t=e.display,n=e.doc;t.maxLine=Ge(n,n.first),t.maxLineLength=qt(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=qt(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var Gt=function(e,t,n){this.text=e,Mt(this,t),this.height=n?n(this):1};function Wt(e){e.parent=null,kt(e)}Gt.prototype.lineNo=function(){return Xe(this)},ye(Gt);var zt={},Yt={};function Xt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Yt:zt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Jt(e,t){var n=A("span",null,null,c?"padding-right: .1px":null),i={pre:A("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var o=r?t.rest[r-1]:t.line,s=void 0;i.pos=0,i.addToken=Zt,Me(e.display.measure)&&(s=le(o,e.doc.direction))&&(i.addToken=en(i.addToken,s)),i.map=[],nn(o,i,ht(e,o,t!=e.display.externalMeasured&&Xe(o))),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=D(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=D(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(ke(e.display.measure))),0==r?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(c){var a=i.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return fe(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=D(i.pre.className,i.textClass||"")),i}function Qt(e){var t=M("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Zt(e,t,n,i,r,o,c){if(t){var l,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",r=0;r<e.length;r++){var o=e.charAt(r);" "!=o||!n||r!=e.length-1&&32!=e.charCodeAt(r+1)||(o=""),i+=o,n=" "==o}return i}(t,e.trailingSpace):t,d=e.cm.state.specialChars,h=!1;if(d.test(t)){l=document.createDocumentFragment();for(var p=0;;){d.lastIndex=p;var f=d.exec(t),m=f?f.index-p:t.length-p;if(m){var g=document.createTextNode(u.slice(p,p+m));s&&a<9?l.appendChild(M("span",[g])):l.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!f)break;p+=m+1;var v=void 0;if("\t"==f[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(v=l.appendChild(M("span",W(b),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=b}else"\r"==f[0]||"\n"==f[0]?((v=l.appendChild(M("span","\r"==f[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",f[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),s&&a<9?l.appendChild(M("span",[v])):l.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,l=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,l),s&&a<9&&(h=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||i||r||h||o||c){var E=n||"";i&&(E+=i),r&&(E+=r);var S=M("span",[l],E,o);if(c)for(var w in c)c.hasOwnProperty(w)&&"style"!=w&&"class"!=w&&S.setAttribute(w,c[w]);return e.content.appendChild(S)}e.content.appendChild(l)}}function en(e,t){return function(n,i,r,o,s,a,c){r=r?r+" cm-force-border":"cm-force-border";for(var l=n.pos,u=l+i.length;;){for(var d=void 0,h=0;h<t.length&&!((d=t[h]).to>l&&d.from<=l);h++);if(d.to>=u)return e(n,i,r,o,s,a,c);e(n,i.slice(0,d.to-l),r,o,null,a,c),o=null,i=i.slice(d.to-l),l=d.to}}}function tn(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function nn(e,t,n){var i=e.markedSpans,r=e.text,o=0;if(i)for(var s,a,c,l,u,d,h,p=r.length,f=0,m=1,g="",v=0;;){if(v==f){c=l=u=a="",h=null,d=null,v=1/0;for(var y=[],b=void 0,E=0;E<i.length;++E){var S=i[E],w=S.marker;if("bookmark"==w.type&&S.from==f&&w.widgetNode)y.push(w);else if(S.from<=f&&(null==S.to||S.to>f||w.collapsed&&S.to==f&&S.from==f)){if(null!=S.to&&S.to!=f&&v>S.to&&(v=S.to,l=""),w.className&&(c+=" "+w.className),w.css&&(a=(a?a+";":"")+w.css),w.startStyle&&S.from==f&&(u+=" "+w.startStyle),w.endStyle&&S.to==v&&(b||(b=[])).push(w.endStyle,S.to),w.title&&((h||(h={})).title=w.title),w.attributes)for(var _ in w.attributes)(h||(h={}))[_]=w.attributes[_];w.collapsed&&(!d||Rt(d.marker,w)<0)&&(d=S)}else S.from>f&&v>S.from&&(v=S.from)}if(b)for(var T=0;T<b.length;T+=2)b[T+1]==v&&(l+=" "+b[T]);if(!d||d.from==f)for(var x=0;x<y.length;++x)tn(t,0,y[x]);if(d&&(d.from||0)==f){if(tn(t,(null==d.to?p+1:d.to)-f,d.marker,null==d.from),null==d.to)return;d.to==f&&(d=!1)}}if(f>=p)break;for(var C=Math.min(p,v);;){if(g){var I=f+g.length;if(!d){var k=I>C?g.slice(0,C-f):g;t.addToken(t,k,s?s+c:c,u,f+k.length==v?l:"",a,h)}if(I>=C){g=g.slice(C-f),f=C;break}f=I,u=""}g=r.slice(o,o=n[m++]),s=Xt(n[m++],t.cm.options)}}else for(var M=1;M<n.length;M+=2)t.addToken(t,r.slice(o,o=n[M]),Xt(n[M+1],t.cm.options))}function rn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Nt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Xe(z(this.rest))-n+1:1,this.node=this.text=null,this.hidden=jt(e,t)}function on(e,t,n){for(var i,r=[],o=t;o<n;o=i){var s=new rn(e.doc,Ge(e.doc,o),o);i=o+s.size,r.push(s)}return r}var sn=null,an=null;function cn(e,t){var n=he(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);sn?i=sn.delayedCallbacks:an?i=an:(i=an=[],setTimeout(ln,0));for(var o=function(e){i.push((function(){return n[e].apply(null,r)}))},s=0;s<n.length;++s)o(s)}}function ln(){var e=an;an=null;for(var t=0;t<e.length;++t)e[t]()}function un(e,t,n,i){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];"text"==o?pn(e,t):"gutter"==o?mn(e,t,n,i):"class"==o?fn(e,t):"widget"==o&&gn(e,t,i)}t.changes=null}function dn(e){return e.node==e.text&&(e.node=M("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&a<8&&(e.node.style.zIndex=2)),e.node}function hn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Jt(e,t)}function pn(e,t){var n=t.text.className,i=hn(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,fn(e,t)):n&&(t.text.className=n)}function fn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=dn(t);t.background=i.insertBefore(M("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?dn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function mn(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=dn(t);t.gutterBackground=M("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),r.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=dn(t),a=t.gutter=M("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(M("div",Ze(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var c=0;c<e.display.gutterSpecs.length;++c){var l=e.display.gutterSpecs[c].className,u=o.hasOwnProperty(l)&&o[l];u&&a.appendChild(M("div",[u],"CodeMirror-gutter-elt","left: "+i.gutterLeft[l]+"px; width: "+i.gutterWidth[l]+"px"))}}}function gn(e,t,n){t.alignable&&(t.alignable=null);for(var i=T("CodeMirror-linewidget"),r=t.node.firstChild,o=void 0;r;r=o)o=r.nextSibling,i.test(r.className)&&t.node.removeChild(r);yn(e,t,n)}function vn(e,t,n,i){var r=hn(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),fn(e,t),mn(e,t,n,i),yn(e,t,i),t.node}function yn(e,t,n){if(bn(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)bn(e,t.rest[i],t,n,!1)}function bn(e,t,n,i,r){if(t.widgets)for(var o=dn(n),s=0,a=t.widgets;s<a.length;++s){var c=a[s],l=M("div",[c.node],"CodeMirror-linewidget"+(c.className?" "+c.className:""));c.handleMouseEvents||l.setAttribute("cm-ignore-events","true"),En(c,l,n,i),e.display.input.setUneditable(l),r&&c.above?o.insertBefore(l,n.gutter||n.text):o.appendChild(l),cn(c,"redraw")}}function En(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function Sn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!O(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),k(t.display.measure,M("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function wn(e,t){for(var n=_e(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function _n(e){return e.lineSpace.offsetTop}function Tn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function xn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=k(e.measure,M("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Cn(e){return 50-e.display.nativeBarWidth}function In(e){return e.display.scroller.clientWidth-Cn(e)-e.display.barWidth}function kn(e){return e.display.scroller.clientHeight-Cn(e)-e.display.barHeight}function Mn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var r=0;r<e.rest.length;r++)if(Xe(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function An(e,t,n,i){return Ln(e,Rn(e,t),n,i)}function On(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ui(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Rn(e,t){var n=Xe(t),i=On(e,n);i&&!i.text?i=null:i&&i.changes&&(un(e,i,n,oi(e)),e.curOp.forceUpdate=!0),i||(i=function(e,t){var n=Xe(t=Ut(t)),i=e.display.externalMeasured=new rn(e.doc,t,n);i.lineN=n;var r=i.built=Jt(e,i);return i.text=r.pre,k(e.display.lineMeasure,r.pre),i}(e,t));var r=Mn(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Ln(e,t,n,i,r){t.before&&(n=-1);var o,c=n+(i||"");return t.cache.hasOwnProperty(c)?o=t.cache[c]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var i=e.options.lineWrapping,r=i&&In(e);if(!t.measure.heights||i&&t.measure.width!=r){var o=t.measure.heights=[];if(i){t.measure.width=r;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var c=s[a],l=s[a+1];Math.abs(c.bottom-l.bottom)>2&&o.push((c.bottom+l.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),o=function(e,t,n,i){var r,o=Pn(t.map,n,i),c=o.node,l=o.start,u=o.end,d=o.collapse;if(3==c.nodeType){for(var h=0;h<4;h++){for(;l&&ie(t.line.text.charAt(o.coverStart+l));)--l;for(;o.coverStart+u<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+u));)++u;if((r=s&&a<9&&0==l&&u==o.coverEnd-o.coverStart?c.parentNode.getBoundingClientRect():$n(x(c,l,u).getClientRects(),i)).left||r.right||0==l)break;u=l,l-=1,d="right"}s&&a<11&&(r=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=De)return De;var t=k(e,M("span","x")),n=t.getBoundingClientRect(),i=x(t,0,1).getBoundingClientRect();return De=Math.abs(n.left-i.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}(e.display.measure,r))}else{var p;l>0&&(d=i="right"),r=e.options.lineWrapping&&(p=c.getClientRects()).length>1?p["right"==i?p.length-1:0]:c.getBoundingClientRect()}if(s&&a<9&&!l&&(!r||!r.left&&!r.right)){var f=c.parentNode.getClientRects()[0];r=f?{left:f.left,right:f.left+ri(e.display),top:f.top,bottom:f.bottom}:Nn}for(var m=r.top-t.rect.top,g=r.bottom-t.rect.top,v=(m+g)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(v<y[b]);b++);var E=b?y[b-1]:0,S=y[b],w={left:("right"==d?r.right:r.left)-t.rect.left,right:("left"==d?r.left:r.right)-t.rect.left,top:E,bottom:S};return r.left||r.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=m,w.rbottom=g),w}(e,t,n,i),o.bogus||(t.cache[c]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var Dn,Nn={left:0,right:0,top:0,bottom:0};function Pn(e,t,n){for(var i,r,o,s,a,c,l=0;l<e.length;l+=3)if(a=e[l],c=e[l+1],t<a?(r=0,o=1,s="left"):t<c?o=1+(r=t-a):(l==e.length-3||t==c&&e[l+3]>t)&&(r=(o=c-a)-1,t>=c&&(s="right")),null!=r){if(i=e[l+2],a==c&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==r)for(;l&&e[l-2]==e[l-3]&&e[l-1].insertLeft;)i=e[2+(l-=3)],s="left";if("right"==n&&r==c-a)for(;l<e.length-3&&e[l+3]==e[l+4]&&!e[l+5].insertLeft;)i=e[(l+=3)+2],s="right";break}return{node:i,start:r,end:o,collapse:s,coverStart:a,coverEnd:c}}function $n(e,t){var n=Nn;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var r=e.length-1;r>=0&&(n=e[r]).left==n.right;r--);return n}function Un(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Bn(e){e.display.externalMeasure=null,I(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Un(e.display.view[t])}function Fn(e){Bn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function jn(){return u&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Hn(){return u&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Kn(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=Sn(e.widgets[n]));return t}function qn(e,t,n,i,r){if(!r){var o=Kn(t);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=Kt(t);if("local"==i?s+=_n(e.display):s-=e.display.viewOffset,"page"==i||"window"==i){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==i?0:Hn());var c=a.left+("window"==i?0:jn());n.left+=c,n.right+=c}return n.top+=s,n.bottom+=s,n}function Vn(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=jn(),r-=Hn();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:r-s.top}}function Gn(e,t,n,i,r){return i||(i=Ge(e.doc,t.line)),qn(e,i,An(e,i,t.ch,r),n)}function Wn(e,t,n,i,r,o){function s(t,s){var a=Ln(e,r,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,qn(e,i,a,n)}i=i||Ge(e.doc,t.line),r||(r=Rn(e,i));var a=le(i,e.doc.direction),c=t.ch,l=t.sticky;if(c>=i.text.length?(c=i.text.length,l="before"):c<=0&&(c=0,l="after"),!a)return s("before"==l?c-1:c,"before"==l);function u(e,t,n){return s(n?e-1:e,1==a[t].level!=n)}var d=ae(a,c,l),h=se,p=u(c,d,"before"==l);return null!=h&&(p.other=u(c,h,"before"!=l)),p}function zn(e,t){var n=0;t=at(e.doc,t),e.options.lineWrapping||(n=ri(e.display)*t.ch);var i=Ge(e.doc,t.line),r=Kt(i)+_n(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function Yn(e,t,n,i,r){var o=et(e,t,n);return o.xRel=r,i&&(o.outside=i),o}function Xn(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return Yn(i.first,0,null,-1,-1);var r=Je(i,n),o=i.first+i.size-1;if(r>o)return Yn(i.first+i.size-1,Ge(i,o).text.length,null,1,1);t<0&&(t=0);for(var s=Ge(i,r);;){var a=ei(e,s,r,t,n),c=Pt(s,a.ch+(a.xRel>0||a.outside>0?1:0));if(!c)return a;var l=c.find(1);if(l.line==r)return l;s=Ge(i,r=l.line)}}function Jn(e,t,n,i){i-=Kn(t);var r=t.text.length,o=oe((function(t){return Ln(e,n,t-1).bottom<=i}),r,0);return{begin:o,end:r=oe((function(t){return Ln(e,n,t).top>i}),o,r)}}function Qn(e,t,n,i){return n||(n=Rn(e,t)),Jn(e,t,n,qn(e,t,Ln(e,n,i),"line").top)}function Zn(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function ei(e,t,n,i,r){r-=Kt(t);var o=Rn(e,t),s=Kn(t),a=0,c=t.text.length,l=!0,u=le(t,e.doc.direction);if(u){var d=(e.options.lineWrapping?ni:ti)(e,t,n,o,u,i,r);a=(l=1!=d.level)?d.from:d.to-1,c=l?d.to:d.from-1}var h,p,f=null,m=null,g=oe((function(t){var n=Ln(e,o,t);return n.top+=s,n.bottom+=s,!!Zn(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(f=t,m=n),!0)}),a,c),v=!1;if(m){var y=i-m.left<m.right-i,b=y==l;g=f+(b?0:1),p=b?"after":"before",h=y?m.left:m.right}else{l||g!=c&&g!=a||g++,p=0==g?"after":g==t.text.length?"before":Ln(e,o,g-(l?1:0)).bottom+s<=r==l?"after":"before";var E=Wn(e,et(n,g,p),"line",t,o);h=E.left,v=r<E.top?-1:r>=E.bottom?1:0}return Yn(n,g=re(t.text,g,1),p,v,i-h)}function ti(e,t,n,i,r,o,s){var a=oe((function(a){var c=r[a],l=1!=c.level;return Zn(Wn(e,et(n,l?c.to:c.from,l?"before":"after"),"line",t,i),o,s,!0)}),0,r.length-1),c=r[a];if(a>0){var l=1!=c.level,u=Wn(e,et(n,l?c.from:c.to,l?"after":"before"),"line",t,i);Zn(u,o,s,!0)&&u.top>s&&(c=r[a-1])}return c}function ni(e,t,n,i,r,o,s){var a=Jn(e,t,i,s),c=a.begin,l=a.end;/\s/.test(t.text.charAt(l-1))&&l--;for(var u=null,d=null,h=0;h<r.length;h++){var p=r[h];if(!(p.from>=l||p.to<=c)){var f=Ln(e,i,1!=p.level?Math.min(l,p.to)-1:Math.max(c,p.from)).right,m=f<o?o-f+1e9:f-o;(!u||d>m)&&(u=p,d=m)}}return u||(u=r[r.length-1]),u.from<c&&(u={from:c,to:u.to,level:u.level}),u.to>l&&(u={from:u.from,to:l,level:u.level}),u}function ii(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Dn){Dn=M("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Dn.appendChild(document.createTextNode("x")),Dn.appendChild(M("br"));Dn.appendChild(document.createTextNode("x"))}k(e.measure,Dn);var n=Dn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),I(e.measure),n||1}function ri(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=M("span","xxxxxxxxxx"),n=M("pre",[t],"CodeMirror-line-like");k(e.measure,n);var i=t.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function oi(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var a=e.display.gutterSpecs[s].className;n[a]=o.offsetLeft+o.clientLeft+r,i[a]=o.clientWidth}return{fixedPos:si(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function si(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ai(e){var t=ii(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/ri(e.display)-3);return function(r){if(jt(e.doc,r))return 0;var o=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(o+=r.widgets[s].height);return n?o+(Math.ceil(r.text.length/i)||1)*t:o+t}}function ci(e){var t=e.doc,n=ai(e);t.iter((function(e){var t=n(e);t!=e.height&&Ye(e,t)}))}function li(e,t,n,i){var r=e.display;if(!n&&"true"==_e(t).getAttribute("cm-not-content"))return null;var o,s,a=r.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(e){return null}var c,l=Xn(e,o,s);if(i&&l.xRel>0&&(c=Ge(e.doc,l.line).text).length==l.ch){var u=U(c,c.length,e.options.tabSize)-c.length;l=et(l.line,Math.max(0,Math.round((o-xn(e.display).left)/ri(e.display))-u))}return l}function ui(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function di(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)wt&&Bt(e.doc,t)<r.viewTo&&pi(e);else if(n<=r.viewFrom)wt&&Ft(e.doc,n+i)>r.viewFrom?pi(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)pi(e);else if(t<=r.viewFrom){var o=fi(e,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):pi(e)}else if(n>=r.viewTo){var s=fi(e,t,t,-1);s?(r.view=r.view.slice(0,s.index),r.viewTo=s.lineN):pi(e)}else{var a=fi(e,t,t,-1),c=fi(e,n,n+i,1);a&&c?(r.view=r.view.slice(0,a.index).concat(on(e,a.lineN,c.lineN)).concat(r.view.slice(c.index)),r.viewTo+=i):pi(e)}var l=r.externalMeasured;l&&(n<l.lineN?l.lineN+=i:t<l.lineN+l.size&&(r.externalMeasured=null))}function hi(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var o=i.view[ui(e,t)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==F(s,n)&&s.push(n)}}}function pi(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function fi(e,t,n,i){var r,o=ui(e,t),s=e.display.view;if(!wt||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var a=e.display.viewFrom,c=0;c<o;c++)a+=s[c].size;if(a!=t){if(i>0){if(o==s.length-1)return null;r=a+s[o].size-t,o++}else r=a-t;t+=r,n+=r}for(;Bt(e.doc,n)!=n;){if(o==(i<0?0:s.length-1))return null;n+=i*s[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function mi(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function gi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function vi(e,t){void 0===t&&(t=!0);for(var n=e.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(t||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var c=a.empty();(c||e.options.showCursorWhenSelecting)&&yi(e,a.head,r),c||Ei(e,a,o)}}return i}function yi(e,t,n){var i=Wn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),r=n.appendChild(M("div","","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var o=n.appendChild(M("div","","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function bi(e,t){return e.top-t.top||e.left-t.left}function Ei(e,t,n){var i=e.display,r=e.doc,o=document.createDocumentFragment(),s=xn(e.display),a=s.left,c=Math.max(i.sizerWidth,In(e)-i.sizer.offsetLeft)-s.right,l="ltr"==r.direction;function u(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),o.appendChild(M("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?c-e:n)+"px;\n                             height: "+(i-t)+"px"))}function d(t,n,i){var o,s,d=Ge(r,t),h=d.text.length;function p(n,i){return Gn(e,et(t,n),"div",d,i)}function f(t,n,i){var r=Qn(e,d,null,t),o="ltr"==n==("after"==i)?"left":"right";return p("after"==i?r.begin:r.end-(/\s/.test(d.text.charAt(r.end-1))?2:1),o)[o]}var m=le(d,r.direction);return function(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var r=!1,o=0;o<e.length;++o){var s=e[o];(s.from<n&&s.to>t||t==n&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),r=!0)}r||i(t,n,"ltr")}(m,n||0,null==i?h:i,(function(e,t,r,d){var g="ltr"==r,v=p(e,g?"left":"right"),y=p(t-1,g?"right":"left"),b=null==n&&0==e,E=null==i&&t==h,S=0==d,w=!m||d==m.length-1;if(y.top-v.top<=3){var _=(l?E:b)&&w,T=(l?b:E)&&S?a:(g?v:y).left,x=_?c:(g?y:v).right;u(T,v.top,x-T,v.bottom)}else{var C,I,k,M;g?(C=l&&b&&S?a:v.left,I=l?c:f(e,r,"before"),k=l?a:f(t,r,"after"),M=l&&E&&w?c:y.right):(C=l?f(e,r,"before"):a,I=!l&&b&&S?c:v.right,k=!l&&E&&w?a:y.left,M=l?f(t,r,"after"):c),u(C,v.top,I-C,v.bottom),v.bottom<y.top&&u(a,v.bottom,null,y.top),u(k,y.top,M-k,y.bottom)}(!o||bi(v,o)<0)&&(o=v),bi(y,o)<0&&(o=y),(!s||bi(v,s)<0)&&(s=v),bi(y,s)<0&&(s=y)})),{start:o,end:s}}var h=t.from(),p=t.to();if(h.line==p.line)d(h.line,h.ch,p.ch);else{var f=Ge(r,h.line),m=Ge(r,p.line),g=Ut(f)==Ut(m),v=d(h.line,h.ch,g?f.text.length+1:null).end,y=d(p.line,g?0:null,p.ch).start;g&&(v.top<y.top-2?(u(v.right,v.top,null,v.bottom),u(a,y.top,y.left,y.bottom)):u(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&u(a,v.bottom,null,y.top)}n.appendChild(o)}function Si(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){e.hasFocus()||xi(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function wi(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Ti(e))}function _i(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&xi(e))}),100)}function Ti(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(fe(e,"focus",e,t),e.state.focused=!0,L(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),c&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),Si(e))}function xi(e,t){e.state.delayingBlurEvent||(e.state.focused&&(fe(e,"blur",e,t),e.state.focused=!1,C(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function Ci(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var r=t.view[i],o=e.options.lineWrapping,c=void 0,l=0;if(!r.hidden){if(s&&a<8){var u=r.node.offsetTop+r.node.offsetHeight;c=u-n,n=u}else{var d=r.node.getBoundingClientRect();c=d.bottom-d.top,!o&&r.text.firstChild&&(l=r.text.firstChild.getBoundingClientRect().right-d.left-1)}var h=r.line.height-c;if((h>.005||h<-.005)&&(Ye(r.line,c),Ii(r.line),r.rest))for(var p=0;p<r.rest.length;p++)Ii(r.rest[p]);if(l>e.display.sizerWidth){var f=Math.ceil(l/ri(e.display));f>e.display.maxLineLength&&(e.display.maxLineLength=f,e.display.maxLine=r.line,e.display.maxLineChanged=!0)}}}}function Ii(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function ki(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-_n(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,o=Je(t,i),s=Je(t,r);if(n&&n.ensure){var a=n.ensure.from.line,c=n.ensure.to.line;a<o?(o=a,s=Je(t,Kt(Ge(t,a))+e.wrapper.clientHeight)):Math.min(c,t.lastLine())>=s&&(o=Je(t,Kt(Ge(t,c))-e.wrapper.clientHeight),s=c)}return{from:o,to:Math.max(s,o+1)}}function Mi(e,t){var n=e.display,i=ii(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=kn(e),s={};t.bottom-t.top>o&&(t.bottom=t.top+o);var a=e.doc.height+Tn(n),c=t.top<i,l=t.bottom>a-i;if(t.top<r)s.scrollTop=c?0:t.top;else if(t.bottom>r+o){var u=Math.min(t.top,(l?a:t.bottom)-o);u!=r&&(s.scrollTop=u)}var d=e.options.fixedGutter?0:n.gutters.offsetWidth,h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-d,p=In(e)-n.gutters.offsetWidth,f=t.right-t.left>p;return f&&(t.right=t.left+p),t.left<10?s.scrollLeft=0:t.left<h?s.scrollLeft=Math.max(0,t.left+d-(f?0:10)):t.right>p+h-3&&(s.scrollLeft=t.right+(f?0:10)-p),s}function Ai(e,t){null!=t&&(Li(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Oi(e){Li(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Ri(e,t,n){null==t&&null==n||Li(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Li(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Di(e,zn(e,t.from),zn(e,t.to),t.margin))}function Di(e,t,n,i){var r=Mi(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});Ri(e,r.scrollLeft,r.scrollTop)}function Ni(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||cr(e,{top:t}),Pi(e,t,!0),n&&cr(e),ir(e,100))}function Pi(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function $i(e,t,n,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,dr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Ui(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+Tn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Cn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Bi=function(e,t,n){this.cm=n;var i=this.vert=M("div",[M("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=M("div",[M("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,e(i),e(r),de(i,"scroll",(function(){i.clientHeight&&t(i.scrollTop,"vertical")})),de(r,"scroll",(function(){r.clientWidth&&t(r.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Bi.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},Bi.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Bi.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Bi.prototype.zeroWidthHack=function(){var e=y&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new B,this.disableVert=new B},Bi.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,(function i(){var r=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,i)}))},Bi.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Fi=function(){};function ji(e,t){t||(t=Ui(e));var n=e.display.barWidth,i=e.display.barHeight;Hi(e,t);for(var r=0;r<4&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&Ci(e),Hi(e,Ui(e)),n=e.display.barWidth,i=e.display.barHeight}function Hi(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Fi.prototype.update=function(){return{bottom:0,right:0}},Fi.prototype.setScrollLeft=function(){},Fi.prototype.setScrollTop=function(){},Fi.prototype.clear=function(){};var Ki={native:Bi,null:Fi};function qi(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&C(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Ki[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),de(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?$i(e,t):Ni(e,t)}),e),e.display.scrollbars.addClass&&L(e.display.wrapper,e.display.scrollbars.addClass)}var Vi=0;function Gi(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Vi},t=e.curOp,sn?sn.ops.push(t):t.ownsGroup=sn={ops:[t],delayedCallbacks:[]}}function Wi(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}(n)}finally{sn=null,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)zi(t[n]);for(var i=0;i<t.length;i++)Yi(t[i]);for(var r=0;r<t.length;r++)Xi(t[r]);for(var o=0;o<t.length;o++)Ji(t[o]);for(var s=0;s<t.length;s++)Qi(t[s])}(e)}(n)}}(t)}function zi(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Cn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Cn(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Vt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new or(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Yi(e){e.updatedDisplay=e.mustUpdate&&sr(e.cm,e.update)}function Xi(e){var t=e.cm,n=t.display;e.updatedDisplay&&Ci(t),e.barMeasure=Ui(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=An(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Cn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-In(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Ji(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&$i(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==R();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&ji(t,e.barMeasure),e.updatedDisplay&&ur(t,e.barMeasure),e.selectionChanged&&Si(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&wi(e.cm)}function Qi(e){var t=e.cm,n=t.display,i=t.doc;if(e.updatedDisplay&&ar(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Pi(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&$i(t,e.scrollLeft,!0,!0),e.scrollToPos){var r=function(e,t,n,i){var r;null==i&&(i=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?et(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?et(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var s=!1,a=Wn(e,t),c=n&&n!=t?Wn(e,n):a,l=Mi(e,r={left:Math.min(a.left,c.left),top:Math.min(a.top,c.top)-i,right:Math.max(a.left,c.left),bottom:Math.max(a.bottom,c.bottom)+i}),u=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=l.scrollTop&&(Ni(e,l.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(s=!0)),null!=l.scrollLeft&&($i(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(s=!0)),!s)break}return r}(t,at(i,e.scrollToPos.from),at(i,e.scrollToPos.to),e.scrollToPos.margin);!function(e,t){if(!me(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),r=null;if(t.top+i.top<0?r=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!f){var o=M("div","",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-_n(e.display))+"px;\n                         height: "+(t.bottom-t.top+Cn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(r),e.display.lineSpace.removeChild(o)}}}(t,r)}var o=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(o)for(var a=0;a<o.length;++a)o[a].lines.length||fe(o[a],"hide");if(s)for(var c=0;c<s.length;++c)s[c].lines.length&&fe(s[c],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&fe(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Zi(e,t){if(e.curOp)return t();Gi(e);try{return t()}finally{Wi(e)}}function er(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Gi(e);try{return t.apply(e,arguments)}finally{Wi(e)}}}function tr(e){return function(){if(this.curOp)return e.apply(this,arguments);Gi(this);try{return e.apply(this,arguments)}finally{Wi(this)}}}function nr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Gi(t);try{return e.apply(this,arguments)}finally{Wi(t)}}}function ir(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,P(rr,e))}function rr(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=pt(e,t.highlightFrontier),r=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(i.line>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength?He(t.mode,i.state):null,c=dt(e,o,i,!0);a&&(i.state=a),o.styles=c.styles;var l=o.styleClasses,u=c.classes;u?o.styleClasses=u:l&&(o.styleClasses=null);for(var d=!s||s.length!=o.styles.length||l!=u&&(!l||!u||l.bgClass!=u.bgClass||l.textClass!=u.textClass),h=0;!d&&h<s.length;++h)d=s[h]!=o.styles[h];d&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=e.options.maxHighlightLength&&ft(e,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return ir(e,e.options.workDelay),!0})),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),r.length&&Zi(e,(function(){for(var t=0;t<r.length;t++)hi(e,r[t],"text")}))}}var or=function(e,t,n){var i=e.display;this.viewport=t,this.visible=ki(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=In(e),this.force=n,this.dims=oi(e),this.events=[]};function sr(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return pi(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==mi(e))return!1;hr(e)&&(pi(e),t.dims=oi(e));var r=i.first+i.size,o=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(r,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(r,n.viewTo)),wt&&(o=Bt(e.doc,o),s=Ft(e.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=on(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=on(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(ui(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(on(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,ui(e,n)))),i.viewTo=n}(e,o,s),n.viewOffset=Kt(Ge(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var l=mi(e);if(!a&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=function(e){if(e.hasFocus())return null;var t=R();if(!t||!O(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&O(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(e);return l>4&&(n.lineDiv.style.display="none"),function(e,t,n){var i=e.display,r=e.options.lineNumbers,o=i.lineDiv,s=o.firstChild;function a(t){var n=t.nextSibling;return c&&y&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var l=i.view,u=i.viewFrom,d=0;d<l.length;d++){var h=l[d];if(h.hidden);else if(h.node&&h.node.parentNode==o){for(;s!=h.node;)s=a(s);var p=r&&null!=t&&t<=u&&h.lineNumber;h.changes&&(F(h.changes,"gutter")>-1&&(p=!1),un(e,h,u,n)),p&&(I(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(Ze(e.options,u)))),s=h.node.nextSibling}else{var f=vn(e,h,u,n);o.insertBefore(f,s)}u+=h.size}for(;s;)s=a(s)}(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=R()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&O(document.body,e.anchorNode)&&O(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(u),I(n.cursorDiv),I(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ir(e,400)),n.updateLineNumbers=null,!0}function ar(e,t){for(var n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldDisplayWidth!=In(e))i&&(t.visible=ki(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Tn(e.display)-kn(e),n.top)}),t.visible=ki(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!sr(e,t))break;Ci(e);var r=Ui(e);gi(e),ji(e,r),ur(e,r),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function cr(e,t){var n=new or(e,t);if(sr(e,n)){Ci(e),ar(e,n);var i=Ui(e);gi(e),ji(e,i),ur(e,i),n.finish()}}function lr(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function ur(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Cn(e)+"px"}function dr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=si(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var c=0;c<a.length;c++)a[c].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function hr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=Ze(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(M("div",[M("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",lr(e.display),!0}return!1}function pr(e,t){for(var n=[],i=!1,r=0;r<e.length;r++){var o=e[r],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;i=!0}n.push({className:o,style:s})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function fr(e){var t=e.gutters,n=e.gutterSpecs;I(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,s=r.style,a=t.appendChild(M("div",null,"CodeMirror-gutter "+o));s&&(a.style.cssText=s),"CodeMirror-linenumbers"==o&&(e.lineGutter=a,a.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",lr(e)}function mr(e){fr(e.display),di(e),dr(e)}function gr(e,t,i,r){var o=this;this.input=i,o.scrollbarFiller=M("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=M("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=A("div",null,"CodeMirror-code"),o.selectionDiv=M("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=M("div",null,"CodeMirror-cursors"),o.measure=M("div",null,"CodeMirror-measure"),o.lineMeasure=M("div",null,"CodeMirror-measure"),o.lineSpace=A("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var l=A("div",[o.lineSpace],"CodeMirror-lines");o.mover=M("div",[l],null,"position: relative"),o.sizer=M("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=M("div",null,null,"position: absolute; height: 50px; width: 1px;"),o.gutters=M("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=M("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=M("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),s&&a<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),c||n&&v||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=pr(r.gutters,r.lineNumbers),fr(o),i.init(o)}or.prototype.signal=function(e,t){ve(e,t)&&this.events.push(arguments)},or.prototype.finish=function(){for(var e=0;e<this.events.length;e++)fe.apply(null,this.events[e])};var vr=0,yr=null;function br(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function Er(e){var t=br(e);return t.x*=yr,t.y*=yr,t}function Sr(e,t){var i=br(t),r=i.x,o=i.y,s=e.display,a=s.scroller,l=a.scrollWidth>a.clientWidth,u=a.scrollHeight>a.clientHeight;if(r&&l||o&&u){if(o&&y&&c)e:for(var h=t.target,p=s.view;h!=a;h=h.parentNode)for(var f=0;f<p.length;f++)if(p[f].node==h){e.display.currentWheelTarget=h;break e}if(r&&!n&&!d&&null!=yr)return o&&u&&Ni(e,Math.max(0,a.scrollTop+o*yr)),$i(e,Math.max(0,a.scrollLeft+r*yr)),(!o||o&&u)&&be(t),void(s.wheelStartX=null);if(o&&null!=yr){var m=o*yr,g=e.doc.scrollTop,v=g+s.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):v=Math.min(e.doc.height,v+m+50),cr(e,{top:g,bottom:v})}vr<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=r,s.wheelDY=o,setTimeout((function(){if(null!=s.wheelStartX){var e=a.scrollLeft-s.wheelStartX,t=a.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(yr=(yr*vr+n)/(vr+1),++vr)}}),200)):(s.wheelDX+=r,s.wheelDY+=o))}}s?yr=-.53:n?yr=15:u?yr=-.7:h&&(yr=-1/3);var wr=function(e,t){this.ranges=e,this.primIndex=t};wr.prototype.primary=function(){return this.ranges[this.primIndex]},wr.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!nt(n.anchor,i.anchor)||!nt(n.head,i.head))return!1}return!0},wr.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new _r(it(this.ranges[t].anchor),it(this.ranges[t].head));return new wr(e,this.primIndex)},wr.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},wr.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(tt(t,i.from())>=0&&tt(e,i.to())<=0)return n}return-1};var _r=function(e,t){this.anchor=e,this.head=t};function Tr(e,t,n){var i=e&&e.options.selectionsMayTouch,r=t[n];t.sort((function(e,t){return tt(e.from(),t.from())})),n=F(t,r);for(var o=1;o<t.length;o++){var s=t[o],a=t[o-1],c=tt(a.to(),s.from());if(i&&!s.empty()?c>0:c>=0){var l=ot(a.from(),s.from()),u=rt(a.to(),s.to()),d=a.empty()?s.from()==s.head:a.from()==a.head;o<=n&&--n,t.splice(--o,2,new _r(d?u:l,d?l:u))}}return new wr(t,n)}function xr(e,t){return new wr([new _r(e,t||e)],0)}function Cr(e){return e.text?et(e.from.line+e.text.length-1,z(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Ir(e,t){if(tt(e,t.from)<0)return e;if(tt(e,t.to)<=0)return Cr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Cr(t).ch-t.to.ch),et(n,i)}function kr(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new _r(Ir(r.anchor,t),Ir(r.head,t)))}return Tr(e.cm,n,e.sel.primIndex)}function Mr(e,t,n){return e.line==t.line?et(n.line,e.ch-t.ch+n.ch):et(n.line+(e.line-t.line),e.ch)}function Ar(e){e.doc.mode=Be(e.options,e.doc.modeOption),Or(e)}function Or(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ir(e,100),e.state.modeGen++,e.curOp&&di(e)}function Rr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==z(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Lr(e,t,n,i){function r(e){return n?n[e]:null}function o(e,n,r){!function(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),kt(e),Mt(e,n);var r=i?i(e):1;r!=e.height&&Ye(e,r)}(e,n,r,i),cn(e,"change",e,t)}function s(e,t){for(var n=[],o=e;o<t;++o)n.push(new Gt(l[o],r(o),i));return n}var a=t.from,c=t.to,l=t.text,u=Ge(e,a.line),d=Ge(e,c.line),h=z(l),p=r(l.length-1),f=c.line-a.line;if(t.full)e.insert(0,s(0,l.length)),e.remove(l.length,e.size-l.length);else if(Rr(e,t)){var m=s(0,l.length-1);o(d,d.text,p),f&&e.remove(a.line,f),m.length&&e.insert(a.line,m)}else if(u==d)if(1==l.length)o(u,u.text.slice(0,a.ch)+h+u.text.slice(c.ch),p);else{var g=s(1,l.length-1);g.push(new Gt(h+u.text.slice(c.ch),p,i)),o(u,u.text.slice(0,a.ch)+l[0],r(0)),e.insert(a.line+1,g)}else if(1==l.length)o(u,u.text.slice(0,a.ch)+l[0]+d.text.slice(c.ch),r(0)),e.remove(a.line+1,f);else{o(u,u.text.slice(0,a.ch)+l[0],r(0)),o(d,h+d.text.slice(c.ch),p);var v=s(1,l.length-1);f>1&&e.remove(a.line+1,f-1),e.insert(a.line+1,v)}cn(e,"change",e,t)}function Dr(e,t,n){!function e(i,r,o){if(i.linked)for(var s=0;s<i.linked.length;++s){var a=i.linked[s];if(a.doc!=r){var c=o&&a.sharedHist;n&&!c||(t(a.doc,c),e(a.doc,i,c))}}}(e,null,!0)}function Nr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,ci(e),Ar(e),Pr(e),e.options.lineWrapping||Vt(e),e.options.mode=t.modeOption,di(e)}function Pr(e){("rtl"==e.doc.direction?L:C)(e.display.lineDiv,"CodeMirror-rtl")}function $r(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Ur(e,t){var n={from:it(t.from),to:Cr(t),text:We(e,t.from,t.to)};return Hr(e,n,t.from.line,t.to.line+1),Dr(e,(function(e){return Hr(e,n,t.from.line,t.to.line+1)}),!0),n}function Br(e){for(;e.length&&z(e).ranges;)e.pop()}function Fr(e,t,n,i){var r=e.history;r.undone.length=0;var o,s,a=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&r.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Br(e.done),z(e.done)):e.done.length&&!z(e.done).ranges?z(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),z(e.done)):void 0}(r,r.lastOp==i)))s=z(o.changes),0==tt(t.from,t.to)&&0==tt(t.from,s.to)?s.to=Cr(t):o.changes.push(Ur(e,t));else{var c=z(r.done);for(c&&c.ranges||jr(e.sel,r.done),o={changes:[Ur(e,t)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=a,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,s||fe(e,"historyAdded")}function jr(e,t){var n=z(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Hr(e,t,n,i){var r=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),(function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[o]=n.markedSpans),++o}))}function Kr(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function qr(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],r=0;r<t.text.length;++r)i.push(Kr(n[r]));return i}(e,t),i=Ct(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],s=i[r];if(o&&s)e:for(var a=0;a<s.length;++a){for(var c=s[a],l=0;l<o.length;++l)if(o[l].marker==c.marker)continue e;o.push(c)}else s&&(n[r]=s)}return n}function Vr(e,t,n){for(var i=[],r=0;r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?wr.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];i.push({changes:a});for(var c=0;c<s.length;++c){var l=s[c],u=void 0;if(a.push({from:l.from,to:l.to,text:l.text}),t)for(var d in l)(u=d.match(/^spans_(\d+)$/))&&F(t,Number(u[1]))>-1&&(z(a)[d]=l[d],delete l[d])}}}return i}function Gr(e,t,n,i){if(i){var r=e.anchor;if(n){var o=tt(t,r)<0;o!=tt(n,r)<0?(r=t,t=n):o!=tt(t,n)<0&&(t=n)}return new _r(r,t)}return new _r(n||t,t)}function Wr(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),Qr(e,new wr([Gr(e.sel.primary(),t,n,r)],0),i)}function zr(e,t,n){for(var i=[],r=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)i[o]=Gr(e.sel.ranges[o],t[o],null,r);Qr(e,Tr(e.cm,i,e.sel.primIndex),n)}function Yr(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,Qr(e,Tr(e.cm,r,e.sel.primIndex),i)}function Xr(e,t,n,i){Qr(e,xr(t,n),i)}function Jr(e,t,n){var i=e.history.done,r=z(i);r&&r.ranges?(i[i.length-1]=t,Zr(e,t,n)):Qr(e,t,n)}function Qr(e,t,n){Zr(e,t,n),function(e,t,n,i){var r=e.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||function(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,z(r.done),t))?r.done[r.done.length-1]=t:jr(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&Br(r.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Zr(e,t,n){(ve(e,"beforeSelectionChange")||e.cm&&ve(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new _r(at(e,t[n].anchor),at(e,t[n].head))},origin:n&&n.origin};return fe(e,"beforeSelectionChange",e,i),e.cm&&fe(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?Tr(e.cm,i.ranges,i.ranges.length-1):t}(e,t,n));var i=n&&n.bias||(tt(t.primary().head,e.sel.primary().head)<0?-1:1);eo(e,no(e,t,i,!0)),n&&!1===n.scroll||!e.cm||"nocursor"==e.cm.getOption("readOnly")||Oi(e.cm)}function eo(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ge(e.cm)),cn(e,"cursorActivity",e))}function to(e){eo(e,no(e,e.sel,null,!1))}function no(e,t,n,i){for(var r,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],c=ro(e,s.anchor,a&&a.anchor,n,i),l=ro(e,s.head,a&&a.head,n,i);(r||c!=s.anchor||l!=s.head)&&(r||(r=t.ranges.slice(0,o)),r[o]=new _r(c,l))}return r?Tr(e.cm,r,t.primIndex):t}function io(e,t,n,i,r){var o=Ge(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],c=a.marker,l="selectLeft"in c?!c.selectLeft:c.inclusiveLeft,u="selectRight"in c?!c.selectRight:c.inclusiveRight;if((null==a.from||(l?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(u?a.to>=t.ch:a.to>t.ch))){if(r&&(fe(c,"beforeCursorEnter"),c.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!c.atomic)continue;if(n){var d=c.find(i<0?1:-1),h=void 0;if((i<0?u:l)&&(d=oo(e,d,-i,d&&d.line==t.line?o:null)),d&&d.line==t.line&&(h=tt(d,n))&&(i<0?h<0:h>0))return io(e,d,t,i,r)}var p=c.find(i<0?-1:1);return(i<0?l:u)&&(p=oo(e,p,i,p.line==t.line?o:null)),p?io(e,p,t,i,r):null}}return t}function ro(e,t,n,i,r){var o=i||1;return io(e,t,n,o,r)||!r&&io(e,t,n,o,!0)||io(e,t,n,-o,r)||!r&&io(e,t,n,-o,!0)||(e.cantEdit=!0,et(e.first,0))}function oo(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?at(e,et(t.line-1)):null:n>0&&t.ch==(i||Ge(e,t.line)).text.length?t.line<e.first+e.size-1?et(t.line+1,0):null:new et(t.line,t.ch+n)}function so(e){e.setSelection(et(e.firstLine(),0),et(e.lastLine()),H)}function ao(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(t,n,r,o){t&&(i.from=at(e,t)),n&&(i.to=at(e,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),fe(e,"beforeChange",e,i),e.cm&&fe(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function co(e,t,n){if(e.cm){if(!e.cm.curOp)return er(e.cm,co)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"))||(t=ao(e,t,!0))){var i=St&&!n&&function(e,t,n){var i=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=F(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var r=[{from:t,to:n}],o=0;o<i.length;++o)for(var s=i[o],a=s.find(0),c=0;c<r.length;++c){var l=r[c];if(!(tt(l.to,a.from)<0||tt(l.from,a.to)>0)){var u=[c,1],d=tt(l.from,a.from),h=tt(l.to,a.to);(d<0||!s.inclusiveLeft&&!d)&&u.push({from:l.from,to:a.from}),(h>0||!s.inclusiveRight&&!h)&&u.push({from:a.to,to:l.to}),r.splice.apply(r,u),c+=u.length-3}}return r}(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)lo(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text,origin:t.origin});else lo(e,t)}}function lo(e,t){if(1!=t.text.length||""!=t.text[0]||0!=tt(t.from,t.to)){var n=kr(e,t);Fr(e,t,n,e.cm?e.cm.curOp.id:NaN),po(e,t,n,Ct(e,t));var i=[];Dr(e,(function(e,n){n||-1!=F(i,e.history)||(vo(e.history,t),i.push(e.history)),po(e,t,null,Ct(e,t))}))}}function uo(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var r,o=e.history,s=e.sel,a="undo"==t?o.done:o.undone,c="undo"==t?o.undone:o.done,l=0;l<a.length&&(r=a[l],n?!r.ranges||r.equals(e.sel):r.ranges);l++);if(l!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(r=a.pop()).ranges){if(i)return void a.push(r);break}if(jr(r,c),n&&!r.equals(e.sel))return void Qr(e,r,{clearRedo:!1});s=r}var u=[];jr(s,c),c.push({changes:u,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var d=ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"),h=function(n){var i=r.changes[n];if(i.origin=t,d&&!ao(e,i,!1))return a.length=0,{};u.push(Ur(e,i));var o=n?kr(e,i):z(a);po(e,i,o,qr(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:Cr(i)});var s=[];Dr(e,(function(e,t){t||-1!=F(s,e.history)||(vo(e.history,i),s.push(e.history)),po(e,i,null,qr(e,i))}))},p=r.changes.length-1;p>=0;--p){var f=h(p);if(f)return f.v}}}}function ho(e,t){if(0!=t&&(e.first+=t,e.sel=new wr(Y(e.sel.ranges,(function(e){return new _r(et(e.anchor.line+t,e.anchor.ch),et(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){di(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)hi(e.cm,i,"gutter")}}function po(e,t,n,i){if(e.cm&&!e.cm.curOp)return er(e.cm,po)(e,t,n,i);if(t.to.line<e.first)ho(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);ho(e,r),t={from:et(e.first,0),to:et(t.to.line+r,t.to.ch),text:[z(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:et(o,Ge(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=We(e,t.from,t.to),n||(n=kr(e,t)),e.cm?function(e,t,n){var i=e.doc,r=e.display,o=t.from,s=t.to,a=!1,c=o.line;e.options.lineWrapping||(c=Xe(Ut(Ge(i,o.line))),i.iter(c,s.line+1,(function(e){if(e==r.maxLine)return a=!0,!0}))),i.sel.contains(t.from,t.to)>-1&&ge(e),Lr(i,t,n,ai(e)),e.options.lineWrapping||(i.iter(c,o.line+t.text.length,(function(e){var t=qt(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,a=!1)})),a&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var r=Ge(e,i).stateAfter;if(r&&(!(r instanceof lt)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(i,o.line),ir(e,400);var l=t.text.length-(s.line-o.line)-1;t.full?di(e):o.line!=s.line||1!=t.text.length||Rr(e.doc,t)?di(e,o.line,s.line+1,l):hi(e,o.line,"text");var u=ve(e,"changes"),d=ve(e,"change");if(d||u){var h={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};d&&cn(e,"change",e,h),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}(e.cm,t,i):Lr(e,t,i),Zr(e,n,H),e.cantEdit&&ro(e,et(e.firstLine(),0))&&(e.cantEdit=!1)}}function fo(e,t,n,i,r){var o;i||(i=n),tt(i,n)<0&&(n=(o=[i,n])[0],i=o[1]),"string"==typeof t&&(t=e.splitLines(t)),co(e,{from:n,to:i,text:t,origin:r})}function mo(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function go(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r],s=!0;if(o.ranges){o.copied||((o=e[r]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)mo(o.ranges[a].anchor,t,n,i),mo(o.ranges[a].head,t,n,i)}else{for(var c=0;c<o.changes.length;++c){var l=o.changes[c];if(n<l.from.line)l.from=et(l.from.line+i,l.from.ch),l.to=et(l.to.line+i,l.to.ch);else if(t<=l.to.line){s=!1;break}}s||(e.splice(0,r+1),r=0)}}}function vo(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;go(e.done,n,i,r),go(e.undone,n,i,r)}function yo(e,t,n,i){var r=t,o=t;return"number"==typeof t?o=Ge(e,st(e,t)):r=Xe(t),null==r?null:(i(o,r)&&e.cm&&hi(e.cm,r,n),o)}function bo(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function Eo(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}_r.prototype.from=function(){return ot(this.anchor,this.head)},_r.prototype.to=function(){return rt(this.anchor,this.head)},_r.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},bo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var r=this.lines[n];this.height-=r.height,Wt(r),cn(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},Eo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var o=Math.min(t,r-e),s=i.height;if(i.removeInner(e,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(t-=o))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof bo))){var a=[];this.collapse(a),this.children=[new bo(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<=o){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(var s=r.lines.length%25+25,a=s;a<r.lines.length;){var c=new bo(r.lines.slice(a,a+=25));r.height-=c.height,this.children.splice(++i,0,c),c.parent=this}r.lines=r.lines.slice(0,s),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new Eo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=F(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var i=new Eo(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<o){var s=Math.min(t,o-e);if(r.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var So=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function wo(e,t,n){Kt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Ai(e,n)}So.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=Xe(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var o=Sn(this);Ye(n,Math.max(0,n.height-o)),e&&(Zi(e,(function(){wo(e,n,-o),hi(e,i,"widget")})),cn(e,"lineWidgetCleared",e,this,i))}},So.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=Sn(this)-t;r&&(jt(this.doc,i)||Ye(i,i.height+r),n&&Zi(n,(function(){n.curOp.forceUpdate=!0,wo(n,i,r),cn(n,"lineWidgetChanged",n,e,Xe(i))})))},ye(So);var _o=0,To=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++_o};function xo(e,t,n,i,r){if(i&&i.shared)return function(e,t,n,i,r){(i=$(i)).shared=!1;var o=[xo(e,t,n,i,r)],s=o[0],a=i.widgetNode;return Dr(e,(function(e){a&&(i.widgetNode=a.cloneNode(!0)),o.push(xo(e,at(e,t),at(e,n),i,r));for(var c=0;c<e.linked.length;++c)if(e.linked[c].isParent)return;s=z(o)})),new Co(o,s)}(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return er(e.cm,xo)(e,t,n,i,r);var o=new To(e,r),s=tt(t,n);if(i&&$(i,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=A("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if($t(e,t.line,t,n,o)||t.line!=n.line&&$t(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");wt=!0}o.addToHistory&&Fr(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var a,c=t.line,l=e.cm;if(e.iter(c,n.line+1,(function(e){l&&o.collapsed&&!l.options.lineWrapping&&Ut(e)==l.display.maxLine&&(a=!0),o.collapsed&&c!=t.line&&Ye(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new _t(o,c==t.line?t.ch:null,c==n.line?n.ch:null)),++c})),o.collapsed&&e.iter(t.line,n.line+1,(function(t){jt(e,t)&&Ye(t,0)})),o.clearOnEnter&&de(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(St=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++_o,o.atomic=!0),l){if(a&&(l.curOp.updateMaxLine=!0),o.collapsed)di(l,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var u=t.line;u<=n.line;u++)hi(l,u,"text");o.atomic&&to(l.doc),cn(l,"markerAdded",l,o)}return o}To.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Gi(e),ve(this,"clear")){var n=this.find();n&&cn(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=Tt(s.markedSpans,this);e&&!this.collapsed?hi(e,Xe(s),"text"):e&&(null!=a.to&&(r=Xe(s)),null!=a.from&&(i=Xe(s))),s.markedSpans=xt(s.markedSpans,a),null==a.from&&this.collapsed&&!jt(this.doc,s)&&e&&Ye(s,ii(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var l=Ut(this.lines[c]),u=qt(l);u>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&di(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&to(e.doc)),e&&cn(e,"markerCleared",e,this,i,r),t&&Wi(e),this.parent&&this.parent.clear()}},To.prototype.find=function(e,t){var n,i;null==e&&"bookmark"==this.type&&(e=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],s=Tt(o.markedSpans,this);if(null!=s.from&&(n=et(t?o:Xe(o),s.from),-1==e))return n;if(null!=s.to&&(i=et(t?o:Xe(o),s.to),1==e))return i}return n&&{from:n,to:i}},To.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;t&&i&&Zi(i,(function(){var r=t.line,o=Xe(t.line),s=On(i,o);if(s&&(Un(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!jt(n.doc,r)&&null!=n.height){var a=n.height;n.height=null;var c=Sn(n)-a;c&&Ye(r,r.height+c)}cn(i,"markerChanged",i,e)}))},To.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=F(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},To.prototype.detachLine=function(e){if(this.lines.splice(F(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},ye(To);var Co=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function Io(e){return e.findMarks(et(e.first,0),e.clipPos(et(e.lastLine())),(function(e){return e.parent}))}function ko(e){for(var t=function(t){var n=e[t],i=[n.primary.doc];Dr(n.primary.doc,(function(e){return i.push(e)}));for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==F(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<e.length;n++)t(n)}Co.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();cn(this,"clear")}},Co.prototype.find=function(e,t){return this.primary.find(e,t)},ye(Co);var Mo=0,Ao=function(e,t,n,i,r){if(!(this instanceof Ao))return new Ao(e,t,n,i,r);null==n&&(n=0),Eo.call(this,[new bo([new Gt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=et(n,0);this.sel=xr(o),this.history=new $r(null),this.id=++Mo,this.modeOption=t,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Lr(this,{from:o,to:o,text:e}),Qr(this,xr(o),H)};Ao.prototype=J(Eo.prototype,{constructor:Ao,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ze(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:nr((function(e){var t=et(this.first,0),n=this.first+this.size-1;co(this,{from:t,to:et(n,Ge(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Ri(this.cm,0,0),Qr(this,xr(t),H)})),replaceRange:function(e,t,n,i){fo(this,e,t=at(this,t),n=n?at(this,n):t,i)},getRange:function(e,t,n){var i=We(this,at(this,e),at(this,t));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Qe(this,e))return Ge(this,e)},getLineNumber:function(e){return Xe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ge(this,e)),Ut(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return at(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:nr((function(e,t,n){Xr(this,at(this,"number"==typeof e?et(e,t||0):e),null,n)})),setSelection:nr((function(e,t,n){Xr(this,at(this,e),at(this,t||e),n)})),extendSelection:nr((function(e,t,n){Wr(this,at(this,e),t&&at(this,t),n)})),extendSelections:nr((function(e,t){zr(this,ct(this,e),t)})),extendSelectionsBy:nr((function(e,t){zr(this,ct(this,Y(this.sel.ranges,e)),t)})),setSelections:nr((function(e,t,n){if(e.length){for(var i=[],r=0;r<e.length;r++)i[r]=new _r(at(this,e[r].anchor),at(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Qr(this,Tr(this.cm,i,t),n)}})),addSelection:nr((function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new _r(at(this,e),at(this,t||e))),Qr(this,Tr(this.cm,i,i.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=We(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=We(this,n[i].from(),n[i].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:nr((function(e,t,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var s=r.ranges[o];i[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:n}}for(var a=t&&"end"!=t&&function(e,t,n){for(var i=[],r=et(e.first,0),o=r,s=0;s<t.length;s++){var a=t[s],c=Mr(a.from,r,o),l=Mr(Cr(a),r,o);if(r=a.to,o=l,"around"==n){var u=e.sel.ranges[s],d=tt(u.head,u.anchor)<0;i[s]=new _r(d?l:c,d?c:l)}else i[s]=new _r(c,c)}return new wr(i,e.sel.primIndex)}(this,i,t),c=i.length-1;c>=0;c--)co(this,i[c]);a?Jr(this,a):this.cm&&Oi(this.cm)})),undo:nr((function(){uo(this,"undo")})),redo:nr((function(){uo(this,"redo")})),undoSelection:nr((function(){uo(this,"undo",!0)})),redoSelection:nr((function(){uo(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new $r(this.history),Dr(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Vr(this.history.done),undone:Vr(this.history.undone)}},setHistory:function(e){var t=this.history=new $r(this.history);t.done=Vr(e.done.slice(0),null,!0),t.undone=Vr(e.undone.slice(0),null,!0)},setGutterMarker:nr((function(e,t,n){return yo(this,e,"gutter",(function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&te(i)&&(e.gutterMarkers=null),!0}))})),clearGutter:nr((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&yo(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,te(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!Qe(this,e))return null;if(t=e,!(e=Ge(this,e)))return null}else if(null==(t=Xe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:nr((function(e,t,n){return yo(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(T(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0}))})),removeLineClass:nr((function(e,t,n){return yo(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var o=r.match(T(n));if(!o)return!1;var s=o.index+o[0].length;e[i]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0}))})),addLineWidget:nr((function(e,t,n){return function(e,t,n,i){var r=new So(e,n,i),o=e.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),yo(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length,Math.max(0,r.insertAt)),0,r),r.line=t,o&&!jt(e,t)){var i=Kt(t)<e.scrollTop;Ye(t,t.height+Sn(r)),i&&Ai(o,r.height),o.curOp.forceUpdate=!0}return!0})),o&&cn(o,"lineWidgetAdded",o,r,"number"==typeof t?t:Xe(t)),r}(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return xo(this,at(this,e),at(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return xo(this,e=at(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Ge(this,(e=at(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=at(this,e),t=at(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,(function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var c=s[a];null!=c.to&&r==e.line&&e.ch>=c.to||null==c.from&&r!=e.line||null!=c.from&&r==t.line&&c.from>=t.ch||n&&!n(c.marker)||i.push(c.marker.parent||c.marker)}++r})),i},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)})),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){var o=r.text.length+i;if(o>e)return t=e,!0;e-=o,++n})),at(this,et(n,t))},indexFromPos:function(e){var t=(e=at(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Ao(ze(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new Ao(ze(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),o=e.clipPos(r.from),s=e.clipPos(r.to);if(tt(o,s)){var a=xo(e,o,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}(i,Io(this)),i},unlinkDoc:function(e){if(e instanceof xs&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),ko(Io(this));break}if(e.history==this.history){var n=[e.id];Dr(e,(function(e){return n.push(e.id)}),!0),e.history=new $r(null),e.history.done=Vr(this.history.done,n),e.history.undone=Vr(this.history.undone,n)}},iterLinkedDocs:function(e){Dr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Oe(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:nr((function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&Zi(t=this.cm,(function(){Pr(t),di(t)})))}))}),Ao.prototype.eachLine=Ao.prototype.iter;var Oo=0;function Ro(e){var t=this;if(Lo(t),!me(t,e)&&!wn(t.display,e)){be(e),s&&(Oo=+new Date);var n=li(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),a=0,c=function(){++a==r&&er(t,(function(){var e={from:n=at(t.doc,n),to:n,text:t.doc.splitLines(o.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};co(t.doc,e),Jr(t.doc,xr(at(t.doc,n),at(t.doc,Cr(e))))}))()},l=function(e,n){if(t.options.allowDropFileTypes&&-1==F(t.options.allowDropFileTypes,e.type))c();else{var i=new FileReader;i.onerror=function(){return c()},i.onload=function(){var e=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(o[n]=e),c()},i.readAsText(e)}},u=0;u<i.length;u++)l(i[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var d=e.dataTransfer.getData("Text");if(d){var h;if(t.state.draggingText&&!t.state.draggingText.copy&&(h=t.listSelections()),Zr(t.doc,xr(n,n)),h)for(var p=0;p<h.length;++p)fo(t.doc,"",h[p].anchor,h[p].head,"drag");t.replaceSelection(d,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Lo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Do(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var No=!1;function Po(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var $o={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Uo=0;Uo<10;Uo++)$o[Uo+48]=$o[Uo+96]=String(Uo);for(var Bo=65;Bo<=90;Bo++)$o[Bo]=String.fromCharCode(Bo);for(var Fo=1;Fo<=12;Fo++)$o[Fo+111]=$o[Fo+63235]="F"+Fo;var jo={};function Ho(e){var t,n,i,r,o=e.split(/-(?!$)/);e=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);i=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Ko(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var r=Y(n.split(" "),Ho),o=0;o<r.length;o++){var s=void 0,a=void 0;o==r.length-1?(a=r.join(" "),s=i):(a=r.slice(0,o+1).join(" "),s="...");var c=t[a];if(c){if(c!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[n]}for(var l in t)e[l]=t[l];return e}function qo(e,t,n,i){var r=(t=zo(t)).call?t.call(e,i):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return qo(e,t.fallthrough,n,i);for(var o=0;o<t.fallthrough.length;o++){var s=qo(e,t.fallthrough[o],n,i);if(s)return s}}}function Vo(e){var t="string"==typeof e?e:$o[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Go(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(w?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(w?t.ctrlKey:t.metaKey)&&"Mod"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function Wo(e,t){if(d&&34==e.keyCode&&e.char)return!1;var n=$o[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Go(n,e,t))}function zo(e){return"string"==typeof e?jo[e]:e}function Yo(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=t(n[r]);i.length&&tt(o.from,z(i).to)<=0;){var s=i.pop();if(tt(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}Zi(e,(function(){for(var t=i.length-1;t>=0;t--)fo(e.doc,"",i[t].from,i[t].to,"+delete");Oi(e)}))}function Xo(e,t,n){var i=re(e.text,t+n,n);return i<0||i>e.text.length?null:i}function Jo(e,t,n){var i=Xo(e,t.ch,n);return null==i?null:new et(t.line,i,n<0?"after":"before")}function Qo(e,t,n,i,r){if(e){"rtl"==t.doc.direction&&(r=-r);var o=le(n,t.doc.direction);if(o){var s,a=r<0?z(o):o[0],c=r<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==t.doc.direction){var l=Rn(t,n);s=r<0?n.text.length-1:0;var u=Ln(t,l,s).top;s=oe((function(e){return Ln(t,l,e).top==u}),r<0==(1==a.level)?a.from:a.to-1,s),"before"==c&&(s=Xo(n,s,1))}else s=r<0?a.to:a.from;return new et(i,s,c)}}return new et(i,r<0?n.text.length:0,r<0?"before":"after")}jo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},jo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},jo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},jo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},jo.default=y?jo.macDefault:jo.pcDefault;var Zo={selectAll:so,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),H)},killLine:function(e){return Yo(e,(function(t){if(t.empty()){var n=Ge(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:et(t.head.line+1,0)}:{from:t.head,to:et(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Yo(e,(function(t){return{from:et(t.from().line,0),to:at(e.doc,et(t.to().line+1,0))}}))},delLineLeft:function(e){return Yo(e,(function(e){return{from:et(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Yo(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Yo(e,(function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(et(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(et(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return es(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return ts(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return function(e,t){var n=Ge(e.doc,t),i=function(e){for(var t;t=Nt(e);)e=t.find(1,!0).line;return e}(n);return i!=n&&(t=Xe(i)),Qo(!0,e,n,t,-1)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),q)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),q)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?ts(e,t.head):i}),q)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),s=U(e.getLine(o.line),o.ch,i);t.push(W(i-s%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Zi(e,(function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var r=t[i].head,o=Ge(e.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new et(r.line,r.ch-1)),r.ch>0)r=new et(r.line,r.ch+1),e.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),et(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var s=Ge(e.doc,r.line-1).text;s&&(r=new et(r.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),et(r.line-1,s.length-1),r,"+transpose"))}n.push(new _r(r,r))}e.setSelections(n)}))},newlineAndIndent:function(e){return Zi(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);Oi(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function es(e,t){var n=Ge(e.doc,t),i=Ut(n);return i!=n&&(t=Xe(i)),Qo(!0,e,i,t,1)}function ts(e,t){var n=es(e,t.line),i=Ge(e.doc,n.line),r=le(i,e.doc.direction);if(!r||0==r[0].level){var o=Math.max(n.ch,i.text.search(/\S/)),s=t.line==n.line&&t.ch<=o&&t.ch;return et(n.line,s?0:o,n.sticky)}return n}function ns(e,t,n){if("string"==typeof t&&!(t=Zo[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=j}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}var is=new B;function rs(e,t,n,i){var r=e.state.keySeq;if(r){if(Vo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:is.set(50,(function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())})),os(e,r+" "+t,n,i))return!0}return os(e,t,n,i)}function os(e,t,n,i){var r=function(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=qo(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&qo(t,e.options.extraKeys,n,e)||qo(t,e.options.keyMap,n,e)}(e,t,i);return"multi"==r&&(e.state.keySeq=t),"handled"==r&&cn(e,"keyHandled",e,t,n),"handled"!=r&&"multi"!=r||(be(n),Si(e)),!!r}function ss(e,t){var n=Wo(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?rs(e,"Shift-"+n,t,(function(t){return ns(e,t,!0)}))||rs(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ns(e,t)})):rs(e,n,t,(function(t){return ns(e,t)})))}var as=null;function cs(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=R(),me(t,e)))){s&&a<11&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var r=ss(t,e);d&&(as=r?i:null,r||88!=i||Le||!(y?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),n&&!y&&!r&&46==i&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(C(t,"CodeMirror-crosshair"),pe(document,"keyup",n),pe(document,"mouseover",n))}L(t,"CodeMirror-crosshair"),de(document,"keyup",n),de(document,"mouseover",n)}(t)}}function ls(e){16==e.keyCode&&(this.doc.sel.shift=!1),me(this,e)}function us(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||wn(t.display,e)||me(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(d&&n==as)return as=null,void be(e);if(!d||e.which&&!(e.which<10)||!ss(t,e)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(function(e,t,n){return rs(e,"'"+n+"'",t,(function(t){return ns(e,t,!0)}))}(t,e,r)||t.display.input.onKeyPress(e))}}}var ds,hs,ps=function(e,t,n){this.time=e,this.pos=t,this.button=n};function fs(e){var t=this,n=t.display;if(!(me(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,wn(n,e))c||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!vs(t,e)){var i=li(t,e),r=Te(e),o=i?function(e,t){var n=+new Date;return hs&&hs.compare(n,e,t)?(ds=hs=null,"triple"):ds&&ds.compare(n,e,t)?(hs=new ps(n,e,t),ds=null,"double"):(ds=new ps(n,e,t),hs=null,"single")}(i,r):"single";window.focus(),1==r&&t.state.selectingText&&t.state.selectingText(e),i&&function(e,t,n,i,r){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),rs(e,Go(o=(1==t?"Left":2==t?"Middle":"Right")+o,r),r,(function(t){if("string"==typeof t&&(t=Zo[t]),!t)return!1;var i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i=t(e,n)!=j}finally{e.state.suppressEdits=!1}return i}))}(t,r,i,o,e)||(1==r?i?function(e,t,n,i){s?setTimeout(P(wi,e),0):e.curOp.focus=R();var r,o=function(e,t,n){var i=e.getOption("configureMouse"),r=i?i(e,t,n):{};if(null==r.unit){var o=b?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==r.extend||e.doc.extend)&&(r.extend=e.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=y?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(y?n.altKey:n.ctrlKey)),r}(e,n,i),l=e.doc.sel;e.options.dragDrop&&Ie&&!e.isReadOnly()&&"single"==n&&(r=l.contains(t))>-1&&(tt((r=l.ranges[r]).from(),t)<0||t.xRel>0)&&(tt(r.to(),t)>0||t.xRel<0)?function(e,t,n,i){var r=e.display,o=!1,l=er(e,(function(t){c&&(r.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:_i(e)),pe(r.wrapper.ownerDocument,"mouseup",l),pe(r.wrapper.ownerDocument,"mousemove",u),pe(r.scroller,"dragstart",d),pe(r.scroller,"drop",l),o||(be(t),i.addNew||Wr(e.doc,n,null,null,i.extend),c&&!h||s&&9==a?setTimeout((function(){r.wrapper.ownerDocument.body.focus({preventScroll:!0}),r.input.focus()}),20):r.input.focus())})),u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return o=!0};c&&(r.scroller.draggable=!0),e.state.draggingText=l,l.copy=!i.moveOnDrag,de(r.wrapper.ownerDocument,"mouseup",l),de(r.wrapper.ownerDocument,"mousemove",u),de(r.scroller,"dragstart",d),de(r.scroller,"drop",l),e.state.delayingBlurEvent=!0,setTimeout((function(){return r.input.focus()}),20),r.scroller.dragDrop&&r.scroller.dragDrop()}(e,i,t,o):function(e,t,n,i){s&&_i(e);var r=e.display,o=e.doc;be(t);var a,c,l=o.sel,u=l.ranges;if(i.addNew&&!i.extend?(c=o.sel.contains(n),a=c>-1?u[c]:new _r(n,n)):(a=o.sel.primary(),c=o.sel.primIndex),"rectangle"==i.unit)i.addNew||(a=new _r(n,n)),n=li(e,t,!0,!0),c=-1;else{var d=ms(e,n,i.unit);a=i.extend?Gr(a,d.anchor,d.head,i.extend):d}i.addNew?-1==c?(c=u.length,Qr(o,Tr(e,u.concat([a]),c),{scroll:!1,origin:"*mouse"})):u.length>1&&u[c].empty()&&"char"==i.unit&&!i.extend?(Qr(o,Tr(e,u.slice(0,c).concat(u.slice(c+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):Yr(o,c,a,K):(c=0,Qr(o,new wr([a],0),K),l=o.sel);var h=n;var p=r.wrapper.getBoundingClientRect(),f=0;function m(t){var s=++f,u=li(e,t,!0,"rectangle"==i.unit);if(u)if(0!=tt(u,h)){e.curOp.focus=R(),function(t){if(0!=tt(h,t))if(h=t,"rectangle"==i.unit){for(var r=[],s=e.options.tabSize,u=U(Ge(o,n.line).text,n.ch,s),d=U(Ge(o,t.line).text,t.ch,s),p=Math.min(u,d),f=Math.max(u,d),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var v=Ge(o,m).text,y=V(v,p,s);p==f?r.push(new _r(et(m,y),et(m,y))):v.length>y&&r.push(new _r(et(m,y),et(m,V(v,f,s))))}r.length||r.push(new _r(n,n)),Qr(o,Tr(e,l.ranges.slice(0,c).concat(r),c),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,E=a,S=ms(e,t,i.unit),w=E.anchor;tt(S.anchor,w)>0?(b=S.head,w=ot(E.from(),S.anchor)):(b=S.anchor,w=rt(E.to(),S.head));var _=l.ranges.slice(0);_[c]=function(e,t){var n=t.anchor,i=t.head,r=Ge(e.doc,n.line);if(0==tt(n,i)&&n.sticky==i.sticky)return t;var o=le(r);if(!o)return t;var s=ae(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return t;var c,l=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==l||l==o.length)return t;if(i.line!=n.line)c=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=ae(o,i.ch,i.sticky),d=u-s||(i.ch-n.ch)*(1==a.level?-1:1);c=u==l-1||u==l?d<0:d>0}var h=o[l+(c?-1:0)],p=c==(1==h.level),f=p?h.from:h.to,m=p?"after":"before";return n.ch==f&&n.sticky==m?t:new _r(new et(n.line,f,m),i)}(e,new _r(at(o,w),b)),Qr(o,Tr(e,_,c),K)}}(u);var d=ki(r,o);(u.line>=d.to||u.line<d.from)&&setTimeout(er(e,(function(){f==s&&m(t)})),150)}else{var g=t.clientY<p.top?-20:t.clientY>p.bottom?20:0;g&&setTimeout(er(e,(function(){f==s&&(r.scroller.scrollTop+=g,m(t))})),50)}}function g(t){e.state.selectingText=!1,f=1/0,t&&(be(t),r.input.focus()),pe(r.wrapper.ownerDocument,"mousemove",v),pe(r.wrapper.ownerDocument,"mouseup",y),o.history.lastSelOrigin=null}var v=er(e,(function(e){0!==e.buttons&&Te(e)?m(e):g(e)})),y=er(e,g);e.state.selectingText=y,de(r.wrapper.ownerDocument,"mousemove",v),de(r.wrapper.ownerDocument,"mouseup",y)}(e,i,t,o)}(t,i,o,e):_e(e)==n.scroller&&be(e):2==r?(i&&Wr(t.doc,i),setTimeout((function(){return n.input.focus()}),20)):3==r&&(_?t.display.input.onContextMenu(e):_i(t)))}}function ms(e,t,n){if("char"==n)return new _r(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new _r(et(t.line,0),at(e.doc,et(t.line+1,0)));var i=n(e,t);return new _r(i.from,i.to)}function gs(e,t,n,i){var r,o;if(t.touches)r=t.touches[0].clientX,o=t.touches[0].clientY;else try{r=t.clientX,o=t.clientY}catch(e){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&be(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!ve(e,n))return Se(t);o-=a.top-s.viewOffset;for(var c=0;c<e.display.gutterSpecs.length;++c){var l=s.gutters.childNodes[c];if(l&&l.getBoundingClientRect().right>=r)return fe(e,n,e,Je(e.doc,o),e.display.gutterSpecs[c].className,t),Se(t)}}function vs(e,t){return gs(e,t,"gutterClick",!0)}function ys(e,t){wn(e.display,t)||function(e,t){return!!ve(e,"gutterContextMenu")&&gs(e,t,"gutterContextMenu",!1)}(e,t)||me(e,t,"contextmenu")||_||e.display.input.onContextMenu(t)}function bs(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Fn(e)}ps.prototype.compare=function(e,t,n){return this.time+400>e&&0==tt(t,this.pos)&&n==this.button};var Es={toString:function(){return"CodeMirror.Init"}},Ss={},ws={};function _s(e,t,n){if(!t!=!(n&&n!=Es)){var i=e.display.dragFunctions,r=t?de:pe;r(e.display.scroller,"dragstart",i.start),r(e.display.scroller,"dragenter",i.enter),r(e.display.scroller,"dragover",i.over),r(e.display.scroller,"dragleave",i.leave),r(e.display.scroller,"drop",i.drop)}}function Ts(e){e.options.lineWrapping?(L(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(C(e.display.wrapper,"CodeMirror-wrap"),Vt(e)),ci(e),di(e),Fn(e),setTimeout((function(){return ji(e)}),100)}function xs(e,t){var n=this;if(!(this instanceof xs))return new xs(e,t);this.options=t=t?$(t):{},$(Ss,t,!1);var i=t.value;"string"==typeof i?i=new Ao(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var r=new xs.inputStyles[t.inputStyle](this),o=this.display=new gr(e,i,r,t);for(var l in o.wrapper.CodeMirror=this,bs(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),qi(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new B,keySeq:null,specialChars:null},t.autofocus&&!v&&o.input.focus(),s&&a<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(e){var t=e.display;de(t.scroller,"mousedown",er(e,fs)),de(t.scroller,"dblclick",s&&a<11?er(e,(function(t){if(!me(e,t)){var n=li(e,t);if(n&&!vs(e,t)&&!wn(e.display,t)){be(t);var i=e.findWordAt(n);Wr(e.doc,i.anchor,i.head)}}})):function(t){return me(e,t)||be(t)}),de(t.scroller,"contextmenu",(function(t){return ys(e,t)})),de(t.input.getField(),"contextmenu",(function(n){t.scroller.contains(n.target)||ys(e,n)}));var n,i={end:0};function r(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(i=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}de(t.scroller,"touchstart",(function(r){if(!me(e,r)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(r)&&!vs(e,r)){t.input.ensurePolled(),clearTimeout(n);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-i.end<=300?i:null},1==r.touches.length&&(t.activeTouch.left=r.touches[0].pageX,t.activeTouch.top=r.touches[0].pageY)}})),de(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),de(t.scroller,"touchend",(function(n){var i=t.activeTouch;if(i&&!wn(t,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var s,a=e.coordsChar(t.activeTouch,"page");s=!i.prev||o(i,i.prev)?new _r(a,a):!i.prev.prev||o(i,i.prev.prev)?e.findWordAt(a):new _r(et(a.line,0),at(e.doc,et(a.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),be(n)}r()})),de(t.scroller,"touchcancel",r),de(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(Ni(e,t.scroller.scrollTop),$i(e,t.scroller.scrollLeft,!0),fe(e,"scroll",e))})),de(t.scroller,"mousewheel",(function(t){return Sr(e,t)})),de(t.scroller,"DOMMouseScroll",(function(t){return Sr(e,t)})),de(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){me(e,t)||we(t)},over:function(t){me(e,t)||(function(e,t){var n=li(e,t);if(n){var i=document.createDocumentFragment();yi(e,n,i),e.display.dragCursor||(e.display.dragCursor=M("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),k(e.display.dragCursor,i)}}(e,t),we(t))},start:function(t){return function(e,t){if(s&&(!e.state.draggingText||+new Date-Oo<100))we(t);else if(!me(e,t)&&!wn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!h)){var n=M("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),d&&n.parentNode.removeChild(n)}}(e,t)},drop:er(e,Ro),leave:function(t){me(e,t)||Lo(e)}};var c=t.input.getField();de(c,"keyup",(function(t){return ls.call(e,t)})),de(c,"keydown",er(e,cs)),de(c,"keypress",er(e,us)),de(c,"focus",(function(t){return Ti(e,t)})),de(c,"blur",(function(t){return xi(e,t)}))}(this),function(){var e;No||(de(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Do(Po)}),100))})),de(window,"blur",(function(){return Do(xi)})),No=!0)}(),Gi(this),this.curOp.forceUpdate=!0,Nr(this,i),t.autofocus&&!v||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&Ti(n)}),20):xi(this),ws)ws.hasOwnProperty(l)&&ws[l](this,t[l],Es);hr(this),t.finishInit&&t.finishInit(this);for(var u=0;u<Cs.length;++u)Cs[u](this);Wi(this),c&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}xs.defaults=Ss,xs.optionHandlers=ws;var Cs=[];function Is(e,t,n,i){var r,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=pt(e,t).state:n="prev");var s=e.options.tabSize,a=Ge(o,t),c=U(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var l,u=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&((l=o.mode.indent(r,a.text.slice(u.length),a.text))==j||l>150)){if(!i)return;n="prev"}}else l=0,n="not";"prev"==n?l=t>o.first?U(Ge(o,t-1).text,null,s):0:"add"==n?l=c+e.options.indentUnit:"subtract"==n?l=c-e.options.indentUnit:"number"==typeof n&&(l=c+n),l=Math.max(0,l);var d="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(l/s);p;--p)h+=s,d+="\t";if(h<l&&(d+=W(l-h)),d!=u)return fo(o,d,et(t,0),et(t,u.length),"+input"),a.stateAfter=null,!0;for(var f=0;f<o.sel.ranges.length;f++){var m=o.sel.ranges[f];if(m.head.line==t&&m.head.ch<u.length){var g=et(t,u.length);Yr(o,f,new _r(g,g));break}}}xs.defineInitHook=function(e){return Cs.push(e)};var ks=null;function Ms(e){ks=e}function As(e,t,n,i,r){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var s=+new Date-200,a="paste"==r||e.state.pasteIncoming>s,c=Oe(t),l=null;if(a&&i.ranges.length>1)if(ks&&ks.text.join("\n")==t){if(i.ranges.length%ks.text.length==0){l=[];for(var u=0;u<ks.text.length;u++)l.push(o.splitLines(ks.text[u]))}}else c.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(l=Y(c,(function(e){return[e]})));for(var d=e.curOp.updateInput,h=i.ranges.length-1;h>=0;h--){var p=i.ranges[h],f=p.from(),m=p.to();p.empty()&&(n&&n>0?f=et(f.line,f.ch-n):e.state.overwrite&&!a?m=et(m.line,Math.min(Ge(o,m.line).text.length,m.ch+z(c).length)):a&&ks&&ks.lineWise&&ks.text.join("\n")==c.join("\n")&&(f=m=et(f.line,0)));var g={from:f,to:m,text:l?l[h%l.length]:c,origin:r||(a?"paste":e.state.cutIncoming>s?"cut":"+input")};co(e.doc,g),cn(e,"inputRead",e,g)}t&&!a&&Rs(e,t),Oi(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Os(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Zi(t,(function(){return As(t,n,0,null,"paste")})),!0}function Rs(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=e.getModeAt(r.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){s=Is(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Ge(e.doc,r.head.line).text.slice(0,r.head.ch))&&(s=Is(e,r.head.line,"smart"));s&&cn(e,"electricInput",e,r.head.line)}}}function Ls(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,o={anchor:et(r,0),head:et(r+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Ds(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function Ns(){var e=M("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=M("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return c?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),Ds(e),t}function Ps(e,t,n,i,r){var o=t,s=n,a=Ge(e,t.line),c=r&&"rtl"==e.direction?-n:n;function l(o){var s,l;if("codepoint"==i){var u=a.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(u))s=null;else{var d=n>0?u>=55296&&u<56320:u>=56320&&u<57343;s=new et(t.line,Math.max(0,Math.min(a.text.length,t.ch+n*(d?2:1))),-n)}}else s=r?function(e,t,n,i){var r=le(t,e.doc.direction);if(!r)return Jo(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=ae(r,n.ch,n.sticky),s=r[o];if("ltr"==e.doc.direction&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return Jo(t,n,i);var a,c=function(e,n){return Xo(t,e instanceof et?e.ch:e,n)},l=function(n){return e.options.lineWrapping?(a=a||Rn(e,t),Qn(e,t,a,n)):{begin:0,end:t.text.length}},u=l("before"==n.sticky?c(n,-1):n.ch);if("rtl"==e.doc.direction||1==s.level){var d=1==s.level==i<0,h=c(n,d?1:-1);if(null!=h&&(d?h<=s.to&&h<=u.end:h>=s.from&&h>=u.begin)){var p=d?"before":"after";return new et(n.line,h,p)}}var f=function(e,t,i){for(var o=function(e,t){return t?new et(n.line,c(e,1),"before"):new et(n.line,e,"after")};e>=0&&e<r.length;e+=t){var s=r[e],a=t>0==(1!=s.level),l=a?i.begin:c(i.end,-1);if(s.from<=l&&l<s.to)return o(l,a);if(l=a?s.from:c(s.to,-1),i.begin<=l&&l<i.end)return o(l,a)}},m=f(o+i,i,u);if(m)return m;var g=i>0?u.end:c(u.begin,-1);return null==g||i>0&&g==t.text.length||!(m=f(i>0?0:r.length-1,i,l(g)))?null:m}(e.cm,a,t,n):Jo(a,t,n);if(null==s){if(o||(l=t.line+c)<e.first||l>=e.first+e.size||(t=new et(l,t.ch,t.sticky),!(a=Ge(e,l))))return!1;t=Qo(r,e.cm,a,t.line,c)}else t=s;return!0}if("char"==i||"codepoint"==i)l();else if("column"==i)l(!0);else if("word"==i||"group"==i)for(var u=null,d="group"==i,h=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(n<0)||l(!p);p=!1){var f=a.text.charAt(t.ch)||"\n",m=ee(f,h)?"w":d&&"\n"==f?"n":!d||/\s/.test(f)?null:"p";if(!d||p||m||(m="s"),u&&u!=m){n<0&&(n=1,l(),t.sticky="after");break}if(m&&(u=m),n>0&&!l(!p))break}var g=ro(e,t,o,s,!0);return nt(o,g)&&(g.hitSide=!0),g}function $s(e,t,n,i){var r,o,s=e.doc,a=t.left;if("page"==i){var c=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(c-.5*ii(e.display),3);r=(n>0?t.bottom:t.top)+n*l}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(;(o=Xn(e,a,r)).outside;){if(n<0?r<=0:r>=s.height){o.hitSide=!0;break}r+=5*n}return o}var Us=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new B,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Bs(e,t){var n=On(e,t.line);if(!n||n.hidden)return null;var i=Ge(e.doc,t.line),r=Mn(n,i,t.line),o=le(i,e.doc.direction),s="left";o&&(s=ae(o,t.ch)%2?"right":"left");var a=Pn(r.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function Fs(e,t){return t&&(e.bad=!0),e}function js(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return Fs(e.clipPos(et(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==i)return Hs(o,t,n)}}function Hs(e,t,n){var i=e.text.firstChild,r=!1;if(!t||!O(i,t))return Fs(et(Xe(e.line),0),!0);if(t==i&&(r=!0,t=i.childNodes[n],n=0,!t)){var o=e.rest?z(e.rest):e.line;return Fs(et(Xe(o),o.text.length),r)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,n&&(n=s.nodeValue.length));a.parentNode!=i;)a=a.parentNode;var c=e.measure,l=c.maps;function u(t,n,i){for(var r=-1;r<(l?l.length:0);r++)for(var o=r<0?c.map:l[r],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==n){var u=Xe(r<0?e.line:e.rest[r]),d=o[s]+i;return(i<0||a!=t)&&(d=o[s+(i?1:0)]),et(u,d)}}}var d=u(s,a,n);if(d)return Fs(d,r);for(var h=a.nextSibling,p=s?s.nodeValue.length-n:0;h;h=h.nextSibling){if(d=u(h,h.firstChild,0))return Fs(et(d.line,d.ch-p),r);p+=h.textContent.length}for(var f=a.previousSibling,m=n;f;f=f.previousSibling){if(d=u(f,f.firstChild,-1))return Fs(et(d.line,d.ch+m),r);m+=f.textContent.length}}Us.prototype.init=function(e){var t=this,n=this,i=n.cm,r=n.div=e.lineDiv;function o(e){for(var t=e.target;t;t=t.parentNode){if(t==r)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function s(e){if(o(e)&&!me(i,e)){if(i.somethingSelected())Ms({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=Ls(i);Ms({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation((function(){i.setSelections(t.ranges,0,H),i.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var s=ks.text.join("\n");if(e.clipboardData.setData("Text",s),e.clipboardData.getData("Text")==s)return void e.preventDefault()}var a=Ns(),c=a.firstChild;i.display.lineSpace.insertBefore(a,i.display.lineSpace.firstChild),c.value=ks.text.join("\n");var l=document.activeElement;N(c),setTimeout((function(){i.display.lineSpace.removeChild(a),l.focus(),l==r&&n.showPrimarySelection()}),50)}}Ds(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),de(r,"paste",(function(e){!o(e)||me(i,e)||Os(e,i)||a<=11&&setTimeout(er(i,(function(){return t.updateFromDOM()})),20)})),de(r,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),de(r,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),de(r,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),de(r,"touchstart",(function(){return n.forceCompositionEnd()})),de(r,"input",(function(){t.composing||t.readFromDOMSoon()})),de(r,"copy",s),de(r,"cut",s)},Us.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Us.prototype.prepareSelection=function(){var e=vi(this.cm,!1);return e.focus=document.activeElement==this.div,e},Us.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Us.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Us.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),o=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var s=js(t,e.anchorNode,e.anchorOffset),a=js(t,e.focusNode,e.focusOffset);if(!s||s.bad||!a||a.bad||0!=tt(ot(s,a),r)||0!=tt(rt(s,a),o)){var c=t.display.view,l=r.line>=t.display.viewFrom&&Bs(t,r)||{node:c[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&Bs(t,o);if(!u){var d=c[c.length-1].measure,h=d.maps?d.maps[d.maps.length-1]:d.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(l&&u){var p,f=e.rangeCount&&e.getRangeAt(0);try{p=x(l.node,l.offset,u.offset,u.node)}catch(e){}p&&(!n&&t.state.focused?(e.collapse(l.node,l.offset),p.collapsed||(e.removeAllRanges(),e.addRange(p))):(e.removeAllRanges(),e.addRange(p)),f&&null==e.anchorNode?e.addRange(f):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Us.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Us.prototype.showMultipleSelections=function(e){k(this.cm.display.cursorDiv,e.cursors),k(this.cm.display.selectionDiv,e.selection)},Us.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Us.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return O(this.div,t)},Us.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Us.prototype.blur=function(){this.div.blur()},Us.prototype.getField=function(){return this.div},Us.prototype.supportsTouch=function(){return!0},Us.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Zi(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},Us.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Us.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&u&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=js(t,e.anchorNode,e.anchorOffset),i=js(t,e.focusNode,e.focusOffset);n&&i&&Zi(t,(function(){Qr(t.doc,xr(n,i),H),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)}))}}},Us.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>i.firstLine()&&(s=et(s.line-1,Ge(i.doc,s.line-1).length)),a.ch==Ge(i.doc,a.line).text.length&&a.line<i.lastLine()&&(a=et(a.line+1,0)),s.line<r.viewFrom||a.line>r.viewTo-1)return!1;s.line==r.viewFrom||0==(e=ui(i,s.line))?(t=Xe(r.view[0].line),n=r.view[0].node):(t=Xe(r.view[e].line),n=r.view[e-1].node.nextSibling);var c,l,u=ui(i,a.line);if(u==r.view.length-1?(c=r.viewTo-1,l=r.lineDiv.lastChild):(c=Xe(r.view[u+1].line)-1,l=r.view[u+1].node.previousSibling),!n)return!1;for(var d=i.doc.splitLines(function(e,t,n,i,r){var o="",s=!1,a=e.doc.lineSeparator(),c=!1;function l(){s&&(o+=a,c&&(o+=a),s=c=!1)}function u(e){e&&(l(),o+=e)}function d(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void u(n);var o,h=t.getAttribute("cm-marker");if(h){var p=e.findMarks(et(i,0),et(r+1,0),(g=+h,function(e){return e.id==g}));return void(p.length&&(o=p[0].find(0))&&u(We(e.doc,o.from,o.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;f&&l();for(var m=0;m<t.childNodes.length;m++)d(t.childNodes[m]);/^(pre|p)$/i.test(t.nodeName)&&(c=!0),f&&(s=!0)}else 3==t.nodeType&&u(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var g}for(;d(t),t!=n;)t=t.nextSibling,c=!1;return o}(i,n,l,t,c)),h=We(i.doc,et(t,0),et(c,Ge(i.doc,c).text.length));d.length>1&&h.length>1;)if(z(d)==z(h))d.pop(),h.pop(),c--;else{if(d[0]!=h[0])break;d.shift(),h.shift(),t++}for(var p=0,f=0,m=d[0],g=h[0],v=Math.min(m.length,g.length);p<v&&m.charCodeAt(p)==g.charCodeAt(p);)++p;for(var y=z(d),b=z(h),E=Math.min(y.length-(1==d.length?p:0),b.length-(1==h.length?p:0));f<E&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)++f;if(1==d.length&&1==h.length&&t==s.line)for(;p&&p>s.ch&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)p--,f++;d[d.length-1]=y.slice(0,y.length-f).replace(/^\u200b+/,""),d[0]=d[0].slice(p).replace(/\u200b+$/,"");var S=et(t,p),w=et(c,h.length?z(h).length-f:0);return d.length>1||d[0]||tt(S,w)?(fo(i.doc,d,S,w,"+input"),!0):void 0},Us.prototype.ensurePolled=function(){this.forceCompositionEnd()},Us.prototype.reset=function(){this.forceCompositionEnd()},Us.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Us.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Us.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Zi(this.cm,(function(){return di(e.cm)}))},Us.prototype.setUneditable=function(e){e.contentEditable="false"},Us.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||er(this.cm,As)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Us.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Us.prototype.onContextMenu=function(){},Us.prototype.resetPosition=function(){},Us.prototype.needsContentAttribute=!0;var Ks=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new B,this.hasSelection=!1,this.composing=null};Ks.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var r=this.textarea;function o(e){if(!me(i,e)){if(i.somethingSelected())Ms({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=Ls(i);Ms({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,H):(n.prevInput="",r.value=t.text.join("\n"),N(r))}"cut"==e.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(r.style.width="0px"),de(r,"input",(function(){s&&a>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),de(r,"paste",(function(e){me(i,e)||Os(e,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())})),de(r,"cut",o),de(r,"copy",o),de(e.scroller,"paste",(function(t){if(!wn(e,t)&&!me(i,t)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,r.dispatchEvent(o)}})),de(e.lineSpace,"selectstart",(function(t){wn(e,t)||be(t)})),de(r,"compositionstart",(function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}})),de(r,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},Ks.prototype.createField=function(e){this.wrapper=Ns(),this.textarea=this.wrapper.firstChild},Ks.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Ks.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=vi(e);if(e.options.moveInputWithCursor){var r=Wn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+s.top-o.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+s.left-o.left))}return i},Ks.prototype.showSelection=function(e){var t=this.cm.display;k(t.cursorDiv,e.cursors),k(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ks.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&N(this.textarea),s&&a>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null))}},Ks.prototype.getField=function(){return this.textarea},Ks.prototype.supportsTouch=function(){return!1},Ks.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||R()!=this.textarea))try{this.textarea.focus()}catch(e){}},Ks.prototype.blur=function(){this.textarea.blur()},Ks.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ks.prototype.receivedFocus=function(){this.slowPoll()},Ks.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},Ks.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}))},Ks.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Re(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=n.value;if(r==i&&!t.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===r||y&&/[\uf700-\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i=""),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var c=0,l=Math.min(i.length,r.length);c<l&&i.charCodeAt(c)==r.charCodeAt(c);)++c;return Zi(t,(function(){As(t,r.slice(c),i.length-c,null,e.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Ks.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ks.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},Ks.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,r=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=li(n,e),l=i.scroller.scrollTop;if(o&&!d){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&er(n,Qr)(n.doc,xr(o),H);var u,h=r.style.cssText,p=t.wrapper.style.cssText,f=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-f.top-5)+"px; left: "+(e.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",c&&(u=window.scrollY),i.input.focus(),c&&window.scrollTo(null,u),i.input.reset(),n.somethingSelected()||(r.value=t.prevInput=" "),t.contextMenuPending=v,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),s&&a>=9&&g(),_){we(e);var m=function(){pe(window,"mouseup",m),setTimeout(v,20)};de(window,"mouseup",m)}else setTimeout(v,50)}function g(){if(null!=r.selectionStart){var e=n.somethingSelected(),o=""+(e?r.value:"");r.value="",r.value=o,t.prevInput=e?"":"",r.selectionStart=1,r.selectionEnd=o.length,i.selForContextMenu=n.doc.sel}}function v(){if(t.contextMenuPending==v&&(t.contextMenuPending=!1,t.wrapper.style.cssText=p,r.style.cssText=h,s&&a<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=l),null!=r.selectionStart)){(!s||s&&a<9)&&g();var e=0,o=function(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&""==t.prevInput?er(n,so)(n):e++<10?i.detectingSelectAll=setTimeout(o,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(o,200)}}},Ks.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},Ks.prototype.setUneditable=function(){},Ks.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,i,r,o){e.defaults[n]=i,r&&(t[n]=o?function(e,t,n){n!=Es&&r(e,t,n)}:r)}e.defineOption=n,e.Init=Es,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,Ar(e)}),!0),n("indentUnit",2,Ar,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){Or(e),Fn(e),di(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter((function(e){for(var r=0;;){var o=e.text.indexOf(t,r);if(-1==o)break;r=o+t.length,n.push(et(i,o))}i++}));for(var r=n.length-1;r>=0;r--)fo(e.doc,t,n[r],et(n[r].line,n[r].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=Es&&e.refresh()})),n("specialCharPlaceholder",Qt,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!E),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){bs(e),mr(e)}),!0),n("keyMap","default",(function(e,t,n){var i=zo(t),r=n!=Es&&zo(n);r&&r.detach&&r.detach(e,i),i.attach&&i.attach(e,r||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Ts,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=pr(t,e.options.lineNumbers),mr(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?si(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return ji(e)}),!0),n("scrollbarStyle","native",(function(e){qi(e),ji(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=pr(e.options.gutters,t),mr(e)}),!0),n("firstLineNumber",1,mr,!0),n("lineNumberFormatter",(function(e){return e}),mr,!0),n("showCursorWhenSelecting",!1,gi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(xi(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("screenReaderLabel",null,(function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,_s),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,gi,!0),n("singleCursorHeightPerLine",!0,gi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Or,!0),n("addModeClass",!1,Or,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,Or,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}(xs),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var i=this.options,r=i[e];i[e]==n&&"mode"!=e||(i[e]=n,t.hasOwnProperty(e)&&er(this,t[e])(this,n,r),fe(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](zo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:tr((function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var i=0,r=n(t);i<e.length&&n(e[i])<=r;)i++;e.splice(i,0,t)}(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,di(this)})),removeOverlay:tr((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void di(this)}})),indentLine:tr((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Qe(this.doc,e)&&Is(this,e,t,n)})),indentSelection:tr((function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(Is(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&Oi(this));else{var o=r.from(),s=r.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var c=a;c<n;++c)Is(this,c,e);var l=this.doc.sel.ranges;0==o.ch&&t.length==l.length&&l[i].from().ch>0&&Yr(this.doc,i,new _r(o,l[i].to()),H)}}})),getTokenAt:function(e,t){return yt(this,e,t)},getLineTokens:function(e,t){return yt(this,et(e),t,!0)},getTokenTypeAt:function(e){e=at(this.doc,e);var t,n=ht(this,Ge(this.doc,e.line)),i=0,r=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var s=i+r>>1;if((s?n[2*s-1]:0)>=o)r=s;else{if(!(n[2*s+1]<o)){t=n[2*s+2];break}i=s+1}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!n.hasOwnProperty(t))return i;var r=n[t],o=this.getModeAt(e);if("string"==typeof o[t])r[o[t]]&&i.push(r[o[t]]);else if(o[t])for(var s=0;s<o[t].length;s++){var a=r[o[t][s]];a&&i.push(a)}else o.helperType&&r[o.helperType]?i.push(r[o.helperType]):r[o.name]&&i.push(r[o.name]);for(var c=0;c<r._global.length;c++){var l=r._global[c];l.pred(o,this)&&-1==F(i,l.val)&&i.push(l.val)}return i},getStateAfter:function(e,t){var n=this.doc;return pt(this,(e=st(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Wn(this,null==e?n.head:"object"==typeof e?at(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return Gn(this,at(this.doc,e),t||"page")},coordsChar:function(e,t){return Xn(this,(e=Vn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Vn(this,{top:e,left:0},t||"page").top,Je(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i,r=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,r=!0),i=Ge(this.doc,e)}else i=e;return qn(this,i,{top:0,left:0},t||"page",n||r).top+(r?this.doc.height-Kt(i):0)},defaultTextHeight:function(){return ii(this.display)},defaultCharWidth:function(){return ri(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var o,s,a=this.display,c=(e=Wn(this,at(this.doc,e))).bottom,l=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),a.sizer.appendChild(t),"over"==i)c=e.top;else if("above"==i||"near"==i){var u=Math.max(a.wrapper.clientHeight,this.doc.height),d=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>u)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=u&&(c=e.bottom),l+t.offsetWidth>d&&(l=d-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==r?(l=a.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?l=0:"middle"==r&&(l=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=l+"px"),n&&(null!=(s=Mi(o=this,{left:l,top:c,right:l+t.offsetWidth,bottom:c+t.offsetHeight})).scrollTop&&Ni(o,s.scrollTop),null!=s.scrollLeft&&$i(o,s.scrollLeft))},triggerOnKeyDown:tr(cs),triggerOnKeyPress:tr(us),triggerOnKeyUp:ls,triggerOnMouseDown:tr(fs),execCommand:function(e){if(Zo.hasOwnProperty(e))return Zo[e].call(null,this)},triggerElectric:tr((function(e){Rs(this,e)})),findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);for(var o=at(this.doc,e),s=0;s<t&&!(o=Ps(this.doc,o,r,n,i)).hitSide;++s);return o},moveH:tr((function(e,t){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?Ps(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()}),q)})),deleteH:tr((function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Yo(this,(function(n){var r=Ps(i,n.head,e,t,!1);return e<0?{from:r,to:n.head}:{from:n.head,to:r}}))})),findPosV:function(e,t,n,i){var r=1,o=i;t<0&&(r=-1,t=-t);for(var s=at(this.doc,e),a=0;a<t;++a){var c=Wn(this,s,"div");if(null==o?o=c.left:c.left=o,(s=$s(this,c,r,n)).hitSide)break}return s},moveV:tr((function(e,t){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(s){if(o)return e<0?s.from():s.to();var a=Wn(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),r.push(a.left);var c=$s(n,a,e,t);return"page"==t&&s==i.sel.primary()&&Ai(n,Gn(n,c,"div").top-a.top),c}),q),r.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=r[s]})),findWordAt:function(e){var t=Ge(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var r=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=t.length||!n?++i:--n;for(var o=t.charAt(n),s=ee(o,r)?function(e){return ee(e,r)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ee(e)};n>0&&s(t.charAt(n-1));)--n;for(;i<t.length&&s(t.charAt(i));)++i}return new _r(et(e.line,n),et(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?L(this.display.cursorDiv,"CodeMirror-overwrite"):C(this.display.cursorDiv,"CodeMirror-overwrite"),fe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==R()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:tr((function(e,t){Ri(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Cn(this)-this.display.barHeight,width:e.scrollWidth-Cn(this)-this.display.barWidth,clientHeight:kn(this),clientWidth:In(this)}},scrollIntoView:tr((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:et(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Li(e),e.curOp.scrollToPos=t}(this,e):Di(this,e.from,e.to,e.margin)})),setSize:tr((function(e,t){var n=this,i=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&Bn(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){hi(n,r,"widget");break}++r})),this.curOp.forceUpdate=!0,fe(this,"refresh",this)})),operation:function(e){return Zi(this,e)},startOperation:function(){return Gi(this)},endOperation:function(){return Wi(this)},refresh:tr((function(){var e=this.display.cachedTextHeight;di(this),this.curOp.forceUpdate=!0,Fn(this),Ri(this,this.doc.scrollLeft,this.doc.scrollTop),lr(this.display),(null==e||Math.abs(e-ii(this.display))>.5||this.options.lineWrapping)&&ci(this),fe(this,"refresh",this)})),swapDoc:tr((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Nr(this,e),Fn(this),this.display.input.reset(),Ri(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,cn(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ye(e),e.registerHelper=function(t,i,r){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][i]=r},e.registerGlobalHelper=function(t,i,r,o){e.registerHelper(t,i,o),n[t]._global.push({pred:r,val:o})}}(xs);var qs="iter insert remove copy getEditor constructor".split(" ");for(var Vs in Ao.prototype)Ao.prototype.hasOwnProperty(Vs)&&F(qs,Vs)<0&&(xs.prototype[Vs]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ao.prototype[Vs]));return ye(Ao),xs.inputStyles={textarea:Ks,contenteditable:Us},xs.defineMode=function(e){xs.defaults.mode||"null"==e||(xs.defaults.mode=e),$e.apply(this,arguments)},xs.defineMIME=function(e,t){Pe[e]=t},xs.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),xs.defineMIME("text/plain","null"),xs.defineExtension=function(e,t){xs.prototype[e]=t},xs.defineDocExtension=function(e,t){Ao.prototype[e]=t},xs.fromTextArea=function(e,t){if((t=t?$(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=R();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=a.getValue()}var r;if(e.form&&(de(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var o=e.form;r=o.submit;try{var s=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=s}}catch(e){}}t.finishInit=function(n){n.save=i,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,i(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(pe(e.form,"submit",i),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=r))}},e.style.display="none";var a=xs((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return a},function(e){e.off=pe,e.on=de,e.wheelEventPixels=Er,e.Doc=Ao,e.splitLines=Oe,e.countColumn=U,e.findColumn=V,e.isWordChar=Z,e.Pass=j,e.signal=fe,e.Line=Gt,e.changeEnd=Cr,e.scrollbarModel=Ki,e.Pos=et,e.cmpPos=tt,e.modes=Ne,e.mimeModes=Pe,e.resolveMode=Ue,e.getMode=Be,e.modeExtensions=Fe,e.extendMode=je,e.copyState=He,e.startState=qe,e.innerMode=Ke,e.commands=Zo,e.keyMap=jo,e.keyName=Wo,e.isModifierKey=Vo,e.lookupKey=qo,e.normalizeKeyMap=Ko,e.StringStream=Ve,e.SharedTextMarker=Co,e.TextMarker=To,e.LineWidget=So,e.e_preventDefault=be,e.e_stopPropagation=Ee,e.e_stop=we,e.addClass=L,e.contains=O,e.rmClass=C,e.keyNames=$o}(xs),xs.version="5.59.3",xs}},35929:e=>{e.exports=function(e){"use strict";var t=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?]))/i;e.defineMode("gfm",(function(n,i){var r=0,o={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,n){if(n.combineTokens=null,n.codeBlock)return e.match(/^```+/)?(n.codeBlock=!1,null):(e.skipToEnd(),null);if(e.sol()&&(n.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),n.codeBlock=!0,null;if("`"===e.peek()){e.next();var o=e.pos;e.eatWhile("`");var s=1+e.pos-o;return n.code?s===r&&(n.code=!1):(r=s,n.code=!0),null}if(n.code)return e.next(),null;if(e.eatSpace())return n.ateSpace=!0,null;if((e.sol()||n.ateSpace)&&(n.ateSpace=!1,!1!==i.gitHubSpice)){if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return n.combineTokens=!0,"link";if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return n.combineTokens=!0,"link"}return e.match(t)&&"]("!=e.string.slice(e.start-2,e.start)&&(0==e.start||/\W/.test(e.string.charAt(e.start-1)))?(n.combineTokens=!0,"link"):(e.next(),null)},blankLine:function(e){return e.code=!1,null}},s={taskLists:!0,strikethrough:!0,emoji:!0};for(var a in i)s[a]=i[a];return s.name="markdown",e.overlayMode(e.getMode(n,s),o)}),"markdown"),e.defineMIME("text/x-gfm","gfm")}},81742:e=>{e.exports=function(e){"use strict";e.defineMode("markdown",(function(t,n){var i=e.getMode(t,"text/html"),r="null"==i.name;void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1),void 0===n.emoji&&(n.emoji=!1),void 0===n.fencedCodeBlockHighlighting&&(n.fencedCodeBlockHighlighting=!0),void 0===n.fencedCodeBlockDefaultMode&&(n.fencedCodeBlockDefaultMode="text/plain"),void 0===n.xml&&(n.xml=!0),void 0===n.tokenTypeOverrides&&(n.tokenTypeOverrides={});var o={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var s in o)o.hasOwnProperty(s)&&n.tokenTypeOverrides[s]&&(o[s]=n.tokenTypeOverrides[s]);var a=/^([*\-_])(?:\s*\1){2,}\s*$/,c=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,l=/^\[(x| )\](?=\s)/i,u=n.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,d=/^ {0,3}(?:\={1,}|-{2,})\s*$/,h=/^[^#!\[\]*_\\<>` "'(~:]+/,p=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,f=/^\s*\[[^\]]+?\]:.*$/,m=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function g(e,t,n){return t.f=t.inline=n,n(e,t)}function v(e,t,n){return t.f=t.block=n,n(e,t)}function y(t){if(t.linkTitle=!1,t.linkHref=!1,t.linkText=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,t.indentedCode=!1,t.f==E){var n=r;if(!n){var o=e.innerMode(i,t.htmlState);n="xml"==o.mode.name&&null===o.state.tagStart&&!o.state.context&&o.state.tokenize.isInText}n&&(t.f=T,t.block=b,t.htmlState=null)}return t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.prevLine=t.thisLine,t.thisLine={stream:null},null}function b(i,r){var s,h=i.column()===r.indentation,m=!(s=r.prevLine.stream)||!/\S/.test(s.string),v=r.indentedCode,y=r.prevLine.hr,b=!1!==r.list,E=(r.listStack[r.listStack.length-1]||0)+3;r.indentedCode=!1;var _=r.indentation;if(null===r.indentationDiff&&(r.indentationDiff=r.indentation,b)){for(r.list=null;_<r.listStack[r.listStack.length-1];)r.listStack.pop(),r.listStack.length?r.indentation=r.listStack[r.listStack.length-1]:r.list=!1;!1!==r.list&&(r.indentationDiff=_-r.listStack[r.listStack.length-1])}var T=!(m||y||r.prevLine.header||b&&v||r.prevLine.fencedCodeEnd),x=(!1===r.list||y||m)&&r.indentation<=E&&i.match(a),C=null;if(r.indentationDiff>=4&&(v||r.prevLine.fencedCodeEnd||r.prevLine.header||m))return i.skipToEnd(),r.indentedCode=!0,o.code;if(i.eatSpace())return null;if(h&&r.indentation<=E&&(C=i.match(u))&&C[1].length<=6)return r.quote=0,r.header=C[1].length,r.thisLine.header=!0,n.highlightFormatting&&(r.formatting="header"),r.f=r.inline,w(r);if(r.indentation<=E&&i.eat(">"))return r.quote=h?1:r.quote+1,n.highlightFormatting&&(r.formatting="quote"),i.eatSpace(),w(r);if(!x&&!r.setext&&h&&r.indentation<=E&&(C=i.match(c))){var I=C[1]?"ol":"ul";return r.indentation=_+i.current().length,r.list=!0,r.quote=0,r.listStack.push(r.indentation),r.em=!1,r.strong=!1,r.code=!1,r.strikethrough=!1,n.taskLists&&i.match(l,!1)&&(r.taskList=!0),r.f=r.inline,n.highlightFormatting&&(r.formatting=["list","list-"+I]),w(r)}return h&&r.indentation<=E&&(C=i.match(p,!0))?(r.quote=0,r.fencedEndRE=new RegExp(C[1]+"+ *$"),r.localMode=n.fencedCodeBlockHighlighting&&function(n){if(e.findModeByName){var i=e.findModeByName(n);i&&(n=i.mime||i.mimes[0])}var r=e.getMode(t,n);return"null"==r.name?null:r}(C[2]||n.fencedCodeBlockDefaultMode),r.localMode&&(r.localState=e.startState(r.localMode)),r.f=r.block=S,n.highlightFormatting&&(r.formatting="code-block"),r.code=-1,w(r)):r.setext||!(T&&b||r.quote||!1!==r.list||r.code||x||f.test(i.string))&&(C=i.lookAhead(1))&&(C=C.match(d))?(r.setext?(r.header=r.setext,r.setext=0,i.skipToEnd(),n.highlightFormatting&&(r.formatting="header")):(r.header="="==C[0].charAt(0)?1:2,r.setext=r.header),r.thisLine.header=!0,r.f=r.inline,w(r)):x?(i.skipToEnd(),r.hr=!0,r.thisLine.hr=!0,o.hr):"["===i.peek()?g(i,r,k):g(i,r,r.inline)}function E(t,n){var o=i.token(t,n.htmlState);if(!r){var s=e.innerMode(i,n.htmlState);("xml"==s.mode.name&&null===s.state.tagStart&&!s.state.context&&s.state.tokenize.isInText||n.md_inside&&t.current().indexOf(">")>-1)&&(n.f=T,n.block=b,n.htmlState=null)}return o}function S(e,t){var i,r=t.listStack[t.listStack.length-1]||0,s=t.indentation<r,a=r+3;return t.fencedEndRE&&t.indentation<=a&&(s||e.match(t.fencedEndRE))?(n.highlightFormatting&&(t.formatting="code-block"),s||(i=w(t)),t.localMode=t.localState=null,t.block=b,t.f=T,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,s?v(e,t,t.block):i):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),o.code)}function w(e){var t=[];if(e.formatting){t.push(o.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var i=0;i<e.formatting.length;i++)t.push(o.formatting+"-"+e.formatting[i]),"header"===e.formatting[i]&&t.push(o.formatting+"-"+e.formatting[i]+"-"+e.header),"quote"===e.formatting[i]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(o.formatting+"-"+e.formatting[i]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(o.linkHref,"url"):(e.strong&&t.push(o.strong),e.em&&t.push(o.em),e.strikethrough&&t.push(o.strikethrough),e.emoji&&t.push(o.emoji),e.linkText&&t.push(o.linkText),e.code&&t.push(o.code),e.image&&t.push(o.image),e.imageAltText&&t.push(o.imageAltText,"link"),e.imageMarker&&t.push(o.imageMarker)),e.header&&t.push(o.header,o.header+"-"+e.header),e.quote&&(t.push(o.quote),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(o.quote+"-"+e.quote):t.push(o.quote+"-"+n.maxBlockquoteDepth)),!1!==e.list){var r=(e.listStack.length-1)%3;r?1===r?t.push(o.list2):t.push(o.list3):t.push(o.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function _(e,t){if(e.match(h,!0))return w(t)}function T(t,r){var s=r.text(t,r);if(void 0!==s)return s;if(r.list)return r.list=null,w(r);if(r.taskList)return" "===t.match(l,!0)[1]?r.taskOpen=!0:r.taskClosed=!0,n.highlightFormatting&&(r.formatting="task"),r.taskList=!1,w(r);if(r.taskOpen=!1,r.taskClosed=!1,r.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(r.formatting="header"),w(r);var a=t.next();if(r.linkTitle){r.linkTitle=!1;var c=a;"("===a&&(c=")");var u="^\\s*(?:[^"+(c=(c+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+c;if(t.match(new RegExp(u),!0))return o.linkHref}if("`"===a){var d=r.formatting;n.highlightFormatting&&(r.formatting="code"),t.eatWhile("`");var h=t.current().length;if(0!=r.code||r.quote&&1!=h){if(h==r.code){var p=w(r);return r.code=0,p}return r.formatting=d,w(r)}return r.code=h,w(r)}if(r.code)return w(r);if("\\"===a&&(t.next(),n.highlightFormatting)){var f=w(r),g=o.formatting+"-escape";return f?f+" "+g:g}if("!"===a&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return r.imageMarker=!0,r.image=!0,n.highlightFormatting&&(r.formatting="image"),w(r);if("["===a&&r.imageMarker&&t.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return r.imageMarker=!1,r.imageAltText=!0,n.highlightFormatting&&(r.formatting="image"),w(r);if("]"===a&&r.imageAltText){n.highlightFormatting&&(r.formatting="image");f=w(r);return r.imageAltText=!1,r.image=!1,r.inline=r.f=C,f}if("["===a&&!r.image)return r.linkText&&t.match(/^.*?\]/)||(r.linkText=!0,n.highlightFormatting&&(r.formatting="link")),w(r);if("]"===a&&r.linkText){n.highlightFormatting&&(r.formatting="link");f=w(r);return r.linkText=!1,r.inline=r.f=t.match(/\(.*?\)| ?\[.*?\]/,!1)?C:T,f}if("<"===a&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return r.f=r.inline=x,n.highlightFormatting&&(r.formatting="link"),(f=w(r))?f+=" ":f="",f+o.linkInline;if("<"===a&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return r.f=r.inline=x,n.highlightFormatting&&(r.formatting="link"),(f=w(r))?f+=" ":f="",f+o.linkEmail;if(n.xml&&"<"===a&&t.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var y=t.string.indexOf(">",t.pos);if(-1!=y){var b=t.string.substring(t.start,y);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(b)&&(r.md_inside=!0)}return t.backUp(1),r.htmlState=e.startState(i),v(t,r,E)}if(n.xml&&"<"===a&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";if("*"===a||"_"===a){for(var S=1,_=1==t.pos?" ":t.string.charAt(t.pos-2);S<3&&t.eat(a);)S++;var I=t.peek()||" ",k=!/\s/.test(I)&&(!m.test(I)||/\s/.test(_)||m.test(_)),M=!/\s/.test(_)&&(!m.test(_)||/\s/.test(I)||m.test(I)),A=null,O=null;if(S%2&&(r.em||!k||"*"!==a&&M&&!m.test(_)?r.em!=a||!M||"*"!==a&&k&&!m.test(I)||(A=!1):A=!0),S>1&&(r.strong||!k||"*"!==a&&M&&!m.test(_)?r.strong!=a||!M||"*"!==a&&k&&!m.test(I)||(O=!1):O=!0),null!=O||null!=A)return n.highlightFormatting&&(r.formatting=null==A?"strong":null==O?"em":"strong em"),!0===A&&(r.em=a),!0===O&&(r.strong=a),p=w(r),!1===A&&(r.em=!1),!1===O&&(r.strong=!1),p}else if(" "===a&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return w(r);t.backUp(1)}if(n.strikethrough)if("~"===a&&t.eatWhile(a)){if(r.strikethrough)return n.highlightFormatting&&(r.formatting="strikethrough"),p=w(r),r.strikethrough=!1,p;if(t.match(/^[^\s]/,!1))return r.strikethrough=!0,n.highlightFormatting&&(r.formatting="strikethrough"),w(r)}else if(" "===a&&t.match("~~",!0)){if(" "===t.peek())return w(r);t.backUp(2)}if(n.emoji&&":"===a&&t.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){r.emoji=!0,n.highlightFormatting&&(r.formatting="emoji");var R=w(r);return r.emoji=!1,R}return" "===a&&(t.match(/^ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),w(r)}function x(e,t){if(">"===e.next()){t.f=t.inline=T,n.highlightFormatting&&(t.formatting="link");var i=w(t);return i?i+=" ":i="",i+o.linkInline}return e.match(/^[^>]+/,!0),o.linkInline}function C(e,t){if(e.eatSpace())return null;var i,r=e.next();return"("===r||"["===r?(t.f=t.inline=(i="("===r?")":"]",function(e,t){if(e.next()===i){t.f=t.inline=T,n.highlightFormatting&&(t.formatting="link-string");var r=w(t);return t.linkHref=!1,r}return e.match(I[i]),t.linkHref=!0,w(t)}),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,w(t)):"error"}var I={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function k(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=M,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,w(t)):g(e,t,T)}function M(e,t){if(e.match("]:",!0)){t.f=t.inline=A,n.highlightFormatting&&(t.formatting="link");var i=w(t);return t.linkText=!1,i}return e.match(/^([^\]\\]|\\.)+/,!0),o.linkText}function A(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),t.f=t.inline=T,o.linkHref+" url")}var O={startState:function(){return{f:b,prevLine:{stream:null},thisLine:{stream:null},block:b,htmlState:null,indentation:0,inline:T,text:_,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(i,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkText:t.linkText,linkTitle:t.linkTitle,linkHref:t.linkHref,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,emoji:t.emoji,header:t.header,setext:t.setext,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedEndRE:t.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return y(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=E)){var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentation=n,t.indentationDiff=null,n>0)return null}}return t.f(e,t)},innerMode:function(e){return e.block==E?{state:e.htmlState,mode:i}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:O}},indent:function(t,n,r){return t.block==E&&i.indent?i.indent(t.htmlState,n,r):t.localState&&t.localMode.indent?t.localMode.indent(t.localState,n,r):e.Pass},blankLine:y,getType:w,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return O}),"xml"),e.defineMIME("text/markdown","markdown"),e.defineMIME("text/x-markdown","markdown")}},54324:e=>{e.exports=function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",(function(i,r){var o,s,a=i.indentUnit,c={},l=r.htmlMode?t:n;for(var u in l)c[u]=l[u];for(var u in r)c[u]=r[u];function d(e,t){function n(n){return t.tokenize=n,n(e,t)}var i=e.next();return"<"==i?e.eat("!")?e.eat("[")?e.match("CDATA[")?n(p("atom","]]>")):null:e.match("--")?n(p("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(f(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=p("meta","?>"),"meta"):(o=e.eat("/")?"closeTag":"openTag",t.tokenize=h,"tag bracket"):"&"==i?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function h(e,t){var n,i,r=e.next();if(">"==r||"/"==r&&e.eat(">"))return t.tokenize=d,o=">"==r?"endTag":"selfcloseTag","tag bracket";if("="==r)return o="equals",null;if("<"==r){t.tokenize=d,t.state=y,t.tagName=t.tagStart=null;var s=t.tokenize(e,t);return s?s+" tag error":"tag error"}return/[\'\"]/.test(r)?(t.tokenize=(n=r,i=function(e,t){for(;!e.eol();)if(e.next()==n){t.tokenize=h;break}return"string"},i.isInAttribute=!0,i),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function p(e,t){return function(n,i){for(;!n.eol();){if(n.match(t)){i.tokenize=d;break}n.next()}return e}}function f(e){return function(t,n){for(var i;null!=(i=t.next());){if("<"==i)return n.tokenize=f(e+1),n.tokenize(t,n);if(">"==i){if(1==e){n.tokenize=d;break}return n.tokenize=f(e-1),n.tokenize(t,n)}}return"meta"}}function m(e,t,n){this.prev=e.context,this.tagName=t||"",this.indent=e.indented,this.startOfLine=n,(c.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function g(e){e.context&&(e.context=e.context.prev)}function v(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!c.contextGrabbers.hasOwnProperty(n)||!c.contextGrabbers[n].hasOwnProperty(t))return;g(e)}}function y(e,t,n){return"openTag"==e?(n.tagStart=t.column(),b):"closeTag"==e?E:y}function b(e,t,n){return"word"==e?(n.tagName=t.current(),s="tag",_):c.allowMissingTagName&&"endTag"==e?(s="tag bracket",_(e,0,n)):(s="error",b)}function E(e,t,n){if("word"==e){var i=t.current();return n.context&&n.context.tagName!=i&&c.implicitlyClosed.hasOwnProperty(n.context.tagName)&&g(n),n.context&&n.context.tagName==i||!1===c.matchClosing?(s="tag",S):(s="tag error",w)}return c.allowMissingTagName&&"endTag"==e?(s="tag bracket",S(e,0,n)):(s="error",w)}function S(e,t,n){return"endTag"!=e?(s="error",S):(g(n),y)}function w(e,t,n){return s="error",S(e,0,n)}function _(e,t,n){if("word"==e)return s="attribute",T;if("endTag"==e||"selfcloseTag"==e){var i=n.tagName,r=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||c.autoSelfClosers.hasOwnProperty(i)?v(n,i):(v(n,i),n.context=new m(n,i,r==n.indented)),y}return s="error",_}function T(e,t,n){return"equals"==e?x:(c.allowMissing||(s="error"),_(e,0,n))}function x(e,t,n){return"string"==e?C:"word"==e&&c.allowUnquoted?(s="string",_):(s="error",_(e,0,n))}function C(e,t,n){return"string"==e?C:_(e,0,n)}return d.isInText=!0,{startState:function(e){var t={tokenize:d,state:y,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;o=null;var n=t.tokenize(e,t);return(n||o)&&"comment"!=n&&(s=null,t.state=t.state(o||n,e,t),s&&(n="error"==s?n+" error":s)),n},indent:function(t,n,i){var r=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+a;if(r&&r.noIndent)return e.Pass;if(t.tokenize!=h&&t.tokenize!=d)return i?i.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==c.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+a*(c.multilineTagIndentFactor||1);if(c.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var o=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(o&&o[1])for(;r;){if(r.tagName==o[2]){r=r.prev;break}if(!c.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(o)for(;r;){var s=c.contextGrabbers[r.tagName];if(!s||!s.hasOwnProperty(o[2]))break;r=r.prev}for(;r&&r.prev&&!r.startOfLine;)r=r.prev;return r?r.indent+a:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:c.htmlMode?"html":"xml",helperType:c.htmlMode?"html":"xml",skipAttribute:function(e){e.state==x&&(e.state=_)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],n=e.context;n;n=n.prev)t.push(n.tagName);return t.reverse()}}})),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}},39242:e=>{e.exports=function(e){e.defineMode("yaml-frontmatter",(function(t,n){var i=e.getMode(t,"yaml"),r=e.getMode(t,n&&n.base||"gfm");function o(e){return 2==e.state?r:i}return{startState:function(){return{state:0,inner:e.startState(i)}},copyState:function(t){return{state:t.state,inner:e.copyState(o(t),t.inner)}},token:function(t,n){if(0==n.state)return t.match("---",!1)?(n.state=1,i.token(t,n.inner)):(n.state=2,n.inner=e.startState(r),r.token(t,n.inner));if(1==n.state){var o=t.sol()&&t.match(/(---|\.\.\.)/,!1),s=i.token(t,n.inner);return o&&(n.state=2,n.inner=e.startState(r)),s}return r.token(t,n.inner)},innerMode:function(e){return{mode:o(e),state:e.inner}},blankLine:function(e){var t=o(e);if(t.blankLine)return t.blankLine(e.inner)}}}))}},54610:e=>{e.exports=function(e){"use strict";e.defineMode("yaml",(function(){var e=new RegExp("\\b(("+["true","false","on","off","yes","no"].join(")|(")+"))$","i");return{token:function(t,n){var i=t.peek(),r=n.escaped;if(n.escaped=!1,"#"==i&&(0==t.pos||/\s/.test(t.string.charAt(t.pos-1))))return t.skipToEnd(),"comment";if(t.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(n.literal&&t.indentation()>n.keyCol)return t.skipToEnd(),"string";if(n.literal&&(n.literal=!1),t.sol()){if(n.keyCol=0,n.pair=!1,n.pairStart=!1,t.match("---"))return"def";if(t.match("..."))return"def";if(t.match(/\s*-\s+/))return"meta"}if(t.match(/^(\{|\}|\[|\])/))return"{"==i?n.inlinePairs++:"}"==i?n.inlinePairs--:"["==i?n.inlineList++:n.inlineList--,"meta";if(n.inlineList>0&&!r&&","==i)return t.next(),"meta";if(n.inlinePairs>0&&!r&&","==i)return n.keyCol=0,n.pair=!1,n.pairStart=!1,t.next(),"meta";if(n.pairStart){if(t.match(/^\s*(\||\>)\s*/))return n.literal=!0,"meta";if(t.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(0==n.inlinePairs&&t.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(n.inlinePairs>0&&t.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(t.match(e))return"keyword"}return!n.pair&&t.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(n.pair=!0,n.keyCol=t.indentation(),"atom"):n.pair&&t.match(/^:\s*/)?(n.pairStart=!0,"meta"):(n.pairStart=!1,n.escaped="\\"==i,t.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},lineComment:"#",fold:"indent"}})),e.defineMIME("text/x-yaml","yaml"),e.defineMIME("text/yaml","yaml")}},56851:(e,t)=>{"use strict";t.parse=function(e){for(var t,n=[],i=String(e||""),r=i.indexOf(","),o=0,s=!1;!s;)-1===r&&(r=i.length,s=!0),!(t=i.slice(o,r).trim())&&s||n.push(t),o=r+1,r=i.indexOf(",",o);return n},t.stringify=function(e,t){var n=t||{},i=!1===n.padLeft?"":" ",r=n.padRight?" ":"";return""===e[e.length-1]&&(e=e.concat("")),e.join(r+","+i).trim()}},37811:(e,t)=>{"use strict";var n=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,i=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,r=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,o=/\\([\u000b\u0020-\u00ff])/g,s=/([\\"])/g,a=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;function c(e){var t=String(e);if(r.test(t))return t;if(t.length>0&&!i.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace(s,"\\$1")+'"'}function l(e){this.parameters=Object.create(null),this.type=e}t.format=function(e){if(!e||"object"!=typeof e)throw new TypeError("argument obj is required");var t=e.parameters,n=e.type;if(!n||!a.test(n))throw new TypeError("invalid type");var i=n;if(t&&"object"==typeof t)for(var o,s=Object.keys(t).sort(),l=0;l<s.length;l++){if(o=s[l],!r.test(o))throw new TypeError("invalid parameter name");i+="; "+o+"="+c(t[o])}return i},t.parse=function(e){if(!e)throw new TypeError("argument string is required");var t="object"==typeof e?function(e){var t;if("function"==typeof e.getHeader?t=e.getHeader("content-type"):"object"==typeof e.headers&&(t=e.headers&&e.headers["content-type"]),"string"!=typeof t)throw new TypeError("content-type header is missing from object");return t}(e):e;if("string"!=typeof t)throw new TypeError("argument string is required to be a string");var i=t.indexOf(";"),r=-1!==i?t.substr(0,i).trim():t.trim();if(!a.test(r))throw new TypeError("invalid media type");var s=new l(r.toLowerCase());if(-1!==i){var c,u,d;for(n.lastIndex=i;u=n.exec(t);){if(u.index!==i)throw new TypeError("invalid parameter format");i+=u[0].length,c=u[1].toLowerCase(),'"'===(d=u[2])[0]&&(d=d.substr(1,d.length-2).replace(o,"$1")),s.parameters[c]=d}if(i!==t.length)throw new TypeError("invalid parameter format")}return s}},76393:(e,t,n)=>{var i=n(48764).Buffer,r=n(86266),o=n(13550);e.exports=function(e){return new a(e)};var s={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(e){this.curveType=s[e],this.curveType||(this.curveType={name:e}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function c(e,t,n){Array.isArray(e)||(e=e.toArray());var r=new i(e);if(n&&r.length<n){var o=new i(n-r.length);o.fill(0),r=i.concat([o,r])}return t?r.toString(t):r}s.p224=s.secp224r1,s.p256=s.secp256r1=s.prime256v1,s.p192=s.secp192r1=s.prime192v1,s.p384=s.secp384r1,s.p521=s.secp521r1,a.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},a.prototype.computeSecret=function(e,t,n){return t=t||"utf8",i.isBuffer(e)||(e=new i(e,t)),c(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},a.prototype.getPublicKey=function(e,t){var n=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(n[n.length-1]%2?n[0]=7:n[0]=6),c(n,e)},a.prototype.getPrivateKey=function(e){return c(this.keys.getPrivate(),e)},a.prototype.setPublicKey=function(e,t){return t=t||"utf8",i.isBuffer(e)||(e=new i(e,t)),this.keys._importPublic(e),this},a.prototype.setPrivateKey=function(e,t){t=t||"utf8",i.isBuffer(e)||(e=new i(e,t));var n=new o(e);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this}},23482:(e,t,n)=>{"use strict";var i=n(35717),r=n(62318),o=n(79785),s=n(89072),a=n(71027);function c(e){a.call(this,"digest"),this._hash=e}i(c,a),c.prototype._update=function(e){this._hash.update(e)},c.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new r:"rmd160"===e||"ripemd160"===e?new o:new c(s(e))}},78028:(e,t,n)=>{var i=n(62318);e.exports=function(e){return(new i).update(e).digest()}},58355:(e,t,n)=>{"use strict";var i=n(35717),r=n(51031),o=n(71027),s=n(89509).Buffer,a=n(78028),c=n(79785),l=n(89072),u=s.alloc(128);function d(e,t){o.call(this,"digest"),"string"==typeof t&&(t=s.from(t));var n="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=t,t.length>n?t=("rmd160"===e?new c:l(e)).update(t).digest():t.length<n&&(t=s.concat([t,u],n));for(var i=this._ipad=s.allocUnsafe(n),r=this._opad=s.allocUnsafe(n),a=0;a<n;a++)i[a]=54^t[a],r[a]=92^t[a];this._hash="rmd160"===e?new c:l(e),this._hash.update(i)}i(d,o),d.prototype._update=function(e){this._hash.update(e)},d.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new c:l(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new d("rmd160",t):"md5"===e?new r(a,t):new d(e,t)}},51031:(e,t,n)=>{"use strict";var i=n(35717),r=n(89509).Buffer,o=n(71027),s=r.alloc(128),a=64;function c(e,t){o.call(this,"digest"),"string"==typeof t&&(t=r.from(t)),this._alg=e,this._key=t,t.length>a?t=e(t):t.length<a&&(t=r.concat([t,s],a));for(var n=this._ipad=r.allocUnsafe(a),i=this._opad=r.allocUnsafe(a),c=0;c<a;c++)n[c]=54^t[c],i[c]=92^t[c];this._hash=[n]}i(c,o),c.prototype._update=function(e){this._hash.push(e)},c.prototype._final=function(){var e=this._alg(r.concat(this._hash));return this._alg(r.concat([this._opad,e]))},e.exports=c},55835:(e,t,n)=>{"use strict";n(61798),n(23482),n(58355);var i=n(56042),r=Object.keys(i),o=(["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r),n(25632));o.pbkdf2,o.pbkdf2Sync;var s=n(53614);s.Cipher,s.createCipher,s.Cipheriv,s.createCipheriv,s.Decipher,s.createDecipher,s.Decipheriv,s.createDecipheriv,s.getCiphers,s.listCiphers;var a=n(62607);a.DiffieHellmanGroup,a.createDiffieHellmanGroup,a.getDiffieHellman,a.createDiffieHellman,a.DiffieHellman;var c=n(64743);c.createSign,c.Sign,c.createVerify,c.Verify,n(76393);var l=n(7900);l.publicEncrypt,l.privateEncrypt,l.publicDecrypt,l.privateDecrypt;var u=n(77963);u.randomFill,u.randomFillSync},27484:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,n="millisecond",i="second",r="minute",o="hour",s="day",a="week",c="month",l="quarter",u="year",d="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},v={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+g(i,2,"0")+":"+g(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(i,c),o=n-r<0,s=t.clone().add(i+(o?-1:1),c);return+(-(i+(n-r)/(o?r-s:s-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:a,d:s,D:d,h:o,m:r,s:i,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",b={};b[y]=m;var E=function(e){return e instanceof T},S=function(e,t,n){var i;if(!e)return y;if("string"==typeof e)b[e]&&(i=e),t&&(b[e]=t,i=e);else{var r=e.name;b[r]=e,i=r}return!n&&i&&(y=i),i||!n&&y},w=function(e,t){if(E(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new T(n)},_=v;_.l=S,_.i=E,_.w=function(e,t){return w(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function m(e){this.$L=S(e.locale,null,!0),this.parse(e)}var g=m.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(_.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(p);if(i){var r=i[2]-1||0,o=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return _},g.isValid=function(){return!(this.$d.toString()===h)},g.isSame=function(e,t){var n=w(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return w(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<w(e)},g.$g=function(e,t,n){return _.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,l=!!_.u(t)||t,h=_.p(e),p=function(e,t){var i=_.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return l?i:i.endOf(s)},f=function(e,t){return _.w(n.toDate()[e].apply(n.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(h){case u:return l?p(1,0):p(31,11);case c:return l?p(1,g):p(0,g+1);case a:var b=this.$locale().weekStart||0,E=(m<b?m+7:m)-b;return p(l?v-E:v+(6-E),g);case s:case d:return f(y+"Hours",0);case o:return f(y+"Minutes",1);case r:return f(y+"Seconds",2);case i:return f(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var a,l=_.p(e),h="set"+(this.$u?"UTC":""),p=(a={},a[s]=h+"Date",a[d]=h+"Date",a[c]=h+"Month",a[u]=h+"FullYear",a[o]=h+"Hours",a[r]=h+"Minutes",a[i]=h+"Seconds",a[n]=h+"Milliseconds",a)[l],f=l===s?this.$D+(t-this.$W):t;if(l===c||l===u){var m=this.clone().set(d,1);m.$d[p](f),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[_.p(e)]()},g.add=function(n,l){var d,h=this;n=Number(n);var p=_.p(l),f=function(e){var t=w(h);return _.w(t.date(t.date()+Math.round(e*n)),h)};if(p===c)return this.set(c,this.$M+n);if(p===u)return this.set(u,this.$y+n);if(p===s)return f(1);if(p===a)return f(7);var m=(d={},d[r]=e,d[o]=t,d[i]=1e3,d)[p]||1,g=this.$d.getTime()+n*m;return _.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var i=e||"YYYY-MM-DDTHH:mm:ssZ",r=_.z(this),o=this.$H,s=this.$m,a=this.$M,c=n.weekdays,l=n.months,u=function(e,n,r,o){return e&&(e[n]||e(t,i))||r[n].substr(0,o)},d=function(e){return _.s(o%12||12,e,"0")},p=n.meridiem||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:_.s(a+1,2,"0"),MMM:u(n.monthsShort,a,l,3),MMMM:u(l,a),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,c,2),ddd:u(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(o),HH:_.s(o,2,"0"),h:d(1),hh:d(2),a:p(o,s,!0),A:p(o,s,!1),m:String(s),mm:_.s(s,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:r};return i.replace(f,(function(e,t){return t||m[e]||r.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,d,h){var p,f=_.p(d),m=w(n),g=(m.utcOffset()-this.utcOffset())*e,v=this-m,y=_.m(this,m);return y=(p={},p[u]=y/12,p[c]=y,p[l]=y/3,p[a]=(v-g)/6048e5,p[s]=(v-g)/864e5,p[o]=v/t,p[r]=v/e,p[i]=v/1e3,p)[f]||v,h?y:_.a(y)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return b[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=S(e,t,!0);return i&&(n.$L=i),n},g.clone=function(){return _.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},m}(),x=T.prototype;return w.prototype=x,[["$ms",n],["$s",i],["$m",r],["$H",o],["$W",s],["$M",c],["$y",u],["$D",d]].forEach((function(e){x[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),w.extend=function(e,t){return e.$i||(e(t,T,w),e.$i=!0),w},w.locale=S,w.isDayjs=E,w.unix=function(e){return w(1e3*e)},w.en=b[y],w.Ls=b,w.p={},w}()},25054:function(e){e.exports=function(){"use strict";return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")}}()},56176:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,n,i){var r=n.prototype,o=r.format;i.en.formats=e,r.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var n=this.$locale().formats,i=function(t,n){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,i,r){var o=r&&r.toUpperCase();return i||n[r]||e[r]||n[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))}(t,void 0===n?{}:n);return o.call(this,i)}}}()},15251:(e,t,n)=>{"use strict";t.utils=n(11278),t.Cipher=n(55756),t.DES=n(70778),t.CBC=n(39051),t.EDE=n(50651)},39051:(e,t,n)=>{"use strict";var i=n(79746),r=n(35717),o={};function s(e){i.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}t.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}r(t,e);for(var n=Object.keys(o),i=0;i<n.length;i++){var s=n[i];t.prototype[s]=o[s]}return t.create=function(e){return new t(e)},t},o._cbcInit=function(){var e=new s(this.options.iv);this._cbcState=e},o._update=function(e,t,n,i){var r=this._cbcState,o=this.constructor.super_.prototype,s=r.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)s[a]^=e[t+a];for(o._update.call(this,s,0,n,i),a=0;a<this.blockSize;a++)s[a]=n[i+a]}else{for(o._update.call(this,e,t,n,i),a=0;a<this.blockSize;a++)n[i+a]^=s[a];for(a=0;a<this.blockSize;a++)s[a]=e[t+a]}}},55756:(e,t,n)=>{"use strict";var i=n(79746);function r(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}e.exports=r,r.prototype._init=function(){},r.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},r.prototype._buffer=function(e,t){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-t),i=0;i<n;i++)this.buffer[this.bufferOff+i]=e[t+i];return this.bufferOff+=n,n},r.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function(e){var t=0,n=0,i=(this.bufferOff+e.length)/this.blockSize|0,r=new Array(i*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(r,n)));for(var o=e.length-(e.length-t)%this.blockSize;t<o;t+=this.blockSize)this._update(e,t,r,n),n+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return r},r.prototype._updateDecrypt=function(e){for(var t=0,n=0,i=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,r=new Array(i*this.blockSize);i>0;i--)t+=this._buffer(e,t),n+=this._flushBuffer(r,n);return t+=this._buffer(e,t),r},r.prototype.final=function(e){var t,n;return e&&(t=this.update(e)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(n):n},r.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},r.prototype._unpad=function(e){return e},r.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},70778:(e,t,n)=>{"use strict";var i=n(79746),r=n(35717),o=n(11278),s=n(55756);function a(){this.tmp=new Array(2),this.keys=null}function c(e){s.call(this,e);var t=new a;this._desState=t,this.deriveKeys(t,e.key)}r(c,s),e.exports=c,c.create=function(e){return new c(e)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];c.prototype.deriveKeys=function(e,t){e.keys=new Array(32),i.equal(t.length,this.blockSize,"Invalid key length");var n=o.readUInt32BE(t,0),r=o.readUInt32BE(t,4);o.pc1(n,r,e.tmp,0),n=e.tmp[0],r=e.tmp[1];for(var s=0;s<e.keys.length;s+=2){var a=l[s>>>1];n=o.r28shl(n,a),r=o.r28shl(r,a),o.pc2(n,r,e.keys,s)}},c.prototype._update=function(e,t,n,i){var r=this._desState,s=o.readUInt32BE(e,t),a=o.readUInt32BE(e,t+4);o.ip(s,a,r.tmp,0),s=r.tmp[0],a=r.tmp[1],"encrypt"===this.type?this._encrypt(r,s,a,r.tmp,0):this._decrypt(r,s,a,r.tmp,0),s=r.tmp[0],a=r.tmp[1],o.writeUInt32BE(n,s,i),o.writeUInt32BE(n,a,i+4)},c.prototype._pad=function(e,t){for(var n=e.length-t,i=t;i<e.length;i++)e[i]=n;return!0},c.prototype._unpad=function(e){for(var t=e[e.length-1],n=e.length-t;n<e.length;n++)i.equal(e[n],t);return e.slice(0,e.length-t)},c.prototype._encrypt=function(e,t,n,i,r){for(var s=t,a=n,c=0;c<e.keys.length;c+=2){var l=e.keys[c],u=e.keys[c+1];o.expand(a,e.tmp,0),l^=e.tmp[0],u^=e.tmp[1];var d=o.substitute(l,u),h=a;a=(s^o.permute(d))>>>0,s=h}o.rip(a,s,i,r)},c.prototype._decrypt=function(e,t,n,i,r){for(var s=n,a=t,c=e.keys.length-2;c>=0;c-=2){var l=e.keys[c],u=e.keys[c+1];o.expand(s,e.tmp,0),l^=e.tmp[0],u^=e.tmp[1];var d=o.substitute(l,u),h=s;s=(a^o.permute(d))>>>0,a=h}o.rip(s,a,i,r)}},50651:(e,t,n)=>{"use strict";var i=n(79746),r=n(35717),o=n(55756),s=n(70778);function a(e,t){i.equal(t.length,24,"Invalid key length");var n=t.slice(0,8),r=t.slice(8,16),o=t.slice(16,24);this.ciphers="encrypt"===e?[s.create({type:"encrypt",key:n}),s.create({type:"decrypt",key:r}),s.create({type:"encrypt",key:o})]:[s.create({type:"decrypt",key:o}),s.create({type:"encrypt",key:r}),s.create({type:"decrypt",key:n})]}function c(e){o.call(this,e);var t=new a(this.type,this.options.key);this._edeState=t}r(c,o),e.exports=c,c.create=function(e){return new c(e)},c.prototype._update=function(e,t,n,i){var r=this._edeState;r.ciphers[0]._update(e,t,n,i),r.ciphers[1]._update(n,i,n,i),r.ciphers[2]._update(n,i,n,i)},c.prototype._pad=s.prototype._pad,c.prototype._unpad=s.prototype._unpad},11278:(e,t)=>{"use strict";t.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},t.writeUInt32BE=function(e,t,n){e[0+n]=t>>>24,e[1+n]=t>>>16&255,e[2+n]=t>>>8&255,e[3+n]=255&t},t.ip=function(e,t,n,i){for(var r=0,o=0,s=6;s>=0;s-=2){for(var a=0;a<=24;a+=8)r<<=1,r|=t>>>a+s&1;for(a=0;a<=24;a+=8)r<<=1,r|=e>>>a+s&1}for(s=6;s>=0;s-=2){for(a=1;a<=25;a+=8)o<<=1,o|=t>>>a+s&1;for(a=1;a<=25;a+=8)o<<=1,o|=e>>>a+s&1}n[i+0]=r>>>0,n[i+1]=o>>>0},t.rip=function(e,t,n,i){for(var r=0,o=0,s=0;s<4;s++)for(var a=24;a>=0;a-=8)r<<=1,r|=t>>>a+s&1,r<<=1,r|=e>>>a+s&1;for(s=4;s<8;s++)for(a=24;a>=0;a-=8)o<<=1,o|=t>>>a+s&1,o<<=1,o|=e>>>a+s&1;n[i+0]=r>>>0,n[i+1]=o>>>0},t.pc1=function(e,t,n,i){for(var r=0,o=0,s=7;s>=5;s--){for(var a=0;a<=24;a+=8)r<<=1,r|=t>>a+s&1;for(a=0;a<=24;a+=8)r<<=1,r|=e>>a+s&1}for(a=0;a<=24;a+=8)r<<=1,r|=t>>a+s&1;for(s=1;s<=3;s++){for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1}for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1;n[i+0]=r>>>0,n[i+1]=o>>>0},t.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,i,r){for(var o=0,s=0,a=n.length>>>1,c=0;c<a;c++)o<<=1,o|=e>>>n[c]&1;for(c=a;c<n.length;c++)s<<=1,s|=t>>>n[c]&1;i[r+0]=o>>>0,i[r+1]=s>>>0},t.expand=function(e,t,n){var i=0,r=0;i=(1&e)<<5|e>>>27;for(var o=23;o>=15;o-=4)i<<=6,i|=e>>>o&63;for(o=11;o>=3;o-=4)r|=e>>>o&63,r<<=6;r|=(31&e)<<1|e>>>31,t[n+0]=i>>>0,t[n+1]=r>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var n=0,r=0;r<4;r++)n<<=4,n|=i[64*r+(e>>>18-6*r&63)];for(r=0;r<4;r++)n<<=4,n|=i[256+64*r+(t>>>18-6*r&63)];return n>>>0};var r=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,n=0;n<r.length;n++)t<<=1,t|=e>>>r[n]&1;return t>>>0},t.padSplit=function(e,t,n){for(var i=e.toString(2);i.length<t;)i="0"+i;for(var r=[],o=0;o<t;o+=n)r.push(i.slice(o,o+n));return r.join(" ")}},62607:(e,t,n)=>{var i=n(48764).Buffer,r=n(43590),o=n(29799),s=n(57426),a={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=function(e){var t=new i(o[e].prime,"hex"),n=new i(o[e].gen,"hex");return new s(t,n)},t.createDiffieHellman=t.DiffieHellman=function e(t,n,o,c){return i.isBuffer(n)||void 0===a[n]?e(t,"binary",n,o):(n=n||"binary",c=c||"binary",o=o||new i([2]),i.isBuffer(o)||(o=new i(o,c)),"number"==typeof t?new s(r(t,o),o,!0):(i.isBuffer(t)||(t=new i(t,n)),new s(t,o,!0)))}},57426:(e,t,n)=>{var i=n(48764).Buffer,r=n(13550),o=new(n(63047)),s=new r(24),a=new r(11),c=new r(10),l=new r(3),u=new r(7),d=n(43590),h=n(61798);function p(e,t){return t=t||"utf8",i.isBuffer(e)||(e=new i(e,t)),this._pub=new r(e),this}function f(e,t){return t=t||"utf8",i.isBuffer(e)||(e=new i(e,t)),this._priv=new r(e),this}e.exports=g;var m={};function g(e,t,n){this.setGenerator(t),this.__prime=new r(e),this._prime=r.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=p,this.setPrivateKey=f):this._primeCode=8}function v(e,t){var n=new i(e.toArray());return t?n.toString(t):n}Object.defineProperty(g.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var n=t.toString("hex"),i=[n,e.toString(16)].join("_");if(i in m)return m[i];var r,h=0;if(e.isEven()||!d.simpleSieve||!d.fermatTest(e)||!o.test(e))return h+=1,h+="02"===n||"05"===n?8:4,m[i]=h,h;switch(o.test(e.shrn(1))||(h+=2),n){case"02":e.mod(s).cmp(a)&&(h+=8);break;case"05":(r=e.mod(c)).cmp(l)&&r.cmp(u)&&(h+=8);break;default:h+=4}return m[i]=h,h}(this.__prime,this.__gen)),this._primeCode}}),g.prototype.generateKeys=function(){return this._priv||(this._priv=new r(h(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},g.prototype.computeSecret=function(e){var t=(e=(e=new r(e)).toRed(this._prime)).redPow(this._priv).fromRed(),n=new i(t.toArray()),o=this.getPrime();if(n.length<o.length){var s=new i(o.length-n.length);s.fill(0),n=i.concat([s,n])}return n},g.prototype.getPublicKey=function(e){return v(this._pub,e)},g.prototype.getPrivateKey=function(e){return v(this._priv,e)},g.prototype.getPrime=function(e){return v(this.__prime,e)},g.prototype.getGenerator=function(e){return v(this._gen,e)},g.prototype.setGenerator=function(e,t){return t=t||"utf8",i.isBuffer(e)||(e=new i(e,t)),this.__gen=e,this._gen=new r(e),this}},43590:(e,t,n)=>{var i=n(61798);e.exports=y,y.simpleSieve=g,y.fermatTest=v;var r=n(13550),o=new r(24),s=new(n(63047)),a=new r(1),c=new r(2),l=new r(5),u=(new r(16),new r(8),new r(10)),d=new r(3),h=(new r(7),new r(11)),p=new r(4),f=(new r(12),null);function m(){if(null!==f)return f;var e=[];e[0]=2;for(var t=1,n=3;n<1048576;n+=2){for(var i=Math.ceil(Math.sqrt(n)),r=0;r<t&&e[r]<=i&&n%e[r]!=0;r++);t!==r&&e[r]<=i||(e[t++]=n)}return f=e,e}function g(e){for(var t=m(),n=0;n<t.length;n++)if(0===e.modn(t[n]))return 0===e.cmpn(t[n]);return!0}function v(e){var t=r.mont(e);return 0===c.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function y(e,t){if(e<16)return new r(2===t||5===t?[140,123]:[140,39]);var n,f;for(t=new r(t);;){for(n=new r(i(Math.ceil(e/8)));n.bitLength()>e;)n.ishrn(1);if(n.isEven()&&n.iadd(a),n.testn(1)||n.iadd(c),t.cmp(c)){if(!t.cmp(l))for(;n.mod(u).cmp(d);)n.iadd(p)}else for(;n.mod(o).cmp(h);)n.iadd(p);if(g(f=n.shrn(1))&&g(n)&&v(f)&&v(n)&&s.test(f)&&s.test(n))return n}}},86266:(e,t,n)=>{"use strict";var i=t;i.version=n(18597).i8,i.utils=n(80953),i.rand=n(29931),i.curve=n(88254),i.curves=n(45427),i.ec=n(57954),i.eddsa=n(65980)},4918:(e,t,n)=>{"use strict";var i=n(13550),r=n(80953),o=r.getNAF,s=r.getJSF,a=r.assert;function c(e,t){this.type=e,this.p=new i(t.p,16),this.red=t.prime?i.red(t.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=t.n&&new i(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){a(e.precomputed);var n=e._getDoubles(),i=o(t,1,this._bitLength),r=(1<<n.step+1)-(n.step%2==0?2:1);r/=3;var s,c,l=[];for(s=0;s<i.length;s+=n.step){c=0;for(var u=s+n.step-1;u>=s;u--)c=(c<<1)+i[u];l.push(c)}for(var d=this.jpoint(null,null,null),h=this.jpoint(null,null,null),p=r;p>0;p--){for(s=0;s<l.length;s++)(c=l[s])===p?h=h.mixedAdd(n.points[s]):c===-p&&(h=h.mixedAdd(n.points[s].neg()));d=d.add(h)}return d.toP()},c.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var r=i.points,s=o(t,n,this._bitLength),c=this.jpoint(null,null,null),l=s.length-1;l>=0;l--){for(var u=0;l>=0&&0===s[l];l--)u++;if(l>=0&&u++,c=c.dblp(u),l<0)break;var d=s[l];a(0!==d),c="affine"===e.type?d>0?c.mixedAdd(r[d-1>>1]):c.mixedAdd(r[-d-1>>1].neg()):d>0?c.add(r[d-1>>1]):c.add(r[-d-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,n,i,r){var a,c,l,u=this._wnafT1,d=this._wnafT2,h=this._wnafT3,p=0;for(a=0;a<i;a++){var f=(l=t[a])._getNAFPoints(e);u[a]=f.wnd,d[a]=f.points}for(a=i-1;a>=1;a-=2){var m=a-1,g=a;if(1===u[m]&&1===u[g]){var v=[t[m],null,null,t[g]];0===t[m].y.cmp(t[g].y)?(v[1]=t[m].add(t[g]),v[2]=t[m].toJ().mixedAdd(t[g].neg())):0===t[m].y.cmp(t[g].y.redNeg())?(v[1]=t[m].toJ().mixedAdd(t[g]),v[2]=t[m].add(t[g].neg())):(v[1]=t[m].toJ().mixedAdd(t[g]),v[2]=t[m].toJ().mixedAdd(t[g].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],b=s(n[m],n[g]);for(p=Math.max(b[0].length,p),h[m]=new Array(p),h[g]=new Array(p),c=0;c<p;c++){var E=0|b[0][c],S=0|b[1][c];h[m][c]=y[3*(E+1)+(S+1)],h[g][c]=0,d[m]=v}}else h[m]=o(n[m],u[m],this._bitLength),h[g]=o(n[g],u[g],this._bitLength),p=Math.max(h[m].length,p),p=Math.max(h[g].length,p)}var w=this.jpoint(null,null,null),_=this._wnafT4;for(a=p;a>=0;a--){for(var T=0;a>=0;){var x=!0;for(c=0;c<i;c++)_[c]=0|h[c][a],0!==_[c]&&(x=!1);if(!x)break;T++,a--}if(a>=0&&T++,w=w.dblp(T),a<0)break;for(c=0;c<i;c++){var C=_[c];0!==C&&(C>0?l=d[c][C-1>>1]:C<0&&(l=d[c][-C-1>>1].neg()),w="affine"===l.type?w.mixedAdd(l):w.add(l))}}for(a=0;a<i;a++)d[a]=null;return r?w:w.toP()},c.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=r.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*n)return 6===e[0]?a(e[e.length-1]%2==0):7===e[0]&&a(e[e.length-1]%2==1),this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(e){return this.encode(e,!0)},l.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},l.prototype.encode=function(e,t){return r.encode(this._encode(t),e)},l.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},l.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},l.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,r=0;r<t;r+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}},l.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=1===n?null:this.dbl(),r=1;r<n;r++)t[r]=t[r-1].add(i);return{wnd:e,points:t}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}},31138:(e,t,n)=>{"use strict";var i=n(80953),r=n(13550),o=n(35717),s=n(4918),a=i.assert;function c(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,s.call(this,"edwards",e),this.a=new r(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new r(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new r(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function l(e,t,n,i,o){s.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new r(t,16),this.y=new r(n,16),this.z=i?new r(i,16):this.curve.one,this.t=o&&new r(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(c,s),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,n,i){return this.point(e,t,n,i)},c.prototype.pointFromX=function(e,t){(e=new r(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),s=i.redMul(o.redInvm()),a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var c=a.fromRed().isOdd();return(t&&!c||!t&&c)&&(a=a.redNeg()),this.point(e,a)},c.prototype.pointFromY=function(e,t){(e=new r(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),s=i.redMul(o.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),i=t.redMul(this.a).redAdd(n),r=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===i.cmp(r)},o(l,s.BasePoint),c.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},c.prototype.point=function(e,t,n,i){return new l(this,e,t,n,i)},l.fromJSON=function(e,t){return new l(e,t[0],t[1],t[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),r=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=i.redAdd(t),s=o.redSub(n),a=i.redSub(t),c=r.redMul(s),l=o.redMul(a),u=r.redMul(a),d=s.redMul(o);return this.curve.point(c,l,d,u)},l.prototype._projDbl=function(){var e,t,n,i,r,o,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var l=(i=this.curve._mulA(a)).redAdd(c);this.zOne?(e=s.redSub(a).redSub(c).redMul(l.redSub(this.curve.two)),t=l.redMul(i.redSub(c)),n=l.redSqr().redSub(l).redSub(l)):(r=this.z.redSqr(),o=l.redSub(r).redISub(r),e=s.redSub(a).redISub(c).redMul(o),t=l.redMul(i.redSub(c)),n=l.redMul(o))}else i=a.redAdd(c),r=this.curve._mulC(this.z).redSqr(),o=i.redSub(r).redSub(r),e=this.curve._mulC(s.redISub(i)).redMul(o),t=this.curve._mulC(i).redMul(a.redISub(c)),n=i.redMul(o);return this.curve.point(e,t,n)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),r=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(t),s=r.redSub(i),a=r.redAdd(i),c=n.redAdd(t),l=o.redMul(s),u=a.redMul(c),d=o.redMul(c),h=s.redMul(a);return this.curve.point(l,u,h,d)},l.prototype._projAdd=function(e){var t,n,i=this.z.redMul(e.z),r=i.redSqr(),o=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(o).redMul(s),c=r.redSub(a),l=r.redAdd(a),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(s),d=i.redMul(c).redMul(u);return this.curve.twisted?(t=i.redMul(l).redMul(s.redSub(this.curve._mulA(o))),n=c.redMul(l)):(t=i.redMul(l).redMul(s.redSub(o)),n=this.curve._mulC(c).redMul(l)),this.curve.point(d,t,n)},l.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},l.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)},l.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},l.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},88254:(e,t,n)=>{"use strict";var i=t;i.base=n(4918),i.short=n(6673),i.mont=n(22881),i.edwards=n(31138)},22881:(e,t,n)=>{"use strict";var i=n(13550),r=n(35717),o=n(4918),s=n(80953);function a(e){o.call(this,"mont",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,n){o.BasePoint.call(this,e,"projective"),null===t&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(t,16),this.z=new i(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(a,o),e.exports=a,a.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),i=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t);return 0===i.redSqrt().redSqr().cmp(i)},r(c,o.BasePoint),a.prototype.decodePoint=function(e,t){return this.point(s.toArray(e,t),1)},a.prototype.point=function(e,t){return new c(this,e,t)},a.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),n=e.redSub(t),i=e.redMul(t),r=n.redMul(t.redAdd(this.curve.a24.redMul(n)));return this.curve.point(i,r)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),r=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(n),s=r.redMul(i),a=t.z.redMul(o.redAdd(s).redSqr()),c=t.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,c)},c.prototype.mul=function(e){for(var t=e.clone(),n=this,i=this.curve.point(null,null),r=[];0!==t.cmpn(0);t.iushrn(1))r.push(t.andln(1));for(var o=r.length-1;o>=0;o--)0===r[o]?(n=n.diffAdd(i,this),i=i.dbl()):(i=n.diffAdd(i,this),n=n.dbl());return i},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},6673:(e,t,n)=>{"use strict";var i=n(80953),r=n(13550),o=n(35717),s=n(4918),a=i.assert;function c(e){s.call(this,"short",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(e,t,n,i){s.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new r(t,16),this.y=new r(n,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(e,t,n,i){s.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new r(0)):(this.x=new r(t,16),this.y=new r(n,16),this.z=new r(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(c,s),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new r(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=(t=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(e.lambda)n=new r(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?n=o[0]:(n=o[1],a(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:n,basis:e.basis?e.basis.map((function(e){return{a:new r(e.a,16),b:new r(e.b,16)}})):this._getEndoBasis(n)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:r.mont(e),n=new r(2).toRed(t).redInvm(),i=n.redNeg(),o=new r(3).toRed(t).redNeg().redSqrt().redMul(n);return[i.redAdd(o).fromRed(),i.redSub(o).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,n,i,o,s,a,c,l,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,p=this.n.clone(),f=new r(1),m=new r(0),g=new r(0),v=new r(1),y=0;0!==h.cmpn(0);){var b=p.div(h);l=p.sub(b.mul(h)),u=g.sub(b.mul(f));var E=v.sub(b.mul(m));if(!i&&l.cmp(d)<0)t=c.neg(),n=f,i=l.neg(),o=u;else if(i&&2==++y)break;c=l,p=h,h=l,g=f,f=u,v=m,m=E}s=l.neg(),a=u;var S=i.sqr().add(o.sqr());return s.sqr().add(a.sqr()).cmp(S)>=0&&(s=t,a=n),i.negative&&(i=i.neg(),o=o.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:i,b:o},{a:s,b:a}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],r=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),s=r.mul(n.a),a=o.mul(i.a),c=r.mul(n.b),l=o.mul(i.b);return{k1:e.sub(s).sub(a),k2:c.add(l).neg()}},c.prototype.pointFromX=function(e,t){(e=new r(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(0!==i.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var o=i.fromRed().isOdd();return(t&&!o||!t&&o)&&(i=i.redNeg()),this.point(e,i)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),r=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===n.redSqr().redISub(r).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,r=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],c=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),i[2*o]=a,i[2*o+1]=c,r[2*o]=s.k1,r[2*o+1]=s.k2}for(var l=this._wnafMulAdd(1,i,r,2*o,n),u=0;u<2*o;u++)i[u]=null,r[u]=null;return l},o(l,s.BasePoint),c.prototype.point=function(e,t,n){return new l(this,e,t,n)},c.prototype.pointFromJSON=function(e,t){return l.fromJSON(this,e,t)},l.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(e,t,n){"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function r(t){return e.point(t[0],t[1],n)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(r))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(r))}},i},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},l.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),r=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),o=r.redSqr().redISub(this.x.redAdd(this.x)),s=r.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(e){return e=new r(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,n){var i=[this,t],r=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,r):this.curve._wnafMulAdd(1,i,r,2)},l.prototype.jmulAdd=function(e,t,n){var i=[this,t],r=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,r,!0):this.curve._wnafMulAdd(1,i,r,2,!0)},l.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},l.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(u,s.BasePoint),c.prototype.jpoint=function(e,t,n){return new u(this,e,t,n)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),r=e.x.redMul(n),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(n.redMul(this.z)),a=i.redSub(r),c=o.redSub(s);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),d=i.redMul(l),h=c.redSqr().redIAdd(u).redISub(d).redISub(d),p=c.redMul(d.redISub(h)).redISub(o.redMul(u)),f=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(h,p,f)},u.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),r=this.y,o=e.y.redMul(t).redMul(this.z),s=n.redSub(i),a=r.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),l=c.redMul(s),u=n.redMul(c),d=a.redSqr().redIAdd(l).redISub(u).redISub(u),h=a.redMul(u.redISub(d)).redISub(r.redMul(l)),p=this.z.redMul(s);return this.curve.jpoint(d,h,p)},u.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,r=this.curve.tinv,o=this.x,s=this.y,a=this.z,c=a.redSqr().redSqr(),l=s.redAdd(s);for(t=0;t<e;t++){var u=o.redSqr(),d=l.redSqr(),h=d.redSqr(),p=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(c)),f=o.redMul(d),m=p.redSqr().redISub(f.redAdd(f)),g=f.redISub(m),v=p.redMul(g);v=v.redIAdd(v).redISub(h);var y=l.redMul(a);t+1<e&&(c=c.redMul(h)),o=m,a=y,l=v}return this.curve.jpoint(o,l.redMul(r),a)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),r=this.y.redSqr(),o=r.redSqr(),s=this.x.redAdd(r).redSqr().redISub(i).redISub(o);s=s.redIAdd(s);var a=i.redAdd(i).redIAdd(i),c=a.redSqr().redISub(s).redISub(s),l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),e=c,t=a.redMul(s.redISub(c)).redISub(l),n=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),p=this.x.redAdd(d).redSqr().redISub(u).redISub(h);p=p.redIAdd(p);var f=u.redAdd(u).redIAdd(u),m=f.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(p).redISub(p),t=f.redMul(p.redISub(e)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(e,t,n)},u.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),r=this.y.redSqr(),o=r.redSqr(),s=this.x.redAdd(r).redSqr().redISub(i).redISub(o);s=s.redIAdd(s);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=a.redSqr().redISub(s).redISub(s);e=c;var l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),t=a.redMul(s.redISub(c)).redISub(l),n=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),p=this.x.redSub(u).redMul(this.x.redAdd(u));p=p.redAdd(p).redIAdd(p);var f=h.redIAdd(h),m=(f=f.redIAdd(f)).redAdd(f);e=p.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var g=d.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=p.redMul(f.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,n)},u.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,r=i.redSqr().redSqr(),o=t.redSqr(),s=n.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(r)),c=t.redAdd(t),l=(c=c.redIAdd(c)).redMul(s),u=a.redSqr().redISub(l.redAdd(l)),d=l.redISub(u),h=s.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=a.redMul(d).redISub(h),f=n.redAdd(n).redMul(i);return this.curve.jpoint(u,p,f)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),r=e.redAdd(e).redIAdd(e),o=r.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(i),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),c=i.redIAdd(i);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var l=r.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(c),u=t.redMul(l);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.x.redMul(a).redISub(u);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.y.redMul(l.redMul(c.redISub(l)).redISub(s.redMul(a)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=this.z.redAdd(s).redSqr().redISub(n).redISub(a);return this.curve.jpoint(d,h,p)},u.prototype.mul=function(e,t){return e=new r(e,t),this.curve._wnafMul(this,e)},u.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),r=n.redMul(e.z);return 0===this.y.redMul(r).redISub(e.y.redMul(i)).cmpn(0)},u.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var i=e.clone(),r=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(r),0===this.x.cmp(n))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},45427:(e,t,n)=>{"use strict";var i,r=t,o=n(33715),s=n(88254),a=n(80953).assert;function c(e){"short"===e.type?this.curve=new s.short(e):"edwards"===e.type?this.curve=new s.edwards(e):this.curve=new s.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(e,t){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){var n=new c(t);return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,value:n}),n}})}r.PresetCurve=c,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=n(91037)}catch(e){i=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},57954:(e,t,n)=>{"use strict";var i=n(13550),r=n(2156),o=n(80953),s=n(45427),a=n(29931),c=o.assert,l=n(31251),u=n(90611);function d(e){if(!(this instanceof d))return new d(e);"string"==typeof e&&(c(Object.prototype.hasOwnProperty.call(s,e),"Unknown curve "+e),e=s[e]),e instanceof s.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=d,d.prototype.keyPair=function(e){return new l(this,e)},d.prototype.keyFromPrivate=function(e,t){return l.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return l.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new r({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),o=this.n.sub(new i(2));;){var s=new i(t.generate(n));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},d.prototype._truncateToN=function(e,t){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},d.prototype.sign=function(e,t,n,o){"object"==typeof n&&(o=n,n=null),o||(o={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new i(e,16));for(var s=this.n.byteLength(),a=t.getPrivate().toArray("be",s),c=e.toArray("be",s),l=new r({hash:this.hash,entropy:a,nonce:c,pers:o.pers,persEnc:o.persEnc||"utf8"}),d=this.n.sub(new i(1)),h=0;;h++){var p=o.k?o.k(h):new i(l.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(d)>=0)){var f=this.g.mul(p);if(!f.isInfinity()){var m=f.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var v=p.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(v=v.umod(this.n)).cmpn(0)){var y=(f.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return o.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),y^=1),new u({r:g,s:v,recoveryParam:y})}}}}}},d.prototype.verify=function(e,t,n,r){e=this._truncateToN(new i(e,16)),n=this.keyFromPublic(n,r);var o=(t=new u(t,"hex")).r,s=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,c=s.invm(this.n),l=c.mul(e).umod(this.n),d=c.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(l,n.getPublic(),d)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(l,n.getPublic(),d)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},d.prototype.recoverPubKey=function(e,t,n,r){c((3&n)===n,"The recovery param is more than two bits"),t=new u(t,r);var o=this.n,s=new i(e),a=t.r,l=t.s,d=1&n,h=n>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");a=h?this.curve.pointFromX(a.add(this.curve.n),d):this.curve.pointFromX(a,d);var p=t.r.invm(o),f=o.sub(s).mul(p).umod(o),m=l.mul(p).umod(o);return this.g.mulAdd(f,a,m)},d.prototype.getKeyRecoveryParam=function(e,t,n,i){if(null!==(t=new u(t,i)).recoveryParam)return t.recoveryParam;for(var r=0;r<4;r++){var o;try{o=this.recoverPubKey(e,t,r)}catch(e){continue}if(o.eq(n))return r}throw new Error("Unable to find valid recovery factor")}},31251:(e,t,n)=>{"use strict";var i=n(13550),r=n(80953).assert;function o(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=o,o.fromPublic=function(e,t,n){return t instanceof o?t:new o(e,{pub:t,pubEnc:n})},o.fromPrivate=function(e,t,n){return t instanceof o?t:new o(e,{priv:t,privEnc:n})},o.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},o.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(e,t){this.priv=new i(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?r(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||r(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},o.prototype.derive=function(e){return e.validate()||r(e.validate(),"public point not validated"),e.mul(this.priv).getX()},o.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},o.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},90611:(e,t,n)=>{"use strict";var i=n(13550),r=n(80953),o=r.assert;function s(e,t){if(e instanceof s)return e;this._importDER(e,t)||(o(e.r&&e.s,"Signature without r or s"),this.r=new i(e.r,16),this.s=new i(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function c(e,t){var n=e[t.place++];if(!(128&n))return n;var i=15&n;if(0===i||i>4)return!1;for(var r=0,o=0,s=t.place;o<i;o++,s++)r<<=8,r|=e[s],r>>>=0;return!(r<=127)&&(t.place=s,r)}function l(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function u(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}e.exports=s,s.prototype._importDER=function(e,t){e=r.toArray(e,t);var n=new a;if(48!==e[n.place++])return!1;var o=c(e,n);if(!1===o)return!1;if(o+n.place!==e.length)return!1;if(2!==e[n.place++])return!1;var s=c(e,n);if(!1===s)return!1;var l=e.slice(n.place,s+n.place);if(n.place+=s,2!==e[n.place++])return!1;var u=c(e,n);if(!1===u)return!1;if(e.length!==u+n.place)return!1;var d=e.slice(n.place,u+n.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new i(l),this.s=new i(d),this.recoveryParam=null,!0},s.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=l(t),n=l(n);!(n[0]||128&n[1]);)n=n.slice(1);var i=[2];u(i,t.length),(i=i.concat(t)).push(2),u(i,n.length);var o=i.concat(n),s=[48];return u(s,o.length),s=s.concat(o),r.encode(s,e)}},65980:(e,t,n)=>{"use strict";var i=n(33715),r=n(45427),o=n(80953),s=o.assert,a=o.parseBytes,c=n(79087),l=n(23622);function u(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof u))return new u(e);e=r[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=i.sha512}e.exports=u,u.prototype.sign=function(e,t){e=a(e);var n=this.keyFromSecret(t),i=this.hashInt(n.messagePrefix(),e),r=this.g.mul(i),o=this.encodePoint(r),s=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),c=i.add(s).umod(this.curve.n);return this.makeSignature({R:r,S:c,Rencoded:o})},u.prototype.verify=function(e,t,n){e=a(e),t=this.makeSignature(t);var i=this.keyFromPublic(n),r=this.hashInt(t.Rencoded(),i.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(i.pub().mul(r)).eq(o)},u.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return o.intFromLE(e.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},u.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},u.prototype.makeSignature=function(e){return e instanceof l?e:new l(this,e)},u.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},u.prototype.decodePoint=function(e){var t=(e=o.parseBytes(e)).length-1,n=e.slice(0,t).concat(-129&e[t]),i=0!=(128&e[t]),r=o.intFromLE(n);return this.curve.pointFromY(r,i)},u.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(e){return o.intFromLE(e)},u.prototype.isPoint=function(e){return e instanceof this.pointClass}},79087:(e,t,n)=>{"use strict";var i=n(80953),r=i.assert,o=i.parseBytes,s=i.cachedProperty;function a(e,t){this.eddsa=e,this._secret=o(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=o(t.pub)}a.fromPublic=function(e,t){return t instanceof a?t:new a(e,{pub:t})},a.fromSecret=function(e,t){return t instanceof a?t:new a(e,{secret:t})},a.prototype.secret=function(){return this._secret},s(a,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(a,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(a,"privBytes",(function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i})),s(a,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(a,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(a,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),a.prototype.sign=function(e){return r(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},a.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},a.prototype.getSecret=function(e){return r(this._secret,"KeyPair is public only"),i.encode(this.secret(),e)},a.prototype.getPublic=function(e){return i.encode(this.pubBytes(),e)},e.exports=a},23622:(e,t,n)=>{"use strict";var i=n(13550),r=n(80953),o=r.assert,s=r.cachedProperty,a=r.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=a(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),o(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof i&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}s(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},91037:e=>{e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},80953:(e,t,n)=>{"use strict";var i=t,r=n(13550),o=n(79746),s=n(34504);i.assert=o,i.toArray=s.toArray,i.zero2=s.zero2,i.toHex=s.toHex,i.encode=s.encode,i.getNAF=function(e,t,n){var i=new Array(Math.max(e.bitLength(),n)+1);i.fill(0);for(var r=1<<t+1,o=e.clone(),s=0;s<i.length;s++){var a,c=o.andln(r-1);o.isOdd()?(a=c>(r>>1)-1?(r>>1)-c:c,o.isubn(a)):a=0,i[s]=a,o.iushrn(1)}return i},i.getJSF=function(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var i,r=0,o=0;e.cmpn(-r)>0||t.cmpn(-o)>0;){var s,a,c=e.andln(3)+r&3,l=t.andln(3)+o&3;3===c&&(c=-1),3===l&&(l=-1),s=0==(1&c)?0:3!=(i=e.andln(7)+r&7)&&5!==i||2!==l?c:-c,n[0].push(s),a=0==(1&l)?0:3!=(i=t.andln(7)+o&7)&&5!==i||2!==c?l:-l,n[1].push(a),2*r===s+1&&(r=1-r),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return n},i.cachedProperty=function(e,t,n){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=n.call(this)}},i.parseBytes=function(e){return"string"==typeof e?i.toArray(e,"hex"):e},i.intFromLE=function(e){return new r(e,"hex","le")}},63150:e=>{"use strict";e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},17187:(e,t,n)=>{"use strict";var i,r=n(25108),o="object"==typeof Reflect?Reflect:null,s=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function c(){c.init.call(this)}e.exports=c,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,o),i(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&y(e,"error",t,{once:!0})}(e,r)}))},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function h(e,t,n,i){var o,s,a,c;if(u(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),void 0===a)a=s[t]=n,++e._eventsCount;else if("function"==typeof a?a=s[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(o=d(e))>0&&a.length>o&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,c=l,r&&r.warn&&r.warn(c)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=p.bind(i);return r.listener=n,i.wrapFn=r,r}function m(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):v(r,r.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function y(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){i.once&&e.removeEventListener(t,r),n(o)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return d(this)},c.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=r[e];if(void 0===c)return!1;if("function"==typeof c)s(c,this,t);else{var l=c.length,u=v(c,l);for(n=0;n<l;++n)s(u[n],this,t)}return!0},c.prototype.addListener=function(e,t){return h(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return h(this,e,t,!0)},c.prototype.once=function(e,t){return u(t),this.on(e,f(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,f(this,e,t)),this},c.prototype.removeListener=function(e,t){var n,i,r,o,s;if(u(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},c.prototype.listeners=function(e){return m(this,e,!0)},c.prototype.rawListeners=function(e){return m(this,e,!1)},c.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},c.prototype.listenerCount=g,c.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},13048:(e,t,n)=>{var i=n(89509).Buffer,r=n(62318);e.exports=function(e,t,n,o){if(i.isBuffer(e)||(e=i.from(e,"binary")),t&&(i.isBuffer(t)||(t=i.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=n/8,a=i.alloc(s),c=i.alloc(o||0),l=i.alloc(0);s>0||o>0;){var u=new r;u.update(l),u.update(e),t&&u.update(t),l=u.digest();var d=0;if(s>0){var h=a.length-s;d=Math.min(s,l.length),l.copy(a,h,0,d),s-=d}if(d<l.length&&o>0){var p=c.length-o,f=Math.min(o,l.length-d);l.copy(c,p,d,d+f),o-=f}}return l.fill(0),{key:a,iv:c}}},94470:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var i,r=t.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!o)return!1;for(i in e);return void 0===i||t.call(e,i)},a=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(r)return r(e,n).value}return e[n]};e.exports=function e(){var t,n,i,r,l,u,d=arguments[0],h=1,p=arguments.length,f=!1;for("boolean"==typeof d&&(f=d,d=arguments[1]||{},h=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});h<p;++h)if(null!=(t=arguments[h]))for(n in t)i=c(d,n),d!==(r=c(t,n))&&(f&&r&&(s(r)||(l=o(r)))?(l?(l=!1,u=i&&o(i)?i:[]):u=i&&s(i)?i:{},a(d,{name:n,newValue:e(f,u,r)})):void 0!==r&&a(d,{name:n,newValue:r}));return d}},3349:(e,t,n)=>{"use strict";var i=n(89509).Buffer,r=n(88473).Transform;function o(e){r.call(this),this._block=i.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(35717)(o,r),o.prototype._transform=function(e,t,n){var i=null;try{this.update(e,t)}catch(e){i=e}n(i)},o.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},o.prototype.update=function(e,t){if(function(e,t){if(!i.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer")}(e),this._finalized)throw new Error("Digest already called");i.isBuffer(e)||(e=i.from(e,t));for(var n=this._block,r=0;this._blockOffset+e.length-r>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=e[r++];this._update(),this._blockOffset=0}for(;r<e.length;)n[this._blockOffset++]=e[r++];for(var s=0,a=8*e.length;a>0;++s)this._length[s]+=a,(a=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*a);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},o.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=o},33715:(e,t,n)=>{var i=t;i.utils=n(26436),i.common=n(95772),i.sha=n(89041),i.ripemd=n(12949),i.hmac=n(36326),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},95772:(e,t,n)=>{"use strict";var i=n(26436),r=n(79746);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=o,o.prototype.update=function(e,t){if(e=i.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=i.join32(e,0,e.length-n,this.endian);for(var r=0;r<e.length;r+=this._delta32)this._update(e,r,r+this._delta32)}return this},o.prototype.digest=function(e){return this.update(this._pad()),r(null===this.pending),this._digest(e)},o.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var r=1;r<n;r++)i[r]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)i[r++]=0;i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=e>>>24&255,i[r++]=e>>>16&255,i[r++]=e>>>8&255,i[r++]=255&e}else for(i[r++]=255&e,i[r++]=e>>>8&255,i[r++]=e>>>16&255,i[r++]=e>>>24&255,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=0,o=8;o<this.padLength;o++)i[r++]=0;return i}},36326:(e,t,n)=>{"use strict";var i=n(26436),r=n(79746);function o(e,t,n){if(!(this instanceof o))return new o(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(t,n))}e.exports=o,o.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),r(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},o.prototype.update=function(e,t){return this.inner.update(e,t),this},o.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},12949:(e,t,n)=>{"use strict";var i=n(26436),r=n(95772),o=i.rotl32,s=i.sum32,a=i.sum32_3,c=i.sum32_4,l=r.BlockHash;function u(){if(!(this instanceof u))return new u;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,n,i){return e<=15?t^n^i:e<=31?t&n|~t&i:e<=47?(t|~n)^i:e<=63?t&i|n&~i:t^(n|~i)}function h(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function p(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}i.inherits(u,l),t.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],r=this.h[2],l=this.h[3],u=this.h[4],y=n,b=i,E=r,S=l,w=u,_=0;_<80;_++){var T=s(o(c(n,d(_,i,r,l),e[f[_]+t],h(_)),g[_]),u);n=u,u=l,l=o(r,10),r=i,i=T,T=s(o(c(y,d(79-_,b,E,S),e[m[_]+t],p(_)),v[_]),w),y=w,w=S,S=o(E,10),E=b,b=T}T=a(this.h[1],r,S),this.h[1]=a(this.h[2],l,w),this.h[2]=a(this.h[3],u,y),this.h[3]=a(this.h[4],n,b),this.h[4]=a(this.h[0],i,E),this.h[0]=T},u.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},89041:(e,t,n)=>{"use strict";t.sha1=n(84761),t.sha224=n(10799),t.sha256=n(89344),t.sha384=n(80772),t.sha512=n(45900)},84761:(e,t,n)=>{"use strict";var i=n(26436),r=n(95772),o=n(37038),s=i.rotl32,a=i.sum32,c=i.sum32_5,l=o.ft_1,u=r.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}i.inherits(h,u),e.exports=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=s(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var r=this.h[0],o=this.h[1],u=this.h[2],h=this.h[3],p=this.h[4];for(i=0;i<n.length;i++){var f=~~(i/20),m=c(s(r,5),l(f,o,u,h),p,n[i],d[f]);p=h,h=u,u=s(o,30),o=r,r=m}this.h[0]=a(this.h[0],r),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],u),this.h[3]=a(this.h[3],h),this.h[4]=a(this.h[4],p)},h.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},10799:(e,t,n)=>{"use strict";var i=n(26436),r=n(89344);function o(){if(!(this instanceof o))return new o;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(o,r),e.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},89344:(e,t,n)=>{"use strict";var i=n(26436),r=n(95772),o=n(37038),s=n(79746),a=i.sum32,c=i.sum32_4,l=i.sum32_5,u=o.ch32,d=o.maj32,h=o.s0_256,p=o.s1_256,f=o.g0_256,m=o.g1_256,g=r.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}i.inherits(y,g),e.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=c(m(n[i-2]),n[i-7],f(n[i-15]),n[i-16]);var r=this.h[0],o=this.h[1],g=this.h[2],v=this.h[3],y=this.h[4],b=this.h[5],E=this.h[6],S=this.h[7];for(s(this.k.length===n.length),i=0;i<n.length;i++){var w=l(S,p(y),u(y,b,E),this.k[i],n[i]),_=a(h(r),d(r,o,g));S=E,E=b,b=y,y=a(v,w),v=g,g=o,o=r,r=a(w,_)}this.h[0]=a(this.h[0],r),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],v),this.h[4]=a(this.h[4],y),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],E),this.h[7]=a(this.h[7],S)},y.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},80772:(e,t,n)=>{"use strict";var i=n(26436),r=n(45900);function o(){if(!(this instanceof o))return new o;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(o,r),e.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},45900:(e,t,n)=>{"use strict";var i=n(26436),r=n(95772),o=n(79746),s=i.rotr64_hi,a=i.rotr64_lo,c=i.shr64_hi,l=i.shr64_lo,u=i.sum64,d=i.sum64_hi,h=i.sum64_lo,p=i.sum64_4_hi,f=i.sum64_4_lo,m=i.sum64_5_hi,g=i.sum64_5_lo,v=r.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function E(e,t,n,i,r){var o=e&n^~e&r;return o<0&&(o+=4294967296),o}function S(e,t,n,i,r,o){var s=t&i^~t&o;return s<0&&(s+=4294967296),s}function w(e,t,n,i,r){var o=e&n^e&r^n&r;return o<0&&(o+=4294967296),o}function _(e,t,n,i,r,o){var s=t&i^t&o^i&o;return s<0&&(s+=4294967296),s}function T(e,t){var n=s(e,t,28)^s(t,e,2)^s(t,e,7);return n<0&&(n+=4294967296),n}function x(e,t){var n=a(e,t,28)^a(t,e,2)^a(t,e,7);return n<0&&(n+=4294967296),n}function C(e,t){var n=a(e,t,14)^a(e,t,18)^a(t,e,9);return n<0&&(n+=4294967296),n}function I(e,t){var n=s(e,t,1)^s(e,t,8)^c(e,t,7);return n<0&&(n+=4294967296),n}function k(e,t){var n=a(e,t,1)^a(e,t,8)^l(e,t,7);return n<0&&(n+=4294967296),n}function M(e,t){var n=a(e,t,19)^a(t,e,29)^l(e,t,6);return n<0&&(n+=4294967296),n}i.inherits(b,v),e.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var r=(g=n[i-4],v=n[i-3],y=void 0,(y=s(g,v,19)^s(v,g,29)^c(g,v,6))<0&&(y+=4294967296),y),o=M(n[i-4],n[i-3]),a=n[i-14],l=n[i-13],u=I(n[i-30],n[i-29]),d=k(n[i-30],n[i-29]),h=n[i-32],m=n[i-31];n[i]=p(r,o,a,l,u,d,h,m),n[i+1]=f(r,o,a,l,u,d,h,m)}var g,v,y},b.prototype._update=function(e,t){this._prepareBlock(e,t);var n,i,r,a=this.W,c=this.h[0],l=this.h[1],p=this.h[2],f=this.h[3],v=this.h[4],y=this.h[5],b=this.h[6],I=this.h[7],k=this.h[8],M=this.h[9],A=this.h[10],O=this.h[11],R=this.h[12],L=this.h[13],D=this.h[14],N=this.h[15];o(this.k.length===a.length);for(var P=0;P<a.length;P+=2){var $=D,U=N,B=(r=void 0,(r=s(n=k,i=M,14)^s(n,i,18)^s(i,n,9))<0&&(r+=4294967296),r),F=C(k,M),j=E(k,0,A,0,R),H=S(0,M,0,O,0,L),K=this.k[P],q=this.k[P+1],V=a[P],G=a[P+1],W=m($,U,B,F,j,H,K,q,V,G),z=g($,U,B,F,j,H,K,q,V,G);$=T(c,l),U=x(c,l),B=w(c,0,p,0,v),F=_(0,l,0,f,0,y);var Y=d($,U,B,F),X=h($,U,B,F);D=R,N=L,R=A,L=O,A=k,O=M,k=d(b,I,W,z),M=h(I,I,W,z),b=v,I=y,v=p,y=f,p=c,f=l,c=d(W,z,Y,X),l=h(W,z,Y,X)}u(this.h,0,c,l),u(this.h,2,p,f),u(this.h,4,v,y),u(this.h,6,b,I),u(this.h,8,k,M),u(this.h,10,A,O),u(this.h,12,R,L),u(this.h,14,D,N)},b.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},37038:(e,t,n)=>{"use strict";var i=n(26436).rotr32;function r(e,t,n){return e&t^~e&n}function o(e,t,n){return e&t^e&n^t&n}function s(e,t,n){return e^t^n}t.ft_1=function(e,t,n,i){return 0===e?r(t,n,i):1===e||3===e?s(t,n,i):2===e?o(t,n,i):void 0},t.ch32=r,t.maj32=o,t.p32=s,t.s0_256=function(e){return i(e,2)^i(e,13)^i(e,22)},t.s1_256=function(e){return i(e,6)^i(e,11)^i(e,25)},t.g0_256=function(e){return i(e,7)^i(e,18)^e>>>3},t.g1_256=function(e){return i(e,17)^i(e,19)^e>>>10}},26436:(e,t,n)=>{"use strict";var i=n(79746),r=n(35717);function o(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function s(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function a(e){return 1===e.length?"0"+e:e}function c(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=r,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),r=0;r<e.length;r+=2)n.push(parseInt(e[r]+e[r+1],16))}else for(var i=0,r=0;r<e.length;r++){var s=e.charCodeAt(r);s<128?n[i++]=s:s<2048?(n[i++]=s>>6|192,n[i++]=63&s|128):o(e,r)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),n[i++]=s>>18|240,n[i++]=s>>12&63|128,n[i++]=s>>6&63|128,n[i++]=63&s|128):(n[i++]=s>>12|224,n[i++]=s>>6&63|128,n[i++]=63&s|128)}else for(r=0;r<e.length;r++)n[r]=0|e[r];return n},t.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=a(e[n].toString(16));return t},t.htonl=s,t.toHex32=function(e,t){for(var n="",i=0;i<e.length;i++){var r=e[i];"little"===t&&(r=s(r)),n+=c(r.toString(16))}return n},t.zero2=a,t.zero8=c,t.join32=function(e,t,n,r){var o=n-t;i(o%4==0);for(var s=new Array(o/4),a=0,c=t;a<s.length;a++,c+=4){var l;l="big"===r?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],s[a]=l>>>0}return s},t.split32=function(e,t){for(var n=new Array(4*e.length),i=0,r=0;i<e.length;i++,r+=4){var o=e[i];"big"===t?(n[r]=o>>>24,n[r+1]=o>>>16&255,n[r+2]=o>>>8&255,n[r+3]=255&o):(n[r+3]=o>>>24,n[r+2]=o>>>16&255,n[r+1]=o>>>8&255,n[r]=255&o)}return n},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,n){return e+t+n>>>0},t.sum32_4=function(e,t,n,i){return e+t+n+i>>>0},t.sum32_5=function(e,t,n,i,r){return e+t+n+i+r>>>0},t.sum64=function(e,t,n,i){var r=e[t],o=i+e[t+1]>>>0,s=(o<i?1:0)+n+r;e[t]=s>>>0,e[t+1]=o},t.sum64_hi=function(e,t,n,i){return(t+i>>>0<t?1:0)+e+n>>>0},t.sum64_lo=function(e,t,n,i){return t+i>>>0},t.sum64_4_hi=function(e,t,n,i,r,o,s,a){var c=0,l=t;return c+=(l=l+i>>>0)<t?1:0,c+=(l=l+o>>>0)<o?1:0,e+n+r+s+(c+=(l=l+a>>>0)<a?1:0)>>>0},t.sum64_4_lo=function(e,t,n,i,r,o,s,a){return t+i+o+a>>>0},t.sum64_5_hi=function(e,t,n,i,r,o,s,a,c,l){var u=0,d=t;return u+=(d=d+i>>>0)<t?1:0,u+=(d=d+o>>>0)<o?1:0,u+=(d=d+a>>>0)<a?1:0,e+n+r+s+c+(u+=(d=d+l>>>0)<l?1:0)>>>0},t.sum64_5_lo=function(e,t,n,i,r,o,s,a,c,l){return t+i+o+a+l>>>0},t.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},t.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},t.shr64_hi=function(e,t,n){return e>>>n},t.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0}},76331:(e,t,n)=>{"use strict";var i=n(97247),r=n(11218),o=n(99560),s=n(99640),a=n(36582),c=n(56851),l=n(57848),u=n(70006),d=n(48145),h=d("root"),p=d("element"),f=d("text");function m(e,t,n){var i,o,s=n.schema,a=s,c=t.tagName,l={},d=[],h=-1;for(i in"html"===s.space&&"svg"===c.toLowerCase()&&(a=r,n.schema=a),t.properties)g(l,i,t.properties[i],n,c);if(n.vdom&&("html"===a.space?c=c.toUpperCase():l.namespace=u[a.space]),n.prefix&&(n.key++,l.key=n.prefix+n.key),t.children)for(;++h<t.children.length;)o=t.children[h],p(o)?d.push(m(e,o,n)):f(o)&&d.push(o.value);return n.schema=s,d.length?e.call(t,c,l,d):e.call(t,c,l)}function g(e,t,n,i,r){var u,d=o(i.schema,t);null==n||n!=n||!1===n&&(i.vue||i.vdom||i.hyperscript)||!n&&d.boolean&&(i.vue||i.vdom||i.hyperscript)||(n&&"object"==typeof n&&"length"in n&&(n=(d.commaSeparated?c:a).stringify(n)),d.boolean&&i.hyperscript&&(n=""),"style"===d.property&&"string"==typeof n&&(i.react||i.vue||i.vdom)&&(n=function(e,t){var n={};try{l(e,(function(e,t){"-ms-"===e.slice(0,4)&&(e="ms-"+e.slice(4)),n[e.replace(/-([a-z])/g,y)]=t}))}catch(e){throw e.message=t+"[style]"+e.message.slice("undefined".length),e}return n}(n,r)),i.vue?"style"!==d.property&&(u="attrs"):d.mustUseProperty||(i.vdom?"style"!==d.property&&(u="attributes"):i.hyperscript&&(u="attrs")),u?(e[u]||(e[u]={}),e[u][d.attribute]=n):d.space&&i.react?e[s[d.property]||d.property]=n:e[d.attribute]=n)}function v(e){return Boolean(e&&e.context&&e.cleanup)}function y(e,t){return t.toUpperCase()}e.exports=function(e,t,n){var o,s=n||{},a=function(e){var t=e&&e("div");return Boolean(t&&("_owner"in t||"_store"in t)&&null==t.key)}(e),c=function(e){var t=e&&e("div");return Boolean(t&&t.context&&t.context._isVue)}(e),l=function(e){return e&&"VirtualNode"===e("div").type}(e);if("function"!=typeof e)throw new Error("h is not a function");if("string"==typeof s||"boolean"==typeof s?(o=s,s={}):o=s.prefix,h(t))t=1===t.children.length&&p(t.children[0])?t.children[0]:{type:"element",tagName:"div",properties:{},children:t.children};else if(!p(t))throw new Error("Expected root or element, not `"+(t&&t.type||t)+"`");return m(e,t,{schema:"svg"===s.space?r:i,prefix:null==o?a||c||l?"h-":null:o,key:0,react:a,vue:c,vdom:l,hyperscript:v(e)})}},92114:(e,t,n)=>{"use strict";var i=n(9505),r=n(31742),o=n(99560),s=n(97247),a=n(11218),c=n(14787),l=n(70006);e.exports=function(e,t){var n,i=t||{};return i.messages?(n=i,i={}):n=i.file,h(e,{schema:"svg"===i.space?a:s,file:n,verbose:i.verbose})};var u={}.hasOwnProperty,d={"#document":p,"#document-fragment":p,"#text":function(e){return{type:"text",value:e.value}},"#comment":function(e){return{type:"comment",value:e.data}},"#documentType":function(e){return{type:"doctype",name:e.name||"",public:e.publicId||null,system:e.systemId||null}}};function h(e,t){var n,i,r,o=t.schema,c=u.call(d,e.nodeName)?d[e.nodeName]:f;return c===f&&(t.schema=e.namespaceURI===l.svg?a:s),e.childNodes&&(n=function(e,t){for(var n=-1,i=[];++n<e.length;)i[n]=h(e[n],t);return i}(e.childNodes,t)),i=c(e,n,t),e.sourceCodeLocation&&t.file&&(r=m(i,e.sourceCodeLocation,t))&&(t.location=!0,i.position=r),t.schema=o,i}function p(e,t,n){var i,r,o={type:"root",children:t,data:{quirksMode:"quirks"===e.mode||"limited-quirks"===e.mode}};return n.file&&n.location&&(i=String(n.file),r=c(i),o.position={start:r.toPoint(0),end:r.toPoint(i.length)}),o}function f(e,t,n){for(var o,s,a,c,l,u="svg"===n.schema.space?i:r,d={},p=-1;++p<e.attrs.length;)d[((s=e.attrs[p]).prefix?s.prefix+":":"")+s.name]=s.value;return"template"===(o=u(e.tagName,d,t)).tagName&&"content"in e&&(c=(a=e.sourceCodeLocation)&&a.startTag&&g(a.startTag).end,l=a&&a.endTag&&g(a.endTag).start,o.content=h(e.content,n),(c||l)&&n.file&&(o.content.position={start:c,end:l})),o}function m(e,t,n){var i,r,s,a=g(t);if("element"===e.type&&(i=e.children[e.children.length-1],!t.endTag&&i&&i.position&&i.position.end&&(a.end=Object.assign({},i.position.end)),n.verbose)){for(r in s={},t.attrs)s[o(n.schema,r).property]=g(t.attrs[r]);e.data={position:{opening:g(t.startTag),closing:t.endTag?g(t.endTag):null,properties:s}}}return a}function g(e){var t=v({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=v({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:null}function v(e){return e.line&&e.column?e:null}},83216:e=>{"use strict";function t(e){return e&&"object"==typeof e&&"element"===e.type&&"string"==typeof e.tagName}e.exports=function e(n){if("string"==typeof n)return function(e){return function(n){return t(n)&&n.tagName===e}}(n);if(null==n)return t;if("object"==typeof n)return i=function(t){for(var n=t.length,i=-1,r=[];++i<n;)r[i]=e(t[i]);return r}(n),r=i.length,function(){for(var e=-1;++e<r;)if(i[e].apply(this,arguments))return!0;return!1};var i,r;if("function"==typeof n)return function(e){return function(n){return t(n)&&Boolean(e.apply(this,arguments))}}(n);throw new Error("Expected function, string, or array as test")}},78909:(e,t,n)=>{"use strict";var i=n(83216);function r(e,t,n,r,o){var s=null!=r,a=null!=n,c=i(t);if(a&&("number"!=typeof n||n<0||n===1/0))throw new Error("Expected positive finite index for child node");if(s&&(!r.type||!r.children))throw new Error("Expected parent node");if(!e||!e.type||"string"!=typeof e.type)return!1;if(s!==a)throw new Error("Expected both parent and index");return c.call(o,e,n,r)}e.exports=r,r.convert=i},78892:e=>{"use strict";e.exports=function(e,n){for(var i,r,o,s=e||"",a=n||"div",c={},l=0;l<s.length;)t.lastIndex=l,o=t.exec(s),(i=s.slice(l,o?o.index:s.length))&&(r?"#"===r?c.id=i:c.className?c.className.push(i):c.className=[i]:a=i,l+=i.length),o&&(r=o[0],l++);return{type:"element",tagName:a,properties:c,children:[]}};var t=/[#.]/g},36343:(e,t,n)=>{"use strict";var i=n(7045),r=n(77361),o=n(62854),s=n(92114),a=n(2653),c=n(69878),l=n(70006),u=n(68019),d=n(47529);e.exports=function e(t,n,E){var S,w,_,T,x,C,I,k,M,A,O=new i(g),R=u("type",{handlers:{root:function(e){L(e.children)},element:function(e){P(),O._processToken(function(e){var t=b(e);return t.startTag=d(t),{type:"START_TAG_TOKEN",tagName:e.tagName,selfClosing:!1,attrs:v(e),location:t}}(e),l.html),L(e.children),c.indexOf(e.tagName)<0&&(P(),O._processToken(function(e){var t=b(e);return t.endTag=d(t),{type:f,tagName:e.tagName,attrs:[],location:t}}(e)))},text:function(e){P(),O._processToken({type:p,chars:e.value,location:b(e)})},comment:D,doctype:function(e){var t=a(e);P(),O._processToken({type:m,name:t.name,forceQuirks:!1,publicId:t.publicId,systemId:t.systemId,location:b(e)})},raw:function(e){var t,n=r.start(e),i=n.line||1,o=n.column||1,s=n.offset||0;_.html=null,_.pos=-1,_.lastGapPos=-1,_.lastCharPos=-1,_.gapStack=[],_.skipNextNewLine=!1,_.lastChunkWritten=!1,_.endOfChunkHit=!1,T.isEol=!1,T.lineStartPos=1-o,T.droppedBufferSize=s,T.offset=0,T.col=1,T.line=i,x.currentAttrLocation=null,x.ctLoc=b(e),w.write(e.value),O._runParsingLoop(null),(t=w.currentCharacterToken)&&(t.location.endLine=T.line,t.location.endCol=T.col+1,t.location.endOffset=T.offset+1,O._processToken(t))}},unknown:y});if(n&&!("contents"in n)&&(E=n,n=void 0),E&&E.passThrough)for(I=-1;++I<E.passThrough.length;)R.handlers[E.passThrough[I]]=N;return C=s(!(A="root"===(M=t).type?M.children[0]:M)||"doctype"!==A.type&&"html"!==A.tagName?function(){var e={nodeName:"template",tagName:"template",attrs:[],namespaceURI:l.html,childNodes:[]},n={nodeName:"documentmock",tagName:"documentmock",attrs:[],namespaceURI:l.html,childNodes:[]},i={nodeName:"#document-fragment",childNodes:[]};return O._bootstrap(n,e),O._pushTmplInsertionMode(h),O._initTokenizerForFragmentParsing(),O._insertFakeRootElement(),O._resetInsertionMode(),O._findFormInFragmentContext(),w=O.tokenizer,_=w.preprocessor,x=w.__mixins[0],T=x.posTracker,R(t),O._adoptNodes(n.childNodes[0],i),i}():(k=O.treeAdapter.createDocument(),O._bootstrap(k,null),w=O.tokenizer,_=w.preprocessor,x=w.__mixins[0],T=x.posTracker,R(t),k),n),S&&o(C,"comment",(function(e,t,n){if(e.value.stitch)return n.children[t]=e.value.stitch,t})),"root"!==t.type&&1===C.children.length?C.children[0]:C;function L(e){var t=-1;if(e)for(;++t<e.length;)R(e[t])}function D(e){P(),O._processToken({type:"COMMENT_TOKEN",data:e.value,location:b(e)})}function N(t){var i=Object.assign({},t);S=!0,t.children&&(i.children=e({type:"root",children:t.children},n,E).children),D({value:{stitch:i}})}function P(){w.tokenQueue=[],w.state="DATA_STATE",w.returnState="",w.charRefCode=-1,w.tempBuff=[],w.lastStartTagName="",w.consumedAfterSnapshot=-1,w.active=!1,w.currentCharacterToken=null,w.currentToken=null,w.currentAttr=null}};var h="IN_TEMPLATE_MODE",p="CHARACTER_TOKEN",f="END_TAG_TOKEN",m="DOCTYPE_TOKEN",g={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function v(e){return a({tagName:e.tagName,type:"element",properties:e.properties}).attrs}function y(e){throw new Error("Cannot compile `"+e.type+"` node")}function b(e){var t=r.start(e),n=r.end(e);return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}},52624:(e,t,n)=>{"use strict";e.exports=n(41672)},41672:(e,t,n)=>{"use strict";var i=n(47529),r=n(29370);e.exports=function(e,t){var n,o={type:"root",children:[]};return e&&"object"==typeof e&&e.type&&(n=c(i(r,t||{}),e,[]))&&("length"in n?1===n.length?o=n[0]:o.children=n:o=n),o};var o={}.hasOwnProperty,s=[].push,a={root:{children:l},doctype:function(e){return e.allowDoctypes?{name:h}:null},comment:function(e){return e.allowComments?{value:f}:null},element:{tagName:p,properties:function(e,t,n,r){var s,a,c,l,h=p(e,n.tagName,0,r),f=e.required||{},g=t||{},v=i(m(e.attributes["*"]),m(o.call(e.attributes,h)?e.attributes[h]:[])),y={};for(a in g){if(o.call(v,a))s=v[a];else{if(!((l=a).length>4&&"data"===l.slice(0,4).toLowerCase()&&o.call(v,"data*")))continue;s=v["data*"]}null!=(c=(c=g[a])&&"object"==typeof c&&"length"in c?u(e,c,a,s):d(e,c,a,s))&&(y[a]=c)}if(o.call(f,h))for(a in f[h])o.call(y,a)||(y[a]=f[h][a]);return y},children:l},text:{value:function(e,t){return"string"==typeof t?t:""}},"*":{data:g,position:g}};function c(e,t,n){var r,s,c,l,u,d=t&&t.type,h={type:t.type};if(o.call(a,d)&&("function"==typeof(s=a[d])&&(s=s(e,t)),s))for(u in r=!0,c=i(s,a["*"]))!1===(l=c[u](e,t[u],t,n))?(r=null,h[u]=t[u]):null!=l&&(h[u]=l);return r?h:h.children&&h.children.length&&e.strip.indexOf(h.tagName)<0?h.children:null}function l(e,t,n,i){var r,o=[],a=-1;if(t){for(i.push(n.tagName);++a<t.length;)(r=c(e,t[a],i))&&("length"in r?s.apply(o,r):o.push(r));i.pop()}return o}function u(e,t,n,i){for(var r,o=[],s=-1;++s<t.length;)null!=(r=d(e,t[s],n,i))&&o.push(r);return o}function d(e,t,n,i){if(("boolean"==typeof t||"number"==typeof t||"string"==typeof t)&&function(e,t,n){var i=String(t),r=i.indexOf(":"),s=i.indexOf("?"),a=i.indexOf("#"),c=i.indexOf("/"),l=o.call(e.protocols,n)?e.protocols[n].concat():[],u=-1;if(!l.length||r<0||c>-1&&r>c||s>-1&&r>s||a>-1&&r>a)return!0;for(;++u<l.length;)if(r===l[u].length&&i.slice(0,l[u].length)===l[u])return!0;return!1}(e,t,n)&&(!i.length||i.indexOf(t)>-1))return e.clobber.indexOf(n)<0?t:e.clobberPrefix+t}function h(){return"html"}function p(e,t,n,i){var r="string"==typeof t&&t,s=-1;if(!r||"*"===r||e.tagNames.indexOf(r)<0)return!1;if(o.call(e.ancestors,r)){for(;++s<e.ancestors[r].length;)if(i.indexOf(e.ancestors[r][s])>-1)return r;return!1}return r}function f(e,t){var n="string"==typeof t?t:"",i=n.indexOf("--\x3e");return i<0?n:n.slice(0,i)}function m(e){for(var t,n={},i=-1;++i<e.length;)(t=e[i])&&"object"==typeof t&&"length"in t?n[t[0]]=t.slice(1):n[t]=[];return n}function g(e,t){return t}},773:(e,t,n)=>{"use strict";e.exports=n(35204)},65802:(e,t,n)=>{"use strict";var i=n(91878);e.exports=function(e,t){for(var n=[],r=t&&t.children||[],o=-1;++o<r.length;)n[o]=i(e,r[o],o,t);return n.join("")}},11928:(e,t,n)=>{"use strict";var i=n(47529),r=n(24860);e.exports=function(e,t){return e.bogusComments?"<?"+r(t.value,i(e.entities,{subset:[">"]}))+">":"\x3c!--"+t.value.replace(/^>|^->|<!--|-->|--!>|<!-$/g,(function(t){return r(t,i(e.entities,{subset:["<",">"]}))}))+"--\x3e"}},15966:e=>{"use strict";e.exports={name:[["\t\n\f\r &/=>".split(""),"\t\n\f\r \"&'/=>`".split("")],["\0\t\n\f\r \"&'/<=>".split(""),"\0\t\n\f\r \"&'/<=>`".split("")]],unquoted:[["\t\n\f\r &>".split(""),"\0\t\n\f\r \"&'<=>`".split("")],["\0\t\n\f\r \"&'<=>`".split(""),"\0\t\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]}},15842:(e,t,n)=>{"use strict";var i=n(47529),r=n(30932),o=n(24860);function s(e,t){var n=String(t),s=r(n,e.quote)>r(n,e.alternative)?e.alternative:e.quote;return s+o(n,i(e.entities,{subset:["<","&",s]}))+s}e.exports=function(e,t){var n=e.tightDoctype?"":" ",i=["<!"+(e.upperDoctype?"DOCTYPE":"doctype")];return t.name&&(i.push(n,t.name),null!=t.public?i.push(" public",n,s(e,t.public)):null!=t.system&&i.push(" system"),null!=t.system&&i.push(n,s(e,t.system))),i.join("")+">"}},14307:(e,t,n)=>{"use strict";var i=n(47529),r=n(11218),o=n(99560),s=n(36582),a=n(56851),c=n(24860),l=n(30932),u=n(65802),d=n(15966);function h(e,t,n){var r,u,h=o(e.schema,t),p=e.quote;return!h.overloadedBoolean||n!==h.attribute&&""!==n?(h.boolean||h.overloadedBoolean&&"string"!=typeof n)&&(n=Boolean(n)):n=!0,null==n||!1===n||"number"==typeof n&&n!=n?"":(u=c(h.attribute,i(e.entities,{subset:d.name["html"===e.schema.space?e.valid:1][e.safe]})),!0===n?u:(n="object"==typeof n&&"length"in n?(h.commaSeparated?a.stringify:s.stringify)(n,{padLeft:!e.tightLists}):String(n),e.collapseEmpty&&!n?u:(e.unquoted&&(r=c(n,i(e.entities,{subset:d.unquoted[e.valid][e.safe],attribute:!0}))),r!==n&&(e.smart&&l(n,p)>l(n,e.alternative)&&(p=e.alternative),r=p+c(n,i(e.entities,{subset:("'"===p?d.single:d.double)["html"===e.schema.space?e.valid:1][e.safe],attribute:!0}))+p),u+(r?"="+r:r))))}e.exports=function(e,t,n,i){var o,s,a,c=e.schema,l="svg"!==c.space&&e.omit,d=[],p="svg"===c.space?e.closeEmpty:e.voids.indexOf(t.tagName.toLowerCase())>-1;return"html"===c.space&&"svg"===t.tagName&&(e.schema=r),o=function(e,t){var n,i,r,o=[],s=-1;for(n in t)null!=t[n]&&(i=h(e,n,t[n]))&&o.push(i);for(;++s<o.length;)r=e.tight?o[s].charAt(o[s].length-1):null,s!==o.length-1&&'"'!==r&&"'"!==r&&(o[s]+=" ");return o.join("")}(e,t.properties),s=u(e,"html"===c.space&&"template"===t.tagName?t.content:t),e.schema=c,s&&(p=!1),!o&&l&&l.opening(t,n,i)||(d.push("<",t.tagName,o?" "+o:""),p&&("svg"===c.space||e.close)&&(a=o.charAt(o.length-1),(!e.tightClose||"/"===a||"svg"===c.space&&a&&'"'!==a&&"'"!==a)&&d.push(" "),d.push("/")),d.push(">")),d.push(s),p||l&&l.closing(t,n,i)||d.push("</"+t.tagName+">"),d.join("")}},35204:(e,t,n)=>{"use strict";var i,r=n(25108),o=n(97247),s=n(11218),a=n(69878),c=n(1600),l=n(91878);e.exports=function(e,t){var n=t||{},u=n.quote||'"',d='"'===u?"'":'"';if('"'!==u&&"'"!==u)throw new Error("Invalid quote `"+u+"`, expected `'` or `\"`");return"allowDangerousHTML"in n&&!i&&(i=!0,r.warn("Deprecation warning: `allowDangerousHTML` is a nonstandard option, use `allowDangerousHtml` instead")),l({valid:n.allowParseErrors?0:1,safe:n.allowDangerousCharacters?0:1,schema:"svg"===n.space?s:o,omit:n.omitOptionalTags&&c,quote:u,alternative:d,smart:n.quoteSmart,unquoted:n.preferUnquoted,tight:n.tightAttributes,upperDoctype:n.upperDoctype,tightDoctype:n.tightDoctype,bogusComments:n.bogusComments,tightLists:n.tightCommaSeparatedLists,tightClose:n.tightSelfClosing,collapseEmpty:n.collapseEmptyAttributes,dangerous:n.allowDangerousHtml||n.allowDangerousHTML,voids:n.voids||a.concat(),entities:n.entities||{},close:n.closeSelfClosing,closeEmpty:n.closeEmptyElements},e&&"object"==typeof e&&"length"in e?{type:"root",children:e}:e)}},78639:(e,t,n)=>{"use strict";var i=n(78909),r=n(38115),o=n(51930),s=n(43370),a=n(15254);function c(e,t,n){var i=s.after(n,t,!0);return!i||!o(i)&&!r(i)}function l(e,t,n){var r=s.after(n,t);return!r||i(r,["rp","rt"])}function u(e,t,n){var r=s.after(n,t);return!r||i(r,["td","th"])}e.exports=a({html:function(e,t,n){var i=s.after(n,t);return!i||!o(i)},head:c,body:function(e,t,n){var i=s.after(n,t);return!i||!o(i)},p:function(e,t,n){var r=s.after(n,t);return r?i(r,["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","menu","nav","ol","p","pre","section","table","ul"]):!n||!i(n,["a","audio","del","ins","map","noscript","video"])},li:function(e,t,n){var r=s.after(n,t);return!r||i(r,"li")},dt:function(e,t,n){var r=s.after(n,t);return r&&i(r,["dt","dd"])},dd:function(e,t,n){var r=s.after(n,t);return!r||i(r,["dt","dd"])},rt:l,rp:l,optgroup:function(e,t,n){var r=s.after(n,t);return!r||i(r,"optgroup")},option:function(e,t,n){var r=s.after(n,t);return!r||i(r,["option","optgroup"])},menuitem:function(e,t,n){var r=s.after(n,t);return!r||i(r,["menuitem","hr","menu"])},colgroup:c,caption:c,thead:function(e,t,n){var r=s.after(n,t);return r&&i(r,["tbody","tfoot"])},tbody:function(e,t,n){var r=s.after(n,t);return!r||i(r,["tbody","tfoot"])},tfoot:function(e,t,n){return!s.after(n,t)},tr:function(e,t,n){var r=s.after(n,t);return!r||i(r,"tr")},td:u,th:u})},1600:(e,t,n)=>{"use strict";t.opening=n(36014),t.closing=n(78639)},15254:e=>{"use strict";e.exports=function(e){return function(n,i,r){return t.call(e,n.tagName)&&e[n.tagName](n,i,r)}};var t={}.hasOwnProperty},36014:(e,t,n)=>{"use strict";var i=n(78909),r=n(43370),o=n(38115),s=n(51930),a=n(78639),c=n(15254);e.exports=c({html:function(e){var t=r.after(e,-1);return!t||!s(t)},head:function(e){for(var t=e.children,n=[],r=-1;++r<t.length;)if(i(t[r],["title","base"])){if(n.indexOf(t[r].tagName)>-1)return!1;n.push(t[r].tagName)}return t.length},body:function(e){var t=r.after(e,-1,!0);return!t||!s(t)&&!o(t)&&!i(t,["meta","link","script","style","template"])},colgroup:function(e,t,n){var o=r.before(n,t),s=r.after(e,-1,!0);return(!i(o,"colgroup")||!a(o,n.children.indexOf(o),n))&&(s&&i(s,"col"))},tbody:function(e,t,n){var o=r.before(n,t),s=r.after(e,-1);return(!i(o,["thead","tbody"])||!a(o,n.children.indexOf(o),n))&&(s&&i(s,"tr"))}})},51930:(e,t,n)=>{"use strict";var i=n(48145);e.exports=i("comment")},43370:(e,t,n)=>{"use strict";var i=n(53560);function r(e){return function(t,n,r){var o=t&&t.children,s=n+e,a=o&&o[s];if(!r)for(;a&&i(a);)a=o[s+=e];return a}}t.before=r(-1),t.after=r(1)},38115:(e,t,n)=>{"use strict";var i=n(48145),r=n(53560);e.exports=function(e){return o(e)&&r(e.value.charAt(0))};var o=i("text")},91878:(e,t,n)=>{"use strict";e.exports=function(e,t,n,o){if(!t||!t.type)throw new Error("Expected node, not `"+t+"`");if(!r.call(i,t.type))throw new Error("Cannot compile unknown node `"+t.type+"`");return i[t.type](e,t,n,o)};var i={comment:n(11928),doctype:n(15842),element:n(14307),raw:n(29044),root:n(65802),text:n(29514)},r={}.hasOwnProperty},29044:(e,t,n)=>{"use strict";var i=n(29514);e.exports=function(e,t){return e.dangerous?t.value:i(e,t)}},29514:(e,t,n)=>{"use strict";var i=n(47529),r=n(24860);e.exports=function(e,t,n,o){return!o||"script"!==o.tagName&&"style"!==o.tagName?r(t.value,i(e.entities,{subset:["<","&"]})):t.value}},2653:(e,t,n)=>{"use strict";var i=n(47529),r=n(97247),o=n(11218),s=n(99560),a=n(76331),c=n(70006),l=n(68019);e.exports=function(e,t){return d(e,"svg"===t?o:r)};var u=["svg","html"],d=l("type");function h(e,t,n){var i,r=n,s=e.position,a=e.children,l=[],u=a?a.length:0,h=-1;for("element"===e.type&&("html"===r.space&&"svg"===e.tagName&&(r=o),t.namespaceURI=c[r.space]);++h<u;)(i=d(a[h],r)).parentNode=t,l[h]=i;return"element"!==e.type&&"root"!==e.type||(t.childNodes=l),s&&s.start&&s.end&&(t.sourceCodeLocation={startLine:s.start.line,startCol:s.start.column,startOffset:s.start.offset,endLine:s.end.line,endCol:s.end.column,endOffset:s.end.offset}),t}d.handlers.root=function(e,t){return h(e,{nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks"},t)},d.handlers.element=function(e,t){var n=t.space,r=i(e,{children:[]});return a((function(n,i){var o,a,l,d,p,f,m=[];for(d in i)p=s(t,d),!1===(a=i[d])||p.boolean&&!a||(l={name:d,value:!0===a?"":String(a)},p.space&&-1===u.indexOf(p.space)&&(-1===(f=d.indexOf(":"))?l.prefix="":(l.name=d.slice(f+1),l.prefix=d.slice(0,f)),l.namespace=c[p.space]),m.push(l));return o=h(e,{nodeName:n,tagName:n,attrs:m},t),"template"===n&&(o.content=function(e,t){return h(e,{nodeName:"#document-fragment"},t)}(r.content,t)),o}),r,{space:n})},d.handlers.text=function(e,t){return h(e,{nodeName:"#text",value:e.value},t)},d.handlers.comment=function(e,t){return h(e,{nodeName:"#comment",data:e.value},t)},d.handlers.doctype=function(e,t){return h(e,{nodeName:"#documentType",name:e.name,publicId:e.public||"",systemId:e.system||""},t)}},53560:e=>{"use strict";e.exports=function(e){var n;if(e&&"object"==typeof e&&"text"===e.type)n=e.value||"";else{if("string"!=typeof e)return!1;n=e}return""===n.replace(t,"")};var t=/[ \t\n\f\r]/g},62686:(e,t,n)=>{"use strict";var i=n(99560),r=n(66632),o=n(78892),s=n(36582).parse,a=n(56851).parse;e.exports=function(e,t,n){var r=n?function(e){for(var t,n=e.length,i=-1,r={};++i<n;)r[(t=e[i]).toLowerCase()]=t;return r}(n):null;return function(e,n){var i,s=o(e,t),a=Array.prototype.slice.call(arguments,2),d=s.tagName.toLowerCase();if(s.tagName=r&&c.call(r,d)?r[d]:d,n&&l(n,s)&&(a.unshift(n),n=null),n)for(i in n)h(s.properties,i,n[i]);return u(s.children,a),"template"===s.tagName&&(s.content={type:"root",children:s.children},s.children=[]),s};function h(t,n,r){var o,c,l;null!=r&&r==r&&(c=(o=i(e,n)).property,"string"==typeof(l=r)&&(o.spaceSeparated?l=s(l):o.commaSeparated?l=a(l):o.commaOrSpaceSeparated&&(l=s(a(l).join(" ")))),"style"===c&&"string"!=typeof r&&(l=function(e){var t,n=[];for(t in e)n.push([t,e[t]].join(": "));return n.join("; ")}(l)),"className"===c&&t.className&&(l=t.className.concat(l)),t[c]=function(e,t,n){var i,r,o;if("object"!=typeof n||!("length"in n))return d(e,t,n);for(r=n.length,i=-1,o=[];++i<r;)o[i]=d(e,t,n[i]);return o}(o,c,l))}};var c={}.hasOwnProperty;function l(e,t){return"string"==typeof e||"length"in e||function(e,t){var n=t.type;return!("input"===e||!n||"string"!=typeof n)&&("object"==typeof t.children&&"length"in t.children||(n=n.toLowerCase(),"button"===e?"menu"!==n&&"submit"!==n&&"reset"!==n&&"button"!==n:"value"in t))}(t.tagName,e)}function u(e,t){var n,i;if("string"!=typeof t&&"number"!=typeof t)if("object"==typeof t&&"length"in t)for(n=-1,i=t.length;++n<i;)u(e,t[n]);else{if("object"!=typeof t||!("type"in t))throw new Error("Expected node, nodes, or string, got `"+t+"`");e.push(t)}else e.push({type:"text",value:String(t)})}function d(e,t,n){var i=n;return e.number||e.positiveNumber?isNaN(i)||""===i||(i=Number(i)):(e.boolean||e.overloadedBoolean)&&("string"!=typeof i||""!==i&&r(n)!==r(t)||(i=!0)),i}},52579:(e,t,n)=>{"use strict";var i=n(97247),r=n(62686)(i,"div");r.displayName="html",e.exports=r},31742:(e,t,n)=>{"use strict";e.exports=n(52579)},9505:(e,t,n)=>{"use strict";var i=n(11218),r=n(76947),o=n(62686)(i,"g",r);o.displayName="svg",e.exports=o},2156:(e,t,n)=>{"use strict";var i=n(33715),r=n(34504),o=n(79746);function s(e){if(!(this instanceof s))return new s(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=r.toArray(e.entropy,e.entropyEnc||"hex"),n=r.toArray(e.nonce,e.nonceEnc||"hex"),i=r.toArray(e.pers,e.persEnc||"hex");o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,i)}e.exports=s,s.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var r=0;r<this.V.length;r++)this.K[r]=0,this.V[r]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},s.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(e,t,n,i){"string"!=typeof t&&(i=n,n=t,t=null),e=r.toArray(e,t),n=r.toArray(n,i),o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},s.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i=n,n=t,t=null),n&&(n=r.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,e);return this._update(n),this._reseed++,r.encode(s,t)}},18139:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,i=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,c=/^\s+|\s+$/g,l="";function u(e){return e?e.replace(c,l):l}e.exports=function(e,c){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];c=c||{};var d=1,h=1;function p(e){var t=e.match(n);t&&(d+=t.length);var i=e.lastIndexOf("\n");h=~i?e.length-i:h+e.length}function f(){var e={line:d,column:h};return function(t){return t.position=new m(e),b(),t}}function m(e){this.start=e,this.end={line:d,column:h},this.source=c.source}m.prototype.content=e;var g=[];function v(t){var n=new Error(c.source+":"+d+":"+h+": "+t);if(n.reason=t,n.filename=c.source,n.line=d,n.column=h,n.source=e,!c.silent)throw n;g.push(n)}function y(t){var n=t.exec(e);if(n){var i=n[0];return p(i),e=e.slice(i.length),n}}function b(){y(i)}function E(e){var t;for(e=e||[];t=S();)!1!==t&&e.push(t);return e}function S(){var t=f();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;l!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,l===e.charAt(n-1))return v("End of comment missing");var i=e.slice(2,n-2);return h+=2,p(i),e=e.slice(n),h+=2,t({type:"comment",comment:i})}}function w(){var e=f(),n=y(r);if(n){if(S(),!y(o))return v("property missing ':'");var i=y(s),c=e({type:"declaration",property:u(n[0].replace(t,l)),value:i?u(i[0].replace(t,l)):l});return y(a),c}}return b(),function(){var e,t=[];for(E(t);e=w();)!1!==e&&(t.push(e),E(t));return t}()}},48738:e=>{e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},33310:e=>{"use strict";e.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},91296:(e,t,n)=>{var i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,u=c||l||Function("return this")(),d=Object.prototype.toString,h=Math.max,p=Math.min,f=function(){return u.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=o.test(e);return n||s.test(e)?a(e.slice(2),n?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var i,r,o,s,a,c,l=0,u=!1,d=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=i,o=r;return i=r=void 0,l=t,s=e.apply(o,n)}function b(e){return l=e,a=setTimeout(S,t),u?y(e):s}function E(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=o}function S(){var e=f();if(E(e))return w(e);a=setTimeout(S,function(e){var n=t-(e-c);return d?p(n,o-(e-l)):n}(e))}function w(e){return a=void 0,v&&i?y(e):(i=r=void 0,s)}function _(){var e=f(),n=E(e);if(i=arguments,r=this,c=e,n){if(void 0===a)return b(c);if(d)return a=setTimeout(S,t),y(c)}return void 0===a&&(a=setTimeout(S,t)),s}return t=g(t)||0,m(n)&&(u=!!n.leading,o=(d="maxWait"in n)?h(g(n.maxWait)||0,t):o,v="trailing"in n?!!n.trailing:v),_.cancel=function(){void 0!==a&&clearTimeout(a),l=0,i=c=r=a=void 0},_.flush=function(){return void 0===a?s:w(f())},_}},93096:(e,t,n)=>{var i="Expected a function",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,d=l||u||Function("return this")(),h=Object.prototype.toString,p=Math.max,f=Math.min,m=function(){return d.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=s.test(e);return n||a.test(e)?c(e.slice(2),n?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(i);return g(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),function(e,t,n){var r,o,s,a,c,l,u=0,d=!1,h=!1,y=!0;if("function"!=typeof e)throw new TypeError(i);function b(t){var n=r,i=o;return r=o=void 0,u=t,a=e.apply(i,n)}function E(e){return u=e,c=setTimeout(w,t),d?b(e):a}function S(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-u>=s}function w(){var e=m();if(S(e))return _(e);c=setTimeout(w,function(e){var n=t-(e-l);return h?f(n,s-(e-u)):n}(e))}function _(e){return c=void 0,y&&r?b(e):(r=o=void 0,a)}function T(){var e=m(),n=S(e);if(r=arguments,o=this,l=e,n){if(void 0===c)return E(l);if(h)return c=setTimeout(w,t),b(l)}return void 0===c&&(c=setTimeout(w,t)),a}return t=v(t)||0,g(n)&&(d=!!n.leading,s=(h="maxWait"in n)?p(v(n.maxWait)||0,t):s,y="trailing"in n?!!n.trailing:y),T.cancel=function(){void 0!==c&&clearTimeout(c),u=0,r=l=o=c=void 0},T.flush=function(){return void 0===c?a:_(m())},T}(e,t,{leading:r,maxWait:t,trailing:o})}},2043:function(e,t,n){var i,r,o=n(25108);!function(s,a){"use strict";i=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function s(){o.log&&(o.log.apply?o.log.apply(o,arguments):Function.prototype.apply.apply(o.log,[o,arguments])),o.trace&&o.trace()}function a(i){return"debug"===i&&(i="log"),typeof o!==t&&("trace"===i&&n?s:void 0!==o[i]?r(o,i):void 0!==o.log?r(o,"log"):e)}function c(t,n){for(var r=0;r<i.length;r++){var o=i[r];this[o]=r<t?e:this.methodFactory(o,t,n)}this.log=this.debug}function l(e,n,i){return function(){typeof o!==t&&(c.call(this,n,i),this[e].apply(this,arguments))}}function u(e,t,n){return a(e)||l.apply(this,arguments)}function d(e,n,r){var s,a=this,l="loglevel";function d(){var e;if(typeof window!==t&&l){try{e=window.localStorage[l]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,i=n.indexOf(encodeURIComponent(l)+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}"string"==typeof e?l+=":"+e:"symbol"==typeof e&&(l=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=r||u,a.getLevel=function(){return s},a.setLevel=function(n,r){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(s=n,!1!==r&&function(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&l){try{return void(window.localStorage[l]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+n+";"}catch(e){}}}(n),c.call(a,n,e),typeof o===t&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){d()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var h=d();null==h&&(h=null==n?"WARN":n),a.setLevel(h,!1)}var h=new d,p={};h.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=p[e];return t||(t=p[e]=new d(e,h.getLevel(),h.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return h.noConflict=function(){return typeof window!==t&&window.log===h&&(window.log=f),h},h.getLoggers=function(){return p},h.default=h,h},void 0===(r=i.call(t,n,t,e))||(e.exports=r)}()},78234:(e,t,n)=>{"use strict";var i=n(96464);e.exports=function(e,t){for(var n,u,d,h,p,f,m,g,v,y,b,E,S=t||{},w=!1!==S.padding,_=!1!==S.delimiterStart,T=!1!==S.delimiterEnd,x=(S.align||[]).concat(),C=!1!==S.alignDelimiters,I=[],k=S.stringLength||c,M=-1,A=e.length,O=[],R=[],L=[],D=[],N=[],P=0;++M<A;){for(u=-1,L=[],D=[],(d=(n=e[M]).length)>P&&(P=d);++u<d;)f=null==(E=n[u])?"":String(E),!0===C&&(p=k(f),D[u]=p,(void 0===(h=N[u])||p>h)&&(N[u]=p)),L.push(f);O[M]=L,R[M]=D}if(u=-1,d=P,"object"==typeof x&&"length"in x)for(;++u<d;)I[u]=l(x[u]);else for(b=l(x);++u<d;)I[u]=b;for(u=-1,d=P,L=[],D=[];++u<d;)v="",y="",108===(b=I[u])?v=s:b===a?y=s:99===b&&(v=s,y=s),p=C?Math.max(1,N[u]-v.length-y.length):1,f=v+i("-",p)+y,!0===C&&((p=v.length+p+y.length)>N[u]&&(N[u]=p),D[u]=p),L[u]=f;for(O.splice(1,0,L),R.splice(1,0,D),M=-1,A=O.length,m=[];++M<A;){for(L=O[M],D=R[M],u=-1,d=P,g=[];++u<d;)f=L[u]||"",v="",y="",!0===C&&(p=N[u]-(D[u]||0),(b=I[u])===a?v=i(o,p):99===b?p%2==0?y=v=i(o,p/2):(v=i(o,p/2+.5),y=i(o,p/2-.5)):y=i(o,p)),!0===_&&0===u&&g.push("|"),!0!==w||!1===C&&""===f||!0!==_&&0===u||g.push(o),!0===C&&g.push(v),g.push(f),!0===C&&g.push(y),!0===w&&g.push(o),!0!==T&&u===d-1||g.push("|");g=g.join(""),!1===T&&(g=g.replace(r,"")),m.push(g)}return m.join("\n")};var r=/ +$/,o=" ",s=":",a=114;function c(e){return e.length}function l(e){var t="string"==typeof e?e.charCodeAt(0):0;return 76===t||108===t?108:82===t||t===a?a:67===t||99===t?99:0}},57141:e=>{e.exports=function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,(function(e){return r(t[s][1][e]||e)}),l,l.exports,e,t,n,i)}return n[s].exports}for(var o=void 0,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function o(e){var t=String.fromCharCode.apply(null,e),n=window.btoa(t),i=e.length,r=4*Math.floor((i+2)/3)+(i+2)%3-2;return n.slice(0,r)}function s(e){for(var t=e+"===".slice(0,(4-e.length%4)%4),n=window.atob(t),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}Object.defineProperty(n,"__esModule",{value:!0}),n.decodeBase64=n.encodeBase64=n.decryptAttachment=n.encryptAttachment=void 0,n.encryptAttachment=function(e){return i(this,void 0,void 0,(function(){var t,n,i,s,a;return r(this,(function(r){switch(r.label){case 0:return t=new Uint8Array(16),window.crypto.getRandomValues(t.subarray(0,8)),[4,window.crypto.subtle.generateKey({name:"AES-CTR",length:256},!0,["encrypt","decrypt"])];case 1:return n=r.sent(),[4,window.crypto.subtle.exportKey("jwk",n)];case 2:return i=r.sent(),[4,window.crypto.subtle.encrypt({name:"AES-CTR",counter:t,length:64},n,e)];case 3:return s=r.sent(),[4,window.crypto.subtle.digest("SHA-256",s)];case 4:return a=r.sent(),[2,{data:s,info:{v:"v2",key:i,iv:o(t),hashes:{sha256:o(new Uint8Array(a))}}}]}}))}))},n.decryptAttachment=function(e,t){return i(this,void 0,void 0,(function(){var n,i,a,c,l;return r(this,(function(r){switch(r.label){case 0:if(void 0===t||void 0===t.key||void 0===t.iv||void 0===t.hashes||void 0===t.hashes.sha256)throw new Error("Invalid info. Missing info.key, info.iv or info.hashes.sha256 key");if(t.v&&!t.v.match(/^v[1-2]$/))throw new Error("Unsupported protocol version: "+t.v);return n=s(t.iv),i=t.hashes.sha256,[4,window.crypto.subtle.importKey("jwk",t.key,{name:"AES-CTR"},!1,["encrypt","decrypt"])];case 1:return a=r.sent(),[4,window.crypto.subtle.digest("SHA-256",e)];case 2:if(c=r.sent(),o(new Uint8Array(c))!=i)throw new Error("Mismatched SHA-256 digest");return l="v1"==t.v||"v2"==t.v?64:128,[2,window.crypto.subtle.decrypt({name:"AES-CTR",counter:n,length:l},a,e)]}}))}))},n.encodeBase64=o,n.decodeBase64=s},{}]},{},[1])(1)},30686:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensibleEvents=void 0;var i=n(25998),r=n(41940),o=n(5617),s=n(84600),a=n(86931),c=n(33637),l=n(85492);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"interpreters",new i.NamespacedMap([[o.LEGACY_M_ROOM_MESSAGE,o.parseMRoomMessage],[a.M_MESSAGE,s.parseMMessage],[a.M_EMOTE,s.parseMMessage],[a.M_NOTICE,s.parseMMessage],[c.M_POLL_START,l.parseMPoll],[c.M_POLL_RESPONSE,l.parseMPoll],[c.M_POLL_END,l.parseMPoll]])),h(this,"_unknownInterpretOrder",[a.M_MESSAGE])}var t,n,p;return t=e,p=[{key:"defaultInstance",get:function(){return e._defaultInstance}},{key:"unknownInterpretOrder",get:function(){return e.defaultInstance.unknownInterpretOrder},set:function(t){e.defaultInstance.unknownInterpretOrder=t}},{key:"registerInterpreter",value:function(t,n){e.defaultInstance.registerInterpreter(t,n)}},{key:"parse",value:function(t){return e.defaultInstance.parse(t)}}],(n=[{key:"unknownInterpretOrder",get:function(){var e;return null!==(e=this._unknownInterpretOrder)&&void 0!==e?e:[]},set:function(e){this._unknownInterpretOrder=e}},{key:"registerInterpreter",value:function(e,t){this.interpreters.set(e,t)}},{key:"parse",value:function(e){try{if(this.interpreters.hasNamespaced(e.type))return this.interpreters.getNamespaced(e.type)(e);var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(this.unknownInterpretOrder);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(this.interpreters.has(i)){var o=this.interpreters.get(i)(e);if(o)return o}}}catch(e){n.e(e)}finally{n.f()}return null}catch(e){if(e instanceof r.InvalidEventError)return null;throw e}}}])&&d(t.prototype,n),p&&d(t,p),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.ExtensibleEvents=p,h(p,"_defaultInstance",new p)},52508:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},41940:(e,t)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function r(e){var t="function"==typeof Map?new Map:void 0;return r=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return o(e,arguments,c(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a(i,e)},r(e)}function o(e,t,n){return o=s()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&a(r,n.prototype),r},o.apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidEventError=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(l,e);var t,n,r,o=(t=l,n=s(),function(){var e,r=c(t);if(n){var o=c(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return i(this,e)});function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),o.call(this,e)}return r=l,Object.defineProperty(r,"prototype",{writable:!1}),r}(r(Error));t.InvalidEventError=l},25998:(e,t)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.NamespacedMap=void 0;var r=function(){function e(t){var i,r,o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,r="internalMap",o=new Map,r in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o,t){var s,a=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(c)throw s}}}}(t);try{for(a.s();!(s=a.n()).done;){var c=s.value;this.set(c[0],c[1])}}catch(e){a.e(e)}finally{a.f()}}}var t,r;return t=e,(r=[{key:"get",value:function(e){return e.name&&this.internalMap.has(e.name)?this.internalMap.get(e.name):e.altName&&this.internalMap.has(e.altName)?this.internalMap.get(e.altName):null}},{key:"set",value:function(e,t){e.name&&this.internalMap.set(e.name,t),e.altName&&this.internalMap.set(e.altName,t)}},{key:"has",value:function(e){return!!this.get(e)}},{key:"delete",value:function(e){e.name&&this.internalMap.delete(e.name),e.altName&&this.internalMap.delete(e.altName)}},{key:"hasNamespaced",value:function(e){return this.internalMap.has(e)}},{key:"getNamespaced",value:function(e){return this.internalMap.get(e)}}])&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.NamespacedMap=r},4355:(e,t)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function r(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.UnstableValue=t.NamespacedValue=void 0;var l=function(){function e(t,n){if(s(this,e),this.stable=t,this.unstable=n,!this.unstable&&!this.stable)throw new Error("One of stable or unstable values must be supplied")}return c(e,[{key:"name",get:function(){return this.stable?this.stable:this.unstable}},{key:"altName",get:function(){return this.stable?this.unstable:null}},{key:"matches",value:function(e){return!!this.name&&this.name===e||!!this.altName&&this.altName===e}},{key:"findIn",value:function(e){var t;return this.name&&(t=null==e?void 0:e[this.name]),!t&&this.altName&&(t=null==e?void 0:e[this.altName]),t}},{key:"includedIn",value:function(e){var t=!1;return this.name&&(t=e.includes(this.name)),!t&&this.altName&&(t=e.includes(this.altName)),t}}]),e}();t.NamespacedValue=l;var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=o(t);if(n){var s=o(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return r(this,e)});function l(e,t){var n;if(s(this,l),!(n=a.call(this,e,t)).unstable)throw new Error("Unstable value must be supplied");return n}return c(l,[{key:"name",get:function(){return this.unstable}},{key:"altName",get:function(){return this.stable}}]),l}(l);t.UnstableValue=u},64449:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.EmoteEvent=void 0;var r=n(33240),o=n(86931),s=n(18472);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=u(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},l.apply(this,arguments)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(m,e);var t,n,i,r,u,f=(r=m,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(u){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function m(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),f.call(this,e)}return t=m,i=[{key:"from",value:function(e,t){var n;return new m({type:o.M_EMOTE.name,content:(n={},a(n,o.M_TEXT.name,e),a(n,o.M_HTML.name,t),n)})}}],(n=[{key:"isEmote",get:function(){return!0}},{key:"isEquivalentTo",value:function(e){return(0,s.isEventTypeSame)(e,o.M_EMOTE)||l(p(m.prototype),"isEquivalentTo",this).call(this,e)}},{key:"serialize",value:function(){var e=l(p(m.prototype),"serialize",this).call(this);return e.content.msgtype="m.emote",e}}])&&c(t.prototype,n),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),m}(r.MessageEvent);t.EmoteEvent=f},42869:(e,t)=>{"use strict";function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensibleEvent=void 0;var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wireFormat=t}var t,i;return t=e,(i=[{key:"wireContent",get:function(){return this.wireFormat.content}}])&&n(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.ExtensibleEvent=i},33240:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.MessageEvent=void 0;var r=n(42869),o=n(32932),s=n(41940),a=n(86931),c=n(18472);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function p(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(y,e);var t,n,i,r,l,v=(r=y,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(l){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function y(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),g(f(t=v.call(this,e)),"text",void 0),g(f(t),"html",void 0),g(f(t),"renderings",void 0);var n=a.M_MESSAGE.findIn(t.wireContent),i=a.M_TEXT.findIn(t.wireContent),r=a.M_HTML.findIn(t.wireContent);if((0,o.isProvided)(n)){if(!Array.isArray(n))throw new s.InvalidEventError("m.message contents must be an array");var c=n.find((function(e){return!(0,o.isProvided)(e.mimetype)||"text/plain"===e.mimetype})),l=n.find((function(e){return"text/html"===e.mimetype}));if(!c)throw new s.InvalidEventError("m.message is missing a plain text representation");t.text=c.body,t.html=null==l?void 0:l.body,t.renderings=n}else{if(!(0,o.isOptionalAString)(i))throw new s.InvalidEventError("Missing textual representation for event");t.text=i,t.html=r,t.renderings=[{body:i,mimetype:"text/plain"}],t.html&&t.renderings.push({body:t.html,mimetype:"text/html"})}return t}return t=y,i=[{key:"from",value:function(e,t){var n;return new y({type:a.M_MESSAGE.name,content:(n={},g(n,a.M_TEXT.name,e),g(n,a.M_HTML.name,t),n)})}}],(n=[{key:"isEmote",get:function(){return a.M_EMOTE.matches(this.wireFormat.type)||(0,o.isProvided)(a.M_EMOTE.findIn(this.wireFormat.content))}},{key:"isNotice",get:function(){return a.M_NOTICE.matches(this.wireFormat.type)||(0,o.isProvided)(a.M_NOTICE.findIn(this.wireFormat.content))}},{key:"isEquivalentTo",value:function(e){return(0,c.isEventTypeSame)(e,a.M_MESSAGE)}},{key:"serializeMMessageOnly",value:function(){var e=g({},a.M_MESSAGE.name,this.renderings);if(1===this.renderings.length){var t=this.renderings[0].mimetype;void 0!==t&&"text/plain"!==t||(e=g({},a.M_TEXT.name,this.renderings[0].body))}return e}},{key:"serialize",value:function(){var e;return{type:"m.room.message",content:u(u({},this.serializeMMessageOnly()),{},{body:this.text,msgtype:"m.text",format:this.html?"org.matrix.custom.html":void 0,formatted_body:null!==(e=this.html)&&void 0!==e?e:void 0})}}}])&&d(t.prototype,n),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),y}(r.ExtensibleEvent);t.MessageEvent=v},84808:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.NoticeEvent=void 0;var r=n(33240),o=n(86931),s=n(18472);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=u(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},l.apply(this,arguments)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(m,e);var t,n,i,r,u,f=(r=m,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(u){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function m(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),f.call(this,e)}return t=m,i=[{key:"from",value:function(e,t){var n;return new m({type:o.M_NOTICE.name,content:(n={},a(n,o.M_TEXT.name,e),a(n,o.M_HTML.name,t),n)})}}],(n=[{key:"isNotice",get:function(){return!0}},{key:"isEquivalentTo",value:function(e){return(0,s.isEventTypeSame)(e,o.M_NOTICE)||l(p(m.prototype),"isEquivalentTo",this).call(this,e)}},{key:"serialize",value:function(){var e=l(p(m.prototype),"serialize",this).call(this);return e.content.msgtype="m.notice",e}}])&&c(t.prototype,n),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),m}(r.MessageEvent);t.NoticeEvent=f},55510:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PollEndEvent=void 0;var r=n(33637),o=n(41940),s=n(41210),a=n(33240),c=n(86931),l=n(18472);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(E,e);var t,n,i,u,y,b=(u=E,y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(u);if(y){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function E(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),v(m(t=b.call(this,e)),"pollEventId",void 0),v(m(t),"closingMessage",void 0);var n=t.wireContent["m.relates_to"];if(!s.REFERENCE_RELATION.matches(null==n?void 0:n.rel_type)||"string"!=typeof(null==n?void 0:n.event_id))throw new o.InvalidEventError("Relationship must be a reference to an event");return t.pollEventId=n.event_id,t.closingMessage=new a.MessageEvent(t.wireFormat),t}return t=E,i=[{key:"from",value:function(e,t){var n;return new E({type:r.M_POLL_END.name,content:(n={"m.relates_to":{rel_type:s.REFERENCE_RELATION.name,event_id:e}},v(n,r.M_POLL_END.name,{}),v(n,c.M_TEXT.name,t),n)})}}],(n=[{key:"isEquivalentTo",value:function(e){return(0,l.isEventTypeSame)(e,r.M_POLL_END)}},{key:"serialize",value:function(){return{type:r.M_POLL_END.name,content:d(v({"m.relates_to":{rel_type:s.REFERENCE_RELATION.name,event_id:this.pollEventId}},r.M_POLL_END.name,{}),this.closingMessage.serialize().content)}}}])&&h(t.prototype,n),i&&h(t,i),Object.defineProperty(t,"prototype",{writable:!1}),E}(n(42869).ExtensibleEvent);t.PollEndEvent=y},74648:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PollResponseEvent=void 0;var r=n(42869),o=n(33637),s=n(41940),a=n(41210),c=n(18472);function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function d(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(v,e);var t,n,i,r,m,g=(r=v,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(m){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function v(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),f(h(t=g.call(this,e)),"internalAnswerIds",void 0),f(h(t),"internalSpoiled",void 0),f(h(t),"pollEventId",void 0);var n=t.wireContent["m.relates_to"];if(!a.REFERENCE_RELATION.matches(null==n?void 0:n.rel_type)||"string"!=typeof(null==n?void 0:n.event_id))throw new s.InvalidEventError("Relationship must be a reference to an event");return t.pollEventId=n.event_id,t.validateAgainst(null),t}return t=v,i=[{key:"from",value:function(e,t){return new v({type:o.M_POLL_RESPONSE.name,content:f({"m.relates_to":{rel_type:a.REFERENCE_RELATION.name,event_id:t}},o.M_POLL_RESPONSE.name,{answers:e})})}}],(n=[{key:"answerIds",get:function(){return this.internalAnswerIds}},{key:"spoiled",get:function(){return this.internalSpoiled}},{key:"validateAgainst",value:function(e){var t=o.M_POLL_RESPONSE.findIn(this.wireContent);if(!Array.isArray(null==t?void 0:t.answers))return this.internalSpoiled=!0,void(this.internalAnswerIds=[]);var n=t.answers;if(n.some((function(e){return"string"!=typeof e}))||0===n.length)return this.internalSpoiled=!0,void(this.internalAnswerIds=[]);if(e){if(n.some((function(t){return!e.answers.some((function(e){return e.id===t}))})))return this.internalSpoiled=!0,void(this.internalAnswerIds=[]);n=n.slice(0,e.maxSelections)}this.internalAnswerIds=n,this.internalSpoiled=!1}},{key:"isEquivalentTo",value:function(e){return(0,c.isEventTypeSame)(e,o.M_POLL_RESPONSE)}},{key:"serialize",value:function(){return{type:o.M_POLL_RESPONSE.name,content:f({"m.relates_to":{rel_type:a.REFERENCE_RELATION.name,event_id:this.pollEventId}},o.M_POLL_RESPONSE.name,{answers:this.spoiled?void 0:this.answerIds})}}}])&&l(t.prototype,n),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),v}(r.ExtensibleEvent);t.PollResponseEvent=m},68267:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PollStartEvent=t.PollAnswerSubevent=void 0;var r=n(33637),o=n(33240),s=n(86931),a=n(41940),c=n(4355),l=n(18472),u=n(42869);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=w(e);if(t){var r=w(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){v(n,e);var t=b(n);function n(e){var i;f(this,n),_(S(i=t.call(this,e)),"id",void 0);var r=e.content.id;if(!r||"string"!=typeof r)throw new a.InvalidEventError("Answer ID must be a non-empty string");return i.id=r,i}return g(n,[{key:"serialize",value:function(){return{type:"org.matrix.sdk.poll.answer",content:p({id:this.id},this.serializeMMessageOnly())}}}],[{key:"from",value:function(e,t){return new n({type:"org.matrix.sdk.poll.answer",content:_({id:e},s.M_TEXT.name,t)})}}]),n}(o.MessageEvent);t.PollAnswerSubevent=T;var x=function(e){v(n,e);var t=b(n);function n(e){var i;f(this,n),_(S(i=t.call(this,e)),"question",void 0),_(S(i),"kind",void 0),_(S(i),"rawKind",void 0),_(S(i),"maxSelections",void 0),_(S(i),"answers",void 0);var s=r.M_POLL_START.findIn(i.wireContent);if(!s.question)throw new a.InvalidEventError("A question is required");if(i.question=new o.MessageEvent({type:"org.matrix.sdk.poll.question",content:s.question}),i.rawKind=s.kind,r.M_POLL_KIND_DISCLOSED.matches(i.rawKind)?i.kind=r.M_POLL_KIND_DISCLOSED:i.kind=r.M_POLL_KIND_UNDISCLOSED,i.maxSelections=Number.isFinite(s.max_selections)&&s.max_selections>0?s.max_selections:1,!Array.isArray(s.answers))throw new a.InvalidEventError("Poll answers must be an array");var c=s.answers.slice(0,20).map((function(e){return new T({type:"org.matrix.sdk.poll.answer",content:e})}));if(c.length<=0)throw new a.InvalidEventError("No answers available");return i.answers=c,i}return g(n,[{key:"isEquivalentTo",value:function(e){return(0,l.isEventTypeSame)(e,r.M_POLL_START)}},{key:"serialize",value:function(){var e;return{type:r.M_POLL_START.name,content:(e={},_(e,r.M_POLL_START.name,{question:this.question.serialize().content,kind:this.rawKind,max_selections:this.maxSelections,answers:this.answers.map((function(e){return e.serialize().content}))}),_(e,s.M_TEXT.name,"".concat(this.question.text,"\n").concat(this.answers.map((function(e,t){return"".concat(t+1,". ").concat(e.text)})).join("\n"))),e)}}}],[{key:"from",value:function(e,t,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new n({type:r.M_POLL_START.name,content:(o={},_(o,s.M_TEXT.name,e),_(o,r.M_POLL_START.name,{question:_({},s.M_TEXT.name,e),kind:i instanceof c.NamespacedValue?i.name:i,max_selections:a,answers:t.map((function(e){return _({id:I()},s.M_TEXT.name,e)}))}),o)})}}]),n}(u.ExtensibleEvent);t.PollStartEvent=x;var C="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";function I(){return(e=Array(16),function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(){return C.charAt(Math.floor(Math.random()*C.length))})).join("");var e}},86931:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M_TEXT=t.M_NOTICE=t.M_MESSAGE=t.M_HTML=t.M_EMOTE=void 0;var i=n(4355),r=new i.UnstableValue("m.message","org.matrix.msc1767.message");t.M_MESSAGE=r;var o=new i.UnstableValue("m.text","org.matrix.msc1767.text");t.M_TEXT=o;var s=new i.UnstableValue("m.html","org.matrix.msc1767.html");t.M_HTML=s;var a=new i.UnstableValue("m.emote","org.matrix.msc1767.emote");t.M_EMOTE=a;var c=new i.UnstableValue("m.notice","org.matrix.msc1767.notice");t.M_NOTICE=c},33637:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M_POLL_START=t.M_POLL_RESPONSE=t.M_POLL_KIND_UNDISCLOSED=t.M_POLL_KIND_DISCLOSED=t.M_POLL_END=void 0;var i=n(4355),r=new i.UnstableValue("m.poll.disclosed","org.matrix.msc3381.poll.disclosed");t.M_POLL_KIND_DISCLOSED=r;var o=new i.UnstableValue("m.poll.undisclosed","org.matrix.msc3381.poll.undisclosed");t.M_POLL_KIND_UNDISCLOSED=o;var s=new i.UnstableValue("m.poll.start","org.matrix.msc3381.poll.start");t.M_POLL_START=s;var a=new i.UnstableValue("m.poll.response","org.matrix.msc3381.poll.response");t.M_POLL_RESPONSE=a;var c=new i.UnstableValue("m.poll.end","org.matrix.msc3381.poll.end");t.M_POLL_END=c},41210:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REFERENCE_RELATION=void 0;var i=new(n(4355).NamespacedValue)("m.reference");t.REFERENCE_RELATION=i},71333:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(30686);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var r=n(52508);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var o=n(41940);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var s=n(4355);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var a=n(25998);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var c=n(32932);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var l=n(72117);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var u=n(18472);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var d=n(5617);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var h=n(84600);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var p=n(85492);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var f=n(41210);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var m=n(42869);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var g=n(86931);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var v=n(33240);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var y=n(64449);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var b=n(84808);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var E=n(33637);Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))}));var S=n(68267);Object.keys(S).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===S[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return S[e]}}))}));var w=n(74648);Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===w[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}}))}));var _=n(55510);Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))}))},5617:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEGACY_M_ROOM_MESSAGE=void 0,t.parseMRoomMessage=function(e){var t,n,s;if(a.M_MESSAGE.findIn(e.content)||a.M_TEXT.findIn(e.content))return new i.MessageEvent(e);var c,d,h,p=null===(t=e.content)||void 0===t?void 0:t.msgtype,f=null===(n=e.content)||void 0===n?void 0:n.body,m="org.matrix.custom.html"===(null===(s=e.content)||void 0===s?void 0:s.format)?e.content.formatted_body:null;return"m.text"===p?new i.MessageEvent(l(l({},e),{},{content:l(l({},e.content),{},(c={},u(c,a.M_TEXT.name,f),u(c,a.M_HTML.name,m),c))})):"m.notice"===p?new r.NoticeEvent(l(l({},e),{},{content:l(l({},e.content),{},(d={},u(d,a.M_TEXT.name,f),u(d,a.M_HTML.name,m),d))})):"m.emote"===p?new o.EmoteEvent(l(l({},e),{},{content:l(l({},e.content),{},(h={},u(h,a.M_TEXT.name,f),u(h,a.M_HTML.name,m),h))})):null};var i=n(33240),r=n(84808),o=n(64449),s=n(4355),a=n(86931);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=new s.NamespacedValue("m.room.message");t.LEGACY_M_ROOM_MESSAGE=d},84600:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMMessage=function(e){return r.M_EMOTE.matches(e.type)?new o.EmoteEvent(e):r.M_NOTICE.matches(e.type)?new s.NoticeEvent(e):new i.MessageEvent(e)};var i=n(33240),r=n(86931),o=n(64449),s=n(84808)},85492:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMPoll=function(e){return i.M_POLL_START.matches(e.type)?new r.PollStartEvent(e):i.M_POLL_RESPONSE.matches(e.type)?new o.PollResponseEvent(e):i.M_POLL_END.matches(e.type)?new s.PollEndEvent(e):null};var i=n(33637),r=n(68267),o=n(74648),s=n(55510)},32932:(e,t)=>{"use strict";function n(e){return null!=e}Object.defineProperty(t,"__esModule",{value:!0}),t.isOptionalAString=function(e){return n(e)&&"string"==typeof e},t.isProvided=n},72117:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyMsgType=void 0,t.isEventLike=function(e,t){var n=e.content;return t===i.Text?r.M_MESSAGE.matches(e.type)||"m.room.message"===e.type&&"m.text"===(null==n?void 0:n.msgtype):t===i.Emote?r.M_EMOTE.matches(e.type)||"m.room.message"===e.type&&"m.emote"===(null==n?void 0:n.msgtype):t===i.Notice&&(r.M_NOTICE.matches(e.type)||"m.room.message"===e.type&&"m.notice"===(null==n?void 0:n.msgtype))};var i,r=n(86931);t.LegacyMsgType=i,function(e){e.Text="m.text",e.Notice="m.notice",e.Emote="m.emote"}(i||(t.LegacyMsgType=i={}))},18472:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEventTypeSame=function(e,t){if("string"==typeof e)return"string"==typeof t?t===e:t.matches(e);if("string"==typeof t)return e.matches(t);var n=t,i=e;return n.matches(i.name)||n.matches(i.altName)}},23260:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractFolderEntry=void 0;const r=n(36964);class o extends r.AutoBindingEmitter{constructor(e,t,n){super(e,n),this.parent=t,this.isFolder=!0}get path(){return this.parent?[...this.parent.path,this.name]:[]}getChildByName(e){return i(this,void 0,void 0,(function*(){return(yield this.getChildren()).find((t=>t.name===e))}))}getChildById(e){return i(this,void 0,void 0,(function*(){return(yield this.getChildren()).find((t=>t.id===e))}))}addFolder(e){var t;return i(this,void 0,void 0,(function*(){const n="string"==typeof e?[e]:e,i=n[0],r=yield this.getChildByName(i);let o=null===(t=r)||void 0===t?void 0:t.id;if(o){if(!(null==r?void 0:r.isFolder))throw new Error(`Not a folder: ${this.path} => ${i}`)}else o=yield this.addChildFolder(i);const s=yield this.getChildById(o);if(!s)throw new Error("New folder not found");const a=n.slice(1);return a.length>0?s.addFolder(a):s.id}))}getDescendentById(e,t){return i(this,void 0,void 0,(function*(){return this.getDescendantById(e,t)}))}getDescendantById(e,t){return i(this,void 0,void 0,(function*(){const n=yield this.getChildren();for(const t of n)if(t.id===e)return t;if("number"!=typeof t||t>0)for(const i of n)if(i.isFolder){const n=i,r=yield n.getDescendantById(e,"number"!=typeof t?void 0:t-1);if(r)return r}}))}}t.AbstractFolderEntry=o},92551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},36964:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoBindingEmitter=void 0;const r=i(n(17187)),o=n(94845);class s extends r.default{constructor(e,t){super(),this.matrixClient=e,this.logName=t,this.eventHandlers={},this.bound=!1}trace(e,t){if(o.log.isTraceEnabled()){const n="function"==typeof this.logName?this.logName():this.logName;o.log.trace(`${n}.${e}()${t?` ${t}`:""}`)}}setEventHandlers(e){this.eventHandlers=e;for(const e in this.eventHandlers)this.eventHandlers[e]=this.eventHandlers[e].bind(this)}autobind(){if(this.eventNames().length>0){if(!this.bound){this.trace("autobind",`Binding ${Object.values(this.eventHandlers).length} handlers: ${Object.keys(this.eventHandlers)}`);for(const e in this.eventHandlers)this.matrixClient.on(e,this.eventHandlers[e]);this.bound=!0}}else if(this.bound){this.trace("autobind",`Unbinding ${Object.values(this.eventHandlers).length} handlers: ${Object.keys(this.eventHandlers)}`);for(const e in this.eventHandlers)this.matrixClient.off(e,this.eventHandlers[e]);this.bound=!1}}addListener(e,t){return this.trace("addListener",e.toString()),super.addListener(e,t),this.autobind(),this}on(e,t){return this.trace("on",e.toString()),super.on(e,t),this.autobind(),this}once(e,t){return this.trace("once",e.toString()),super.once(e,t),this.autobind(),this}removeListener(e,t){return this.trace("removeListener",e.toString()),super.removeListener(e,t),this.autobind(),this}off(e,t){return this.trace("off",e.toString()),super.off(e,t),this.autobind(),this}removeAllListeners(e){return this.trace("removeAllListeners",null==e?void 0:e.toString()),super.removeAllListeners(e),this.autobind(),this}prependListener(e,t){return this.trace("prependListener",e.toString()),super.prependListener(e,t),this.autobind(),this}prependOnceListener(e,t){return this.trace("prependOnceListener",e.toString()),super.prependOnceListener(e,t),this.autobind(),this}emit(e,...t){return this.trace("emit",e.toString()),super.emit(e,...t)}}t.AutoBindingEmitter=s},39254:function(e,t,n){"use strict";var i=n(48764).Buffer,r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BranchEntry=void 0;const s=n(57141),a=n(36964),c=o(n(9669)),l=n(86857);class u extends a.AutoBindingEmitter{constructor(e,t,n){super(e.client,`BranchEntry(${n.id})`),this.files=e,this.parent=t,this.branch=n,this.isFolder=!1,super.setEventHandlers({"Room.timeline":this.timelineChanged})}get id(){return this.branch.id}get version(){return this.branch.version}getCreatedByUserId(){var e;return r(this,void 0,void 0,(function*(){return null!==(e=(yield this.branch.getFileEvent()).event.sender)&&void 0!==e?e:""}))}getVersionHistory(){var e;return r(this,void 0,void 0,(function*(){const t=[];let n;t.push(this);let i=yield this.branch.getFileEvent();do{const r=null===(e=i.getRelation())||void 0===e?void 0:e.event_id;if(r&&(n=this.parent.treespace.room.findEventById(r),n)){const e=n.getId(),r=e?this.parent.treespace.getFile(e):void 0;if(r){t.push(new u(this.files,this.parent,r)),i=n;continue}}break}while(n);return t}))}get name(){return this.branch.getName()}get path(){return[...this.parent.path,this.name]}get writable(){var e,t;return null!==(t=null===(e=this.parent)||void 0===e?void 0:e.writable)&&void 0!==t&&t}getCreationDate(){return r(this,void 0,void 0,(function*(){const e=yield this.branch.getVersionHistory();return new Date(e[e.length-1].indexEvent.getTs())}))}getLastModifiedDate(){return r(this,void 0,void 0,(function*(){return new Date((yield this.branch.getFileEvent()).getTs())}))}delete(){return r(this,void 0,void 0,(function*(){return this.trace("delete",this.path.join("/")),this.branch.delete()}))}rename(e){return r(this,void 0,void 0,(function*(){return this.trace("rename",`${this.path.join("/")} to ${e}`),this.branch.setName(e)}))}copyAsVersion(e){return r(this,void 0,void 0,(function*(){this.trace("copyAsVersion",`${this.path.join("/")} to ${e.path.join("/")}`);const t=yield this.getBlob();return e.addVersion(t)}))}copyTo(e,t){return r(this,void 0,void 0,(function*(){this.trace("copyTo",`${this.path.join("/")} to ${e.path.join("/")}/${t}`);const n=yield this.getVersionHistory();n.reverse();const i=n.shift(),r=yield i.getBlob(),o=yield e.addFile(t,r),s=yield e.getChildById(o);if(!s)throw new Error("New file not found");for(;n.length>0;){const e=n.shift();if(e){const t=yield e.getBlob();yield s.addVersion(t,e.name)}}return o}))}moveTo(e,t){return r(this,void 0,void 0,(function*(){if(this.trace("moveTo",`${this.path.join("/")} to ${e.path.join("/")}/${t}`),e.id===this.parent.id)return yield this.rename(t),this.id;const n=yield this.copyTo(e,t);return yield this.delete(),n}))}addVersion(e,t){return r(this,void 0,void 0,(function*(){const n=null!=t?t:this.name;this.trace("addVersion",`${this.path.join("/")} with name ${n}`);const r=new l.PendingBranchEntry(this.files,this.parent,`(pending_version_for_${this.id}@${Date.now()})`,n,this,e,this.files.client.isRoomEncrypted(this.id)?"decrypted":"encryptionNotEnabled",this.files.client.getUserId(),Object.assign(Object.assign({},this.branch.indexEvent.getContent()),{version:this.branch.version+1}));this.files.addPendingEntry(r);const{mimetype:o,size:a,data:c}=e,u=yield(0,s.encryptAttachment)(c),{event_id:d}=yield this.branch.createNewVersion(n,i.from(u.data),u.info,{info:{mimetype:o,size:a}});return r.setSent(d),d}))}getBlob(){var e;return r(this,void 0,void 0,(function*(){const t=yield this.branch.getFileInfo(),n=yield c.default.get(t.httpUrl,{responseType:"arraybuffer"}),i=yield(0,s.decryptAttachment)(n.data,t.info),{info:r}=(yield this.branch.getFileEvent()).getOriginalContent();return{data:i,mimetype:null!==(e=null==r?void 0:r.mimetype)&&void 0!==e?e:"application/octet-stream",size:i.byteLength}}))}getLoadedFileEvent(){return this.branch.directory.room.getUnfilteredTimelineSet().findEventById(this.id)}getSize(){var e;return r(this,void 0,void 0,(function*(){const t=yield this.branch.getFileEvent(),n=null===(e=t.getOriginalContent().info)||void 0===e?void 0:e.size;return"number"==typeof n?n:-1}))}get locked(){return this.branch.isLocked()}setLocked(e){return r(this,void 0,void 0,(function*(){return this.branch.setLocked(e)}))}timelineChanged(e,t){this.trace("event(timelineChanged)",`room ${t.roomId} type ${e.getType()}`),t.roomId===this.parent.id&&e.replacingEventId()===this.id&&(this.emit("modified",this,e),this.parent.emit("modified",this,e))}get encryptionStatus(){const e=this.getLoadedFileEvent();return!e||e.isDecryptionFailure()?"decryptionFailed":e.isBeingDecrypted()?"decryptionPending":e.getClearContent()?"decrypted":e.isEncrypted()?"encrypted":"encryptionNotEnabled"}}t.BranchEntry=u},69681:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1954:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},78955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},84218:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},55295:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2100:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MatrixFiles=void 0;const o=n(62168),s=n(3102),a=n(42481),c=n(64551),l=n(23260),u=n(58616),d=r(n(98409));class h extends l.AbstractFolderEntry{constructor(e){super(e,void 0,"MatrixFiles"),this.client=e,this.isFolder=!0,this.writable=!0,this.pendingEntries=[],super.setEventHandlers({Room:this.newRoom,"RoomState.events":this.roomState,"Room.myMembership":this.roomMyMembership})}get id(){var e;return null!==(e=this.client.getUserId())&&void 0!==e?e:""}getClient(){return this.client}get path(){return[]}get name(){return""}getCreatedByUserId(){return i(this,void 0,void 0,(function*(){return""}))}getChildren(){return i(this,void 0,void 0,(function*(){return this.client.getVisibleRooms().map((e=>this.client.unstableGetFileTreeSpace(e.roomId))).filter((e=>{var t;return!!e&&!(null===(t=e.room.currentState.getStateEvents(a.EventType.SpaceParent))||void 0===t?void 0:t.length)})).map((e=>new u.TreeSpaceEntry(this,this,e)))}))}addChildFolder(e){return i(this,void 0,void 0,(function*(){return(yield this.client.unstableCreateFileTree(e)).id}))}getCreationDate(){return i(this,void 0,void 0,(function*(){}))}getLastModifiedDate(){return i(this,void 0,void 0,(function*(){}))}delete(){return i(this,void 0,void 0,(function*(){throw this.trace("delete",this.path.join("/")),new Error("Cannot remove root")}))}rename(e){return i(this,void 0,void 0,(function*(){throw this.trace("rename",`${this.path.join("/")} to ${e}`),new Error("Cannot rename root")}))}copyTo(e,t){return i(this,void 0,void 0,(function*(){throw this.trace("copyTo",`${this.path.join("/")} to ${e.path.join("/")}/${t}`),new Error("Cannot copy root")}))}moveTo(e,t){return i(this,void 0,void 0,(function*(){throw this.trace("moveTo",`${this.path.join("/")} to ${e.path.join("/")}/${t}`),new Error("Cannot move root")}))}addFile(e,t){return i(this,void 0,void 0,(function*(){throw this.trace("addFile",`${this.path.join("/")} with name ${e}`),new Error("Cannot add file at root")}))}_resolvePath(e){return i(this,void 0,void 0,(function*(){if(0===e.length)return this;let t=this;const n=e.slice();for(;t;){const e=(yield t.getChildren()).find((e=>e.name===n[0]));if(e){if(1===n.length)return e;e.isFolder?(n.shift(),t=e):t=void 0}else t=void 0}}))}resolvePath(e){return i(this,void 0,void 0,(function*(){const t=yield this._resolvePath(e),n=t?t.isFolder?"folder":"file":"not found";return this.trace("resolvePath",`${e.join("/")} was ${n}`),t}))}sync(){return i(this,void 0,void 0,(function*(){this.trace("sync");const e={pendingEventOrdering:o.PendingEventOrdering.Detached,lazyLoadMembers:!0,initialSyncLimit:0},t=new Promise((e=>{const t=(n,i)=>{n===c.SyncState.Syncing&&i===c.SyncState.Prepared&&(e(),this.client.off(o.ClientEvent.Sync,t.bind(this)))};this.client.on(o.ClientEvent.Sync,t.bind(this))}));return this.client.startClient(e).then((()=>i(this,void 0,void 0,(function*(){return t}))))}))}logout(){return i(this,void 0,void 0,(function*(){this.trace("logout"),yield this.client.logout(),this.client.stopClient()}))}deactivate(e=!0){return i(this,void 0,void 0,(function*(){this.trace("deactivate"),this.client.stopClient(),yield this.client.deactivateAccount(void 0,e)}))}getPendingInvites(){return i(this,void 0,void 0,(function*(){return this.client.getRooms().filter((e=>"invite"===e.getMyMembership()))}))}acceptInvite(e){return i(this,void 0,void 0,(function*(){yield this.client.joinRoom(e.roomId)}))}acceptAllInvites(){return i(this,void 0,void 0,(function*(){const e=this.client.getRooms().filter((e=>"invite"===e.getMyMembership()));return Promise.all(e.map((e=>i(this,void 0,void 0,(function*(){return this.retryJoin(e)}))))).then()}))}retryJoin(e){return i(this,void 0,void 0,(function*(){return(0,s.simpleRetryOperation)((()=>i(this,void 0,void 0,(function*(){const t=this.client.getDomain(),n=t?{viaServers:[t]}:{};return this.client.joinRoom(e.roomId,n).catch((e=>{if("M_FORBIDDEN"===(null==e?void 0:e.errcode))throw new d.default.AbortError(e);throw e}))}))))}))}get members(){throw new Error("Function not available on root.")}inviteMember(e,t){return i(this,void 0,void 0,(function*(){throw new Error("Function not available on root.")}))}removeMember(e){return i(this,void 0,void 0,(function*(){throw new Error("Function not available on root.")}))}setMemberLevel(e,t){return i(this,void 0,void 0,(function*(){throw new Error("Function not available on root.")}))}getMembership(e){throw new Error("Function not available on root.")}get ownMembership(){throw new Error("Function not available on root.")}setMemberRole(e,t){return i(this,void 0,void 0,(function*(){throw new Error("Function not available on root.")}))}newRoom(e){"invite"===e.getMyMembership()&&e.getType()===a.UNSTABLE_MSC3089_TREE_SUBTYPE.unstable?this.emit("invite",this,e):this.emit("modified",this,e)}roomState(e,t){this.emit("modified",this,e)}roomMyMembership(e,t,n){"leave"===t&&this.emit("modified",this,e)}addPendingEntry(e){var t,n;"replacesEntry"in e&&e.replacesEntry?(this.trace("addPendingEntry",`${e.id} with parent ${null===(t=e.parent)||void 0===t?void 0:t.id} replaces ${e.replacesEntry.id} for ${e.path.join("/")}`),this.clearPendingEntry(e.replacesEntry)):this.trace("addPendingEntry",`${e.id} with parent ${null===(n=e.parent)||void 0===n?void 0:n.id} for ${e.path.join("/")}`),this.pendingEntries.push(e)}clearPendingEntry(e){this.trace("clearPendingEntry",e.id),this.pendingEntries=this.pendingEntries.filter((t=>t.id!==e.id))}getPendingEntries(e){const t=this.pendingEntries.filter((t=>{var n;return(null===(n=t.parent)||void 0===n?void 0:n.id)===e.id}));return this.trace("getPendingEntries",`${e.id} = ${t.length} of ${this.pendingEntries.length}`),t}}t.MatrixFiles=h},86857:function(e,t,n){"use strict";var i=n(48764).Buffer,r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PendingBranchEntry=void 0;const o=n(57141),s=n(36798),a=n(36964);class c extends a.AutoBindingEmitter{constructor(e,t,n,i,r,o,s,a,c){super(e.client,(()=>`PendingBranchEntry(${this.id})`)),this.files=e,this.parent=t,this.privateId=n,this.name=i,this.replacesEntry=r,this.blob=o,this.encryptionStatus=s,this.createdByUserId=a,this.indexEventContent=c,this.date=new Date,this.sent=!1,this.isFolder=!1,this.locked=!1,this.sentPromise=new Promise((e=>{this.resolve=e})),this.version=c.version}get id(){return this.privateId}setSent(e){if(this.sent)throw new Error("Event has already been marked as sent");this.trace("setSent",`Real ID is ${e}`),this.privateId=e,this.sent=!0,this.resolve(e)}getCreatedByUserId(){return r(this,void 0,void 0,(function*(){return this.createdByUserId}))}getVersionHistory(){return r(this,void 0,void 0,(function*(){return[this]}))}get path(){return[...this.parent.path,this.name]}get writable(){var e,t;return null!==(t=null===(e=this.parent)||void 0===e?void 0:e.writable)&&void 0!==t&&t}getCreationDate(){return r(this,void 0,void 0,(function*(){return this.date}))}getLastModifiedDate(){return r(this,void 0,void 0,(function*(){return this.date}))}waitForRealEntry(){return r(this,void 0,void 0,(function*(){return this.trace("waitForRealEntry"),yield this.sentPromise,this.files.getDescendantById(this.id)}))}delete(){return r(this,void 0,void 0,(function*(){this.trace("delete",this.path.join("/"));const e=yield this.waitForRealEntry();if(!e)throw new Error("Unable to delete pending branch");return e.delete()}))}rename(e){return r(this,void 0,void 0,(function*(){this.trace("rename",`${this.path.join("/")} to ${e}`);const t=yield this.waitForRealEntry();if(!t)throw new Error("Unable to rename pending branch");return t.rename(e)}))}copyAsVersion(e){return r(this,void 0,void 0,(function*(){this.trace("copyAsVersion",`${this.path.join("/")} to ${e.path.join("/")}`);const t=yield this.waitForRealEntry();if(!t)throw new Error("Unable to copy pending branch");return t.copyAsVersion(e)}))}copyTo(e,t){return r(this,void 0,void 0,(function*(){if(this.trace("copyTo",`${this.path.join("/")} to ${e.path.join("/")}/${t}`),!(yield this.waitForRealEntry()))throw new Error("Unable to copy pending branch");return this.copyTo(e,t)}))}moveTo(e,t){return r(this,void 0,void 0,(function*(){if(this.trace("moveTo",`${this.path.join("/")} to ${e.path.join("/")}/${t}`),!(yield this.waitForRealEntry()))throw new Error("Unable to move pending branch");return this.moveTo(e,t)}))}createNewVersion(e,t,n,i){return r(this,void 0,void 0,(function*(){const r=yield this.parent.treespace.createFile(e,t,n,Object.assign(Object.assign({},null!=i?i:{}),{"m.new_content":!0,"m.relates_to":{rel_type:s.RelationType.Replace,event_id:this.id}}));return yield this.files.client.sendStateEvent(this.parent.id,s.UNSTABLE_MSC3089_BRANCH.name,{active:!0,name:e,version:this.version+1},r.event_id),yield this.files.client.sendStateEvent(this.parent.id,s.UNSTABLE_MSC3089_BRANCH.name,Object.assign(Object.assign({},this.indexEventContent),{active:!1}),this.id),r}))}addVersion(e,t){return r(this,void 0,void 0,(function*(){const n=null!=t?t:this.name;this.trace("addVersion",`${this.path.join("/")} with name ${n}`),this.sent||(this.trace("addVersion",`Current version ${this.version} with ID ${this.id} not sent so waiting`),yield this.sentPromise,this.trace("addVersion",`Current version ${this.version} now sent with ID ${this.id}`));const r=new c(this.files,this.parent,`(pending_version_for_${this.id}@${Date.now()})`,n,this,e,this.files.client.isRoomEncrypted(this.id)?"decrypted":"encryptionNotEnabled",this.files.client.getUserId(),Object.assign(Object.assign({},this.indexEventContent),{version:this.version+1}));this.files.addPendingEntry(r);const{mimetype:s,size:a,data:l}=e,u=yield(0,o.encryptAttachment)(l),{event_id:d}=yield this.createNewVersion(n,i.from(u.data),u.info,{info:{mimetype:s,size:a}});return r.setSent(d),d}))}getBlob(){return r(this,void 0,void 0,(function*(){return this.blob}))}getSize(){return r(this,void 0,void 0,(function*(){return this.blob.size}))}setLocked(e){return r(this,void 0,void 0,(function*(){const t=yield this.waitForRealEntry();if(!t)throw new Error("Unable to lock pending branch");return t.setLocked(e)}))}}t.PendingBranchEntry=c},58616:function(e,t,n){"use strict";var i=n(48764).Buffer,r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeSpaceEntry=void 0;const o=n(42481),s=n(57141),a=n(39254),c=n(23260),l=n(35345),u=n(86857);class d extends c.AbstractFolderEntry{constructor(e,t,n){super(e.client,t,`TreeSpaceEntry(${n.id})`),this.files=e,this.treespace=n,this.isFolder=!0,super.setEventHandlers({"Room.name":this.nameChanged,"Room.timeline":this.timelineChanged,"RoomState.events":this.roomState})}get id(){return this.treespace.roomId}get writable(){return this.ownMembership.canWrite}get name(){return this.treespace.room.name}getCreatedByUserId(){var e,t;return r(this,void 0,void 0,(function*(){return null===(t=null===(e=this.createEvent)||void 0===e?void 0:e.sender)||void 0===t?void 0:t.userId}))}getChildren(){return r(this,void 0,void 0,(function*(){let e=yield Promise.resolve([...this.treespace.getDirectories().map((e=>new d(this.files,this,e))),...this.treespace.listFiles().map((e=>new a.BranchEntry(this.files,this,e)))]);return this.files.getPendingEntries(this).forEach((t=>{e.find((e=>e.id===t.id))?this.files.clearPendingEntry(t):(e.push(t),"replacesEntry"in t&&t.replacesEntry&&(e=e.filter((e=>{var n;return e.id!==(null===(n=t.replacesEntry)||void 0===n?void 0:n.id)}))))})),e}))}getChildByName(e){return r(this,void 0,void 0,(function*(){return(yield this.getChildren()).find((t=>t.name===e))}))}getChildById(e){return r(this,void 0,void 0,(function*(){return(yield this.getChildren()).find((t=>t.id===e))}))}addChildFolder(e){return r(this,void 0,void 0,(function*(){this.trace(`addChildFolder() ${this.path.join("/")} with name ${e}`);const t=yield this.treespace.createDirectory(e);return this.files.addPendingEntry(new d(this.files,this,t)),t.id}))}get createEvent(){return this.treespace.room.currentState.getStateEvents(o.EventType.RoomCreate,"")}getCreationDate(){return r(this,void 0,void 0,(function*(){const e=this.createEvent;return e?new Date(e.getTs()):void 0}))}getLastModifiedDate(){return r(this,void 0,void 0,(function*(){const e=this.treespace.room.getLastActiveTimestamp();return e>0?new Date(e):void 0}))}delete(){return r(this,void 0,void 0,(function*(){this.trace("delete",this.path.join("/")),yield this.treespace.delete(),this.emitModified(this.treespace.room)}))}rename(e){return r(this,void 0,void 0,(function*(){return this.trace("rename",`${this.path.join("/")} to ${e}`),this.treespace.setName(e)}))}copyTo(e,t){return r(this,void 0,void 0,(function*(){throw this.trace("copyTo",`${this.path.join("/")} to ${e.path.join("/")}/${t}`),new Error("Not implemented")}))}moveTo(e,t){var n;return r(this,void 0,void 0,(function*(){if(this.trace("moveTo",`${this.path.join("/")} to ${e.path.join("/")}/${t}`),e.id===(null===(n=this.parent)||void 0===n?void 0:n.id))return yield this.rename(t),this.id;throw new Error("Not implemented")}))}addFile(e,t){return r(this,void 0,void 0,(function*(){this.trace("addFile",`${this.path.join("/")} with name ${e}`);const n=yield this.getChildByName(e);if(n&&n.isFolder)throw new Error("A folder with that name already exists");if(n){this.trace("addFile",`Found existing entry for file: ${n.id}`);const e=n;return yield e.addVersion(t),e.id}const r=new u.PendingBranchEntry(this.files,this,`(pending_file_for_${this.id}@${Date.now()})`,e,void 0,t,this.files.client.isRoomEncrypted(this.id)?"decrypted":"encryptionNotEnabled",this.files.client.getUserId(),{name:e,active:!0,version:1});this.files.addPendingEntry(r);const o=this.treespace,{mimetype:a,size:c,data:l}=t,d=yield(0,s.encryptAttachment)(l),{event_id:h}=yield o.createFile(e,i.from(d.data),d.info,{info:{mimetype:a,size:c}});return r.setSent(h),h}))}mapMember(e){return new l.TreeSpaceMembership(this.files,this.treespace,e)}get members(){return this.treespace.room.getMembers().map((e=>this.mapMember(e)))}getMembership(e){const t=this.treespace.room.getMember(e);if(!t)throw new Error("Not a member");return this.mapMember(t)}inviteMember(e,t){return r(this,void 0,void 0,(function*(){return yield this.treespace.invite(e),this.getMembership(e)}))}removeMember(e){return r(this,void 0,void 0,(function*(){yield this.files.client.kick(this.treespace.roomId,e)}))}setMemberRole(e,t){return r(this,void 0,void 0,(function*(){return yield this.treespace.setPermissions(e,t),this.getMembership(e)}))}get ownMembership(){return this.getMembership(this.files.getClient().getUserId())}emitModified(e){this.emit("modified",e);const t=this.parent;t&&t.emit("modified",this,e)}nameChanged(e){if(this.trace("event(nameChanged)",`room ${e.roomId} to ${e.name}`),e.roomId===this.id)this.emitModified(e);else{const t=e.currentState.getStateEvents(o.EventType.SpaceParent);t.length>0&&t[0].getStateKey()===this.id&&this.emitModified(e)}}timelineChanged(e,t){this.trace("event(timelineChanged)",`room ${t.roomId} type ${e.getType()}`),t.roomId===this.id&&e.getType()===o.UNSTABLE_MSC3089_BRANCH.name&&this.emitModified(e)}roomState(e,t){this.trace("event(roomState)",`room ${t.roomId} type ${e.getType()}`),t.roomId===this.id&&e.getType()===o.EventType.SpaceChild&&this.emitModified(e)}}t.TreeSpaceEntry=d},35345:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeSpaceMembership=void 0;const r=n(42481),o=n(46170),s=i(n(17187));class a extends s.default{constructor(e,t,n){super(),this.files=e,this.treespace=t,this.roomMember=n,this.since=new Date}get userId(){return this.roomMember.userId}get role(){return this.treespace.getPermissions(this.roomMember.userId)}get canInvite(){return this.treespace.room.canInvite(this.files.getClient().getUserId())}get canRemove(){var e,t;return(null===(e=this.treespace.room.currentState.getStateEvents(r.EventType.RoomPowerLevels,""))||void 0===e?void 0:e.getContent().kick)<=(null!==(t=this.roomMember.powerLevel)&&void 0!==t?t:0)}get canManageRoles(){return this.treespace.room.currentState.maySendStateEvent(r.EventType.RoomPowerLevels,this.files.getClient().getUserId())}get canWrite(){return[o.TreePermissions.Editor,o.TreePermissions.Owner].includes(this.treespace.getPermissions(this.userId))}}t.TreeSpaceMembership=a},26427:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.FolderRole=void 0;var o=n(46170);Object.defineProperty(t,"FolderRole",{enumerable:!0,get:function(){return o.TreePermissions}}),r(n(69681),t),r(n(1954),t),r(n(78955),t),r(n(84218),t),r(n(2100),t),r(n(58616),t),r(n(39254),t),r(n(92551),t),r(n(55295),t)},94845:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=void 0;const i=n(56310);t.log=(0,i.getLogger)("MatrixFilesSDK")},98409:(e,t,n)=>{"use strict";const i=n(99353),r=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class o extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const s=(e,t)=>new Promise(((n,s)=>{t={onFailedAttempt:()=>{},retries:10,...t};const a=i.operation(t);a.attempt((async i=>{try{n(await e(i))}catch(e){if(!(e instanceof Error))return void s(new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`));if(e instanceof o)a.stop(),s(e.originalError);else if(e instanceof TypeError&&(c=e.message,!r.includes(c)))a.stop(),s(e);else{((e,t,n)=>{const i=n.retries-(t-1);e.attemptNumber=t,e.retriesLeft=i})(e,i,t);try{await t.onFailedAttempt(e)}catch(e){return void s(e)}a.retry(e)||s(a.mainError())}}var c}))}));e.exports=s,e.exports.default=s,e.exports.AbortError=o},1470:(e,t)=>{"use strict";let n,i,r,o,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.TweakName=t.RuleId=t.PushRuleKind=t.PushRuleActionName=t.DMMemberCountCondition=t.ConditionOperator=t.ConditionKind=void 0,t.isDmMemberCountCondition=function(e){return"==2"===e||"2"===e},t.PushRuleActionName=n,function(e){e.DontNotify="dont_notify",e.Notify="notify",e.Coalesce="coalesce"}(n||(t.PushRuleActionName=n={})),t.TweakName=i,function(e){e.Highlight="highlight",e.Sound="sound"}(i||(t.TweakName=i={})),t.ConditionOperator=r,function(e){e.ExactEquals="==",e.LessThan="<",e.GreaterThan=">",e.GreaterThanOrEqual=">=",e.LessThanOrEqual="<="}(r||(t.ConditionOperator=r={})),t.DMMemberCountCondition="2",t.ConditionKind=o,function(e){e.EventMatch="event_match",e.ContainsDisplayName="contains_display_name",e.RoomMemberCount="room_member_count",e.SenderNotificationPermission="sender_notification_permission",e.CallStarted="call_started",e.CallStartedPrefix="org.matrix.msc3914.call_started"}(o||(t.ConditionKind=o={})),t.PushRuleKind=s,function(e){e.Override="override",e.ContentSpecific="content",e.RoomSpecific="room",e.SenderSpecific="sender",e.Underride="underride"}(s||(t.PushRuleKind=s={})),t.RuleId=a,function(e){e.Master=".m.rule.master",e.ContainsDisplayName=".m.rule.contains_display_name",e.ContainsUserName=".m.rule.contains_user_name",e.AtRoomNotification=".m.rule.roomnotif",e.DM=".m.rule.room_one_to_one",e.EncryptedDM=".m.rule.encrypted_room_one_to_one",e.Message=".m.rule.message",e.EncryptedMessage=".m.rule.encrypted",e.InviteToSelf=".m.rule.invite_for_me",e.MemberEvent=".m.rule.member_event",e.IncomingCall=".m.rule.call",e.SuppressNotices=".m.rule.suppress_notices",e.Tombstone=".m.rule.tombstone"}(a||(t.RuleId=a={}))},85699:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M_BEACON_INFO=t.M_BEACON=void 0;var i=n(47048);const r=new i.UnstableValue("m.beacon_info","org.matrix.msc3672.beacon_info");t.M_BEACON_INFO=r;const o=new i.UnstableValue("m.beacon","org.matrix.msc3672.beacon");t.M_BEACON=o},42481:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNSTABLE_MSC3089_TREE_SUBTYPE=t.UNSTABLE_MSC3089_LEAF=t.UNSTABLE_MSC3089_BRANCH=t.UNSTABLE_MSC3088_PURPOSE=t.UNSTABLE_MSC3088_ENABLED=t.UNSTABLE_MSC2716_MARKER=t.UNSTABLE_ELEMENT_FUNCTIONAL_USERS=t.RoomType=t.RoomCreateTypeField=t.RelationType=t.PUSHER_ENABLED=t.PUSHER_DEVICE_ID=t.MsgType=t.LOCAL_NOTIFICATION_SETTINGS_PREFIX=t.EventType=t.EVENT_VISIBILITY_CHANGE_TYPE=void 0;var i=n(47048);let r,o,s,a;t.EventType=r,function(e){e.RoomCanonicalAlias="m.room.canonical_alias",e.RoomCreate="m.room.create",e.RoomJoinRules="m.room.join_rules",e.RoomMember="m.room.member",e.RoomThirdPartyInvite="m.room.third_party_invite",e.RoomPowerLevels="m.room.power_levels",e.RoomName="m.room.name",e.RoomTopic="m.room.topic",e.RoomAvatar="m.room.avatar",e.RoomPinnedEvents="m.room.pinned_events",e.RoomEncryption="m.room.encryption",e.RoomHistoryVisibility="m.room.history_visibility",e.RoomGuestAccess="m.room.guest_access",e.RoomServerAcl="m.room.server_acl",e.RoomTombstone="m.room.tombstone",e.SpaceChild="m.space.child",e.SpaceParent="m.space.parent",e.RoomRedaction="m.room.redaction",e.RoomMessage="m.room.message",e.RoomMessageEncrypted="m.room.encrypted",e.Sticker="m.sticker",e.CallInvite="m.call.invite",e.CallCandidates="m.call.candidates",e.CallAnswer="m.call.answer",e.CallHangup="m.call.hangup",e.CallReject="m.call.reject",e.CallSelectAnswer="m.call.select_answer",e.CallNegotiate="m.call.negotiate",e.CallSDPStreamMetadataChanged="m.call.sdp_stream_metadata_changed",e.CallSDPStreamMetadataChangedPrefix="org.matrix.call.sdp_stream_metadata_changed",e.CallReplaces="m.call.replaces",e.CallAssertedIdentity="m.call.asserted_identity",e.CallAssertedIdentityPrefix="org.matrix.call.asserted_identity",e.KeyVerificationRequest="m.key.verification.request",e.KeyVerificationStart="m.key.verification.start",e.KeyVerificationCancel="m.key.verification.cancel",e.KeyVerificationMac="m.key.verification.mac",e.KeyVerificationDone="m.key.verification.done",e.KeyVerificationKey="m.key.verification.key",e.KeyVerificationAccept="m.key.verification.accept",e.KeyVerificationReady="m.key.verification.ready",e.RoomMessageFeedback="m.room.message.feedback",e.Reaction="m.reaction",e.Typing="m.typing",e.Receipt="m.receipt",e.Presence="m.presence",e.FullyRead="m.fully_read",e.Tag="m.tag",e.SpaceOrder="org.matrix.msc3230.space_order",e.PushRules="m.push_rules",e.Direct="m.direct",e.IgnoredUserList="m.ignored_user_list",e.RoomKey="m.room_key",e.RoomKeyRequest="m.room_key_request",e.ForwardedRoomKey="m.forwarded_room_key",e.Dummy="m.dummy",e.GroupCallPrefix="org.matrix.msc3401.call",e.GroupCallMemberPrefix="org.matrix.msc3401.call.member"}(r||(t.EventType=r={})),t.RelationType=o,function(e){e.Annotation="m.annotation",e.Replace="m.replace",e.Reference="m.reference",e.Thread="m.thread"}(o||(t.RelationType=o={})),t.MsgType=s,function(e){e.Text="m.text",e.Emote="m.emote",e.Notice="m.notice",e.Image="m.image",e.File="m.file",e.Audio="m.audio",e.Location="m.location",e.Video="m.video",e.KeyVerificationRequest="m.key.verification.request"}(s||(t.MsgType=s={})),t.RoomCreateTypeField="type",t.RoomType=a,function(e){e.Space="m.space",e.UnstableCall="org.matrix.msc3417.call",e.ElementVideo="io.element.video"}(a||(t.RoomType=a={}));const c=new i.UnstableValue("m.room.purpose","org.matrix.msc3088.purpose");t.UNSTABLE_MSC3088_PURPOSE=c;const l=new i.UnstableValue("m.enabled","org.matrix.msc3088.enabled");t.UNSTABLE_MSC3088_ENABLED=l;const u=new i.UnstableValue("m.data_tree","org.matrix.msc3089.data_tree");t.UNSTABLE_MSC3089_TREE_SUBTYPE=u;const d=new i.UnstableValue("m.leaf","org.matrix.msc3089.leaf");t.UNSTABLE_MSC3089_LEAF=d;const h=new i.UnstableValue("m.branch","org.matrix.msc3089.branch");t.UNSTABLE_MSC3089_BRANCH=h;const p=new i.UnstableValue("m.room.marker","org.matrix.msc2716.marker");t.UNSTABLE_MSC2716_MARKER=p;const f=new i.UnstableValue("io.element.functional_members","io.element.functional_members");t.UNSTABLE_ELEMENT_FUNCTIONAL_USERS=f;const m=new i.UnstableValue("m.visibility","org.matrix.msc3531.visibility");t.EVENT_VISIBILITY_CHANGE_TYPE=m;const g=new i.UnstableValue("enabled","org.matrix.msc3881.enabled");t.PUSHER_ENABLED=g;const v=new i.UnstableValue("device_id","org.matrix.msc3881.device_id");t.PUSHER_DEVICE_ID=v;const y=new i.UnstableValue("m.local_notification_settings","org.matrix.msc3890.local_notification_settings");t.LOCAL_NOTIFICATION_SETTINGS_PREFIX=y},96548:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_NODE_TYPE=void 0;const i=new(n(47048).UnstableValue)("m.text","org.matrix.msc1767.text");t.TEXT_NODE_TYPE=i},76709:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M_TIMESTAMP=t.M_LOCATION=t.M_ASSET=t.LocationAssetType=void 0;var i=n(47048);let r;n(96548),t.LocationAssetType=r,function(e){e.Self="m.self",e.Pin="m.pin"}(r||(t.LocationAssetType=r={}));const o=new i.UnstableValue("m.asset","org.matrix.msc3488.asset");t.M_ASSET=o;const s=new i.UnstableValue("m.ts","org.matrix.msc3488.ts");t.M_TIMESTAMP=s;const a=new i.UnstableValue("m.location","org.matrix.msc3488.location");t.M_LOCATION=a},44702:(e,t)=>{"use strict";let n,i,r,o,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.Visibility=t.RestrictedAllowType=t.Preset=t.JoinRule=t.HistoryVisibility=t.GuestAccess=void 0,t.Visibility=n,function(e){e.Public="public",e.Private="private"}(n||(t.Visibility=n={})),t.Preset=i,function(e){e.PrivateChat="private_chat",e.TrustedPrivateChat="trusted_private_chat",e.PublicChat="public_chat"}(i||(t.Preset=i={})),t.JoinRule=r,function(e){e.Public="public",e.Invite="invite",e.Private="private",e.Knock="knock",e.Restricted="restricted"}(r||(t.JoinRule=r={})),t.RestrictedAllowType=o,function(e){e.RoomMembership="m.room_membership"}(o||(t.RestrictedAllowType=o={})),t.GuestAccess=s,function(e){e.CanJoin="can_join",e.Forbidden="forbidden"}(s||(t.GuestAccess=s={})),t.HistoryVisibility=a,function(e){e.Invited="invited",e.Joined="joined",e.Shared="shared",e.WorldReadable="world_readable"}(a||(t.HistoryVisibility=a={}))},95550:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.ReceiptType=t.MAIN_ROOM_TIMELINE=void 0,t.ReceiptType=n,function(e){e.Read="m.read",e.FullyRead="m.fully_read",e.ReadPrivate="m.read.private"}(n||(t.ReceiptType=n={})),t.MAIN_ROOM_TIMELINE="main"},76513:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},49162:(e,t)=>{"use strict";var n;let i;Object.defineProperty(t,"__esModule",{value:!0}),t.SearchOrderBy=void 0,function(e){e.RoomId="room_id",e.Sender="sender"}(n||(n={})),t.SearchOrderBy=i,function(e){e.Recent="recent",e.Rank="rank"}(i||(t.SearchOrderBy=i={}))},1467:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNREAD_THREAD_NOTIFICATIONS=void 0;const i=new(n(47048).ServerControlledNamespacedValue)("unread_thread_notifications","org.matrix.msc3773.unread_thread_notifications");t.UNREAD_THREAD_NOTIFICATIONS=i},29953:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M_TOPIC=void 0;const i=new(n(47048).UnstableValue)("m.topic","org.matrix.msc3765.topic");t.M_TOPIC=i},47048:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.UnstableValue=t.ServerControlledNamespacedValue=t.NamespacedValue=void 0;var r=i(n(59713));class o{constructor(e,t){if(this.stable=e,this.unstable=t,!this.unstable&&!this.stable)throw new Error("One of stable or unstable values must be supplied")}get name(){return this.stable?this.stable:this.unstable}get altName(){return this.stable?this.unstable:null}get names(){const e=[this.name],t=this.altName;return t&&e.push(t),e}matches(e){return this.name===e||this.altName===e}findIn(e){let t;return this.name&&(t=null==e?void 0:e[this.name]),!t&&this.altName&&(t=null==e?void 0:e[this.altName]),t}includedIn(e){let t=!1;return this.name&&(t=e.includes(this.name)),!t&&this.altName&&(t=e.includes(this.altName)),t}}t.NamespacedValue=o,t.ServerControlledNamespacedValue=class extends o{constructor(...e){super(...e),(0,r.default)(this,"preferUnstable",!1)}setPreferUnstable(e){this.preferUnstable=e}get name(){return this.stable&&!this.preferUnstable?this.stable:this.unstable}},t.UnstableValue=class extends o{constructor(e,t){if(super(e,t),!this.unstable)throw new Error("Unstable value must be supplied")}get name(){return this.unstable}get altName(){return this.stable}}},20771:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TypedReEmitter=t.ReEmitter=void 0;var r=i(n(59713));class o{constructor(e){this.target=e,(0,r.default)(this,"reEmitters",new Map)}reEmit(e,t){let n=this.reEmitters.get(e);n||(n=new Map,this.reEmitters.set(e,n));for(const i of t){const t=(...t)=>{"error"===i&&0===this.target.listenerCount("error")||this.target.emit(i,...t,e)};e.on(i,t),n.set(i,t)}}stopReEmitting(e,t){const n=this.reEmitters.get(e);if(n){for(const i of t)e.off(i,n.get(i)),n.delete(i);0===n.size&&this.reEmitters.delete(e)}}}t.ReEmitter=o,t.TypedReEmitter=class extends o{constructor(e){super(e)}reEmit(e,t){super.reEmit(e,t)}stopReEmitting(e,t){super.stopReEmitting(e,t)}}},63210:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ToDeviceMessageQueue=void 0;var r=i(n(59713)),o=n(7434),s=n(39443);t.ToDeviceMessageQueue=class{constructor(e){this.client=e,(0,r.default)(this,"sending",!1),(0,r.default)(this,"running",!0),(0,r.default)(this,"retryTimeout",null),(0,r.default)(this,"retryAttempts",0),(0,r.default)(this,"sendQueue",(async()=>{if(null!==this.retryTimeout&&clearTimeout(this.retryTimeout),this.retryTimeout=null,this.sending||!this.running)return;let e;o.logger.debug("Attempting to send queued to-device messages"),this.sending=!0;try{for(;this.running&&(e=await this.client.store.getOldestToDeviceBatch(),null!==e);)await this.sendBatch(e),await this.client.store.removeToDeviceBatch(e.id),this.retryAttempts=0;if(!this.running)return;o.logger.debug("All queued to-device messages sent")}catch(t){++this.retryAttempts;const n=s.MatrixScheduler.RETRY_BACKOFF_RATELIMIT(null,this.retryAttempts,t);if(-1===n)return void(4===Math.floor(t.httpStatus/100)?(o.logger.error("Fatal error when sending to-device message - dropping to-device batch!",t),await this.client.store.removeToDeviceBatch(e.id)):o.logger.info("Automatic retry limit reached for to-device messages."));o.logger.info(`Failed to send batch of to-device messages. Will retry in ${n}ms`,t),this.retryTimeout=setTimeout(this.sendQueue,n)}finally{this.sending=!1}}))}start(){this.running=!0,this.sendQueue()}stop(){this.running=!1,null!==this.retryTimeout&&clearTimeout(this.retryTimeout),this.retryTimeout=null}async queueBatch(e){const t=[];for(let n=0;n<e.batch.length;n+=20){const i={eventType:e.eventType,batch:e.batch.slice(n,n+20),txnId:this.client.makeTxnId()};t.push(i);const r=i.batch.map((e=>`${e.userId}:${e.deviceId}`));o.logger.info(`Created batch of to-device messages with txn id ${i.txnId} for ${r}`)}await this.client.store.saveToDeviceBatches(t),o.logger.info(`Enqueued to-device messages with txn ids ${t.map((e=>e.txnId))}`),this.sendQueue()}async sendBatch(e){const t={};for(const n of e.batch)t[n.userId]||(t[n.userId]={}),t[n.userId][n.deviceId]=n.payload;o.logger.info(`Sending batch of ${e.batch.length} to-device messages with ID ${e.id} and txnId ${e.txnId}`),await this.client.sendToDevice(e.eventType,t,e.txnId)}}},79118:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDiscoveryAction=t.AutoDiscovery=void 0;var r=i(n(59713)),o=n(7434),s=n(30095);let a;var c;t.AutoDiscoveryAction=a,function(e){e.SUCCESS="SUCCESS",e.IGNORE="IGNORE",e.PROMPT="PROMPT",e.FAIL_PROMPT="FAIL_PROMPT",e.FAIL_ERROR="FAIL_ERROR"}(a||(t.AutoDiscoveryAction=a={})),function(e){e.Invalid="Invalid homeserver discovery response",e.GenericFailure="Failed to get autodiscovery configuration from server",e.InvalidHsBaseUrl="Invalid base_url for m.homeserver",e.InvalidHomeserver="Homeserver URL does not appear to be a valid Matrix homeserver",e.InvalidIsBaseUrl="Invalid base_url for m.identity_server",e.InvalidIdentityServer="Identity server URL does not appear to be a valid identity server",e.InvalidIs="Invalid identity server discovery response",e.MissingWellknown="No .well-known JSON file found",e.InvalidJson="Invalid JSON"}(c||(c={}));class l{static async fromDiscoveryConfig(e){const t={"m.homeserver":{state:l.FAIL_ERROR,error:l.ERROR_INVALID,base_url:null},"m.identity_server":{state:l.PROMPT,error:null,base_url:null}};if(!e||!e["m.homeserver"])return o.logger.error("No m.homeserver key in config"),t["m.homeserver"].state=l.FAIL_PROMPT,t["m.homeserver"].error=l.ERROR_INVALID,Promise.resolve(t);if(!e["m.homeserver"].base_url)return o.logger.error("No m.homeserver base_url in config"),t["m.homeserver"].state=l.FAIL_PROMPT,t["m.homeserver"].error=l.ERROR_INVALID_HS_BASE_URL,Promise.resolve(t);const n=this.sanitizeWellKnownUrl(e["m.homeserver"].base_url);if(!n)return o.logger.error("Invalid base_url for m.homeserver"),t["m.homeserver"].error=l.ERROR_INVALID_HS_BASE_URL,Promise.resolve(t);const i=await this.fetchWellKnownObject(`${n}/_matrix/client/versions`);if(!i||!i.raw.versions)return o.logger.error("Invalid /versions response"),t["m.homeserver"].error=l.ERROR_INVALID_HOMESERVER,t["m.homeserver"].base_url=n,Promise.resolve(t);t["m.homeserver"]={state:l.SUCCESS,error:null,base_url:n};let r="";if(e["m.identity_server"]){const n={"m.homeserver":t["m.homeserver"],"m.identity_server":{state:l.FAIL_PROMPT,error:l.ERROR_INVALID_IS,base_url:null}};if(r=this.sanitizeWellKnownUrl(e["m.identity_server"].base_url),!r)return o.logger.error("Invalid base_url for m.identity_server"),n["m.identity_server"].error=l.ERROR_INVALID_IS_BASE_URL,Promise.resolve(n);const i=await this.fetchWellKnownObject(`${r}/_matrix/identity/api/v1`);if(!i||!i.raw||i.action!==a.SUCCESS)return o.logger.error("Invalid /api/v1 response"),n["m.identity_server"].error=l.ERROR_INVALID_IDENTITY_SERVER,n["m.identity_server"].base_url=r,Promise.resolve(n)}return r&&r.toString().length>0&&(t["m.identity_server"]={state:l.SUCCESS,error:null,base_url:r}),Object.keys(e).forEach((n=>{if("m.homeserver"===n||"m.identity_server"===n){const i=["error","state","base_url"];for(const r of Object.keys(e[n]))i.includes(r)||(t[n][r]=e[n][r])}else t[n]=e[n]})),Promise.resolve(t)}static async findClientConfig(e){if(!e||"string"!=typeof e||0===e.length)throw new Error("'domain' must be a string of non-zero length");const t={"m.homeserver":{state:l.FAIL_ERROR,error:l.ERROR_INVALID,base_url:null},"m.identity_server":{state:l.PROMPT,error:null,base_url:null}},n=await this.fetchWellKnownObject(`https://${e}/.well-known/matrix/client`);return n&&n.action===a.SUCCESS?l.fromDiscoveryConfig(n.raw):(o.logger.error("No response or error when parsing .well-known"),n.reason&&o.logger.error(n.reason),n.action===a.IGNORE?t["m.homeserver"]={state:l.PROMPT,error:null,base_url:null}:(t["m.homeserver"].state=l.FAIL_PROMPT,t["m.homeserver"].error=l.ERROR_INVALID),Promise.resolve(t))}static async getRawClientConfig(e){if(!e||"string"!=typeof e||0===e.length)throw new Error("'domain' must be a string of non-zero length");const t=await this.fetchWellKnownObject(`https://${e}/.well-known/matrix/client`);return t&&t.raw||{}}static sanitizeWellKnownUrl(e){if(!e)return!1;try{var t;let n;try{n=new URL(e)}catch(e){o.logger.error("Could not parse url",e)}if(null===(t=n)||void 0===t||!t.hostname)return!1;if("http:"!==n.protocol&&"https:"!==n.protocol)return!1;const i=n.port?`:${n.port}`:"",r=n.pathname?n.pathname:"";let s=`${n.protocol}//${n.hostname}${i}${r}`;return s.endsWith("/")&&(s=s.substring(0,s.length-1)),s}catch(e){return o.logger.error(e),!1}}static fetch(e,t){return this.fetchFn?this.fetchFn(e,t):n.g.fetch(e,t)}static setFetchFn(e){l.fetchFn=e}static async fetchWellKnownObject(e){let t;try{if(t=await l.fetch(e,{method:s.Method.Get,signal:(0,s.timeoutSignal)(5e3)}),404===t.status)return{raw:{},action:a.IGNORE,reason:l.ERROR_MISSING_WELLKNOWN};if(!t.ok)return{raw:{},action:a.FAIL_PROMPT,reason:"General failure"}}catch(e){const t=e;let n="";return"object"==typeof t&&(n=null==t?void 0:t.message),{error:t,raw:{},action:a.FAIL_PROMPT,reason:n||"General failure"}}try{return{raw:await t.json(),action:a.SUCCESS}}catch(e){const t=e;return{error:t,raw:{},action:a.FAIL_PROMPT,reason:"SyntaxError"===(null==t?void 0:t.name)?l.ERROR_INVALID_JSON:l.ERROR_INVALID}}}}t.AutoDiscovery=l,(0,r.default)(l,"ERROR_INVALID",c.Invalid),(0,r.default)(l,"ERROR_GENERIC_FAILURE",c.GenericFailure),(0,r.default)(l,"ERROR_INVALID_HS_BASE_URL",c.InvalidHsBaseUrl),(0,r.default)(l,"ERROR_INVALID_HOMESERVER",c.InvalidHomeserver),(0,r.default)(l,"ERROR_INVALID_IS_BASE_URL",c.InvalidIsBaseUrl),(0,r.default)(l,"ERROR_INVALID_IDENTITY_SERVER",c.InvalidIdentityServer),(0,r.default)(l,"ERROR_INVALID_IS",c.InvalidIs),(0,r.default)(l,"ERROR_MISSING_WELLKNOWN",c.MissingWellknown),(0,r.default)(l,"ERROR_INVALID_JSON",c.InvalidJson),(0,r.default)(l,"ALL_ERRORS",Object.keys(c)),(0,r.default)(l,"FAIL_ERROR",a.FAIL_ERROR),(0,r.default)(l,"FAIL_PROMPT",a.FAIL_PROMPT),(0,r.default)(l,"PROMPT",a.PROMPT),(0,r.default)(l,"SUCCESS",a.SUCCESS),(0,r.default)(l,"fetchFn",void 0)},62168:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.UNSTABLE_MSC3852_LAST_SEEN_UA=t.RoomVersionStability=t.PendingEventOrdering=t.MatrixClient=t.M_AUTHENTICATION=t.ClientEvent=t.CRYPTO_ENABLED=void 0,t.fixNotificationCountOnDecryption=ge;var r=i(n(6479)),o=i(n(59713)),s=n(71333),a=n(64551),c=n(24369),l=n(25641),u=n(59679),d=n(27906),h=n(62931),p=ne(n(3102)),f=n(88910),m=n(31707),g=n(79118),v=ne(n(32772)),y=n(20771),b=n(40635),E=n(7434),S=n(91415),w=n(30095),_=n(12600),T=n(34077),x=n(91597),C=n(83998),I=n(73667),k=n(41398),M=n(54830),A=n(70764),O=ne(n(44656)),R=n(27366),L=n(42481),D=n(44702),N=n(81166),P=n(98401),$=n(75537),U=n(46170),B=n(49162),F=n(1470),j=n(8969),H=n(7626),K=n(98738),q=n(55861),V=n(95550),G=n(70011),W=n(36969),z=n(85699),Y=n(47048),X=n(63210),J=n(88515),Q=n(1467),Z=n(25268);const ee=["server","limit","since"];function te(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(te=function(e){return e?n:t})(e)}function ne(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=te(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const oe=(0,_.isCryptoAvailable)();t.CRYPTO_ENABLED=oe;const se=6e5,ae=new Y.UnstableValue("last_seen_user_agent","org.matrix.msc3852.last_seen_user_agent");let ce,le;var ue;t.UNSTABLE_MSC3852_LAST_SEEN_UA=ae,t.PendingEventOrdering=ce,function(e){e.Chronological="chronological",e.Detached="detached"}(ce||(t.PendingEventOrdering=ce={})),t.RoomVersionStability=le,function(e){e.Stable="stable",e.Unstable="unstable"}(le||(t.RoomVersionStability=le={})),function(e){e.MasterKey="master_key",e.SelfSigningKey="self_signing_key",e.UserSigningKey="user_signing_key"}(ue||(ue={}));const de=new Y.UnstableValue("m.authentication","org.matrix.msc2965.authentication");t.M_AUTHENTICATION=de;const he="$";let pe;t.ClientEvent=pe,function(e){e.Sync="sync",e.Event="event",e.ToDeviceEvent="toDeviceEvent",e.AccountData="accountData",e.Room="Room",e.DeleteRoom="deleteRoom",e.SyncUnexpectedError="sync.unexpectedError",e.ClientWellKnown="WellKnown.client",e.ReceivedVoipEvent="received_voip_event",e.TurnServers="turnServers",e.TurnServersError="turnServers.error"}(pe||(t.ClientEvent=pe={}));const fe=new Y.UnstableValue("action","org.matrix.msc3824.action");class me extends q.TypedEventEmitter{constructor(e){var t;super(),(0,o.default)(this,"reEmitter",new y.TypedReEmitter(this)),(0,o.default)(this,"olmVersion",null),(0,o.default)(this,"usingExternalCrypto",!1),(0,o.default)(this,"store",void 0),(0,o.default)(this,"deviceId",void 0),(0,o.default)(this,"credentials",void 0),(0,o.default)(this,"pickleKey",void 0),(0,o.default)(this,"scheduler",void 0),(0,o.default)(this,"clientRunning",!1),(0,o.default)(this,"timelineSupport",!1),(0,o.default)(this,"urlPreviewCache",{}),(0,o.default)(this,"identityServer",void 0),(0,o.default)(this,"http",void 0),(0,o.default)(this,"crypto",void 0),(0,o.default)(this,"cryptoCallbacks",void 0),(0,o.default)(this,"callEventHandler",void 0),(0,o.default)(this,"groupCallEventHandler",void 0),(0,o.default)(this,"supportsCallTransfer",!1),(0,o.default)(this,"forceTURN",!1),(0,o.default)(this,"iceCandidatePoolSize",0),(0,o.default)(this,"idBaseUrl",void 0),(0,o.default)(this,"baseUrl",void 0),(0,o.default)(this,"canSupportVoip",!1),(0,o.default)(this,"peekSync",null),(0,o.default)(this,"isGuestAccount",!1),(0,o.default)(this,"ongoingScrollbacks",{}),(0,o.default)(this,"notifTimelineSet",null),(0,o.default)(this,"cryptoStore",void 0),(0,o.default)(this,"verificationMethods",void 0),(0,o.default)(this,"fallbackICEServerAllowed",!1),(0,o.default)(this,"roomList",void 0),(0,o.default)(this,"syncApi",void 0),(0,o.default)(this,"roomNameGenerator",void 0),(0,o.default)(this,"pushRules",void 0),(0,o.default)(this,"syncLeftRoomsPromise",void 0),(0,o.default)(this,"syncedLeftRooms",!1),(0,o.default)(this,"clientOpts",void 0),(0,o.default)(this,"clientWellKnownIntervalID",void 0),(0,o.default)(this,"canResetTimelineCallback",void 0),(0,o.default)(this,"canSupport",new Map),(0,o.default)(this,"pushProcessor",new m.PushProcessor(this)),(0,o.default)(this,"serverVersionsPromise",void 0),(0,o.default)(this,"cachedCapabilities",void 0),(0,o.default)(this,"clientWellKnown",void 0),(0,o.default)(this,"clientWellKnownPromise",void 0),(0,o.default)(this,"turnServers",[]),(0,o.default)(this,"turnServersExpiry",0),(0,o.default)(this,"checkTurnServersIntervalID",void 0),(0,o.default)(this,"exportedOlmDeviceToImport",void 0),(0,o.default)(this,"txnCtr",0),(0,o.default)(this,"mediaHandler",new H.MediaHandler(this)),(0,o.default)(this,"sessionId",void 0),(0,o.default)(this,"pendingEventEncryption",new Map),(0,o.default)(this,"useE2eForGroupCall",!0),(0,o.default)(this,"toDeviceMessageQueue",void 0),(0,o.default)(this,"ignoredInvites",void 0),(0,o.default)(this,"startCallEventHandler",(()=>{this.isInitialSyncComplete()&&(this.callEventHandler.start(),this.groupCallEventHandler.start(),this.off(pe.Sync,this.startCallEventHandler))})),e.baseUrl=p.ensureNoTrailingSlash(e.baseUrl),e.idBaseUrl=p.ensureNoTrailingSlash(e.idBaseUrl),this.baseUrl=e.baseUrl,this.idBaseUrl=e.idBaseUrl,this.identityServer=e.identityServer,this.usingExternalCrypto=null!==(t=e.usingExternalCrypto)&&void 0!==t&&t,this.store=e.store||new l.StubStore,this.deviceId=e.deviceId||null,this.sessionId=(0,P.randomString)(10);const n=e.userId||null;this.credentials={userId:n},this.http=new w.MatrixHttpApi(this,{fetchFn:e.fetchFn,baseUrl:e.baseUrl,idBaseUrl:e.idBaseUrl,accessToken:e.accessToken,prefix:w.ClientPrefix.R0,onlyData:!0,extraParams:e.queryParams,localTimeoutMs:e.localTimeoutMs,useAuthorizationHeader:e.useAuthorizationHeader}),e.deviceToImport?this.deviceId?E.logger.warn("not importing device because device ID is provided to constructor independently of exported data"):this.credentials.userId?E.logger.warn("not importing device because user ID is provided to constructor independently of exported data"):e.deviceToImport.deviceId?(this.deviceId=e.deviceToImport.deviceId,this.credentials.userId=e.deviceToImport.userId,this.exportedOlmDeviceToImport=e.deviceToImport.olmDevice):E.logger.warn("not importing device because no device ID in exported data"):e.pickleKey&&(this.pickleKey=e.pickleKey),this.scheduler=e.scheduler,this.scheduler&&this.scheduler.setProcessFunction((async e=>{const t=this.getRoom(e.getRoomId());e.status!==c.EventStatus.SENDING&&this.updatePendingEventStatus(t,e,c.EventStatus.SENDING);const n=await this.sendEventHttpRequest(e);return t&&t.updatePendingEvent(e,c.EventStatus.SENT,n.event_id),n})),(0,u.supportsMatrixCall)()&&(this.callEventHandler=new h.CallEventHandler(this),this.groupCallEventHandler=new K.GroupCallEventHandler(this),this.canSupportVoip=!0,this.on(pe.Sync,this.startCallEventHandler)),this.timelineSupport=Boolean(e.timelineSupport),this.cryptoStore=e.cryptoStore,this.verificationMethods=e.verificationMethods,this.cryptoCallbacks=e.cryptoCallbacks||{},this.forceTURN=e.forceTURN||!1,this.iceCandidatePoolSize=void 0===e.iceCandidatePoolSize?0:e.iceCandidatePoolSize,this.supportsCallTransfer=e.supportsCallTransfer||!1,this.fallbackICEServerAllowed=e.fallbackICEServerAllowed||!1,void 0!==e.useE2eForGroupCall&&(this.useE2eForGroupCall=e.useE2eForGroupCall),this.roomList=new b.RoomList(this.cryptoStore),this.roomNameGenerator=e.roomNameGenerator,this.toDeviceMessageQueue=new X.ToDeviceMessageQueue(this),this.on(c.MatrixEventEvent.Decrypted,(e=>{ge(this,e)})),this.on(R.RoomEvent.Receipt,((e,t)=>{if(t&&this.isRoomEncrypted(t.roomId)){const i=e.getContent();if(!(Object.keys(i).filter((e=>{for(const[t,n]of Object.entries(i[e]))if(p.isSupportedReceiptType(t)&&n&&Object.keys(n).includes(this.getUserId()))return!0;return!1})).length>0))return;const r=20,o=t.getLiveTimeline().getEvents();let s=0;for(let e=o.length-1;e>=0;e--){var n;if(e===o.length-r)return;const i=o[e];if(t.hasUserReadEvent(this.getUserId(),i.getId()))break;const a=this.getPushActionsForEvent(i);s+=null!=a&&null!==(n=a.tweaks)&&void 0!==n&&n.highlight?1:0}t.setUnreadNotificationCount(R.NotificationCountType.Highlight,s)}})),this.ignoredInvites=new J.IgnoredInvites(this)}async startClient(e){if(this.clientRunning)return;this.clientRunning=!0,"number"==typeof e&&(e={initialSyncLimit:e});const t=this.getUserId();t&&this.store.storeUser(new C.User(t)),this.crypto&&this.crypto.uploadDeviceKeys(),this.canSupportVoip&&(this.checkTurnServersIntervalID=setInterval((()=>{this.checkTurnServers()}),se),this.checkTurnServers()),this.syncApi&&(E.logger.error("Still have sync object whilst not running: stopping old one"),this.syncApi.stop());try{await this.getVersions();const{threads:e,list:t,fwdPagination:n}=await this.doesServerSupportThread();W.Thread.setServerSideSupport(e),W.Thread.setServerSideListSupport(t),W.Thread.setServerSideFwdPaginationSupport(n)}catch(e){E.logger.error("Can't fetch server versions, continuing to initialise sync, this will be retried later",e)}this.clientOpts=Object.assign({},e),this.clientOpts.crypto=this.crypto,this.clientOpts.canResetEntireTimeline=e=>!!this.canResetTimelineCallback&&this.canResetTimelineCallback(e),this.clientOpts.slidingSync?this.syncApi=new G.SlidingSyncSdk(this.clientOpts.slidingSync,this,this.clientOpts):this.syncApi=new a.SyncApi(this,this.clientOpts),this.syncApi.sync(),void 0!==this.clientOpts.clientWellKnownPollPeriod&&(this.clientWellKnownIntervalID=setInterval((()=>{this.fetchClientWellKnown()}),1e3*this.clientOpts.clientWellKnownPollPeriod),this.fetchClientWellKnown()),this.toDeviceMessageQueue.start()}stopClient(){var e,t,i,r,o;null===(e=this.crypto)||void 0===e||e.stop(),this.clientRunning&&(E.logger.log("stopping MatrixClient"),this.clientRunning=!1,null===(t=this.syncApi)||void 0===t||t.stop(),this.syncApi=void 0,null===(i=this.peekSync)||void 0===i||i.stopPeeking(),null===(r=this.callEventHandler)||void 0===r||r.stop(),null===(o=this.groupCallEventHandler)||void 0===o||o.stop(),this.callEventHandler=void 0,this.groupCallEventHandler=void 0,n.g.clearInterval(this.checkTurnServersIntervalID),this.checkTurnServersIntervalID=void 0,void 0!==this.clientWellKnownIntervalID&&n.g.clearInterval(this.clientWellKnownIntervalID),this.toDeviceMessageQueue.stop())}async rehydrateDevice(){if(this.crypto)throw new Error("Cannot rehydrate device after crypto is initialized");if(!this.cryptoCallbacks.getDehydrationKey)return;const e=await this.getDehydratedDevice();if(!e)return;if(!e.device_data||!e.device_id)return void E.logger.info("no dehydrated device found");const t=new n.g.Olm.Account;try{const n=e.device_data;if(n.algorithm!==M.DEHYDRATION_ALGORITHM)return void E.logger.warn("Wrong algorithm for dehydrated device");E.logger.log("unpickling dehydrated device");const i=await this.cryptoCallbacks.getDehydrationKey(n,(e=>{t.unpickle(new Uint8Array(e),n.account)}));if(t.unpickle(i,n.account),E.logger.log("unpickled device"),(await this.http.authedRequest(w.Method.Post,"/dehydrated_device/claim",void 0,{device_id:e.device_id},{prefix:"/_matrix/client/unstable/org.matrix.msc2697.v2"})).success){this.deviceId=e.device_id,E.logger.info("using dehydrated device");const n=this.pickleKey||"DEFAULT_KEY";return this.exportedOlmDeviceToImport={pickledAccount:t.pickle(n),sessions:[],pickleKey:n},t.free(),this.deviceId}return t.free(),void E.logger.info("not using dehydrated device")}catch(e){t.free(),E.logger.warn("could not unpickle",e)}}async getDehydratedDevice(){try{return await this.http.authedRequest(w.Method.Get,"/dehydrated_device",void 0,void 0,{prefix:"/_matrix/client/unstable/org.matrix.msc2697.v2"})}catch(e){return void E.logger.info("could not get dehydrated device",e)}}async setDehydrationKey(e,t,n){if(this.crypto)return this.crypto.dehydrationManager.setKeyAndQueueDehydration(e,t,n);E.logger.warn("not dehydrating device if crypto is not enabled")}async createDehydratedDevice(e,t,n){if(this.crypto)return await this.crypto.dehydrationManager.setKey(e,t,n),this.crypto.dehydrationManager.dehydrateDevice();E.logger.warn("not dehydrating device if crypto is not enabled")}async exportDevice(){if(this.crypto)return{userId:this.credentials.userId,deviceId:this.deviceId,olmDevice:await this.crypto.olmDevice.export()};E.logger.warn("not exporting device if crypto is not enabled")}clearStores(){if(this.clientRunning)throw new Error("Cannot clear stores while client is running");const e=[];return e.push(this.store.deleteAllData()),this.cryptoStore&&e.push(this.cryptoStore.deleteAllData()),Promise.all(e).then()}getUserId(){return this.credentials&&this.credentials.userId?this.credentials.userId:null}getDomain(){return this.credentials&&this.credentials.userId?this.credentials.userId.replace(/^.*?:/,""):null}getUserIdLocalpart(){return this.credentials&&this.credentials.userId?this.credentials.userId.split(":")[0].substring(1):null}getDeviceId(){return this.deviceId}getSessionId(){return this.sessionId}supportsVoip(){return this.canSupportVoip}getMediaHandler(){return this.mediaHandler}setForceTURN(e){this.forceTURN=e}setSupportsCallTransfer(e){this.supportsCallTransfer=e}getUseE2eForGroupCall(){return this.useE2eForGroupCall}createCall(e){return(0,u.createNewMatrixCall)(this,e)}async createGroupCall(e,t,n,i,r,o){if(this.getGroupCallForRoom(e))throw new Error(`${e} already has an existing group call`);const s=this.getRoom(e);if(!s)throw new Error(`Cannot find room ${e}`);return new j.GroupCall(this,s,t,n,i,void 0,r,o).create()}waitUntilRoomReadyForGroupCalls(e){return this.groupCallEventHandler.waitUntilRoomReadyForGroupCalls(e)}getGroupCallForRoom(e){return this.groupCallEventHandler.groupCalls.get(e)||null}getSyncState(){var e,t;return null!==(e=null===(t=this.syncApi)||void 0===t?void 0:t.getSyncState())&&void 0!==e?e:null}getSyncStateData(){return this.syncApi?this.syncApi.getSyncStateData():null}isInitialSyncComplete(){const e=this.getSyncState();return!!e&&(e===a.SyncState.Prepared||e===a.SyncState.Syncing)}isGuest(){return this.isGuestAccount}setGuest(e){this.isGuestAccount=e}getScheduler(){return this.scheduler}retryImmediately(){var e,t;return this.toDeviceMessageQueue.sendQueue(),null!==(e=null===(t=this.syncApi)||void 0===t?void 0:t.retryImmediately())&&void 0!==e&&e}getNotifTimelineSet(){return this.notifTimelineSet}setNotifTimelineSet(e){this.notifTimelineSet=e}getCapabilities(e=!1){const t=(new Date).getTime();return this.cachedCapabilities&&!e&&t<this.cachedCapabilities.expiration?(E.logger.log("Returning cached capabilities"),Promise.resolve(this.cachedCapabilities.capabilities)):this.http.authedRequest(w.Method.Get,"/capabilities").catch((e=>{E.logger.error(e)})).then(((e={})=>{const n=e.capabilities||{},i=Object.keys(n).length?216e5:6e4+5e3*Math.random();return this.cachedCapabilities={capabilities:n,expiration:t+i},E.logger.log("Caching capabilities: ",n),n}))}async initCrypto(){if(!(0,_.isCryptoAvailable)())throw new Error("End-to-end encryption not supported in this js-sdk build: did you remember to load the olm library?");if(this.crypto)return void E.logger.warn("Attempt to re-initialise e2e encryption on MatrixClient");if(!this.cryptoStore)throw new Error("Cannot enable encryption: no cryptoStore provided");E.logger.log("Crypto: Starting up crypto store..."),await this.cryptoStore.startup(),E.logger.log("Crypto: initialising roomlist..."),await this.roomList.init();const e=this.getUserId();if(null===e)throw new Error("Cannot enable encryption on MatrixClient with unknown userId: ensure userId is passed in createClient().");if(null===this.deviceId)throw new Error("Cannot enable encryption on MatrixClient with unknown deviceId: ensure deviceId is passed in createClient().");const t=new _.Crypto(this,e,this.deviceId,this.store,this.cryptoStore,this.roomList,this.verificationMethods);this.reEmitter.reEmit(t,[_.CryptoEvent.KeyBackupFailed,_.CryptoEvent.KeyBackupSessionsRemaining,_.CryptoEvent.RoomKeyRequest,_.CryptoEvent.RoomKeyRequestCancellation,_.CryptoEvent.Warning,_.CryptoEvent.DevicesUpdated,_.CryptoEvent.WillUpdateDevices,_.CryptoEvent.DeviceVerificationChanged,_.CryptoEvent.UserTrustStatusChanged,_.CryptoEvent.KeysChanged]),E.logger.log("Crypto: initialising crypto object..."),await t.init({exportedOlmDevice:this.exportedOlmDeviceToImport,pickleKey:this.pickleKey}),delete this.exportedOlmDeviceToImport,this.olmVersion=_.Crypto.getOlmVersion(),t.registerEventHandlers(this),this.crypto=t}isCryptoEnabled(){return!!this.crypto}getDeviceEd25519Key(){var e,t;return null!==(e=null===(t=this.crypto)||void 0===t?void 0:t.getDeviceEd25519Key())&&void 0!==e?e:null}getDeviceCurve25519Key(){var e,t;return null!==(e=null===(t=this.crypto)||void 0===t?void 0:t.getDeviceCurve25519Key())&&void 0!==e?e:null}async uploadKeys(){if(!this.crypto)throw new Error("End-to-end encryption disabled");await this.crypto.uploadDeviceKeys()}downloadKeys(e,t){return this.crypto?this.crypto.downloadKeys(e,t):Promise.reject(new Error("End-to-end encryption disabled"))}getStoredDevicesForUser(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getStoredDevicesForUser(e)||[]}getStoredDevice(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getStoredDevice(e,t)||null}setDeviceVerified(e,t,n=!0){const i=this.setDeviceVerification(e,t,n,null,null);return e==this.credentials.userId&&this.checkKeyBackup(),i}setDeviceBlocked(e,t,n=!0){return this.setDeviceVerification(e,t,null,n,null)}setDeviceKnown(e,t,n=!0){return this.setDeviceVerification(e,t,null,null,n)}async setDeviceVerification(e,t,n,i,r){if(!this.crypto)throw new Error("End-to-end encryption disabled");await this.crypto.setDeviceVerification(e,t,n,i,r)}requestVerificationDM(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.requestVerificationDM(e,t)}findVerificationRequestDMInProgress(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.findVerificationRequestDMInProgress(e)}getVerificationRequestsToDeviceInProgress(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getVerificationRequestsToDeviceInProgress(e)}requestVerification(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.requestVerification(e,t)}beginKeyVerification(e,t,n){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.beginKeyVerification(e,t,n)}checkSecretStorageKey(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkSecretStorageKey(e,t)}setGlobalBlacklistUnverifiedDevices(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.globalBlacklistUnverifiedDevices=e,e}getGlobalBlacklistUnverifiedDevices(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.globalBlacklistUnverifiedDevices}setGlobalErrorOnUnknownDevices(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");this.crypto.globalErrorOnUnknownDevices=e}getGlobalErrorOnUnknownDevices(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.globalErrorOnUnknownDevices}getCrossSigningId(e=A.CrossSigningKey.Master){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getCrossSigningId(e)}getStoredCrossSigningForUser(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getStoredCrossSigningForUser(e)}checkUserTrust(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkUserTrust(e)}checkDeviceTrust(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkDeviceTrust(e,t)}checkIfOwnDeviceCrossSigned(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkIfOwnDeviceCrossSigned(e)}checkOwnCrossSigningTrust(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkOwnCrossSigningTrust(e)}checkCrossSigningPrivateKey(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkCrossSigningPrivateKey(e,t)}legacyDeviceVerification(e,t,n){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.legacyDeviceVerification(e,t,n)}prepareToEncrypt(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");this.crypto.prepareToEncrypt(e)}isCrossSigningReady(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.isCrossSigningReady()}bootstrapCrossSigning(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.bootstrapCrossSigning(e)}getCryptoTrustCrossSignedDevices(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getCryptoTrustCrossSignedDevices()}setCryptoTrustCrossSignedDevices(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");this.crypto.setCryptoTrustCrossSignedDevices(e)}countSessionsNeedingBackup(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.countSessionsNeedingBackup()}getEventEncryptionInfo(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getEventEncryptionInfo(e)}createRecoveryKeyFromPassphrase(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.createRecoveryKeyFromPassphrase(e)}isSecretStorageReady(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.isSecretStorageReady()}bootstrapSecretStorage(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.bootstrapSecretStorage(e)}addSecretStorageKey(e,t,n){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.addSecretStorageKey(e,t,n)}hasSecretStorageKey(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.hasSecretStorageKey(e)}storeSecret(e,t,n){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.storeSecret(e,t,n)}getSecret(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getSecret(e)}isSecretStored(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.isSecretStored(e)}requestSecret(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.requestSecret(e,t)}getDefaultSecretStorageKeyId(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.getDefaultSecretStorageKeyId()}setDefaultSecretStorageKeyId(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.setDefaultSecretStorageKeyId(e)}checkSecretStoragePrivateKey(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.checkSecretStoragePrivateKey(e,t)}async getEventSenderDeviceInfo(e){return this.crypto?this.crypto.getEventSenderDeviceInfo(e):null}async isEventSenderVerified(e){const t=await this.getEventSenderDeviceInfo(e);return!!t&&t.isVerified()}cancelAndResendEventRoomKeyRequest(e){if(!this.crypto)throw new Error("End-to-End encryption disabled");return e.cancelAndResendKeyRequest(this.crypto,this.getUserId())}setRoomEncryption(e,t){if(!this.crypto)throw new Error("End-to-End encryption disabled");return this.crypto.setRoomEncryption(e,t)}isRoomEncrypted(e){const t=this.getRoom(e);return!!t&&(!!t.currentState.getStateEvents(L.EventType.RoomEncryption,"")||this.roomList.isRoomEncrypted(e))}encryptAndSendToDevices(e,t){if(!this.crypto)throw new Error("End-to-End encryption disabled");return this.crypto.encryptAndSendToDevices(e,t)}forceDiscardSession(e){if(!this.crypto)throw new Error("End-to-End encryption disabled");this.crypto.forceDiscardSession(e)}exportRoomKeys(){return this.crypto?this.crypto.exportRoomKeys():Promise.reject(new Error("End-to-end encryption disabled"))}importRoomKeys(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.importRoomKeys(e,t)}checkKeyBackup(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.backupManager.checkKeyBackup()}async getKeyBackupVersion(){let e;try{e=await this.http.authedRequest(w.Method.Get,"/room_keys/version",void 0,void 0,{prefix:w.ClientPrefix.V3})}catch(e){if("M_NOT_FOUND"===e.errcode)return null;throw e}return $.BackupManager.checkBackupVersion(e),e}isKeyBackupTrusted(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.backupManager.isKeyBackupTrusted(e)}getKeyBackupEnabled(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.backupManager.getKeyBackupEnabled()}enableKeyBackup(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.backupManager.enableKeyBackup(e)}disableKeyBackup(){if(!this.crypto)throw new Error("End-to-end encryption disabled");this.crypto.backupManager.disableKeyBackup()}async prepareKeyBackupVersion(e,t={secureSecretStorage:!1}){if(!this.crypto)throw new Error("End-to-end encryption disabled");const{algorithm:n,auth_data:i,recovery_key:r,privateKey:o}=await this.crypto.backupManager.prepareKeyBackupVersion(e);return t.secureSecretStorage&&(await this.storeSecret("m.megolm_backup.v1",(0,v.encodeBase64)(o)),E.logger.info("Key backup private key stored in secret storage")),{algorithm:n,auth_data:i,recovery_key:r}}isKeyBackupKeyStored(){return Promise.resolve(this.isSecretStored("m.megolm_backup.v1"))}async createKeyBackupVersion(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");await this.crypto.backupManager.createKeyBackupVersion(e);const t={algorithm:e.algorithm,auth_data:e.auth_data};await this.crypto.signObject(t.auth_data),this.cryptoCallbacks.getCrossSigningKey&&this.crypto.crossSigningInfo.getId()&&await this.crypto.crossSigningInfo.signObject(t.auth_data,"master");const n=await this.http.authedRequest(w.Method.Post,"/room_keys/version",void 0,t,{prefix:w.ClientPrefix.V3});return await this.checkKeyBackup(),this.getKeyBackupEnabled()||E.logger.error("Key backup not usable even though we just created it"),n}async deleteKeyBackupVersion(e){if(!this.crypto)throw new Error("End-to-end encryption disabled");this.crypto.backupManager.version&&this.crypto.backupManager.disableKeyBackup();const t=p.encodeUri("/room_keys/version/$version",{$version:e});await this.http.authedRequest(w.Method.Delete,t,void 0,void 0,{prefix:w.ClientPrefix.V3})}makeKeyBackupPath(e,t,n){let i;return i=void 0!==t?p.encodeUri("/room_keys/keys/$roomId/$sessionId",{$roomId:e,$sessionId:t}):void 0!==e?p.encodeUri("/room_keys/keys/$roomId",{$roomId:e}):"/room_keys/keys",{path:i,queryData:void 0===n?void 0:{version:n}}}async sendKeyBackup(e,t,n,i){if(!this.crypto)throw new Error("End-to-end encryption disabled");const r=this.makeKeyBackupPath(e,t,n);await this.http.authedRequest(w.Method.Put,r.path,r.queryData,i,{prefix:w.ClientPrefix.V3})}async scheduleAllGroupSessionsForBackup(){if(!this.crypto)throw new Error("End-to-end encryption disabled");await this.crypto.backupManager.scheduleAllGroupSessionsForBackup()}flagAllGroupSessionsForBackup(){if(!this.crypto)throw new Error("End-to-end encryption disabled");return this.crypto.backupManager.flagAllGroupSessionsForBackup()}isValidRecoveryKey(e){try{return(0,T.decodeRecoveryKey)(e),!0}catch(e){return!1}}keyBackupKeyFromPassword(e,t){return(0,x.keyFromAuthData)(t.auth_data,e)}keyBackupKeyFromRecoveryKey(e){return(0,T.decodeRecoveryKey)(e)}async restoreKeyBackupWithPassword(e,t,n,i,r){const o=await(0,x.keyFromAuthData)(i.auth_data,e);return this.restoreKeyBackup(o,t,n,i,r)}async restoreKeyBackupWithSecretStorage(e,t,n,i){if(!this.crypto)throw new Error("End-to-end encryption disabled");const r=await this.getSecret("m.megolm_backup.v1"),o=(0,_.fixBackupKey)(r);if(o){const e=await this.crypto.getSecretStorageKey();await this.storeSecret("m.megolm_backup.v1",o,[e[0]])}const s=(0,v.decodeBase64)(o||r);return this.restoreKeyBackup(s,t,n,e,i)}restoreKeyBackupWithRecoveryKey(e,t,n,i,r){const o=(0,T.decodeRecoveryKey)(e);return this.restoreKeyBackup(o,t,n,i,r)}async restoreKeyBackupWithCache(e,t,n,i){if(!this.crypto)throw new Error("End-to-end encryption disabled");const r=await this.crypto.getSessionBackupPrivateKey();if(!r)throw new Error("Couldn't get key");return this.restoreKeyBackup(r,e,t,n,i)}async restoreKeyBackup(e,t,n,i,r){const o=null==r?void 0:r.cacheCompleteCallback,s=null==r?void 0:r.progressCallback;if(!this.crypto)throw new Error("End-to-end encryption disabled");let a=0,c=[];const l=this.makeKeyBackupPath(t,n,i.version),u=await $.BackupManager.makeAlgorithm(i,(async()=>e)),d=u.untrusted;try{if(!await u.keyMatches(e))return Promise.reject(new w.MatrixError({errcode:me.RESTORE_BACKUP_ERROR_BAD_KEY}));this.crypto.storeSessionBackupPrivateKey(e).catch((e=>{E.logger.warn("Error caching session backup key:",e)})).then(o),s&&s({stage:"fetch"});const i=await this.http.authedRequest(w.Method.Get,l.path,l.queryData,void 0,{prefix:w.ClientPrefix.V3});if(i.rooms){const e=i.rooms;for(const[t,n]of Object.entries(e)){if(!n.sessions)continue;a+=Object.keys(n.sessions).length;const e=await u.decryptSessions(n.sessions);for(const n of e)n.room_id=t,c.push(n)}}else if(i.sessions){const e=i.sessions;a=Object.keys(e).length,c=await u.decryptSessions(e);for(const e of c)e.room_id=t}else{a=1;try{const[e]=await u.decryptSessions({[n]:i});e.room_id=t,e.session_id=n,c.push(e)}catch(e){E.logger.log("Failed to decrypt megolm session from backup",e)}}}finally{u.free()}return await this.importRoomKeys(c,{progressCallback:s,untrusted:d,source:"backup"}),await this.checkKeyBackup(),{total:a,imported:c.length}}async deleteKeysFromBackup(e,t,n){if(!this.crypto)throw new Error("End-to-end encryption disabled");const i=this.makeKeyBackupPath(e,t,n);await this.http.authedRequest(w.Method.Delete,i.path,i.queryData,void 0,{prefix:w.ClientPrefix.V3})}async sendSharedHistoryKeys(e,t){if(!this.crypto)throw new Error("End-to-end encryption disabled");const n=this.roomList.getRoomEncryption(e);if(!n)return void E.logger.error("Unknown room.  Not sharing decryption keys");const i=await this.crypto.downloadKeys(t),r={};for(const[e,t]of Object.entries(i))r[e]=Object.values(t);const o=this.crypto.getRoomDecryptor(e,n.algorithm);o.sendSharedHistoryInboundSessions?await o.sendSharedHistoryInboundSessions(r):E.logger.warn("Algorithm does not support sharing previous keys",n.algorithm)}getMediaConfig(){return this.http.authedRequest(w.Method.Get,"/config",void 0,void 0,{prefix:w.MediaPrefix.R0})}getRoom(e){return e?this.store.getRoom(e):null}getRooms(){return this.store.getRooms()}getVisibleRooms(){const e=this.store.getRooms(),t=new Set;for(const n of e){const e=n.currentState.getStateEvents(L.EventType.RoomCreate,"");if(e){const n=e.getContent().predecessor;n&&n.room_id&&t.add(n.room_id)}}return e.filter((e=>!e.currentState.getStateEvents(L.EventType.RoomTombstone,"")||!t.has(e.roomId)))}getUser(e){return this.store.getUser(e)}getUsers(){return this.store.getUsers()}setAccountData(e,t){const n=p.encodeUri("/user/$userId/account_data/$type",{$userId:this.credentials.userId,$type:e});return(0,w.retryNetworkOperation)(5,(()=>this.http.authedRequest(w.Method.Put,n,void 0,t)))}getAccountData(e){return this.store.getAccountData(e)}async getAccountDataFromServer(e){if(this.isInitialSyncComplete()){const t=this.store.getAccountData(e);return t?t.getContent():null}const t=p.encodeUri("/user/$userId/account_data/$type",{$userId:this.credentials.userId,$type:e});try{return await this.http.authedRequest(w.Method.Get,t)}catch(e){var n;if("M_NOT_FOUND"===(null===(n=e.data)||void 0===n?void 0:n.errcode))return null;throw e}}getIgnoredUsers(){const e=this.getAccountData("m.ignored_user_list");return e&&e.getContent()&&e.getContent().ignored_users?Object.keys(e.getContent().ignored_users):[]}setIgnoredUsers(e){const t={ignored_users:{}};return e.forEach((e=>{t.ignored_users[e]={}})),this.setAccountData("m.ignored_user_list",t)}isUserIgnored(e){return this.getIgnoredUsers().includes(e)}async joinRoom(e,t={}){void 0===t.syncRoom&&(t.syncRoom=!0);const n=this.getRoom(e);if(null!=n&&n.hasMembershipState(this.credentials.userId,"join"))return Promise.resolve(n);let i=Promise.resolve();if(t.inviteSignUrl){const e=new URL(t.inviteSignUrl);e.searchParams.set("mxid",this.credentials.userId),i=this.http.requestOtherUrl(w.Method.Post,e)}const r={};t.viaServers&&(r.server_name=t.viaServers);try{const n={},o=await i;o&&(n.third_party_signed=o);const s=p.encodeUri("/join/$roomid",{$roomid:e}),c=(await this.http.authedRequest(w.Method.Post,s,r,n)).room_id,l=new a.SyncApi(this,this.clientOpts).createRoom(c);return t.syncRoom,l}catch(e){throw e}}resendEvent(e,t){return this.toDeviceMessageQueue.sendQueue(),this.updatePendingEventStatus(t,e,c.EventStatus.SENDING),this.encryptAndSendEvent(t,e)}cancelPendingEvent(e){if(![c.EventStatus.QUEUED,c.EventStatus.NOT_SENT,c.EventStatus.ENCRYPTING].includes(e.status))throw new Error("cannot cancel an event with status "+e.status);e.status===c.EventStatus.ENCRYPTING?this.pendingEventEncryption.delete(e.getId()):this.scheduler&&e.status===c.EventStatus.QUEUED&&this.scheduler.removeEventFromQueue(e);const t=this.getRoom(e.getRoomId());this.updatePendingEventStatus(t,e,c.EventStatus.CANCELLED)}setRoomName(e,t){return this.sendStateEvent(e,L.EventType.RoomName,{name:t})}setRoomTopic(e,t,n){const i=O.makeTopicContent(t,n);return this.sendStateEvent(e,L.EventType.RoomTopic,i)}getRoomTags(e){const t=p.encodeUri("/user/$userId/rooms/$roomId/tags",{$userId:this.credentials.userId,$roomId:e});return this.http.authedRequest(w.Method.Get,t)}setRoomTag(e,t,n){const i=p.encodeUri("/user/$userId/rooms/$roomId/tags/$tag",{$userId:this.credentials.userId,$roomId:e,$tag:t});return this.http.authedRequest(w.Method.Put,i,void 0,n)}deleteRoomTag(e,t){const n=p.encodeUri("/user/$userId/rooms/$roomId/tags/$tag",{$userId:this.credentials.userId,$roomId:e,$tag:t});return this.http.authedRequest(w.Method.Delete,n)}setRoomAccountData(e,t,n){const i=p.encodeUri("/user/$userId/rooms/$roomId/account_data/$type",{$userId:this.credentials.userId,$roomId:e,$type:t});return this.http.authedRequest(w.Method.Put,i,void 0,n)}setPowerLevel(e,t,n,i){let r={users:{}};(null==i?void 0:i.getType())===L.EventType.RoomPowerLevels&&(r=p.deepCopy(i.getContent())),r.users[t]=n;const o=p.encodeUri("/rooms/$roomId/state/m.room.power_levels",{$roomId:e});return this.http.authedRequest(w.Method.Put,o,void 0,r)}async unstable_createLiveBeacon(e,t){return this.unstable_setLiveBeacon(e,t)}async unstable_setLiveBeacon(e,t){return this.sendStateEvent(e,z.M_BEACON_INFO.name,t,this.getUserId())}sendEvent(e,t,n,i,r){var o,s;if(null!==(o=t)&&void 0!==o&&o.startsWith(he)||null===t||(r=i,i=n,n=t,t=null),t&&(null===(s=i["m.relates_to"])||void 0===s||!s.rel_type)){var a,c;const n=!(null===(a=i["m.relates_to"])||void 0===a||!a["m.in_reply_to"]);i["m.relates_to"]=re(re({},i["m.relates_to"]),{},{rel_type:W.THREAD_RELATION_TYPE.name,event_id:t,is_falling_back:!n});const r=null===(c=this.getRoom(e))||void 0===c?void 0:c.getThread(t);var l,u;r&&!n&&(i["m.relates_to"]["m.in_reply_to"]={event_id:null!==(l=null===(u=r.lastReply((e=>e.isRelation(W.THREAD_RELATION_TYPE.name)&&!e.status)))||void 0===u?void 0:u.getId())&&void 0!==l?l:t})}return this.sendCompleteEvent(e,t,{type:n,content:i},r)}sendCompleteEvent(e,t,n,i){i||(i=this.makeTxnId());const r=new c.MatrixEvent(Object.assign(n,{event_id:"~"+e+":"+i,user_id:this.credentials.userId,sender:this.credentials.userId,room_id:e,origin_server_ts:(new Date).getTime()})),o=this.getRoom(e),s=t?null==o?void 0:o.getThread(t):void 0;s&&r.setThread(s),this.reEmitter.reEmit(r,[c.MatrixEventEvent.Replaced,c.MatrixEventEvent.VisibilityChange]),null==o||o.reEmitter.reEmit(r,[c.MatrixEventEvent.BeforeRedaction]);const a=r.getAssociatedId();if(null!=a&&a.startsWith("~")){const e=null==o?void 0:o.getPendingEvents().find((e=>e.getId()===a));null==e||e.once(c.MatrixEventEvent.LocalEventIdReplaced,(()=>{r.updateAssociatedId(e.getId())}))}const l=r.getType();return E.logger.log(`sendEvent of type ${l} in ${e} with txnId ${i}`),r.setTxnId(i),r.setStatus(c.EventStatus.SENDING),null==o||o.addPendingEvent(r,i),r.status===c.EventStatus.NOT_SENT?Promise.reject(new Error("Event blocked by other events not yet sent")):this.encryptAndSendEvent(o,r)}encryptAndSendEvent(e,t){let n=!1;return Promise.resolve().then((()=>{const i=this.encryptEventIfNeeded(t,null!=e?e:void 0);return i?(this.pendingEventEncryption.set(t.getId(),i),this.updatePendingEventStatus(e,t,c.EventStatus.ENCRYPTING),i.then((()=>{this.pendingEventEncryption.has(t.getId())?this.updatePendingEventStatus(e,t,c.EventStatus.SENDING):n=!0}))):null})).then((()=>{if(n)return{};let i=null;return this.scheduler&&(i=this.scheduler.queueEvent(t),i&&this.scheduler.getQueueForEvent(t).length>1&&this.updatePendingEventStatus(e,t,c.EventStatus.QUEUED)),i||(i=this.sendEventHttpRequest(t),e&&(i=i.then((n=>(e.updatePendingEvent(t,c.EventStatus.SENT,n.event_id),n))))),i})).catch((n=>{E.logger.error("Error sending event",n.stack||n);try{t.error=n,this.updatePendingEventStatus(e,t,c.EventStatus.NOT_SENT)}catch(e){E.logger.error("Exception in error handler!",e.stack||n)}throw n instanceof w.MatrixError&&(n.event=t),n}))}encryptEventIfNeeded(e,t){if(e.isEncrypted())return null;if(e.isRedaction())return null;if(!this.isRoomEncrypted(e.getRoomId()))return null;if(!this.crypto&&this.usingExternalCrypto)return null;if(e.getType()===L.EventType.Reaction)return null;if(!this.crypto)throw new Error("This room is configured to use encryption, but your client does not support encryption.");return this.crypto.encryptEvent(e,t)}getEncryptedIfNeededEventType(e,t){return t===L.EventType.Reaction?t:this.isRoomEncrypted(e)?L.EventType.RoomMessageEncrypted:t}updatePendingEventStatus(e,t,n){e?e.updatePendingEvent(t,n):t.setStatus(n)}sendEventHttpRequest(e){let t=e.getTxnId();t||(t=this.makeTxnId(),e.setTxnId(t));const n={$roomId:e.getRoomId(),$eventType:e.getWireType(),$stateKey:e.getStateKey(),$txnId:t};let i;if(e.isState()){let t="/rooms/$roomId/state/$eventType";e.getStateKey()&&e.getStateKey().length>0&&(t="/rooms/$roomId/state/$eventType/$stateKey"),i=p.encodeUri(t,n)}else if(e.isRedaction()){const t="/rooms/$roomId/redact/$redactsEventId/$txnId";i=p.encodeUri(t,re({$redactsEventId:e.event.redacts},n))}else i=p.encodeUri("/rooms/$roomId/send/$eventType/$txnId",n);return this.http.authedRequest(w.Method.Put,i,void 0,e.getWireContent()).then((t=>(E.logger.log(`Event sent to ${e.getRoomId()} with event id ${t.event_id}`),t)))}redactEvent(e,t,n,i,r){var o,s;null!==(o=n)&&void 0!==o&&o.startsWith(he)||(r=i,i=n,n=t,t=null);const a=null===(s=r)||void 0===s?void 0:s.reason;return this.sendCompleteEvent(e,t,{type:L.EventType.RoomRedaction,content:{reason:a},redacts:n},i)}sendMessage(e,t,n,i){"string"!=typeof t&&null!==t&&(i=n,n=t,t=null);let r=L.EventType.RoomMessage,o=n;const a=(e={},t=!0)=>{let n;if(e.msgtype===L.MsgType.Text?n=s.MessageEvent.from(e.body,e.formatted_body).serialize():e.msgtype===L.MsgType.Emote?n=s.EmoteEvent.from(e.body,e.formatted_body).serialize():e.msgtype===L.MsgType.Notice&&(n=s.NoticeEvent.from(e.body,e.formatted_body).serialize()),n&&e["m.new_content"]&&t){const t=a(e["m.new_content"],!1);t&&(n.content["m.new_content"]=t.content)}if(n)for(const[t,i]of Object.entries(e))n.content.hasOwnProperty(t)||(n.content[t]=i);return n},c=a(o);return c&&(r=c.type,o=c.content),this.sendEvent(e,t,r,o,i)}sendTextMessage(e,t,n,i){var r;null!==(r=t)&&void 0!==r&&r.startsWith(he)||null===t||(i=n,n=t,t=null);const o=O.makeTextMessage(n);return this.sendMessage(e,t,o,i)}sendNotice(e,t,n,i){var r;null!==(r=t)&&void 0!==r&&r.startsWith(he)||null===t||(i=n,n=t,t=null);const o=O.makeNotice(n);return this.sendMessage(e,t,o,i)}sendEmoteMessage(e,t,n,i){var r;null!==(r=t)&&void 0!==r&&r.startsWith(he)||null===t||(i=n,n=t,t=null);const o=O.makeEmoteMessage(n);return this.sendMessage(e,t,o,i)}sendImageMessage(e,t,n,i,r="Image"){var o;null!==(o=t)&&void 0!==o&&o.startsWith(he)||null===t||(r=i||"Image",i=n,n=t,t=null);const s={msgtype:L.MsgType.Image,url:n,info:i,body:r};return this.sendMessage(e,t,s)}sendStickerMessage(e,t,n,i,r="Sticker"){var o;null!==(o=t)&&void 0!==o&&o.startsWith(he)||null===t||(r=i||"Sticker",i=n,n=t,t=null);const s={url:n,info:i,body:r};return this.sendEvent(e,t,L.EventType.Sticker,s)}sendHtmlMessage(e,t,n,i){var r;null!==(r=t)&&void 0!==r&&r.startsWith(he)||null===t||(i=n,n=t,t=null);const o=O.makeHtmlMessage(n,i);return this.sendMessage(e,t,o)}sendHtmlNotice(e,t,n,i){var r;null!==(r=t)&&void 0!==r&&r.startsWith(he)||null===t||(i=n,n=t,t=null);const o=O.makeHtmlNotice(n,i);return this.sendMessage(e,t,o)}sendHtmlEmote(e,t,n,i){var r;null!==(r=t)&&void 0!==r&&r.startsWith(he)||null===t||(i=n,n=t,t=null);const o=O.makeHtmlEmote(n,i);return this.sendMessage(e,t,o)}async sendReceipt(e,t,n,i=!1){if(this.isGuest())return Promise.resolve({});const r=p.encodeUri("/rooms/$roomId/receipt/$receiptType/$eventId",{$roomId:e.getRoomId(),$receiptType:t,$eventId:e.getId()});if(this.canSupport.get(Z.Feature.ThreadUnreadNotifications)!==Z.ServerSupport.Unsupported&&!i){const t=!!e.threadRootId;n=re(re({},n),{},{thread_id:t?e.threadRootId:V.MAIN_ROOM_TIMELINE})}const o=this.http.authedRequest(w.Method.Post,r,void 0,n||{}),s=this.getRoom(e.getRoomId());return s&&this.credentials.userId&&s.addLocalEchoReceipt(this.credentials.userId,e,t),o}async sendReadReceipt(e,t=V.ReceiptType.Read,n=!1){if(!e)return;const i=e.getId(),r=this.getRoom(e.getRoomId());if(null!=r&&r.hasPendingEvent(i))throw new Error(`Cannot set read receipt to a pending event (${i})`);return this.sendReceipt(e,t,{},n)}async setRoomReadMarkers(e,t,n,i){const r=this.getRoom(e);if(r&&r.hasPendingEvent(t))throw new Error(`Cannot set read marker to a pending event (${t})`);let o,s;if(n){if(o=n.getId(),null!=r&&r.hasPendingEvent(o))throw new Error(`Cannot set read receipt to a pending event (${o})`);null==r||r.addLocalEchoReceipt(this.credentials.userId,n,V.ReceiptType.Read)}if(i){if(s=i.getId(),null!=r&&r.hasPendingEvent(s))throw new Error(`Cannot set read receipt to a pending event (${s})`);null==r||r.addLocalEchoReceipt(this.credentials.userId,i,V.ReceiptType.ReadPrivate)}return await this.setRoomReadMarkersHttpRequest(e,t,o,s)}getUrlPreview(e,t){t=6e4*Math.floor(t/6e4);const n=new URL(e);n.hash="";const i=t+"_"+(e=n.toString()),r=this.urlPreviewCache[i];if(r)return r;const o=this.http.authedRequest(w.Method.Get,"/preview_url",{url:e,ts:t.toString()},void 0,{prefix:w.MediaPrefix.R0});return this.urlPreviewCache[i]=o,o}sendTyping(e,t,n){if(this.isGuest())return Promise.resolve({});const i=p.encodeUri("/rooms/$roomId/typing/$userId",{$roomId:e,$userId:this.getUserId()}),r={typing:t};return t&&(r.timeout=n||2e4),this.http.authedRequest(w.Method.Put,i,void 0,r)}getRoomUpgradeHistory(e,t=!1){let n=this.getRoom(e);if(!n)return[];const i=[n];let r=n.currentState.getStateEvents(L.EventType.RoomCreate,"");for(;r;){const e=r.getContent().predecessor;if(!e||!e.room_id)break;{const n=this.getRoom(e.room_id);if(!n)break;if(t){const e=n.currentState.getStateEvents(L.EventType.RoomTombstone,"");if(!e||e.getContent().replacement_room!==n.roomId)break}i.splice(0,0,n),r=n.currentState.getStateEvents(L.EventType.RoomCreate,"")}}let o=n.currentState.getStateEvents(L.EventType.RoomTombstone,"");for(;o;){const e=this.getRoom(o.getContent().replacement_room);if(!e)break;if(e.roomId===n.roomId)break;if(t){if(r=e.currentState.getStateEvents(L.EventType.RoomCreate,""),!r||!r.getContent().predecessor)break;if(r.getContent().predecessor.room_id!==n.roomId)break}if(i.push(e),new Set(i.map((e=>e.roomId))).size<i.length)return i.slice(0,i.length-1);n=e,o=n.currentState.getStateEvents(L.EventType.RoomTombstone,"")}return i}invite(e,t,n){return this.membershipChange(e,t,"invite",n)}inviteByEmail(e,t){return this.inviteByThreePid(e,"email",t)}async inviteByThreePid(e,t,n){var i;const r=p.encodeUri("/rooms/$roomId/invite",{$roomId:e}),o=this.getIdentityServerUrl(!0);if(!o)return Promise.reject(new w.MatrixError({error:"No supplied identity server URL",errcode:"ORG.MATRIX.JSSDK_MISSING_PARAM"}));const s={id_server:o,medium:t,address:n};if(null!==(i=this.identityServer)&&void 0!==i&&i.getAccessToken&&await this.doesServerAcceptIdentityAccessToken()){const e=await this.identityServer.getAccessToken();e&&(s.id_access_token=e)}return this.http.authedRequest(w.Method.Post,r,void 0,s)}leave(e){return this.membershipChange(e,void 0,"leave")}leaveRoomChain(e,t=!0){const n=this.getRoomUpgradeHistory(e);let i=n;if(!t){i=[];for(const t of n)if(i.push(t),t.roomId===e)break}const r={},o=[],s=e=>this.leave(e).then((()=>{delete r[e]})).catch((t=>{r[e]=t}));for(const e of i)o.push(s(e.roomId));return Promise.all(o).then((()=>r))}ban(e,t,n){return this.membershipChange(e,t,"ban",n)}forget(e,t=!0){const n=this.membershipChange(e,void 0,"forget");return t?n.then((t=>(this.store.removeRoom(e),this.emit(pe.DeleteRoom,e),t))):n}unban(e,t){const n=p.encodeUri("/rooms/$roomId/unban",{$roomId:e}),i={user_id:t};return this.http.authedRequest(w.Method.Post,n,void 0,i)}kick(e,t,n){const i=p.encodeUri("/rooms/$roomId/kick",{$roomId:e}),r={user_id:t,reason:n};return this.http.authedRequest(w.Method.Post,i,void 0,r)}membershipChange(e,t,n,i){const r=p.encodeUri("/rooms/$room_id/$membership",{$room_id:e,$membership:n});return this.http.authedRequest(w.Method.Post,r,void 0,{user_id:t,reason:i})}getPushActionsForEvent(e,t=!1){return e.getPushActions()&&!t||e.setPushActions(this.pushProcessor.actionsForEvent(e)),e.getPushActions()}setProfileInfo(e,t){const n=p.encodeUri("/profile/$userId/$info",{$userId:this.credentials.userId,$info:e});return this.http.authedRequest(w.Method.Put,n,void 0,t)}async setDisplayName(e){const t=await this.setProfileInfo("displayname",{displayname:e}),n=this.getUser(this.getUserId());return n&&(n.displayName=e,n.emit(C.UserEvent.DisplayName,n.events.presence,n)),t}async setAvatarUrl(e){const t=await this.setProfileInfo("avatar_url",{avatar_url:e}),n=this.getUser(this.getUserId());return n&&(n.avatarUrl=e,n.emit(C.UserEvent.AvatarUrl,n.events.presence,n)),t}mxcUrlToHttp(e,t,n,i,r){return(0,I.getHttpUriForMxc)(this.baseUrl,e,t,n,i,r)}async setPresence(e){const t=p.encodeUri("/presence/$userId/status",{$userId:this.credentials.userId});if(-1===["offline","online","unavailable"].indexOf(e.presence))throw new Error("Bad presence value: "+e.presence);await this.http.authedRequest(w.Method.Put,t,void 0,e)}getPresence(e){const t=p.encodeUri("/presence/$userId/status",{$userId:e});return this.http.authedRequest(w.Method.Get,t)}scrollback(e,t=30){let n=0,i=this.ongoingScrollbacks[e.roomId]||{};if(i.promise)return i.promise;if(i.errorTs){const e=Date.now()-i.errorTs;n=Math.max(3e3-e,0)}if(null===e.oldState.paginationToken)return Promise.resolve(e);const r=this.store.scrollback(e,t).length;if(r===t)return Promise.resolve(e);t-=r;const o=new Promise(((i,r)=>{(0,p.sleep)(n).then((()=>this.createMessagesRequest(e.roomId,e.oldState.paginationToken,t,f.Direction.Backward))).then((t=>{const n=t.chunk.map(this.getEventMapper());if(t.state){const n=t.state.map(this.getEventMapper());e.currentState.setUnknownStateEvents(n)}const[r,o]=e.partitionThreadedEvents(n);this.processBeaconEvents(e,r),e.addEventsToTimeline(r,!0,e.getLiveTimeline()),this.processThreadEvents(e,o,!0),e.oldState.paginationToken=t.end,0===t.chunk.length&&(e.oldState.paginationToken=null),this.store.storeEvents(e,n,t.end,!0),delete this.ongoingScrollbacks[e.roomId],i(e)})).catch((t=>{this.ongoingScrollbacks[e.roomId]={errorTs:Date.now()},r(t)}))}));return i={promise:o},this.ongoingScrollbacks[e.roomId]=i,o}getEventMapper(e){return(0,N.eventMapperFor)(this,e||{})}async getEventTimeline(e,t){var n,i,r,o;if(!this.timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating MatrixClient to enable it.");if(null==e||!e.room)throw new Error("getEventTimeline only supports room timelines");if(e.getTimelineForEvent(t))return e.getTimelineForEvent(t);if(e.thread&&this.supportsExperimentalThreads())return this.getThreadTimeline(e,t);const s=p.encodeUri("/rooms/$roomId/context/$eventId",{$roomId:e.room.roomId,$eventId:t});let a;null!==(n=this.clientOpts)&&void 0!==n&&n.lazyLoadMembers&&(a={filter:JSON.stringify(d.Filter.LAZY_LOADING_MESSAGES_FILTER)});const c=await this.http.authedRequest(w.Method.Get,s,a);if(!c.event)throw new Error("'event' not in '/context' result - homeserver too old?");if(e.getTimelineForEvent(t))return e.getTimelineForEvent(t);const l=this.getEventMapper(),u=l(c.event);if(u.isRelation(W.THREAD_RELATION_TYPE.name))return void E.logger.warn("Tried loading a regular timeline at the position of a thread event");const h=[...c.events_after.reverse().map(l),u,...c.events_before.map(l)];let m=e.getTimelineForEvent(h[0].getId());m?m.getState(f.EventTimeline.BACKWARDS).setUnknownStateEvents(c.state.map(l)):(m=e.addTimeline(),m.initialiseState(c.state.map(l)),m.getState(f.EventTimeline.FORWARDS).paginationToken=c.end);const[g,v]=e.room.partitionThreadedEvents(h);return e.addEventsToTimeline(g,!0,m,c.start),this.processThreadEvents(e.room,v,!0),this.processBeaconEvents(e.room,g),null!==(i=null!==(r=e.getTimelineForEvent(t))&&void 0!==r?r:null===(o=e.room.findThreadForEvent(u))||void 0===o?void 0:o.liveTimeline)&&void 0!==i?i:m}async getThreadTimeline(e,t){var n;if(!this.supportsExperimentalThreads())throw new Error("could not get thread timeline: no client support");if(!e.room)throw new Error("could not get thread timeline: not a room timeline");if(!e.thread)throw new Error("could not get thread timeline: not a thread timeline");const i=p.encodeUri("/rooms/$roomId/context/$eventId",{$roomId:e.room.roomId,$eventId:t}),r={limit:"0"};null!==(n=this.clientOpts)&&void 0!==n&&n.lazyLoadMembers&&(r.filter=JSON.stringify(d.Filter.LAZY_LOADING_MESSAGES_FILTER));const o=await this.http.authedRequest(w.Method.Get,i,r),s=this.getEventMapper(),a=s(o.event);if(e.canContain(a)&&W.Thread.hasServerSideSupport){if(W.Thread.hasServerSideFwdPaginationSupport){var c,l,u;if(!e.thread)throw new Error("could not get thread timeline: not a thread timeline");const n=e.thread,i=await this.fetchRelations(e.room.roomId,n.id,W.THREAD_RELATION_TYPE.name,null,{dir:f.Direction.Backward,from:o.start}),r=await this.fetchRelations(e.room.roomId,n.id,W.THREAD_RELATION_TYPE.name,null,{dir:f.Direction.Forward,from:o.end}),d=[...r.chunk.reverse().map(s),a,...i.chunk.map(s)];for(const t of d){var h;await(null===(h=e.thread)||void 0===h?void 0:h.processEvent(t))}let p=e.getTimelineForEvent(a.getId());return p?p.getState(f.EventTimeline.BACKWARDS).setUnknownStateEvents(o.state.map(s)):(p=e.addTimeline(),p.initialiseState(o.state.map(s))),e.addEventsToTimeline(d,!0,p,r.next_batch),i.next_batch||e.addEventsToTimeline([s(i.original_event)],!0,p,null),p.setPaginationToken(null!==(c=i.next_batch)&&void 0!==c?c:null,f.Direction.Backward),p.setPaginationToken(null!==(l=r.next_batch)&&void 0!==l?l:null,f.Direction.Forward),this.processBeaconEvents(e.room,d),null!==(u=e.getTimelineForEvent(t))&&void 0!==u?u:p}{var m;const t=e.thread,n=await this.fetchRelations(e.room.roomId,t.id,W.THREAD_RELATION_TYPE.name,null,{dir:f.Direction.Backward,from:o.start}),i=[];let r=o.end;for(;r;){var g;const n=await this.fetchRelations(e.room.roomId,t.id,W.THREAD_RELATION_TYPE.name,null,{dir:f.Direction.Forward,from:r});r=null!==(g=n.next_batch)&&void 0!==g?g:null,i.push(...n.chunk)}const c=[...i.reverse().map(s),a,...n.chunk.map(s)];for(const t of c){var v;await(null===(v=e.thread)||void 0===v?void 0:v.processEvent(t))}const l=e.getLiveTimeline();return l.getState(f.EventTimeline.BACKWARDS).setUnknownStateEvents(o.state.map(s)),e.addEventsToTimeline(c,!0,l,null),n.next_batch||e.addEventsToTimeline([s(n.original_event)],!0,l,null),l.setPaginationToken(null!==(m=n.next_batch)&&void 0!==m?m:null,f.Direction.Backward),l.setPaginationToken(null,f.Direction.Forward),this.processBeaconEvents(e.room,c),l}}}async getLatestTimeline(e){if(!this.timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating MatrixClient to enable it.");if(!e.room)throw new Error("getLatestTimeline only supports room timelines");let t;var n;if(null!==e.threadListType)t=null===(n=(await this.createThreadListMessagesRequest(e.room.roomId,null,1,f.Direction.Backward,e.threadListType,e.getFilter())).chunk)||void 0===n?void 0:n[0];else if(e.thread&&W.Thread.hasServerSideSupport){var i;t=null===(i=(await this.fetchRelations(e.room.roomId,e.thread.id,W.THREAD_RELATION_TYPE.name,null,{dir:f.Direction.Backward,limit:1})).chunk)||void 0===i?void 0:i[0]}else{var r,o;const n=p.encodeUri("/rooms/$roomId/messages",{$roomId:e.room.roomId}),i={dir:"b"};null!==(r=this.clientOpts)&&void 0!==r&&r.lazyLoadMembers&&(i.filter=JSON.stringify(d.Filter.LAZY_LOADING_MESSAGES_FILTER)),t=null===(o=(await this.http.authedRequest(w.Method.Get,n,i)).chunk)||void 0===o?void 0:o[0]}if(!t)throw new Error("No message returned when trying to construct getLatestTimeline");return this.getEventTimeline(e,t.event_id)}createMessagesRequest(e,t,n=30,i,r){var o;const s=p.encodeUri("/rooms/$roomId/messages",{$roomId:e}),a={limit:n.toString(),dir:i};t&&(a.from=t);let c=null;var l;return null!==(o=this.clientOpts)&&void 0!==o&&o.lazyLoadMembers&&(c=Object.assign({},d.Filter.LAZY_LOADING_MESSAGES_FILTER)),r&&(c=c||{},Object.assign(c,null===(l=r.getRoomTimelineFilterComponent())||void 0===l?void 0:l.toJSON())),c&&(a.filter=JSON.stringify(c)),this.http.authedRequest(w.Method.Get,s,a)}createThreadListMessagesRequest(e,t,n=30,i=f.Direction.Backward,r=W.ThreadFilterType.All,o){var s;const a=p.encodeUri("/rooms/$roomId/threads",{$roomId:e}),c={limit:n.toString(),dir:i,include:(0,W.threadFilterTypeToFilter)(r)};t&&(c.from=t);let l={};var u;null!==(s=this.clientOpts)&&void 0!==s&&s.lazyLoadMembers&&(l=re({},d.Filter.LAZY_LOADING_MESSAGES_FILTER)),o&&(l=re(re({},l),null===(u=o.getRoomTimelineFilterComponent())||void 0===u?void 0:u.toJSON())),Object.keys(l).length&&(c.filter=JSON.stringify(l));const h={prefix:W.Thread.hasServerSideListSupport===W.FeatureSupport.Stable?"/_matrix/client/v1":"/_matrix/client/unstable/org.matrix.msc3856"};return this.http.authedRequest(w.Method.Get,a,c,void 0,h).then((e=>{var t;return re(re({},e),{},{chunk:null===(t=e.chunk)||void 0===t?void 0:t.reverse(),start:e.prev_batch,end:e.next_batch})}))}paginateEventTimeline(e,t){const n=e.getTimelineSet()===this.notifTimelineSet,i=this.getRoom(e.getRoomId()),r=e.getTimelineSet().threadListType,o=e.getTimelineSet().thread,s=(t=t||{}).backwards||!1;if(n&&!s)throw new Error("paginateNotifTimeline can only paginate backwards");const a=s?f.EventTimeline.BACKWARDS:f.EventTimeline.FORWARDS,c=e.getPaginationToken(a),l=e.paginationRequests[a];if(l)return l;let u,d,h;var p;if(n)u="/notifications",d={limit:(null!==(p=t.limit)&&void 0!==p?p:30).toString(),only:"highlight"},c&&"end"!==c&&(d.from=c),h=this.http.authedRequest(w.Method.Get,"/notifications",d).then((async t=>{const n=t.next_token,i=[];for(let e=0;e<t.notifications.length;e++){const n=t.notifications[e],r=this.getEventMapper()(n.event);r.setPushActions(m.PushProcessor.actionListToActionsObject(n.actions)),r.event.room_id=n.room_id,i[e]=r}const r=e.getTimelineSet();return r.addEventsToTimeline(i,s,e,n),this.processBeaconEvents(r.room,i),s&&!t.next_token&&e.setPaginationToken(null,a),Boolean(t.next_token)})).finally((()=>{e.paginationRequests[a]=null})),e.paginationRequests[a]=h;else if(null!==r){if(!i)throw new Error("Unknown room "+e.getRoomId());if(!W.Thread.hasServerSideFwdPaginationSupport&&a===f.Direction.Forward)throw new Error("Cannot paginate threads forwards without server-side support for MSC 3715");h=this.createThreadListMessagesRequest(e.getRoomId(),c,t.limit,a,r,e.getFilter()).then((t=>{if(t.state){const n=e.getState(a),i=t.state.map(this.getEventMapper());n.setUnknownStateEvents(i)}const n=t.end,r=t.chunk.map(this.getEventMapper());return e.getTimelineSet().addEventsToTimeline(r,s,e,n),this.processBeaconEvents(i,r),this.processThreadRoots(i,r,s),s&&t.end==t.start&&e.setPaginationToken(null,a),t.end!==t.start})).finally((()=>{e.paginationRequests[a]=null})),e.paginationRequests[a]=h}else if(o){var g,v;const n=this.getRoom(null!==(g=e.getRoomId())&&void 0!==g?g:void 0);if(!n)throw new Error("Unknown room "+e.getRoomId());h=this.fetchRelations(null!==(v=e.getRoomId())&&void 0!==v?v:"",o.id,W.THREAD_RELATION_TYPE.name,null,{dir:a,limit:t.limit,from:null!=c?c:void 0}).then((async t=>{const i=this.getEventMapper(),r=t.chunk.map(i);for(const e of r.slice().reverse()){await(null==o?void 0:o.processEvent(e));const t=e.getSender();s&&null!==(null==o?void 0:o.getEventReadUpTo(t))||n.addLocalEchoReceipt(t,e,V.ReceiptType.Read)}const c=t.next_batch,l=e.getTimelineSet();return l.addEventsToTimeline(r,s,e,null!=c?c:null),!c&&s&&l.addEventsToTimeline([i(t.original_event)],!0,e,null),this.processBeaconEvents(l.room,r),s&&!c&&e.setPaginationToken(null,a),Boolean(c)})).finally((()=>{e.paginationRequests[a]=null})),e.paginationRequests[a]=h}else{if(!i)throw new Error("Unknown room "+e.getRoomId());h=this.createMessagesRequest(e.getRoomId(),c,t.limit,a,e.getFilter()).then((t=>{if(t.state){const n=e.getState(a),i=t.state.map(this.getEventMapper());n.setUnknownStateEvents(i)}const n=t.end,r=t.chunk.map(this.getEventMapper()),o=e.getTimelineSet(),[c]=i.partitionThreadedEvents(r);o.addEventsToTimeline(c,s,e,n),this.processBeaconEvents(i,c),this.processThreadRoots(i,c.filter((e=>e.isRelation(W.THREAD_RELATION_TYPE.name))),!1);const l=void 0===t.end||t.end===t.start;return s&&l&&e.setPaginationToken(null,a),!l})).finally((()=>{e.paginationRequests[a]=null})),e.paginationRequests[a]=h}return h}resetNotifTimelineSet(){this.notifTimelineSet&&this.notifTimelineSet.resetLiveTimeline("end")}peekInRoom(e){var t;return null===(t=this.peekSync)||void 0===t||t.stopPeeking(),this.peekSync=new a.SyncApi(this,this.clientOpts),this.peekSync.peek(e)}stopPeeking(){this.peekSync&&(this.peekSync.stopPeeking(),this.peekSync=null)}setGuestAccess(e,t){const n=this.sendStateEvent(e,L.EventType.RoomGuestAccess,{guest_access:t.allowJoin?"can_join":"forbidden"},"");let i=Promise.resolve(void 0);return t.allowRead&&(i=this.sendStateEvent(e,L.EventType.RoomHistoryVisibility,{history_visibility:"world_readable"},"")),Promise.all([i,n]).then()}requestRegisterEmailToken(e,t,n,i){return this.requestTokenFromEndpoint("/register/email/requestToken",{email:e,client_secret:t,send_attempt:n,next_link:i})}requestRegisterMsisdnToken(e,t,n,i,r){return this.requestTokenFromEndpoint("/register/msisdn/requestToken",{country:e,phone_number:t,client_secret:n,send_attempt:i,next_link:r})}requestAdd3pidEmailToken(e,t,n,i){return this.requestTokenFromEndpoint("/account/3pid/email/requestToken",{email:e,client_secret:t,send_attempt:n,next_link:i})}requestAdd3pidMsisdnToken(e,t,n,i,r){return this.requestTokenFromEndpoint("/account/3pid/msisdn/requestToken",{country:e,phone_number:t,client_secret:n,send_attempt:i,next_link:r})}requestPasswordEmailToken(e,t,n,i){return this.requestTokenFromEndpoint("/account/password/email/requestToken",{email:e,client_secret:t,send_attempt:n,next_link:i})}requestPasswordMsisdnToken(e,t,n,i,r){return this.requestTokenFromEndpoint("/account/password/msisdn/requestToken",{country:e,phone_number:t,client_secret:n,send_attempt:i,next_link:r})}async requestTokenFromEndpoint(e,t){const n=Object.assign({},t);if(!await this.doesServerSupportSeparateAddAndBind()&&this.idBaseUrl){var i;const e=new URL(this.idBaseUrl);if(n.id_server=e.host,null!==(i=this.identityServer)&&void 0!==i&&i.getAccessToken&&await this.doesServerAcceptIdentityAccessToken()){const e=await this.identityServer.getAccessToken();e&&(n.id_access_token=e)}}return this.http.request(w.Method.Post,e,void 0,n)}getRoomPushRule(e,t){var n,i;if(this.pushRules)return null===(n=this.pushRules[e])||void 0===n||null===(i=n.room)||void 0===i?void 0:i.find((e=>e.rule_id===t));throw new Error("SyncApi.sync() must be done before accessing to push rules.")}setRoomMutePushRule(e,t,n){let i,r=!1;const o=this.getRoomPushRule(e,t);if(null!=o&&o.actions.includes(F.PushRuleActionName.DontNotify)&&(r=!0),n)if(o){if(!r){const n=p.defer();this.deletePushRule(e,F.PushRuleKind.RoomSpecific,o.rule_id).then((()=>{this.addPushRule(e,F.PushRuleKind.RoomSpecific,t,{actions:[F.PushRuleActionName.DontNotify]}).then((()=>{n.resolve()})).catch((e=>{n.reject(e)}))})).catch((e=>{n.reject(e)})),i=n.promise}}else i=this.addPushRule(e,F.PushRuleKind.RoomSpecific,t,{actions:[F.PushRuleActionName.DontNotify]});else r&&(i=this.deletePushRule(e,F.PushRuleKind.RoomSpecific,o.rule_id));if(i)return new Promise(((e,t)=>{i.then((()=>{this.getPushRules().then((t=>{this.pushRules=t,e()})).catch((e=>{t(e)}))})).catch((e=>{this.getPushRules().then((n=>{this.pushRules=n,t(e)})).catch((n=>{t(e)}))}))}))}searchMessageText(e){const t={search_term:e.query};return"keys"in e&&(t.keys=e.keys),this.search({body:{search_categories:{room_events:t}}})}searchRoomEvents(e){const t={search_categories:{room_events:{search_term:e.term,filter:e.filter,order_by:B.SearchOrderBy.Recent,event_context:{before_limit:1,after_limit:1,include_profile:!0}}}},n={_query:t,results:[],highlights:[]};return this.search({body:t}).then((e=>this.processRoomEventsSearch(n,e)))}backPaginateRoomEventsSearch(e){if(!e.next_batch)return Promise.reject(new Error("Cannot backpaginate event search any further"));if(e.pendingRequest)return e.pendingRequest;const t={body:e._query,next_batch:e.next_batch},n=this.search(t,e.abortSignal).then((t=>this.processRoomEventsSearch(e,t))).finally((()=>{e.pendingRequest=void 0}));return e.pendingRequest=n,n}processRoomEventsSearch(e,t){var n,i;const r=t.search_categories.room_events;e.count=r.count,e.next_batch=r.next_batch;const o=new Set(r.highlights);e.highlights.forEach((e=>{o.add(e)})),e.highlights=Array.from(o);const s=this.getEventMapper(),a=null!==(n=null===(i=r.results)||void 0===i?void 0:i.length)&&void 0!==n?n:0;for(let t=0;t<a;t++){const n=k.SearchResult.fromJson(r.results[t],s),i=this.getRoom(n.context.getEvent().getRoomId());if(i)for(const e of n.context.getTimeline()){const t=i.getMember(e.getSender());!e.sender&&t&&(e.sender=t)}e.results.push(n)}return e}syncLeftRooms(){if(this.syncedLeftRooms)return Promise.resolve([]);if(this.syncLeftRoomsPromise)return this.syncLeftRoomsPromise;const e=new a.SyncApi(this,this.clientOpts);return this.syncLeftRoomsPromise=e.syncLeftRooms(),this.syncLeftRoomsPromise.then((()=>{E.logger.log("Marking success of sync left room request"),this.syncedLeftRooms=!0})).finally((()=>{this.syncLeftRoomsPromise=void 0})),this.syncLeftRoomsPromise}createFilter(e){const t=p.encodeUri("/user/$userId/filter",{$userId:this.credentials.userId});return this.http.authedRequest(w.Method.Post,t,void 0,e).then((t=>{const n=d.Filter.fromJson(this.credentials.userId,t.filter_id,e);return this.store.storeFilter(n),n}))}getFilter(e,t,n){if(n){const n=this.store.getFilter(e,t);if(n)return Promise.resolve(n)}const i=p.encodeUri("/user/$userId/filter/$filterId",{$userId:e,$filterId:t});return this.http.authedRequest(w.Method.Get,i).then((n=>{const i=d.Filter.fromJson(e,t,n);return this.store.storeFilter(i),i}))}async getOrCreateFilter(e,t){const n=this.store.getFilterIdByName(e);let i;if(n){try{const e=await this.getFilter(this.credentials.userId,n,!0);if(e){const r=e.getDefinition(),o=t.getDefinition();p.deepCompare(r,o)&&(i=n)}}catch(e){if("M_UNKNOWN"!==e.errcode&&"M_NOT_FOUND"!==e.errcode)throw e}i||this.store.setFilterIdByName(e,void 0)}if(i)return i;const r=await this.createFilter(t.getDefinition());return this.store.setFilterIdByName(e,r.filterId),r.filterId}getOpenIdToken(){const e=p.encodeUri("/user/$userId/openid/request_token",{$userId:this.credentials.userId});return this.http.authedRequest(w.Method.Post,e,void 0,{})}turnServer(){return this.http.authedRequest(w.Method.Get,"/voip/turnServer")}getTurnServers(){return this.turnServers||[]}getTurnServersExpiry(){return this.turnServersExpiry}get pollingTurnServers(){return void 0!==this.checkTurnServersIntervalID}async checkTurnServers(){if(!this.canSupportVoip)return;let e=!1;const t=this.turnServersExpiry-Date.now();if(t>se)E.logger.debug("TURN creds are valid for another "+t+" ms: not fetching new ones."),e=!0;else{E.logger.debug("Fetching new TURN credentials");try{const t=await this.turnServer();if(t.uris){E.logger.log("Got TURN URIs: "+t.uris+" refresh in "+t.ttl+" secs");const n={urls:t.uris,username:t.username,credential:t.password};this.turnServers=[n],this.turnServersExpiry=Date.now()+1e3*t.ttl,e=!0,this.emit(pe.TurnServers,this.turnServers)}}catch(e){E.logger.error("Failed to get TURN URIs",e),403===e.httpStatus?(E.logger.info("TURN access unavailable for this account: stopping credentials checks"),null!==this.checkTurnServersIntervalID&&n.g.clearInterval(this.checkTurnServersIntervalID),this.checkTurnServersIntervalID=void 0,this.emit(pe.TurnServersError,e,!0)):this.emit(pe.TurnServersError,e,!1)}}return e}setFallbackICEServerAllowed(e){this.fallbackICEServerAllowed=e}isFallbackICEServerAllowed(){return this.fallbackICEServerAllowed}isSynapseAdministrator(){const e=p.encodeUri("/_synapse/admin/v1/users/$userId/admin",{$userId:this.getUserId()});return this.http.authedRequest(w.Method.Get,e,void 0,void 0,{prefix:""}).then((e=>e.admin))}whoisSynapseUser(e){const t=p.encodeUri("/_synapse/admin/v1/whois/$userId",{$userId:e});return this.http.authedRequest(w.Method.Get,t,void 0,void 0,{prefix:""})}deactivateSynapseUser(e){const t=p.encodeUri("/_synapse/admin/v1/deactivate/$userId",{$userId:e});return this.http.authedRequest(w.Method.Post,t,void 0,void 0,{prefix:""})}async fetchClientWellKnown(){var e;this.clientWellKnownPromise=g.AutoDiscovery.getRawClientConfig(null!==(e=this.getDomain())&&void 0!==e?e:void 0),this.clientWellKnown=await this.clientWellKnownPromise,this.emit(pe.ClientWellKnown,this.clientWellKnown)}getClientWellKnown(){return this.clientWellKnown}waitForClientWellKnown(){if(!this.clientRunning)throw new Error("Client is not running");return this.clientWellKnownPromise}storeClientOptions(){const e=["boolean","string","number"],t=Object.entries(this.clientOpts).filter((([t,n])=>e.includes(typeof n))).reduce(((e,[t,n])=>(e[t]=n,e)),{});return this.store.storeClientOptions(t)}async _unstable_getSharedRooms(e){const t=await this.doesServerSupportUnstableFeature("uk.half-shot.msc2666"),n=await this.doesServerSupportUnstableFeature("uk.half-shot.msc2666.mutual_rooms");if(!t&&!n)throw Error("Server does not support mutual_rooms API");const i=p.encodeUri(`/uk.half-shot.msc2666/user/${n?"mutual_rooms":"shared_rooms"}/$userId`,{$userId:e});return(await this.http.authedRequest(w.Method.Get,i,void 0,void 0,{prefix:w.ClientPrefix.Unstable})).joined}async getVersions(){if(this.serverVersionsPromise)return this.serverVersionsPromise;this.serverVersionsPromise=this.http.request(w.Method.Get,"/_matrix/client/versions",void 0,void 0,{prefix:""}).catch((e=>{throw this.serverVersionsPromise=void 0,e}));const e=await this.serverVersionsPromise;this.canSupport=await(0,Z.buildFeatureSupportMap)(e);const t=this.canSupport.get(Z.Feature.ThreadUnreadNotifications);return Q.UNREAD_THREAD_NOTIFICATIONS.setPreferUnstable(t===Z.ServerSupport.Unstable),this.serverVersionsPromise}async isVersionSupported(e){const{versions:t}=await this.getVersions();return t&&t.includes(e)}async doesServerSupportLazyLoading(){const e=await this.getVersions();if(!e)return!1;const t=e.versions,n=e.unstable_features;return t&&t.includes("r0.5.0")||n&&n["m.lazy_load_members"]}async doesServerRequireIdServerParam(){const e=await this.getVersions();if(!e)return!0;const t=e.versions;if(t&&t.includes("r0.6.0"))return!1;const n=e.unstable_features;return!n||void 0===n["m.require_identity_server"]||n["m.require_identity_server"]}async doesServerAcceptIdentityAccessToken(){const e=await this.getVersions();if(!e)return!1;const t=e.versions,n=e.unstable_features;return t&&t.includes("r0.6.0")||n&&n["m.id_access_token"]}async doesServerSupportSeparateAddAndBind(){const e=await this.getVersions();if(!e)return!1;const t=e.versions,n=e.unstable_features;return(null==t?void 0:t.includes("r0.6.0"))||(null==n?void 0:n["m.separate_add_and_bind"])}async doesServerSupportUnstableFeature(e){const t=await this.getVersions();if(!t)return!1;const n=t.unstable_features;return n&&!!n[e]}async doesServerForceEncryptionForPreset(e){const t=await this.getVersions();if(!t)return!1;const n=t.unstable_features,i=e.includes("_chat")?e.substring(0,e.indexOf("_chat")):e;return n&&!!n[`io.element.e2ee_forced.${i}`]}async doesServerSupportThread(){if(await this.isVersionSupported("v1.4"))return{threads:W.FeatureSupport.Stable,list:W.FeatureSupport.Stable,fwdPagination:W.FeatureSupport.Stable};try{const[e,t,n,i,r,o]=await Promise.all([this.doesServerSupportUnstableFeature("org.matrix.msc3440"),this.doesServerSupportUnstableFeature("org.matrix.msc3440.stable"),this.doesServerSupportUnstableFeature("org.matrix.msc3856"),this.doesServerSupportUnstableFeature("org.matrix.msc3856.stable"),this.doesServerSupportUnstableFeature("org.matrix.msc3715"),this.doesServerSupportUnstableFeature("org.matrix.msc3715.stable")]);return{threads:(0,W.determineFeatureSupport)(t,e),list:(0,W.determineFeatureSupport)(i,n),fwdPagination:(0,W.determineFeatureSupport)(o,r)}}catch(e){return{threads:W.FeatureSupport.None,list:W.FeatureSupport.None,fwdPagination:W.FeatureSupport.None}}}doesServerSupportLogoutDevices(){return this.isVersionSupported("r0.6.1")}hasLazyLoadMembersEnabled(){var e;return!(null===(e=this.clientOpts)||void 0===e||!e.lazyLoadMembers)}setCanResetTimelineCallback(e){this.canResetTimelineCallback=e}getCanResetTimelineCallback(){return this.canResetTimelineCallback}async relations(e,t,n,i,r={dir:f.Direction.Backward}){var o,s;const a=i?this.getEncryptedIfNeededEventType(e,i):null,c=await this.fetchRelations(e,t,n,a,r),l=this.getEventMapper(),u=c.original_event?l(c.original_event):void 0;let d=c.chunk.map(l);if(a===L.EventType.RoomMessageEncrypted){const e=u?d.concat(u):d;await Promise.all(e.map((e=>this.decryptEventIfNeeded(e)))),null!==i&&(d=d.filter((e=>e.getType()===i)))}return u&&n===L.RelationType.Replace&&(d=d.filter((e=>e.getSender()===u.getSender()))),{originalEvent:null!=u?u:null,events:d,nextBatch:null!==(o=c.next_batch)&&void 0!==o?o:null,prevBatch:null!==(s=c.prev_batch)&&void 0!==s?s:null}}getCrossSigningCacheCallbacks(){var e;return null===(e=this.crypto)||void 0===e?void 0:e.crossSigningInfo.getCacheCallbacks()}generateClientSecret(){return(0,P.randomString)(32)}decryptEventIfNeeded(e,t){return e.shouldAttemptDecryption()&&this.isCryptoEnabled()&&e.attemptDecryption(this.crypto,t),e.isBeingDecrypted()?e.getDecryptionPromise():Promise.resolve()}termsUrlForService(e,t){switch(e){case S.SERVICE_TYPES.IS:return this.http.getUrl("/terms",void 0,w.IdentityPrefix.V2,t);case S.SERVICE_TYPES.IM:return this.http.getUrl("/terms",void 0,"/_matrix/integrations/v1",t);default:throw new Error("Unsupported service type")}}getHomeserverUrl(){return this.baseUrl}getIdentityServerUrl(e=!1){var t,n;return e&&(null!==(t=this.idBaseUrl)&&void 0!==t&&t.startsWith("http://")||null!==(n=this.idBaseUrl)&&void 0!==n&&n.startsWith("https://"))?this.idBaseUrl.split("://")[1]:this.idBaseUrl}setIdentityServerUrl(e){this.idBaseUrl=p.ensureNoTrailingSlash(e),this.http.setIdBaseUrl(this.idBaseUrl)}getAccessToken(){return this.http.opts.accessToken||null}setAccessToken(e){this.http.opts.accessToken=e}isLoggedIn(){return void 0!==this.http.opts.accessToken}makeTxnId(){return"m"+(new Date).getTime()+"."+this.txnCtr++}isUsernameAvailable(e){return this.http.authedRequest(w.Method.Get,"/register/available",{username:e}).then((e=>e.available)).catch((e=>"M_USER_IN_USE"!==e.errcode&&Promise.reject(e)))}register(e,t,n,i,r,o,s){!0===r?r={email:!0}:null!=r&&!1!==r||(r={}),n&&(i.session=n);const a={auth:i,refresh_token:!0};return null!=e&&(a.username=e),null!=t&&(a.password=t),r.email&&(a.bind_email=!0),r.msisdn&&(a.bind_msisdn=!0),null!=o&&(a.guest_access_token=o),null!=s&&(a.inhibit_login=s),null!=t&&(a.x_show_msisdn=!0),this.registerRequest(a)}registerGuest(e){return(e=e||{}).body=e.body||{},this.registerRequest(e.body,"guest")}registerRequest(e,t){const n={};return t&&(n.kind=t),this.http.request(w.Method.Post,"/register",n,e)}refreshToken(e){return this.http.authedRequest(w.Method.Post,"/refresh",void 0,{refresh_token:e},{prefix:w.ClientPrefix.V1,inhibitLogoutEmit:!0})}loginFlows(){return this.http.request(w.Method.Get,"/login")}login(e,t){const n={type:e};return Object.assign(n,t),this.http.authedRequest(w.Method.Post,"/login",void 0,n).then((e=>(e.access_token&&e.user_id&&(this.http.opts.accessToken=e.access_token,this.credentials={userId:e.user_id}),e)))}loginWithPassword(e,t){return this.login("m.login.password",{user:e,password:t})}loginWithSAML2(e){return this.login("m.login.saml2",{relay_state:e})}getCasLoginUrl(e){return this.getSsoLoginUrl(e,"cas")}getSsoLoginUrl(e,t="sso",n,i){let r="/login/"+t+"/redirect";n&&(r+="/"+n);const o={redirectUrl:e,[fe.unstable]:i};return this.http.getUrl(r,o,w.ClientPrefix.R0).href}loginWithToken(e){return this.login("m.login.token",{token:e})}async logout(e=!1){var t,n;if(null!==(t=this.crypto)&&void 0!==t&&null!==(n=t.backupManager)&&void 0!==n&&n.getKeyBackupEnabled())try{for(;await this.crypto.backupManager.backupPendingKeys(200)>0;);}catch(e){E.logger.error("Key backup request failed when logging out. Some keys may be missing from backup",e)}return e&&(this.stopClient(),this.http.abort()),this.http.authedRequest(w.Method.Post,"/logout")}deactivateAccount(e,t){const n={};return e&&(n.auth=e),void 0!==t&&(n.erase=t),this.http.authedRequest(w.Method.Post,"/account/deactivate",void 0,n)}requestLoginToken(e){const t={auth:e};return this.http.authedRequest(w.Method.Post,"/org.matrix.msc3882/login/token",void 0,t,{prefix:w.ClientPrefix.Unstable})}getFallbackAuthUrl(e,t){const n=p.encodeUri("/auth/$loginType/fallback/web",{$loginType:e});return this.http.getUrl(n,{session:t},w.ClientPrefix.R0).href}async createRoom(e){var t;const n=(e.invite_3pid||[]).filter((e=>!e.id_access_token));if(n.length>0&&null!==(t=this.identityServer)&&void 0!==t&&t.getAccessToken&&await this.doesServerAcceptIdentityAccessToken()){const e=await this.identityServer.getAccessToken();if(e)for(const t of n)t.id_access_token=e}return this.http.authedRequest(w.Method.Post,"/createRoom",void 0,e)}fetchRelations(e,t,n,i,r={dir:f.Direction.Backward}){let o=r;W.Thread.hasServerSideFwdPaginationSupport===W.FeatureSupport.Experimental&&(o=(0,p.replaceParam)("dir","org.matrix.msc3715.dir",o));const s=p.encodeParams(o);let a="/rooms/$roomId/relations/$eventId";null!==n?(a+="/$relationType",null!==i&&(a+="/$eventType")):null!==i&&(E.logger.warn(`eventType: ${i} ignored when fetching\n            relations as relationType is null`),i=null);const c=p.encodeUri(a+"?"+s,{$roomId:e,$eventId:t,$relationType:n,$eventType:i});return this.http.authedRequest(w.Method.Get,c,void 0,void 0,{prefix:w.ClientPrefix.Unstable})}roomState(e){const t=p.encodeUri("/rooms/$roomId/state",{$roomId:e});return this.http.authedRequest(w.Method.Get,t)}fetchRoomEvent(e,t){const n=p.encodeUri("/rooms/$roomId/event/$eventId",{$roomId:e,$eventId:t});return this.http.authedRequest(w.Method.Get,n)}members(e,t,n,i){const r={};t&&(r.membership=t),n&&(r.not_membership=n),i&&(r.at=i);const o=p.encodeParams(r),s=p.encodeUri("/rooms/$roomId/members?"+o,{$roomId:e});return this.http.authedRequest(w.Method.Get,s)}upgradeRoom(e,t){const n=p.encodeUri("/rooms/$roomId/upgrade",{$roomId:e});return this.http.authedRequest(w.Method.Post,n,void 0,{new_version:t})}getStateEvent(e,t,n){const i={$roomId:e,$eventType:t,$stateKey:n};let r=p.encodeUri("/rooms/$roomId/state/$eventType",i);return void 0!==n&&(r=p.encodeUri(r+"/$stateKey",i)),this.http.authedRequest(w.Method.Get,r)}sendStateEvent(e,t,n,i="",r={}){const o={$roomId:e,$eventType:t,$stateKey:i};let s=p.encodeUri("/rooms/$roomId/state/$eventType",o);return void 0!==i&&(s=p.encodeUri(s+"/$stateKey",o)),this.http.authedRequest(w.Method.Put,s,void 0,n,r)}roomInitialSync(e,t){var n;const i=p.encodeUri("/rooms/$roomId/initialSync",{$roomId:e});return this.http.authedRequest(w.Method.Get,i,{limit:null!==(n=null==t?void 0:t.toString())&&void 0!==n?n:"30"})}async setRoomReadMarkersHttpRequest(e,t,n,i){const r=p.encodeUri("/rooms/$roomId/read_markers",{$roomId:e}),o={[V.ReceiptType.FullyRead]:t,[V.ReceiptType.Read]:n};return(await this.doesServerSupportUnstableFeature("org.matrix.msc2285.stable")||await this.isVersionSupported("v1.4"))&&(o[V.ReceiptType.ReadPrivate]=i),this.http.authedRequest(w.Method.Post,r,void 0,o)}getJoinedRooms(){const e=p.encodeUri("/joined_rooms",{});return this.http.authedRequest(w.Method.Get,e)}getJoinedRoomMembers(e){const t=p.encodeUri("/rooms/$roomId/joined_members",{$roomId:e});return this.http.authedRequest(w.Method.Get,t)}publicRooms(e={}){let{server:t,limit:n,since:i}=e,o=(0,r.default)(e,ee);const s={server:t,limit:n,since:i};return 0===Object.keys(o).length?this.http.authedRequest(w.Method.Get,"/publicRooms",s):this.http.authedRequest(w.Method.Post,"/publicRooms",s,o)}createAlias(e,t){const n=p.encodeUri("/directory/room/$alias",{$alias:e}),i={room_id:t};return this.http.authedRequest(w.Method.Put,n,void 0,i)}deleteAlias(e){const t=p.encodeUri("/directory/room/$alias",{$alias:e});return this.http.authedRequest(w.Method.Delete,t)}getLocalAliases(e){const t=p.encodeUri("/rooms/$roomId/aliases",{$roomId:e}),n=w.ClientPrefix.V3;return this.http.authedRequest(w.Method.Get,t,void 0,void 0,{prefix:n})}getRoomIdForAlias(e){const t=p.encodeUri("/directory/room/$alias",{$alias:e});return this.http.authedRequest(w.Method.Get,t)}resolveRoomAlias(e){const t=p.encodeUri("/directory/room/$alias",{$alias:e});return this.http.request(w.Method.Get,t)}getRoomDirectoryVisibility(e){const t=p.encodeUri("/directory/list/room/$roomId",{$roomId:e});return this.http.authedRequest(w.Method.Get,t)}setRoomDirectoryVisibility(e,t){const n=p.encodeUri("/directory/list/room/$roomId",{$roomId:e});return this.http.authedRequest(w.Method.Put,n,void 0,{visibility:t})}setRoomDirectoryVisibilityAppService(e,t,n){const i=p.encodeUri("/directory/list/appservice/$networkId/$roomId",{$networkId:e,$roomId:t});return this.http.authedRequest(w.Method.Put,i,void 0,{visibility:n})}searchUserDirectory(e){const t={search_term:e.term};return void 0!==e.limit&&(t.limit=e.limit),this.http.authedRequest(w.Method.Post,"/user_directory/search",void 0,t)}uploadContent(e,t){return this.http.uploadContent(e,t)}cancelUpload(e){return this.http.cancelUpload(e)}getCurrentUploads(){return this.http.getCurrentUploads()}getProfileInfo(e,t){const n=t?p.encodeUri("/profile/$userId/$info",{$userId:e,$info:t}):p.encodeUri("/profile/$userId",{$userId:e});return this.http.authedRequest(w.Method.Get,n)}getThreePids(){return this.http.authedRequest(w.Method.Get,"/account/3pid")}addThreePid(e,t){const n={threePidCreds:e,bind:t};return this.http.authedRequest(w.Method.Post,"/account/3pid",void 0,n)}async addThreePidOnly(e){const t=await this.isVersionSupported("r0.6.0")?w.ClientPrefix.R0:w.ClientPrefix.Unstable;return this.http.authedRequest(w.Method.Post,"/account/3pid/add",void 0,e,{prefix:t})}async bindThreePid(e){const t=await this.isVersionSupported("r0.6.0")?w.ClientPrefix.R0:w.ClientPrefix.Unstable;return this.http.authedRequest(w.Method.Post,"/account/3pid/bind",void 0,e,{prefix:t})}async unbindThreePid(e,t){const n={medium:e,address:t,id_server:this.getIdentityServerUrl(!0)},i=await this.isVersionSupported("r0.6.0")?w.ClientPrefix.R0:w.ClientPrefix.Unstable;return this.http.authedRequest(w.Method.Post,"/account/3pid/unbind",void 0,n,{prefix:i})}deleteThreePid(e,t){return this.http.authedRequest(w.Method.Post,"/account/3pid/delete",void 0,{medium:e,address:t})}setPassword(e,t,n){const i={auth:e,new_password:t,logout_devices:n};return this.http.authedRequest(w.Method.Post,"/account/password",void 0,i)}getDevices(){return this.http.authedRequest(w.Method.Get,"/devices")}getDevice(e){const t=p.encodeUri("/devices/$device_id",{$device_id:e});return this.http.authedRequest(w.Method.Get,t)}setDeviceDetails(e,t){const n=p.encodeUri("/devices/$device_id",{$device_id:e});return this.http.authedRequest(w.Method.Put,n,void 0,t)}deleteDevice(e,t){const n=p.encodeUri("/devices/$device_id",{$device_id:e}),i={};return t&&(i.auth=t),this.http.authedRequest(w.Method.Delete,n,void 0,i)}deleteMultipleDevices(e,t){const n={devices:e};return t&&(n.auth=t),this.http.authedRequest(w.Method.Post,"/delete_devices",void 0,n)}async getPushers(){const e=await this.http.authedRequest(w.Method.Get,"/pushers");return await this.doesServerSupportUnstableFeature("org.matrix.msc3881")||(e.pushers=e.pushers.map((e=>(e.hasOwnProperty(L.PUSHER_ENABLED.name)||(e[L.PUSHER_ENABLED.name]=!0),e)))),e}setPusher(e){return this.http.authedRequest(w.Method.Post,"/pushers/set",void 0,e)}setLocalNotificationSettings(e,t){const n=`${L.LOCAL_NOTIFICATION_SETTINGS_PREFIX.name}.${e}`;return this.setAccountData(n,t)}getPushRules(){return this.http.authedRequest(w.Method.Get,"/pushrules/").then((e=>m.PushProcessor.rewriteDefaultRules(e)))}addPushRule(e,t,n,i){const r=p.encodeUri("/pushrules/"+e+"/$kind/$ruleId",{$kind:t,$ruleId:n});return this.http.authedRequest(w.Method.Put,r,void 0,i)}deletePushRule(e,t,n){const i=p.encodeUri("/pushrules/"+e+"/$kind/$ruleId",{$kind:t,$ruleId:n});return this.http.authedRequest(w.Method.Delete,i)}setPushRuleEnabled(e,t,n,i){const r=p.encodeUri("/pushrules/"+e+"/$kind/$ruleId/enabled",{$kind:t,$ruleId:n});return this.http.authedRequest(w.Method.Put,r,void 0,{enabled:i})}setPushRuleActions(e,t,n,i){const r=p.encodeUri("/pushrules/"+e+"/$kind/$ruleId/actions",{$kind:t,$ruleId:n});return this.http.authedRequest(w.Method.Put,r,void 0,{actions:i})}search(e,t){const n={};return e.next_batch&&(n.next_batch=e.next_batch),this.http.authedRequest(w.Method.Post,"/search",n,e.body,{abortSignal:t})}uploadKeysRequest(e,t){return this.http.authedRequest(w.Method.Post,"/keys/upload",void 0,e)}uploadKeySignatures(e){return this.http.authedRequest(w.Method.Post,"/keys/signatures/upload",void 0,e,{prefix:w.ClientPrefix.V3})}downloadKeysForUsers(e,t={}){const n={device_keys:{}};return"token"in t&&(n.token=t.token),e.forEach((e=>{n.device_keys[e]=[]})),this.http.authedRequest(w.Method.Post,"/keys/query",void 0,n)}claimOneTimeKeys(e,t="signed_curve25519",n){const i={};void 0===t&&(t="signed_curve25519");for(const[n,r]of e){const e=i[n]||{};i[n]=e,e[r]=t}const r={one_time_keys:i};return n&&(r.timeout=n),this.http.authedRequest(w.Method.Post,"/keys/claim",void 0,r)}getKeyChanges(e,t){const n={from:e,to:t};return this.http.authedRequest(w.Method.Get,"/keys/changes",n)}uploadDeviceSigningKeys(e,t){const n=Object.assign({},t);return e&&Object.assign(n,{auth:e}),this.http.authedRequest(w.Method.Post,"/keys/device_signing/upload",void 0,n,{prefix:w.ClientPrefix.Unstable})}registerWithIdentityServer(e){if(!this.idBaseUrl)throw new Error("No identity server base URL set");const t=this.http.getUrl("/account/register",void 0,w.IdentityPrefix.V2,this.idBaseUrl);return this.http.requestOtherUrl(w.Method.Post,t,e)}requestEmailToken(e,t,n,i,r){const o={client_secret:t,email:e,send_attempt:null==n?void 0:n.toString(),next_link:i};return this.http.idServerRequest(w.Method.Post,"/validate/email/requestToken",o,w.IdentityPrefix.V2,r)}requestMsisdnToken(e,t,n,i,r,o){const s={client_secret:n,country:e,phone_number:t,send_attempt:null==i?void 0:i.toString(),next_link:r};return this.http.idServerRequest(w.Method.Post,"/validate/msisdn/requestToken",s,w.IdentityPrefix.V2,o)}submitMsisdnToken(e,t,n,i){const r={sid:e,client_secret:t,token:n};return this.http.idServerRequest(w.Method.Post,"/validate/msisdn/submitToken",r,w.IdentityPrefix.V2,i)}submitMsisdnTokenOtherUrl(e,t,n,i){const r={sid:t,client_secret:n,token:i};return this.http.requestOtherUrl(w.Method.Post,e,r)}getIdentityHashDetails(e){return this.http.idServerRequest(w.Method.Get,"/hash_details",void 0,w.IdentityPrefix.V2,e)}async identityHashedLookup(e,t){const i={},r=await this.getIdentityHashDetails(t);if(!r||!r.lookup_pepper||!r.algorithms)throw new Error("Unsupported identity server: bad response");i.pepper=r.lookup_pepper;const o={};if(r.algorithms.includes("sha256")){const t=new n.g.Olm.Utility;i.addresses=e.map((e=>{const n=e[0].toLowerCase(),r=e[1].toLowerCase(),s=t.sha256(`${n} ${r} ${i.pepper}`).replace(/\+/g,"-").replace(/\//g,"_");return o[s]=e[0],s})),i.algorithm="sha256"}else{if(!r.algorithms.includes("none"))throw new Error("Unsupported identity server: unknown hash algorithm");i.addresses=e.map((e=>{const t=`${e[0].toLowerCase()} ${e[1].toLowerCase()}`;return o[t]=e[0],t})),i.algorithm="none"}const s=await this.http.idServerRequest(w.Method.Post,"/lookup",i,w.IdentityPrefix.V2,t);if(!s||!s.mappings)return[];const a=[];for(const e of Object.keys(s.mappings)){const t=s.mappings[e],n=o[e];if(!n)throw new Error("Identity server returned more results than expected");a.push({address:n,mxid:t})}return a}async lookupThreePid(e,t,n){const i=(await this.identityHashedLookup([[t,e]],n)).find((e=>e.address===t));return i?{address:t,medium:e,mxid:i.mxid}:{}}async bulkLookupThreePids(e,t){const n=await this.identityHashedLookup(e.map((e=>[e[1],e[0]])),t),i=[];for(const t of n){const n=e.find((e=>e[1]===t.address));if(!n)throw new Error("Identity sever returned unexpected results");i.push([n[0],t.address,t.mxid])}return{threepids:i}}getIdentityAccount(e){return this.http.idServerRequest(w.Method.Get,"/account",void 0,w.IdentityPrefix.V2,e)}sendToDevice(e,t,n){const i=p.encodeUri("/sendToDevice/$eventType/$txnId",{$eventType:e,$txnId:n||this.makeTxnId()}),r={messages:t},o=Object.keys(t).reduce(((e,n)=>(e[n]=Object.keys(t[n]),e)),{});return E.logger.log(`PUT ${i}`,o),this.http.authedRequest(w.Method.Put,i,void 0,r)}queueToDevice(e){return this.toDeviceMessageQueue.queueBatch(e)}getThirdpartyProtocols(){return this.http.authedRequest(w.Method.Get,"/thirdparty/protocols").then((e=>{if(!e||"object"!=typeof e)throw new Error(`/thirdparty/protocols did not return an object: ${e}`);return e}))}getThirdpartyLocation(e,t){const n=p.encodeUri("/thirdparty/location/$protocol",{$protocol:e});return this.http.authedRequest(w.Method.Get,n,t)}getThirdpartyUser(e,t){const n=p.encodeUri("/thirdparty/user/$protocol",{$protocol:e});return this.http.authedRequest(w.Method.Get,n,t)}getTerms(e,t){const n=this.termsUrlForService(e,t);return this.http.requestOtherUrl(w.Method.Get,n)}agreeToTerms(e,t,n,i){const r=this.termsUrlForService(e,t),o={Authorization:"Bearer "+n};return this.http.requestOtherUrl(w.Method.Post,r,{user_accepts:i},{headers:o})}reportEvent(e,t,n,i){const r=p.encodeUri("/rooms/$roomId/report/$eventId",{$roomId:e,$eventId:t});return this.http.authedRequest(w.Method.Post,r,void 0,{score:n,reason:i})}getRoomHierarchy(e,t,n,i=!1,r){const o=p.encodeUri("/rooms/$roomId/hierarchy",{$roomId:e}),s={suggested_only:String(i),max_depth:null==n?void 0:n.toString(),from:r,limit:null==t?void 0:t.toString()};return this.http.authedRequest(w.Method.Get,o,s,void 0,{prefix:w.ClientPrefix.V1}).catch((e=>{if("M_UNRECOGNIZED"===e.errcode)return this.http.authedRequest(w.Method.Get,o,s,void 0,{prefix:"/_matrix/client/unstable/org.matrix.msc2946"});throw e}))}async unstableCreateFileTree(e){const{room_id:t}=await this.createRoom({name:e,preset:D.Preset.PrivateChat,power_level_content_override:re(re({},U.DEFAULT_TREE_POWER_LEVELS_TEMPLATE),{},{users:{[this.getUserId()]:100}}),creation_content:{[L.RoomCreateTypeField]:L.RoomType.Space},initial_state:[{type:L.UNSTABLE_MSC3088_PURPOSE.name,state_key:L.UNSTABLE_MSC3089_TREE_SUBTYPE.name,content:{[L.UNSTABLE_MSC3088_ENABLED.name]:!0}},{type:L.EventType.RoomEncryption,state_key:"",content:{algorithm:v.MEGOLM_ALGORITHM}}]});return new U.MSC3089TreeSpace(this,t)}unstableGetFileTreeSpace(e){var t,n;const i=this.getRoom(e);if("join"!==(null==i?void 0:i.getMyMembership()))return null;const r=i.currentState.getStateEvents(L.EventType.RoomCreate,""),o=i.currentState.getStateEvents(L.UNSTABLE_MSC3088_PURPOSE.name,L.UNSTABLE_MSC3089_TREE_SUBTYPE.name);if(!r)throw new Error("Expected single room create event");return null!=o&&null!==(t=o.getContent())&&void 0!==t&&t[L.UNSTABLE_MSC3088_ENABLED.name]?(null===(n=r.getContent())||void 0===n?void 0:n[L.RoomCreateTypeField])!==L.RoomType.Space?null:new U.MSC3089TreeSpace(this,e):null}slidingSync(e,t,n){const i={};e.pos&&(i.pos=e.pos,delete e.pos),e.timeout&&(i.timeout=e.timeout,delete e.timeout);const r=e.clientTimeout;return delete e.clientTimeout,this.http.authedRequest(w.Method.Post,"/sync",i,e,{prefix:"/_matrix/client/unstable/org.matrix.msc3575",baseUrl:t,localTimeoutMs:r,abortSignal:n})}supportsExperimentalThreads(){var e;return(null===(e=this.clientOpts)||void 0===e?void 0:e.experimentalThreadSupport)||!1}async getRoomSummary(e,t){const n=p.encodeUri("/rooms/$roomid/summary",{$roomid:e});return this.http.authedRequest(w.Method.Get,n,{via:t},void 0,{prefix:"/_matrix/client/unstable/im.nheko.summary"})}processThreadEvents(e,t,n){e.processThreadedEvents(t,n)}processThreadRoots(e,t,n){e.processThreadRoots(t,n)}processBeaconEvents(e,t){null!=t&&t.length&&e&&e.currentState.processBeaconEvents(t,this)}async whoami(){return this.http.authedRequest(w.Method.Get,"/account/whoami")}timestampToEvent(e,t,n){const i=p.encodeUri("/rooms/$roomId/timestamp_to_event",{$roomId:e});return this.http.authedRequest(w.Method.Get,i,{ts:t.toString(),dir:n},void 0,{prefix:"/_matrix/client/unstable/org.matrix.msc3030"})}}function ge(e,t){var n,i;const r=t.getPushActions(),o=e.getPushActionsForEvent(t,!0),s=e.getRoom(t.getRoomId());if(!s||!e.getUserId())return;const a=!!t.threadRootId&&!t.isThreadRoot,c=s.getUnreadCountForEventContext(R.NotificationCountType.Highlight,t),l=!(null==r||null===(n=r.tweaks)||void 0===n||!n.highlight),u=!(null==o||null===(i=o.tweaks)||void 0===i||!i.highlight);var d;if((l!==u||c>0)&&!(a?null===(d=s.getThread(t.threadRootId))||void 0===d?void 0:d.hasUserReadEvent(e.getUserId(),t.getId()):s.hasUserReadEvent(e.getUserId(),t.getId()))){var h;let e=c;u&&!l&&e++,!u&&l&&e--,a?s.setThreadUnreadNotificationCount(t.threadRootId,R.NotificationCountType.Highlight,e):s.setUnreadNotificationCount(R.NotificationCountType.Highlight,e),(null!==(h=a?s.getThreadUnreadNotificationCount(t.threadRootId,R.NotificationCountType.Total):s.getRoomUnreadNotificationCount(R.NotificationCountType.Total))&&void 0!==h?h:0)<e&&(a?s.setThreadUnreadNotificationCount(t.threadRootId,R.NotificationCountType.Total,e):s.setUnreadNotificationCount(R.NotificationCountType.Total,e))}}t.MatrixClient=me,(0,o.default)(me,"RESTORE_BACKUP_ERROR_BAD_KEY","RESTORE_BACKUP_ERROR_BAD_KEY")},44656:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.makeBeaconInfoContent=t.makeBeaconContent=t.getTextForLocationEvent=void 0,t.makeEmoteMessage=function(e){return{msgtype:s.MsgType.Emote,body:e}},t.makeHtmlEmote=function(e,t){return{msgtype:s.MsgType.Emote,format:"org.matrix.custom.html",body:e,formatted_body:t}},t.makeHtmlMessage=function(e,t){return{msgtype:s.MsgType.Text,format:"org.matrix.custom.html",body:e,formatted_body:t}},t.makeHtmlNotice=function(e,t){return{msgtype:s.MsgType.Notice,format:"org.matrix.custom.html",body:e,formatted_body:t}},t.makeLocationContent=void 0,t.makeNotice=function(e){return{msgtype:s.MsgType.Notice,body:e}},t.makeTextMessage=function(e){return{msgtype:s.MsgType.Text,body:e}},t.parseTopicContent=t.parseLocationEvent=t.parseBeaconInfoContent=t.parseBeaconContent=t.makeTopicContent=void 0;var r=i(n(59713)),o=n(71333),s=n(42481),a=n(96548),c=n(76709),l=n(29953);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}const d=(e,t,n,i)=>{const r=`at ${new Date(n).toISOString()}`;return[t===c.LocationAssetType.Self?"User":void 0,"Location",i?`"${i}"`:void 0,e,r].filter(Boolean).join(" ")};t.getTextForLocationEvent=d;const h=(e,t,n,i,o)=>{const l=null!=e?e:d(t,o||c.LocationAssetType.Self,n,i),h=n?{[c.M_TIMESTAMP.name]:n}:{};return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({msgtype:s.MsgType.Location,body:l,geo_uri:t,[c.M_LOCATION.name]:{description:i,uri:t},[c.M_ASSET.name]:{type:o||c.LocationAssetType.Self},[a.TEXT_NODE_TYPE.name]:l},h)};t.makeLocationContent=h,t.parseLocationEvent=e=>{var t,n;const i=c.M_LOCATION.findIn(e),r=c.M_ASSET.findIn(e),o=c.M_TIMESTAMP.findIn(e),s=a.TEXT_NODE_TYPE.findIn(e),l=null!==(t=null==i?void 0:i.uri)&&void 0!==t?t:null==e?void 0:e.geo_uri,u=null==i?void 0:i.description,d=null!==(n=null==r?void 0:r.type)&&void 0!==n?n:c.LocationAssetType.Self,p=null!=s?s:e.body;return h(p,l,null!=o?o:void 0,u,d)},t.makeTopicContent=(e,t)=>{const n=[{body:e,mimetype:"text/plain"}];return(0,o.isProvided)(t)&&n.push({body:t,mimetype:"text/html"}),{topic:e,[l.M_TOPIC.name]:n}},t.parseTopicContent=e=>{var t,n,i;const r=l.M_TOPIC.findIn(e);return{text:null!==(t=null==r||null===(n=r.find((e=>!(0,o.isProvided)(e.mimetype)||"text/plain"===e.mimetype)))||void 0===n?void 0:n.body)&&void 0!==t?t:e.topic,html:null==r||null===(i=r.find((e=>"text/html"===e.mimetype)))||void 0===i?void 0:i.body}},t.makeBeaconInfoContent=(e,t,n,i,r)=>({description:n,timeout:e,live:t,[c.M_TIMESTAMP.name]:r||Date.now(),[c.M_ASSET.name]:{type:null!=i?i:c.LocationAssetType.Self}}),t.parseBeaconInfoContent=e=>{var t;const{description:n,timeout:i,live:r}=e,o=null!==(t=c.M_TIMESTAMP.findIn(e))&&void 0!==t?t:void 0,s=c.M_ASSET.findIn(e);return{description:n,timeout:i,live:r,assetType:null==s?void 0:s.type,timestamp:o}},t.makeBeaconContent=(e,t,n,i)=>({[c.M_LOCATION.name]:{description:i,uri:e},[c.M_TIMESTAMP.name]:t,"m.relates_to":{rel_type:o.REFERENCE_RELATION.name,event_id:n}}),t.parseBeaconContent=e=>{var t;const n=c.M_LOCATION.findIn(e),i=null!==(t=c.M_TIMESTAMP.findIn(e))&&void 0!==t?t:void 0;return{description:null==n?void 0:n.description,uri:null==n?void 0:n.uri,timestamp:i}}},73667:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHttpUriForMxc=function(e,t,n,r,o,s=!1){if("string"!=typeof t||!t)return"";if(0!==t.indexOf("mxc://"))return s?t:"";let a=t.slice(6),c="/_matrix/media/r0/download/";const l={};n&&(l.width=Math.round(n).toString()),r&&(l.height=Math.round(r).toString()),o&&(l.method=o),Object.keys(l).length>0&&(c="/_matrix/media/r0/thumbnail/");const u=a.indexOf("#");let d="";u>=0&&(d=a.slice(u),a=a.slice(0,u));return e+c+a+(0===Object.keys(l).length?"":"?"+i.encodeParams(l))+d};var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}(n(3102));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}},3075:(e,t,n)=>{"use strict";var i=n(48764).Buffer,r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.UserTrustLevel=t.DeviceTrustLevel=t.CrossSigningLevel=t.CrossSigningInfo=void 0,t.createCryptoStoreCacheCallbacks=function(e,t){return{getCrossSigningKeyCache:async function(n,r){const o=await new Promise((t=>e.doTxn("readonly",[c.IndexedDBCryptoStore.STORE_ACCOUNT],(i=>{e.getSecretStorePrivateKey(i,t,n)}))));if(o&&o.ciphertext){const e=i.from(t.pickleKey),r=await(0,l.decryptAES)(o,e,n);return(0,s.decodeBase64)(r)}return o},storeCrossSigningKeyCache:async function(n,r){if(!(r instanceof Uint8Array))throw new Error(`storeCrossSigningKeyCache expects Uint8Array, got ${r}`);const o=i.from(t.pickleKey),a=await(0,l.encryptAES)((0,s.encodeBase64)(r),o,n);return e.doTxn("readwrite",[c.IndexedDBCryptoStore.STORE_ACCOUNT],(t=>{e.storeSecretStorePrivateKey(t,n,a)}))}}},t.requestKeysDuringVerification=async function(e,t,n){if(e.getUserId()===t)return a.logger.log("Cross-signing: Self-verification done; requesting keys"),new Promise(((t,i)=>{const r=e,o=r.crypto.crossSigningInfo,c=new d(o.userId,{getCrossSigningKey:async e=>{a.logger.debug("Cross-signing: requesting secret",e,n);const{promise:t}=r.requestSecret(`m.cross_signing.${e}`,[n]),i=await t,o=(0,s.decodeBase64)(i);return Uint8Array.from(o)}},o.getCacheCallbacks());c.keys=o.keys;const l=new Promise((e=>{setTimeout(e,6e4,new Error("Timeout"))})),u=(async()=>{if(!await r.crypto.getSessionBackupPrivateKey()){a.logger.info("No cached backup key found. Requesting...");const e=r.requestSecret("m.megolm_backup.v1",[n]),t=await e.promise;a.logger.info("Got key backup key, decoding...");const i=(0,s.decodeBase64)(t);a.logger.info("Decoded backup key, storing..."),await r.crypto.storeSessionBackupPrivateKey(Uint8Array.from(i)),a.logger.info("Backup key stored. Starting backup restore...");const o=await r.getKeyBackupVersion();r.restoreKeyBackupWithCache(void 0,void 0,o).then((()=>{a.logger.info("Backup restored.")}))}})();return Promise.race([Promise.all([c.getCrossSigningKey("master"),c.getCrossSigningKey("self_signing"),c.getCrossSigningKey("user_signing"),u]),l]).then(t,i)})).catch((e=>{a.logger.warn("Cross-signing: failure while requesting keys:",e)}))};var o=r(n(59713)),s=n(32772),a=n(7434),c=n(57585),l=n(2611);function u(e){return Object.values(e.keys)[0]}class d{constructor(e,t={},n={}){this.userId=e,this.callbacks=t,this.cacheCallbacks=n,(0,o.default)(this,"keys",{}),(0,o.default)(this,"firstUse",!0),(0,o.default)(this,"crossSigningVerifiedBefore",!1)}static fromStorage(e,t){const n=new d(t);for(const t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}toStorage(){return{keys:this.keys,firstUse:this.firstUse,crossSigningVerifiedBefore:this.crossSigningVerifiedBefore}}async getCrossSigningKey(e,t){const i=["master","self_signing","user_signing"].indexOf(e)>=0;if(!this.callbacks.getCrossSigningKey)throw new Error("No getCrossSigningKey callback supplied");function r(e){if(!e)return;const i=new n.g.Olm.PkSigning,r=i.init_with_seed(e);if(r===t)return[r,i];i.free()}void 0===t&&(t=this.getId(e));let o=null;this.cacheCallbacks.getCrossSigningKeyCache&&i&&(o=await this.cacheCallbacks.getCrossSigningKeyCache(e,t));const s=r(o);if(s)return s;o=await this.callbacks.getCrossSigningKey(e,t);const a=r(o);if(a)return this.cacheCallbacks.storeCrossSigningKeyCache&&i&&await this.cacheCallbacks.storeCrossSigningKeyCache(e,o),a;if(!o)throw new Error("getCrossSigningKey callback for "+e+" returned falsey");throw new Error("Key type "+e+" from getCrossSigningKey callback did not match")}async isStoredInSecretStorage(e){const t=await e.isStored("m.cross_signing.master")||{};function n(e){for(const n of Object.keys(t))e[n]||delete t[n]}for(const t of["self_signing","user_signing"])n(await e.isStored(`m.cross_signing.${t}`)||{});return Object.keys(t).length?t:null}static async storeInSecretStorage(e,t){for(const[n,i]of e){const e=(0,s.encodeBase64)(i);await t.store(`m.cross_signing.${n}`,e)}}static async getFromSecretStorage(e,t){const n=await t.get(`m.cross_signing.${e}`);return n?(0,s.decodeBase64)(n):null}async isStoredInKeyCache(e){const t=this.cacheCallbacks;if(!t)return!1;const n=e?[e]:["master","self_signing","user_signing"];for(const e of n){var i;if(!await(null===(i=t.getCrossSigningKeyCache)||void 0===i?void 0:i.call(t,e)))return!1}return!0}async getCrossSigningKeysFromCache(){const e=new Map,t=this.cacheCallbacks;if(!t)return e;for(const i of["master","self_signing","user_signing"]){var n;const r=await(null===(n=t.getCrossSigningKeyCache)||void 0===n?void 0:n.call(t,i));r&&e.set(i,r)}return e}getId(e="master"){return this.keys[e]?u(this.keys[e]):null}async resetKeys(e){if(!this.callbacks.saveCrossSigningKeys)throw new Error("No saveCrossSigningKeys callback supplied");if(void 0===e||e&h.MASTER||!this.keys.master)e=h.MASTER|h.USER_SIGNING|h.SELF_SIGNING;else if(0===e)return;const t={},i={};let r,o;try{if(e&h.MASTER?(r=new n.g.Olm.PkSigning,t.master=r.generate_seed(),o=r.init_with_seed(t.master),i.master={user_id:this.userId,usage:["master"],keys:{["ed25519:"+o]:o}}):[o,r]=await this.getCrossSigningKey("master"),e&h.SELF_SIGNING){const e=new n.g.Olm.PkSigning;try{t.self_signing=e.generate_seed();const n=e.init_with_seed(t.self_signing);i.self_signing={user_id:this.userId,usage:["self_signing"],keys:{["ed25519:"+n]:n}},(0,s.pkSign)(i.self_signing,r,this.userId,o)}finally{e.free()}}if(e&h.USER_SIGNING){const e=new n.g.Olm.PkSigning;try{t.user_signing=e.generate_seed();const n=e.init_with_seed(t.user_signing);i.user_signing={user_id:this.userId,usage:["user_signing"],keys:{["ed25519:"+n]:n}},(0,s.pkSign)(i.user_signing,r,this.userId,o)}finally{e.free()}}Object.assign(this.keys,i),this.callbacks.saveCrossSigningKeys(t)}finally{r&&r.free()}}clearKeys(){this.keys={}}setKeys(e){const t={};if(e.master){if(e.master.user_id!==this.userId){const t="Mismatched user ID "+e.master.user_id+" in master key from "+this.userId;throw a.logger.error(t),new Error(t)}this.keys.master?u(e.master)!==this.getId()&&(this.firstUse=!1):this.firstUse=!0,t.master=e.master}else{if(!this.keys.master)throw new Error("Tried to set cross-signing keys without a master key");t.master=this.keys.master}const n=u(t.master);if(e.user_signing){if(e.user_signing.user_id!==this.userId){const t="Mismatched user ID "+e.master.user_id+" in user_signing key from "+this.userId;throw a.logger.error(t),new Error(t)}try{(0,s.pkVerify)(e.user_signing,n,this.userId)}catch(e){throw a.logger.error("invalid signature on user-signing key"),e}}if(e.self_signing){if(e.self_signing.user_id!==this.userId){const t="Mismatched user ID "+e.master.user_id+" in self_signing key from "+this.userId;throw a.logger.error(t),new Error(t)}try{(0,s.pkVerify)(e.self_signing,n,this.userId)}catch(e){throw a.logger.error("invalid signature on self-signing key"),e}}e.master&&(this.keys.master=e.master,delete this.keys.self_signing,delete this.keys.user_signing),e.self_signing&&(this.keys.self_signing=e.self_signing),e.user_signing&&(this.keys.user_signing=e.user_signing)}updateCrossSigningVerifiedBefore(e){!this.crossSigningVerifiedBefore&&e&&(this.crossSigningVerifiedBefore=!0)}async signObject(e,t){if(!this.keys[t])throw new Error("Attempted to sign with "+t+" key but no such key present");const[n,i]=await this.getCrossSigningKey(t);try{return(0,s.pkSign)(e,i,this.userId,n),e}finally{i.free()}}async signUser(e){if(this.keys.user_signing)return this.signObject(e.keys.master,"user_signing");a.logger.info("No user signing key: not signing user")}async signDevice(e,t){if(e!==this.userId)throw new Error(`Trying to sign ${e}'s device; can only sign our own device`);if(this.keys.self_signing)return this.signObject({algorithms:t.algorithms,keys:t.keys,device_id:t.deviceId,user_id:e},"self_signing");a.logger.info("No self signing key: not signing device")}checkUserTrust(e){if(this.userId===e.userId&&this.getId()&&this.getId()===e.getId()&&this.getId("self_signing")&&this.getId("self_signing")===e.getId("self_signing"))return new p(!0,!0,this.firstUse);if(!this.keys.user_signing)return new p(!1,!1,e.firstUse);let t;const n=e.keys.master,i=this.getId("user_signing");try{(0,s.pkVerify)(n,i,this.userId),t=!0}catch(e){t=!1}return new p(t,e.crossSigningVerifiedBefore,e.firstUse)}checkDeviceTrust(e,t,n,i){const r=this.checkUserTrust(e),o=e.keys.self_signing;if(!o)return new f(!1,!1,n,i);const a=function(e,t){return{algorithms:e.algorithms,keys:e.keys,device_id:e.deviceId,user_id:t,signatures:e.signatures}}(t,e.userId);try{return(0,s.pkVerify)(o,e.getId(),e.userId),(0,s.pkVerify)(a,u(o),e.userId),f.fromUserTrustLevel(r,n,i)}catch(e){return new f(!1,!1,n,i)}}getCacheCallbacks(){return this.cacheCallbacks}}let h;t.CrossSigningInfo=d,t.CrossSigningLevel=h,function(e){e[e.MASTER=4]="MASTER",e[e.USER_SIGNING=2]="USER_SIGNING",e[e.SELF_SIGNING=1]="SELF_SIGNING"}(h||(t.CrossSigningLevel=h={}));class p{constructor(e,t,n){this.crossSigningVerified=e,this.crossSigningVerifiedBefore=t,this.tofu=n}isVerified(){return this.isCrossSigningVerified()}isCrossSigningVerified(){return this.crossSigningVerified}wasCrossSigningVerified(){return this.crossSigningVerifiedBefore}isTofu(){return this.tofu}}t.UserTrustLevel=p;class f{constructor(e,t,n,i){this.crossSigningVerified=e,this.tofu=t,this.localVerified=n,this.trustCrossSignedDevices=i}static fromUserTrustLevel(e,t,n){return new f(e.isCrossSigningVerified(),e.isTofu(),t,n)}isVerified(){return Boolean(this.isLocallyVerified()||this.trustCrossSignedDevices&&this.isCrossSigningVerified())}isCrossSigningVerified(){return this.crossSigningVerified}isLocallyVerified(){return this.localVerified}isTofu(){return this.tofu}}t.DeviceTrustLevel=f},36670:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TrackingStatus=t.DeviceList=void 0;var r=i(n(59713)),o=n(7434),s=n(23272),a=n(3075),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(32772)),l=n(57585),u=n(3102),d=n(55861),h=n(12600);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}let f;t.TrackingStatus=f,function(e){e[e.NotTracked=0]="NotTracked",e[e.PendingDownload=1]="PendingDownload",e[e.DownloadInProgress=2]="DownloadInProgress",e[e.UpToDate=3]="UpToDate"}(f||(t.TrackingStatus=f={}));class m extends d.TypedEventEmitter{constructor(e,t,n,i=250){super(),this.cryptoStore=t,this.keyDownloadChunkSize=i,(0,r.default)(this,"devices",{}),(0,r.default)(this,"crossSigningInfo",{}),(0,r.default)(this,"userByIdentityKey",{}),(0,r.default)(this,"deviceTrackingStatus",{}),(0,r.default)(this,"syncToken",null),(0,r.default)(this,"keyDownloadsInProgressByUser",new Map),(0,r.default)(this,"dirty",!1),(0,r.default)(this,"savePromise",null),(0,r.default)(this,"resolveSavePromise",null),(0,r.default)(this,"savePromiseTime",null),(0,r.default)(this,"saveTimer",null),(0,r.default)(this,"hasFetched",null),(0,r.default)(this,"serialiser",void 0),this.serialiser=new g(e,n,this)}async load(){await this.cryptoStore.doTxn("readonly",[l.IndexedDBCryptoStore.STORE_DEVICE_DATA],(e=>{this.cryptoStore.getEndToEndDeviceData(e,(e=>{var t;this.hasFetched=Boolean(e&&e.devices),this.devices=e?e.devices:{},this.crossSigningInfo=e&&e.crossSigningInfo||{},this.deviceTrackingStatus=e?e.trackingStatus:{},this.syncToken=null!==(t=null==e?void 0:e.syncToken)&&void 0!==t?t:null,this.userByIdentityKey={};for(const e of Object.keys(this.devices)){const t=this.devices[e];for(const n of Object.keys(t)){const i=t[n].keys["curve25519:"+n];void 0!==i&&(this.userByIdentityKey[i]=e)}}}))}));for(const e of Object.keys(this.deviceTrackingStatus))this.deviceTrackingStatus[e]==f.DownloadInProgress&&(this.deviceTrackingStatus[e]=f.PendingDownload)}stop(){null!==this.saveTimer&&clearTimeout(this.saveTimer)}async saveIfDirty(e=500){if(!this.dirty)return Promise.resolve(!1);const t=Date.now()+e;this.savePromiseTime&&t<this.savePromiseTime&&(clearTimeout(this.saveTimer),this.saveTimer=null,this.savePromiseTime=null);let n=this.savePromise;if(null===n&&(n=new Promise((e=>{this.resolveSavePromise=e})),this.savePromise=n),null===this.saveTimer){const n=this.resolveSavePromise;this.savePromiseTime=t,this.saveTimer=setTimeout((()=>{o.logger.log("Saving device tracking data",this.syncToken),this.savePromiseTime=null,this.saveTimer=null,this.savePromise=null,this.resolveSavePromise=null,this.cryptoStore.doTxn("readwrite",[l.IndexedDBCryptoStore.STORE_DEVICE_DATA],(e=>{var t;this.cryptoStore.storeEndToEndDeviceData({devices:this.devices,crossSigningInfo:this.crossSigningInfo,trackingStatus:this.deviceTrackingStatus,syncToken:null!==(t=this.syncToken)&&void 0!==t?t:void 0},e)})).then((()=>{this.dirty=!1,null==n||n(!0)}),(e=>{o.logger.error("Failed to save device tracking data",this.syncToken),o.logger.error(e)}))}),e)}return n}getSyncToken(){return this.syncToken}setSyncToken(e){this.syncToken=e}downloadKeys(e,t){const n=[],i=[];if(e.forEach((e=>{const r=this.deviceTrackingStatus[e];this.keyDownloadsInProgressByUser.has(e)?(o.logger.log(`downloadKeys: already have a download in progress for ${e}: awaiting its result`),i.push(this.keyDownloadsInProgressByUser.get(e))):(t||r!=f.UpToDate)&&n.push(e)})),0!=n.length){o.logger.log("downloadKeys: downloading for",n);const e=this.doKeyDownload(n);i.push(e)}return 0===i.length&&o.logger.log("downloadKeys: already have all necessary keys"),Promise.all(i).then((()=>this.getDevicesFromStore(e)))}getDevicesFromStore(e){const t={};return e.forEach((e=>{t[e]={},(this.getStoredDevicesForUser(e)||[]).forEach((function(n){t[e][n.deviceId]=n}))})),t}getKnownUserIds(){return Object.keys(this.devices)}getStoredDevicesForUser(e){const t=this.devices[e];if(!t)return null;const n=[];for(const e in t)t.hasOwnProperty(e)&&n.push(s.DeviceInfo.fromStorage(t[e],e));return n}getRawStoredDevicesForUser(e){return this.devices[e]}getStoredCrossSigningForUser(e){return this.crossSigningInfo[e]?a.CrossSigningInfo.fromStorage(this.crossSigningInfo[e],e):null}storeCrossSigningForUser(e,t){this.crossSigningInfo[e]=t,this.dirty=!0}getStoredDevice(e,t){const n=this.devices[e];if(null!=n&&n[t])return s.DeviceInfo.fromStorage(n[t],t)}getUserByIdentityKey(e,t){return e!==c.OLM_ALGORITHM&&e!==c.MEGOLM_ALGORITHM?null:this.userByIdentityKey[t]}getDeviceByIdentityKey(e,t){const n=this.getUserByIdentityKey(e,t);if(!n)return null;const i=this.devices[n];if(!i)return null;for(const e in i){if(!i.hasOwnProperty(e))continue;const n=i[e];for(const i in n.keys)if(n.keys.hasOwnProperty(i)&&0===i.indexOf("curve25519:")&&n.keys[i]==t)return s.DeviceInfo.fromStorage(n,e)}return null}storeDevicesForUser(e,t){this.setRawStoredDevicesForUser(e,t),this.dirty=!0}startTrackingDeviceList(e){if("string"!=typeof e)throw new Error("userId must be a string; was "+e);this.deviceTrackingStatus[e]||(o.logger.log("Now tracking device list for "+e),this.deviceTrackingStatus[e]=f.PendingDownload,this.dirty=!0)}stopTrackingDeviceList(e){this.deviceTrackingStatus[e]&&(o.logger.log("No longer tracking device list for "+e),this.deviceTrackingStatus[e]=f.NotTracked,this.dirty=!0)}stopTrackingAllDeviceLists(){for(const e of Object.keys(this.deviceTrackingStatus))this.deviceTrackingStatus[e]=f.NotTracked;this.dirty=!0}invalidateUserDeviceList(e){this.deviceTrackingStatus[e]&&(o.logger.log("Marking device list outdated for",e),this.deviceTrackingStatus[e]=f.PendingDownload,this.dirty=!0)}refreshOutdatedDeviceLists(){this.saveIfDirty();const e=[];for(const t of Object.keys(this.deviceTrackingStatus))this.deviceTrackingStatus[t]==f.PendingDownload&&e.push(t);return this.doKeyDownload(e)}setRawStoredDevicesForUser(e,t){if(void 0!==this.devices[e])for(const[t,n]of Object.entries(this.devices[e])){const e=n.keys["curve25519:"+t];delete this.userByIdentityKey[e]}this.devices[e]=t;for(const[n,i]of Object.entries(t)){const t=i.keys["curve25519:"+n];this.userByIdentityKey[t]=e}}setRawStoredCrossSigningForUser(e,t){this.crossSigningInfo[e]=t}doKeyDownload(e){if(0===e.length)return Promise.resolve();const t=this.serialiser.updateDevicesForUsers(e,this.syncToken).then((()=>{n(!0)}),(t=>{throw o.logger.error("Error downloading keys for "+e+":",t),n(!1),t}));e.forEach((e=>{this.keyDownloadsInProgressByUser.set(e,t),this.deviceTrackingStatus[e]==f.PendingDownload&&(this.deviceTrackingStatus[e]=f.DownloadInProgress)}));const n=n=>{this.emit(h.CryptoEvent.WillUpdateDevices,e,!this.hasFetched),e.forEach((e=>{this.dirty=!0,this.keyDownloadsInProgressByUser.get(e)===t?(this.keyDownloadsInProgressByUser.delete(e),this.deviceTrackingStatus[e]==f.DownloadInProgress&&(n?(this.deviceTrackingStatus[e]=f.UpToDate,o.logger.log("Device list for",e,"now up to date")):this.deviceTrackingStatus[e]=f.PendingDownload)):o.logger.log("Another update in the queue for",e,"- not marking up-to-date")})),this.saveIfDirty(),this.emit(h.CryptoEvent.DevicesUpdated,e,!this.hasFetched),this.hasFetched=!0};return t}}t.DeviceList=m;class g{constructor(e,t,n){this.baseApis=e,this.olmDevice=t,this.deviceList=n,(0,r.default)(this,"downloadInProgress",!1),(0,r.default)(this,"keyDownloadsQueuedByUser",{}),(0,r.default)(this,"queuedQueryDeferred",void 0),(0,r.default)(this,"syncToken",void 0)}updateDevicesForUsers(e,t){return e.forEach((e=>{this.keyDownloadsQueuedByUser[e]=!0})),this.queuedQueryDeferred||(this.queuedQueryDeferred=(0,u.defer)()),this.syncToken=t,this.downloadInProgress?(o.logger.log("Queued key download for",e),this.queuedQueryDeferred.promise):this.doQueuedQueries()}doQueuedQueries(){if(this.downloadInProgress)throw new Error("DeviceListUpdateSerialiser.doQueuedQueries called with request active");const e=Object.keys(this.keyDownloadsQueuedByUser);this.keyDownloadsQueuedByUser={};const t=this.queuedQueryDeferred;this.queuedQueryDeferred=void 0,o.logger.log("Starting key download for",e),this.downloadInProgress=!0;const n={};this.syncToken&&(n.token=this.syncToken);const i=[];for(let t=0;t<e.length;t+=this.deviceList.keyDownloadChunkSize){const r=e.slice(t,t+this.deviceList.keyDownloadChunkSize);i.push((()=>this.baseApis.downloadKeysForUsers(r,n)))}return(0,u.chunkPromises)(i,3).then((async t=>{const n=Object.assign({},...t.map((e=>e.device_keys||{}))),i=Object.assign({},...t.map((e=>e.master_keys||{}))),r=Object.assign({},...t.map((e=>e.self_signing_keys||{}))),s=Object.assign({},...t.map((e=>e.user_signing_keys||{})));for(const t of e){await(0,u.sleep)(5);try{await this.processQueryResponseForUser(t,n[t],{master:null==i?void 0:i[t],self_signing:null==r?void 0:r[t],user_signing:null==s?void 0:s[t]})}catch(e){o.logger.error(`Error processing keys for ${t}:`,e)}}})).then((()=>{o.logger.log("Completed key download for "+e),this.downloadInProgress=!1,null==t||t.resolve(),this.queuedQueryDeferred&&this.doQueuedQueries()}),(n=>{o.logger.warn("Error downloading keys for "+e+":",n),this.downloadInProgress=!1,null==t||t.reject(n)})),t.promise}async processQueryResponseForUser(e,t,n){o.logger.log("got device keys for "+e+":",t),o.logger.log("got cross-signing keys for "+e+":",n);{const n={},i=this.deviceList.getRawStoredDevicesForUser(e);i&&Object.keys(i).forEach((e=>{const t=s.DeviceInfo.fromStorage(i[e],e);n[e]=t})),await async function(e,t,n,i,r,s){let a=!1;for(const e in n)if(n.hasOwnProperty(e)&&!(e in i)){if(t===r&&e===s){o.logger.warn(`Local device ${e} missing from sync, skipping removal`);continue}o.logger.log("Device "+t+":"+e+" has been removed"),delete n[e],a=!0}for(const r in i){if(!i.hasOwnProperty(r))continue;const s=i[r];s.user_id===t?s.device_id===r?await v(e,n,s)&&(a=!0):o.logger.warn("Mismatched device_id "+s.device_id+" in keys from "+t+":"+r):o.logger.warn("Mismatched user_id "+s.user_id+" in keys from "+t+":"+r)}return a}(this.olmDevice,e,n,t||{},this.baseApis.getUserId(),this.baseApis.deviceId);const r={};Object.keys(n).forEach((e=>{r[e]=n[e].toStorage()})),this.deviceList.setRawStoredDevicesForUser(e,r)}if(n&&(n.master||n.self_signing||n.user_signing)){const t=this.deviceList.getStoredCrossSigningForUser(e)||new a.CrossSigningInfo(e);t.setKeys(n),this.deviceList.setRawStoredCrossSigningForUser(e,t.toStorage()),this.deviceList.emit(h.CryptoEvent.UserCrossSigningUpdated,e)}}}async function v(e,t,n){if(!n.keys)return!1;const i=n.device_id,r=n.user_id,a="ed25519:"+i,l=n.keys[a];if(!l)return o.logger.warn("Device "+r+":"+i+" has no ed25519 key"),!1;const u=n.unsigned||{},d=n.signatures||{};try{await c.verifySignature(e,n,r,i,l)}catch(e){return o.logger.warn("Unable to verify signature on device "+r+":"+i+":"+e),!1}let h;if(i in t){if(h=t[i],h.getFingerprint()!=l)return o.logger.warn("Ed25519 key for device "+r+":"+i+" has changed"),!1}else t[i]=h=new s.DeviceInfo(i);return h.keys=n.keys||{},h.algorithms=n.algorithms||[],h.unsigned=u,h.signatures=d,!0}},70636:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionSetupOperation=t.EncryptionSetupBuilder=void 0;var r=i(n(59713)),o=n(7434),s=n(24369),a=n(3075),c=n(57585),l=n(30095),u=n(62168),d=n(55861);t.EncryptionSetupBuilder=class{constructor(e,t){(0,r.default)(this,"accountDataClientAdapter",void 0),(0,r.default)(this,"crossSigningCallbacks",void 0),(0,r.default)(this,"ssssCryptoCallbacks",void 0),(0,r.default)(this,"crossSigningKeys",void 0),(0,r.default)(this,"keySignatures",void 0),(0,r.default)(this,"keyBackupInfo",void 0),(0,r.default)(this,"sessionBackupPrivateKey",void 0),this.accountDataClientAdapter=new p(e),this.crossSigningCallbacks=new f,this.ssssCryptoCallbacks=new m(t)}addCrossSigningKeys(e,t){this.crossSigningKeys={authUpload:e,keys:t}}addSessionBackup(e){this.keyBackupInfo=e}addSessionBackupPrivateKeyToCache(e){this.sessionBackupPrivateKey=e}addKeySignature(e,t,n){this.keySignatures||(this.keySignatures={});const i=this.keySignatures[e]||{};this.keySignatures[e]=i,i[t]=n}async setAccountData(e,t){await this.accountDataClientAdapter.setAccountData(e,t)}buildOperation(){const e=this.accountDataClientAdapter.values;return new h(e,this.crossSigningKeys,this.keyBackupInfo,this.keySignatures)}async persist(e){if(this.crossSigningKeys){const n=(0,a.createCryptoStoreCacheCallbacks)(e.cryptoStore,e.olmDevice);for(const e of["master","self_signing","user_signing"]){var t;o.logger.log(`Cache ${e} cross-signing private key locally`);const i=this.crossSigningCallbacks.privateKeys.get(e);await(null===(t=n.storeCrossSigningKeyCache)||void 0===t?void 0:t.call(n,e,i))}await e.cryptoStore.doTxn("readwrite",[c.IndexedDBCryptoStore.STORE_ACCOUNT],(t=>{e.cryptoStore.storeCrossSigningKeys(t,this.crossSigningKeys.keys)}))}this.sessionBackupPrivateKey&&await e.storeSessionBackupPrivateKey(this.sessionBackupPrivateKey)}};class h{constructor(e,t,n,i){this.accountData=e,this.crossSigningKeys=t,this.keyBackupInfo=n,this.keySignatures=i}async apply(e){const t=e.baseApis;if(this.crossSigningKeys){var n,i;const r={};for(const[e,t]of Object.entries(this.crossSigningKeys.keys))r[e+"_key"]=t;await(null===(n=(i=this.crossSigningKeys).authUpload)||void 0===n?void 0:n.call(i,(e=>t.uploadDeviceSigningKeys(e,r)))),e.crossSigningInfo.setKeys(this.crossSigningKeys.keys)}if(this.accountData)for(const[e,n]of this.accountData)await t.setAccountData(e,n);this.keySignatures&&await t.uploadKeySignatures(this.keySignatures),this.keyBackupInfo&&(this.keyBackupInfo.version?await t.http.authedRequest(l.Method.Put,"/room_keys/version/"+this.keyBackupInfo.version,void 0,{algorithm:this.keyBackupInfo.algorithm,auth_data:this.keyBackupInfo.auth_data},{prefix:l.ClientPrefix.V3}):await t.http.authedRequest(l.Method.Post,"/room_keys/version",void 0,this.keyBackupInfo,{prefix:l.ClientPrefix.V3}))}}t.EncryptionSetupOperation=h;class p extends d.TypedEventEmitter{constructor(e){super(),this.existingValues=e,(0,r.default)(this,"values",new Map)}getAccountDataFromServer(e){return Promise.resolve(this.getAccountData(e))}getAccountData(e){const t=this.values.get(e);if(t)return t;const n=this.existingValues[e];return n?n.getContent():null}setAccountData(e,t){const n=this.values.get(e);return this.values.set(e,t),Promise.resolve().then((()=>{const i=new s.MatrixEvent({type:e,content:t});return this.emit(u.ClientEvent.AccountData,i,n),{}}))}}class f{constructor(){(0,r.default)(this,"privateKeys",new Map)}getCrossSigningKeyCache(e,t){return this.getCrossSigningKey(e,t)}storeCrossSigningKeyCache(e,t){return this.privateKeys.set(e,t),Promise.resolve()}getCrossSigningKey(e,t){var n;return Promise.resolve(null!==(n=this.privateKeys.get(e))&&void 0!==n?n:null)}saveCrossSigningKeys(e){for(const[t,n]of Object.entries(e))this.privateKeys.set(t,n)}}class m{constructor(e){this.delegateCryptoCallbacks=e,(0,r.default)(this,"privateKeys",new Map)}async getSecretStorageKey({keys:e},t){var n;for(const t of Object.keys(e)){const e=this.privateKeys.get(t);if(e)return[t,e]}if(null!=this&&null!==(n=this.delegateCryptoCallbacks)&&void 0!==n&&n.getSecretStorageKey){const n=await this.delegateCryptoCallbacks.getSecretStorageKey({keys:e},t);if(n){const[e,t]=n;this.privateKeys.set(e,t)}return n}return null}addPrivateKey(e,t,n){var i,r;this.privateKeys.set(e,n),null===(i=this.delegateCryptoCallbacks)||void 0===i||null===(r=i.cacheSecretStorageKey)||void 0===r||r.call(i,e,t,n)}}},72573:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.WITHHELD_MESSAGES=t.OlmDevice=void 0;var r=i(n(59713)),o=n(7434),s=n(57585),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(91994));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function l(e){if(void 0===e)throw new Error("payloadString undefined");if(e.length>49152){const t=new Error("Message too long ("+e.length+" bytes). The maximum for an encrypted message is 49152 bytes.");throw t.data={errcode:"M_TOO_LARGE",error:"Payload too large for encrypted message"},t}}t.OlmDevice=class{constructor(e){this.cryptoStore=e,(0,r.default)(this,"pickleKey","DEFAULT_KEY"),(0,r.default)(this,"deviceCurve25519Key",null),(0,r.default)(this,"deviceEd25519Key",null),(0,r.default)(this,"maxOneTimeKeys",null),(0,r.default)(this,"outboundGroupSessionStore",{}),(0,r.default)(this,"inboundGroupSessionMessageIndexes",{}),(0,r.default)(this,"sessionsInProgress",{}),(0,r.default)(this,"olmPrekeyPromise",Promise.resolve())}static getOlmVersion(){return n.g.Olm.get_library_version()}async init({pickleKey:e,fromExportedDevice:t}={}){let i;const r=new n.g.Olm.Account;try{t?(e&&o.logger.warn("ignoring opts.pickleKey because opts.fromExportedDevice is present."),this.pickleKey=t.pickleKey,await this.initialiseFromExportedDevice(t,r)):(e&&(this.pickleKey=e),await this.initialiseAccount(r)),i=JSON.parse(r.identity_keys()),this.maxOneTimeKeys=r.max_number_of_one_time_keys()}finally{r.free()}this.deviceCurve25519Key=i.curve25519,this.deviceEd25519Key=i.ed25519}async initialiseFromExportedDevice(e,t){await this.cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT,s.IndexedDBCryptoStore.STORE_SESSIONS],(t=>{this.cryptoStore.storeAccount(t,e.pickledAccount),e.sessions.forEach((e=>{const{deviceKey:n,sessionId:i}=e,r={session:e.session,lastReceivedMessageTs:e.lastReceivedMessageTs};this.cryptoStore.storeEndToEndSession(n,i,r,t)}))})),t.unpickle(this.pickleKey,e.pickledAccount)}async initialiseAccount(e){await this.cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT],(t=>{this.cryptoStore.getAccount(t,(n=>{null!==n?e.unpickle(this.pickleKey,n):(e.create(),n=e.pickle(this.pickleKey),this.cryptoStore.storeAccount(t,n))}))}))}getAccount(e,t){this.cryptoStore.getAccount(e,(e=>{const i=new n.g.Olm.Account;try{i.unpickle(this.pickleKey,e),t(i)}finally{i.free()}}))}storeAccount(e,t){this.cryptoStore.storeAccount(e,t.pickle(this.pickleKey))}async export(){const e={pickleKey:this.pickleKey};return await this.cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_ACCOUNT,s.IndexedDBCryptoStore.STORE_SESSIONS],(t=>{this.cryptoStore.getAccount(t,(t=>{e.pickledAccount=t})),e.sessions=[],this.cryptoStore.getAllEndToEndSessions(t,(t=>{e.sessions.push(t)}))})),e}getSession(e,t,n,i){this.cryptoStore.getEndToEndSession(e,t,n,(e=>{this.unpickleSession(e,i)}))}unpickleSession(e,t){const i=new n.g.Olm.Session;try{i.unpickle(this.pickleKey,e.session),t(Object.assign({},e,{session:i}))}finally{i.free()}}saveSession(e,t,n){const i=t.session.session_id(),r=Object.assign(t,{session:t.session.pickle(this.pickleKey)});this.cryptoStore.storeEndToEndSession(e,i,r,n)}getUtility(e){const t=new n.g.Olm.Utility;try{return e(t)}finally{t.free()}}async sign(e){let t;return await this.cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_ACCOUNT],(n=>{this.getAccount(n,(n=>{t=n.sign(e)}))})),t}async getOneTimeKeys(){let e;return await this.cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_ACCOUNT],(t=>{this.getAccount(t,(t=>{e=JSON.parse(t.one_time_keys())}))})),e}maxNumberOfOneTimeKeys(){var e;return null!==(e=this.maxOneTimeKeys)&&void 0!==e?e:-1}async markKeysAsPublished(){await this.cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT],(e=>{this.getAccount(e,(t=>{t.mark_keys_as_published(),this.storeAccount(e,t)}))}))}generateOneTimeKeys(e){return this.cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT],(t=>{this.getAccount(t,(n=>{n.generate_one_time_keys(e),this.storeAccount(t,n)}))}))}async generateFallbackKey(){await this.cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT],(e=>{this.getAccount(e,(t=>{t.generate_fallback_key(),this.storeAccount(e,t)}))}))}async getFallbackKey(){let e;return await this.cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_ACCOUNT],(t=>{this.getAccount(t,(t=>{e=JSON.parse(t.unpublished_fallback_key())}))})),e}async forgetOldFallbackKey(){await this.cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT],(e=>{this.getAccount(e,(t=>{t.forget_old_fallback_key(),this.storeAccount(e,t)}))}))}async createOutboundSession(e,t){let i;return await this.cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT,s.IndexedDBCryptoStore.STORE_SESSIONS],(r=>{this.getAccount(r,(o=>{const s=new n.g.Olm.Session;try{s.create_outbound(o,e,t),i=s.session_id(),this.storeAccount(r,o);const n={session:s,lastReceivedMessageTs:Date.now()};this.saveSession(e,n,r)}finally{s.free()}}))}),o.logger.withPrefix("[createOutboundSession]")),i}async createInboundSession(e,t,i){if(0!==t)throw new Error("Need messageType == 0 to create inbound session");let r;return await this.cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_ACCOUNT,s.IndexedDBCryptoStore.STORE_SESSIONS],(o=>{this.getAccount(o,(s=>{const a=new n.g.Olm.Session;try{a.create_inbound_from(s,e,i),s.remove_one_time_keys(a),this.storeAccount(o,s);const n=a.decrypt(t,i),c={session:a,lastReceivedMessageTs:Date.now()};this.saveSession(e,c,o),r={payload:n,session_id:a.session_id()}}finally{a.free()}}))}),o.logger.withPrefix("[createInboundSession]")),r}async getSessionIdsForDevice(e){const t=o.logger.withPrefix("[getSessionIdsForDevice]");if(e in this.sessionsInProgress){t.debug(`Waiting for Olm session for ${e} to be created`);try{await this.sessionsInProgress[e]}catch(e){}}let n;return await this.cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_SESSIONS],(t=>{this.cryptoStore.getEndToEndSessions(e,t,(e=>{n=Object.keys(e)}))}),t),n}async getSessionIdForDevice(e,t=!1,n){const i=await this.getSessionInfoForDevice(e,t,n);if(0===i.length)return null;let r=0;for(let e=1;e<i.length;e++){const t=i[e],n=void 0===t.lastReceivedMessageTs?0:t.lastReceivedMessageTs,o=i[r],s=void 0===o.lastReceivedMessageTs?0:o.lastReceivedMessageTs;(n>s||n===s&&t.sessionId<o.sessionId)&&(r=e)}return i[r].sessionId}async getSessionInfoForDevice(e,t=!1,n=o.logger){if(n=n.withPrefix("[getSessionInfoForDevice]"),e in this.sessionsInProgress&&!t){n.debug(`Waiting for Olm session for ${e} to be created`);try{await this.sessionsInProgress[e]}catch(e){}}const i=[];return await this.cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_SESSIONS],(t=>{this.cryptoStore.getEndToEndSessions(e,t,(e=>{const t=Object.keys(e).sort();for(const n of t)this.unpickleSession(e[n],(e=>{i.push({lastReceivedMessageTs:e.lastReceivedMessageTs,hasReceivedMessage:e.session.has_received_message(),sessionId:n})}))}))}),n),i}async encryptMessage(e,t,n){let i;return l(n),await this.cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_SESSIONS],(r=>{this.getSession(e,t,r,(s=>{const a=s.session.describe();o.logger.log("encryptMessage: Olm Session ID "+t+" to "+e+": "+a),i=s.session.encrypt(n),this.saveSession(e,s,r)}))}),o.logger.withPrefix("[encryptMessage]")),i}async decryptMessage(e,t,n,i){let r;return await this.cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_SESSIONS],(s=>{this.getSession(e,t,s,(a=>{const c=a.session.describe();o.logger.log("decryptMessage: Olm Session ID "+t+" from "+e+": "+c),r=a.session.decrypt(n,i),a.lastReceivedMessageTs=Date.now(),this.saveSession(e,a,s)}))}),o.logger.withPrefix("[decryptMessage]")),r}async matchesSession(e,t,n,i){if(0!==n)return!1;let r;return await this.cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_SESSIONS],(n=>{this.getSession(e,t,n,(e=>{r=e.session.matches_inbound(i)}))}),o.logger.withPrefix("[matchesSession]")),r}async recordSessionProblem(e,t,n){o.logger.info(`Recording problem on olm session with ${e} of type ${t}. Recreating: ${n}`),await this.cryptoStore.storeEndToEndSessionProblem(e,t,n)}sessionMayHaveProblems(e,t){return this.cryptoStore.getEndToEndSessionProblem(e,t)}filterOutNotifiedErrorDevices(e){return this.cryptoStore.filterOutNotifiedErrorDevices(e)}saveOutboundGroupSession(e){this.outboundGroupSessionStore[e.session_id()]=e.pickle(this.pickleKey)}getOutboundGroupSession(e,t){const i=this.outboundGroupSessionStore[e];if(void 0===i)throw new Error("Unknown outbound group session "+e);const r=new n.g.Olm.OutboundGroupSession;try{return r.unpickle(this.pickleKey,i),t(r)}finally{r.free()}}createOutboundGroupSession(){const e=new n.g.Olm.OutboundGroupSession;try{return e.create(),this.saveOutboundGroupSession(e),e.session_id()}finally{e.free()}}encryptGroupMessage(e,t){return o.logger.log(`encrypting msg with megolm session ${e}`),l(t),this.getOutboundGroupSession(e,(e=>{const n=e.encrypt(t);return this.saveOutboundGroupSession(e),n}))}getOutboundGroupSessionKey(e){return this.getOutboundGroupSession(e,(function(e){return{chain_index:e.message_index(),key:e.session_key()}}))}unpickleInboundGroupSession(e,t){const i=new n.g.Olm.InboundGroupSession;try{return i.unpickle(this.pickleKey,e.session),t(i)}finally{i.free()}}getInboundGroupSession(e,t,n,i,r){this.cryptoStore.getEndToEndInboundGroupSession(t,n,i,((t,n)=>{if(null!==t){if(null!==e&&e!==t.room_id)throw new Error("Mismatched room_id for inbound group session (expected "+t.room_id+", was "+e+")");this.unpickleInboundGroupSession(t,(e=>{r(e,t,n)}))}else r(null,null,n)}))}async addInboundGroupSession(e,t,i,r,a,c,l,u={}){await this.cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD,s.IndexedDBCryptoStore.STORE_SHARED_HISTORY_INBOUND_GROUP_SESSIONS],(s=>{this.getInboundGroupSession(e,t,r,s,((d,h)=>{const p=new n.g.Olm.InboundGroupSession;try{if(l?p.import_session(a):p.create(a),r!=p.session_id())throw new Error("Mismatched group session ID from senderKey: "+t);if(d&&(o.logger.log(`Update for megolm session ${t}|${r}`),d.first_known_index()<=p.first_known_index())){if(!h.untrusted||u.untrusted)return void o.logger.log(`Keeping existing megolm session ${t}|${r}`);if(d.first_known_index()<p.first_known_index())return void(d.export_session(p.first_known_index())===p.export_session(p.first_known_index())?(o.logger.info(`Upgrading trust of existing megolm session ${t}|${r} based on newly-received trusted session`),h.untrusted=!1,this.cryptoStore.storeEndToEndInboundGroupSession(t,r,h,s)):o.logger.warn(`Newly-received megolm session ${t}|$sessionId} does not match existing session! Keeping existing session`))}o.logger.info(`Storing megolm session ${t}|${r} with first index `+p.first_known_index());const n=Object.assign({},u,{room_id:e,session:p.pickle(this.pickleKey),keysClaimed:c,forwardingCurve25519KeyChain:i});this.cryptoStore.storeEndToEndInboundGroupSession(t,r,n,s),!d&&u.sharedHistory&&this.cryptoStore.addSharedHistoryInboundGroupSession(e,t,r,s)}finally{p.free()}}))}),o.logger.withPrefix("[addInboundGroupSession]"))}async addInboundGroupSessionWithheld(e,t,n,i,r){await this.cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],(o=>{this.cryptoStore.storeEndToEndInboundGroupSessionWithheld(t,n,{room_id:e,code:i,reason:r},o)}))}async decryptGroupMessage(e,t,n,i,r,c){let l,u=null;if(await this.cryptoStore.doTxn("readwrite",[s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],(o=>{this.getInboundGroupSession(e,t,n,o,((e,s,h)=>{if(null===e||null===s)return h&&(l=new a.DecryptionError("MEGOLM_UNKNOWN_INBOUND_SESSION_ID",d(h),{session:t+"|"+n})),void(u=null);let p;try{p=e.decrypt(i)}catch(e){return void(l="OLM.UNKNOWN_MESSAGE_INDEX"===(null==e?void 0:e.message)&&h?new a.DecryptionError("MEGOLM_UNKNOWN_INBOUND_SESSION_ID",d(h),{session:t+"|"+n}):e)}let f=p.plaintext;if(void 0===f)f=p;else{const e=t+"|"+n+"|"+p.message_index;if(e in this.inboundGroupSessionMessageIndexes){const t=this.inboundGroupSessionMessageIndexes[e];if(t.id!==r||t.timestamp!==c)return void(l=new Error("Duplicate message index, possible replay attack: "+e))}this.inboundGroupSessionMessageIndexes[e]={id:r,timestamp:c}}s.session=e.pickle(this.pickleKey),this.cryptoStore.storeEndToEndInboundGroupSession(t,n,s,o),u={result:f,keysClaimed:s.keysClaimed||{},senderKey:t,forwardingCurve25519KeyChain:s.forwardingCurve25519KeyChain||[],untrusted:!!s.untrusted}}))}),o.logger.withPrefix("[decryptGroupMessage]")),l)throw l;return u}async hasInboundSessionKeys(e,t,n){let i;return await this.cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],(r=>{this.cryptoStore.getEndToEndInboundGroupSession(t,n,r,(r=>{null!==r?e!==r.room_id?(o.logger.warn(`requested keys for inbound group session ${t}|${n}, with incorrect room_id (expected ${r.room_id}, was ${e})`),i=!1):i=!0:i=!1}))}),o.logger.withPrefix("[hasInboundSessionKeys]")),i}async getInboundGroupSessionKey(e,t,n,i){let r=null;return await this.cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,s.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],(o=>{this.getInboundGroupSession(e,t,n,o,((e,t)=>{if(null===e||null===t)return void(r=null);void 0===i&&(i=e.first_known_index());const n=e.export_session(i),o=(t.keysClaimed||{}).ed25519||null,s=t.forwardingCurve25519KeyChain||[],a="untrusted"in t?t.untrusted:s.length>0;r={chain_index:i,key:n,forwarding_curve25519_key_chain:s,sender_claimed_ed25519_key:o,shared_history:t.sharedHistory||!1,untrusted:a}}))}),o.logger.withPrefix("[getInboundGroupSessionKey]")),r}exportInboundGroupSession(e,t,n){return this.unpickleInboundGroupSession(n,(i=>{const r=i.first_known_index();return{sender_key:e,sender_claimed_keys:n.keysClaimed,room_id:n.room_id,session_id:t,session_key:i.export_session(r),forwarding_curve25519_key_chain:n.forwardingCurve25519KeyChain||[],first_known_index:i.first_known_index(),"org.matrix.msc3061.shared_history":n.sharedHistory||!1}}))}async getSharedHistoryInboundGroupSessions(e){let t;return await this.cryptoStore.doTxn("readonly",[s.IndexedDBCryptoStore.STORE_SHARED_HISTORY_INBOUND_GROUP_SESSIONS],(n=>{t=this.cryptoStore.getSharedHistoryInboundGroupSessions(e,n)}),o.logger.withPrefix("[getSharedHistoryInboundGroupSessionsForRoom]")),t}verifySignature(e,t,n){this.getUtility((function(i){i.ed25519_verify(e,t,n)}))}};const u={"m.unverified":"The sender has disabled encrypting to unverified devices.","m.blacklisted":"The sender has blocked you.","m.unauthorised":"You are not authorised to read the message.","m.no_olm":"Unable to establish a secure channel."};function d(e){return e.code&&e.code in u?u[e.code]:e.reason?e.reason:"decryption key withheld"}t.WITHHELD_MESSAGES=u},66617:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RoomKeyRequestState=t.OutgoingRoomKeyRequestManager=void 0;var r=i(n(59713)),o=n(7434),s=n(42481);let a;function c(e){return e.room_id+" / "+e.session_id}function l(e){return`[${e.map((e=>`${e.userId}:${e.deviceId}`)).join(",")}]`}t.RoomKeyRequestState=a,function(e){e[e.Unsent=0]="Unsent",e[e.Sent=1]="Sent",e[e.CancellationPending=2]="CancellationPending",e[e.CancellationPendingAndWillResend=3]="CancellationPendingAndWillResend"}(a||(t.RoomKeyRequestState=a={})),t.OutgoingRoomKeyRequestManager=class{constructor(e,t,n){this.baseApis=e,this.deviceId=t,this.cryptoStore=n,(0,r.default)(this,"sendOutgoingRoomKeyRequestsTimer",void 0),(0,r.default)(this,"sendOutgoingRoomKeyRequestsRunning",!1),(0,r.default)(this,"clientRunning",!0)}stop(){o.logger.log("stopping OutgoingRoomKeyRequestManager"),this.clientRunning=!1}sendQueuedRequests(){this.startTimer()}async queueRoomKeyRequest(e,t,n=!1){const i=await this.cryptoStore.getOutgoingRoomKeyRequest(e);if(i)switch(i.state){case a.CancellationPendingAndWillResend:case a.Unsent:return;case a.CancellationPending:{const e=n?a.CancellationPendingAndWillResend:a.Sent;await this.cryptoStore.updateOutgoingRoomKeyRequest(i.requestId,a.CancellationPending,{state:e,cancellationTxnId:this.baseApis.makeTxnId()});break}case a.Sent:if(n){const r=a.CancellationPendingAndWillResend,s=await this.cryptoStore.updateOutgoingRoomKeyRequest(i.requestId,a.Sent,{state:r,cancellationTxnId:this.baseApis.makeTxnId(),requestTxnId:this.baseApis.makeTxnId()});if(!s)return this.queueRoomKeyRequest(e,t,n);try{await this.sendOutgoingRoomKeyRequestCancellation(s,!0)}catch(e){o.logger.error("Error sending room key request cancellation; will retry later.",e)}}break;default:throw new Error("unhandled state: "+i.state)}else await this.cryptoStore.getOrAddOutgoingRoomKeyRequest({requestBody:e,recipients:t,requestId:this.baseApis.makeTxnId(),state:a.Unsent})}cancelRoomKeyRequest(e){return this.cryptoStore.getOutgoingRoomKeyRequest(e).then((t=>{if(t)switch(t.state){case a.CancellationPending:case a.CancellationPendingAndWillResend:return;case a.Unsent:return o.logger.log("deleting unnecessary room key request for "+c(e)),this.cryptoStore.deleteOutgoingRoomKeyRequest(t.requestId,a.Unsent);case a.Sent:return this.cryptoStore.updateOutgoingRoomKeyRequest(t.requestId,a.Sent,{state:a.CancellationPending,cancellationTxnId:this.baseApis.makeTxnId()}).then((t=>{t?this.sendOutgoingRoomKeyRequestCancellation(t).catch((e=>{o.logger.error("Error sending room key request cancellation; will retry later.",e),this.startTimer()})):o.logger.log("Tried to cancel room key request for "+c(e)+" but it was already cancelled in another tab")}));default:throw new Error("unhandled state: "+t.state)}}))}getOutgoingSentRoomKeyRequest(e,t){return this.cryptoStore.getOutgoingRoomKeyRequestsByTarget(e,t,[a.Sent])}async cancelAndResendAllOutgoingRequests(){const e=await this.cryptoStore.getAllOutgoingRoomKeyRequestsByState(a.Sent);return Promise.all(e.map((({requestBody:e,recipients:t})=>this.queueRoomKeyRequest(e,t,!0))))}startTimer(){this.sendOutgoingRoomKeyRequestsTimer||(this.sendOutgoingRoomKeyRequestsTimer=setTimeout((()=>{if(this.sendOutgoingRoomKeyRequestsRunning)throw new Error("RoomKeyRequestSend already in progress!");this.sendOutgoingRoomKeyRequestsRunning=!0,this.sendOutgoingRoomKeyRequests().finally((()=>{this.sendOutgoingRoomKeyRequestsRunning=!1})).catch((e=>{o.logger.warn(`error in OutgoingRoomKeyRequestManager: ${e}`)}))}),500))}async sendOutgoingRoomKeyRequests(){if(!this.clientRunning)return void(this.sendOutgoingRoomKeyRequestsTimer=void 0);const e=await this.cryptoStore.getOutgoingRoomKeyRequestByState([a.CancellationPending,a.CancellationPendingAndWillResend,a.Unsent]);if(e)try{switch(e.state){case a.Unsent:await this.sendOutgoingRoomKeyRequest(e);break;case a.CancellationPending:await this.sendOutgoingRoomKeyRequestCancellation(e);break;case a.CancellationPendingAndWillResend:await this.sendOutgoingRoomKeyRequestCancellation(e,!0)}return this.sendOutgoingRoomKeyRequests()}catch(e){o.logger.error("Error sending room key request; will retry later.",e),this.sendOutgoingRoomKeyRequestsTimer=void 0}else this.sendOutgoingRoomKeyRequestsTimer=void 0}sendOutgoingRoomKeyRequest(e){o.logger.log(`Requesting keys for ${c(e.requestBody)} from ${l(e.recipients)}(id ${e.requestId})`);const t={action:"request",requesting_device_id:this.deviceId,request_id:e.requestId,body:e.requestBody};return this.sendMessageToDevices(t,e.recipients,e.requestTxnId||e.requestId).then((()=>this.cryptoStore.updateOutgoingRoomKeyRequest(e.requestId,a.Unsent,{state:a.Sent})))}sendOutgoingRoomKeyRequestCancellation(e,t=!1){o.logger.log(`Sending cancellation for key request for ${c(e.requestBody)} to ${l(e.recipients)} (cancellation id ${e.cancellationTxnId})`);const n={action:"request_cancellation",requesting_device_id:this.deviceId,request_id:e.requestId};return this.sendMessageToDevices(n,e.recipients,e.cancellationTxnId).then((()=>t?this.cryptoStore.updateOutgoingRoomKeyRequest(e.requestId,a.CancellationPendingAndWillResend,{state:a.Unsent}):this.cryptoStore.deleteOutgoingRoomKeyRequest(e.requestId,a.CancellationPending)))}sendMessageToDevices(e,t,n){const i={};for(const n of t)i[n.userId]||(i[n.userId]={}),i[n.userId][n.deviceId]=e;return this.baseApis.sendToDevice(s.EventType.RoomKeyRequest,i,n)}}},40635:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RoomList=void 0;var r=i(n(59713)),o=n(57585);t.RoomList=class{constructor(e){this.cryptoStore=e,(0,r.default)(this,"roomEncryption",{})}async init(){await this.cryptoStore.doTxn("readwrite",[o.IndexedDBCryptoStore.STORE_ROOMS],(e=>{this.cryptoStore.getEndToEndRooms(e,(e=>{this.roomEncryption=e}))}))}getRoomEncryption(e){return this.roomEncryption[e]||null}isRoomEncrypted(e){return Boolean(this.getRoomEncryption(e))}async setRoomEncryption(e,t){this.roomEncryption[e]=t,await this.cryptoStore.doTxn("readwrite",[o.IndexedDBCryptoStore.STORE_ROOMS],(n=>{this.cryptoStore.storeEndToEndRoom(e,t,n)}))}}},44823:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SecretStorage=t.SECRET_STORAGE_ALGORITHM_V1_AES=void 0;var r=i(n(59713)),o=n(7434),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(32772)),a=n(98401),c=n(2611),l=n(62168),u=n(3102);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const h="m.secret_storage.v1.aes-hmac-sha2";t.SECRET_STORAGE_ALGORITHM_V1_AES=h,t.SecretStorage=class{constructor(e,t,n){this.accountDataAdapter=e,this.cryptoCallbacks=t,this.baseApis=n,(0,r.default)(this,"requests",new Map)}async getDefaultKeyId(){const e=await this.accountDataAdapter.getAccountDataFromServer("m.secret_storage.default_key");return e?e.key:null}setDefaultKeyId(e){return new Promise(((t,n)=>{const i=n=>{"m.secret_storage.default_key"===n.getType()&&n.getContent().key===e&&(this.accountDataAdapter.removeListener(l.ClientEvent.AccountData,i),t())};this.accountDataAdapter.on(l.ClientEvent.AccountData,i),this.accountDataAdapter.setAccountData("m.secret_storage.default_key",{key:e}).catch((e=>{this.accountDataAdapter.removeListener(l.ClientEvent.AccountData,i),n(e)}))}))}async addKey(e,t={},n){const i={algorithm:e};if(t.name&&(i.name=t.name),e!==h)throw new Error(`Unknown key algorithm ${e}`);if(t.passphrase&&(i.passphrase=t.passphrase),t.key){const{iv:e,mac:n}=await(0,c.calculateKeyCheck)(t.key);i.iv=e,i.mac=n}if(!n)do{n=(0,a.randomString)(32)}while(await this.accountDataAdapter.getAccountDataFromServer(`m.secret_storage.key.${n}`));return await this.accountDataAdapter.setAccountData(`m.secret_storage.key.${n}`,i),{keyId:n,keyInfo:i}}async getKey(e){if(e||(e=await this.getDefaultKeyId()),!e)return null;const t=await this.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key."+e);return t?[e,t]:null}async hasKey(e){return Boolean(await this.getKey(e))}async checkKey(e,t){if(t.algorithm===h){if(t.mac){const{mac:n}=await(0,c.calculateKeyCheck)(e,t.iv);return t.mac.replace(/=+$/g,"")===n.replace(/=+$/g,"")}return!0}throw new Error("Unknown algorithm")}async store(e,t,n){const i={};if(!n){const e=await this.getDefaultKeyId();if(!e)throw new Error("No keys specified and no default key present");n=[e]}if(0===n.length)throw new Error("Zero keys given to encrypt with!");for(const r of n){const n=await this.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key."+r);if(!n)throw new Error("Unknown key: "+r);if(n.algorithm===h){const o={[r]:n},[,s]=await this.getSecretStorageKey(o,e);i[r]=await s.encrypt(t)}else o.logger.warn("unknown algorithm for secret storage key "+r+": "+n.algorithm)}await this.accountDataAdapter.setAccountData(e,{encrypted:i})}async get(e){const t=await this.accountDataAdapter.getAccountDataFromServer(e);if(!t)return;if(!t.encrypted)throw new Error("Content is not encrypted!");const n={};for(const e of Object.keys(t.encrypted)){const i=await this.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key."+e),r=t.encrypted[e];i.algorithm===h&&r.iv&&r.ciphertext&&r.mac&&(n[e]=i)}if(0===Object.keys(n).length)throw new Error(`Could not decrypt ${e} because none of the keys it is encrypted with are for a supported algorithm`);let i,r;try{[i,r]=await this.getSecretStorageKey(n,e);const o=t.encrypted[i];return o.passthrough?(0,s.encodeBase64)(r.get_private_key()):r.decrypt(o)}finally{r&&r.free&&r.free()}}async isStored(e){const t=await this.accountDataAdapter.getAccountDataFromServer(e);if(null==t||!t.encrypted)return null;const n={};for(const e of Object.keys(t.encrypted)){const i=await this.accountDataAdapter.getAccountDataFromServer("m.secret_storage.key."+e);if(!i)continue;const r=t.encrypted[e];i.algorithm===h&&r.iv&&r.ciphertext&&r.mac&&(n[e]=i)}return Object.keys(n).length?n:null}request(e,t){const n=this.baseApis.makeTxnId(),i=(0,u.defer)();this.requests.set(n,{name:e,devices:t,deferred:i});const r={name:e,action:"request",requesting_device_id:this.baseApis.deviceId,request_id:n},s={};for(const e of t)s[e]=r;return o.logger.info(`Request secret ${e} from ${t}, id ${n}`),this.baseApis.sendToDevice("m.secret.request",{[this.baseApis.getUserId()]:s}),{requestId:n,promise:i.promise,cancel:e=>{const r={action:"request_cancellation",requesting_device_id:this.baseApis.deviceId,request_id:n},o={};for(const e of t)o[e]=r;this.baseApis.sendToDevice("m.secret.request",{[this.baseApis.getUserId()]:o}),i.reject(new Error(e||"Cancelled"))}}}async onRequestReceived(e){const t=e.getSender(),n=e.getContent();if(t!==this.baseApis.getUserId()||!(n.name&&n.action&&n.requesting_device_id&&n.request_id))return;const i=n.requesting_device_id;if("request_cancellation"===n.action);else if("request"===n.action){if(i===this.baseApis.deviceId)return;if(o.logger.info("received request for secret ("+t+", "+i+", "+n.request_id+")"),!this.cryptoCallbacks.onSecretRequested)return;const e=await this.cryptoCallbacks.onSecretRequested(t,i,n.request_id,n.name,this.baseApis.checkDeviceTrust(t,i));if(e){o.logger.info(`Preparing ${n.name} secret for ${i}`);const r={type:"m.secret.send",content:{request_id:n.request_id,secret:e}},a={algorithm:s.OLM_ALGORITHM,sender_key:this.baseApis.crypto.olmDevice.deviceCurve25519Key,ciphertext:{}};await s.ensureOlmSessionsForDevices(this.baseApis.crypto.olmDevice,this.baseApis,{[t]:[this.baseApis.getStoredDevice(t,i)]}),await s.encryptMessageForDevice(a.ciphertext,this.baseApis.getUserId(),this.baseApis.deviceId,this.baseApis.crypto.olmDevice,t,this.baseApis.getStoredDevice(t,i),r);const c={[t]:{[i]:a}};o.logger.info(`Sending ${n.name} secret for ${i}`),this.baseApis.sendToDevice("m.room.encrypted",c)}else o.logger.info(`Request denied for ${n.name} secret for ${i}`)}}onSecretReceived(e){if(e.getSender()!==this.baseApis.getUserId())return;if(!s.isOlmEncrypted(e))return void o.logger.error("secret event not properly encrypted");const t=e.getContent();if(this.baseApis.crypto.deviceList.getUserByIdentityKey(s.OLM_ALGORITHM,e.getSenderKey()||"")!==e.getSender())return void o.logger.error("sending device does not belong to the user it claims to be from");o.logger.log("got secret share for request",t.request_id);const n=this.requests.get(t.request_id);if(n){const i=this.baseApis.crypto.deviceList.getDeviceByIdentityKey(s.OLM_ALGORITHM,e.getSenderKey());if(!i)return void o.logger.log("secret share from unknown device with key",e.getSenderKey());if(!n.devices.includes(i.deviceId))return void o.logger.log("unsolicited secret share from device",i.deviceId);if(!this.baseApis.crypto.checkDeviceInfoTrust(e.getSender(),i).isVerified())return void o.logger.log("secret share from unverified device");o.logger.log(`Successfully received secret ${n.name} from ${i.deviceId}`),n.deferred.resolve(t.secret)}}async getSecretStorageKey(e,t){if(!this.cryptoCallbacks.getSecretStorageKey)throw new Error("No getSecretStorageKey callback supplied");const n=await this.cryptoCallbacks.getSecretStorageKey({keys:e},t);if(!n)throw new Error("getSecretStorageKey callback returned falsey");if(n.length<2)throw new Error("getSecretStorageKey callback returned invalid data");const[i,r]=n;if(!e[i])throw new Error("App returned unknown key from getSecretStorageKey!");if(e[i].algorithm===h)return[i,{encrypt:function(e){return(0,c.encryptAES)(e,r,t)},decrypt:function(e){return(0,c.decryptAES)(e,r,t)}}];throw new Error("Unknown key type: "+e[i].algorithm)}}},2611:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateKeyCheck=function(e,t){return s("\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0",e,"",t)},t.decryptAES=async function(e,t,n){const[o,s]=await a(t,n),c=(0,i.decodeBase64)(e.ciphertext);if(!await r.subtleCrypto.verify({name:"HMAC"},s,(0,i.decodeBase64)(e.mac),c))throw new Error(`Error decrypting secret ${n}: bad MAC`);const l=await r.subtleCrypto.decrypt({name:"AES-CTR",counter:(0,i.decodeBase64)(e.iv),length:64},o,c);return(new TextDecoder).decode(new Uint8Array(l))},t.encryptAES=s;var i=n(32772),r=n(39126);const o=new Uint8Array(8);async function s(e,t,n,o){let s;o?s=(0,i.decodeBase64)(o):(s=new Uint8Array(16),r.crypto.getRandomValues(s),s[8]&=127);const[c,l]=await a(t,n),u=(new r.TextEncoder).encode(e),d=await r.subtleCrypto.encrypt({name:"AES-CTR",counter:s,length:64},c,u),h=await r.subtleCrypto.sign({name:"HMAC"},l,d);return{iv:(0,i.encodeBase64)(s),ciphertext:(0,i.encodeBase64)(d),mac:(0,i.encodeBase64)(h)}}async function a(e,t){const n=await r.subtleCrypto.importKey("raw",e,{name:"HKDF"},!1,["deriveBits"]),i=await r.subtleCrypto.deriveBits({name:"HKDF",salt:o,info:(new r.TextEncoder).encode(t),hash:"SHA-256"},n,512),s=i.slice(0,32),a=i.slice(32),c=r.subtleCrypto.importKey("raw",s,{name:"AES-CTR"},!1,["encrypt","decrypt"]),l=r.subtleCrypto.importKey("raw",a,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign","verify"]);return Promise.all([c,l])}},21897:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownDeviceError=t.EncryptionAlgorithm=t.ENCRYPTION_CLASSES=t.DecryptionError=t.DecryptionAlgorithm=t.DECRYPTION_CLASSES=void 0,t.registerAlgorithm=function(e,t,n){o.set(e,t),s.set(e,n)};var r=i(n(59713));const o=new Map;t.ENCRYPTION_CLASSES=o;const s=new Map;t.DECRYPTION_CLASSES=s,t.EncryptionAlgorithm=class{constructor(e){(0,r.default)(this,"userId",void 0),(0,r.default)(this,"deviceId",void 0),(0,r.default)(this,"crypto",void 0),(0,r.default)(this,"olmDevice",void 0),(0,r.default)(this,"baseApis",void 0),(0,r.default)(this,"roomId",void 0),this.userId=e.userId,this.deviceId=e.deviceId,this.crypto=e.crypto,this.olmDevice=e.olmDevice,this.baseApis=e.baseApis,this.roomId=e.roomId}prepareToEncrypt(e){}onRoomMembership(e,t,n){}},t.DecryptionAlgorithm=class{constructor(e){(0,r.default)(this,"userId",void 0),(0,r.default)(this,"crypto",void 0),(0,r.default)(this,"olmDevice",void 0),(0,r.default)(this,"baseApis",void 0),(0,r.default)(this,"roomId",void 0),this.userId=e.userId,this.crypto=e.crypto,this.olmDevice=e.olmDevice,this.baseApis=e.baseApis,this.roomId=e.roomId}async onRoomKeyEvent(e){}async importRoomKey(e,t){}hasKeysForKeyRequest(e){return Promise.resolve(!1)}shareKeysWithDevice(e){throw new Error("shareKeysWithDevice not supported for this DecryptionAlgorithm")}async retryDecryptionFromSender(e){return!1}};class a extends Error{constructor(e,t,n){super(t),this.code=e,(0,r.default)(this,"detailedString",void 0),this.code=e,this.name="DecryptionError",this.detailedString=function(e,t){let n=e.name+"[msg: "+e.message;return t&&(n+=", "+Object.keys(t).map((e=>e+": "+t[e])).join(", ")),n+="]",n}(this,n)}}t.DecryptionError=a;class c extends Error{constructor(e,t,n){super(e),this.devices=t,this.event=n,this.name="UnknownDeviceError",this.devices=t}}t.UnknownDeviceError=c},91994:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(23072),n(17125);var i=n(21897);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},17125:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isRoomSharedHistory=h;var r=i(n(59713)),o=n(7434),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(32772)),a=n(21897),c=n(72573),l=n(42481),u=n(66617);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e){var t,n;const i=null==e||null===(t=e.currentState)||void 0===t?void 0:t.getStateEvents("m.room.history_visibility",""),r=null==i||null===(n=i.getContent())||void 0===n?void 0:n.history_visibility;return["world_readable","shared"].includes(r)}class p{constructor(e,t=!1){this.sessionId=e,this.sharedHistory=t,(0,r.default)(this,"useCount",0),(0,r.default)(this,"creationTime",void 0),(0,r.default)(this,"sharedWithDevices",{}),(0,r.default)(this,"blockedDevicesNotified",{}),this.creationTime=(new Date).getTime()}needsRotation(e,t){const n=(new Date).getTime()-this.creationTime;return(this.useCount>=e||n>=t)&&(o.logger.log("Rotating megolm session after "+this.useCount+" messages, "+n+"ms"),!0)}markSharedWithDevice(e,t,n,i){this.sharedWithDevices[e]||(this.sharedWithDevices[e]={}),this.sharedWithDevices[e][t]={deviceKey:n,messageIndex:i}}markNotifiedBlockedDevice(e,t){this.blockedDevicesNotified[e]||(this.blockedDevicesNotified[e]={}),this.blockedDevicesNotified[e][t]=!0}sharedWithTooManyDevices(e){for(const t in this.sharedWithDevices)if(this.sharedWithDevices.hasOwnProperty(t)){if(!e.hasOwnProperty(t))return o.logger.log("Starting new megolm session because we shared with "+t),!0;for(const n in this.sharedWithDevices[t])if(this.sharedWithDevices[t].hasOwnProperty(n)&&!e[t].hasOwnProperty(n))return o.logger.log("Starting new megolm session because we shared with "+t+":"+n),!0}return!1}}class f extends a.EncryptionAlgorithm{constructor(e){var t,n,i,o;super(e),(0,r.default)(this,"setupPromise",Promise.resolve(null)),(0,r.default)(this,"outboundSessions",{}),(0,r.default)(this,"sessionRotationPeriodMsgs",void 0),(0,r.default)(this,"sessionRotationPeriodMs",void 0),(0,r.default)(this,"encryptionPreparation",void 0),(0,r.default)(this,"roomId",void 0),this.roomId=e.roomId,this.sessionRotationPeriodMsgs=null!==(t=null===(n=e.config)||void 0===n?void 0:n.rotation_period_msgs)&&void 0!==t?t:100,this.sessionRotationPeriodMs=null!==(i=null===(o=e.config)||void 0===o?void 0:o.rotation_period_ms)&&void 0!==i?i:6048e5}async ensureOutboundSession(e,t,n,i=!1){const r=this.setupPromise.then((async r=>{const s=h(e),a=await this.prepareSession(t,s,r);try{await this.shareSession(t,s,i,n,a)}catch(e){o.logger.error(`Failed to ensure outbound session in ${this.roomId}`,e)}return a}));return r.catch((e=>{o.logger.error(`Failed to setup outbound session in ${this.roomId}`,e)})),this.setupPromise=r,r}async prepareSession(e,t,n){var i,r;return n&&t!==n.sharedHistory&&(n=null),null!==(i=n)&&void 0!==i&&i.needsRotation(this.sessionRotationPeriodMsgs,this.sessionRotationPeriodMs)&&(o.logger.log("Starting new megolm session because we need to rotate."),n=null),null!==(r=n)&&void 0!==r&&r.sharedWithTooManyDevices(e)&&(n=null),n||(o.logger.log(`Starting new megolm session for room ${this.roomId}`),n=await this.prepareNewSession(t),o.logger.log(`Started new megolm session ${n.sessionId} for room ${this.roomId}`),this.outboundSessions[n.sessionId]=n),n}async shareSession(e,t,n,i,r){const a={};for(const[t,n]of Object.entries(e))for(const[e,i]of Object.entries(n))i.getIdentityKey()!=this.olmDevice.deviceCurve25519Key&&(r.sharedWithDevices[t]&&void 0!==r.sharedWithDevices[t][e]||(a[t]=a[t]||[],a[t].push(i)));const c=this.olmDevice.getOutboundGroupSessionKey(r.sessionId),l={type:"m.room_key",content:{algorithm:s.MEGOLM_ALGORITHM,room_id:this.roomId,session_id:r.sessionId,session_key:c.key,chain_index:c.chain_index,"org.matrix.msc3061.shared_history":t}},[u,d]=await s.getExistingOlmSessions(this.olmDevice,this.baseApis,a);await Promise.all([(async()=>{o.logger.debug(`Sharing keys with existing Olm sessions in ${this.roomId}`,d),await this.shareKeyWithOlmSessions(r,c,l,d),o.logger.debug(`Shared keys with existing Olm sessions in ${this.roomId}`)})(),(async()=>{o.logger.debug(`Sharing keys (start phase 1) with new Olm sessions in ${this.roomId}`,u);const e=[],t=Date.now(),i=[];await this.shareKeyWithDevices(r,c,l,u,e,n?1e4:2e3,i),o.logger.debug(`Shared keys (end phase 1) with new Olm sessions in ${this.roomId}`),!n&&Date.now()-t<1e4?(async()=>{const t={},n=new Set;for(const e of i)n.add(e);const s=[];for(const{userId:i,deviceInfo:r}of e){const e=i.slice(i.indexOf(":")+1);n.has(e)?(t[i]=t[i]||[],t[i].push(r)):s.push({userId:i,deviceInfo:r})}o.logger.debug(`Sharing keys (start phase 2) with new Olm sessions in ${this.roomId}`),await this.shareKeyWithDevices(r,c,l,t,s,3e4),o.logger.debug(`Shared keys (end phase 2) with new Olm sessions in ${this.roomId}`),await this.notifyFailedOlmDevices(r,c,s)})():await this.notifyFailedOlmDevices(r,c,e),o.logger.debug(`Shared keys (all phases done) with new Olm sessions in ${this.roomId}`)})(),(async()=>{o.logger.debug(`There are ${Object.entries(i).length} blocked devices in ${this.roomId}`,Object.entries(i)),o.logger.debug(`Notifying newly blocked devices in ${this.roomId}`);const e={};let t=0;for(const[n,o]of Object.entries(i))for(const[i,s]of Object.entries(o))r.blockedDevicesNotified[n]&&void 0!==r.blockedDevicesNotified[n][i]||(e[n]=e[n]||{},e[n][i]={device:s},t++);await this.notifyBlockedDevices(r,e),o.logger.debug(`Notified ${t} newly blocked devices in ${this.roomId}`,e)})()])}async prepareNewSession(e){const t=this.olmDevice.createOutboundGroupSession(),n=this.olmDevice.getOutboundGroupSessionKey(t);return await this.olmDevice.addInboundGroupSession(this.roomId,this.olmDevice.deviceCurve25519Key,[],t,n.key,{ed25519:this.olmDevice.deviceEd25519Key},!1,{sharedHistory:e}),this.crypto.backupManager.backupGroupSession(this.olmDevice.deviceCurve25519Key,t),new p(t,e)}getDevicesWithoutSessions(e,t,n=[]){for(const[i,r]of Object.entries(t)){const t=e[i];for(const e of r){const r=e.deviceId;t[r].sessionId||(n.push({userId:i,deviceInfo:e}),delete t[r])}}return n}splitDevices(e){let t=[];const n=[t];for(const[i,r]of Object.entries(e)){for(const e of Object.values(r))t.push({userId:i,deviceInfo:e.device});t.length>20&&(t=[],n.push(t))}return 0===t.length&&n.pop(),n}encryptAndSendKeysToDevices(e,t,n,i){return this.crypto.encryptAndSendToDevices(n,i).then((()=>{for(const i of n)e.markSharedWithDevice(i.userId,i.deviceInfo.deviceId,i.deviceInfo.getIdentityKey(),t)})).catch((e=>{throw o.logger.error("failed to encryptAndSendToDevices",e),e}))}async sendBlockedNotificationsToDevices(e,t,n){const i={};for(const e of t){const t=e.userId,r=e.deviceInfo,o=r.deviceInfo.deviceId,s=Object.assign({},n);s.code=r.code,s.reason=r.reason,"m.no_olm"===s.code&&(delete s.room_id,delete s.session_id),i[t]||(i[t]={}),i[t][o]=s}await this.baseApis.sendToDevice("m.room_key.withheld",i);for(const t of Object.keys(i))for(const n of Object.keys(i[t]))e.markNotifiedBlockedDevice(t,n)}async reshareKeyWithDevice(e,t,n,i){const r=this.outboundSessions[t];if(!r)return void o.logger.debug(`megolm session ${e}|${t} not found: not re-sharing keys`);if(void 0===r.sharedWithDevices[n])return void o.logger.debug(`megolm session ${e}|${t} never shared with user ${n}`);const a=r.sharedWithDevices[n][i.deviceId];if(void 0===a)return void o.logger.debug(`megolm session ${e}|${t} never shared with device ${n}:${i.deviceId}`);if(a.deviceKey!==i.getIdentityKey())return void o.logger.warn(`Megolm session ${e}|${t} has been shared with device ${i.deviceId} but with identity key ${a.deviceKey}. Key is now ${i.getIdentityKey()}!`);const c=await this.olmDevice.getInboundGroupSessionKey(this.roomId,e,t,a.messageIndex);if(!c)return void o.logger.warn(`No inbound session key found for megolm session ${e}|${t}: not re-sharing keys`);await s.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,{[n]:[i]});const l={type:"m.forwarded_room_key",content:{algorithm:s.MEGOLM_ALGORITHM,room_id:this.roomId,session_id:t,session_key:c.key,chain_index:c.chain_index,sender_key:e,sender_claimed_ed25519_key:c.sender_claimed_ed25519_key,forwarding_curve25519_key_chain:c.forwarding_curve25519_key_chain,"org.matrix.msc3061.shared_history":c.shared_history||!1}},u={algorithm:s.OLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{}};await s.encryptMessageForDevice(u.ciphertext,this.userId,this.deviceId,this.olmDevice,n,i,l),await this.baseApis.sendToDevice("m.room.encrypted",{[n]:{[i.deviceId]:u}}),o.logger.debug(`Re-shared key for megolm session ${e}|${t} with ${n}:${i.deviceId}`)}async shareKeyWithDevices(e,t,n,i,r,a,c){var l;o.logger.debug(`Ensuring Olm sessions for devices in ${this.roomId}`);const u=await s.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,i,!1,a,c,null===(l=o.logger.withPrefix)||void 0===l?void 0:l.call(o.logger,`[${this.roomId}]`));o.logger.debug(`Ensured Olm sessions for devices in ${this.roomId}`),this.getDevicesWithoutSessions(u,i,r),o.logger.debug(`Sharing keys with newly created Olm sessions in ${this.roomId}`),await this.shareKeyWithOlmSessions(e,t,n,u),o.logger.debug(`Shared keys with newly created Olm sessions in ${this.roomId}`)}async shareKeyWithOlmSessions(e,t,n,i){const r=this.splitDevices(i);for(let i=0;i<r.length;i++){const s=`megolm keys for ${e.sessionId} in ${this.roomId} (slice ${i+1}/${r.length})`;try{o.logger.debug(`Sharing ${s}`,r[i].map((e=>`${e.userId}/${e.deviceInfo.deviceId}`))),await this.encryptAndSendKeysToDevices(e,t.chain_index,r[i],n),o.logger.debug(`Shared ${s}`)}catch(e){throw o.logger.error(`Failed to share ${s}`),e}}}async notifyFailedOlmDevices(e,t,n){o.logger.debug(`Notifying ${n.length} devices we failed to create Olm sessions in ${this.roomId}`);for(const{userId:i,deviceInfo:r}of n){const n=r.deviceId;e.markSharedWithDevice(i,n,r.getIdentityKey(),t.chain_index)}const i=await this.olmDevice.filterOutNotifiedErrorDevices(n);o.logger.debug(`Need to notify ${i.length} failed devices which haven't been notified before in ${this.roomId}`);const r={};for(const{userId:e,deviceInfo:t}of i)r[e]=r[e]||{},r[e][t.deviceId]={device:{code:"m.no_olm",reason:c.WITHHELD_MESSAGES["m.no_olm"],deviceInfo:t}};await this.notifyBlockedDevices(e,r),o.logger.debug(`Notified ${i.length} devices we failed to create Olm sessions in ${this.roomId}`)}async notifyBlockedDevices(e,t){const n={room_id:this.roomId,session_id:e.sessionId,algorithm:s.MEGOLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key},i=this.splitDevices(t);for(let t=0;t<i.length;t++)try{await this.sendBlockedNotificationsToDevices(e,i[t],n),o.logger.log(`Completed blacklist notification for ${e.sessionId} in ${this.roomId} (slice ${t+1}/${i.length})`)}catch(n){throw o.logger.log(`blacklist notification for ${e.sessionId} in ${this.roomId} (slice ${t+1}/${i.length}) failed`),n}}prepareToEncrypt(e){if(null==this.encryptionPreparation)o.logger.debug(`Preparing to encrypt events for ${this.roomId}`),this.encryptionPreparation={startTime:Date.now(),promise:(async()=>{try{o.logger.debug(`Getting devices in ${this.roomId}`);const[t,n]=await this.getDevicesInRoom(e);this.crypto.globalErrorOnUnknownDevices&&this.removeUnknownDevices(t),o.logger.debug(`Ensuring outbound session in ${this.roomId}`),await this.ensureOutboundSession(e,t,n,!0),o.logger.debug(`Ready to encrypt events for ${this.roomId}`)}catch(e){o.logger.error(`Failed to prepare to encrypt events for ${this.roomId}`,e)}finally{delete this.encryptionPreparation}})()};else{const e=Date.now()-this.encryptionPreparation.startTime;o.logger.debug(`Already started preparing to encrypt for ${this.roomId} ${e} ms ago, skipping`)}}async encryptMessage(e,t,n){if(o.logger.log(`Starting to encrypt event for ${this.roomId}`),null!=this.encryptionPreparation)try{await this.encryptionPreparation.promise}catch(e){}const i=this.isVerificationEvent(t,n),[r,a]=await this.getDevicesInRoom(e,i);this.crypto.globalErrorOnUnknownDevices&&this.checkForUnknownDevices(r);const c=await this.ensureOutboundSession(e,r,a),l={room_id:this.roomId,type:t,content:n},u=this.olmDevice.encryptGroupMessage(c.sessionId,JSON.stringify(l)),d={algorithm:s.MEGOLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:u,session_id:c.sessionId,device_id:this.deviceId};return c.useCount++,d}isVerificationEvent(e,t){switch(e){case l.EventType.KeyVerificationCancel:case l.EventType.KeyVerificationDone:case l.EventType.KeyVerificationMac:case l.EventType.KeyVerificationStart:case l.EventType.KeyVerificationKey:case l.EventType.KeyVerificationReady:case l.EventType.KeyVerificationAccept:return!0;case l.EventType.RoomMessage:return t.msgtype===l.MsgType.KeyVerificationRequest;default:return!1}}forceDiscardSession(){this.setupPromise=this.setupPromise.then((()=>null))}checkForUnknownDevices(e){const t={};if(Object.keys(e).forEach((n=>{Object.keys(e[n]).forEach((i=>{const r=e[n][i];r.isUnverified()&&!r.isKnown()&&(t[n]||(t[n]={}),t[n][i]=r)}))})),Object.keys(t).length)throw new a.UnknownDeviceError("This room contains unknown devices which have not been verified. We strongly recommend you verify them before continuing.",t)}removeUnknownDevices(e){for(const[t,n]of Object.entries(e)){for(const[e,t]of Object.entries(n))t.isUnverified()&&!t.isKnown()&&delete n[e];0===Object.keys(n).length&&delete e[t]}}async getDevicesInRoom(e,t=!1){const n=(await e.getEncryptionTargetMembers()).map((function(e){return e.userId}));let i=this.crypto.globalBlacklistUnverifiedDevices;const r=e.getBlacklistUnverifiedDevices();"boolean"==typeof r&&(i=r);const o=await this.crypto.downloadKeys(n,!1),s={};for(const e in o){if(!o.hasOwnProperty(e))continue;const n=o[e];for(const r in n){if(!n.hasOwnProperty(r))continue;const o=this.crypto.checkDeviceTrust(e,r);if(n[r].isBlocked()||!o.isVerified()&&i&&!t){s[e]||(s[e]={});const t=n[r].isBlocked();s[e][r]={code:t?"m.blacklisted":"m.unverified",reason:c.WITHHELD_MESSAGES[t?"m.blacklisted":"m.unverified"],deviceInfo:n[r]},delete n[r]}}}return[o,s]}}class m extends a.DecryptionAlgorithm{constructor(e){super(e),(0,r.default)(this,"pendingEvents",new Map),(0,r.default)(this,"olmlib",s),(0,r.default)(this,"roomId",void 0),this.roomId=e.roomId}async decryptEvent(e){const t=e.getWireContent();if(!t.sender_key||!t.session_id||!t.ciphertext)throw new a.DecryptionError("MEGOLM_MISSING_FIELDS","Missing fields in input");let n;this.addEventToPendingList(e);try{n=await this.olmDevice.decryptGroupMessage(e.getRoomId(),t.sender_key,t.session_id,t.ciphertext,e.getId(),e.getTs())}catch(n){if("DecryptionError"===n.name)throw n;let i="OLM_DECRYPT_GROUP_MESSAGE_ERROR";throw"OLM.UNKNOWN_MESSAGE_INDEX"===(null==n?void 0:n.message)&&(this.requestKeysForEvent(e),i="OLM_UNKNOWN_MESSAGE_INDEX"),new a.DecryptionError(i,n?n.toString():"Unknown Error: Error is undefined",{session:t.sender_key+"|"+t.session_id})}if(null===n){this.crypto.backupManager.queryKeyBackupRateLimited(e.getRoomId(),t.session_id).catch((()=>{})),this.requestKeysForEvent(e);const n=await this.olmDevice.sessionMayHaveProblems(t.sender_key,e.getTs()-12e4);if(n){o.logger.info(`When handling UISI from ${e.getSender()} (sender key ${t.sender_key}): recent session problem with that sender: ${n}`);let i=g[n.type]||g.unknown;throw n.fixed&&(i+=" Trying to create a new secure channel and re-requesting the keys."),new a.DecryptionError("MEGOLM_UNKNOWN_INBOUND_SESSION_ID",i,{session:t.sender_key+"|"+t.session_id})}throw new a.DecryptionError("MEGOLM_UNKNOWN_INBOUND_SESSION_ID","The sender's device has not sent us the keys for this message.",{session:t.sender_key+"|"+t.session_id})}n.untrusted||this.removeEventFromPendingList(e);const i=JSON.parse(n.result);if(i.room_id!==e.getRoomId())throw new a.DecryptionError("MEGOLM_BAD_ROOM","Message intended for room "+i.room_id);return{clearEvent:i,senderCurve25519Key:n.senderKey,claimedEd25519Key:n.keysClaimed.ed25519,forwardingCurve25519KeyChain:n.forwardingCurve25519KeyChain,untrusted:n.untrusted}}requestKeysForEvent(e){const t=e.getWireContent(),n=e.getKeyRequestRecipients(this.userId);this.crypto.requestRoomKey({room_id:e.getRoomId(),algorithm:t.algorithm,sender_key:t.sender_key,session_id:t.session_id},n)}addEventToPendingList(e){var t;const n=e.getWireContent(),i=n.sender_key,r=n.session_id;this.pendingEvents.has(i)||this.pendingEvents.set(i,new Map);const o=this.pendingEvents.get(i);o.has(r)||o.set(r,new Set),null===(t=o.get(r))||void 0===t||t.add(e)}removeEventFromPendingList(e){const t=e.getWireContent(),n=t.sender_key,i=t.session_id,r=this.pendingEvents.get(n),o=null==r?void 0:r.get(i);o&&(o.delete(e),0===o.size&&r.delete(i),0===r.size&&this.pendingEvents.delete(n))}async onRoomKeyEvent(e){const t=e.getContent();let n,i=e.getSenderKey(),r=[],a=!1;const c={};if(t.room_id&&t.session_key&&t.session_id&&t.algorithm)if(s.isOlmEncrypted(e)){if(t["org.matrix.msc3061.shared_history"]&&(c.sharedHistory=!0),"m.forwarded_room_key"==e.getType()){var l,d,h,p;const f=this.crypto.deviceList.getDeviceByIdentityKey(s.OLM_ALGORITHM,i);if(this.baseApis.crypto.deviceList.getUserByIdentityKey(s.OLM_ALGORITHM,i)!==e.getSender())return void o.logger.error("sending device does not belong to the user it claims to be from");const m=(f?await this.crypto.cryptoStore.getOutgoingRoomKeyRequestsByTarget(e.getSender(),f.deviceId,[u.RoomKeyRequestState.Sent]):[]).some((e=>e.requestBody.room_id===t.room_id&&e.requestBody.session_id===t.session_id)),g=this.baseApis.getRoom(t.room_id),v=null==g||null===(l=g.getMember(this.userId))||void 0===l?void 0:l.events.member,y=(null==v?void 0:v.getSender())===e.getSender()||(null==v||null===(d=v.getUnsigned())||void 0===d?void 0:d.prev_sender)===e.getSender()&&"invite"===(null==v||null===(h=v.getPrevContent())||void 0===h?void 0:h.membership),b=e.getSender()===this.baseApis.getUserId();if(!m&&!b){if(!c.sharedHistory)return void o.logger.log("forwarded key not shared history - ignoring");if(g&&!y)return void o.logger.log("forwarded key not from inviter or from us - ignoring")}if(a=!0,r=Array.isArray(t.forwarding_curve25519_key_chain)?t.forwarding_curve25519_key_chain:[],r=r.slice(),r.push(i),!t.sender_key)return void o.logger.error("forwarded_room_key event is missing sender_key field");const E=t.sender_claimed_ed25519_key;if(!E)return void o.logger.error("forwarded_room_key_event is missing sender_claimed_ed25519_key field");if(n={ed25519:E},!g){const i={senderId:e.getSender(),senderKey:t.sender_key,sessionId:t.session_id,sessionKey:t.session_key,keysClaimed:n,forwardingCurve25519KeyChain:r};return void await this.crypto.cryptoStore.doTxn("readwrite",["parked_shared_history"],(e=>this.crypto.cryptoStore.addParkedSharedHistory(t.room_id,i,e)),o.logger.withPrefix("[addParkedSharedHistory]"))}const S=null!==(p=this.crypto.deviceList.getDeviceByIdentityKey(s.OLM_ALGORITHM,i))&&void 0!==p?p:void 0,w=this.crypto.checkDeviceInfoTrust(e.getSender(),S);if(b&&!w.isVerified())return;c.untrusted=!0,i=t.sender_key}else n=e.getKeysClaimed();t["org.matrix.msc3061.shared_history"]&&(c.sharedHistory=!0);try{await this.olmDevice.addInboundGroupSession(t.room_id,i,r,t.session_id,t.session_key,n,a,c),await this.retryDecryption(i,t.session_id,!c.untrusted)&&this.crypto.cancelRoomKeyRequest({algorithm:t.algorithm,room_id:t.room_id,session_id:t.session_id,sender_key:i}),await this.crypto.backupManager.backupGroupSession(i,t.session_id)}catch(e){o.logger.error(`Error handling m.room_key_event: ${e}`)}}else o.logger.error("key event not properly encrypted");else o.logger.error("key event is missing fields")}async onRoomKeyWithheldEvent(e){const t=e.getContent(),n=t.sender_key;if("m.no_olm"===t.code){const i=e.getSender();if(o.logger.warn(`${i}:${n} was unable to establish an olm session with us`),await this.olmDevice.getSessionIdForDevice(n))return o.logger.debug("New session already created.  Not creating a new one."),await this.olmDevice.recordSessionProblem(n,"no_olm",!0),void this.retryDecryptionFromSender(n);let r=this.crypto.deviceList.getDeviceByIdentityKey(t.algorithm,n);if(!r&&(await this.crypto.downloadKeys([i],!1),r=this.crypto.deviceList.getDeviceByIdentityKey(t.algorithm,n),!r))return o.logger.info("Couldn't find device for identity key "+n+": not establishing session"),await this.olmDevice.recordSessionProblem(n,"no_olm",!1),void this.retryDecryptionFromSender(n);await s.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,{[i]:[r]},!1);const a={algorithm:s.OLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{}};await s.encryptMessageForDevice(a.ciphertext,this.userId,void 0,this.olmDevice,i,r,{type:"m.dummy"}),await this.olmDevice.recordSessionProblem(n,"no_olm",!0),this.retryDecryptionFromSender(n),await this.baseApis.sendToDevice("m.room.encrypted",{[i]:{[r.deviceId]:a}})}else await this.olmDevice.addInboundGroupSessionWithheld(t.room_id,n,t.session_id,t.code,t.reason)}hasKeysForKeyRequest(e){const t=e.requestBody;return this.olmDevice.hasInboundSessionKeys(t.room_id,t.sender_key,t.session_id)}shareKeysWithDevice(e){const t=e.userId,n=e.deviceId,i=this.crypto.getStoredDevice(t,n),r=e.requestBody;this.olmlib.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,{[t]:[i]}).then((e=>e[t][n].sessionId?(o.logger.log("sharing keys for session "+r.sender_key+"|"+r.session_id+" with device "+t+":"+n),this.buildKeyForwardingMessage(r.room_id,r.sender_key,r.session_id)):null)).then((e=>{const r={algorithm:s.OLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{}};return this.olmlib.encryptMessageForDevice(r.ciphertext,this.userId,void 0,this.olmDevice,t,i,e).then((()=>{const e={[t]:{[n]:r}};return this.baseApis.sendToDevice("m.room.encrypted",e)}))}))}async buildKeyForwardingMessage(e,t,n){const i=await this.olmDevice.getInboundGroupSessionKey(e,t,n);return{type:"m.forwarded_room_key",content:{algorithm:s.MEGOLM_ALGORITHM,room_id:e,sender_key:t,sender_claimed_ed25519_key:i.sender_claimed_ed25519_key,session_id:n,session_key:i.key,chain_index:i.chain_index,forwarding_curve25519_key_chain:i.forwarding_curve25519_key_chain,"org.matrix.msc3061.shared_history":i.shared_history||!1}}}importRoomKey(e,t={}){const n={};return(t.untrusted||e.untrusted)&&(n.untrusted=!0),e["org.matrix.msc3061.shared_history"]&&(n.sharedHistory=!0),this.olmDevice.addInboundGroupSession(e.room_id,e.sender_key,e.forwarding_curve25519_key_chain,e.session_id,e.session_key,e.sender_claimed_keys,!0,n).then((()=>{"backup"!==t.source&&this.crypto.backupManager.backupGroupSession(e.sender_key,e.session_id).catch((e=>{o.logger.log("Failed to back up megolm session",e)})),this.retryDecryption(e.sender_key,e.session_id,!n.untrusted)}))}async retryDecryption(e,t,n){var i;const r=this.pendingEvents.get(e);if(!r)return!0;const s=r.get(t);return!(s&&(o.logger.debug("Retrying decryption on events",[...s]),await Promise.all([...s].map((async e=>{try{await e.attemptDecryption(this.crypto,{isRetry:!0,forceRedecryptIfUntrusted:n})}catch(e){}}))),null!==(i=this.pendingEvents.get(e))&&void 0!==i&&i.has(t)))}async retryDecryptionFromSender(e){const t=this.pendingEvents.get(e);return!t||(this.pendingEvents.delete(e),await Promise.all([...t].map((async([e,t])=>{await Promise.all([...t].map((async e=>{try{await e.attemptDecryption(this.crypto)}catch(e){}})))}))),!this.pendingEvents.has(e))}async sendSharedHistoryInboundSessions(e){await s.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,e);const t=await this.olmDevice.getSharedHistoryInboundGroupSessions(this.roomId);o.logger.log(`Sharing history in ${this.roomId} with users ${Object.keys(e)}`,t.map((([e,t])=>`${e}|${t}`)));for(const[n,i]of t){const t=await this.buildKeyForwardingMessage(this.roomId,n,i),r=[],a={};for(const[n,i]of Object.entries(e)){a[n]={};for(const e of i){const i={algorithm:s.OLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{}};a[n][e.deviceId]=i,r.push(s.encryptMessageForDevice(i.ciphertext,this.userId,void 0,this.olmDevice,n,e,t))}}await Promise.all(r);for(const e of Object.keys(a)){for(const t of Object.keys(a[e]))0===Object.keys(a[e][t].ciphertext).length&&(o.logger.log("No ciphertext for device "+e+":"+t+": pruning"),delete a[e][t]);0===Object.keys(a[e]).length&&(o.logger.log("Pruned all devices for user "+e),delete a[e])}if(0===Object.keys(a).length)return void o.logger.log("No users left to send to: aborting");await this.baseApis.sendToDevice("m.room.encrypted",a)}}}const g={no_olm:"The sender was unable to establish a secure channel.",unknown:"The secure channel with the sender was corrupted."};(0,a.registerAlgorithm)(s.MEGOLM_ALGORITHM,f,m)},23072:(e,t,n)=>{"use strict";var i=n(95318)(n(59713)),r=n(7434),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(32772)),s=n(23272),a=n(21897);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}const l=s.DeviceInfo.DeviceVerification;class u extends a.EncryptionAlgorithm{constructor(...e){super(...e),(0,i.default)(this,"sessionPrepared",!1),(0,i.default)(this,"prepPromise",null)}ensureSession(e){return this.prepPromise?this.prepPromise:this.sessionPrepared?Promise.resolve():(this.prepPromise=this.crypto.downloadKeys(e).then((()=>this.crypto.ensureOlmSessionsForUsers(e))).then((()=>{this.sessionPrepared=!0})).finally((()=>{this.prepPromise=null})),this.prepPromise)}async encryptMessage(e,t,n){const i=(await e.getEncryptionTargetMembers()).map((function(e){return e.userId}));await this.ensureSession(i);const r={room_id:e.roomId,type:t,content:n},s={algorithm:o.OLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{}},a=[];for(const e of i){const t=this.crypto.getStoredDevicesForUser(e)||[];for(const n of t)n.getIdentityKey()!=this.olmDevice.deviceCurve25519Key&&n.verified!=l.BLOCKED&&a.push(o.encryptMessageForDevice(s.ciphertext,this.userId,this.deviceId,this.olmDevice,e,n,r))}return Promise.all(a).then((()=>s))}}class d extends a.DecryptionAlgorithm{async decryptEvent(e){const t=e.getWireContent(),n=t.sender_key,i=t.ciphertext;if(!i)throw new a.DecryptionError("OLM_MISSING_CIPHERTEXT","Missing ciphertext");if(!(this.olmDevice.deviceCurve25519Key in i))throw new a.DecryptionError("OLM_NOT_INCLUDED_IN_RECIPIENTS","Not included in recipients");const r=i[this.olmDevice.deviceCurve25519Key];let s;try{s=await this.decryptMessage(n,r)}catch(e){throw new a.DecryptionError("OLM_BAD_ENCRYPTED_MESSAGE","Bad Encrypted Message",{sender:n,err:e})}const c=JSON.parse(s);if(c.recipient!=this.userId)throw new a.DecryptionError("OLM_BAD_RECIPIENT","Message was intented for "+c.recipient);if(c.recipient_keys.ed25519!=this.olmDevice.deviceEd25519Key)throw new a.DecryptionError("OLM_BAD_RECIPIENT_KEY","Message not intended for this device",{intended:c.recipient_keys.ed25519,our_key:this.olmDevice.deviceEd25519Key});await this.crypto.deviceList.downloadKeys([e.getSender()],!1);const l=this.crypto.deviceList.getUserByIdentityKey(o.OLM_ALGORITHM,n);if(l!==e.getSender()&&null!=l)throw new a.DecryptionError("OLM_BAD_SENDER","Message claimed to be from "+e.getSender(),{real_sender:l});if(c.sender!=e.getSender())throw new a.DecryptionError("OLM_FORWARDED_MESSAGE","Message forwarded from "+c.sender,{reported_sender:e.getSender()});if(c.room_id!==e.getRoomId())throw new a.DecryptionError("OLM_BAD_ROOM","Message intended for room "+c.room_id,{reported_room:e.getRoomId()||"ROOM_ID_UNDEFINED"});return{clearEvent:c,senderCurve25519Key:n,claimedEd25519Key:(c.keys||{}).ed25519||null}}decryptMessage(e,t){if(0!==t.type)return this.reallyDecryptMessage(e,t);{const n=this.olmDevice.olmPrekeyPromise.then((()=>this.reallyDecryptMessage(e,t)));return this.olmDevice.olmPrekeyPromise=n.catch((()=>{})),n}}async reallyDecryptMessage(e,t){const n=await this.olmDevice.getSessionIdsForDevice(e),i={};for(const o of n)try{const n=await this.olmDevice.decryptMessage(e,o,t.type,t.body);return r.logger.log("Decrypted Olm message from "+e+" with session "+o),n}catch(n){if(await this.olmDevice.matchesSession(e,o,t.type,t.body))throw new Error("Error decrypting prekey message with existing session id "+o+": "+n.message);i[o]=n.message}if(0!==t.type){if(0===n.length)throw new Error("No existing sessions");throw new Error("Error decrypting non-prekey message with existing sessions: "+JSON.stringify(i))}let o;try{o=await this.olmDevice.createInboundSession(e,t.type,t.body)}catch(e){throw i["(new)"]=e.message,new Error("Error decrypting prekey message: "+JSON.stringify(i))}return r.logger.log("created new inbound Olm session ID "+o.session_id+" with "+e),o.payload}}(0,a.registerAlgorithm)(o.OLM_ALGORITHM,u,d)},70764:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.CrossSigningKey=void 0,t.CrossSigningKey=n,function(e){e.Master="master",e.SelfSigning="self_signing",e.UserSigning="user_signing"}(n||(t.CrossSigningKey=n={}))},75537:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.algorithmsByName=t.DefaultAlgorithm=t.Curve25519=t.BackupManager=t.Aes256=void 0;var r=i(n(59713)),o=n(62168),s=n(7434),a=n(32772),c=n(91597),l=n(3102),u=n(57585),d=n(34077),h=n(2611),p=n(47048),f=n(12600),m=n(39126),g=n(30095);class v{constructor(e,t){this.baseApis=e,this.getKey=t,(0,r.default)(this,"algorithm",void 0),(0,r.default)(this,"backupInfo",void 0),(0,r.default)(this,"checkedForBackup",void 0),(0,r.default)(this,"sendingBackups",void 0),(0,r.default)(this,"sessionLastCheckAttemptedTime",{}),this.checkedForBackup=!1,this.sendingBackups=!1}get version(){return this.backupInfo&&this.backupInfo.version}static checkBackupVersion(e){const t=S[e.algorithm];if(!t)throw new Error("Unknown backup algorithm: "+e.algorithm);if("object"!=typeof e.auth_data)throw new Error("Invalid backup data returned");return t.checkBackupVersion(e)}static makeAlgorithm(e,t){const n=S[e.algorithm];if(!n)throw new Error("Unknown backup algorithm");return n.init(e.auth_data,t)}async enableKeyBackup(e){this.backupInfo=e,this.algorithm&&this.algorithm.free(),this.algorithm=await v.makeAlgorithm(e,this.getKey),this.baseApis.emit(f.CryptoEvent.KeyBackupStatus,!0),this.scheduleKeyBackupSend()}disableKeyBackup(){this.algorithm&&this.algorithm.free(),this.algorithm=void 0,this.backupInfo=void 0,this.baseApis.emit(f.CryptoEvent.KeyBackupStatus,!1)}getKeyBackupEnabled(){return this.checkedForBackup?Boolean(this.algorithm):null}async prepareKeyBackupVersion(e,t){const n=t?S[t]:w;if(!n)throw new Error("Unknown backup algorithm");const[i,r]=await n.prepare(e),o=(0,d.encodeRecoveryKey)(i);return{algorithm:n.algorithmName,auth_data:r,recovery_key:o,privateKey:i}}async createKeyBackupVersion(e){this.algorithm=await v.makeAlgorithm(e,this.getKey)}async checkAndStart(){if(s.logger.log("Checking key backup status..."),this.baseApis.isGuest())return s.logger.log("Skipping key backup check since user is guest"),this.checkedForBackup=!0,null;let e;try{var t;e=null!==(t=await this.baseApis.getKeyBackupVersion())&&void 0!==t?t:void 0}catch(e){return s.logger.log("Error checking for active key backup",e),404===e.httpStatus&&(this.checkedForBackup=!0),null}this.checkedForBackup=!0;const n=await this.isKeyBackupTrusted(e);return n.usable&&!this.backupInfo?(s.logger.log(`Found usable key backup v${e.version}: enabling key backups`),await this.enableKeyBackup(e)):!n.usable&&this.backupInfo?(s.logger.log("No usable key backup: disabling key backup"),this.disableKeyBackup()):n.usable||this.backupInfo?n.usable&&this.backupInfo&&(e.version!==this.backupInfo.version?(s.logger.log(`On backup version ${this.backupInfo.version} but found version ${e.version}: switching.`),this.disableKeyBackup(),await this.enableKeyBackup(e),await this.scheduleAllGroupSessionsForBackup()):s.logger.log(`Backup version ${e.version} still current`)):s.logger.log("No usable key backup: not enabling key backup"),{backupInfo:e,trustInfo:n}}async checkKeyBackup(){return this.checkedForBackup=!1,this.checkAndStart()}async queryKeyBackupRateLimited(e,t){if(!this.backupInfo)return;const n=(new Date).getTime();(!this.sessionLastCheckAttemptedTime[t]||n-this.sessionLastCheckAttemptedTime[t]>5e3)&&(this.sessionLastCheckAttemptedTime[t]=n,await this.baseApis.restoreKeyBackupWithCache(e,t,this.backupInfo,{}))}async isKeyBackupTrusted(e){const t={usable:!1,trusted_locally:!1,sigs:[]};if(!(e&&e.algorithm&&e.auth_data&&e.auth_data.signatures))return s.logger.info("Key backup is absent or missing required data"),t;const n=this.baseApis.getUserId(),i=await this.baseApis.crypto.getSessionBackupPrivateKey();if(i){let n=null;try{n=await v.makeAlgorithm(e,(async()=>i)),await n.keyMatches(i)&&(s.logger.info("Backup is trusted locally"),t.trusted_locally=!0)}catch{}finally{var r;null===(r=n)||void 0===r||r.free()}}const o=e.auth_data.signatures[n]||{};for(const i of Object.keys(o)){const r=i.split(":");if("ed25519"!==r[0]){s.logger.log("Ignoring unknown signature type: "+r[0]);continue}const o={deviceId:r[1]},c=this.baseApis.crypto.crossSigningInfo.getId();if(c===o.deviceId){o.crossSigningId=!0;try{await(0,a.verifySignature)(this.baseApis.crypto.olmDevice,e.auth_data,n,o.deviceId,c),o.valid=!0}catch(e){s.logger.warn("Bad signature from cross signing key "+c,e),o.valid=!1}t.sigs.push(o);continue}const l=this.baseApis.crypto.deviceList.getStoredDevice(n,o.deviceId);if(l){o.device=l,o.deviceTrust=this.baseApis.checkDeviceTrust(n,o.deviceId);try{await(0,a.verifySignature)(this.baseApis.crypto.olmDevice,e.auth_data,n,l.deviceId,l.getFingerprint()),o.valid=!0}catch(t){s.logger.info("Bad signature from key ID "+i+" userID "+this.baseApis.getUserId()+" device ID "+l.deviceId+" fingerprint: "+l.getFingerprint(),e.auth_data,t),o.valid=!1}}else o.valid=null,s.logger.info("Ignoring signature from unknown key "+i);t.sigs.push(o)}return t.usable=t.sigs.some((e=>{var t;return e.valid&&(e.device&&(null===(t=e.deviceTrust)||void 0===t?void 0:t.isVerified())||e.crossSigningId)})),t}async scheduleKeyBackupSend(e=1e4){if(!this.sendingBackups){this.sendingBackups=!0;try{const t=Math.random()*e;await(0,l.sleep)(t);let n=0;for(;;){if(!this.algorithm)return;try{if(0===await this.backupPendingKeys(200))return;n=0}catch(e){if(n++,s.logger.log("Key backup request failed",e),e.data&&("M_NOT_FOUND"==e.data.errcode||"M_WRONG_ROOM_KEYS_VERSION"==e.data.errcode))throw await this.checkKeyBackup(),this.baseApis.crypto.emit(f.CryptoEvent.KeyBackupFailed,e.data.errcode),e}n&&await(0,l.sleep)(1e3*Math.pow(2,Math.min(n-1,4)))}}finally{this.sendingBackups=!1}}}async backupPendingKeys(e){const t=await this.baseApis.crypto.cryptoStore.getSessionsNeedingBackup(e);if(!t.length)return 0;let n=await this.baseApis.crypto.cryptoStore.countSessionsNeedingBackup();this.baseApis.crypto.emit(f.CryptoEvent.KeyBackupSessionsRemaining,n);const i={};for(const e of t){var r;const t=e.sessionData.room_id;void 0===i[t]&&(i[t]={sessions:{}});const n=this.baseApis.crypto.olmDevice.exportInboundGroupSession(e.senderKey,e.sessionId,e.sessionData);n.algorithm=a.MEGOLM_ALGORITHM;const o=(n.forwarding_curve25519_key_chain||[]).length,s=this.baseApis.crypto.deviceList.getUserByIdentityKey(a.MEGOLM_ALGORITHM,e.senderKey),c=null!==(r=this.baseApis.crypto.deviceList.getDeviceByIdentityKey(a.MEGOLM_ALGORITHM,e.senderKey))&&void 0!==r?r:void 0,l=this.baseApis.crypto.checkDeviceInfoTrust(s,c).isVerified();i[t].sessions[e.sessionId]={first_message_index:n.first_known_index,forwarded_count:o,is_verified:l,session_data:await this.algorithm.encryptSession(n)}}return await this.baseApis.sendKeyBackup(void 0,void 0,this.backupInfo.version,{rooms:i}),await this.baseApis.crypto.cryptoStore.unmarkSessionsNeedingBackup(t),n=await this.baseApis.crypto.cryptoStore.countSessionsNeedingBackup(),this.baseApis.crypto.emit(f.CryptoEvent.KeyBackupSessionsRemaining,n),t.length}async backupGroupSession(e,t){await this.baseApis.crypto.cryptoStore.markSessionsNeedingBackup([{senderKey:e,sessionId:t}]),this.backupInfo&&this.scheduleKeyBackupSend()}async scheduleAllGroupSessionsForBackup(){await this.flagAllGroupSessionsForBackup(),this.scheduleKeyBackupSend(0)}async flagAllGroupSessionsForBackup(){await this.baseApis.crypto.cryptoStore.doTxn("readwrite",[u.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS,u.IndexedDBCryptoStore.STORE_BACKUP],(e=>{this.baseApis.crypto.cryptoStore.getAllEndToEndInboundGroupSessions(e,(t=>{null!==t&&this.baseApis.crypto.cryptoStore.markSessionsNeedingBackup([t],e)}))}));const e=await this.baseApis.crypto.cryptoStore.countSessionsNeedingBackup();return this.baseApis.emit(f.CryptoEvent.KeyBackupSessionsRemaining,e),e}countSessionsNeedingBackup(){return this.baseApis.crypto.cryptoStore.countSessionsNeedingBackup()}}t.BackupManager=v;class y{constructor(e,t,n){this.authData=e,this.publicKey=t,this.getKey=n}static async init(e,t){if(!e||!("public_key"in e))throw new Error("auth_data missing required information");const i=new n.g.Olm.PkEncryption;return i.set_recipient_key(e.public_key),new y(e,i,t)}static async prepare(e){const t=new n.g.Olm.PkDecryption;try{const i={};if(e)if(e instanceof Uint8Array)i.public_key=t.init_with_private_key(e);else{const n=await(0,c.keyFromPassphrase)(e);i.private_key_salt=n.salt,i.private_key_iterations=n.iterations,i.public_key=t.init_with_private_key(n.key)}else i.public_key=t.generate_key();return(new n.g.Olm.PkEncryption).set_recipient_key(i.public_key),[t.get_private_key(),i]}finally{t.free()}}static checkBackupVersion(e){if(!("public_key"in e.auth_data))throw new Error("Invalid backup data returned")}get untrusted(){return!0}async encryptSession(e){const t=Object.assign({},e);return delete t.session_id,delete t.room_id,delete t.first_known_index,this.publicKey.encrypt(JSON.stringify(t))}async decryptSessions(e){const t=await this.getKey(),i=new n.g.Olm.PkDecryption;try{if(i.init_with_private_key(t)!==this.authData.public_key)throw new g.MatrixError({errcode:o.MatrixClient.RESTORE_BACKUP_ERROR_BAD_KEY});const n=[];for(const[t,r]of Object.entries(e))try{const e=JSON.parse(i.decrypt(r.session_data.ephemeral,r.session_data.mac,r.session_data.ciphertext));e.session_id=t,n.push(e)}catch(e){s.logger.log("Failed to decrypt megolm session from backup",e,r)}return n}finally{i.free()}}async keyMatches(e){const t=new n.g.Olm.PkDecryption;let i;try{i=t.init_with_private_key(e)}finally{t.free()}return i===this.authData.public_key}free(){this.publicKey.free()}}t.Curve25519=y,(0,r.default)(y,"algorithmName","m.megolm_backup.v1.curve25519-aes-sha2");const b=new p.UnstableValue("m.megolm_backup.v1.aes-hmac-sha2","org.matrix.msc3270.v1.aes-hmac-sha2");class E{constructor(e,t){this.authData=e,this.key=t}static async init(e,t){if(!e)throw new Error("auth_data missing");const n=await t();if(e.mac){const{mac:t}=await(0,h.calculateKeyCheck)(n,e.iv);if(e.mac.replace(/=+$/g,"")!==t.replace(/=+/g,""))throw new Error("Key does not match")}return new E(e,n)}static async prepare(e){let t;const n={};if(e)if(e instanceof Uint8Array)t=new Uint8Array(e);else{const i=await(0,c.keyFromPassphrase)(e);n.private_key_salt=i.salt,n.private_key_iterations=i.iterations,t=i.key}else t=function(e){const t=new Uint8Array(32);return m.crypto.getRandomValues(t),t}();const{iv:i,mac:r}=await(0,h.calculateKeyCheck)(t);return n.iv=i,n.mac=r,[t,n]}static checkBackupVersion(e){if(!("iv"in e.auth_data)||!("mac"in e.auth_data))throw new Error("Invalid backup data returned")}get untrusted(){return!1}encryptSession(e){const t=Object.assign({},e);return delete t.session_id,delete t.room_id,delete t.first_known_index,(0,h.encryptAES)(JSON.stringify(t),this.key,e.session_id)}async decryptSessions(e){const t=[];for(const[n,i]of Object.entries(e))try{const e=JSON.parse(await(0,h.decryptAES)(i.session_data,this.key,n));e.session_id=n,t.push(e)}catch(e){s.logger.log("Failed to decrypt megolm session from backup",e,i)}return t}async keyMatches(e){if(this.authData.mac){const{mac:t}=await(0,h.calculateKeyCheck)(e,this.authData.iv);return this.authData.mac.replace(/=+$/g,"")===t.replace(/=+/g,"")}return!0}free(){this.key.fill(0)}}t.Aes256=E,(0,r.default)(E,"algorithmName",b.name);const S={[y.algorithmName]:y,[E.algorithmName]:E};t.algorithmsByName=S;const w=y;t.DefaultAlgorithm=w},39126:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=t.TextEncoder=void 0,t.setCrypto=function(e){var n;t.crypto=d=e,t.subtleCrypto=h=null!==(n=e.subtle)&&void 0!==n?n:e.webkitSubtle},t.setTextEncoder=function(e){t.TextEncoder=p=e},t.subtleCrypto=void 0;var i,r,o,s,a,c,l,u=n(7434);let d=null===(i=n.g.window)||void 0===i?void 0:i.crypto;t.crypto=d;let h=null!==(r=null===(o=n.g.window)||void 0===o||null===(s=o.crypto)||void 0===s?void 0:s.subtle)&&void 0!==r?r:null===(a=n.g.window)||void 0===a||null===(c=a.crypto)||void 0===c?void 0:c.webkitSubtle;t.subtleCrypto=h;let p=null===(l=n.g.window)||void 0===l?void 0:l.TextEncoder;if(t.TextEncoder=p,!d)try{t.crypto=d=n(55835).webcrypto}catch(e){u.logger.error("Failed to load webcrypto",e)}var f;if(h||(t.subtleCrypto=h=null===(f=d)||void 0===f?void 0:f.subtle),!p)try{t.TextEncoder=p=n(89539).TextEncoder}catch(e){u.logger.error("Failed to load TextEncoder util",e)}},54830:(e,t,n)=>{"use strict";var i=n(48764).Buffer,r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DehydrationManager=t.DEHYDRATION_ALGORITHM=void 0;var o=r(n(59713)),s=r(n(69141)),a=n(32772),c=n(57585),l=n(2611),u=n(7434),d=n(30095);const h="org.matrix.msc2697.v1.olm.libolm_pickle";t.DEHYDRATION_ALGORITHM=h;const p=6048e5;t.DehydrationManager=class{constructor(e){this.crypto=e,(0,o.default)(this,"inProgress",!1),(0,o.default)(this,"timeoutId",void 0),(0,o.default)(this,"key",void 0),(0,o.default)(this,"keyInfo",void 0),(0,o.default)(this,"deviceDisplayName",void 0),this.getDehydrationKeyFromCache()}getDehydrationKeyFromCache(){return this.crypto.cryptoStore.doTxn("readonly",[c.IndexedDBCryptoStore.STORE_ACCOUNT],(e=>{this.crypto.cryptoStore.getSecretStorePrivateKey(e,(async e=>{if(e){const{key:t,keyInfo:r,deviceDisplayName:o,time:s}=e,c=i.from(this.crypto.olmDevice.pickleKey),u=await(0,l.decryptAES)(t,c,h);this.key=(0,a.decodeBase64)(u),this.keyInfo=r,this.deviceDisplayName=o;const d=Date.now(),f=Math.max(1,s+p-d);this.timeoutId=n.g.setTimeout(this.dehydrateDevice.bind(this),f)}}),"dehydration")}))}async setKeyAndQueueDehydration(e,t={},n){await this.setKey(e,t,n)||this.dehydrateDevice()}async setKey(e,t={},i){if(!e)return this.timeoutId&&(n.g.clearTimeout(this.timeoutId),this.timeoutId=void 0),await this.crypto.cryptoStore.doTxn("readwrite",[c.IndexedDBCryptoStore.STORE_ACCOUNT],(e=>{this.crypto.cryptoStore.storeSecretStorePrivateKey(e,"dehydration",null)})),this.key=void 0,void(this.keyInfo=void 0);let r=!!this.key&&e.length==this.key.length;for(let t=0;r&&t<e.length;t++)e[t]!=this.key[t]&&(r=!1);return r||(this.key=e,this.keyInfo=t,this.deviceDisplayName=i),r}async dehydrateDevice(){if(this.inProgress)u.logger.log("Dehydration already in progress -- not starting new dehydration");else{this.inProgress=!0,this.timeoutId&&(n.g.clearTimeout(this.timeoutId),this.timeoutId=void 0);try{const e=i.from(this.crypto.olmDevice.pickleKey),t=await(0,l.encryptAES)((0,a.encodeBase64)(this.key),e,h);await this.crypto.cryptoStore.doTxn("readwrite",[c.IndexedDBCryptoStore.STORE_ACCOUNT],(e=>{this.crypto.cryptoStore.storeSecretStorePrivateKey(e,"dehydration",{keyInfo:this.keyInfo,key:t,deviceDisplayName:this.deviceDisplayName,time:Date.now()})})),u.logger.log("Attempting to dehydrate device"),u.logger.log("Creating account");const r=new n.g.Olm.Account;r.create();const o=JSON.parse(r.identity_keys()),f=r.max_number_of_one_time_keys();r.generate_one_time_keys(f/2),r.generate_fallback_key();const m=JSON.parse(r.one_time_keys()),g=JSON.parse(r.fallback_key());r.mark_keys_as_published();const v=r.pickle(new Uint8Array(this.key)),y={algorithm:h,account:v};this.keyInfo.passphrase&&(y.passphrase=this.keyInfo.passphrase),u.logger.log("Uploading account to server");const b=(await this.crypto.baseApis.http.authedRequest(d.Method.Put,"/dehydrated_device",void 0,{device_data:y,initial_device_display_name:this.deviceDisplayName},{prefix:"/_matrix/client/unstable/org.matrix.msc2697.v2"})).device_id;u.logger.log("Preparing device keys",b);const E={algorithms:this.crypto.supportedAlgorithms,device_id:b,user_id:this.crypto.userId,keys:{[`ed25519:${b}`]:o.ed25519,[`curve25519:${b}`]:o.curve25519}},S=r.sign(s.default.stringify(E));E.signatures={[this.crypto.userId]:{[`ed25519:${b}`]:S}},this.crypto.crossSigningInfo.getId("self_signing")&&await this.crypto.crossSigningInfo.signObject(E,"self_signing"),u.logger.log("Preparing one-time keys");const w={};for(const[e,t]of Object.entries(m.curve25519)){const n={key:t},i=r.sign(s.default.stringify(n));n.signatures={[this.crypto.userId]:{[`ed25519:${b}`]:i}},w[`signed_curve25519:${e}`]=n}u.logger.log("Preparing fallback keys");const _={};for(const[e,t]of Object.entries(g.curve25519)){const n={key:t,fallback:!0},i=r.sign(s.default.stringify(n));n.signatures={[this.crypto.userId]:{[`ed25519:${b}`]:i}},_[`signed_curve25519:${e}`]=n}return u.logger.log("Uploading keys to server"),await this.crypto.baseApis.http.authedRequest(d.Method.Post,"/keys/upload/"+encodeURI(b),void 0,{device_keys:E,one_time_keys:w,"org.matrix.msc2732.fallback_keys":_}),u.logger.log("Done dehydrating"),this.timeoutId=n.g.setTimeout(this.dehydrateDevice.bind(this),p),b}finally{this.inProgress=!1}}}stop(){this.timeoutId&&(n.g.clearTimeout(this.timeoutId),this.timeoutId=void 0)}}},23272:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceInfo=void 0;var r,o=i(n(59713));!function(e){e[e.Blocked=-1]="Blocked",e[e.Unverified=0]="Unverified",e[e.Verified=1]="Verified"}(r||(r={}));class s{static fromStorage(e,t){const n=new s(t);for(const t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}constructor(e){this.deviceId=e,(0,o.default)(this,"algorithms",[]),(0,o.default)(this,"keys",{}),(0,o.default)(this,"verified",r.Unverified),(0,o.default)(this,"known",!1),(0,o.default)(this,"unsigned",{}),(0,o.default)(this,"signatures",{})}toStorage(){return{algorithms:this.algorithms,keys:this.keys,verified:this.verified,known:this.known,unsigned:this.unsigned,signatures:this.signatures}}getFingerprint(){return this.keys["ed25519:"+this.deviceId]}getIdentityKey(){return this.keys["curve25519:"+this.deviceId]}getDisplayName(){return this.unsigned.device_display_name||null}isBlocked(){return this.verified==r.Blocked}isVerified(){return this.verified==r.Verified}isUnverified(){return this.verified==r.Unverified}isKnown(){return!0===this.known}}t.DeviceInfo=s,(0,o.default)(s,"DeviceVerification",{VERIFIED:r.Verified,UNVERIFIED:r.Unverified,BLOCKED:r.Blocked})},12600:(e,t,n)=>{"use strict";var i=n(48764).Buffer,r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.IncomingRoomKeyRequest=t.CryptoEvent=t.Crypto=void 0,t.fixBackupKey=V,t.isCryptoAvailable=function(){return Boolean(n.g.Olm)},t.verificationMethods=void 0;var o=r(n(59713)),s=r(n(69141)),a=n(42481),c=n(20771),l=n(7434),u=n(72573),d=U(n(32772)),h=n(36670),p=n(23272),f=U(n(91994)),m=n(3075),g=n(70636),v=n(44823),y=n(66617),b=n(57585),E=n(51696),S=n(56381),w=n(91597),_=n(34077),T=n(85279),x=n(22842),C=n(89588),I=n(4028),k=n(19489),M=n(2611),A=n(54830),O=n(75537),R=n(27366),L=n(32848),D=n(24369),N=n(62168),P=n(55861);function $(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return($=function(e){return e?n:t})(e)}function U(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=$(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}const F=p.DeviceInfo.DeviceVerification,j={[E.ReciprocateQRCode.NAME]:E.ReciprocateQRCode,[S.SAS.NAME]:S.SAS,[E.SHOW_QR_CODE_METHOD]:I.IllegalMethod,[E.SCAN_QR_CODE_METHOD]:I.IllegalMethod},H={RECIPROCATE_QR_CODE:E.ReciprocateQRCode.NAME,SAS:S.SAS.NAME};let K;t.verificationMethods=H,t.CryptoEvent=K,function(e){e.DeviceVerificationChanged="deviceVerificationChanged",e.UserTrustStatusChanged="userTrustStatusChanged",e.UserCrossSigningUpdated="userCrossSigningUpdated",e.RoomKeyRequest="crypto.roomKeyRequest",e.RoomKeyRequestCancellation="crypto.roomKeyRequestCancellation",e.KeyBackupStatus="crypto.keyBackupStatus",e.KeyBackupFailed="crypto.keyBackupFailed",e.KeyBackupSessionsRemaining="crypto.keyBackupSessionsRemaining",e.KeySignatureUploadFailure="crypto.keySignatureUploadFailure",e.VerificationRequest="crypto.verification.request",e.Warning="crypto.warning",e.WillUpdateDevices="crypto.willUpdateDevices",e.DevicesUpdated="crypto.devicesUpdated",e.KeysChanged="crossSigning.keysChanged"}(K||(t.CryptoEvent=K={}));class q extends P.TypedEventEmitter{static getOlmVersion(){return u.OlmDevice.getOlmVersion()}constructor(e,t,n,i,r,s,a){if(super(),this.baseApis=e,this.userId=t,this.deviceId=n,this.clientStore=i,this.cryptoStore=r,this.roomList=s,(0,o.default)(this,"backupManager",void 0),(0,o.default)(this,"crossSigningInfo",void 0),(0,o.default)(this,"olmDevice",void 0),(0,o.default)(this,"deviceList",void 0),(0,o.default)(this,"dehydrationManager",void 0),(0,o.default)(this,"secretStorage",void 0),(0,o.default)(this,"reEmitter",void 0),(0,o.default)(this,"verificationMethods",void 0),(0,o.default)(this,"supportedAlgorithms",void 0),(0,o.default)(this,"outgoingRoomKeyRequestManager",void 0),(0,o.default)(this,"toDeviceVerificationRequests",void 0),(0,o.default)(this,"inRoomVerificationRequests",void 0),(0,o.default)(this,"trustCrossSignedDevices",!0),(0,o.default)(this,"lastOneTimeKeyCheck",null),(0,o.default)(this,"oneTimeKeyCheckInProgress",!1),(0,o.default)(this,"roomEncryptors",new Map),(0,o.default)(this,"roomDecryptors",new Map),(0,o.default)(this,"deviceKeys",{}),(0,o.default)(this,"globalBlacklistUnverifiedDevices",!1),(0,o.default)(this,"globalErrorOnUnknownDevices",!0),(0,o.default)(this,"receivedRoomKeyRequests",[]),(0,o.default)(this,"receivedRoomKeyRequestCancellations",[]),(0,o.default)(this,"processingRoomKeyRequests",!1),(0,o.default)(this,"lazyLoadMembers",!1),(0,o.default)(this,"roomDeviceTrackingState",{}),(0,o.default)(this,"lastNewSessionForced",{}),(0,o.default)(this,"sendKeyRequestsImmediately",!1),(0,o.default)(this,"oneTimeKeyCount",void 0),(0,o.default)(this,"needsNewFallback",void 0),(0,o.default)(this,"fallbackCleanup",void 0),(0,o.default)(this,"onDeviceListUserCrossSigningUpdated",(async e=>{if(e===this.userId){const t=this.deviceList.getStoredCrossSigningForUser(e),n=t?t.getId():null,i=this.crossSigningInfo.getId(),r=i!==n;i&&n&&!r?await this.checkOwnCrossSigningTrust():(this.storeTrustedSelfKeys(null),this.emit(K.KeysChanged,{}),this.emit(K.UserTrustStatusChanged,this.userId,this.checkUserTrust(e)))}else{await this.checkDeviceVerifications(e);const t=this.deviceList.getStoredCrossSigningForUser(e);t&&(t.updateCrossSigningVerifiedBefore(this.checkUserTrust(e).isCrossSigningVerified()),this.deviceList.setRawStoredCrossSigningForUser(e,t.toStorage())),this.emit(K.UserTrustStatusChanged,e,this.checkUserTrust(e))}})),(0,o.default)(this,"onMembership",((e,t,n)=>{try{this.onRoomMembership(e,t,n)}catch(e){l.logger.error("Error handling membership change:",e)}})),(0,o.default)(this,"onToDeviceEvent",(e=>{try{l.logger.log(`received to_device ${e.getType()} from: ${e.getSender()} id: ${e.getId()}`),"m.room_key"==e.getType()||"m.forwarded_room_key"==e.getType()?this.onRoomKeyEvent(e):"m.room_key_request"==e.getType()?this.onRoomKeyRequestEvent(e):"m.secret.request"===e.getType()?this.secretStorage.onRequestReceived(e):"m.secret.send"===e.getType()?this.secretStorage.onSecretReceived(e):"m.room_key.withheld"===e.getType()?this.onRoomKeyWithheldEvent(e):e.getContent().transaction_id?this.onKeyVerificationMessage(e):"m.bad.encrypted"===e.getContent().msgtype?this.onToDeviceBadEncrypted(e):(e.isBeingDecrypted()||e.shouldAttemptDecryption())&&(e.isBeingDecrypted()||e.attemptDecryption(this),e.once(D.MatrixEventEvent.Decrypted,(e=>{this.onToDeviceEvent(e)})))}catch(e){l.logger.error("Error handling toDeviceEvent:",e)}})),(0,o.default)(this,"onTimelineEvent",((e,t,n,i,{liveEvent:r=!0}={})=>{x.InRoomChannel.validateEvent(e,this.baseApis)&&this.handleVerificationEvent(e,this.inRoomVerificationRequests,(e=>{const t=new x.InRoomChannel(this.baseApis,e.getRoomId());return new T.VerificationRequest(t,this.verificationMethods,this.baseApis)}),r)})),this.reEmitter=new c.TypedReEmitter(this),a){this.verificationMethods=new Map;for(const e of a)"string"==typeof e?j[e]&&this.verificationMethods.set(e,j[e]):e.NAME?this.verificationMethods.set(e.NAME,e):l.logger.warn(`Excluding unknown verification method ${e}`)}else this.verificationMethods=new Map(Object.entries(j));this.backupManager=new O.BackupManager(e,(async()=>{const e=await this.getSessionBackupPrivateKey();if(e)return e;const t=await this.getSecret("m.megolm_backup.v1");if(t){const e=V(t);if(e){const t=await this.getSecretStorageKey();await this.storeSecret("m.megolm_backup.v1",e,[t[0]])}return d.decodeBase64(e||t)}if(this.baseApis.cryptoCallbacks&&this.baseApis.cryptoCallbacks.getBackupKey)return this.baseApis.cryptoCallbacks.getBackupKey();throw new Error("Unable to get private key")})),this.olmDevice=new u.OlmDevice(r),this.deviceList=new h.DeviceList(e,r,this.olmDevice),this.deviceList.on(K.UserCrossSigningUpdated,this.onDeviceListUserCrossSigningUpdated),this.reEmitter.reEmit(this.deviceList,[K.DevicesUpdated,K.WillUpdateDevices]),this.supportedAlgorithms=Array.from(f.DECRYPTION_CLASSES.keys()),this.outgoingRoomKeyRequestManager=new y.OutgoingRoomKeyRequestManager(e,this.deviceId,this.cryptoStore),this.toDeviceVerificationRequests=new C.ToDeviceRequests,this.inRoomVerificationRequests=new x.InRoomRequests;const p=this.baseApis.cryptoCallbacks||{},g=(0,m.createCryptoStoreCacheCallbacks)(r,this.olmDevice);this.crossSigningInfo=new m.CrossSigningInfo(t,p,g),this.secretStorage=new v.SecretStorage(e,p,e),this.dehydrationManager=new A.DehydrationManager(this),!p.getCrossSigningKey&&p.getSecretStorageKey&&(p.getCrossSigningKey=async e=>m.CrossSigningInfo.getFromSecretStorage(e,this.secretStorage))}async init({exportedOlmDevice:e,pickleKey:t}={}){l.logger.log("Crypto: initialising Olm..."),await n.g.Olm.init(),l.logger.log(e?"Crypto: initialising Olm device from exported device...":"Crypto: initialising Olm device..."),await this.olmDevice.init({fromExportedDevice:e,pickleKey:t}),l.logger.log("Crypto: loading device list..."),await this.deviceList.load(),this.deviceKeys["ed25519:"+this.deviceId]=this.olmDevice.deviceEd25519Key,this.deviceKeys["curve25519:"+this.deviceId]=this.olmDevice.deviceCurve25519Key,l.logger.log("Crypto: fetching own devices...");let i=this.deviceList.getRawStoredDevicesForUser(this.userId);if(i||(i={}),!i[this.deviceId]){l.logger.log("Crypto: adding this device to the store...");const e={keys:this.deviceKeys,algorithms:this.supportedAlgorithms,verified:F.VERIFIED,known:!0};i[this.deviceId]=e,this.deviceList.storeDevicesForUser(this.userId,i),this.deviceList.saveIfDirty()}await this.cryptoStore.doTxn("readonly",[b.IndexedDBCryptoStore.STORE_ACCOUNT],(e=>{this.cryptoStore.getCrossSigningKeys(e,(e=>{e&&0!==Object.keys(e).length&&(l.logger.log("Loaded cross-signing public keys from crypto store"),this.crossSigningInfo.setKeys(e))}))})),this.deviceList.startTrackingDeviceList(this.userId),l.logger.log("Crypto: checking for key backup..."),this.backupManager.checkAndStart()}getCryptoTrustCrossSignedDevices(){return this.trustCrossSignedDevices}setCryptoTrustCrossSignedDevices(e){this.trustCrossSignedDevices=e;for(const e of this.deviceList.getKnownUserIds()){const t=this.deviceList.getRawStoredDevicesForUser(e);for(const n of Object.keys(t)){const t=this.checkDeviceTrust(e,n);if(!t.isLocallyVerified()&&t.isCrossSigningVerified()){const t=this.deviceList.getStoredDevice(e,n);this.emit(K.DeviceVerificationChanged,e,n,t)}}}}async createRecoveryKeyFromPassphrase(e){const t=new n.g.Olm.PkDecryption;try{const n={};if(e){const i=await(0,w.keyFromPassphrase)(e);n.passphrase={algorithm:"m.pbkdf2",iterations:i.iterations,salt:i.salt},n.pubkey=t.init_with_private_key(i.key)}else n.pubkey=t.generate_key();const i=t.get_private_key();return{keyInfo:n,encodedPrivateKey:(0,_.encodeRecoveryKey)(i),privateKey:i}}finally{null==t||t.free()}}async isCrossSigningReady(){const e=this.crossSigningInfo.getId(),t=await this.crossSigningInfo.isStoredInKeyCache()||await this.crossSigningInfo.isStoredInSecretStorage(this.secretStorage);return!(!e||!t)}async isSecretStorageReady(){const e=await this.secretStorage.hasKey(),t=await this.crossSigningInfo.isStoredInSecretStorage(this.secretStorage),n=!this.backupManager.getKeyBackupEnabled()||await this.baseApis.isKeyBackupKeyStored();return!!(e&&t&&n)}async bootstrapCrossSigning({authUploadDeviceSigningKeys:e,setupNewCrossSigning:t}={}){l.logger.log("Bootstrapping cross-signing");const n=this.baseApis.cryptoCallbacks,i=new g.EncryptionSetupBuilder(this.baseApis.store.accountData,n),r=new m.CrossSigningInfo(this.userId,i.crossSigningCallbacks,i.crossSigningCallbacks),o=this.crossSigningInfo.getId(),s=await this.crossSigningInfo.isStoredInKeyCache(),a=await this.crossSigningInfo.isStoredInSecretStorage(this.secretStorage),c=s||a;l.logger.log({setupNewCrossSigning:t,publicKeysOnDevice:o,privateKeysInCache:s,privateKeysInStorage:a,privateKeysExistSomewhere:c}),!c||t?(l.logger.log("Cross-signing private keys not found locally or in secret storage, creating new keys"),await(async()=>{r.resetKeys(),await this.signObject(r.keys.master),i.addCrossSigningKeys(e,r.keys);const t=this.deviceList.getStoredDevice(this.userId,this.deviceId),n=await r.signDevice(this.userId,t);i.addKeySignature(this.userId,this.deviceId,n),this.backupManager.backupInfo&&(await r.signObject(this.backupManager.backupInfo.auth_data,"master"),i.addSessionBackup(this.backupManager.backupInfo))})()):o&&s?l.logger.log("Cross-signing public keys trusted and private keys found locally"):a&&(l.logger.log("Cross-signing private keys not found locally, but they are available in secret storage, reading storage and caching locally"),await this.checkOwnCrossSigningTrust({allowPrivateKeyRequests:!0}));const u=i.crossSigningCallbacks.privateKeys;if(u.size&&!this.baseApis.cryptoCallbacks.saveCrossSigningKeys){const e=new v.SecretStorage(i.accountDataClientAdapter,i.ssssCryptoCallbacks,void 0);await e.hasKey()&&(l.logger.log("Storing new cross-signing private keys in secret storage"),await m.CrossSigningInfo.storeInSecretStorage(u,e))}const d=i.buildOperation();await d.apply(this),await i.persist(this),l.logger.log("Cross-signing ready")}async bootstrapSecretStorage({createSecretStorageKey:e=(async()=>({})),keyBackupInfo:t,setupNewKeyBackup:n,setupNewSecretStorage:i,getKeyBackupPassphrase:r}={}){l.logger.log("Bootstrapping Secure Secret Storage");const o=this.baseApis.cryptoCallbacks,s=new g.EncryptionSetupBuilder(this.baseApis.store.accountData,o),a=new v.SecretStorage(s.accountDataClientAdapter,s.ssssCryptoCallbacks,void 0);let c=null;const u=async(e,t)=>{t&&(e.key=t);const{keyId:n,keyInfo:i}=await a.addKey(v.SECRET_STORAGE_ALGORITHM_V1_AES,e);return t&&s.ssssCryptoCallbacks.addPrivateKey(n,i,t),await a.setDefaultKeyId(n),n},h=async e=>{if(this.crossSigningInfo.getId()&&await this.crossSigningInfo.isStoredInKeyCache("master"))try{l.logger.log("Adding cross-signing signature to key backup"),await this.crossSigningInfo.signObject(e,"master")}catch(e){l.logger.error("Signing key backup with cross-signing keys failed",e)}else l.logger.warn("Cross-signing keys not available, skipping signature on key backup")},p=await this.getSecretStorageKey(),[f,y]=p||[null,null],b=!i&&y&&y.algorithm===v.SECRET_STORAGE_ALGORITHM_V1_AES;if(l.logger.log({keyBackupInfo:t,setupNewKeyBackup:n,setupNewSecretStorage:i,storageExists:b,oldKeyInfo:y}),b||t)if(!b&&t){l.logger.log("Secret storage does not exist, using key backup key");const e=await this.getSessionBackupPrivateKey()||await(null==r?void 0:r()),n={};t.auth_data.private_key_salt&&t.auth_data.private_key_iterations&&(n.passphrase={algorithm:"m.pbkdf2",iterations:t.auth_data.private_key_iterations,salt:t.auth_data.private_key_salt,bits:256}),c=await u(n,e),await a.store("m.megolm_backup.v1",d.encodeBase64(e),[c]),await h(t.auth_data),s.addSessionBackup(t)}else l.logger.log("Secret storage exists"),y&&y.algorithm===v.SECRET_STORAGE_ALGORITHM_V1_AES&&await(async(e,t)=>{if(!t.mac){var n,i;const r=await(null===(n=(i=this.baseApis.cryptoCallbacks).getSecretStorageKey)||void 0===n?void 0:n.call(i,{keys:{[e]:t}},""));if(r){const n=r[1];s.ssssCryptoCallbacks.addPrivateKey(e,t,n);const{iv:i,mac:o}=await(0,M.calculateKeyCheck)(n);t.iv=i,t.mac=o,await s.setAccountData(`m.secret_storage.key.${e}`,t)}}})(f,y);else{l.logger.log("Secret storage does not exist, creating new storage key");const{keyInfo:t={},privateKey:n}=await e();c=await u(t,n)}if(!this.baseApis.cryptoCallbacks.saveCrossSigningKeys&&await this.isCrossSigningReady()&&(c||!await this.crossSigningInfo.isStoredInSecretStorage(a))){l.logger.log("Copying cross-signing private keys from cache to secret storage");const e=await this.crossSigningInfo.getCrossSigningKeysFromCache();await m.CrossSigningInfo.storeInSecretStorage(e,a)}if(n&&!t){l.logger.log("Creating new message key backup version");const e=await this.baseApis.prepareKeyBackupVersion(null,{secureSecretStorage:!1}),t=(0,_.decodeRecoveryKey)(e.recovery_key);await a.store("m.megolm_backup.v1",d.encodeBase64(t));const n={algorithm:e.algorithm,auth_data:e.auth_data};await h(n.auth_data),await this.signObject(n.auth_data),s.addSessionBackup(n)}const E=await a.get("m.megolm_backup.v1");if(E){l.logger.info("Got session backup key from secret storage: caching");const e=V(E);if(e){const t=c||f;await a.store("m.megolm_backup.v1",e,t?[t]:null)}const t=new Uint8Array(d.decodeBase64(e||E));s.addSessionBackupPrivateKeyToCache(t)}else if(this.backupManager.getKeyBackupEnabled()){const e=await this.getSessionBackupPrivateKey()||await(null==r?void 0:r());if(!e)return void l.logger.error("Key backup is enabled but couldn't get key backup key!");l.logger.info("Got session backup key from cache/user that wasn't in SSSS: saving to SSSS"),await a.store("m.megolm_backup.v1",d.encodeBase64(e))}const S=s.buildOperation();await S.apply(this),await s.persist(this),l.logger.log("Secure Secret Storage ready")}addSecretStorageKey(e,t,n){return this.secretStorage.addKey(e,t,n)}hasSecretStorageKey(e){return this.secretStorage.hasKey(e)}getSecretStorageKey(e){return this.secretStorage.getKey(e)}storeSecret(e,t,n){return this.secretStorage.store(e,t,n)}getSecret(e){return this.secretStorage.get(e)}isSecretStored(e){return this.secretStorage.isStored(e)}requestSecret(e,t){return t||(t=Object.keys(this.deviceList.getRawStoredDevicesForUser(this.userId))),this.secretStorage.request(e,t)}getDefaultSecretStorageKeyId(){return this.secretStorage.getDefaultKeyId()}setDefaultSecretStorageKeyId(e){return this.secretStorage.setDefaultKeyId(e)}checkSecretStorageKey(e,t){return this.secretStorage.checkKey(e,t)}checkSecretStoragePrivateKey(e,t){let i=null;try{return i=new n.g.Olm.PkDecryption,i.init_with_private_key(e)===t}finally{var r;null===(r=i)||void 0===r||r.free()}}async getSessionBackupPrivateKey(){let e=await new Promise((e=>{this.cryptoStore.doTxn("readonly",[b.IndexedDBCryptoStore.STORE_ACCOUNT],(t=>{this.cryptoStore.getSecretStorePrivateKey(t,e,"m.megolm_backup.v1")}))}));if(e&&"string"==typeof e&&(e=new Uint8Array(d.decodeBase64(V(e)||e)),await this.storeSessionBackupPrivateKey(e)),e&&e.ciphertext){const t=i.from(this.olmDevice.pickleKey),n=await(0,M.decryptAES)(e,t,"m.megolm_backup.v1");e=d.decodeBase64(n)}return e}async storeSessionBackupPrivateKey(e){if(!(e instanceof Uint8Array))throw new Error(`storeSessionBackupPrivateKey expects Uint8Array, got ${e}`);const t=i.from(this.olmDevice.pickleKey),n=await(0,M.encryptAES)(d.encodeBase64(e),t,"m.megolm_backup.v1");return this.cryptoStore.doTxn("readwrite",[b.IndexedDBCryptoStore.STORE_ACCOUNT],(e=>{this.cryptoStore.storeSecretStorePrivateKey(e,"m.megolm_backup.v1",n)}))}checkCrossSigningPrivateKey(e,t){let i=null;try{return i=new n.g.Olm.PkSigning,i.init_with_seed(e)===t}finally{var r;null===(r=i)||void 0===r||r.free()}}async afterCrossSigningLocalKeyChange(){l.logger.info("Starting cross-signing key change post-processing");const e=this.deviceList.getStoredDevice(this.userId,this.deviceId),t=await this.crossSigningInfo.signDevice(this.userId,e);l.logger.info(`Starting background key sig upload for ${this.deviceId}`);const n=({shouldEmit:e=!1})=>this.baseApis.uploadKeySignatures({[this.userId]:{[this.deviceId]:t}}).then((t=>{const{failures:i}=t||{};if(Object.keys(i||[]).length>0)throw e&&this.baseApis.emit(K.KeySignatureUploadFailure,i,"afterCrossSigningLocalKeyChange",n),new k.KeySignatureUploadError("Key upload failed",{failures:i});l.logger.info(`Finished background key sig upload for ${this.deviceId}`)})).catch((e=>{l.logger.error(`Error during background key sig upload for ${this.deviceId}`,e)}));n({shouldEmit:!0});const i=this.baseApis.cryptoCallbacks.shouldUpgradeDeviceVerifications;if(i){l.logger.info("Starting device verification upgrade");const e={};for(const[t,n]of Object.entries(this.deviceList.crossSigningInfo)){const i=await this.checkForDeviceVerificationUpgrade(t,m.CrossSigningInfo.fromStorage(n,t));i&&(e[t]=i)}if(Object.keys(e).length>0){l.logger.info(`Found ${Object.keys(e).length} verif users to upgrade`);try{const t=await i({users:e});if(t)for(const n of t)n in e&&await this.baseApis.setDeviceVerified(n,e[n].crossSigningInfo.getId())}catch(e){l.logger.log("shouldUpgradeDeviceVerifications threw an error: not upgrading",e)}}l.logger.info("Finished device verification upgrade")}l.logger.info("Finished cross-signing key change post-processing")}async checkForDeviceVerificationUpgrade(e,t){const n=this.crossSigningInfo.checkUserTrust(t);if(t.firstUse&&!n.isVerified()){const n=this.deviceList.getRawStoredDevicesForUser(e),i=await this.checkForValidDeviceSignature(e,t.keys.master,n);if(i.length)return{devices:i.map((e=>p.DeviceInfo.fromStorage(n[e],e))),crossSigningInfo:t}}}async checkForValidDeviceSignature(e,t,n){const i=[];if(n&&t.signatures&&t.signatures[e])for(const r of Object.keys(t.signatures[e])){const[,o]=r.split(":",2);if(o in n&&n[o].verified===F.VERIFIED)try{await d.verifySignature(this.olmDevice,t,e,o,n[o].keys[r]),i.push(o)}catch(e){}}return i}getCrossSigningId(e){return this.crossSigningInfo.getId(e)}getStoredCrossSigningForUser(e){return this.deviceList.getStoredCrossSigningForUser(e)}checkUserTrust(e){const t=this.deviceList.getStoredCrossSigningForUser(e);return t?this.crossSigningInfo.checkUserTrust(t):new m.UserTrustLevel(!1,!1,!1)}checkDeviceTrust(e,t){const n=this.deviceList.getStoredDevice(e,t);return this.checkDeviceInfoTrust(e,n)}checkDeviceInfoTrust(e,t){const n=!(null==t||!t.isVerified()),i=this.deviceList.getStoredCrossSigningForUser(e);if(t&&i){const r=this.trustCrossSignedDevices||e===this.userId;return this.crossSigningInfo.checkDeviceTrust(i,t,n,r)}return new m.DeviceTrustLevel(!1,!1,n,!1)}checkIfOwnDeviceCrossSigned(e){var t;const n=this.deviceList.getStoredDevice(this.userId,e);if(!n)return!1;const i=this.deviceList.getStoredCrossSigningForUser(this.userId);return null!==(t=null==i?void 0:i.checkDeviceTrust(i,n,!1,!0).isCrossSigningVerified())&&void 0!==t&&t}async checkOwnCrossSigningTrust({allowPrivateKeyRequests:e=!1}={}){const t=this.userId;await this.downloadKeys([this.userId]);const n=await this.crossSigningInfo.getCrossSigningKeysFromCache(),i=this.deviceList.getStoredCrossSigningForUser(t);if(!i)return void l.logger.error("Got cross-signing update event for user "+t+" but no new cross-signing information found!");const r=i.getId(),o=this.crossSigningInfo.getId()!==r,s=i.getId()&&!n.has("master");if(o&&l.logger.info("Got new master public key",r),e&&(o||s)){l.logger.info("Attempting to retrieve cross-signing master private key");let e=null;try{e=(await this.crossSigningInfo.getCrossSigningKey("master",r))[1],l.logger.info("Got cross-signing master private key")}finally{var a;null===(a=e)||void 0===a||a.free()}}const c=this.crossSigningInfo.getId("self_signing"),u=this.crossSigningInfo.getId("user_signing");this.storeTrustedSelfKeys(i.keys);const d=c!==i.getId("self_signing"),h=u!==i.getId("user_signing"),p=i.getId("self_signing")&&!n.has("self_signing"),f=i.getId("user_signing")&&!n.has("user_signing"),m={};if(d&&l.logger.info("Got new self-signing key",i.getId("self_signing")),e&&(d||p)){l.logger.info("Attempting to retrieve cross-signing self-signing private key");let e=null;try{e=(await this.crossSigningInfo.getCrossSigningKey("self_signing",i.getId("self_signing")))[1],l.logger.info("Got cross-signing self-signing private key")}finally{var g;null===(g=e)||void 0===g||g.free()}const t=this.deviceList.getStoredDevice(this.userId,this.deviceId),n=await this.crossSigningInfo.signDevice(this.userId,t);m[this.deviceId]=n}if(h&&l.logger.info("Got new user-signing key",i.getId("user_signing")),e&&(h||f)){l.logger.info("Attempting to retrieve cross-signing user-signing private key");let e=null;try{e=(await this.crossSigningInfo.getCrossSigningKey("user_signing",i.getId("user_signing")))[1],l.logger.info("Got cross-signing user-signing private key")}finally{var v;null===(v=e)||void 0===v||v.free()}}if(o){const e=this.crossSigningInfo.keys.master;await this.signObject(e);const t=e.signatures[this.userId]["ed25519:"+this.deviceId];m[this.crossSigningInfo.getId()]=Object.assign({},e,{signatures:{[this.userId]:{["ed25519:"+this.deviceId]:t}}})}const y=Object.keys(m);if(y.length){const e=({shouldEmit:t=!1})=>(l.logger.info(`Starting background key sig upload for ${y}`),this.baseApis.uploadKeySignatures({[this.userId]:m}).then((n=>{const{failures:i}=n||{};if(l.logger.info(`Finished background key sig upload for ${y}`),Object.keys(i||[]).length>0)throw t&&this.baseApis.emit(K.KeySignatureUploadFailure,i,"checkOwnCrossSigningTrust",e),new k.KeySignatureUploadError("Key upload failed",{failures:i})})).catch((e=>{l.logger.error(`Error during background key sig upload for ${y}`,e)})));e({shouldEmit:!0})}this.emit(K.UserTrustStatusChanged,t,this.checkUserTrust(t)),o&&(this.emit(K.KeysChanged,{}),await this.afterCrossSigningLocalKeyChange()),await this.backupManager.checkKeyBackup()}async storeTrustedSelfKeys(e){e?this.crossSigningInfo.setKeys(e):this.crossSigningInfo.clearKeys(),await this.cryptoStore.doTxn("readwrite",[b.IndexedDBCryptoStore.STORE_ACCOUNT],(e=>{this.cryptoStore.storeCrossSigningKeys(e,this.crossSigningInfo.keys)}))}async checkDeviceVerifications(e){const t=this.baseApis.cryptoCallbacks.shouldUpgradeDeviceVerifications;if(t){if(l.logger.info(`Starting device verification upgrade for ${e}`),this.crossSigningInfo.keys.user_signing){const n=this.deviceList.getStoredCrossSigningForUser(e);if(n){const i=await this.checkForDeviceVerificationUpgrade(e,n);i&&(await t({users:{[e]:i}})).includes(e)&&await this.baseApis.setDeviceVerified(e,n.getId())}}l.logger.info(`Finished device verification upgrade for ${e}`)}}enableLazyLoading(){this.lazyLoadMembers=!0}registerEventHandlers(e){e.on(L.RoomMemberEvent.Membership,this.onMembership),e.on(N.ClientEvent.ToDeviceEvent,this.onToDeviceEvent),e.on(R.RoomEvent.Timeline,this.onTimelineEvent),e.on(D.MatrixEventEvent.Decrypted,this.onTimelineEvent)}start(){l.logger.warn("MatrixClient.crypto.start() is deprecated")}stop(){this.outgoingRoomKeyRequestManager.stop(),this.deviceList.stop(),this.dehydrationManager.stop()}getDeviceEd25519Key(){return this.olmDevice.deviceEd25519Key}getDeviceCurve25519Key(){return this.olmDevice.deviceCurve25519Key}setGlobalBlacklistUnverifiedDevices(e){this.globalBlacklistUnverifiedDevices=e}getGlobalBlacklistUnverifiedDevices(){return this.globalBlacklistUnverifiedDevices}uploadDeviceKeys(){const e={algorithms:this.supportedAlgorithms,device_id:this.deviceId,keys:this.deviceKeys,user_id:this.userId};return this.signObject(e).then((()=>this.baseApis.uploadKeysRequest({device_keys:e})))}updateOneTimeKeyCount(e){if(!isFinite(e))throw new TypeError("Parameter for updateOneTimeKeyCount has to be a number");this.oneTimeKeyCount=e}setNeedsNewFallback(e){this.needsNewFallback=e}getNeedsNewFallback(){return!!this.needsNewFallback}maybeUploadOneTimeKeys(){if(this.oneTimeKeyCheckInProgress)return;const e=Date.now();if(null!==this.lastOneTimeKeyCheck&&e-this.lastOneTimeKeyCheck<6e4)return;this.lastOneTimeKeyCheck=e;const t=this.olmDevice.maxNumberOfOneTimeKeys(),n=Math.floor(t/2),i=async e=>{for(;n>e||this.getNeedsNewFallback();){if(n>e){l.logger.info("generating oneTimeKeys");const t=Math.min(n-e,5);await this.olmDevice.generateOneTimeKeys(t)}if(this.getNeedsNewFallback()){const e=await this.olmDevice.getFallbackKey();e.curve25519&&0!=Object.keys(e.curve25519).length||(l.logger.info("generating fallback key"),this.fallbackCleanup&&(clearTimeout(this.fallbackCleanup),delete this.fallbackCleanup),await this.olmDevice.generateFallbackKey())}l.logger.info("calling uploadOneTimeKeys");const t=await this.uploadOneTimeKeys();if(!t.one_time_key_counts||!t.one_time_key_counts.signed_curve25519)throw new Error("response for uploading keys does not contain one_time_key_counts.signed_curve25519");e=t.one_time_key_counts.signed_curve25519}};this.oneTimeKeyCheckInProgress=!0,Promise.resolve().then((()=>void 0!==this.oneTimeKeyCount?Promise.resolve(this.oneTimeKeyCount):this.baseApis.uploadKeysRequest({}).then((e=>e.one_time_key_counts.signed_curve25519||0)))).then((e=>i(e))).catch((e=>{l.logger.error("Error uploading one-time keys",e.stack||e)})).finally((()=>{this.oneTimeKeyCount=void 0,this.oneTimeKeyCheckInProgress=!1}))}async uploadOneTimeKeys(){const e=[];let t;if(this.getNeedsNewFallback()){t={};const n=await this.olmDevice.getFallbackKey();for(const[i,r]of Object.entries(n.curve25519)){const n={key:r,fallback:!0};t["signed_curve25519:"+i]=n,e.push(this.signObject(n))}this.setNeedsNewFallback(!1)}const n=await this.olmDevice.getOneTimeKeys(),i={};for(const t in n.curve25519)if(n.curve25519.hasOwnProperty(t)){const r={key:n.curve25519[t]};i["signed_curve25519:"+t]=r,e.push(this.signObject(r))}await Promise.all(e);const r={one_time_keys:i};t&&(r["org.matrix.msc2732.fallback_keys"]=t,r.fallback_keys=t);const o=await this.baseApis.uploadKeysRequest(r);return t&&(this.fallbackCleanup=setTimeout((()=>{delete this.fallbackCleanup,this.olmDevice.forgetOldFallbackKey()}),36e5)),await this.olmDevice.markKeysAsPublished(),o}downloadKeys(e,t){return this.deviceList.downloadKeys(e,!!t)}getStoredDevicesForUser(e){return this.deviceList.getStoredDevicesForUser(e)}getStoredDevice(e,t){return this.deviceList.getStoredDevice(e,t)}saveDeviceList(e){return this.deviceList.saveIfDirty(e)}async setDeviceVerification(e,t,n=null,i=null,r=null,o){const s=this.deviceList.getStoredCrossSigningForUser(e);if(s&&s.getId()===t){if(null!==i||null!==r)throw new Error("Cannot set blocked or known for a cross-signing key");if(!n)throw new Error("Cannot set a cross-signing key as unverified");const a=o?Object.values(o)[0]:null;if(o&&(1!==Object.values(o).length||a!==s.getId()))throw new Error(`Key did not match expected value: expected ${s.getId()}, got ${a}`);if(this.crossSigningInfo.getId()||e!==this.crossSigningInfo.userId||(this.storeTrustedSelfKeys(s.keys),this.emit(K.UserTrustStatusChanged,this.userId,this.checkUserTrust(e))),e!==this.userId){l.logger.info("Master key "+s.getId()+" for "+e+" marked verified. Signing...");const n=await this.crossSigningInfo.signUser(s);if(n){const i=async({shouldEmit:r=!1})=>{l.logger.info("Uploading signature for "+e+"...");const o=await this.baseApis.uploadKeySignatures({[e]:{[t]:n}}),{failures:s}=o||{};if(Object.keys(s||[]).length>0)throw r&&this.baseApis.emit(K.KeySignatureUploadFailure,s,"setDeviceVerification",i),new k.KeySignatureUploadError("Key upload failed",{failures:s})};await i({shouldEmit:!0})}return n}return s}const a=this.deviceList.getRawStoredDevicesForUser(e);if(!a||!a[t])throw new Error("Unknown device "+e+":"+t);const c=a[t];let u=c.verified;if(n){if(o)for(const[e,t]of Object.entries(o))if(c.keys[e]!==t)throw new Error(`Key did not match expected value: expected ${t}, got ${c.keys[e]}`);u=F.VERIFIED}else null!==n&&u==F.VERIFIED&&(u=F.UNVERIFIED);i?u=F.BLOCKED:null!==i&&u==F.BLOCKED&&(u=F.UNVERIFIED);let d=c.known;if(null!==r&&(d=r),c.verified===u&&c.known===d||(c.verified=u,c.known=d,this.deviceList.storeDevicesForUser(e,a),this.deviceList.saveIfDirty()),n&&e===this.userId){let n;if(l.logger.info("Own device "+t+" marked verified: signing"),this.checkDeviceTrust(e,t).isCrossSigningVerified()?l.logger.log(`Own device ${t} already cross-signing verified`):n=await this.crossSigningInfo.signDevice(e,p.DeviceInfo.fromStorage(c,t)),n){const i=async({shouldEmit:r=!1})=>{l.logger.info("Uploading signature for "+t);const o=await this.baseApis.uploadKeySignatures({[e]:{[t]:n}}),{failures:s}=o||{};if(Object.keys(s||[]).length>0)throw r&&this.baseApis.emit(K.KeySignatureUploadFailure,s,"setDeviceVerification",i),new k.KeySignatureUploadError("Key upload failed",{failures:s})};await i({shouldEmit:!0})}}const h=p.DeviceInfo.fromStorage(c,t);return this.emit(K.DeviceVerificationChanged,e,t,h),h}findVerificationRequestDMInProgress(e){return this.inRoomVerificationRequests.findRequestInProgress(e)}getVerificationRequestsToDeviceInProgress(e){return this.toDeviceVerificationRequests.getRequestsInProgress(e)}requestVerificationDM(e,t){const n=this.inRoomVerificationRequests.findRequestInProgress(t);if(n)return Promise.resolve(n);const i=new x.InRoomChannel(this.baseApis,t,e);return this.requestVerificationWithChannel(e,i,this.inRoomVerificationRequests)}requestVerification(e,t){t||(t=Object.keys(this.deviceList.getRawStoredDevicesForUser(e)));const n=this.toDeviceVerificationRequests.findRequestInProgress(e,t);if(n)return Promise.resolve(n);const i=new C.ToDeviceChannel(this.baseApis,e,t,C.ToDeviceChannel.makeTransactionId());return this.requestVerificationWithChannel(e,i,this.toDeviceVerificationRequests)}async requestVerificationWithChannel(e,t,n){let i=new T.VerificationRequest(t,this.verificationMethods,this.baseApis);t.transactionId&&n.setRequestByChannel(t,i),await i.sendRequest();const r=n.getRequestByChannel(t);return r?i=r:(l.logger.log(`Crypto: adding new request to requestsByTxnId with id ${t.transactionId} ${t.roomId}`),n.setRequestByChannel(t,i)),i}beginKeyVerification(e,t,n,i=null){let r;if(i){if(r=this.toDeviceVerificationRequests.getRequestBySenderAndTxnId(t,i),!r)throw new Error(`No request found for user ${t} with transactionId ${i}`)}else{i=C.ToDeviceChannel.makeTransactionId();const e=new C.ToDeviceChannel(this.baseApis,t,[n],i,n);r=new T.VerificationRequest(e,this.verificationMethods,this.baseApis),this.toDeviceVerificationRequests.setRequestBySenderAndTxnId(t,i,r)}return r.beginKeyVerification(e,{userId:t,deviceId:n})}async legacyDeviceVerification(e,t,n){const i=C.ToDeviceChannel.makeTransactionId(),r=new C.ToDeviceChannel(this.baseApis,e,[t],i,t),o=new T.VerificationRequest(r,this.verificationMethods,this.baseApis);this.toDeviceVerificationRequests.setRequestBySenderAndTxnId(e,i,o);const s=o.beginKeyVerification(n,{userId:e,deviceId:t});return await Promise.race([s.verify(),o.waitFor((e=>e.started))]),o}async getOlmSessionsForUser(e){const t=this.getStoredDevicesForUser(e)||[],n={};for(const e of t){const t=e.getIdentityKey(),i=await this.olmDevice.getSessionInfoForDevice(t);n[e.deviceId]={deviceIdKey:t,sessions:i}}return n}getEventSenderDeviceInfo(e){const t=e.getSenderKey(),n=e.getWireContent().algorithm;if(!t||!n)return null;if(e.isKeySourceUntrusted())return null;const i=this.deviceList.getDeviceByIdentityKey(n,t);if(null===i)return null;const r=e.getClaimedEd25519Key();return r?r!==i.getFingerprint()?(l.logger.warn("Event "+e.getId()+" claims ed25519 key "+r+" but sender device has key "+i.getFingerprint()),null):i:(l.logger.warn("Event "+e.getId()+" claims no ed25519 key: cannot verify sending device"),null)}getEventEncryptionInfo(e){var t,n;const i={};if(i.senderKey=null!==(t=e.getSenderKey())&&void 0!==t?t:void 0,i.algorithm=e.getWireContent().algorithm,!i.senderKey||!i.algorithm)return i.encrypted=!1,i;i.encrypted=!0,e.isKeySourceUntrusted()?i.authenticated=!1:i.authenticated=!0,i.sender=null!==(n=this.deviceList.getDeviceByIdentityKey(i.algorithm,i.senderKey))&&void 0!==n?n:void 0;const r=e.getClaimedEd25519Key();return r||(l.logger.warn("Event "+e.getId()+" claims no ed25519 key: cannot verify sending device"),i.mismatchedSender=!0),i.sender&&r!==i.sender.getFingerprint()&&(l.logger.warn("Event "+e.getId()+" claims ed25519 key "+r+"but sender device has key "+i.sender.getFingerprint()),i.mismatchedSender=!0),i}forceDiscardSession(e){const t=this.roomEncryptors.get(e);if(void 0===t)throw new Error("Room not encrypted");if(void 0===t.forceDiscardSession)throw new Error("Room encryption algorithm doesn't support session discarding");t.forceDiscardSession()}async setRoomEncryption(e,t,n){if(!t.algorithm)return void l.logger.log("Ignoring setRoomEncryption with no algorithm");const i=this.roomList.getRoomEncryption(e);if(i&&JSON.stringify(i)!=JSON.stringify(t))return void l.logger.error("Ignoring m.room.encryption event which requests a change of config in "+e);if(this.roomEncryptors.get(e))return;let r=null;i||(r=this.roomList.setRoomEncryption(e,t));const o=f.ENCRYPTION_CLASSES.get(t.algorithm);if(!o)throw new Error("Unable to encrypt with "+t.algorithm);const s=new o({userId:this.userId,deviceId:this.deviceId,crypto:this,olmDevice:this.olmDevice,baseApis:this.baseApis,roomId:e,config:t});this.roomEncryptors.set(e,s),r&&await r,this.lazyLoadMembers?l.logger.log("Enabling encryption in "+e):(l.logger.log("Enabling encryption in "+e+"; starting to track device lists for all users therein"),await this.trackRoomDevices(e),n||this.deviceList.refreshOutdatedDeviceLists())}trackRoomDevices(e){let t=this.roomDeviceTrackingState[e];return t||(t=(async()=>{if(!this.roomEncryptors.has(e))return;const t=this.clientStore.getRoom(e);if(!t)throw new Error(`Unable to start tracking devices in unknown room ${e}`);l.logger.log(`Starting to track devices for room ${e} ...`),(await t.getEncryptionTargetMembers()).forEach((e=>{this.deviceList.startTrackingDeviceList(e.userId)}))})(),this.roomDeviceTrackingState[e]=t.catch((t=>{throw delete this.roomDeviceTrackingState[e],t}))),t}ensureOlmSessionsForUsers(e,t){const n={};for(const t of e){n[t]=[];const e=this.getStoredDevicesForUser(t)||[];for(const i of e)i.getIdentityKey()!=this.olmDevice.deviceCurve25519Key&&i.verified!=F.BLOCKED&&n[t].push(i)}return d.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,n,t)}async exportRoomKeys(){const e=[];return await this.cryptoStore.doTxn("readonly",[b.IndexedDBCryptoStore.STORE_INBOUND_GROUP_SESSIONS],(t=>{this.cryptoStore.getAllEndToEndInboundGroupSessions(t,(t=>{if(null===t)return;const n=this.olmDevice.exportInboundGroupSession(t.senderKey,t.sessionId,t.sessionData);delete n.first_known_index,n.algorithm=d.MEGOLM_ALGORITHM,e.push(n)}))})),e}importRoomKeys(e,t={}){let n=0,i=0;const r=e.length;function o(){var e;null===(e=t.progressCallback)||void 0===e||e.call(t,{stage:"load_keys",successes:n,failures:i,total:r})}return Promise.all(e.map((e=>e.room_id&&e.algorithm?this.getRoomDecryptor(e.room_id,e.algorithm).importRoomKey(e,t).finally((()=>{n++,t.progressCallback&&o()})):(l.logger.warn("ignoring room key entry with missing fields",e),i++,t.progressCallback&&o(),null)))).then()}countSessionsNeedingBackup(){return this.backupManager.countSessionsNeedingBackup()}prepareToEncrypt(e){const t=this.roomEncryptors.get(e.roomId);t&&t.prepareToEncrypt(e)}async encryptEvent(e,t){if(!t)throw new Error("Cannot send encrypted messages in unknown rooms");const n=e.getRoomId(),i=this.roomEncryptors.get(n);if(!i)throw new Error("Room was previously configured to use encryption, but is no longer. Perhaps the homeserver is hiding the configuration event.");this.roomDeviceTrackingState[n]||this.trackRoomDevices(n),await this.roomDeviceTrackingState[n];let r=e.getContent();const o=r["m.relates_to"];o&&(r=Object.assign({},r),delete r["m.relates_to"]);const s=r["io.element.performance_metrics"];s&&(r=Object.assign({},r),delete r["io.element.performance_metrics"]);const a=await i.encryptMessage(t,e.getType(),r);o&&(a["m.relates_to"]=o),s&&(a["io.element.performance_metrics"]=s),e.makeEncrypted("m.room.encrypted",a,this.olmDevice.deviceCurve25519Key,this.olmDevice.deviceEd25519Key)}async decryptEvent(e){if(e.isRedacted()){const t=new D.MatrixEvent(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({room_id:e.getRoomId()},e.getUnsigned().redacted_because)),n=await this.decryptEvent(t);return{clearEvent:{room_id:e.getRoomId(),type:"m.room.message",content:{},unsigned:{redacted_because:n.clearEvent}}}}{const t=e.getWireContent();return this.getRoomDecryptor(e.getRoomId(),t.algorithm).decryptEvent(e)}}async handleDeviceListChanges(e,t){e.oldSyncToken&&await this.evalDeviceListChanges(t)}requestRoomKey(e,t,n=!1){return this.outgoingRoomKeyRequestManager.queueRoomKeyRequest(e,t,n).then((()=>{this.sendKeyRequestsImmediately&&this.outgoingRoomKeyRequestManager.sendQueuedRequests()})).catch((e=>{l.logger.error("Error requesting key for event",e)}))}cancelRoomKeyRequest(e){this.outgoingRoomKeyRequestManager.cancelRoomKeyRequest(e).catch((e=>{l.logger.warn("Error clearing pending room key requests",e)}))}async cancelAndResendAllOutgoingKeyRequests(){await this.outgoingRoomKeyRequestManager.cancelAndResendAllOutgoingRequests()}async onCryptoEvent(e){const t=e.getRoomId(),n=e.getContent();try{await this.setRoomEncryption(t,n,!0)}catch(e){l.logger.error(`Error configuring encryption in room ${t}`,e)}}async onSyncWillProcess(e){e.oldSyncToken||(l.logger.log("Initial sync performed - resetting device tracking state"),this.deviceList.stopTrackingAllDeviceLists(),this.deviceList.startTrackingDeviceList(this.userId),this.roomDeviceTrackingState={}),this.sendKeyRequestsImmediately=!1}async onSyncCompleted(e){var t;this.deviceList.setSyncToken(null!==(t=e.nextSyncToken)&&void 0!==t?t:null),this.deviceList.saveIfDirty(),this.deviceList.startTrackingDeviceList(this.userId),this.deviceList.refreshOutdatedDeviceLists(),e.catchingUp||(this.maybeUploadOneTimeKeys(),this.processReceivedRoomKeyRequests(),this.outgoingRoomKeyRequestManager.sendQueuedRequests(),this.sendKeyRequestsImmediately=!0)}async evalDeviceListChanges(e){if(e.changed&&Array.isArray(e.changed)&&e.changed.forEach((e=>{this.deviceList.invalidateUserDeviceList(e)})),e.left&&Array.isArray(e.left)&&e.left.length){const t=new Set(await this.getTrackedE2eUsers());e.left.forEach((e=>{t.has(e)||this.deviceList.stopTrackingDeviceList(e)}))}}async getTrackedE2eUsers(){const e=[];for(const t of this.getTrackedE2eRooms()){const n=await t.getEncryptionTargetMembers();for(const t of n)e.push(t.userId)}return e}getTrackedE2eRooms(){return this.clientStore.getRooms().filter((e=>{if(!this.roomEncryptors.get(e.roomId))return!1;if(!this.roomDeviceTrackingState[e.roomId])return!1;const t=e.getMyMembership();return"join"===t||"invite"===t}))}async encryptAndSendToDevices(e,t){const n={eventType:a.EventType.RoomMessageEncrypted,batch:[]};try{await Promise.all(e.map((async({userId:e,deviceInfo:i})=>{const r=i.deviceId,o={algorithm:d.OLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{}};n.batch.push({userId:e,deviceId:r,payload:o}),await d.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,{[e]:[i]}),await d.encryptMessageForDevice(o.ciphertext,this.userId,this.deviceId,this.olmDevice,e,i,t)}))),n.batch=n.batch.filter((e=>Object.keys(e.payload.ciphertext).length>0||(l.logger.log(`No ciphertext for device ${e.userId}:${e.deviceId}: pruning`),!1)));try{await this.baseApis.queueToDevice(n)}catch(e){throw l.logger.error("sendToDevice failed",e),e}}catch(e){throw l.logger.error("encryptAndSendToDevices promises failed",e),e}}onRoomKeyEvent(e){const t=e.getContent();t.room_id&&t.algorithm?(this.backupManager.checkedForBackup||this.backupManager.checkAndStart(),this.getRoomDecryptor(t.room_id,t.algorithm).onRoomKeyEvent(e)):l.logger.error("key event is missing fields")}onRoomKeyWithheldEvent(e){const t=e.getContent();if(!(("m.no_olm"===t.code||t.room_id&&t.session_id)&&t.algorithm&&t.sender_key))return void l.logger.error("key withheld event is missing fields");l.logger.info(`Got room key withheld event from ${e.getSender()} for ${t.algorithm} session ${t.sender_key}|${t.session_id} in room ${t.room_id} with code ${t.code} (${t.reason})`);const n=this.getRoomDecryptor(t.room_id,t.algorithm);if(n.onRoomKeyWithheldEvent&&n.onRoomKeyWithheldEvent(e),!t.room_id){const e=this.getRoomDecryptors(t.algorithm);for(const n of e)n.retryDecryptionFromSender(t.sender_key)}}onKeyVerificationMessage(e){C.ToDeviceChannel.validateEvent(e,this.baseApis)&&this.handleVerificationEvent(e,this.toDeviceVerificationRequests,(e=>{if(!C.ToDeviceChannel.canCreateRequest(C.ToDeviceChannel.getEventType(e)))return;const t=e.getContent(),n=t&&t.from_device;if(!n)return;const i=e.getSender(),r=new C.ToDeviceChannel(this.baseApis,i,[n]);return new T.VerificationRequest(r,this.verificationMethods,this.baseApis)}))}async handleVerificationEvent(e,t,n,i=!0){if(e.isSending()&&e.status!=D.EventStatus.SENT){let t,n;try{await new Promise(((i,r)=>{t=i,n=()=>{e.status==D.EventStatus.CANCELLED&&r(new Error("Event status set to CANCELLED."))},e.once(D.MatrixEventEvent.LocalEventIdReplaced,t),e.on(D.MatrixEventEvent.Status,n)}))}catch(e){return void l.logger.error("error while waiting for the verification event to be sent: ",e)}finally{e.removeListener(D.MatrixEventEvent.LocalEventIdReplaced,t),e.removeListener(D.MatrixEventEvent.Status,n)}}let r=t.getRequest(e),o=!1;if(!r){if(r=n(e),!r)return void l.logger.log(`Crypto: could not find VerificationRequest for ${e.getType()}, and could not create one, so ignoring.`);o=!0,t.setRequest(e,r)}e.setVerificationRequest(r);try{await r.channel.handleEvent(e,r,i)}catch(e){l.logger.error("error while handling verification event",e)}o&&!r.initiatedByMe&&!r.invalid&&!r.observeOnly&&this.baseApis.emit(K.VerificationRequest,r)}async onToDeviceBadEncrypted(e){const t=e.getWireContent(),n=e.getSender(),i=t.algorithm,r=t.sender_key,o=()=>{const e=this.getRoomDecryptors(d.MEGOLM_ALGORITHM);for(const t of e)t.retryDecryptionFromSender(r)};if(void 0===n||void 0===r||void 0===r)return;this.lastNewSessionForced[n]=this.lastNewSessionForced[n]||{};const s=this.lastNewSessionForced[n][r]||0;if(s+36e5>Date.now())return l.logger.debug("New session already forced with device "+n+":"+r+" at "+s+": not forcing another"),await this.olmDevice.recordSessionProblem(r,"wedged",!0),void o();let a=this.deviceList.getDeviceByIdentityKey(i,r);if(!a&&(await this.downloadKeys([n],!1),a=this.deviceList.getDeviceByIdentityKey(i,r),!a))return l.logger.info("Couldn't find device for identity key "+r+": not re-establishing session"),await this.olmDevice.recordSessionProblem(r,"wedged",!1),void o();const c={};c[n]=[a],await d.ensureOlmSessionsForDevices(this.olmDevice,this.baseApis,c,!0),this.lastNewSessionForced[n][r]=Date.now();const u={algorithm:d.OLM_ALGORITHM,sender_key:this.olmDevice.deviceCurve25519Key,ciphertext:{}};await d.encryptMessageForDevice(u.ciphertext,this.userId,this.deviceId,this.olmDevice,n,a,{type:"m.dummy"}),await this.olmDevice.recordSessionProblem(r,"wedged",!0),o(),await this.baseApis.sendToDevice("m.room.encrypted",{[n]:{[a.deviceId]:u}});const h=await this.outgoingRoomKeyRequestManager.getOutgoingSentRoomKeyRequest(n,a.deviceId);for(const e of h)this.requestRoomKey(e.requestBody,e.recipients,!0)}onRoomMembership(e,t,n){const i=t.roomId,r=this.roomEncryptors.get(i);var o;r&&(i in this.roomDeviceTrackingState&&("join"==t.membership?(l.logger.log("Join event for "+t.userId+" in "+i),this.deviceList.startTrackingDeviceList(t.userId)):"invite"==t.membership&&null!==(o=this.clientStore.getRoom(i))&&void 0!==o&&o.shouldEncryptForInvitedMembers()&&(l.logger.log("Invite event for "+t.userId+" in "+i),this.deviceList.startTrackingDeviceList(t.userId))),r.onRoomMembership(e,t,n))}onRoomKeyRequestEvent(e){const t=e.getContent();if("request"===t.action){const t=new G(e);this.receivedRoomKeyRequests.push(t)}else if("request_cancellation"===t.action){const t=new W(e);this.receivedRoomKeyRequestCancellations.push(t)}}async processReceivedRoomKeyRequests(){if(!this.processingRoomKeyRequests){this.processingRoomKeyRequests=!0;try{const e=this.receivedRoomKeyRequests;this.receivedRoomKeyRequests=[];const t=this.receivedRoomKeyRequestCancellations;this.receivedRoomKeyRequestCancellations=[],await Promise.all(e.map((e=>this.processReceivedRoomKeyRequest(e)))),await Promise.all(t.map((e=>this.processReceivedRoomKeyRequestCancellation(e))))}catch(e){l.logger.error(`Error processing room key requsts: ${e}`)}finally{this.processingRoomKeyRequests=!1}}}async processReceivedRoomKeyRequest(e){const t=e.userId,n=e.deviceId,i=e.requestBody,r=i.room_id,o=i.algorithm;if(l.logger.log(`m.room_key_request from ${t}:${n} for ${r} / ${i.session_id} (id ${e.requestId})`),t!==this.userId){if(!this.roomEncryptors.get(r))return void l.logger.debug(`room key request for unencrypted room ${r}`);const e=this.roomEncryptors.get(r),o=this.deviceList.getStoredDevice(t,n);if(!o)return void l.logger.debug(`Ignoring keyshare for unknown device ${t}:${n}`);try{await e.reshareKeyWithDevice(i.sender_key,i.session_id,t,o)}catch(e){l.logger.warn("Failed to re-share keys for session "+i.session_id+" with device "+t+":"+o.deviceId,e)}return}if(n===this.deviceId)return void l.logger.log("Ignoring room key request from ourselves");if(!this.roomDecryptors.has(r))return void l.logger.log(`room key request for unencrypted room ${r}`);const s=this.roomDecryptors.get(r).get(o);if(s)if(await s.hasKeysForKeyRequest(e)){if(e.share=()=>{s.shareKeysWithDevice(e)},this.checkDeviceTrust(t,n).isVerified())return l.logger.log("device is already verified: sharing keys"),void e.share();this.emit(K.RoomKeyRequest,e)}else l.logger.log(`room key request for unknown session ${r} / `+i.session_id);else l.logger.log(`room key request for unknown alg ${o} in room ${r}`)}async processReceivedRoomKeyRequestCancellation(e){l.logger.log(`m.room_key_request cancellation for ${e.userId}:${e.deviceId} (id ${e.requestId})`),this.emit(K.RoomKeyRequestCancellation,e)}getRoomDecryptor(e,t){let n,i;if(e&&(n=this.roomDecryptors.get(e),n||(n=new Map,this.roomDecryptors.set(e,n)),i=n.get(t),i))return i;const r=f.DECRYPTION_CLASSES.get(t);if(!r)throw new f.DecryptionError("UNKNOWN_ENCRYPTION_ALGORITHM",'Unknown encryption algorithm "'+t+'".');return i=new r({userId:this.userId,crypto:this,olmDevice:this.olmDevice,baseApis:this.baseApis,roomId:null!=e?e:void 0}),n&&n.set(t,i),i}getRoomDecryptors(e){const t=[];for(const n of this.roomDecryptors.values())n.has(e)&&t.push(n.get(e));return t}async signObject(e){const t=e.signatures||{},n=e.unsigned;delete e.signatures,delete e.unsigned,t[this.userId]=t[this.userId]||{},t[this.userId]["ed25519:"+this.deviceId]=await this.olmDevice.sign(s.default.stringify(e)),e.signatures=t,void 0!==n&&(e.unsigned=n)}}function V(e){if("string"!=typeof e||e.indexOf(",")<0)return null;const t=Uint8Array.from(e.split(","),(e=>parseInt(e)));return d.encodeBase64(t)}t.Crypto=q;class G{constructor(e){(0,o.default)(this,"userId",void 0),(0,o.default)(this,"deviceId",void 0),(0,o.default)(this,"requestId",void 0),(0,o.default)(this,"requestBody",void 0),(0,o.default)(this,"share",void 0);const t=e.getContent();this.userId=e.getSender(),this.deviceId=t.requesting_device_id,this.requestId=t.request_id,this.requestBody=t.body||{},this.share=()=>{throw new Error("don't know how to share keys for this request yet")}}}t.IncomingRoomKeyRequest=G;class W{constructor(e){(0,o.default)(this,"userId",void 0),(0,o.default)(this,"deviceId",void 0),(0,o.default)(this,"requestId",void 0);const t=e.getContent();this.userId=e.getSender(),this.deviceId=t.requesting_device_id,this.requestId=t.request_id}}},91597:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKey=s,t.keyFromAuthData=function(e,t){if(!n.g.Olm)throw new Error("Olm is not available");if(!e.private_key_salt||!e.private_key_iterations)throw new Error("Salt and/or iterations not found: this backup cannot be restored with a passphrase");return s(t,e.private_key_salt,e.private_key_iterations,e.private_key_bits||256)},t.keyFromPassphrase=async function(e){if(!n.g.Olm)throw new Error("Olm is not available");const t=(0,i.randomString)(32);return{key:await s(e,t,o,256),salt:t,iterations:o}};var i=n(98401),r=n(39126);const o=5e5;async function s(e,t,n,i=256){if(!r.subtleCrypto||!r.TextEncoder)throw new Error("Password-based backup is not available on this platform");const o=await r.subtleCrypto.importKey("raw",(new r.TextEncoder).encode(e),{name:"PBKDF2"},!1,["deriveBits"]),s=await r.subtleCrypto.deriveBits({name:"PBKDF2",salt:(new r.TextEncoder).encode(t),iterations:n,hash:"SHA-512"},o,i);return new Uint8Array(s)}},32772:(e,t,n)=>{"use strict";var i=n(48764).Buffer,r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OLM_ALGORITHM=t.MEGOLM_BACKUP_ALGORITHM=t.MEGOLM_ALGORITHM=void 0,t.decodeBase64=function(e){return i.from(e,"base64")},t.encodeBase64=f,t.encodeUnpaddedBase64=function(e){return f(e).replace(/=+$/g,"")},t.encryptMessageForDevice=async function(e,t,n,i,r,o,s){const c=o.getIdentityKey(),l=await i.getSessionIdForDevice(c);if(null===l)return void a.logger.log(`[olmlib.encryptMessageForDevice] Unable to find Olm session for device ${r}:${o.deviceId}`);a.logger.log(`[olmlib.encryptMessageForDevice] Using Olm session ${l} for device ${r}:${o.deviceId}`);const u={sender:t,sender_device:n,keys:{ed25519:i.deviceEd25519Key},recipient:r,recipient_keys:{ed25519:o.getFingerprint()}};Object.assign(u,s),e[c]=await i.encryptMessage(c,l,JSON.stringify(u))},t.ensureOlmSessionsForDevices=async function(e,t,n,i=!1,r,o,s=a.logger){const c=[],l={},u={};for(const[,t]of Object.entries(n))for(const n of t){const t=n.getIdentityKey();t!==e.deviceCurve25519Key&&(e.sessionsInProgress[t]||(e.sessionsInProgress[t]=new Promise((n=>{u[t]=i=>{delete e.sessionsInProgress[t],n(i)}}))))}for(const[t,r]of Object.entries(n)){l[t]={};for(const n of r){const r=n.deviceId,o=n.getIdentityKey();if(o===e.deviceCurve25519Key){s.info("Attempted to start session with ourself! Ignoring"),l[t][r]={device:n,sessionId:null};continue}const a=`for ${o} (${t}:${r})`,d=await e.getSessionIdForDevice(o,!!u[o],s);null!==d&&u[o]&&u[o](),(null===d||i)&&(i?s.info(`Forcing new Olm session ${a}`):s.info(`Making new Olm session ${a}`),c.push([t,r])),l[t][r]={device:n,sessionId:d}}}if(0===c.length)return l;let d,p=`one-time keys for ${c.length} devices`;try{s.debug(`Claiming ${p}`),d=await t.claimOneTimeKeys(c,"signed_curve25519",r),s.debug(`Claimed ${p}`)}catch(e){for(const e of Object.values(u))e();throw s.log(`Failed to claim ${p}`,e,c),e}o&&"failures"in d&&o.push(...Object.keys(d.failures));const f=d.one_time_keys||{},m=[];for(const[t,r]of Object.entries(n)){const n=f[t]||{};for(const o of r){const r=o.deviceId,a=o.getIdentityKey();if(a===e.deviceCurve25519Key)continue;if(l[t][r].sessionId&&!i)continue;const c=n[r]||{};let d=null;for(const e in c)0===e.indexOf("signed_curve25519:")&&(d=c[e]);d?m.push(h(e,d,t,o).then((e=>{u[a]&&u[a](null!=e?e:void 0),l[t][r].sessionId=e}),(e=>{throw u[a]&&u[a](),e}))):(s.warn(`No one-time keys (alg=signed_curve25519) for device ${t}:${r}`),u[a]&&u[a]())}}return p=`Olm sessions for ${m.length} devices`,s.debug(`Starting ${p}`),await Promise.all(m),s.debug(`Started ${p}`),l},t.getExistingOlmSessions=async function(e,t,n){const i={},r={},o=[];for(const[t,s]of Object.entries(n))for(const n of s){const s=n.deviceId,a=n.getIdentityKey();o.push((async()=>{const o=await e.getSessionIdForDevice(a,!0);null===o?(i[t]=i[t]||[],i[t].push(n)):(r[t]=r[t]||{},r[t][s]={device:n,sessionId:o})})())}return await Promise.all(o),[i,r]},t.isOlmEncrypted=function(e){return e.getSenderKey()?!(e.getWireType()!==c.EventType.RoomMessageEncrypted||!["m.olm.v1.curve25519-aes-sha2"].includes(e.getWireContent().algorithm))||(a.logger.error("Event was not encrypted using an appropriate algorithm"),!1):(a.logger.error("Event has no sender key (not encrypted?)"),!1)},t.pkSign=function(e,t,i,r){let o=!1;if(t instanceof Uint8Array){const e=new n.g.Olm.PkSigning;r=e.init_with_seed(t),t=e,o=!0}const a=e.signatures||{};delete e.signatures;const c=e.unsigned;e.unsigned&&delete e.unsigned;try{const n=a[i]||{};return a[i]=n,n["ed25519:"+r]=t.sign(s.default.stringify(e))}finally{e.signatures=a,c&&(e.unsigned=c),o&&t.free()}},t.pkVerify=function(e,t,i){const r="ed25519:"+t;if(!(e.signatures&&e.signatures[i]&&e.signatures[i][r]))throw new Error("No signature");const o=e.signatures[i][r],a=new n.g.Olm.Utility,c=e.signatures;delete e.signatures;const l=e.unsigned;e.unsigned&&delete e.unsigned;try{a.ed25519_verify(t,s.default.stringify(e),o)}finally{e.signatures=c,l&&(e.unsigned=l),a.free()}},t.verifySignature=p;var o,s=r(n(69141)),a=n(7434),c=n(42481);!function(e){e.Olm="m.olm.v1.curve25519-aes-sha2",e.Megolm="m.megolm.v1.aes-sha2",e.MegolmBackup="m.megolm_backup.v1.curve25519-aes-sha2"}(o||(o={}));const l=o.Olm;t.OLM_ALGORITHM=l;const u=o.Megolm;t.MEGOLM_ALGORITHM=u;const d=o.MegolmBackup;async function h(e,t,n,i){const r=i.deviceId;try{await p(e,t,n,r,i.getFingerprint())}catch(e){return a.logger.error("Unable to verify signature on one-time key for device "+n+":"+r+":",e),null}let o;try{o=await e.createOutboundSession(i.getIdentityKey(),t.key)}catch(e){return a.logger.error("Error starting olm session with device "+n+":"+r+": "+e),null}return a.logger.log("Started new olm sessionid "+o+" for device "+n+":"+r),o}async function p(e,t,n,i,r){const o="ed25519:"+i,a=((t.signatures||{})[n]||{})[o];if(!a)throw Error("No signature");const c=Object.assign({},t);"unsigned"in c&&delete c.unsigned,delete c.signatures;const l=s.default.stringify(c);e.verifySignature(r,l,a)}function f(e){return i.from(e).toString("base64")}t.MEGOLM_BACKUP_ALGORITHM=d},34077:(e,t,n)=>{"use strict";var i=n(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeRecoveryKey=function(e){const t=r.decode(e.replace(/ /g,""));let i=0;for(const e of t)i^=e;if(0!==i)throw new Error("Incorrect parity");for(let e=0;e<s.length;++e)if(t[e]!==s[e])throw new Error("Incorrect prefix");if(t.length!==s.length+n.g.Olm.PRIVATE_KEY_LENGTH+1)throw new Error("Incorrect length");return Uint8Array.from(t.slice(s.length,s.length+n.g.Olm.PRIVATE_KEY_LENGTH))},t.encodeRecoveryKey=function(e){var t;const n=i.alloc(s.length+e.length+1);n.set(s,0),n.set(e,s.length);let o=0;for(let e=0;e<n.length-1;++e)o^=n[e];n[n.length-1]=o;return null===(t=r.encode(n).match(/.{1,4}/g))||void 0===t?void 0:t.join(" ")};var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}(n(77191));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}const s=[139,1]},35251:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.Backend=void 0,t.upgradeDatabase=function(e,t){o.logger.log(`Upgrading IndexedDBCryptoStore from version ${t} to ${l}`),c.forEach(((n,i)=>{t<=i&&n(e)}))};var r=i(n(59713)),o=n(7434),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(3102));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}t.Backend=class{constructor(e){this.db=e,(0,r.default)(this,"nextTxnId",0),e.onversionchange=()=>{o.logger.log(`versionchange for indexeddb ${this.db.name}: closing`),e.close()}}async startup(){return this}async deleteAllData(){throw Error("This is not implemented, call IDBFactory::deleteDatabase(dbName) instead.")}getOrAddOutgoingRoomKeyRequest(e){const t=e.requestBody;return new Promise(((n,i)=>{const r=this.db.transaction("outgoingRoomKeyRequests","readwrite");r.onerror=i,this._getOutgoingRoomKeyRequest(r,t,(i=>{if(i)return o.logger.log(`already have key request outstanding for ${t.room_id} / ${t.session_id}: not sending another`),void n(i);o.logger.log(`enqueueing key request for ${t.room_id} / `+t.session_id),r.oncomplete=()=>{n(e)},r.objectStore("outgoingRoomKeyRequests").add(e)}))}))}getOutgoingRoomKeyRequest(e){return new Promise(((t,n)=>{const i=this.db.transaction("outgoingRoomKeyRequests","readonly");i.onerror=n,this._getOutgoingRoomKeyRequest(i,e,(e=>{t(e)}))}))}_getOutgoingRoomKeyRequest(e,t,n){const i=e.objectStore("outgoingRoomKeyRequests").index("session").openCursor([t.room_id,t.session_id]);i.onsuccess=()=>{const e=i.result;if(!e)return void n(null);const r=e.value;s.deepCompare(r.requestBody,t)?n(r):e.continue()}}getOutgoingRoomKeyRequestByState(e){if(0===e.length)return Promise.resolve(null);let t,n=0;const i=this.db.transaction("outgoingRoomKeyRequests","readonly"),r=i.objectStore("outgoingRoomKeyRequests"),o=e[n];return r.index("state").openCursor(o).onsuccess=function i(){const r=this.result;if(r)return void(t=r.value);if(n++,n>=e.length)return;const o=e[n];this.source.openCursor(o).onsuccess=i},d(i).then((()=>t))}getAllOutgoingRoomKeyRequestsByState(e){return new Promise(((t,n)=>{const i=this.db.transaction("outgoingRoomKeyRequests","readonly").objectStore("outgoingRoomKeyRequests").index("state").getAll(e);i.onsuccess=()=>t(i.result),i.onerror=()=>n(i.error)}))}getOutgoingRoomKeyRequestsByTarget(e,t,n){let i=0;const r=[],o=this.db.transaction("outgoingRoomKeyRequests","readonly"),s=o.objectStore("outgoingRoomKeyRequests"),a=n[i];return s.index("state").openCursor(a).onsuccess=function o(){const s=this.result;if(s){const n=s.value;n.recipients.some((n=>n.userId===e&&n.deviceId===t))&&r.push(n),s.continue()}else{if(i++,i>=n.length)return;const e=n[i];this.source.openCursor(e).onsuccess=o}},d(o).then((()=>r))}updateOutgoingRoomKeyRequest(e,t,n){let i=null;const r=this.db.transaction("outgoingRoomKeyRequests","readwrite");return r.objectStore("outgoingRoomKeyRequests").openCursor(e).onsuccess=function(){const e=this.result;if(!e)return;const r=e.value;r.state==t?(Object.assign(r,n),e.update(r),i=r):o.logger.warn(`Cannot update room key request from ${t} as it was already updated to ${r.state}`)},d(r).then((()=>i))}deleteOutgoingRoomKeyRequest(e,t){const n=this.db.transaction("outgoingRoomKeyRequests","readwrite"),i=n.objectStore("outgoingRoomKeyRequests").openCursor(e);return i.onsuccess=()=>{const e=i.result;if(!e)return;const n=e.value;n.state==t?e.delete():o.logger.warn(`Cannot delete room key request in state ${n.state} (expected ${t})`)},d(n)}getAccount(e,t){const n=e.objectStore("account").get("-");n.onsuccess=function(){try{t(n.result||null)}catch(t){u(e,t)}}}storeAccount(e,t){e.objectStore("account").put(t,"-")}getCrossSigningKeys(e,t){const n=e.objectStore("account").get("crossSigningKeys");n.onsuccess=function(){try{t(n.result||null)}catch(t){u(e,t)}}}getSecretStorePrivateKey(e,t,n){const i=e.objectStore("account").get(`ssss_cache:${n}`);i.onsuccess=function(){try{t(i.result||null)}catch(t){u(e,t)}}}storeCrossSigningKeys(e,t){e.objectStore("account").put(t,"crossSigningKeys")}storeSecretStorePrivateKey(e,t,n){e.objectStore("account").put(n,`ssss_cache:${t}`)}countEndToEndSessions(e,t){const n=e.objectStore("sessions").count();n.onsuccess=function(){try{t(n.result)}catch(t){u(e,t)}}}getEndToEndSessions(e,t,n){const i=t.objectStore("sessions").index("deviceKey").openCursor(e),r={};i.onsuccess=function(){const e=i.result;if(e)r[e.value.sessionId]={session:e.value.session,lastReceivedMessageTs:e.value.lastReceivedMessageTs},e.continue();else try{n(r)}catch(e){u(t,e)}}}getEndToEndSession(e,t,n,i){const r=n.objectStore("sessions").get([e,t]);r.onsuccess=function(){try{r.result?i({session:r.result.session,lastReceivedMessageTs:r.result.lastReceivedMessageTs}):i(null)}catch(e){u(n,e)}}}getAllEndToEndSessions(e,t){const n=e.objectStore("sessions").openCursor();n.onsuccess=function(){try{const e=n.result;e?(t(e.value),e.continue()):t(null)}catch(t){u(e,t)}}}storeEndToEndSession(e,t,n,i){i.objectStore("sessions").put({deviceKey:e,sessionId:t,session:n.session,lastReceivedMessageTs:n.lastReceivedMessageTs})}async storeEndToEndSessionProblem(e,t,n){const i=this.db.transaction("session_problems","readwrite");i.objectStore("session_problems").put({deviceKey:e,type:t,fixed:n,time:Date.now()}),await d(i)}async getEndToEndSessionProblem(e,t){let n=null;const i=this.db.transaction("session_problems","readwrite"),r=i.objectStore("session_problems").index("deviceKey").getAll(e);return r.onsuccess=()=>{const e=r.result;if(!e.length)return void(n=null);e.sort(((e,t)=>e.time-t.time));const i=e[e.length-1];for(const r of e)if(r.time>t)return void(n=Object.assign({},r,{fixed:i.fixed}));n=i.fixed?null:i},await d(i),n}async filterOutNotifiedErrorDevices(e){const t=this.db.transaction("notified_error_devices","readwrite").objectStore("notified_error_devices"),n=[];return await Promise.all(e.map((e=>new Promise((i=>{const{userId:r,deviceInfo:o}=e,s=t.get([r,o.deviceId]);s.onsuccess=function(){s.result||(t.put({userId:r,deviceId:o.deviceId}),n.push(e)),i()}}))))),n}getEndToEndInboundGroupSession(e,t,n,i){let r=!1,o=!1;const s=n.objectStore("inbound_group_sessions").get([e,t]);s.onsuccess=function(){try{r=s.result?s.result.session:null,!1!==o&&i(r,o)}catch(e){u(n,e)}};const a=n.objectStore("inbound_group_sessions_withheld").get([e,t]);a.onsuccess=function(){try{o=a.result?a.result.session:null,!1!==r&&i(r,o)}catch(e){u(n,e)}}}getAllEndToEndInboundGroupSessions(e,t){const n=e.objectStore("inbound_group_sessions").openCursor();n.onsuccess=function(){const i=n.result;if(i){try{t({senderKey:i.value.senderCurve25519Key,sessionId:i.value.sessionId,sessionData:i.value.session})}catch(t){u(e,t)}i.continue()}else try{t(null)}catch(t){u(e,t)}}}addEndToEndInboundGroupSession(e,t,n,i){const r=i.objectStore("inbound_group_sessions").add({senderCurve25519Key:e,sessionId:t,session:n});r.onerror=n=>{var s;"ConstraintError"===(null===(s=r.error)||void 0===s?void 0:s.name)?(n.stopPropagation(),n.preventDefault(),o.logger.log("Ignoring duplicate inbound group session: "+e+" / "+t)):u(i,new Error("Failed to add inbound group session: "+r.error))}}storeEndToEndInboundGroupSession(e,t,n,i){i.objectStore("inbound_group_sessions").put({senderCurve25519Key:e,sessionId:t,session:n})}storeEndToEndInboundGroupSessionWithheld(e,t,n,i){i.objectStore("inbound_group_sessions_withheld").put({senderCurve25519Key:e,sessionId:t,session:n})}getEndToEndDeviceData(e,t){const n=e.objectStore("device_data").get("-");n.onsuccess=function(){try{t(n.result||null)}catch(t){u(e,t)}}}storeEndToEndDeviceData(e,t){t.objectStore("device_data").put(e,"-")}storeEndToEndRoom(e,t,n){n.objectStore("rooms").put(t,e)}getEndToEndRooms(e,t){const n={},i=e.objectStore("rooms").openCursor();i.onsuccess=function(){const r=i.result;if(r)n[r.key]=r.value,r.continue();else try{t(n)}catch(t){u(e,t)}}}getSessionsNeedingBackup(e){return new Promise(((t,n)=>{const i=[],r=this.db.transaction(["sessions_needing_backup","inbound_group_sessions"],"readonly");r.onerror=n,r.oncomplete=function(){t(i)};const o=r.objectStore("sessions_needing_backup"),s=r.objectStore("inbound_group_sessions"),a=o.openCursor();a.onsuccess=function(){const t=a.result;if(t){const n=s.get(t.key);n.onsuccess=function(){i.push({senderKey:n.result.senderCurve25519Key,sessionId:n.result.sessionId,sessionData:n.result.session})},(!e||i.length<e)&&t.continue()}}}))}countSessionsNeedingBackup(e){e||(e=this.db.transaction("sessions_needing_backup","readonly"));const t=e.objectStore("sessions_needing_backup");return new Promise(((e,n)=>{const i=t.count();i.onerror=n,i.onsuccess=()=>e(i.result)}))}async unmarkSessionsNeedingBackup(e,t){t||(t=this.db.transaction("sessions_needing_backup","readwrite"));const n=t.objectStore("sessions_needing_backup");await Promise.all(e.map((e=>new Promise(((t,i)=>{const r=n.delete([e.senderKey,e.sessionId]);r.onsuccess=t,r.onerror=i})))))}async markSessionsNeedingBackup(e,t){t||(t=this.db.transaction("sessions_needing_backup","readwrite"));const n=t.objectStore("sessions_needing_backup");await Promise.all(e.map((e=>new Promise(((t,i)=>{const r=n.put({senderCurve25519Key:e.senderKey,sessionId:e.sessionId});r.onsuccess=t,r.onerror=i})))))}addSharedHistoryInboundGroupSession(e,t,n,i){i||(i=this.db.transaction("shared_history_inbound_group_sessions","readwrite"));const r=i.objectStore("shared_history_inbound_group_sessions"),o=r.get([e]);o.onsuccess=()=>{const{sessions:i}=o.result||{sessions:[]};i.push([t,n]),r.put({roomId:e,sessions:i})}}getSharedHistoryInboundGroupSessions(e,t){t||(t=this.db.transaction("shared_history_inbound_group_sessions","readonly"));const n=t.objectStore("shared_history_inbound_group_sessions").get([e]);return new Promise(((e,t)=>{n.onsuccess=()=>{const{sessions:t}=n.result||{sessions:[]};e(t)},n.onerror=t}))}addParkedSharedHistory(e,t,n){n||(n=this.db.transaction("parked_shared_history","readwrite"));const i=n.objectStore("parked_shared_history"),r=i.get([e]);r.onsuccess=()=>{const{parked:n}=r.result||{parked:[]};n.push(t),i.put({roomId:e,parked:n})}}takeParkedSharedHistory(e,t){t||(t=this.db.transaction("parked_shared_history","readwrite"));const n=t.objectStore("parked_shared_history").openCursor(e);return new Promise(((e,t)=>{n.onsuccess=()=>{const t=n.result;if(!t)return void e([]);const i=t.value;t.delete(),e(i)},n.onerror=t}))}doTxn(e,t,n,i=o.logger){const r=this.db.transaction(t,e),s=d(r),a=n(r);return s.then((()=>a))}};const c=[e=>{!function(e){const t=e.createObjectStore("outgoingRoomKeyRequests",{keyPath:"requestId"});t.createIndex("session",["requestBody.room_id","requestBody.session_id"]),t.createIndex("state","state")}(e)},e=>{e.createObjectStore("account")},e=>{e.createObjectStore("sessions",{keyPath:["deviceKey","sessionId"]}).createIndex("deviceKey","deviceKey")},e=>{e.createObjectStore("inbound_group_sessions",{keyPath:["senderCurve25519Key","sessionId"]})},e=>{e.createObjectStore("device_data")},e=>{e.createObjectStore("rooms")},e=>{e.createObjectStore("sessions_needing_backup",{keyPath:["senderCurve25519Key","sessionId"]})},e=>{e.createObjectStore("inbound_group_sessions_withheld",{keyPath:["senderCurve25519Key","sessionId"]})},e=>{e.createObjectStore("session_problems",{keyPath:["deviceKey","time"]}).createIndex("deviceKey","deviceKey"),e.createObjectStore("notified_error_devices",{keyPath:["userId","deviceId"]})},e=>{e.createObjectStore("shared_history_inbound_group_sessions",{keyPath:["roomId"]})},e=>{e.createObjectStore("parked_shared_history",{keyPath:["roomId"]})}],l=c.length;function u(e,t){e._mx_abortexception=t;try{e.abort()}catch(t){}}function d(e){return new Promise(((t,n)=>{e.oncomplete=()=>{void 0!==e._mx_abortexception&&n(e._mx_abortexception),t(null)},e.onerror=t=>{void 0!==e._mx_abortexception?n(e._mx_abortexception):(o.logger.log("Error performing indexeddb txn",t),n(e.error))},e.onabort=t=>{void 0!==e._mx_abortexception?n(e._mx_abortexception):(o.logger.log("Error performing indexeddb txn",t),n(e.error))}}))}t.VERSION=l},57585:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDBCryptoStore=void 0;var r=i(n(59713)),o=n(7434),s=n(84250),a=n(11045),c=h(n(35251)),l=n(19489),u=h(n(33415));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}class p{static exists(e,t){return u.exists(e,t)}constructor(e,t){this.indexedDB=e,this.dbName=t,(0,r.default)(this,"backendPromise",void 0),(0,r.default)(this,"backend",void 0)}startup(){return this.backendPromise||(this.backendPromise=new Promise(((e,t)=>{if(!this.indexedDB)return void t(new Error("no indexeddb support available"));o.logger.log(`connecting to indexeddb ${this.dbName}`);const n=this.indexedDB.open(this.dbName,c.VERSION);n.onupgradeneeded=e=>{const t=n.result,i=e.oldVersion;c.upgradeDatabase(t,i)},n.onblocked=()=>{o.logger.log("can't yet open IndexedDBCryptoStore because it is open elsewhere")},n.onerror=e=>{o.logger.log("Error connecting to indexeddb",e),t(n.error)},n.onsuccess=()=>{const t=n.result;o.logger.log(`connected to indexeddb ${this.dbName}`),e(new c.Backend(t))}})).then((e=>e.doTxn("readonly",[p.STORE_INBOUND_GROUP_SESSIONS,p.STORE_INBOUND_GROUP_SESSIONS_WITHHELD],(t=>{e.getEndToEndInboundGroupSession("","",t,(()=>{}))})).then((()=>e)))).catch((e=>{if("VersionError"===e.name)throw o.logger.warn("Crypto DB is too new for us to use!",e),new l.InvalidCryptoStoreError(l.InvalidCryptoStoreState.TooNew);o.logger.warn(`unable to connect to indexeddb ${this.dbName}: falling back to localStorage store: ${e}`);try{return new s.LocalStorageCryptoStore(n.g.localStorage)}catch(e){return o.logger.warn(`unable to open localStorage: falling back to in-memory store: ${e}`),new a.MemoryCryptoStore}})).then((e=>(this.backend=e,e)))),this.backendPromise}deleteAllData(){return new Promise(((e,t)=>{if(!this.indexedDB)return void t(new Error("no indexeddb support available"));o.logger.log(`Removing indexeddb instance: ${this.dbName}`);const n=this.indexedDB.deleteDatabase(this.dbName);n.onblocked=()=>{o.logger.log("can't yet delete IndexedDBCryptoStore because it is open elsewhere")},n.onerror=e=>{o.logger.log("Error deleting data from indexeddb",e),t(n.error)},n.onsuccess=()=>{o.logger.log(`Removed indexeddb instance: ${this.dbName}`),e()}})).catch((e=>{o.logger.warn(`unable to delete IndexedDBCryptoStore: ${e}`)}))}getOrAddOutgoingRoomKeyRequest(e){return this.backend.getOrAddOutgoingRoomKeyRequest(e)}getOutgoingRoomKeyRequest(e){return this.backend.getOutgoingRoomKeyRequest(e)}getOutgoingRoomKeyRequestByState(e){return this.backend.getOutgoingRoomKeyRequestByState(e)}getAllOutgoingRoomKeyRequestsByState(e){return this.backend.getAllOutgoingRoomKeyRequestsByState(e)}getOutgoingRoomKeyRequestsByTarget(e,t,n){return this.backend.getOutgoingRoomKeyRequestsByTarget(e,t,n)}updateOutgoingRoomKeyRequest(e,t,n){return this.backend.updateOutgoingRoomKeyRequest(e,t,n)}deleteOutgoingRoomKeyRequest(e,t){return this.backend.deleteOutgoingRoomKeyRequest(e,t)}getAccount(e,t){this.backend.getAccount(e,t)}storeAccount(e,t){this.backend.storeAccount(e,t)}getCrossSigningKeys(e,t){this.backend.getCrossSigningKeys(e,t)}getSecretStorePrivateKey(e,t,n){this.backend.getSecretStorePrivateKey(e,t,n)}storeCrossSigningKeys(e,t){this.backend.storeCrossSigningKeys(e,t)}storeSecretStorePrivateKey(e,t,n){this.backend.storeSecretStorePrivateKey(e,t,n)}countEndToEndSessions(e,t){this.backend.countEndToEndSessions(e,t)}getEndToEndSession(e,t,n,i){this.backend.getEndToEndSession(e,t,n,i)}getEndToEndSessions(e,t,n){this.backend.getEndToEndSessions(e,t,n)}getAllEndToEndSessions(e,t){this.backend.getAllEndToEndSessions(e,t)}storeEndToEndSession(e,t,n,i){this.backend.storeEndToEndSession(e,t,n,i)}storeEndToEndSessionProblem(e,t,n){return this.backend.storeEndToEndSessionProblem(e,t,n)}getEndToEndSessionProblem(e,t){return this.backend.getEndToEndSessionProblem(e,t)}filterOutNotifiedErrorDevices(e){return this.backend.filterOutNotifiedErrorDevices(e)}getEndToEndInboundGroupSession(e,t,n,i){this.backend.getEndToEndInboundGroupSession(e,t,n,i)}getAllEndToEndInboundGroupSessions(e,t){this.backend.getAllEndToEndInboundGroupSessions(e,t)}addEndToEndInboundGroupSession(e,t,n,i){this.backend.addEndToEndInboundGroupSession(e,t,n,i)}storeEndToEndInboundGroupSession(e,t,n,i){this.backend.storeEndToEndInboundGroupSession(e,t,n,i)}storeEndToEndInboundGroupSessionWithheld(e,t,n,i){this.backend.storeEndToEndInboundGroupSessionWithheld(e,t,n,i)}storeEndToEndDeviceData(e,t){this.backend.storeEndToEndDeviceData(e,t)}getEndToEndDeviceData(e,t){this.backend.getEndToEndDeviceData(e,t)}storeEndToEndRoom(e,t,n){this.backend.storeEndToEndRoom(e,t,n)}getEndToEndRooms(e,t){this.backend.getEndToEndRooms(e,t)}getSessionsNeedingBackup(e){return this.backend.getSessionsNeedingBackup(e)}countSessionsNeedingBackup(e){return this.backend.countSessionsNeedingBackup(e)}unmarkSessionsNeedingBackup(e,t){return this.backend.unmarkSessionsNeedingBackup(e,t)}markSessionsNeedingBackup(e,t){return this.backend.markSessionsNeedingBackup(e,t)}addSharedHistoryInboundGroupSession(e,t,n,i){this.backend.addSharedHistoryInboundGroupSession(e,t,n,i)}getSharedHistoryInboundGroupSessions(e,t){return this.backend.getSharedHistoryInboundGroupSessions(e,t)}addParkedSharedHistory(e,t,n){this.backend.addParkedSharedHistory(e,t,n)}takeParkedSharedHistory(e,t){return this.backend.takeParkedSharedHistory(e,t)}doTxn(e,t,n,i){return this.backend.doTxn(e,t,n,i)}}t.IndexedDBCryptoStore=p,(0,r.default)(p,"STORE_ACCOUNT","account"),(0,r.default)(p,"STORE_SESSIONS","sessions"),(0,r.default)(p,"STORE_INBOUND_GROUP_SESSIONS","inbound_group_sessions"),(0,r.default)(p,"STORE_INBOUND_GROUP_SESSIONS_WITHHELD","inbound_group_sessions_withheld"),(0,r.default)(p,"STORE_SHARED_HISTORY_INBOUND_GROUP_SESSIONS","shared_history_inbound_group_sessions"),(0,r.default)(p,"STORE_PARKED_SHARED_HISTORY","parked_shared_history"),(0,r.default)(p,"STORE_DEVICE_DATA","device_data"),(0,r.default)(p,"STORE_ROOMS","rooms"),(0,r.default)(p,"STORE_BACKUP","sessions_needing_backup")},84250:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageCryptoStore=void 0;var i=n(7434),r=n(11045);const o="crypto.account",s="crypto.cross_signing_keys",a="crypto.notified_error_devices",c="crypto.device_data",l="crypto.inboundgroupsessions/",u="crypto.sessionsneedingbackup";function d(e){return"crypto.sessions/"+e}function h(e){return"crypto.session.problems/"+e}function p(e,t){return l+e+"/"+t}function f(e,t){return"crypto.inboundgroupsessions.withheld/"+e+"/"+t}function m(e){return"crypto.rooms/"+e}class g extends r.MemoryCryptoStore{static exists(e){const t=e.length;for(let i=0;i<t;i++){var n;if(null!==(n=e.key(i))&&void 0!==n&&n.startsWith("crypto."))return!0}return!1}constructor(e){super(),this.store=e}countEndToEndSessions(e,t){let n=0;for(let e=0;e<this.store.length;++e){var i;null!==(i=this.store.key(e))&&void 0!==i&&i.startsWith(d(""))&&++n}t(n)}_getEndToEndSessions(e){const t=v(this.store,d(e)),n={};for(const[e,i]of Object.entries(t||{}))n[e]="string"==typeof i?{session:i}:i;return n}getEndToEndSession(e,t,n,i){i(this._getEndToEndSessions(e)[t]||{})}getEndToEndSessions(e,t,n){n(this._getEndToEndSessions(e)||{})}getAllEndToEndSessions(e,t){for(let e=0;e<this.store.length;++e){var n;if(null!==(n=this.store.key(e))&&void 0!==n&&n.startsWith(d(""))){const n=this.store.key(e).split("/")[1];for(const e of Object.values(this._getEndToEndSessions(n)))t(e)}}}storeEndToEndSession(e,t,n,i){const r=this._getEndToEndSessions(e)||{};r[t]=n,y(this.store,d(e),r)}async storeEndToEndSessionProblem(e,t,n){const i=h(e),r=v(this.store,i)||[];r.push({type:t,fixed:n,time:Date.now()}),r.sort(((e,t)=>e.time-t.time)),y(this.store,i,r)}async getEndToEndSessionProblem(e,t){const n=h(e),i=v(this.store,n)||[];if(!i.length)return null;const r=i[i.length-1];for(const e of i)if(e.time>t)return Object.assign({},e,{fixed:r.fixed});return r.fixed?null:r}async filterOutNotifiedErrorDevices(e){const t=v(this.store,a)||{},n=[];for(const i of e){const{userId:e,deviceInfo:r}=i;e in t?r.deviceId in t[e]||(n.push(i),t[e][r.deviceId]=!0):(n.push(i),t[e]={[r.deviceId]:!0})}return y(this.store,a,t),n}getEndToEndInboundGroupSession(e,t,n,i){i(v(this.store,p(e,t)),v(this.store,f(e,t)))}getAllEndToEndInboundGroupSessions(e,t){for(let e=0;e<this.store.length;++e){const n=this.store.key(e);null!=n&&n.startsWith(l)&&t({senderKey:n.slice(l.length,l.length+43),sessionId:n.slice(l.length+44),sessionData:v(this.store,n)})}t(null)}addEndToEndInboundGroupSession(e,t,n,i){v(this.store,p(e,t))||this.storeEndToEndInboundGroupSession(e,t,n,i)}storeEndToEndInboundGroupSession(e,t,n,i){y(this.store,p(e,t),n)}storeEndToEndInboundGroupSessionWithheld(e,t,n,i){y(this.store,f(e,t),n)}getEndToEndDeviceData(e,t){t(v(this.store,c))}storeEndToEndDeviceData(e,t){y(this.store,c,e)}storeEndToEndRoom(e,t,n){y(this.store,m(e),t)}getEndToEndRooms(e,t){const n={},i=m("");for(let e=0;e<this.store.length;++e){const t=this.store.key(e);null!=t&&t.startsWith(i)&&(n[t.slice(i.length)]=v(this.store,t))}t(n)}getSessionsNeedingBackup(e){const t=v(this.store,u)||{},n=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const t=i.slice(0,43),r=i.slice(44);if(this.getEndToEndInboundGroupSession(t,r,null,(e=>{n.push({senderKey:t,sessionId:r,sessionData:e})})),e&&n.length>=e)break}return Promise.resolve(n)}countSessionsNeedingBackup(){const e=v(this.store,u)||{};return Promise.resolve(Object.keys(e).length)}unmarkSessionsNeedingBackup(e){const t=v(this.store,u)||{};for(const n of e)delete t[n.senderKey+"/"+n.sessionId];return y(this.store,u,t),Promise.resolve()}markSessionsNeedingBackup(e){const t=v(this.store,u)||{};for(const n of e)t[n.senderKey+"/"+n.sessionId]=!0;return y(this.store,u,t),Promise.resolve()}deleteAllData(){return this.store.removeItem(o),Promise.resolve()}getAccount(e,t){t(v(this.store,o))}storeAccount(e,t){y(this.store,o,t)}getCrossSigningKeys(e,t){t(v(this.store,s))}getSecretStorePrivateKey(e,t,n){t(v(this.store,`crypto.ssss_cache.${n}`))}storeCrossSigningKeys(e,t){y(this.store,s,t)}storeSecretStorePrivateKey(e,t,n){y(this.store,`crypto.ssss_cache.${t}`,n)}doTxn(e,t,n){return Promise.resolve(n(null))}}function v(e,t){try{return JSON.parse(e.getItem(t))}catch(e){i.logger.log("Error: Failed to get key %s: %s",t,e.message),i.logger.log(e.stack)}return null}function y(e,t,n){e.setItem(t,JSON.stringify(n))}t.LocalStorageCryptoStore=g},11045:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryCryptoStore=void 0;var r=i(n(59713)),o=n(7434),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(3102));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.MemoryCryptoStore=class{constructor(){(0,r.default)(this,"outgoingRoomKeyRequests",[]),(0,r.default)(this,"account",null),(0,r.default)(this,"crossSigningKeys",null),(0,r.default)(this,"privateKeys",{}),(0,r.default)(this,"sessions",{}),(0,r.default)(this,"sessionProblems",{}),(0,r.default)(this,"notifiedErrorDevices",{}),(0,r.default)(this,"inboundGroupSessions",{}),(0,r.default)(this,"inboundGroupSessionsWithheld",{}),(0,r.default)(this,"deviceData",null),(0,r.default)(this,"rooms",{}),(0,r.default)(this,"sessionsNeedingBackup",{}),(0,r.default)(this,"sharedHistoryInboundGroupSessions",{}),(0,r.default)(this,"parkedSharedHistory",new Map)}async startup(){return this}deleteAllData(){return Promise.resolve()}getOrAddOutgoingRoomKeyRequest(e){const t=e.requestBody;return s.promiseTry((()=>{const n=this._getOutgoingRoomKeyRequest(t);return n?(o.logger.log(`already have key request outstanding for ${t.room_id} / ${t.session_id}: not sending another`),n):(o.logger.log(`enqueueing key request for ${t.room_id} / `+t.session_id),this.outgoingRoomKeyRequests.push(e),e)}))}getOutgoingRoomKeyRequest(e){return Promise.resolve(this._getOutgoingRoomKeyRequest(e))}_getOutgoingRoomKeyRequest(e){for(const t of this.outgoingRoomKeyRequests)if(s.deepCompare(t.requestBody,e))return t;return null}getOutgoingRoomKeyRequestByState(e){for(const t of this.outgoingRoomKeyRequests)for(const n of e)if(t.state===n)return Promise.resolve(t);return Promise.resolve(null)}getAllOutgoingRoomKeyRequestsByState(e){return Promise.resolve(this.outgoingRoomKeyRequests.filter((t=>t.state==e)))}getOutgoingRoomKeyRequestsByTarget(e,t,n){const i=[];for(const r of this.outgoingRoomKeyRequests)for(const o of n)r.state===o&&r.recipients.some((n=>n.userId===e&&n.deviceId===t))&&i.push(r);return Promise.resolve(i)}updateOutgoingRoomKeyRequest(e,t,n){for(const i of this.outgoingRoomKeyRequests)if(i.requestId===e)return i.state!==t?(o.logger.warn(`Cannot update room key request from ${t} as it was already updated to ${i.state}`),Promise.resolve(null)):(Object.assign(i,n),Promise.resolve(i));return Promise.resolve(null)}deleteOutgoingRoomKeyRequest(e,t){for(let n=0;n<this.outgoingRoomKeyRequests.length;n++){const i=this.outgoingRoomKeyRequests[n];if(i.requestId===e)return i.state!=t?(o.logger.warn(`Cannot delete room key request in state ${i.state} (expected ${t})`),Promise.resolve(null)):(this.outgoingRoomKeyRequests.splice(n,1),Promise.resolve(i))}return Promise.resolve(null)}getAccount(e,t){t(this.account)}storeAccount(e,t){this.account=t}getCrossSigningKeys(e,t){t(this.crossSigningKeys)}getSecretStorePrivateKey(e,t,n){t(this.privateKeys[n]||null)}storeCrossSigningKeys(e,t){this.crossSigningKeys=t}storeSecretStorePrivateKey(e,t,n){this.privateKeys[t]=n}countEndToEndSessions(e,t){t(Object.keys(this.sessions).length)}getEndToEndSession(e,t,n,i){i((this.sessions[e]||{})[t]||null)}getEndToEndSessions(e,t,n){n(this.sessions[e]||{})}getAllEndToEndSessions(e,t){Object.entries(this.sessions).forEach((([e,n])=>{Object.entries(n).forEach((([n,i])=>{t(l(l({},i),{},{deviceKey:e,sessionId:n}))}))}))}storeEndToEndSession(e,t,n,i){let r=this.sessions[e];void 0===r&&(r={},this.sessions[e]=r),r[t]=n}async storeEndToEndSessionProblem(e,t,n){const i=this.sessionProblems[e]=this.sessionProblems[e]||[];i.push({type:t,fixed:n,time:Date.now()}),i.sort(((e,t)=>e.time-t.time))}async getEndToEndSessionProblem(e,t){const n=this.sessionProblems[e]||[];if(!n.length)return null;const i=n[n.length-1];for(const e of n)if(e.time>t)return Object.assign({},e,{fixed:i.fixed});return i.fixed?null:i}async filterOutNotifiedErrorDevices(e){const t=this.notifiedErrorDevices,n=[];for(const i of e){const{userId:e,deviceInfo:r}=i;e in t?r.deviceId in t[e]||(n.push(i),t[e][r.deviceId]=!0):(n.push(i),t[e]={[r.deviceId]:!0})}return n}getEndToEndInboundGroupSession(e,t,n,i){const r=e+"/"+t;i(this.inboundGroupSessions[r]||null,this.inboundGroupSessionsWithheld[r]||null)}getAllEndToEndInboundGroupSessions(e,t){for(const e of Object.keys(this.inboundGroupSessions))t({senderKey:e.slice(0,43),sessionId:e.slice(44),sessionData:this.inboundGroupSessions[e]});t(null)}addEndToEndInboundGroupSession(e,t,n,i){const r=e+"/"+t;void 0===this.inboundGroupSessions[r]&&(this.inboundGroupSessions[r]=n)}storeEndToEndInboundGroupSession(e,t,n,i){this.inboundGroupSessions[e+"/"+t]=n}storeEndToEndInboundGroupSessionWithheld(e,t,n,i){const r=e+"/"+t;this.inboundGroupSessionsWithheld[r]=n}getEndToEndDeviceData(e,t){t(this.deviceData)}storeEndToEndDeviceData(e,t){this.deviceData=e}storeEndToEndRoom(e,t,n){this.rooms[e]=t}getEndToEndRooms(e,t){t(this.rooms)}getSessionsNeedingBackup(e){const t=[];for(const n in this.sessionsNeedingBackup)if(this.inboundGroupSessions[n]&&(t.push({senderKey:n.slice(0,43),sessionId:n.slice(44),sessionData:this.inboundGroupSessions[n]}),e&&n.length>=e))break;return Promise.resolve(t)}countSessionsNeedingBackup(){return Promise.resolve(Object.keys(this.sessionsNeedingBackup).length)}unmarkSessionsNeedingBackup(e){for(const t of e){const e=t.senderKey+"/"+t.sessionId;delete this.sessionsNeedingBackup[e]}return Promise.resolve()}markSessionsNeedingBackup(e){for(const t of e){const e=t.senderKey+"/"+t.sessionId;this.sessionsNeedingBackup[e]=!0}return Promise.resolve()}addSharedHistoryInboundGroupSession(e,t,n){const i=this.sharedHistoryInboundGroupSessions[e]||[];i.push([t,n]),this.sharedHistoryInboundGroupSessions[e]=i}getSharedHistoryInboundGroupSessions(e){return Promise.resolve(this.sharedHistoryInboundGroupSessions[e]||[])}addParkedSharedHistory(e,t){var n;const i=null!==(n=this.parkedSharedHistory.get(e))&&void 0!==n?n:[];i.push(t),this.parkedSharedHistory.set(e,i)}takeParkedSharedHistory(e){var t;const n=null!==(t=this.parkedSharedHistory.get(e))&&void 0!==t?t:[];return this.parkedSharedHistory.delete(e),Promise.resolve(n)}doTxn(e,t,n){return Promise.resolve(n(null))}}},41631:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.VerificationEvent=t.VerificationBase=t.SwitchStartEventError=void 0;var r=i(n(59713)),o=n(24369),s=n(42481),a=n(7434),c=n(23272),l=n(16702),u=n(3075),d=n(55861);const h=new Error("Verification timed out");class p extends Error{constructor(e){super(),this.startEvent=e}}let f;t.SwitchStartEventError=p,t.VerificationEvent=f,function(e){e.Cancel="cancel"}(f||(t.VerificationEvent=f={}));class m extends d.TypedEventEmitter{constructor(e,t,n,i,o,s){super(),this.channel=e,this.baseApis=t,this.userId=n,this.deviceId=i,this.startEvent=o,this.request=s,(0,r.default)(this,"cancelled",!1),(0,r.default)(this,"_done",!1),(0,r.default)(this,"promise",null),(0,r.default)(this,"transactionTimeoutTimer",null),(0,r.default)(this,"expectedEvent",void 0),(0,r.default)(this,"resolve",void 0),(0,r.default)(this,"reject",void 0),(0,r.default)(this,"resolveEvent",void 0),(0,r.default)(this,"rejectEvent",void 0),(0,r.default)(this,"started",void 0),(0,r.default)(this,"doVerification",void 0)}get initiatedByMe(){if(!this.startEvent)return!0;const e=this.startEvent.getSender(),t=this.startEvent.getContent();return e===this.baseApis.getUserId()&&t.from_device===this.baseApis.getDeviceId()}get hasBeenCancelled(){return this.cancelled}resetTimer(){a.logger.info("Refreshing/starting the verification transaction timeout timer"),null!==this.transactionTimeoutTimer&&clearTimeout(this.transactionTimeoutTimer),this.transactionTimeoutTimer=setTimeout((()=>{this._done||this.cancelled||(a.logger.info("Triggering verification timeout"),this.cancel(h))}),6e5)}endTimer(){null!==this.transactionTimeoutTimer&&(clearTimeout(this.transactionTimeoutTimer),this.transactionTimeoutTimer=null)}send(e,t){return this.channel.send(e,t)}waitForEvent(e){if(this._done)return Promise.reject(new Error("Verification is already done"));const t=this.request.getEventFromOtherParty(e);return t?Promise.resolve(t):(this.expectedEvent=e,new Promise(((e,t)=>{this.resolveEvent=e,this.rejectEvent=t})))}canSwitchStartEvent(e){return!1}switchStartEvent(e){if(this.canSwitchStartEvent(e))if(a.logger.log("Verification Base: switching verification start event",{restartingFlow:!!this.rejectEvent}),this.rejectEvent){const t=this.rejectEvent;this.rejectEvent=void 0,t(new p(e))}else this.startEvent=e}handleEvent(e){var t;if(!this._done)if(e.getType()===this.expectedEvent)this.expectedEvent!==s.EventType.KeyVerificationDone&&(this.expectedEvent=void 0,this.rejectEvent=void 0,this.resetTimer(),null===(t=this.resolveEvent)||void 0===t||t.call(this,e));else if(e.getType()===s.EventType.KeyVerificationCancel){const t=this.reject;if(this.reject=void 0,t){const n=e.getContent(),{reason:i,code:r}=n;t(new Error(`Other side cancelled verification because ${i} (${r})`))}}else if(this.expectedEvent){const t=new Error("Unexpected message: expecting "+this.expectedEvent+" but got "+e.getType());if(this.expectedEvent=void 0,this.rejectEvent){const e=this.rejectEvent;this.rejectEvent=void 0,e(t)}this.cancel(t)}}async done(){var e;if(this.endTimer(),!this._done)return this.request.onVerifierFinished(),null===(e=this.resolve)||void 0===e||e.call(this),(0,u.requestKeysDuringVerification)(this.baseApis,this.userId,this.deviceId)}cancel(e){if(this.endTimer(),!this._done){if(this.cancelled=!0,this.request.onVerifierCancelled(),this.userId&&this.deviceId)if(e===h){const e=(0,l.newTimeoutError)();this.send(e.getType(),e.getContent())}else if(e instanceof o.MatrixEvent){if(e.getSender()!==this.userId){const t=e.getContent();e.getType()===s.EventType.KeyVerificationCancel?(t.code=t.code||"m.unknown",t.reason=t.reason||t.body||"Unknown reason",this.send(s.EventType.KeyVerificationCancel,t)):this.send(s.EventType.KeyVerificationCancel,{code:"m.unknown",reason:t.body||"Unknown reason"})}}else this.send(s.EventType.KeyVerificationCancel,{code:"m.unknown",reason:e.toString()});null!==this.promise?this.reject&&this.reject(e):this.promise=Promise.reject(e),this.emit(f.Cancel,e)}}verify(){return this.promise||(this.promise=new Promise(((e,t)=>{this.resolve=(...t)=>{this._done=!0,this.endTimer(),e(...t)},this.reject=e=>{this._done=!0,this.endTimer(),t(e)}})),this.doVerification&&!this.started&&(this.started=!0,this.resetTimer(),new Promise(((e,t)=>{var n;(null===(n=this.baseApis.crypto.deviceList.getStoredCrossSigningForUser(this.userId))||void 0===n?void 0:n.getId())===this.deviceId&&t(new Error("Device ID is the same as the cross-signing ID")),e()})).then((()=>this.doVerification())).then(this.done.bind(this),this.cancel.bind(this)))),this.promise}async verifyKeys(e,t,n){const i=[];for(const[r,o]of Object.entries(t)){const t=r.split(":",2)[1],s=this.baseApis.getStoredDevice(e,t);if(s)n(r,s,o),i.push([t,r,s.keys[r]]);else{const s=this.baseApis.crypto.deviceList.getStoredCrossSigningForUser(e);s&&s.getId()===t?(n(r,c.DeviceInfo.fromStorage({keys:{[r]:t}},t),o),i.push([t,r,t])):a.logger.warn(`verification: Could not find device ${t} to verify`)}}if(!i.length)throw new Error("No devices could be verified");a.logger.info("Verification completed! Marking devices verified: ",i);for(const[t,n,r]of i)await this.baseApis.crypto.setDeviceVerification(e,t,!0,null,null,{[n]:r});e==this.baseApis.credentials.userId&&await this.baseApis.checkKeyBackup()}get events(){}}t.VerificationBase=m},16702:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorFactory=s,t.errorFromEvent=function(e){const t=e.getContent();if(t){const{code:e,reason:n}=t;return{code:e,reason:n}}return{code:"Unknown error",reason:"m.unknown"}},t.newUserCancelledError=t.newUnknownMethodError=t.newUnexpectedMessageError=t.newTimeoutError=t.newKeyMismatchError=t.newInvalidMessageError=void 0,t.newVerificationError=o;var i=n(24369),r=n(42481);function o(e,t,n){const o=Object.assign({},{code:e,reason:t},n);return new i.MatrixEvent({type:r.EventType.KeyVerificationCancel,content:o})}function s(e,t){return function(n){return o(e,t,n)}}const a=s("m.user","Cancelled by user");t.newUserCancelledError=a;const c=s("m.timeout","Timed out");t.newTimeoutError=c;const l=s("m.unknown_method","Unknown method");t.newUnknownMethodError=l;const u=s("m.unexpected_message","Unexpected message");t.newUnexpectedMessageError=u;const d=s("m.key_mismatch","Key mismatch");t.newKeyMismatchError=d;const h=s("m.invalid_message","Invalid message");t.newInvalidMessageError=h},4028:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.IllegalMethod=void 0;var r=i(n(59713)),o=n(41631);class s extends o.VerificationBase{constructor(...e){super(...e),(0,r.default)(this,"doVerification",(async()=>{throw new Error("Verification is not possible with this method")}))}static factory(e,t,n,i,r,o){return new s(e,t,n,i,r,o)}static get NAME(){return"org.matrix.illegal_method"}}t.IllegalMethod=s},51696:(e,t,n)=>{"use strict";var i=n(48764).Buffer,r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SHOW_QR_CODE_METHOD=t.SCAN_QR_CODE_METHOD=t.ReciprocateQRCode=t.QrCodeEvent=t.QRCodeData=void 0;var o=r(n(59713)),s=n(41631),a=n(16702),c=n(32772),l=n(7434);let u;t.SHOW_QR_CODE_METHOD="m.qr_code.show.v1",t.SCAN_QR_CODE_METHOD="m.qr_code.scan.v1",t.QrCodeEvent=u,function(e){e.ShowReciprocateQr="show_reciprocate_qr"}(u||(t.QrCodeEvent=u={}));class d extends s.VerificationBase{constructor(...e){super(...e),(0,o.default)(this,"reciprocateQREvent",void 0),(0,o.default)(this,"doVerification",(async()=>{if(!this.startEvent)throw new Error("It is not currently possible to start verificationwith this method yet.");const{qrCodeData:e}=this.request;if(this.startEvent.getContent().secret!==(null==e?void 0:e.encodedSharedSecret))throw(0,a.newKeyMismatchError)();await new Promise(((e,t)=>{this.reciprocateQREvent={confirm:e,cancel:()=>t((0,a.newUserCancelledError)())},this.emit(u.ShowReciprocateQr,this.reciprocateQREvent)}));const t={};switch(null==e?void 0:e.mode){case h.VerifyOtherUser:{const n=e.otherUserMasterKey;t[`ed25519:${n}`]=n;break}case h.VerifySelfTrusted:{const n=this.request.targetDevice.deviceId;t[`ed25519:${n}`]=e.otherDeviceKey;break}case h.VerifySelfUntrusted:{const n=e.myMasterKey;t[`ed25519:${n}`]=n;break}}await this.verifyKeys(this.userId,t,((e,n,i)=>{const r=t[e];if(!r)throw(0,a.newKeyMismatchError)();if(i!==r)throw l.logger.error("key ID from key info does not match"),(0,a.newKeyMismatchError)();for(const e in n.keys){if(!e.startsWith("ed25519"))continue;const i=t[e];if(!i)throw(0,a.newKeyMismatchError)();if(n.keys[e]!==i)throw l.logger.error("master key does not match"),(0,a.newKeyMismatchError)()}}))}))}static factory(e,t,n,i,r,o){return new d(e,t,n,i,r,o)}static get NAME(){return"m.reciprocate.v1"}}var h;t.ReciprocateQRCode=d,function(e){e[e.VerifyOtherUser=0]="VerifyOtherUser",e[e.VerifySelfTrusted=1]="VerifySelfTrusted",e[e.VerifySelfUntrusted=2]="VerifySelfUntrusted"}(h||(h={}));class p{constructor(e,t,n,i,r,o){this.mode=e,this.sharedSecret=t,this.otherUserMasterKey=n,this.otherDeviceKey=i,this.myMasterKey=r,this.buffer=o}static async create(e,t){const n=p.generateSharedSecret(),i=p.determineMode(e,t);let r=null,o=null,s=null;if(i===h.VerifyOtherUser)r=t.getStoredCrossSigningForUser(e.otherUserId).getId("master");else if(i===h.VerifySelfTrusted)o=await p.getOtherDeviceKey(e,t);else if(i===h.VerifySelfUntrusted){const e=t.getUserId();s=t.getStoredCrossSigningForUser(e).getId("master")}const a=p.generateQrData(e,t,i,n,r,o,s),c=p.generateBuffer(a);return new p(i,n,r,o,s,c)}get encodedSharedSecret(){return this.sharedSecret}getBuffer(){return this.buffer}static generateSharedSecret(){const e=new Uint8Array(11);return n.g.crypto.getRandomValues(e),(0,c.encodeUnpaddedBase64)(e)}static async getOtherDeviceKey(e,t){const n=t.getUserId(),i=e.targetDevice,r=i.deviceId?t.getStoredDevice(n,i.deviceId):void 0;if(!r)throw new Error("could not find device "+(null==i?void 0:i.deviceId));return r.getFingerprint()}static determineMode(e,t){const n=t.getUserId(),i=e.otherUserId;let r=h.VerifyOtherUser;return n===i&&(r=t.checkUserTrust(n).isCrossSigningVerified()?h.VerifySelfTrusted:h.VerifySelfUntrusted),r}static generateQrData(e,t,n,i,r,o,s){const a=t.getUserId(),c={prefix:"MATRIX",version:2,mode:n,transactionId:e.channel.transactionId,firstKeyB64:"",secondKeyB64:"",secretB64:i},l=t.getStoredCrossSigningForUser(a);return n===h.VerifyOtherUser?(c.firstKeyB64=l.getId("master"),c.secondKeyB64=r):n===h.VerifySelfTrusted?(c.firstKeyB64=l.getId("master"),c.secondKeyB64=o):n===h.VerifySelfUntrusted&&(c.firstKeyB64=t.getDeviceEd25519Key(),c.secondKeyB64=s),c}static generateBuffer(e){let t=i.alloc(0);const n=e=>{const n=i.from([e]);t=i.concat([t,n])},r=(e,n,r=!0)=>{const o=i.from(e,n);r&&(e=>{const n=i.alloc(2);n.writeInt16BE(e,0),t=i.concat([t,n])})(o.byteLength),t=i.concat([t,o])},o=e=>{const n=(0,c.decodeBase64)(e),r=i.from(n);t=i.concat([t,r])};return r(e.prefix,"ascii",!1),n(e.version),n(e.mode),r(e.transactionId,"utf-8"),o(e.firstKeyB64),o(e.secondKeyB64),o(e.secretB64),t}}t.QRCodeData=p},56381:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SasEvent=t.SAS=void 0;var r=i(n(59713)),o=i(n(69141)),s=n(41631),a=n(16702),c=n(7434),l=n(61649),u=n(42481);const d=u.EventType.KeyVerificationStart,h=[u.EventType.KeyVerificationAccept,u.EventType.KeyVerificationKey,u.EventType.KeyVerificationMac];let p;const f=(0,a.errorFactory)("m.mismatched_sas","Mismatched short authentication string"),m=(0,a.errorFactory)("m.mismatched_commitment","Mismatched commitment"),g=[["","dog"],["","cat"],["","lion"],["","horse"],["","unicorn"],["","pig"],["","elephant"],["","rabbit"],["","panda"],["","rooster"],["","penguin"],["","turtle"],["","fish"],["","octopus"],["","butterfly"],["","flower"],["","tree"],["","cactus"],["","mushroom"],["","globe"],["","moon"],["","cloud"],["","fire"],["","banana"],["","apple"],["","strawberry"],["","corn"],["","pizza"],["","cake"],["","heart"],["","smiley"],["","robot"],["","hat"],["","glasses"],["","spanner"],["","santa"],["","thumbs up"],["","umbrella"],["","hourglass"],["","clock"],["","gift"],["","light bulb"],["","book"],["","pencil"],["","paperclip"],["","scissors"],["","lock"],["","key"],["","hammer"],["","telephone"],["","flag"],["","train"],["","bicycle"],["","aeroplane"],["","rocket"],["","trophy"],["","ball"],["","guitar"],["","trumpet"],["","bell"],["","anchor"],["","headphones"],["","folder"],["","pin"]],v={decimal:l.generateDecimalSas,emoji:function(e){return[e[0]>>2,(3&e[0])<<4|e[1]>>4,(15&e[1])<<2|e[2]>>6,63&e[2],e[3]>>2,(3&e[3])<<4|e[4]>>4,(15&e[4])<<2|e[5]>>6].map((e=>g[e]))}};function y(e,t){const n={};for(const i of t)i in v&&(n[i]=v[i](e));return n}const b={"hkdf-hmac-sha256":"calculate_mac","org.matrix.msc3783.hkdf-hmac-sha256":"calculate_mac_fixed_base64","hmac-sha256":"calculate_mac_long_kdf"};function E(e,t){return function(...n){const i=e[b[t]].apply(e,n);return c.logger.log("SAS calculateMAC:",t,n,i),i}}const S={"curve25519-hkdf-sha256":function(e,t,n){const i=`${e.baseApis.getUserId()}|${e.baseApis.deviceId}|${e.ourSASPubKey}|`,r=`${e.userId}|${e.deviceId}|${e.theirSASPubKey}|`,o="MATRIX_KEY_VERIFICATION_SAS|"+(e.initiatedByMe?i+r:r+i)+e.channel.transactionId;return t.generate_bytes(o,n)},curve25519:function(e,t,n){const i=`${e.baseApis.getUserId()}${e.baseApis.deviceId}`,r=`${e.userId}${e.deviceId}`,o="MATRIX_KEY_VERIFICATION_SAS"+(e.initiatedByMe?i+r:r+i)+e.channel.transactionId;return t.generate_bytes(o,n)}},w=["curve25519-hkdf-sha256","curve25519"],_=["sha256"],T=["org.matrix.msc3783.hkdf-hmac-sha256","hkdf-hmac-sha256","hmac-sha256"],x=Object.keys(v),C=new Set(w),I=new Set(_),k=new Set(T),M=new Set(x);function A(e,t){return Array.isArray(e)?e.filter((e=>t.has(e))):[]}let O;t.SasEvent=O,function(e){e.ShowSas="show_sas"}(O||(t.SasEvent=O={}));class R extends s.VerificationBase{constructor(...e){super(...e),(0,r.default)(this,"waitingForAccept",void 0),(0,r.default)(this,"ourSASPubKey",void 0),(0,r.default)(this,"theirSASPubKey",void 0),(0,r.default)(this,"sasEvent",void 0),(0,r.default)(this,"doVerification",(async()=>{await n.g.Olm.init(),p=p||new n.g.Olm.Utility,await this.baseApis.downloadKeys([this.userId]);let e=!1;do{try{return this.initiatedByMe?await this.doSendVerification():await this.doRespondVerification()}catch(t){if(!(t instanceof s.SwitchStartEventError))throw t;this.startEvent=t.startEvent,e=!0}}while(e)}))}static get NAME(){return"m.sas.v1"}get events(){return h}canSwitchStartEvent(e){if(e.getType()!==d)return!1;const t=e.getContent();return(null==t?void 0:t.method)===R.NAME&&!!this.waitingForAccept}async sendStart(){const e=this.channel.completeContent(d,{method:R.NAME,from_device:this.baseApis.deviceId,key_agreement_protocols:w,hashes:_,message_authentication_codes:T,short_authentication_string:x});return await this.channel.sendCompleted(d,e),e}async verifyAndCheckMAC(e,t,n,i){const r=S[e](this,n,6),o=new Promise(((e,o)=>{this.sasEvent={sas:y(r,t),confirm:async()=>{try{await this.sendMAC(n,i),e()}catch(e){o(e)}},cancel:()=>o((0,a.newUserCancelledError)()),mismatch:()=>o(f())},this.emit(O.ShowSas,this.sasEvent)})),[s]=await Promise.all([this.waitForEvent(u.EventType.KeyVerificationMac).then((e=>(this.expectedEvent=u.EventType.KeyVerificationDone,e))),o]),c=s.getContent();await this.checkMAC(n,c,i)}async doSendVerification(){let e,t;if(this.waitingForAccept=!0,e=this.startEvent?this.channel.completedContentFromEvent(this.startEvent):await this.sendStart(),!this.initiatedByMe)throw new s.SwitchStartEventError(this.startEvent);try{t=await this.waitForEvent(u.EventType.KeyVerificationAccept)}finally{this.waitingForAccept=!1}let i=t.getContent();const r=A(i.short_authentication_string,M);if(!(C.has(i.key_agreement_protocol)&&I.has(i.hash)&&k.has(i.message_authentication_code)&&r.length))throw(0,a.newUnknownMethodError)();if("string"!=typeof i.commitment)throw(0,a.newInvalidMessageError)();const c=i.key_agreement_protocol,l=i.message_authentication_code,d=i.commitment,h=new n.g.Olm.SAS;try{this.ourSASPubKey=h.get_pubkey(),await this.send(u.EventType.KeyVerificationKey,{key:this.ourSASPubKey}),t=await this.waitForEvent(u.EventType.KeyVerificationKey),i=t.getContent();const n=i.key+o.default.stringify(e);if(p.sha256(n)!==d)throw m();this.theirSASPubKey=i.key,h.set_their_key(i.key),await this.verifyAndCheckMAC(c,r,h,l)}finally{h.free()}}async doRespondVerification(){let e=this.channel.completedContentFromEvent(this.startEvent);const t=A(w,new Set(e.key_agreement_protocols))[0],i=A(_,new Set(e.hashes))[0],r=A(T,new Set(e.message_authentication_codes))[0],s=A(e.short_authentication_string,M);if(void 0===t||void 0===i||void 0===r||!s.length)throw(0,a.newUnknownMethodError)();const c=new n.g.Olm.SAS;try{const n=c.get_pubkey()+o.default.stringify(e);await this.send(u.EventType.KeyVerificationAccept,{key_agreement_protocol:t,hash:i,message_authentication_code:r,short_authentication_string:s,commitment:p.sha256(n)}),e=(await this.waitForEvent(u.EventType.KeyVerificationKey)).getContent(),this.theirSASPubKey=e.key,c.set_their_key(e.key),this.ourSASPubKey=c.get_pubkey(),await this.send(u.EventType.KeyVerificationKey,{key:this.ourSASPubKey}),await this.verifyAndCheckMAC(t,s,c,r)}finally{c.free()}}sendMAC(e,t){const n={},i=[],r="MATRIX_KEY_VERIFICATION_MAC"+this.baseApis.getUserId()+this.baseApis.deviceId+this.userId+this.deviceId+this.channel.transactionId,o=`ed25519:${this.baseApis.deviceId}`;n[o]=E(e,t)(this.baseApis.getDeviceEd25519Key(),r+o),i.push(o);const s=this.baseApis.getCrossSigningId();if(s){const o=`ed25519:${s}`;n[o]=E(e,t)(s,r+o),i.push(o)}const a=E(e,t)(i.sort().join(","),r+"KEY_IDS");return this.send(u.EventType.KeyVerificationMac,{mac:n,keys:a})}async checkMAC(e,t,n){const i="MATRIX_KEY_VERIFICATION_MAC"+this.userId+this.deviceId+this.baseApis.getUserId()+this.baseApis.deviceId+this.channel.transactionId;if(t.keys!==E(e,n)(Object.keys(t.mac).sort().join(","),i+"KEY_IDS"))throw(0,a.newKeyMismatchError)();await this.verifyKeys(this.userId,t.mac,((t,r,o)=>{if(o!==E(e,n)(r.keys[t],i+t))throw(0,a.newKeyMismatchError)()}))}}t.SAS=R},61649:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateDecimalSas=function(e){return[1e3+(e[0]<<5|e[1]>>3),1e3+((7&e[1])<<10|e[2]<<2|e[3]>>6),1e3+((63&e[3])<<7|e[4]>>1)]}},22842:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.InRoomRequests=t.InRoomChannel=void 0;var r=i(n(59713)),o=n(85279),s=n(7434);const a=n(42481).EventType.RoomMessage,c="m.reference",l="m.relates_to";class u{constructor(e,t,n){this.client=e,this.roomId=t,this.userId=n,(0,r.default)(this,"requestEventId",void 0)}get receiveStartFromOtherDevices(){return!0}get transactionId(){return this.requestEventId}static getOtherPartyUserId(e,t){if(u.getEventType(e)!==o.REQUEST_TYPE)return;const n=t.getUserId(),i=e.getSender(),r=e.getContent().to;return i===n?r:r===n?i:void 0}getTimestamp(e){return e.getTs()}static canCreateRequest(e){return e===o.REQUEST_TYPE}canCreateRequest(e){return u.canCreateRequest(e)}static getTransactionId(e){if(u.getEventType(e)===o.REQUEST_TYPE)return e.getId();{const t=e.getRelation();if((null==t?void 0:t.rel_type)===c)return t.event_id}}static validateEvent(e,t){const n=u.getTransactionId(e);if("string"!=typeof n||0===n.length)return!1;const i=u.getEventType(e),r=e.getContent();if(i===o.REQUEST_TYPE){if(!r||"string"!=typeof r.to||!r.to.length)return s.logger.log("InRoomChannel: validateEvent: no valid to "+(r&&r.to)),!1;if(!u.getOtherPartyUserId(e,t))return s.logger.log(`InRoomChannel: validateEvent: not directed to or sent by me: ${e.getSender()}, ${r&&r.to}`),!1}return o.VerificationRequest.validateEvent(i,e,t)}static getEventType(e){const t=e.getType();if(t===a){const t=e.getContent();if(t){const{msgtype:e}=t;if(e===o.REQUEST_TYPE)return o.REQUEST_TYPE}}return t&&t!==o.REQUEST_TYPE?t:""}async handleEvent(e,t,n=!1){if(t.hasEventId(e.getId()))return;const i=u.getEventType(e);if(e.getRoomId()!==this.roomId)return;if(!this.userId){const t=u.getOtherPartyUserId(e,this.client);t&&(this.userId=t)}const r=this.client.getUserId(),o=e.getSender();if(this.userId&&o!==r&&o!==this.userId)return void s.logger.log(`InRoomChannel: ignoring verification event from non-participating sender ${o}`);this.requestEventId||(this.requestEventId=u.getTransactionId(e));const a=!!e.getUnsigned().transaction_id,c=e.getSender()===this.client.getUserId();return t.handleEvent(i,e,n,a,c)}completedContentFromEvent(e){const t=Object.assign({},e.getContent());return t[l]=e.getRelation(),t}completeContent(e,t){return t=Object.assign({},t),e!==o.REQUEST_TYPE&&e!==o.READY_TYPE&&e!==o.START_TYPE||(t.from_device=this.client.getDeviceId()),e===o.REQUEST_TYPE?t={body:this.client.getUserId()+" is requesting to verify your key, but your client does not support in-chat key verification.  You will need to use legacy key verification to verify keys.",msgtype:o.REQUEST_TYPE,to:this.userId,from_device:t.from_device,methods:t.methods}:t[l]={rel_type:c,event_id:this.transactionId},t}send(e,t){const n=this.completeContent(e,t);return this.sendCompleted(e,n)}async sendCompleted(e,t){let n=e;e===o.REQUEST_TYPE&&(n=a);const i=await this.client.sendEvent(this.roomId,n,t);e===o.REQUEST_TYPE&&(this.requestEventId=i.event_id)}}t.InRoomChannel=u,t.InRoomRequests=class{constructor(){(0,r.default)(this,"requestsByRoomId",new Map)}getRequest(e){const t=e.getRoomId(),n=u.getTransactionId(e);return this.getRequestByTxnId(t,n)}getRequestByChannel(e){return this.getRequestByTxnId(e.roomId,e.transactionId)}getRequestByTxnId(e,t){const n=this.requestsByRoomId.get(e);if(n)return n.get(t)}setRequest(e,t){this.doSetRequest(e.getRoomId(),u.getTransactionId(e),t)}setRequestByChannel(e,t){this.doSetRequest(e.roomId,e.transactionId,t)}doSetRequest(e,t,n){let i=this.requestsByRoomId.get(e);i||(i=new Map,this.requestsByRoomId.set(e,i)),i.set(t,n)}removeRequest(e){const t=e.getRoomId(),n=this.requestsByRoomId.get(t);n&&(n.delete(u.getTransactionId(e)),0===n.size&&this.requestsByRoomId.delete(t))}findRequestInProgress(e){const t=this.requestsByRoomId.get(e);if(t)for(const e of t.values())if(e.pending)return e}}},89588:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ToDeviceRequests=t.ToDeviceChannel=void 0;var r=i(n(59713)),o=n(98401),s=n(7434),a=n(85279),c=n(16702),l=n(24369);class u{constructor(e,t,n,i,o){this.client=e,this.userId=t,this.devices=n,this.transactionId=i,this.deviceId=o,(0,r.default)(this,"request",void 0)}isToDevices(e){if(e.length===this.devices.length){for(const t of e)if(!this.devices.includes(t))return!1;return!0}return!1}static getEventType(e){return e.getType()}static getTransactionId(e){const t=e.getContent();return t&&t.transaction_id}static canCreateRequest(e){return e===a.REQUEST_TYPE||e===a.START_TYPE}canCreateRequest(e){return u.canCreateRequest(e)}static validateEvent(e,t){if(e.isCancelled())return s.logger.warn("Ignoring flagged verification request from "+e.getSender()),!1;const n=e.getContent();if(!n)return s.logger.warn("ToDeviceChannel.validateEvent: invalid: no content"),!1;if(!n.transaction_id)return s.logger.warn("ToDeviceChannel.validateEvent: invalid: no transaction_id"),!1;const i=e.getType();if(i===a.REQUEST_TYPE){if(!Number.isFinite(n.timestamp))return s.logger.warn("ToDeviceChannel.validateEvent: invalid: no timestamp"),!1;if(e.getSender()===t.getUserId()&&n.from_device==t.getDeviceId())return s.logger.warn("ToDeviceChannel.validateEvent: invalid: from own device"),!1}return a.VerificationRequest.validateEvent(i,e,t)}getTimestamp(e){const t=e.getContent();return t&&t.timestamp}async handleEvent(e,t,n=!1){const i=e.getType(),r=e.getContent();if(i===a.REQUEST_TYPE||i===a.READY_TYPE||i===a.START_TYPE){this.transactionId||(this.transactionId=r.transaction_id);const e=r.from_device;if(!this.deviceId&&this.devices.includes(e)&&(this.deviceId=e),!this.deviceId||this.deviceId!==e){const t=this.completeContent(a.CANCEL_TYPE,(0,c.errorFromEvent)((0,c.newUnexpectedMessageError)()));return this.sendToDevices(a.CANCEL_TYPE,t,[e])}}const o=t.phase===a.PHASE_STARTED||t.phase===a.PHASE_READY;await t.handleEvent(e.getType(),e,n,!1,!1);const s=t.phase===a.PHASE_STARTED||t.phase===a.PHASE_READY;if((i===a.START_TYPE||i===a.READY_TYPE)&&!o&&s&&this.deviceId){const e=this.devices.filter((e=>e!==this.deviceId&&e!==this.client.getDeviceId()));if(e.length){const t=this.completeContent(a.CANCEL_TYPE,{code:"m.accepted",reason:"Verification request accepted by another device"});await this.sendToDevices(a.CANCEL_TYPE,t,e)}}}completedContentFromEvent(e){return e.getContent()}completeContent(e,t){return t=Object.assign({},t),this.transactionId&&(t.transaction_id=this.transactionId),e!==a.REQUEST_TYPE&&e!==a.READY_TYPE&&e!==a.START_TYPE||(t.from_device=this.client.getDeviceId()),e===a.REQUEST_TYPE&&(t.timestamp=Date.now()),t}send(e,t={}){e!==a.REQUEST_TYPE&&e!==a.START_TYPE||this.transactionId||(this.transactionId=u.makeTransactionId());const n=this.completeContent(e,t);return this.sendCompleted(e,n)}async sendCompleted(e,t){let n;n=e===a.REQUEST_TYPE||e===a.CANCEL_TYPE&&!this.deviceId?await this.sendToDevices(e,t,this.devices):await this.sendToDevices(e,t,[this.deviceId]);const i=new l.MatrixEvent({sender:this.client.getUserId(),content:t,type:e});return await this.request.handleEvent(e,i,!0,!0,!0),n}async sendToDevices(e,t,n){if(n.length){const i={};for(const e of n)i[e]=t;await this.client.sendToDevice(e,{[this.userId]:i})}}static makeTransactionId(){return(0,o.randomString)(32)}}t.ToDeviceChannel=u,t.ToDeviceRequests=class{constructor(){(0,r.default)(this,"requestsByUserId",new Map)}getRequest(e){return this.getRequestBySenderAndTxnId(e.getSender(),u.getTransactionId(e))}getRequestByChannel(e){return this.getRequestBySenderAndTxnId(e.userId,e.transactionId)}getRequestBySenderAndTxnId(e,t){const n=this.requestsByUserId.get(e);if(n)return n.get(t)}setRequest(e,t){this.setRequestBySenderAndTxnId(e.getSender(),u.getTransactionId(e),t)}setRequestByChannel(e,t){this.setRequestBySenderAndTxnId(e.userId,e.transactionId,t)}setRequestBySenderAndTxnId(e,t,n){let i=this.requestsByUserId.get(e);i||(i=new Map,this.requestsByUserId.set(e,i)),i.set(t,n)}removeRequest(e){const t=e.getSender(),n=this.requestsByUserId.get(t);n&&(n.delete(u.getTransactionId(e)),0===n.size&&this.requestsByUserId.delete(t))}findRequestInProgress(e,t){const n=this.requestsByUserId.get(e);if(n)for(const e of n.values())if(e.pending&&e.channel.isToDevices(t))return e}getRequestsInProgress(e){const t=this.requestsByUserId.get(e);return t?Array.from(t.values()).filter((e=>e.pending)):[]}}},85279:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.VerificationRequestEvent=t.VerificationRequest=t.START_TYPE=t.REQUEST_TYPE=t.READY_TYPE=t.Phase=t.PHASE_UNSENT=t.PHASE_STARTED=t.PHASE_REQUESTED=t.PHASE_READY=t.PHASE_DONE=t.PHASE_CANCELLED=t.EVENT_PREFIX=t.DONE_TYPE=t.CANCEL_TYPE=void 0;var r=i(n(59713)),o=n(7434),s=n(16702),a=n(51696),c=n(42481),l=n(55861);const u="m.key.verification.";t.EVENT_PREFIX=u;const d=u+"request";t.REQUEST_TYPE=d;const h=u+"start";t.START_TYPE=h;const p=u+"cancel";t.CANCEL_TYPE=p;const f=u+"done";t.DONE_TYPE=f;const m=u+"ready";let g;t.READY_TYPE=m,t.Phase=g,function(e){e[e.Unsent=1]="Unsent",e[e.Requested=2]="Requested",e[e.Ready=3]="Ready",e[e.Started=4]="Started",e[e.Cancelled=5]="Cancelled",e[e.Done=6]="Done"}(g||(t.Phase=g={}));const v=g.Unsent;t.PHASE_UNSENT=v;const y=g.Requested;t.PHASE_REQUESTED=y;const b=g.Ready;t.PHASE_READY=b;const E=g.Started;t.PHASE_STARTED=E;const S=g.Cancelled;t.PHASE_CANCELLED=S;const w=g.Done;let _;t.PHASE_DONE=w,t.VerificationRequestEvent=_,function(e){e.Change="change"}(_||(t.VerificationRequestEvent=_={}));class T extends l.TypedEventEmitter{constructor(e,t,n){super(),this.channel=e,this.verificationMethods=t,this.client=n,(0,r.default)(this,"eventsByUs",new Map),(0,r.default)(this,"eventsByThem",new Map),(0,r.default)(this,"_observeOnly",!1),(0,r.default)(this,"timeoutTimer",null),(0,r.default)(this,"_accepting",!1),(0,r.default)(this,"_declining",!1),(0,r.default)(this,"verifierHasFinished",!1),(0,r.default)(this,"_cancelled",!1),(0,r.default)(this,"_chosenMethod",null),(0,r.default)(this,"_qrCodeData",null),(0,r.default)(this,"requestReceivedAt",null),(0,r.default)(this,"commonMethods",[]),(0,r.default)(this,"_phase",void 0),(0,r.default)(this,"_cancellingUserId",void 0),(0,r.default)(this,"_verifier",void 0),(0,r.default)(this,"cancelOnTimeout",(async()=>{try{this.initiatedByMe?await this.cancel({reason:"Other party didn't accept in time",code:"m.timeout"}):await this.cancel({reason:"User didn't accept in time",code:"m.timeout"})}catch(e){o.logger.error("Error while cancelling verification request",e)}})),this.channel.request=this,this.setPhase(v,!1)}static validateEvent(e,t,n){const i=t.getContent();return!(!e||!e.startsWith(u))&&(i?e!==d&&e!==m||Array.isArray(i.methods)?e!==d&&e!==m&&e!==h||"string"==typeof i.from_device&&0!==i.from_device.length||(o.logger.log("VerificationRequest: validateEvent: fail because from_device"),!1):(o.logger.log("VerificationRequest: validateEvent: fail because methods"),!1):(o.logger.log("VerificationRequest: validateEvent: no content"),!1))}get invalid(){return this.phase===v}get requested(){return this.phase===y}get cancelled(){return this.phase===S}get ready(){return this.phase===b}get started(){return this.phase===E}get done(){return this.phase===w}get methods(){return this.commonMethods}get chosenMethod(){return this._chosenMethod}calculateEventTimeout(e){let t=this.channel.getTimestamp(e)+6e5;if(this.requestReceivedAt&&!this.initiatedByMe&&this.phase<=y){const e=this.requestReceivedAt+12e4;t=Math.min(t,e)}return Math.max(0,t-Date.now())}get timeout(){const e=this.getEventByEither(d);return e?this.calculateEventTimeout(e):0}get requestEvent(){return this.getEventByEither(d)}get phase(){return this._phase}get verifier(){return this._verifier}get canAccept(){return this.phase<b&&!this._accepting&&!this._declining}get accepting(){return this._accepting}get declining(){return this._declining}get pending(){return!this.observeOnly&&this._phase!==w&&this._phase!==S}get qrCodeData(){return this._qrCodeData}otherPartySupportsMethod(e,t=!1){if(!t&&!this.ready&&!this.started)return!1;const n=this.eventsByThem.get(d)||this.eventsByThem.get(m);if(!n){if(this.started&&this.initiatedByMe){const t=this.eventsByUs.get(h),n=t&&t.getContent();return e==(n&&n.method)}return!1}const i=n.getContent();if(!i)return!1;const{methods:r}=i;return!!Array.isArray(r)&&r.includes(e)}get initiatedByMe(){const e=this.eventsByUs.size+this.eventsByThem.size===0;if(this._phase===v&&e)return!0;const t=this.eventsByUs.has(d),n=this.eventsByThem.has(d);if(t&&!n)return!0;if(!t&&n)return!1;const i=this.eventsByUs.has(h),r=this.eventsByThem.has(h);return!(!i||r)}get requestingUserId(){return this.initiatedByMe?this.client.getUserId():this.otherUserId}get receivingUserId(){return this.initiatedByMe?this.otherUserId:this.client.getUserId()}get otherUserId(){return this.channel.userId}get isSelfVerification(){return this.client.getUserId()===this.otherUserId}get cancellingUserId(){const e=this.eventsByUs.get(p),t=this.eventsByThem.get(p);return e&&(!t||e.getId()<t.getId())?e.getSender():t?t.getSender():void 0}get cancellationCode(){const e=this.getEventByEither(p);return e?e.getContent().code:null}get observeOnly(){return this._observeOnly}get targetDevice(){const e=this.eventsByThem.get(d)||this.eventsByThem.get(m)||this.eventsByThem.get(h),t=null==e?void 0:e.getContent(),n=null==t?void 0:t.from_device;return{userId:this.otherUserId,deviceId:n}}beginKeyVerification(e,t=null){if(!this.observeOnly&&!this._verifier&&(this.phase===y||this.phase===b||this.phase===v&&this.channel.canCreateRequest(h))){if(this.commonMethods.length&&!this.commonMethods.includes(e))throw(0,s.newUnknownMethodError)();if(this._verifier=this.createVerifier(e,null,t),!this._verifier)throw(0,s.newUnknownMethodError)();this._chosenMethod=e}return this._verifier}async sendRequest(){if(!this.observeOnly&&this._phase===v){const e=[...this.verificationMethods.keys()];await this.channel.send(d,{methods:e})}}async cancel({reason:e="User declined",code:t="m.user"}={}){if(!this.observeOnly&&this._phase!==S){if(this._declining=!0,this.emit(_.Change),this._verifier)return this._verifier.cancel((0,s.errorFactory)(t,e)());this._cancellingUserId=this.client.getUserId(),await this.channel.send(p,{code:t,reason:e})}}async accept(){if(!this.observeOnly&&this.phase===y&&!this.initiatedByMe){const e=[...this.verificationMethods.keys()];this._accepting=!0,this.emit(_.Change),await this.channel.send(m,{methods:e})}}waitFor(e){return new Promise(((t,n)=>{const i=()=>{let r=!1;return e(this)?(t(this),r=!0):this.cancelled&&(n(new Error("cancelled")),r=!0),r&&this.off(_.Change,i),r};i()||this.on(_.Change,i)}))}setPhase(e,t=!0){this._phase=e,t&&this.emit(_.Change)}getEventByEither(e){return this.eventsByThem.get(e)||this.eventsByUs.get(e)}getEventBy(e,t=!1){return t?this.eventsByThem.get(e):this.eventsByUs.get(e)}calculatePhaseTransitions(){const e=[{phase:v}],t=()=>e[e.length-1].phase,n=this.eventsByThem.has(d),i=this.getEventBy(d,n);i&&e.push({phase:y,event:i});const r=i&&this.getEventBy(m,!n);let o;if(r&&t()===y&&e.push({phase:b,event:r}),r||!i){const e=this.eventsByThem.get(h),t=this.eventsByUs.get(h);o=e&&t?e.getSender()<t.getSender()?e:t:e||t}else o=this.getEventBy(h,!n);if(o){const n=t()===y&&(null==i?void 0:i.getSender())!==o.getSender(),r=t()===v&&this.channel.canCreateRequest(h);(n||t()===b||r)&&e.push({phase:E,event:o})}const s=this.eventsByUs.get(f);(this.verifierHasFinished||s&&t()===E)&&e.push({phase:w});const a=this.getEventByEither(p);return(this._cancelled||a)&&t()!==w?(e.push({phase:S,event:a}),e):e}transitionToPhase(e){const{phase:t,event:n}=e;if((t===y||t===b)&&!this.wasSentByOwnDevice(n)){const e=n.getContent();this.commonMethods=e.methods.filter((e=>this.verificationMethods.has(e)))}if(this.observeOnly||t!==y&&t!==E&&t!==b||this.channel.receiveStartFromOtherDevices&&this.wasSentByOwnUser(n)&&!this.wasSentByOwnDevice(n)&&(this._observeOnly=!0),t===E){const{method:e}=n.getContent();this._verifier||this.observeOnly||(this._verifier=this.createVerifier(e,n),this._verifier?this._chosenMethod=e:this.cancel({code:"m.unknown_method",reason:`Unknown method: ${e}`}))}}applyPhaseTransitions(){const e=this.calculatePhaseTransitions(),t=e.findIndex((e=>e.phase===this.phase)),n=e.slice(t+1);for(const e of n)this.transitionToPhase(e);return n}isWinningStartRace(e){if(e.getType()!==h)return!1;const t=this._verifier.startEvent;let n,i;if(this.isSelfVerification)if(t){const e=t.getContent();n=e&&e.from_device}else n=this.client.getDeviceId();else n=t?t.getSender():this.client.getUserId();if(this.isSelfVerification){const t=e.getContent();i=t&&t.from_device}else i=e.getSender();return i<n}hasEventId(e){for(const t of this.eventsByUs.values())if(t.getId()===e)return!0;for(const t of this.eventsByThem.values())if(t.getId()===e)return!0;return!1}async handleEvent(e,t,n,i,r){if(this.done||this.cancelled)return;const s=this._observeOnly;if(this.adjustObserveOnly(t,n),!this.observeOnly&&!i&&await this.cancelOnError(e,t))return;if(r?this.eventsByUs.has(e):this.eventsByThem.has(e))return;const c=this.phase;this.addEvent(e,t,r);const l=this.applyPhaseTransitions();try{if(this._verifier&&!this.observeOnly){const n=this.isWinningStartRace(t);if(this._verifier.canSwitchStartEvent(t)&&n)this._verifier.switchStartEvent(t);else if(!i){var u;(e===p||null!==(u=this._verifier.events)&&void 0!==u&&u.includes(e))&&this._verifier.handleEvent(t)}}if(l.length){n&&l.some((e=>e.phase===b))&&this.otherPartySupportsMethod(a.SCAN_QR_CODE_METHOD,!0)&&(this._qrCodeData=await a.QRCodeData.create(this,this.client));const e=l[l.length-1],{phase:t}=e;this.setupTimeout(t),this.setPhase(t)}else this._observeOnly!==s&&this.emit(_.Change)}finally{o.logger.log(`Verification request ${this.channel.transactionId}: ${e} event with id:${t.getId()}, content:${JSON.stringify(t.getContent())} deviceId:${this.channel.deviceId}, sender:${t.getSender()}, isSentByUs:${r}, isLiveEvent:${n}, isRemoteEcho:${i}, phase:${c}=>${this.phase}, observeOnly:${s}=>${this._observeOnly}`)}}setupTimeout(e){!this.timeoutTimer&&!this.observeOnly&&e===y&&(this.timeoutTimer=setTimeout(this.cancelOnTimeout,this.timeout)),this.timeoutTimer&&(e===E||e===b||e===w||e===S)&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)}async cancelOnError(e,t){if(e===h){const e=t.getContent().method;if(!this.verificationMethods.has(e))return await this.cancel((0,s.errorFromEvent)((0,s.newUnknownMethodError)())),!0}const n=e===d&&this.phase!==v,i=e===m&&this.phase!==y&&this.phase!==E;if(this.phase!==v&&(n||i)){o.logger.warn(`Cancelling, unexpected ${e} verification event from ${t.getSender()}`);const n=`Unexpected ${e} event in phase ${this.phase}`;return await this.cancel((0,s.errorFromEvent)((0,s.newUnexpectedMessageError)({reason:n}))),!0}return!1}adjustObserveOnly(e,t=!1){t||(this._observeOnly=!0),this.calculateEventTimeout(e)<3e3&&(this._observeOnly=!0)}addEvent(e,t,n=!1){if(n?this.eventsByUs.set(e,t):this.eventsByThem.set(e,t),e===d){for(const[e,t]of this.eventsByThem.entries())t.getSender()!==this.otherUserId&&this.eventsByThem.delete(e);this.requestReceivedAt=Date.now()}}createVerifier(e,t=null,n=null){n||(n=this.targetDevice);const{userId:i,deviceId:r}=n,s=this.verificationMethods.get(e);if(s)return new s(this.channel,this.client,i,r,t,this);o.logger.warn("could not find verifier constructor for method",e)}wasSentByOwnUser(e){return(null==e?void 0:e.getSender())===this.client.getUserId()}wasSentByOwnDevice(e){if(!this.wasSentByOwnUser(e))return!1;const t=e.getContent();return!(!t||t.from_device!==this.client.getDeviceId())}onVerifierCancelled(){this._cancelled=!0;const e=this.applyPhaseTransitions();e.length&&this.setPhase(e[e.length-1].phase)}onVerifierFinished(){this.channel.send(c.EventType.KeyVerificationDone,{}),this.verifierHasFinished=!0;const e=this.applyPhaseTransitions();e.length&&this.setPhase(e[e.length-1].phase)}getEventFromOtherParty(e){return this.eventsByThem.get(e)}}t.VerificationRequest=T},9810:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RoomWidgetClient=void 0;var r=i(n(59713)),o=n(37760),s=n(24369),a=n(42481),c=n(7434),l=n(62168),u=n(64551),d=n(70011),h=n(83998);class p extends l.MatrixClient{constructor(e,t,n,i){var d,h,p,f,m,g,v,y,b,E;super(i),this.widgetApi=e,this.capabilities=t,this.roomId=n,(0,r.default)(this,"room",void 0),(0,r.default)(this,"widgetApiReady",new Promise((e=>this.widgetApi.once("ready",e)))),(0,r.default)(this,"lifecycle",void 0),(0,r.default)(this,"syncState",null),(0,r.default)(this,"onEvent",(async e=>{if(e.preventDefault(),e.detail.data.room_id===this.roomId){const t=new s.MatrixEvent(e.detail.data);await this.syncApi.injectRoomEvents(this.room,[],[t]),this.emit(l.ClientEvent.Event,t),this.setSyncState(u.SyncState.Syncing),c.logger.info(`Received event ${t.getId()} ${t.getType()} ${t.getStateKey()}`)}else{const{event_id:t,room_id:n}=e.detail.data;c.logger.info(`Received event ${t} for a different room ${n}; discarding`)}await this.ack(e)})),(0,r.default)(this,"onToDevice",(async e=>{e.preventDefault();const t=new s.MatrixEvent({type:e.detail.data.type,sender:e.detail.data.sender,content:e.detail.data.content});e.detail.data.encrypted&&t.makeEncrypted(a.EventType.RoomMessageEncrypted,{},"",""),this.emit(l.ClientEvent.ToDeviceEvent,t),this.setSyncState(u.SyncState.Syncing),await this.ack(e)})),(null!==(d=t.sendEvent)&&void 0!==d&&d.length||null!==(h=t.receiveEvent)&&void 0!==h&&h.length||!0===t.sendMessage||Array.isArray(t.sendMessage)&&t.sendMessage.length||!0===t.receiveMessage||Array.isArray(t.receiveMessage)&&t.receiveMessage.length||null!==(p=t.sendState)&&void 0!==p&&p.length||null!==(f=t.receiveState)&&void 0!==f&&f.length)&&e.requestCapabilityForRoomTimeline(n),null===(m=t.sendEvent)||void 0===m||m.forEach((t=>e.requestCapabilityToSendEvent(t))),null===(g=t.receiveEvent)||void 0===g||g.forEach((t=>e.requestCapabilityToReceiveEvent(t))),!0===t.sendMessage?e.requestCapabilityToSendMessage():Array.isArray(t.sendMessage)&&t.sendMessage.forEach((t=>e.requestCapabilityToSendMessage(t))),!0===t.receiveMessage?e.requestCapabilityToReceiveMessage():Array.isArray(t.receiveMessage)&&t.receiveMessage.forEach((t=>e.requestCapabilityToReceiveMessage(t))),null===(v=t.sendState)||void 0===v||v.forEach((({eventType:t,stateKey:n})=>e.requestCapabilityToSendState(t,n))),null===(y=t.receiveState)||void 0===y||y.forEach((({eventType:t,stateKey:n})=>e.requestCapabilityToReceiveState(t,n))),null===(b=t.sendToDevice)||void 0===b||b.forEach((t=>e.requestCapabilityToSendToDevice(t))),null===(E=t.receiveToDevice)||void 0===E||E.forEach((t=>e.requestCapabilityToReceiveToDevice(t))),t.turnServers&&e.requestCapability(o.MatrixCapabilities.MSC3846TurnServers),e.on(`action:${o.WidgetApiToWidgetAction.SendEvent}`,this.onEvent),e.on(`action:${o.WidgetApiToWidgetAction.SendToDevice}`,this.onToDevice),e.start()}async startClient(e={}){var t,n;this.lifecycle=new AbortController;const i=this.getUserId();i&&this.store.storeUser(new h.User(i)),e.slidingSync?this.syncApi=new d.SlidingSyncSdk(e.slidingSync,this,e):this.syncApi=new u.SyncApi(this,e),this.room=this.syncApi.createRoom(this.roomId),this.store.storeRoom(this.room),await this.widgetApiReady,await Promise.all(null!==(t=null===(n=this.capabilities.receiveState)||void 0===n?void 0:n.map((async({eventType:e,stateKey:t})=>{const n=(await this.widgetApi.readStateEvents(e,void 0,t,[this.roomId])).map((e=>new s.MatrixEvent(e)));await this.syncApi.injectRoomEvents(this.room,[],n),n.forEach((e=>{this.emit(l.ClientEvent.Event,e),c.logger.info(`Backfilled event ${e.getId()} ${e.getType()} ${e.getStateKey()}`)}))})))&&void 0!==t?t:[]),this.setSyncState(u.SyncState.Syncing),c.logger.info("Finished backfilling events"),this.capabilities.turnServers&&this.watchTurnServers()}stopClient(){this.widgetApi.off(`action:${o.WidgetApiToWidgetAction.SendEvent}`,this.onEvent),this.widgetApi.off(`action:${o.WidgetApiToWidgetAction.SendToDevice}`,this.onToDevice),super.stopClient(),this.lifecycle.abort()}async joinRoom(e){if(e===this.roomId)return this.room;throw new Error(`Unknown room: ${e}`)}async encryptAndSendEvent(e,t){let n;try{n=await this.widgetApi.sendRoomEvent(t.getType(),t.getContent(),e.roomId)}catch(n){throw this.updatePendingEventStatus(e,t,s.EventStatus.NOT_SENT),n}return e.updatePendingEvent(t,s.EventStatus.SENT,n.event_id),{event_id:n.event_id}}async sendStateEvent(e,t,n,i=""){return await this.widgetApi.sendStateEvent(t,i,n,e)}async sendToDevice(e,t){return await this.widgetApi.sendToDevice(e,!1,t),{}}async queueToDevice({eventType:e,batch:t}){const n={};for(const{userId:e,deviceId:i,payload:r}of t)n[e]||(n[e]={}),n[e][i]=r;await this.widgetApi.sendToDevice(e,!1,n)}async encryptAndSendToDevices(e,t){const n={};for(const{userId:i,deviceInfo:{deviceId:r}}of e)n[i]||(n[i]={}),n[i][r]=t;await this.widgetApi.sendToDevice(t.type,!0,n)}async checkTurnServers(){return this.turnServers.length>0}getSyncState(){return this.syncState}setSyncState(e){const t=this.syncState;this.syncState=e,this.emit(l.ClientEvent.Sync,e,t)}async ack(e){await this.widgetApi.transport.reply(e.detail,{})}async watchTurnServers(){const e=this.widgetApi.getTurnServers(),t=()=>{e.return(void 0)};this.lifecycle.signal.addEventListener("abort",t);try{for await(const t of e)this.turnServers=[{urls:t.uris,username:t.username,credential:t.password}],this.emit(l.ClientEvent.TurnServers,this.turnServers),c.logger.log(`Received TURN server: ${t.uris}`)}catch(e){c.logger.warn("Error watching TURN servers",e)}finally{this.lifecycle.signal.removeEventListener("abort",t)}}}t.RoomWidgetClient=p},19489:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.KeySignatureUploadError=t.InvalidStoreState=t.InvalidStoreError=t.InvalidCryptoStoreState=t.InvalidCryptoStoreError=void 0;var r=i(n(59713));let o,s;t.InvalidStoreState=o,function(e){e[e.ToggledLazyLoading=0]="ToggledLazyLoading"}(o||(t.InvalidStoreState=o={}));class a extends Error{constructor(e,t){super(`Store is invalid because ${e}, please stop the client, delete all data and start the client again`),this.reason=e,this.value=t,this.name="InvalidStoreError"}}t.InvalidStoreError=a,(0,r.default)(a,"TOGGLED_LAZY_LOADING",o.ToggledLazyLoading),t.InvalidCryptoStoreState=s,function(e){e.TooNew="TOO_NEW"}(s||(t.InvalidCryptoStoreState=s={}));class c extends Error{constructor(e){super(`Crypto store is invalid because ${e}, please stop the client, delete all data and start the client again`),this.reason=e,this.name="InvalidCryptoStoreError"}}t.InvalidCryptoStoreError=c,(0,r.default)(c,"TOO_NEW",s.TooNew);class l extends Error{constructor(e,t){super(e),this.value=t}}t.KeySignatureUploadError=l},81166:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.eventMapperFor=function(e,t){let n=Boolean(t.preventReEmit);const i=!1!==t.decrypt;return function(r){t.toDevice&&delete r.room_id;const s=e.getRoom(r.room_id);let c;s&&void 0===r.state_key&&(c=s.findEventById(r.event_id)),!c||c.status?c=new o.MatrixEvent(r):(c.setUnsigned(a(a({},c.getUnsigned()),r.unsigned)),n=!0);const l=null==s?void 0:s.findThreadForEvent(c);return l&&c.setThread(l),c.isEncrypted()&&(n||e.reEmitter.reEmit(c,[o.MatrixEventEvent.Decrypted]),i&&e.decryptEventIfNeeded(c)),n||(e.reEmitter.reEmit(c,[o.MatrixEventEvent.Replaced,o.MatrixEventEvent.VisibilityChange]),null==s||s.reEmitter.reEmit(c,[o.MatrixEventEvent.BeforeRedaction])),c}};var r=i(n(59713)),o=n(24369);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},25268:(e,t)=>{"use strict";let n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ServerSupport=t.Feature=void 0,t.buildFeatureSupportMap=async function(e){const t=new Map;for(const[c,l]of Object.entries(r)){var i,o,s,a;const r=null!==(i=null===(o=e.versions)||void 0===o?void 0:o.includes(l.matrixVersion||""))&&void 0!==i&&i,u=null!==(s=null===(a=l.unstablePrefixes)||void 0===a?void 0:a.every((t=>{var n;return!0===(null===(n=e.unstable_features)||void 0===n?void 0:n[t])})))&&void 0!==s&&s;r?t.set(c,n.Stable):u?t.set(c,n.Unstable):t.set(c,n.Unsupported)}return t},t.ServerSupport=n,function(e){e[e.Stable=0]="Stable",e[e.Unstable=1]="Unstable",e[e.Unsupported=2]="Unsupported"}(n||(t.ServerSupport=n={})),t.Feature=i,function(e){e.Thread="Thread",e.ThreadUnreadNotifications="ThreadUnreadNotifications",e.LoginTokenRequest="LoginTokenRequest"}(i||(t.Feature=i={}));const r={[i.Thread]:{unstablePrefixes:["org.matrix.msc3440"],matrixVersion:"v1.3"},[i.ThreadUnreadNotifications]:{unstablePrefixes:["org.matrix.msc3771","org.matrix.msc3773"],matrixVersion:"v1.4"},[i.LoginTokenRequest]:{unstablePrefixes:["org.matrix.msc3882"]}}},33564:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterComponent=void 0;var i=n(36969);t.FilterComponent=class{constructor(e,t){this.filterJson=e,this.userId=t}check(e){var t,n;const r=(null===(t=e.getUnsigned())||void 0===t?void 0:t["m.relations"])||{},o=Object.keys(r),s=[];return this.userId&&null!=r&&null!==(n=r[i.THREAD_RELATION_TYPE.name])&&void 0!==n&&n.current_user_participated&&s.push(this.userId),this.checkFields(e.getRoomId(),e.getSender(),e.getType(),!!e.getContent()&&void 0!==e.getContent().url,o,s)}toJSON(){return{types:this.filterJson.types||null,not_types:this.filterJson.not_types||[],rooms:this.filterJson.rooms||null,not_rooms:this.filterJson.not_rooms||[],senders:this.filterJson.senders||null,not_senders:this.filterJson.not_senders||[],contains_url:this.filterJson.contains_url||null,[i.FILTER_RELATED_BY_SENDERS.name]:this.filterJson[i.FILTER_RELATED_BY_SENDERS.name]||[],[i.FILTER_RELATED_BY_REL_TYPES.name]:this.filterJson[i.FILTER_RELATED_BY_REL_TYPES.name]||[]}}checkFields(e,t,n,r,o,s){const a={rooms:function(t){return e===t},senders:function(e){return t===e},types:function(e){return function(e,t){if(t.endsWith("*")){const n=t.slice(0,-1);return e.slice(0,n.length)===n}return e===t}(n,e)}};for(const e in a){const t=a[e],n="not_"+e,i=this.filterJson[n];if(null!=i&&i.some(t))return!1;const r=this.filterJson[e];if(r&&!r.some(t))return!1}const c=this.filterJson.contains_url;if(void 0!==c&&c!==r)return!1;const l=this.filterJson[i.FILTER_RELATED_BY_REL_TYPES.name];if(void 0!==l&&!this.arrayMatchesFilter(l,o))return!1;const u=this.filterJson[i.FILTER_RELATED_BY_SENDERS.name];return!(void 0!==u&&!this.arrayMatchesFilter(u,s))}arrayMatchesFilter(e,t){return t.length>0&&e.every((e=>t.includes(e)))}filter(e){return e.filter(this.check,this)}limit(){return void 0!==this.filterJson.limit?this.filterJson.limit:10}}},27906:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Filter=void 0;var r=i(n(59713)),o=n(1467),s=n(33564);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){const i=t.split(".");let r=e;for(let e=0;e<i.length-1;e++)r[i[e]]||(r[i[e]]={}),r=r[i[e]];r[i[i.length-1]]=n}class u{static fromJson(e,t,n){const i=new u(e,t);return i.setDefinition(n),i}constructor(e,t){this.userId=e,this.filterId=t,(0,r.default)(this,"definition",{}),(0,r.default)(this,"roomFilter",void 0),(0,r.default)(this,"roomTimelineFilter",void 0)}getFilterId(){return this.filterId}getDefinition(){return this.definition}setDefinition(e){this.definition=e;const t=e.room,n={};t&&(t.rooms&&(n.rooms=t.rooms),t.rooms&&(n.not_rooms=t.not_rooms)),this.roomFilter=new s.FilterComponent(n,this.userId),this.roomTimelineFilter=new s.FilterComponent((null==t?void 0:t.timeline)||{},this.userId)}getRoomTimelineFilterComponent(){return this.roomTimelineFilter}filterRoomTimeline(e){return this.roomFilter&&(e=this.roomFilter.filter(e)),this.roomTimelineFilter&&(e=this.roomTimelineFilter.filter(e)),e}setTimelineLimit(e){l(this.definition,"room.timeline.limit",e)}setUnreadThreadNotifications(e){var t,n,i;this.definition=c(c({},this.definition),{},{room:c(c({},null===(t=this.definition)||void 0===t?void 0:t.room),{},{timeline:c(c({},null===(n=this.definition)||void 0===n||null===(i=n.room)||void 0===i?void 0:i.timeline),{},{[o.UNREAD_THREAD_NOTIFICATIONS.name]:e})})})}setLazyLoadMembers(e){l(this.definition,"room.state.lazy_load_members",e)}setIncludeLeaveRooms(e){l(this.definition,"room.include_leave",e)}}t.Filter=u,(0,r.default)(u,"LAZY_LOADING_MESSAGES_FILTER",{lazy_load_members:!0})},95144:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MatrixError=t.HTTPError=t.ConnectionError=void 0;var r=i(n(59713));class o extends Error{constructor(e,t){super(e),this.httpStatus=t}}t.HTTPError=o,t.MatrixError=class extends o{constructor(e={},t,n,i){let o=e.error||"Unknown message";t&&(o=`[${t}] ${o}`),n&&(o=`${o} (${n})`),super(`MatrixError: ${o}`,t),this.httpStatus=t,this.url=n,this.event=i,(0,r.default)(this,"errcode",void 0),(0,r.default)(this,"data",void 0),this.errcode=e.errcode,this.name=e.errcode||"Unknown error code",this.data=e}};class s extends Error{constructor(e,t){super(e+(t?`: ${t.message}`:""))}get name(){return"ConnectionError"}}t.ConnectionError=s},60956:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.FetchHttpApi=void 0;var r=i(n(59713)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(3102)),s=n(23750),a=n(95144),c=n(10400),l=n(44590);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}t.FetchHttpApi=class{constructor(e,t){var n;this.eventEmitter=e,this.opts=t,(0,r.default)(this,"abortController",new AbortController),o.checkObjectHasKeys(t,["baseUrl","prefix"]),t.onlyData=!!t.onlyData,t.useAuthorizationHeader=null===(n=t.useAuthorizationHeader)||void 0===n||n}abort(){this.abortController.abort(),this.abortController=new AbortController}fetch(e,t){return this.opts.fetchFn?this.opts.fetchFn(e,t):n.g.fetch(e,t)}setIdBaseUrl(e){this.opts.idBaseUrl=e}idServerRequest(e,t,n,i,r){if(!this.opts.idBaseUrl)throw new Error("No identity server base URL set");let o,a;e===s.Method.Get?o=n:a=n;const c=this.getUrl(t,o,i,this.opts.idBaseUrl),l={json:!0,headers:{}};return r&&(l.headers.Authorization=`Bearer ${r}`),this.requestOtherUrl(e,c,a,l)}authedRequest(e,t,n,i,r={}){n||(n={}),this.opts.accessToken&&(this.opts.useAuthorizationHeader?(r.headers||(r.headers={}),r.headers.Authorization||(r.headers.Authorization="Bearer "+this.opts.accessToken),n.access_token&&delete n.access_token):n.access_token||(n.access_token=this.opts.accessToken));const o=this.request(e,t,n,i,r);return o.catch((e=>{"M_UNKNOWN_TOKEN"!=e.errcode||null!=r&&r.inhibitLogoutEmit?"M_CONSENT_NOT_GIVEN"==e.errcode&&this.eventEmitter.emit(c.HttpApiEvent.NoConsent,e.message,e.data.consent_uri):this.eventEmitter.emit(c.HttpApiEvent.SessionLoggedOut,e)})),o}request(e,t,n,i,r){const o=this.getUrl(t,n,null==r?void 0:r.prefix,null==r?void 0:r.baseUrl);return this.requestOtherUrl(e,o,i,r)}async requestOtherUrl(e,t,n,i={}){var r,o,s,c;const u=Object.assign({},i.headers||{}),d=null===(r=i.json)||void 0===r||r,h=d&&(null==n||null===(o=n.constructor)||void 0===o?void 0:o.name)===Object.name;d&&(h&&!u["Content-Type"]&&(u["Content-Type"]="application/json"),u.Accept||(u.Accept="application/json"));const p=null!==(s=i.localTimeoutMs)&&void 0!==s?s:this.opts.localTimeoutMs,f=null!==(c=i.keepAlive)&&void 0!==c&&c,m=[this.abortController.signal];let g;void 0!==p&&m.push((0,l.timeoutSignal)(p)),i.abortSignal&&m.push(i.abortSignal),g=h?JSON.stringify(n):n;const{signal:v,cleanup:y}=(0,l.anySignal)(m);let b;try{b=await this.fetch(t,{signal:v,method:e,body:g,headers:u,mode:"cors",redirect:"follow",referrer:"",referrerPolicy:"no-referrer",cache:"no-cache",credentials:"omit",keepalive:f})}catch(e){if("AbortError"===e.name)throw e;throw new a.ConnectionError("fetch failed",e)}finally{y()}if(!b.ok)throw(0,l.parseErrorResponse)(b,await b.text());return this.opts.onlyData?d?b.json():b.text():b}getUrl(e,t,n,i){const r=new URL((null!=i?i:this.opts.baseUrl)+(null!=n?n:this.opts.prefix)+e);return t&&o.encodeParams(t,r.searchParams),r}}},30095:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0});var r={MatrixHttpApi:!0};t.MatrixHttpApi=void 0;var o=i(n(59713)),s=n(60956),a=n(95561);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var c=m(n(3102)),l=m(n(82731)),u=n(23750);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var d=n(95144);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var h=n(44590);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var p=n(10400);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));class g extends s.FetchHttpApi{constructor(...e){super(...e),(0,o.default)(this,"uploads",[])}uploadContent(e,t={}){var i,r,o,s,p;const f=null===(i=t.includeFilename)||void 0===i||i,m=null!==(r=t.abortController)&&void 0!==r?r:new AbortController,g=null!==(o=null!==(s=t.type)&&void 0!==s?s:e.type)&&void 0!==o?o:"application/octet-stream",v=null!==(p=t.name)&&void 0!==p?p:e.name,y={loaded:0,total:0,abortController:m},b=c.defer();if(n.g.XMLHttpRequest){const i=new n.g.XMLHttpRequest,r=function(){i.abort(),b.reject(new Error("Timeout"))};let o=l.setTimeout(r,3e4);i.onreadystatechange=function(){if(i.readyState===n.g.XMLHttpRequest.DONE){l.clearTimeout(o);try{if(0===i.status)throw new DOMException(i.statusText,"AbortError");if(!i.responseText)throw new Error("No response body.");i.status>=400?b.reject((0,h.parseErrorResponse)(i,i.responseText)):b.resolve(JSON.parse(i.responseText))}catch(e){if("AbortError"===e.name)return void b.reject(e);b.reject(new d.ConnectionError("request failed",e))}}},i.upload.onprogress=e=>{var n;l.clearTimeout(o),y.loaded=e.loaded,y.total=e.total,o=l.setTimeout(r,3e4),null===(n=t.progressHandler)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})};const s=this.getUrl("/upload",void 0,a.MediaPrefix.R0);f&&v&&s.searchParams.set("filename",encodeURIComponent(v)),!this.opts.useAuthorizationHeader&&this.opts.accessToken&&s.searchParams.set("access_token",encodeURIComponent(this.opts.accessToken)),i.open(u.Method.Post,s.href),this.opts.useAuthorizationHeader&&this.opts.accessToken&&i.setRequestHeader("Authorization","Bearer "+this.opts.accessToken),i.setRequestHeader("Content-Type",g),i.send(e),m.signal.addEventListener("abort",(()=>{i.abort()}))}else{const t={};f&&v&&(t.filename=v);const n={"Content-Type":g};this.authedRequest(u.Method.Post,"/upload",t,e,{prefix:a.MediaPrefix.R0,headers:n,abortSignal:m.signal}).then((e=>this.opts.onlyData?e:e.json())).then(b.resolve,b.reject)}return y.promise=b.promise.finally((()=>{c.removeElement(this.uploads,(e=>e===y))})),m.signal.addEventListener("abort",(()=>{c.removeElement(this.uploads,(e=>e===y)),b.reject(new DOMException("Aborted","AbortError"))})),this.uploads.push(y),y.promise}cancelUpload(e){const t=this.uploads.find((t=>t.promise===e));return!!t&&(t.abortController.abort(),!0)}getCurrentUploads(){return this.uploads}getContentUri(){return{base:this.opts.baseUrl,path:a.MediaPrefix.R0+"/upload",params:{access_token:this.opts.accessToken}}}}t.MatrixHttpApi=g},10400:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.HttpApiEvent=void 0,t.HttpApiEvent=n,function(e){e.SessionLoggedOut="Session.logged_out",e.NoConsent="no_consent"}(n||(t.HttpApiEvent=n={}))},23750:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.Method=void 0,t.Method=n,function(e){e.Get="GET",e.Put="PUT",e.Post="POST",e.Delete="DELETE"}(n||(t.Method=n={}))},95561:(e,t)=>{"use strict";let n,i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.MediaPrefix=t.IdentityPrefix=t.ClientPrefix=void 0,t.ClientPrefix=n,function(e){e.R0="/_matrix/client/r0",e.V1="/_matrix/client/v1",e.V3="/_matrix/client/v3",e.Unstable="/_matrix/client/unstable"}(n||(t.ClientPrefix=n={})),t.IdentityPrefix=i,function(e){e.V1="/_matrix/identity/api/v1",e.V2="/_matrix/identity/v2"}(i||(t.IdentityPrefix=i={})),t.MediaPrefix=r,function(e){e.R0="/_matrix/media/r0"}(r||(t.MediaPrefix=r={}))},44590:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.anySignal=function(e){const t=new AbortController;function n(){for(const t of e)t.removeEventListener("abort",i)}function i(){t.abort(),n()}for(const t of e){if(t.aborted){i();break}t.addEventListener("abort",i)}return{signal:t.signal,cleanup:n}},t.parseErrorResponse=function(e,t){var n,r;let o;try{o=function(e){let t;if(t=a(e)?e.getResponseHeader("Content-Type"):e.headers.get("Content-Type"),!t)return null;try{return(0,i.parse)(t)}catch(e){throw new Error(`Error parsing Content-Type '${t}': ${e}`)}}(e)}catch(e){return e}return"application/json"===(null===(n=o)||void 0===n?void 0:n.type)&&t?new s.MatrixError(JSON.parse(t),e.status,a(e)?e.responseURL:e.url):"text/plain"===(null===(r=o)||void 0===r?void 0:r.type)?new s.HTTPError(`Server returned ${e.status} error: ${t}`,e.status):new s.HTTPError(`Server returned ${e.status} error`,e.status)},t.retryNetworkOperation=async function(e,t){let n=0,i=null;for(;n<e;)try{if(n>0){const e=1e3*Math.pow(2,n);r.logger.log(`network operation failed ${n} times, retrying in ${e}ms...`),await(0,o.sleep)(e)}return await t()}catch(e){if(!(e instanceof s.ConnectionError))throw e;n+=1,i=e}throw i},t.timeoutSignal=function(e){const t=new AbortController;return setTimeout((()=>{t.abort()}),e),t.signal};var i=n(37811),r=n(7434),o=n(3102),s=n(95144);function a(e){return"getResponseHeader"in e}},36798:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}(n(48070));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}if(Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))})),n.g.__js_sdk_entrypoint)throw new Error("Multiple matrix-js-sdk entrypoints detected!");n.g.__js_sdk_entrypoint=!0;var s=r;t.default=s},33415:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exists=function(e,t){return new Promise(((n,i)=>{let r=!0;const o=e.open(t);o.onupgradeneeded=()=>{r=!1},o.onblocked=()=>i(o.error),o.onsuccess=()=>{o.result.close(),r||e.deleteDatabase(t),n(r)},o.onerror=()=>i(o.error)}))}},28670:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveAuth=t.AuthType=void 0;var r=i(n(59713)),o=n(7434),s=n(3102);const a="m.login.email.identity",c="m.login.msisdn";let l;t.AuthType=l,function(e){e.Password="m.login.password",e.Recaptcha="m.login.recaptcha",e.Terms="m.login.terms",e.Email="m.login.email.identity",e.Msisdn="m.login.msisdn",e.Sso="m.login.sso",e.SsoUnstable="org.matrix.login.sso",e.Dummy="m.login.dummy",e.RegistrationToken="m.login.registration_token",e.UnstableRegistrationToken="org.matrix.msc3231.login.registration_token"}(l||(t.AuthType=l={}));class u extends Error{constructor(e,t,n){super(e),this.required_stages=t,this.flows=n,(0,r.default)(this,"name","NoAuthFlowFoundError")}}t.InteractiveAuth=class{constructor(e){(0,r.default)(this,"matrixClient",void 0),(0,r.default)(this,"inputs",void 0),(0,r.default)(this,"clientSecret",void 0),(0,r.default)(this,"requestCallback",void 0),(0,r.default)(this,"busyChangedCallback",void 0),(0,r.default)(this,"stateUpdatedCallback",void 0),(0,r.default)(this,"requestEmailTokenCallback",void 0),(0,r.default)(this,"data",void 0),(0,r.default)(this,"emailSid",void 0),(0,r.default)(this,"requestingEmailToken",!1),(0,r.default)(this,"attemptAuthDeferred",null),(0,r.default)(this,"chosenFlow",null),(0,r.default)(this,"currentStage",null),(0,r.default)(this,"emailAttempt",1),(0,r.default)(this,"submitPromise",null),(0,r.default)(this,"requestEmailToken",(async()=>{if(this.requestingEmailToken)o.logger.warn("Could not request email token: Already requesting");else{o.logger.trace("Requesting email token. Attempt: "+this.emailAttempt),this.requestingEmailToken=!0;try{const e=await this.requestEmailTokenCallback(this.inputs.emailAddress,this.clientSecret,this.emailAttempt++,this.data.session);this.emailSid=e.sid,o.logger.trace("Email token request succeeded")}finally{this.requestingEmailToken=!1}}})),this.matrixClient=e.matrixClient,this.data=e.authData||{},this.requestCallback=e.doRequest,this.busyChangedCallback=e.busyChanged,this.stateUpdatedCallback=e.stateUpdated||e.startAuthStage,this.requestEmailTokenCallback=e.requestEmailToken,this.inputs=e.inputs||{},e.sessionId&&(this.data.session=e.sessionId),this.clientSecret=e.clientSecret||this.matrixClient.generateClientSecret(),this.emailSid=e.emailSid}attemptAuth(){var e;this.attemptAuthDeferred=(0,s.defer)();const t=this.attemptAuthDeferred.promise;if(null!==(e=this.data)&&void 0!==e&&e.flows)this.startNextAuthStage();else{var n;null===(n=this.busyChangedCallback)||void 0===n||n.call(this,!0);const e=this.data.session?{session:this.data.session}:null;this.doRequest(e).finally((()=>{var e;null===(e=this.busyChangedCallback)||void 0===e||e.call(this,!1)}))}return t}async poll(){if(!this.data.session)return;if(!this.attemptAuthDeferred)return;if(this.submitPromise)return;let e={};if(this.currentStage==a&&this.emailSid){const t={sid:this.emailSid,client_secret:this.clientSecret};if(await this.matrixClient.doesServerRequireIdServerParam()){const e=new URL(this.matrixClient.getIdentityServerUrl());t.id_server=e.host}e={type:a,threepid_creds:t,threepidCreds:t}}this.submitAuthDict(e,!0)}getSessionId(){var e;return null===(e=this.data)||void 0===e?void 0:e.session}getClientSecret(){return this.clientSecret}getStageParams(e){var t;return null===(t=this.data.params)||void 0===t?void 0:t[e]}getChosenFlow(){return this.chosenFlow}async submitAuthDict(e,t=!1){if(!this.attemptAuthDeferred)throw new Error("submitAuthDict() called before attemptAuth()");var n;for(t||null===(n=this.busyChangedCallback)||void 0===n||n.call(this,!0);this.submitPromise;)try{await this.submitPromise}catch(e){}let i;this.data.session?(i={session:this.data.session},Object.assign(i,e)):i=e;try{this.submitPromise=this.doRequest(i,t),await this.submitPromise}finally{var r;this.submitPromise=null,t||null===(r=this.busyChangedCallback)||void 0===r||r.call(this,!1)}}getEmailSid(){return this.emailSid}setEmailSid(e){this.emailSid=e}async doRequest(e,t=!1){try{const n=await this.requestCallback(e,t);this.attemptAuthDeferred.resolve(n),this.attemptAuthDeferred=null}catch(e){var n,i,r;const a=null!==(n=null===(i=e.data)||void 0===i?void 0:i.flows)&&void 0!==n?n:null,c=this.data.flows||Boolean(a);var s;401===e.httpStatus&&e.data&&c||(t?o.logger.log("Background poll request failed doing UI auth: ignoring",e):null===(s=this.attemptAuthDeferred)||void 0===s||s.reject(e)),e.data||(e.data={}),e.data.flows||e.data.completed||e.data.session||(e.data.flows=this.data.flows,e.data.completed=this.data.completed,e.data.session=this.data.session),this.data=e.data;try{this.startNextAuthStage()}catch(e){return this.attemptAuthDeferred.reject(e),void(this.attemptAuthDeferred=null)}if(!this.emailSid&&null!==(r=this.chosenFlow)&&void 0!==r&&r.stages.includes(l.Email))try{await this.requestEmailToken()}catch(e){this.attemptAuthDeferred.reject(e),this.attemptAuthDeferred=null}}}startNextAuthStage(){var e,t;const n=this.chooseStage();if(!n)throw new Error("No incomplete flows from the server");var i,r;this.currentStage=n,n!==l.Dummy?null!==(e=this.data)&&void 0!==e&&e.errcode||null!==(t=this.data)&&void 0!==t&&t.error?this.stateUpdatedCallback(n,{errcode:(null===(i=this.data)||void 0===i?void 0:i.errcode)||"",error:(null===(r=this.data)||void 0===r?void 0:r.error)||""}):this.stateUpdatedCallback(n,n===a?{emailSid:this.emailSid}:{}):this.submitAuthDict({type:"m.login.dummy"})}chooseStage(){null===this.chosenFlow&&(this.chosenFlow=this.chooseFlow()),o.logger.log("Active flow => %s",JSON.stringify(this.chosenFlow));const e=this.firstUncompletedStage(this.chosenFlow);return o.logger.log("Next stage: %s",e),e}chooseFlow(){const e=this.data.flows||[],t=Boolean(this.inputs.emailAddress)||Boolean(this.emailSid),n=Boolean(this.inputs.phoneCountry)&&Boolean(this.inputs.phoneNumber);for(const i of e){let e=!1,r=!1;for(const t of i.stages)t===a?e=!0:t==c&&(r=!0);if(e==t&&r==n)return i}const i=[];throw t&&i.push(a),n&&i.push(c),new u("No appropriate authentication flow found",i,e)}firstUncompletedStage(e){const t=this.data.completed||[];return e.stages.find((e=>!t.includes(e)))}}},7434:(e,t,n)=>{"use strict";var i=n(25108),r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var o=r(n(2043));o.default.methodFactory=function(e,t,n){return function(...t){return this.prefix&&t.unshift(this.prefix),"error"===e||"warn"===e||"trace"===e||"info"===e?i[e](...t):i.log(...t)}};const s=o.default.getLogger("matrix");t.logger=s,s.setLevel(o.default.levels.DEBUG,!1),function e(t){t.withPrefix=function(t){return function(t){const n=o.default.getLogger(`matrix-${t}`);return n.prefix!==t&&(e(n),n.prefix=t,n.setLevel(o.default.levels.DEBUG,!1)),n}((this.prefix||"")+t)}}(s)},48070:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={setCryptoStoreFactory:!0,createClient:!0,createRoomWidgetClient:!0,ContentHelpers:!0,createNewMatrixCall:!0,GroupCallEvent:!0,GroupCallIntent:!0,GroupCallState:!0,GroupCallType:!0};t.ContentHelpers=void 0,Object.defineProperty(t,"GroupCallEvent",{enumerable:!0,get:function(){return P.GroupCallEvent}}),Object.defineProperty(t,"GroupCallIntent",{enumerable:!0,get:function(){return P.GroupCallIntent}}),Object.defineProperty(t,"GroupCallState",{enumerable:!0,get:function(){return P.GroupCallState}}),Object.defineProperty(t,"GroupCallType",{enumerable:!0,get:function(){return P.GroupCallType}}),t.createClient=function(e){return new a.MatrixClient(B(e))},Object.defineProperty(t,"createNewMatrixCall",{enumerable:!0,get:function(){return N.createNewMatrixCall}}),t.createRoomWidgetClient=function(e,t,n,i){return new c.RoomWidgetClient(e,t,n,B(i))},t.setCryptoStoreFactory=function(e){U=e};var r=n(11045);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var o=n(11703);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var s=n(39443);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var a=n(62168);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var c=n(9810);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var l=n(30095);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var u=n(79118);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var d=n(22741);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var h=n(19489);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var p=n(26320);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var f=n(24369);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var m=n(27366);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var g=n(88910);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var v=n(33705);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var y=n(32848);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var b=n(26860);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var E=n(83998);Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))}));var S=n(27906);Object.keys(S).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===S[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return S[e]}}))}));var w=n(34969);Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===w[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}}))}));var _=n(28670);Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))}));var T=n(91415);Object.keys(T).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===T[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return T[e]}}))}));var x=n(99789);Object.keys(x).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===x[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return x[e]}}))}));var C=n(57585);Object.keys(C).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===C[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}}))}));var I=n(73667);Object.keys(I).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===I[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return I[e]}}))}));var k=n(42481);Object.keys(k).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===k[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return k[e]}}))}));var M=n(1470);Object.keys(M).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===M[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return M[e]}}))}));var A=n(44702);Object.keys(A).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===A[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return A[e]}}))}));var O=n(76513);Object.keys(O).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===O[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}}))}));var R=n(49162);Object.keys(R).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===R[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return R[e]}}))}));var L=n(65205);Object.keys(L).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===L[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return L[e]}}))}));var D=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=$(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(44656));t.ContentHelpers=D;var N=n(59679),P=n(8969);function $(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return($=function(e){return e?n:t})(e)}let U=()=>new r.MemoryCryptoStore;function B(e){var t,i,r;return e.store=null!==(t=e.store)&&void 0!==t?t:new o.MemoryStore({localStorage:n.g.localStorage}),e.scheduler=null!==(i=e.scheduler)&&void 0!==i?i:new s.MatrixScheduler,e.cryptoStore=null!==(r=e.cryptoStore)&&void 0!==r?r:U(),e}},98807:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MSC3089Branch=void 0;var r=i(n(59713)),o=n(42481),s=n(88910);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.MSC3089Branch=class{constructor(e,t,n){this.client=e,this.indexEvent=t,this.directory=n}get id(){const e=this.indexEvent.getStateKey();if(!e)throw new Error("State key not found for branch");return e}get isActive(){return!0===this.indexEvent.getContent().active}get version(){var e;return null!==(e=this.indexEvent.getContent().version)&&void 0!==e?e:1}get roomId(){return this.indexEvent.getRoomId()}async delete(){await this.client.sendStateEvent(this.roomId,o.UNSTABLE_MSC3089_BRANCH.name,{},this.id),await this.client.redactEvent(this.roomId,this.id);const e=(await this.getVersionHistory())[1];e&&await e.delete()}getName(){return this.indexEvent.getContent().name||"Unnamed File"}async setName(e){await this.client.sendStateEvent(this.roomId,o.UNSTABLE_MSC3089_BRANCH.name,c(c({},this.indexEvent.getContent()),{},{name:e}),this.id)}isLocked(){return this.indexEvent.getContent().locked||!1}async setLocked(e){await this.client.sendStateEvent(this.roomId,o.UNSTABLE_MSC3089_BRANCH.name,c(c({},this.indexEvent.getContent()),{},{locked:e}),this.id)}async getFileInfo(){const e=(await this.getFileEvent()).getOriginalContent().file,t=this.client.mxcUrlToHttp(e.url);if(!t)throw new Error(`No HTTP URL available for ${e.url}`);return{info:e,httpUrl:t}}async getFileEvent(){const e=this.client.getRoom(this.roomId);if(!e)throw new Error("Unknown room");let t=e.getUnfilteredTimelineSet().findEventById(this.id);for(;!t&&e.getLiveTimeline().getState(s.EventTimeline.BACKWARDS).paginationToken;)await this.client.scrollback(e,100),t=e.getUnfilteredTimelineSet().findEventById(this.id);if(!t)throw new Error("Failed to find event");return await this.client.decryptEventIfNeeded(t,{emit:!0,isRetry:!0}),t}async createNewVersion(e,t,n,i){const r=await this.directory.createFile(e,t,n,c(c({},null!=i?i:{}),{},{"m.new_content":!0,"m.relates_to":{rel_type:o.RelationType.Replace,event_id:this.id}}));return await this.client.sendStateEvent(this.roomId,o.UNSTABLE_MSC3089_BRANCH.name,{active:!0,name:e,version:this.version+1},r.event_id),await this.client.sendStateEvent(this.roomId,o.UNSTABLE_MSC3089_BRANCH.name,c(c({},this.indexEvent.getContent()),{},{active:!1}),this.id),r}async getVersionHistory(){const e=[];e.push(this);const t=this.client.getRoom(this.roomId);if(!t)throw new Error("Invalid or unknown room");const n=[...t.getLiveTimeline().getEvents()].reverse();let i,r=await this.getFileEvent();do{if(i=n.find((e=>e.replacingEventId()===r.getId())),i){const t=this.directory.getFile(i.getId());if(!t)break;e.push(t),r=i}}while(i);return e}}},46170:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TreePermissions=t.MSC3089TreeSpace=t.DEFAULT_TREE_POWER_LEVELS_TEMPLATE=void 0;var r=i(n(59713)),o=i(n(42693)),s=n(42481),a=n(7434),c=n(3102),l=n(98807),u=n(17125);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const p={invite:100,kick:100,ban:100,redact:50,state_default:50,events_default:50,users_default:0,events:{[s.EventType.RoomPowerLevels]:100,[s.EventType.RoomHistoryVisibility]:100,[s.EventType.RoomTombstone]:100,[s.EventType.RoomEncryption]:100,[s.EventType.RoomName]:50,[s.EventType.RoomMessage]:50,[s.EventType.RoomMessageEncrypted]:50,[s.EventType.Sticker]:50},users:{}};let f;t.DEFAULT_TREE_POWER_LEVELS_TEMPLATE=p,t.TreePermissions=f,function(e){e.Viewer="viewer",e.Editor="editor",e.Owner="owner"}(f||(t.TreePermissions=f={})),t.MSC3089TreeSpace=class{constructor(e,t){if(this.client=e,this.roomId=t,(0,r.default)(this,"room",void 0),this.room=this.client.getRoom(this.roomId),!this.room)throw new Error("Unknown room")}get id(){return this.roomId}get isTopLevel(){const e=this.room.currentState.getStateEvents(s.EventType.SpaceParent);return null==e||!e.length||e.every((e=>{var t;return!(null!==(t=e.getContent())&&void 0!==t&&t.via)}))}async setName(e){await this.client.sendStateEvent(this.roomId,s.EventType.RoomName,{name:e},"")}async invite(e,t=!0,n=!0){const i=[this.retryInvite(e)];return t&&i.push(...this.getDirectories().map((i=>i.invite(e,t,n)))),Promise.all(i).then((()=>{n&&(0,u.isRoomSharedHistory)(this.room)&&this.client.sendSharedHistoryKeys(this.roomId,[e])}))}retryInvite(e){return(0,c.simpleRetryOperation)((async()=>{await this.client.invite(this.roomId,e).catch((e=>{if("M_FORBIDDEN"===(null==e?void 0:e.errcode))throw new o.default.AbortError(e);throw e}))}))}async setPermissions(e,t){var n;const i=this.room.currentState.getStateEvents(s.EventType.RoomPowerLevels,"");if(Array.isArray(i))throw new Error("Unexpected return type for power levels");const r=(null==i?void 0:i.getContent())||{},o=r.users_default||0,a=r.events_default||50,c=(null===(n=r.events)||void 0===n?void 0:n[s.EventType.RoomPowerLevels])||100,l=r.users||{};switch(t){case f.Viewer:l[e]=o;break;case f.Editor:l[e]=a;break;case f.Owner:l[e]=c;break;default:throw new Error("Invalid role: "+t)}r.users=l,await this.client.sendStateEvent(this.roomId,s.EventType.RoomPowerLevels,r,"")}getPermissions(e){var t,n;const i=this.room.currentState.getStateEvents(s.EventType.RoomPowerLevels,"");if(Array.isArray(i))throw new Error("Unexpected return type for power levels");const r=(null==i?void 0:i.getContent())||{},o=r.users_default||0,a=r.events_default||50,c=(null===(t=r.events)||void 0===t?void 0:t[s.EventType.RoomPowerLevels])||100,l=(null===(n=r.users)||void 0===n?void 0:n[e])||o;return l>=c?f.Owner:l>=a?f.Editor:f.Viewer}async createDirectory(e){const t=await this.client.unstableCreateFileTree(e);return await this.client.sendStateEvent(this.roomId,s.EventType.SpaceChild,{via:[this.client.getDomain()]},t.roomId),await this.client.sendStateEvent(t.roomId,s.EventType.SpaceParent,{via:[this.client.getDomain()]},this.roomId),t}getDirectories(){const e=[],t=this.room.currentState.getStateEvents(s.EventType.SpaceChild);for(const n of t)try{const t=n.getStateKey();if(t){const n=this.client.unstableGetFileTreeSpace(t);n&&e.push(n)}}catch(e){a.logger.warn("Unable to create tree space instance for listing. Are we joined?",e)}return e}getDirectory(e){return this.getDirectories().find((t=>t.roomId===e))}async delete(){const e=this.getDirectories();for(const t of e)await t.delete();const t=["invite","knock","join"],n=this.room.currentState.getStateEvents(s.EventType.RoomMember);for(const e of n)if(e.getStateKey()!==this.client.getUserId()&&t.includes(e.getContent().membership)){const t=e.getStateKey();if(!t)throw new Error("State key not found for branch");await this.client.kick(this.roomId,t,"Room deleted")}await this.client.leave(this.roomId)}getOrderedChildren(e){const t=e.map((e=>({roomId:e.getStateKey(),order:e.getContent().order}))).filter((e=>e.roomId));return t.sort(((e,t)=>{if(e.order&&!t.order)return-1;if(!e.order&&t.order)return 1;if(e.order||t.order)return(0,c.lexicographicCompare)(e.order,t.order);{var n,i,r,o;const a=this.client.getRoom(e.roomId),l=this.client.getRoom(t.roomId);if(!a||!l)return(0,c.lexicographicCompare)(e.roomId,t.roomId);const u=null!==(n=null===(i=a.currentState.getStateEvents(s.EventType.RoomCreate,""))||void 0===i?void 0:i.getTs())&&void 0!==n?n:0,d=null!==(r=null===(o=l.currentState.getStateEvents(s.EventType.RoomCreate,""))||void 0===o?void 0:o.getTs())&&void 0!==r?r:0;return u===d?(0,c.lexicographicCompare)(e.roomId,t.roomId):u-d}})),t}getParentRoom(){const e=this.room.currentState.getStateEvents(s.EventType.SpaceParent)[0];if(!e)throw new Error("Expected to have a parent in a non-top level space");const t=e.getStateKey();if(!t)throw new Error("No state key found for parent");const n=this.client.getRoom(t);if(!n)throw new Error("Unable to locate room for parent");return n}getOrder(){if(this.isTopLevel)return-1;const e=this.getParentRoom().currentState.getStateEvents(s.EventType.SpaceChild);return this.getOrderedChildren(e).findIndex((e=>e.roomId===this.roomId))}async setOrder(e){var t;if(this.isTopLevel)throw new Error("Cannot set order of top level spaces currently");const n=this.getParentRoom(),i=n.currentState.getStateEvents(s.EventType.SpaceChild),r=this.getOrderedChildren(i);e=Math.max(Math.min(e,r.length-1),0);const o=this.getOrder()<e;o&&e===r.length-1?e--:o||0!==e||e++;const a=r[o?e:e-1],l=r[o?e+1:e];let u=c.DEFAULT_ALPHABET[0],d=!1;if(a)if(e===r.length-1)null!=l&&l.order&&(u=(0,c.nextString)(l.order));else{const e=null==a?void 0:a.order,t=null==l?void 0:l.order;e&&t?u=e===t?(0,c.nextString)(e):(0,c.averageBetweenStrings)(e,t):e?u=(0,c.nextString)(e):t?u=(0,c.prevString)(t):d=!0}else null!=l&&l.order&&(u=(0,c.prevString)(l.order));if(d){let t;for(let i=0;i<=e;i++){const e=r[i];if(0===i&&(t=e.order),e.order)t=e.order;else{var p;t=t?(0,c.nextString)(t):c.DEFAULT_ALPHABET[0];const i=n.currentState.getStateEvents(s.EventType.SpaceChild,e.roomId),r=null!==(p=null==i?void 0:i.getContent())&&void 0!==p?p:{via:[this.client.getDomain()]};await this.client.sendStateEvent(n.roomId,s.EventType.SpaceChild,h(h({},r),{},{order:t}),e.roomId)}}t&&(u=(0,c.nextString)(t))}const f=n.currentState.getStateEvents(s.EventType.SpaceChild,this.roomId),m=null!==(t=null==f?void 0:f.getContent())&&void 0!==t?t:{via:[this.client.getDomain()]};await this.client.sendStateEvent(n.roomId,s.EventType.SpaceChild,h(h({},m),{},{order:u}),this.roomId)}async createFile(e,t,n,i){var r;const{content_uri:o}=await this.client.uploadContent(t,{includeFilename:!1});n.url=o;const a={msgtype:s.MsgType.File,body:e,url:o,file:n};(i=null!==(r=i)&&void 0!==r?r:{})["m.new_content"]&&(i["m.new_content"]=a);const c=await this.client.sendMessage(this.roomId,h(h(h({},i),a),{},{[s.UNSTABLE_MSC3089_LEAF.name]:{}}));return await this.client.sendStateEvent(this.roomId,s.UNSTABLE_MSC3089_BRANCH.name,{active:!0,name:e},c.event_id),c}getFile(e){const t=this.room.currentState.getStateEvents(s.UNSTABLE_MSC3089_BRANCH.name,e);return t?new l.MSC3089Branch(this.client,t,this):null}listFiles(){return this.listAllFiles().filter((e=>e.isActive))}listAllFiles(){var e;return(null!==(e=this.room.currentState.getStateEvents(s.UNSTABLE_MSC3089_BRANCH.name))&&void 0!==e?e:[]).map((e=>new l.MSC3089Branch(this.client,e,this)))}}},26320:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.isTimestampInDuration=t.getBeaconInfoIdentifier=t.BeaconEvent=t.Beacon=void 0;var r=i(n(59713)),o=n(44656),s=n(3102),a=n(55861);let c;t.BeaconEvent=c,function(e){e.New="Beacon.new",e.Update="Beacon.update",e.LivenessChange="Beacon.LivenessChange",e.Destroy="Beacon.Destroy",e.LocationUpdate="Beacon.LocationUpdate"}(c||(t.BeaconEvent=c={}));const l=(e,t,n)=>n>=e&&e+t>=n;t.isTimestampInDuration=l;const u=e=>`${e.getRoomId()}_${e.getStateKey()}`;t.getBeaconInfoIdentifier=u;class d extends a.TypedEventEmitter{constructor(e){super(),this.rootEvent=e,(0,r.default)(this,"roomId",void 0),(0,r.default)(this,"_beaconInfo",void 0),(0,r.default)(this,"_isLive",void 0),(0,r.default)(this,"livenessWatchTimeout",void 0),(0,r.default)(this,"_latestLocationEvent",void 0),(0,r.default)(this,"clearLatestLocation",(()=>{this._latestLocationEvent=void 0,this.emit(c.LocationUpdate,this.latestLocationState)})),this.setBeaconInfo(this.rootEvent),this.roomId=this.rootEvent.getRoomId()}get isLive(){return!!this._isLive}get identifier(){return u(this.rootEvent)}get beaconInfoId(){return this.rootEvent.getId()}get beaconInfoOwner(){return this.rootEvent.getStateKey()}get beaconInfoEventType(){return this.rootEvent.getType()}get beaconInfo(){return this._beaconInfo}get latestLocationState(){return this._latestLocationEvent&&(0,o.parseBeaconContent)(this._latestLocationEvent.getContent())}get latestLocationEvent(){return this._latestLocationEvent}update(e){if(u(e)!==this.identifier)throw new Error("Invalid updating event");e.getTs()<this.rootEvent.getTs()||(this.rootEvent=e,this.setBeaconInfo(this.rootEvent),this.emit(c.Update,e,this),this.clearLatestLocation())}destroy(){this.livenessWatchTimeout&&clearTimeout(this.livenessWatchTimeout),this._isLive=!1,this.emit(c.Destroy,this.identifier)}monitorLiveness(){if(this.livenessWatchTimeout&&clearTimeout(this.livenessWatchTimeout),this.checkLiveness(),this.beaconInfo)if(this.isLive){const e=this.beaconInfo.timestamp+this.beaconInfo.timeout-Date.now();e>1&&(this.livenessWatchTimeout=setTimeout((()=>{this.monitorLiveness()}),e))}else this.beaconInfo.timestamp>Date.now()&&(this.livenessWatchTimeout=setTimeout((()=>{this.monitorLiveness()}),this.beaconInfo.timestamp-Date.now()))}addLocations(e){var t;if(!this.isLive)return;const n=null===(t=e.filter((e=>{const t=e.getContent(),n=(0,o.parseBeaconContent)(t);if(!n.uri||!n.timestamp)return!1;const{timestamp:i}=n;return this._beaconInfo.timestamp&&l(this._beaconInfo.timestamp,this._beaconInfo.timeout,i)&&(!this.latestLocationState||i>this.latestLocationState.timestamp)})).sort(s.sortEventsByLatestContentTimestamp))||void 0===t?void 0:t[0];n&&(this._latestLocationEvent=n,this.emit(c.LocationUpdate,this.latestLocationState))}setBeaconInfo(e){this._beaconInfo=(0,o.parseBeaconInfoContent)(e.getContent()),this.checkLiveness()}checkLiveness(){var e,t;const n=this.isLive;if(!this.beaconInfo)return;const i=this.beaconInfo.timestamp>Date.now()?this.beaconInfo.timestamp-36e4:this.beaconInfo.timestamp;this._isLive=!(null===(e=this._beaconInfo)||void 0===e||!e.live)&&!!i&&l(i,null===(t=this._beaconInfo)||void 0===t?void 0:t.timeout,Date.now()),n!==this.isLive&&this.emit(c.LivenessChange,this.isLive,this)}}t.Beacon=d},43558:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EventContext=void 0;var r=i(n(59713)),o=n(88910);t.EventContext=class{constructor(e){this.ourEvent=e,(0,r.default)(this,"timeline",void 0),(0,r.default)(this,"ourEventIndex",0),(0,r.default)(this,"paginateTokens",{[o.Direction.Backward]:null,[o.Direction.Forward]:null}),this.timeline=[e]}getEvent(){return this.timeline[this.ourEventIndex]}getTimeline(){return this.timeline}getOurEventIndex(){return this.ourEventIndex}getPaginateToken(e=!1){return this.paginateTokens[e?o.Direction.Backward:o.Direction.Forward]}setPaginateToken(e,t=!1){this.paginateTokens[t?o.Direction.Backward:o.Direction.Forward]=null!=e?e:null}addEvents(e,t=!1){t?(this.timeline=e.concat(this.timeline),this.ourEventIndex+=e.length):this.timeline=this.timeline.concat(e)}}},88881:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.EventStatus=void 0,t.EventStatus=n,function(e){e.NOT_SENT="not_sent",e.ENCRYPTING="encrypting",e.SENDING="sending",e.QUEUED="queued",e.SENT="sent",e.CANCELLED="cancelled"}(n||(t.EventStatus=n={}))},33705:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EventTimelineSet=t.DuplicateStrategy=void 0;var r=i(n(59713)),o=n(88910),s=n(7434),a=n(27366),c=n(55861),l=n(47286);let u,d;u=s.logger.log.bind(s.logger),t.DuplicateStrategy=d,function(e){e.Ignore="ignore",e.Replace="replace"}(d||(t.DuplicateStrategy=d={}));class h extends c.TypedEventEmitter{constructor(e,t={},n,i,s=null){var a,c,u;super(),this.room=e,this.thread=i,this.threadListType=s,(0,r.default)(this,"relations",void 0),(0,r.default)(this,"timelineSupport",void 0),(0,r.default)(this,"displayPendingEvents",void 0),(0,r.default)(this,"liveTimeline",void 0),(0,r.default)(this,"timelines",void 0),(0,r.default)(this,"_eventIdToTimeline",new Map),(0,r.default)(this,"filter",void 0),this.timelineSupport=Boolean(t.timelineSupport),this.liveTimeline=new o.EventTimeline(this),this.displayPendingEvents=!1!==t.pendingEvents,this.timelines=[this.liveTimeline],this._eventIdToTimeline=new Map,this.filter=t.filter,this.relations=null!==(a=null===(c=this.room)||void 0===c?void 0:c.relations)&&void 0!==a?a:new l.RelationsContainer(null!==(u=null==e?void 0:e.client)&&void 0!==u?u:n)}getTimelines(){return this.timelines}getFilter(){return this.filter}setFilter(e){this.filter=e}getPendingEvents(){return this.room&&this.displayPendingEvents?this.room.getPendingEvents():[]}getLiveTimeline(){return this.liveTimeline}setLiveTimeline(e){this.liveTimeline=e}eventIdToTimeline(e){return this._eventIdToTimeline.get(e)}replaceEventId(e,t){const n=this._eventIdToTimeline.get(e);n&&(this._eventIdToTimeline.delete(e),this._eventIdToTimeline.set(t,n))}resetLiveTimeline(e,t){const n=!this.timelineSupport||!t,i=this.liveTimeline,r=n?i.forkLive(o.EventTimeline.FORWARDS):i.fork(o.EventTimeline.FORWARDS);n?(this.timelines=[r],this._eventIdToTimeline=new Map):this.timelines.push(r),t&&i.setPaginationToken(t,o.EventTimeline.FORWARDS),r.setPaginationToken(null!=e?e:null,o.EventTimeline.BACKWARDS),this.liveTimeline=r,this.emit(a.RoomEvent.TimelineReset,this.room,this,n)}getTimelineForEvent(e){if(null==e)return null;const t=this._eventIdToTimeline.get(e);return void 0===t?null:t}findEventById(e){const t=this.getTimelineForEvent(e);if(t)return t.getEvents().find((function(t){return t.getId()==e}))}addTimeline(){if(!this.timelineSupport)throw new Error("timeline support is disabled. Set the 'timelineSupport' parameter to true when creating MatrixClient to enable it.");const e=new o.EventTimeline(this);return this.timelines.push(e),e}addEventsToTimeline(e,t,n,i){if(!n)throw new Error("'timeline' not specified for EventTimelineSet.addEventsToTimeline");if(!t&&n==this.liveTimeline)throw new Error("EventTimelineSet.addEventsToTimeline cannot be used for adding events to the live timeline - use Room.addLiveEvents instead");if(this.filter&&!(e=this.filter.filterRoomTimeline(e)).length)return;const r=t?o.EventTimeline.BACKWARDS:o.EventTimeline.FORWARDS,a=t?o.EventTimeline.FORWARDS:o.EventTimeline.BACKWARDS;let c=!1,l=!1;for(const i of e){const e=i.getId(),d=this._eventIdToTimeline.get(e);if(!d){this.addEventToTimeline(i,n,{toStartOfTimeline:t}),l=!0,c=!0;continue}if(l=!1,d==n){u("Event "+e+" already in timeline "+n);continue}const h=n.getNeighbouringTimeline(r);if(h){u(d==h?"Event "+e+" in neighbouring timeline - switching to "+d:"Event "+e+" already in a different timeline "+d),n=d;continue}s.logger.info("Already have timeline for "+e+" - joining timeline "+n+" to "+d);const p=d===this.liveTimeline,f=n===this.liveTimeline,m=r===o.EventTimeline.BACKWARDS&&p,g=r===o.EventTimeline.FORWARDS&&f;m||g?(m&&s.logger.warn("Refusing to set a preceding existingTimeLine on our timeline as the existingTimeLine is live ("+d+")"),g&&s.logger.warn("Refusing to set our preceding timeline on a existingTimeLine as our timeline is live ("+n+")")):(n.setNeighbouringTimeline(d,r),d.setNeighbouringTimeline(n,a),n=d,c=!0)}if(l||!c){if(r===o.EventTimeline.FORWARDS&&n===this.liveTimeline)return s.logger.warn({lastEventWasNew:l,didUpdate:c}),void s.logger.warn(`Refusing to set forwards pagination token of live timeline ${n} to ${i}`);n.setPaginationToken(null!=i?i:null,r)}}addLiveEvent(e,t,n=!1,i){let r,a=t||d.Ignore;if("object"==typeof t?({duplicateStrategy:a=d.Ignore,fromCache:n=!1,roomState:i,timelineWasEmpty:r}=t):void 0!==t&&s.logger.warn("Overload deprecated: `EventTimelineSet.addLiveEvent(event, duplicateStrategy?, fromCache?, roomState?)` is deprecated in favor of the overload with `EventTimelineSet.addLiveEvent(event, IAddLiveEventOptions)`"),this.filter&&!this.filter.filterRoomTimeline([e]).length)return;const c=this._eventIdToTimeline.get(e.getId());if(c)if(a===d.Replace){u("EventTimelineSet.addLiveEvent: replacing duplicate event "+e.getId());const t=c.getEvents();for(let n=0;n<t.length;n++)if(t[n].getId()===e.getId()){i||(i=c.getState(o.EventTimeline.FORWARDS)),o.EventTimeline.setEventMetadata(e,i,!1),t[n]=e;break}}else u("EventTimelineSet.addLiveEvent: ignoring duplicate event "+e.getId());else this.addEventToTimeline(e,this.liveTimeline,{toStartOfTimeline:!1,fromCache:n,roomState:i,timelineWasEmpty:r})}addEventToTimeline(e,t,n,i=!1,r){let o,c=!!n;var l;if("object"==typeof n?({toStartOfTimeline:c,fromCache:i=!1,roomState:r,timelineWasEmpty:o}=n):void 0!==n&&s.logger.warn("Overload deprecated: `EventTimelineSet.addEventToTimeline(event, timeline, toStartOfTimeline, fromCache?, roomState?)` is deprecated in favor of the overload with `EventTimelineSet.addEventToTimeline(event, timeline, IAddEventToTimelineOptions)`"),t.getTimelineSet()!==this)throw new Error(`EventTimelineSet.addEventToTimeline: Timeline=${t.toString()} does not belong " +\n                "in timelineSet(threadId=${null===(l=this.thread)||void 0===l?void 0:l.id})`);if(this.room&&!this.canContain(e)){var u;let n=`event=${e.getId()}`;return e.threadRootId&&(n+=`(belongs to thread=${e.threadRootId})`),void s.logger.warn(`EventTimelineSet.addEventToTimeline: Ignoring ${n} that does not belong in timeline=${t.toString()} timelineSet(threadId=${null===(u=this.thread)||void 0===u?void 0:u.id})`)}const d=e.getId();t.addEvent(e,{toStartOfTimeline:c,roomState:r,timelineWasEmpty:o}),this._eventIdToTimeline.set(d,t),this.relations.aggregateParentEvent(e),this.relations.aggregateChildEvent(e,this);const h={timeline:t,liveEvent:!c&&t==this.liveTimeline&&!i};this.emit(a.RoomEvent.Timeline,e,this.room,Boolean(c),!1,h)}handleRemoteEcho(e,t,n){const i=this._eventIdToTimeline.get(t);i?(this._eventIdToTimeline.delete(t),this._eventIdToTimeline.set(n,i)):this.filter&&!this.filter.filterRoomTimeline([e]).length||this.addEventToTimeline(e,this.liveTimeline,{toStartOfTimeline:!1})}removeEvent(e){const t=this._eventIdToTimeline.get(e);if(!t)return null;const n=t.removeEvent(e);if(n){this._eventIdToTimeline.delete(e);const i={timeline:t};this.emit(a.RoomEvent.Timeline,n,this.room,void 0,!0,i)}return n}compareEventOrdering(e,t){if(e==t)return 0;const n=this._eventIdToTimeline.get(e),i=this._eventIdToTimeline.get(t);if(void 0===n)return null;if(void 0===i)return null;if(n===i){let i,r;const o=n.getEvents();for(let n=0;n<o.length&&(void 0===i||void 0===r);n++){const s=o[n].getId();s==e&&(i=n),s==t&&(r=n)}return i-r}let r=n;for(;r;){if(r===i)return-1;r=r.getNeighbouringTimeline(o.EventTimeline.FORWARDS)}for(r=n;r;){if(r===i)return 1;r=r.getNeighbouringTimeline(o.EventTimeline.BACKWARDS)}return null}canContain(e){if(!this.room)throw new Error("Cannot call `EventTimelineSet::canContain without a `room` set. Set the room when creating the EventTimelineSet to call this method.");const{threadId:t,shouldLiveInRoom:n}=this.room.eventShouldLiveIn(e);return this.thread?this.thread.id===t:n}}t.EventTimelineSet=h},88910:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.EventTimeline=t.Direction=void 0;var r=i(n(59713)),o=n(7434),s=n(26860),a=n(42481);let c;t.Direction=c,function(e){e.Backward="b",e.Forward="f"}(c||(t.Direction=c={}));class l{static setEventMetadata(e,t,n){var i,r,o,s;null!==(i=e.sender)&&void 0!==i&&null!==(r=i.events)&&void 0!==r&&r.member||(e.sender=t.getSentinelMember(e.getSender())),null!==(o=e.target)&&void 0!==o&&null!==(s=o.events)&&void 0!==s&&s.member||e.getType()!==a.EventType.RoomMember||(e.target=t.getSentinelMember(e.getStateKey())),e.isState()&&n&&(e.forwardLooking=!1)}constructor(e){var t,n;this.eventTimelineSet=e,(0,r.default)(this,"roomId",void 0),(0,r.default)(this,"name",void 0),(0,r.default)(this,"events",[]),(0,r.default)(this,"baseIndex",0),(0,r.default)(this,"startState",void 0),(0,r.default)(this,"endState",void 0),(0,r.default)(this,"startToken",null),(0,r.default)(this,"endToken",null),(0,r.default)(this,"prevTimeline",null),(0,r.default)(this,"nextTimeline",null),(0,r.default)(this,"paginationRequests",{[c.Backward]:null,[c.Forward]:null}),this.roomId=null!==(t=null===(n=e.room)||void 0===n?void 0:n.roomId)&&void 0!==t?t:null,this.roomId&&(this.startState=new s.RoomState(this.roomId),this.endState=new s.RoomState(this.roomId)),this.paginationRequests={b:null,f:null},this.name=this.roomId+":"+(new Date).toISOString()}initialiseState(e,{timelineWasEmpty:t}={}){var n,i;if(this.events.length>0)throw new Error("Cannot initialise state after events are added");null===(n=this.startState)||void 0===n||n.setStateEvents(e,{timelineWasEmpty:t}),null===(i=this.endState)||void 0===i||i.setStateEvents(e,{timelineWasEmpty:t})}forkLive(e){const t=this.getState(e),n=new l(this.eventTimelineSet);return n.startState=null==t?void 0:t.clone(),n.endState=t,this.endState=null==t?void 0:t.clone(),n}fork(e){const t=this.getState(e),n=new l(this.eventTimelineSet);return n.startState=null==t?void 0:t.clone(),n.endState=null==t?void 0:t.clone(),n}getRoomId(){return this.roomId}getFilter(){return this.eventTimelineSet.getFilter()}getTimelineSet(){return this.eventTimelineSet}getBaseIndex(){return this.baseIndex}getEvents(){return this.events}getState(e){if(e==l.BACKWARDS)return this.startState;if(e==l.FORWARDS)return this.endState;throw new Error("Invalid direction '"+e+"'")}getPaginationToken(e){return this.roomId?this.getState(e).paginationToken:e===c.Backward?this.startToken:this.endToken}setPaginationToken(e,t){this.roomId?this.getState(t).paginationToken=e:t===c.Backward?this.startToken=e:this.endToken=e}getNeighbouringTimeline(e){if(e==l.BACKWARDS)return this.prevTimeline;if(e==l.FORWARDS)return this.nextTimeline;throw new Error("Invalid direction '"+e+"'")}setNeighbouringTimeline(e,t){if(this.getNeighbouringTimeline(t))throw new Error("timeline already has a neighbouring timeline - cannot reset neighbour (direction: "+t+")");if(t==l.BACKWARDS)this.prevTimeline=e;else{if(t!=l.FORWARDS)throw new Error("Invalid direction '"+t+"'");this.nextTimeline=e}this.setPaginationToken(null,t)}addEvent(e,t,n){let i,r=!!t;"object"==typeof t?({toStartOfTimeline:r,roomState:n,timelineWasEmpty:i}=t):void 0!==t&&o.logger.warn("Overload deprecated: `EventTimeline.addEvent(event, toStartOfTimeline, roomState?)` is deprecated in favor of the overload with `EventTimeline.addEvent(event, IAddEventOptions)`"),n||(n=r?this.startState:this.endState);const s=this.getTimelineSet();var c;let u;s.room&&(l.setEventMetadata(e,n,r),e.isState()&&s.room.getUnfilteredTimelineSet()===s&&(null===(c=n)||void 0===c||c.setStateEvents([e],{timelineWasEmpty:i}),e.sender&&(e.getType()!==a.EventType.RoomMember||r)||l.setEventMetadata(e,n,r))),u=r?0:this.events.length,this.events.splice(u,0,e),r&&this.baseIndex++}removeEvent(e){for(let t=this.events.length-1;t>=0;t--){const n=this.events[t];if(n.getId()==e)return this.events.splice(t,1),t<this.baseIndex&&this.baseIndex--,n}return null}toString(){return this.name}}t.EventTimeline=l,(0,r.default)(l,"BACKWARDS",c.Backward),(0,r.default)(l,"FORWARDS",c.Forward)},24369:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"EventStatus",{enumerable:!0,get:function(){return h.EventStatus}}),t.MatrixEventEvent=t.MatrixEvent=void 0;var r=i(n(59713)),o=n(71333),s=n(7434),a=n(42481),c=n(3102),l=n(36969),u=n(20771),d=n(55861),h=n(88881);const p=Object.freeze({visible:!0});let f;t.MatrixEventEvent=f,function(e){e.Decrypted="Event.decrypted",e.BeforeRedaction="Event.beforeRedaction",e.VisibilityChange="Event.visibilityChange",e.LocalEventIdReplaced="Event.localEventIdReplaced",e.Status="Event.status",e.Replaced="Event.replaced",e.RelationsCreated="Event.relationsCreated"}(f||(t.MatrixEventEvent=f={}));class m extends d.TypedEventEmitter{constructor(e={}){var t;super(),this.event=e,(0,r.default)(this,"pushActions",null),(0,r.default)(this,"_replacingEvent",null),(0,r.default)(this,"_localRedactionEvent",null),(0,r.default)(this,"_isCancelled",!1),(0,r.default)(this,"clearEvent",void 0),(0,r.default)(this,"visibility",p),(0,r.default)(this,"_hasCachedExtEv",!1),(0,r.default)(this,"_cachedExtEv",void 0),(0,r.default)(this,"senderCurve25519Key",null),(0,r.default)(this,"claimedEd25519Key",null),(0,r.default)(this,"forwardingCurve25519KeyChain",[]),(0,r.default)(this,"untrusted",null),(0,r.default)(this,"decryptionPromise",null),(0,r.default)(this,"retryDecryption",!1),(0,r.default)(this,"txnId",void 0),(0,r.default)(this,"thread",void 0),(0,r.default)(this,"threadId",void 0),(0,r.default)(this,"localTimestamp",void 0),(0,r.default)(this,"sender",null),(0,r.default)(this,"target",null),(0,r.default)(this,"status",null),(0,r.default)(this,"error",null),(0,r.default)(this,"forwardLooking",!0),(0,r.default)(this,"verificationRequest",void 0),(0,r.default)(this,"reEmitter",void 0),["state_key","type","sender","room_id","membership"].forEach((t=>{"string"==typeof e[t]&&(e[t]=(0,c.internaliseString)(e[t]))})),["membership","avatar_url","displayname"].forEach((t=>{var n;"string"==typeof(null===(n=e.content)||void 0===n?void 0:n[t])&&(e.content[t]=(0,c.internaliseString)(e.content[t]))})),["rel_type"].forEach((t=>{var n,i;"string"==typeof(null===(n=e.content)||void 0===n||null===(i=n["m.relates_to"])||void 0===i?void 0:i[t])&&(e.content["m.relates_to"][t]=(0,c.internaliseString)(e.content["m.relates_to"][t]))})),this.txnId=e.txn_id,this.localTimestamp=Date.now()-(null!==(t=this.getAge())&&void 0!==t?t:0),this.reEmitter=new u.TypedReEmitter(this)}get unstableExtensibleEvent(){return this._hasCachedExtEv||(this._cachedExtEv=o.ExtensibleEvents.parse(this.getEffectiveEvent())),this._cachedExtEv}invalidateExtensibleEvent(){this._hasCachedExtEv=!1}getEffectiveEvent(){const e=Object.assign({},this.getContent());if(this.getWireType()===a.EventType.RoomMessageEncrypted)for(const[t,n]of Object.entries(this.getWireContent()))["algorithm","ciphertext","device_id","sender_key","session_id"].includes(t)||void 0===e[t]&&(e[t]=n);return Object.assign({},this.event,this.clearEvent,{content:e})}getId(){return this.event.event_id}getSender(){return this.event.sender||this.event.user_id}getType(){return this.clearEvent?this.clearEvent.type:this.event.type}getWireType(){return this.event.type}getRoomId(){return this.event.room_id}getTs(){return this.event.origin_server_ts}getDate(){return this.event.origin_server_ts?new Date(this.event.origin_server_ts):null}getDetails(){let e=`id=${this.getId()} type=${this.getWireType()} sender=${this.getSender()}`;const t=this.getRoomId();t&&(e+=` room=${t}`);const n=this.getDate();return n&&(e+=` ts=${n.toISOString()}`),e}getOriginalContent(){return this._localRedactionEvent?{}:this.clearEvent?this.clearEvent.content||{}:this.event.content||{}}getContent(){return this._localRedactionEvent?{}:this._replacingEvent?this._replacingEvent.getContent()["m.new_content"]||{}:this.getOriginalContent()}getWireContent(){return this.event.content||{}}get threadRootId(){var e;const t=null===(e=this.getWireContent())||void 0===e?void 0:e["m.relates_to"];return(null==t?void 0:t.rel_type)===l.THREAD_RELATION_TYPE.name?t.event_id:(null===(n=this.getThread())||void 0===n?void 0:n.id)||this.threadId;var n}get isThreadRoot(){var e;return!!this.getServerAggregatedRelation(l.THREAD_RELATION_TYPE.name)||(null===(e=this.getThread())||void 0===e?void 0:e.id)===this.getId()}get replyEventId(){var e;const t=this.getContent()["m.relates_to"]||this.getWireContent()["m.relates_to"];return null==t||null===(e=t["m.in_reply_to"])||void 0===e?void 0:e.event_id}get relationEventId(){var e,t;return null===(e=this.getWireContent())||void 0===e||null===(t=e["m.relates_to"])||void 0===t?void 0:t.event_id}getPrevContent(){return this.getUnsigned().prev_content||this.event.prev_content||{}}getDirectionalContent(){return this.forwardLooking?this.getContent():this.getPrevContent()}getAge(){return this.getUnsigned().age||this.event.age}getLocalAge(){return Date.now()-this.localTimestamp}getStateKey(){return this.event.state_key}isState(){return void 0!==this.event.state_key}makeEncrypted(e,t,n,i){this.clearEvent={type:this.event.type,content:this.event.content},this.event.type=e,this.event.content=t,this.senderCurve25519Key=n,this.claimedEd25519Key=i}isBeingDecrypted(){return null!=this.decryptionPromise}getDecryptionPromise(){return this.decryptionPromise}isDecryptionFailure(){var e,t;return"m.bad.encrypted"===(null===(e=this.clearEvent)||void 0===e||null===(t=e.content)||void 0===t?void 0:t.msgtype)}shouldAttemptDecryption(){return!(this.isRedacted()||this.isBeingDecrypted()||this.clearEvent||!this.isEncrypted())}async attemptDecryption(e,t={}){if(!this.isEncrypted())throw new Error("Attempt to decrypt event which isn't encrypted");const n=this.clearEvent&&!this.isDecryptionFailure(),i=t.forceRedecryptIfUntrusted&&this.isKeySourceUntrusted();if(n&&!i)throw new Error("Attempt to decrypt event which has already been decrypted");return this.decryptionPromise?(s.logger.log(`Event ${this.getId()} already being decrypted; queueing a retry`),this.retryDecryption=!0,this.decryptionPromise):(this.decryptionPromise=this.decryptionLoop(e,t),this.decryptionPromise)}cancelAndResendKeyRequest(e,t){const n=this.getWireContent();return e.requestRoomKey({algorithm:n.algorithm,room_id:this.getRoomId(),session_id:n.session_id,sender_key:n.sender_key},this.getKeyRequestRecipients(t),!0)}getKeyRequestRecipients(e){const t=this.getWireContent(),n=[{userId:e,deviceId:"*"}],i=this.getSender();return i!==e&&n.push({userId:i,deviceId:t.device_id}),n}async decryptionLoop(e,t={}){for(await Promise.resolve();;){let n,i;this.retryDecryption=!1;try{e?(n=await e.decryptEvent(this),!0===t.isRetry&&s.logger.info(`Decrypted event on retry (${this.getDetails()})`)):n=this.badEncryptedMessage("Encryption not enabled")}catch(e){if("DecryptionError"!==e.name){const n=t.isRetry?"re":"";return s.logger.error(`Error ${n}decrypting event (${this.getDetails()})`,e),this.decryptionPromise=null,void(this.retryDecryption=!1)}if(i=e,this.retryDecryption){s.logger.log(`Error decrypting event (${this.getDetails()}), but retrying: `+e.detailedString);continue}s.logger.warn(`Error decrypting event (${this.getDetails()}): `+e.detailedString),n=this.badEncryptedMessage(e.message)}return this.decryptionPromise=null,this.retryDecryption=!1,this.setClearData(n),this.setPushActions(null),void(!1!==t.emit&&this.emit(f.Decrypted,this,i))}}badEncryptedMessage(e){return{clearEvent:{type:a.EventType.RoomMessage,content:{msgtype:"m.bad.encrypted",body:"** Unable to decrypt: "+e+" **"}}}}setClearData(e){var t,n;this.clearEvent=e.clearEvent,this.senderCurve25519Key=null!==(t=e.senderCurve25519Key)&&void 0!==t?t:null,this.claimedEd25519Key=null!==(n=e.claimedEd25519Key)&&void 0!==n?n:null,this.forwardingCurve25519KeyChain=e.forwardingCurve25519KeyChain||[],this.untrusted=e.untrusted||!1,this.invalidateExtensibleEvent()}getClearContent(){return this.clearEvent?this.clearEvent.content:null}isEncrypted(){return!this.isState()&&this.event.type===a.EventType.RoomMessageEncrypted}getSenderKey(){return this.senderCurve25519Key}getKeysClaimed(){return this.claimedEd25519Key?{ed25519:this.claimedEd25519Key}:{}}getClaimedEd25519Key(){return this.claimedEd25519Key}getForwardingCurve25519KeyChain(){return this.forwardingCurve25519KeyChain}isKeySourceUntrusted(){return!!this.untrusted}getUnsigned(){return this.event.unsigned||{}}setUnsigned(e){this.event.unsigned=e}unmarkLocallyRedacted(){const e=this._localRedactionEvent;return this._localRedactionEvent=null,this.event.unsigned&&(this.event.unsigned.redacted_because=void 0),!!e}markLocallyRedacted(e){this._localRedactionEvent||(this.emit(f.BeforeRedaction,this,e),this._localRedactionEvent=e,this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=e.event)}applyVisibilityEvent(e){var t,n;const i=null===(t=null==e?void 0:e.visible)||void 0===t||t,r=null!==(n=null==e?void 0:e.reason)&&void 0!==n?n:null;let o=!1;this.visibility.visible!==i?o=!0:this.visibility.visible||this.visibility.reason===r||(o=!0),o&&(this.visibility=i?p:Object.freeze({visible:!1,reason:r}),this.emit(f.VisibilityChange,this,i))}messageVisibility(){return this.visibility}makeRedacted(e){if(!e.event)throw new Error("invalid redactionEvent in makeRedacted");this._localRedactionEvent=null,this.emit(f.BeforeRedaction,this,e),this._replacingEvent=null,this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=e.event;for(const e in this.event)this.event.hasOwnProperty(e)&&!g.has(e)&&delete this.event[e];this.isEncrypted()&&(this.clearEvent=void 0);const t=v[this.getType()]||{},n=this.getContent();for(const e in n)n.hasOwnProperty(e)&&!t[e]&&delete n[e];this.invalidateExtensibleEvent()}isRedacted(){return Boolean(this.getUnsigned().redacted_because)}isRedaction(){return this.getType()===a.EventType.RoomRedaction}asVisibilityChange(){if(!a.EVENT_VISIBILITY_CHANGE_TYPE.matches(this.getType()))return null;const e=this.getRelation();if(!e||"m.reference"!=e.rel_type)return null;const t=e.event_id;if(!t)return null;const n=this.getWireContent(),i=!!n.visible,r=n.reason;return r&&"string"!=typeof r?null:{visible:i,reason:r,eventId:t}}isVisibilityEvent(){return a.EVENT_VISIBILITY_CHANGE_TYPE.matches(this.getType())}getRedactionEvent(){var e,t,n,i;return this.isRedacted()?null!==(e=this.clearEvent)&&void 0!==e&&e.unsigned?null!==(n=null===(i=this.clearEvent)||void 0===i?void 0:i.unsigned.redacted_because)&&void 0!==n?n:null:null!==(t=this.event.unsigned)&&void 0!==t&&t.redacted_because?this.event.unsigned.redacted_because:{}:null}getPushActions(){return this.pushActions}setPushActions(e){this.pushActions=e}handleRemoteEcho(e){const t=this.getUnsigned(),n=this.getId();this.event=e,t.redacted_because&&(this.event.unsigned||(this.event.unsigned={}),this.event.unsigned.redacted_because=t.redacted_because),this.setStatus(null),this.getId()!==n&&this.emit(f.LocalEventIdReplaced,this),this.localTimestamp=Date.now()-this.getAge()}isSending(){return!!this.status}setStatus(e){this.status=e,this.emit(f.Status,this,e)}replaceLocalEventId(e){this.event.event_id=e,this.emit(f.LocalEventIdReplaced,this)}isRelation(e){var t;const n=null===(t=this.getWireContent())||void 0===t?void 0:t["m.relates_to"];return!(this.isState()&&(null==n?void 0:n.rel_type)===a.RelationType.Replace||null==n||!n.rel_type||!n.event_id||e&&n.rel_type!==e)}getRelation(){var e;return this.isRelation()&&null!==(e=this.getWireContent()["m.relates_to"])&&void 0!==e?e:null}makeReplaced(e){this.isRedacted()&&e||this.isState()||this._replacingEvent!==e&&(this._replacingEvent=null!=e?e:null,this.emit(f.Replaced,this),this.invalidateExtensibleEvent())}getAssociatedStatus(){return this._replacingEvent?this._replacingEvent.status:this._localRedactionEvent?this._localRedactionEvent.status:this.status}getServerAggregatedRelation(e){var t;return null===(t=this.getUnsigned()["m.relations"])||void 0===t?void 0:t[e]}replacingEventId(){const e=this.getServerAggregatedRelation(a.RelationType.Replace);return e?e.event_id:this._replacingEvent?this._replacingEvent.getId():void 0}replacingEvent(){return this._replacingEvent}replacingEventDate(){const e=this.getServerAggregatedRelation(a.RelationType.Replace);if(e){const t=e.origin_server_ts;if(Number.isFinite(t))return new Date(t)}else if(this._replacingEvent){var t;return null!==(t=this._replacingEvent.getDate())&&void 0!==t?t:void 0}}localRedactionEvent(){return this._localRedactionEvent}getAssociatedId(){const e=this.getRelation();return this.replyEventId?this.replyEventId:e?e.event_id:this.isRedaction()?this.event.redacts:void 0}hasAssocation(){return!!this.getAssociatedId()}hasAssociation(){return!!this.getAssociatedId()}updateAssociatedId(e){const t=this.getRelation();t?t.event_id=e:this.isRedaction()&&(this.event.redacts=e)}flagCancelled(e=!0){this._isCancelled=e}isCancelled(){return this._isCancelled}toSnapshot(){const e=new m(JSON.parse(JSON.stringify(this.event)));for(const[t,n]of Object.entries(this))"event"!==t&&(e[t]=n);return e}isEquivalentTo(e){if(!e)return!1;if(e===this)return!0;const t=(0,c.deepSortedObjectEntries)(this.event),n=(0,c.deepSortedObjectEntries)(e.event);return JSON.stringify(t)===JSON.stringify(n)}toJSON(){const e=this.getEffectiveEvent();return this.isEncrypted()?{decrypted:e,encrypted:this.event}:e}setVerificationRequest(e){this.verificationRequest=e}setTxnId(e){this.txnId=e}getTxnId(){return this.txnId}setThread(e){this.thread&&this.reEmitter.stopReEmitting(this.thread,[l.ThreadEvent.Update]),this.thread=e,this.setThreadId(null==e?void 0:e.id),e&&this.reEmitter.reEmit(e,[l.ThreadEvent.Update])}getThread(){return this.thread}setThreadId(e){this.threadId=e}}t.MatrixEvent=m;const g=new Set(["event_id","type","room_id","user_id","sender","state_key","prev_state","content","unsigned","origin_server_ts"]),v={[a.EventType.RoomMember]:{membership:1},[a.EventType.RoomCreate]:{creator:1},[a.EventType.RoomJoinRules]:{join_rule:1},[a.EventType.RoomPowerLevels]:{ban:1,events:1,events_default:1,kick:1,redact:1,state_default:1,users:1,users_default:1}}},88515:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyScope=t.POLICIES_ACCOUNT_EVENT_TYPE=t.IgnoredInvites=t.IGNORE_INVITES_ACCOUNT_EVENT_KEY=void 0;var i=n(71333),r=n(88910),o=n(44702),s=n(3102);const a=new i.UnstableValue("m.policies","org.matrix.msc3847.policies");t.POLICIES_ACCOUNT_EVENT_TYPE=a;const c=new i.UnstableValue("m.ignore.invites","org.matrix.msc3847.ignore.invites");var l;let u;t.IGNORE_INVITES_ACCOUNT_EVENT_KEY=c,function(e){e.Ban="m.ban"}(l||(l={})),t.PolicyScope=u,function(e){e.User="m.policy.user",e.Room="m.policy.room",e.Server="m.policy.server"}(u||(t.PolicyScope=u={})),t.IgnoredInvites=class{constructor(e){this.client=e}async addRule(e,t,n){const i=await this.getOrCreateTargetRoom();return(await this.client.sendStateEvent(i.roomId,e,{entity:t,reason:n,recommendation:l.Ban})).event_id}async removeRule(e){await this.client.redactEvent(e.getRoomId(),e.getId())}async addSource(e){await this.client.joinRoom(e);const t=(await this.getOrCreateSourceRooms()).map((e=>e.roomId));return!t.includes(e)&&(t.push(e),await this.withIgnoreInvitesPolicies((e=>{e.sources=t})),!0)}async getRuleForInvite({sender:e,roomId:t}){const n=await this.getOrCreateSourceRooms(),i=e.split(":")[1],o=t.split(":")[1];for(const a of n){const n=a.getUnfilteredTimelineSet().getLiveTimeline().getState(r.EventTimeline.FORWARDS);for(const{scope:r,entities:a}of[{scope:u.Room,entities:[t]},{scope:u.User,entities:[e]},{scope:u.Server,entities:[i,o]}]){const e=n.getStateEvents(r);for(const t of e){const e=t.getContent();if((null==e?void 0:e.recommendation)!=l.Ban)continue;const n=null==e?void 0:e.entity;if(!n)continue;let i;try{i=new RegExp((0,s.globToRegexp)(n,!1))}catch(e){continue}for(const e of a)if(e&&i.test(e))return t}}}return null}async getOrCreateTargetRoom(){let e=this.getIgnoreInvitesPolicies().target;if("string"!=typeof e&&(e=null),e){const t=this.client.getRoom(e);if(t)return t;e=null}return e=(await this.client.createRoom({name:"Individual Policy Room",preset:o.Preset.PrivateChat})).room_id,await this.withIgnoreInvitesPolicies((t=>{t.target=e})),this.client.getRoom(e)}async getOrCreateSourceRooms(){let e=this.getIgnoreInvitesPolicies().sources,t=!1;Array.isArray(e)||(t=!0,e=[]);let n=e.filter((e=>"string"==typeof e)).map((e=>this.client.getRoom(e))).filter((e=>!!e));return n.length!=e.length&&(t=!0),0==n.length&&(t=!0,n=[await this.getOrCreateTargetRoom()]),t&&await this.withIgnoreInvitesPolicies((t=>{t.sources=e})),n}getIgnoreInvitesPolicies(){return this.getPoliciesAndIgnoreInvitesPolicies().ignoreInvitesPolicies}async withIgnoreInvitesPolicies(e){const{policies:t,ignoreInvitesPolicies:n}=this.getPoliciesAndIgnoreInvitesPolicies();e(n),t[c.name]=n,await this.client.setAccountData(a.name,t)}getPoliciesAndIgnoreInvitesPolicies(){let e={};for(const n of[a.name,a.altName]){var t;if(!n)continue;const i=null===(t=this.client.getAccountData(n))||void 0===t?void 0:t.getContent();if(i){e=i;break}}let n={},i=!1;for(const t of[c.name,c.altName]){if(!t)continue;const r=e[t];if(r&&"object"==typeof r){n=r,i=!0;break}}return i||(e[c.name]=n),{policies:e,ignoreInvitesPolicies:n}}}},82958:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ReadReceipt=void 0,t.synthesizeReceipt=d;var r=i(n(59713)),o=n(95550),s=n(55861),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(3102)),c=n(24369),l=n(42481);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e,t,n){var i;return new c.MatrixEvent({content:{[t.getId()]:{[n]:{[e]:{ts:t.getTs(),thread_id:null!==(i=t.threadRootId)&&void 0!==i?i:o.MAIN_ROOM_TIMELINE}}}},type:l.EventType.Receipt,room_id:t.getRoomId()})}class h extends s.TypedEventEmitter{constructor(...e){super(...e),(0,r.default)(this,"receipts",{}),(0,r.default)(this,"receiptCacheByEventId",{}),(0,r.default)(this,"timeline",void 0)}getReadReceiptForUserId(e,t=!1,n=o.ReceiptType.Read){var i,r;const[s,a]=null!==(i=null===(r=this.receipts[n])||void 0===r?void 0:r[e])&&void 0!==i?i:[];return t?s:null!=a?a:s}getEventReadUpTo(e,t=!1){var n,i,r,s,a;const c=this.getUnfilteredTimelineSet(),l=this.getReadReceiptForUserId(e,t,o.ReceiptType.Read),u=this.getReadReceiptForUserId(e,t,o.ReceiptType.ReadPrivate);let d;var h,p;return null!=l&&l.eventId&&null!=u&&u.eventId&&(d=c.compareEventOrdering(null==l?void 0:l.eventId,null==u?void 0:u.eventId)),!d&&null!=l&&null!==(n=l.data)&&void 0!==n&&n.ts&&null!=u&&null!==(i=u.data)&&void 0!==i&&i.ts&&(d=(null==l||null===(h=l.data)||void 0===h?void 0:h.ts)-(null==u||null===(p=u.data)||void 0===p?void 0:p.ts)),d?null!==(a=d<0?null==u?void 0:u.eventId:null==l?void 0:l.eventId)&&void 0!==a?a:null:null!==(r=null!==(s=null==u?void 0:u.eventId)&&void 0!==s?s:null==l?void 0:l.eventId)&&void 0!==r?r:null}addReceiptToStructure(e,t,n,i,r){var o,s;this.receipts[t]||(this.receipts[t]={}),this.receipts[t][n]||(this.receipts[t][n]=[null,null]);const a=this.receipts[t][n];let c=a[0];var l;if(r&&(c=null!==(l=a[1])&&void 0!==l?l:a[0]),c){const t=this.getUnfilteredTimelineSet().compareEventOrdering(c.eventId,e);if(null!==t&&t>=0)return}const u={eventId:e,data:i},d=r?a[0]:u,h=r?u:a[1];let p=null;d&&h&&(p=this.getUnfilteredTimelineSet().compareEventOrdering(d.eventId,h.eventId));const f=null===p||p<0,m=null!==(o=a[1])&&void 0!==o?o:a[0];if(r&&f?a[1]=u:r||(a[0]=u,f||(a[1]=null)),m!==(null!==(s=a[1])&&void 0!==s?s:a[0])){if(m&&this.receiptCacheByEventId[m.eventId]){const e=m.eventId;this.receiptCacheByEventId[e]=this.receiptCacheByEventId[e].filter((e=>e.type!==t||e.userId!==n)),this.receiptCacheByEventId[e].length<1&&delete this.receiptCacheByEventId[e]}this.receiptCacheByEventId[e]||(this.receiptCacheByEventId[e]=[]),this.receiptCacheByEventId[e].push({userId:n,type:t,data:i})}}getReceiptsForEvent(e){return this.receiptCacheByEventId[e.getId()]||[]}addLocalEchoReceipt(e,t,n){this.addReceipt(d(e,t,n),!0)}getUsersReadUpTo(e){return this.getReceiptsForEvent(e).filter((function(e){return a.isSupportedReceiptType(e.type)})).map((function(e){return e.userId}))}hasUserReadEvent(e,t){var n;const i=this.getEventReadUpTo(e,!1);if(i===t)return!0;if(null!==(n=this.timeline)&&void 0!==n&&n.length&&this.timeline[this.timeline.length-1].getSender()&&this.timeline[this.timeline.length-1].getSender()===e)return!0;for(let e=(null===(r=this.timeline)||void 0===r?void 0:r.length)-1;e>=0;--e){var r;const n=this.timeline[e];if(n.getId()===t)return!1;if(n.getId()===i)return!0}return!1}}t.ReadReceipt=h},47286:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RelationsContainer=void 0;var r=i(n(59713)),o=n(49690),s=n(24369);t.RelationsContainer=class{constructor(e,t){this.client=e,this.room=t,(0,r.default)(this,"relations",new Map)}getChildEventsForEvent(e,t,n){var i,r;return null===(i=this.relations.get(e))||void 0===i||null===(r=i.get(t))||void 0===r?void 0:r.get(n)}getAllChildEventsForEvent(e){var t;const n=null!==(t=this.relations.get(e))&&void 0!==t?t:new Map,i=[];for(const e of n.values())for(const t of e.values())i.push(...t.getRelations());return i}aggregateParentEvent(e){const t=this.relations.get(e.getId());if(t)for(const n of t.values())for(const t of n.values())t.setTargetEvent(e)}aggregateChildEvent(e,t){if(e.isRedacted()||e.status===s.EventStatus.CANCELLED)return;const n=e.getRelation();if(!n)return;const i=()=>{e.isDecryptionFailure()?e.once(s.MatrixEventEvent.Decrypted,i):this.aggregateChildEvent(e,t)};if(e.isBeingDecrypted()||e.shouldAttemptDecryption())return void e.once(s.MatrixEventEvent.Decrypted,i);const{event_id:r,rel_type:a}=n,c=e.getType();let l=this.relations.get(r);l||(l=new Map,this.relations.set(r,l));let u=l.get(a);u||(u=new Map,l.set(a,u));let d=u.get(c);if(!d){var h,p,f;d=new o.Relations(a,c,this.client),u.set(c,d);const e=null!==(h=this.room)&&void 0!==h?h:null==t?void 0:t.room,n=null!==(p=null!==(f=null==t?void 0:t.findEventById(r))&&void 0!==f?f:null==e?void 0:e.findEventById(r))&&void 0!==p?p:null==e?void 0:e.getPendingEvent(r);n&&d.setTargetEvent(n)}d.addEvent(e)}}},49690:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RelationsEvent=t.Relations=void 0;var r=i(n(59713)),o=n(24369),s=n(7434),a=n(42481),c=n(55861),l=n(27366);let u;t.RelationsEvent=u,function(e){e.Add="Relations.add",e.Remove="Relations.remove",e.Redaction="Relations.redaction"}(u||(t.RelationsEvent=u={}));class d extends c.TypedEventEmitter{constructor(e,t,n){super(),this.relationType=e,this.eventType=t,(0,r.default)(this,"relationEventIds",new Set),(0,r.default)(this,"relations",new Set),(0,r.default)(this,"annotationsByKey",{}),(0,r.default)(this,"annotationsBySender",{}),(0,r.default)(this,"sortedAnnotationsByKey",[]),(0,r.default)(this,"targetEvent",null),(0,r.default)(this,"creationEmitted",!1),(0,r.default)(this,"client",void 0),(0,r.default)(this,"onEventStatus",((e,t)=>{e.isSending()?t===o.EventStatus.CANCELLED&&(e.removeListener(o.MatrixEventEvent.Status,this.onEventStatus),this.removeEvent(e)):e.removeListener(o.MatrixEventEvent.Status,this.onEventStatus)})),(0,r.default)(this,"onBeforeRedaction",(async e=>{if(this.relations.has(e)){if(this.relations.delete(e),this.relationType===a.RelationType.Annotation)this.removeAnnotationFromAggregation(e);else if(this.relationType===a.RelationType.Replace&&this.targetEvent&&!this.targetEvent.isState()){const e=await this.getLastReplacement();this.targetEvent.makeReplaced(e)}e.removeListener(o.MatrixEventEvent.BeforeRedaction,this.onBeforeRedaction),this.emit(u.Redaction,e)}})),this.client=n instanceof l.Room?n.client:n}async addEvent(e){if(this.relationEventIds.has(e.getId()))return;const t=e.getRelation();if(!t)return void s.logger.error("Event must have relation info");const n=t.rel_type,i=e.getType();if(this.relationType===n&&this.eventType===i){if(e.isSending()&&e.on(o.MatrixEventEvent.Status,this.onEventStatus),this.relations.add(e),this.relationEventIds.add(e.getId()),this.relationType===a.RelationType.Annotation)this.addAnnotationToAggregation(e);else if(this.relationType===a.RelationType.Replace&&this.targetEvent&&!this.targetEvent.isState()){const e=await this.getLastReplacement();this.targetEvent.makeReplaced(e)}e.on(o.MatrixEventEvent.BeforeRedaction,this.onBeforeRedaction),this.emit(u.Add,e),this.maybeEmitCreated()}else s.logger.error("Event relation info doesn't match this container")}async removeEvent(e){if(!this.relations.has(e))return;const t=e.getRelation();if(!t)return void s.logger.error("Event must have relation info");const n=t.rel_type,i=e.getType();if(this.relationType===n&&this.eventType===i){if(this.relations.delete(e),this.relationType===a.RelationType.Annotation)this.removeAnnotationFromAggregation(e);else if(this.relationType===a.RelationType.Replace&&this.targetEvent&&!this.targetEvent.isState()){const e=await this.getLastReplacement();this.targetEvent.makeReplaced(e)}this.emit(u.Remove,e)}else s.logger.error("Event relation info doesn't match this container")}getRelations(){return[...this.relations]}addAnnotationToAggregation(e){var t;const{key:n}=null!==(t=e.getRelation())&&void 0!==t?t:{};if(!n)return;let i=this.annotationsByKey[n];i||(i=this.annotationsByKey[n]=new Set,this.sortedAnnotationsByKey.push([n,i])),i.add(e),this.sortedAnnotationsByKey.sort(((e,t)=>{const n=e[1];return t[1].size-n.size}));const r=e.getSender();let o=this.annotationsBySender[r];o||(o=this.annotationsBySender[r]=new Set),o.add(e)}removeAnnotationFromAggregation(e){var t;const{key:n}=null!==(t=e.getRelation())&&void 0!==t?t:{};if(!n)return;const i=this.annotationsByKey[n];i&&(i.delete(e),this.sortedAnnotationsByKey.sort(((e,t)=>{const n=e[1];return t[1].size-n.size})));const r=e.getSender(),o=this.annotationsBySender[r];o&&o.delete(e)}getSortedAnnotationsByKey(){return this.relationType!==a.RelationType.Annotation?null:this.sortedAnnotationsByKey}getAnnotationsBySender(){return this.relationType!==a.RelationType.Annotation?null:this.annotationsBySender}async getLastReplacement(){if(this.relationType!==a.RelationType.Replace)return null;if(!this.targetEvent)return null;const e=this.targetEvent.getServerAggregatedRelation(a.RelationType.Replace),t=null==e?void 0:e.origin_server_ts,n=this.getRelations().reduce(((e,n)=>n.getSender()!==this.targetEvent.getSender()||t&&t>n.getTs()||e&&e.getTs()>n.getTs()?e:n),null);return null!=n&&n.shouldAttemptDecryption()&&this.client.isCryptoEnabled()?await n.attemptDecryption(this.client.crypto):null!=n&&n.isBeingDecrypted()&&await n.getDecryptionPromise(),n}async setTargetEvent(e){if(!this.targetEvent){if(this.targetEvent=e,this.relationType===a.RelationType.Replace&&!this.targetEvent.isState()){const e=await this.getLastReplacement();e&&this.targetEvent.makeReplaced(e)}this.maybeEmitCreated()}}maybeEmitCreated(){this.creationEmitted||this.targetEvent&&this.relations.size&&(this.creationEmitted=!0,this.targetEvent.emit(o.MatrixEventEvent.RelationsCreated,this.relationType,this.eventType))}}t.Relations=d},32848:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RoomMemberEvent=t.RoomMember=void 0;var r=i(n(59713)),o=n(73667),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(3102)),a=n(7434),c=n(55861),l=n(42481);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}let d;t.RoomMemberEvent=d,function(e){e.Membership="RoomMember.membership",e.Name="RoomMember.name",e.PowerLevel="RoomMember.powerLevel",e.Typing="RoomMember.typing"}(d||(t.RoomMemberEvent=d={}));class h extends c.TypedEventEmitter{constructor(e,t){super(),this.roomId=e,this.userId=t,(0,r.default)(this,"_isOutOfBand",!1),(0,r.default)(this,"modified",-1),(0,r.default)(this,"requestedProfileInfo",!1),(0,r.default)(this,"typing",!1),(0,r.default)(this,"name",void 0),(0,r.default)(this,"rawDisplayName",void 0),(0,r.default)(this,"powerLevel",0),(0,r.default)(this,"powerLevelNorm",0),(0,r.default)(this,"user",void 0),(0,r.default)(this,"membership",void 0),(0,r.default)(this,"disambiguate",!1),(0,r.default)(this,"events",{}),this.name=t,this.rawDisplayName=t,this.updateModifiedTime()}markOutOfBand(){this._isOutOfBand=!0}isOutOfBand(){return this._isOutOfBand}setMembershipEvent(e,t){var n,i;const r=null!==(n=e.getDirectionalContent().displayname)&&void 0!==n?n:"";if(e.getType()!==l.EventType.RoomMember)return;this._isOutOfBand=!1,this.events.member=e;const o=this.membership;this.membership=e.getDirectionalContent().membership,void 0===this.membership&&a.logger.trace(`membership event with membership undefined (forwardLooking: ${e.forwardLooking})!`,e.getContent(),"prevcontent is ",e.getPrevContent()),this.disambiguate=function(e,t,n){return!(!t||t===e)&&(!!s.removeHiddenChars(t)&&(!!n&&(!!p.test(t)||(!!f.test(t)||!!n.getUserIdsWithDisplayName(t).some((t=>t!==e))))))}(this.userId,r,t);const c=this.name;this.name=function(e,t,n){return t&&t!==e?n?s.removeDirectionOverrideChars(t)+" ("+e+")":s.removeHiddenChars(t)?s.removeDirectionOverrideChars(t):e:e}(this.userId,r,this.disambiguate),this.rawDisplayName=s.removeDirectionOverrideChars(null!==(i=e.getDirectionalContent().displayname)&&void 0!==i?i:""),this.rawDisplayName&&s.removeHiddenChars(this.rawDisplayName)||(this.rawDisplayName=this.userId),o!==this.membership&&(this.updateModifiedTime(),this.emit(d.Membership,e,this,o)),c!==this.name&&(this.updateModifiedTime(),this.emit(d.Name,e,this,c))}setPowerLevelEvent(e){if(e.getType()!==l.EventType.RoomPowerLevels||""!==e.getStateKey())return;const t=e.getDirectionalContent();let n=t.users_default||0;const i=t.users||{};Object.values(i).forEach((e=>{n=Math.max(n,e)}));const r=this.powerLevel,o=this.powerLevelNorm;void 0!==i[this.userId]&&Number.isInteger(i[this.userId])?this.powerLevel=i[this.userId]:void 0!==t.users_default?this.powerLevel=t.users_default:this.powerLevel=0,this.powerLevelNorm=0,n>0&&(this.powerLevelNorm=100*this.powerLevel/n),r===this.powerLevel&&o===this.powerLevelNorm||(this.updateModifiedTime(),this.emit(d.PowerLevel,e,this))}setTypingEvent(e){if("m.typing"!==e.getType())return;const t=this.typing;this.typing=!1;const n=e.getContent().user_ids;Array.isArray(n)&&(-1!==n.indexOf(this.userId)&&(this.typing=!0),t!==this.typing&&(this.updateModifiedTime(),this.emit(d.Typing,e,this)))}updateModifiedTime(){this.modified=Date.now()}getLastModifiedTime(){return this.modified}isKicked(){return"leave"===this.membership&&void 0!==this.events.member&&this.events.member.getSender()!==this.events.member.getStateKey()}getDMInviter(){if(this.events.member){const e=this.events.member;let t=e.getContent(),n=e.getSender();if("join"===t.membership&&(t=e.getPrevContent(),n=e.getUnsigned().prev_sender),"invite"===t.membership&&t.is_direct)return n}}getAvatarUrl(e,t,n,i,r=!0,s){const a=this.getMxcAvatarUrl();if(!a&&!r)return null;return(0,o.getHttpUriForMxc)(e,a,t,n,i,s)||null}getMxcAvatarUrl(){return this.events.member?this.events.member.getDirectionalContent().avatar_url:this.user?this.user.avatarUrl:void 0}}t.RoomMember=h;const p=/@.+:.+/,f=/[\u200E\u200F\u202A-\u202F]/},26860:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RoomStateEvent=t.RoomState=void 0;var r,o=i(n(59713)),s=n(32848),a=n(7434),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(3102)),l=n(42481),u=n(24369),d=n(44702),h=n(55861),p=n(26320),f=n(20771),m=n(85699);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let b;!function(e){e[e.NotStarted=0]="NotStarted",e[e.InProgress=1]="InProgress",e[e.Finished=2]="Finished"}(r||(r={})),t.RoomStateEvent=b,function(e){e.Events="RoomState.events",e.Members="RoomState.members",e.NewMember="RoomState.newMember",e.Update="RoomState.update",e.BeaconLiveness="RoomState.BeaconLiveness",e.Marker="RoomState.Marker"}(b||(t.RoomStateEvent=b={}));class E extends h.TypedEventEmitter{constructor(e,t={status:r.NotStarted}){super(),this.roomId=e,this.oobMemberFlags=t,(0,o.default)(this,"reEmitter",new f.TypedReEmitter(this)),(0,o.default)(this,"sentinels",{}),(0,o.default)(this,"displayNameToUserIds",new Map),(0,o.default)(this,"userIdsToDisplayNames",{}),(0,o.default)(this,"tokenToInvite",{}),(0,o.default)(this,"joinedMemberCount",null),(0,o.default)(this,"summaryJoinedMemberCount",null),(0,o.default)(this,"invitedMemberCount",null),(0,o.default)(this,"summaryInvitedMemberCount",null),(0,o.default)(this,"modified",-1),(0,o.default)(this,"members",{}),(0,o.default)(this,"events",new Map),(0,o.default)(this,"paginationToken",null),(0,o.default)(this,"beacons",new Map),(0,o.default)(this,"_liveBeaconIds",[]),this.updateModifiedTime()}getJoinedMemberCount(){return null!==this.summaryJoinedMemberCount?this.summaryJoinedMemberCount:(null===this.joinedMemberCount&&(this.joinedMemberCount=this.getMembers().reduce(((e,t)=>"join"===t.membership?e+1:e),0)),this.joinedMemberCount)}setJoinedMemberCount(e){this.summaryJoinedMemberCount=e}getInvitedMemberCount(){return null!==this.summaryInvitedMemberCount?this.summaryInvitedMemberCount:(null===this.invitedMemberCount&&(this.invitedMemberCount=this.getMembers().reduce(((e,t)=>"invite"===t.membership?e+1:e),0)),this.invitedMemberCount)}setInvitedMemberCount(e){this.summaryInvitedMemberCount=e}getMembers(){return Object.values(this.members)}getMembersExcept(e){return this.getMembers().filter((t=>!e.includes(t.userId)))}getMember(e){return this.members[e]||null}getSentinelMember(e){if(!e)return null;let t=this.sentinels[e];if(void 0===t){t=new s.RoomMember(this.roomId,e);const n=this.members[e];null!=n&&n.events.member&&t.setMembershipEvent(n.events.member,this),this.sentinels[e]=t}return t}getStateEvents(e,t){if(!this.events.has(e))return void 0===t?[]:null;if(void 0===t)return Array.from(this.events.get(e).values());return this.events.get(e).get(t)||null}get hasLiveBeacons(){var e;return!(null===(e=this.liveBeaconIds)||void 0===e||!e.length)}get liveBeaconIds(){return this._liveBeaconIds}clone(){const e=new E(this.roomId,this.oobMemberFlags),t=this.oobMemberFlags.status;return this.oobMemberFlags.status=r.NotStarted,Array.from(this.events.values()).forEach((t=>{e.setStateEvents(Array.from(t.values()))})),this.oobMemberFlags.status=t,null!==this.summaryInvitedMemberCount&&e.setInvitedMemberCount(this.getInvitedMemberCount()),null!==this.summaryJoinedMemberCount&&e.setJoinedMemberCount(this.getJoinedMemberCount()),this.oobMemberFlags.status==r.Finished&&this.getMembers().forEach((t=>{var n;t.isOutOfBand()&&(null===(n=e.getMember(t.userId))||void 0===n||n.markOutOfBand())})),e}setUnknownStateEvents(e){const t=e.filter((e=>!this.events.has(e.getType())||!this.events.get(e.getType()).has(e.getStateKey())));this.setStateEvents(t)}setStateEvents(e,t){this.updateModifiedTime(),e.forEach((e=>{if(e.getRoomId()!==this.roomId||!e.isState())return;m.M_BEACON_INFO.matches(e.getType())&&this.setBeacon(e);const t=this.getStateEventMatching(e);var n;this.setStateEvent(e),e.getType()===l.EventType.RoomMember&&(this.updateDisplayNameCache(e.getStateKey(),null!==(n=e.getContent().displayname)&&void 0!==n?n:""),this.updateThirdPartyTokenCache(e)),this.emit(b.Events,e,this,t)})),this.onBeaconLivenessChange(),e.forEach((e=>{if(e.getRoomId()===this.roomId&&e.isState())if(e.getType()===l.EventType.RoomMember){const t=e.getStateKey();"leave"!==e.getContent().membership&&"ban"!==e.getContent().membership||(e.getContent().avatar_url=e.getContent().avatar_url||e.getPrevContent().avatar_url,e.getContent().displayname=e.getContent().displayname||e.getPrevContent().displayname);const n=this.getOrCreateMember(t,e);n.setMembershipEvent(e,this),this.updateMember(n),this.emit(b.Members,e,this,n)}else if(e.getType()===l.EventType.RoomPowerLevels){if(""!==e.getStateKey())return;Object.values(this.members).forEach((t=>{const n=t.getLastModifiedTime();t.setPowerLevelEvent(e),n!==t.getLastModifiedTime()&&this.emit(b.Members,e,this,t)})),this.sentinels={}}else l.UNSTABLE_MSC2716_MARKER.matches(e.getType())&&this.emit(b.Marker,e,t)})),this.emit(b.Update,this)}processBeaconEvents(e,t){if(!e.length||!this.beacons.size)return;const n=[...this.beacons.values()].reduce(((e,t)=>y(y({},e),{},{[t.beaconInfoId]:t})),{}),i=(e,t)=>{if(!m.M_BEACON.matches(t.getType()))return;const i=n[e];i&&i.addLocations([t])};e.forEach((e=>{var r;const o=null===(r=e.getRelation())||void 0===r?void 0:r.event_id;o&&n[o]&&(t.decryptEventIfNeeded(e),e.isBeingDecrypted()||e.isDecryptionFailure()?e.once(u.MatrixEventEvent.Decrypted,(async()=>{i(o,e)})):i(o,e))}))}getOrCreateMember(e,t){let n=this.members[e];return n||(n=new s.RoomMember(this.roomId,e),this.members[e]=n,this.emit(b.NewMember,t,this,n)),n}setStateEvent(e){this.events.has(e.getType())||this.events.set(e.getType(),new Map),this.events.get(e.getType()).set(e.getStateKey(),e)}setBeacon(e){const t=(0,p.getBeaconInfoIdentifier)(e);if(this.beacons.has(t)){const i=this.beacons.get(t);var n;return e.isRedacted()?void(i.beaconInfoId===(null===(n=e.getRedactionEvent())||void 0===n?void 0:n.redacts)&&(i.destroy(),this.beacons.delete(t))):i.update(e)}if(e.isRedacted())return;const i=new p.Beacon(e);this.reEmitter.reEmit(i,[p.BeaconEvent.New,p.BeaconEvent.Update,p.BeaconEvent.Destroy,p.BeaconEvent.LivenessChange]),this.emit(p.BeaconEvent.New,e,i),i.on(p.BeaconEvent.LivenessChange,this.onBeaconLivenessChange.bind(this)),i.on(p.BeaconEvent.Destroy,this.onBeaconLivenessChange.bind(this)),this.beacons.set(i.identifier,i)}onBeaconLivenessChange(){this._liveBeaconIds=Array.from(this.beacons.values()).filter((e=>e.isLive)).map((e=>e.identifier)),this.emit(b.BeaconLiveness,this,this.hasLiveBeacons)}getStateEventMatching(e){var t,n;return null!==(t=null===(n=this.events.get(e.getType()))||void 0===n?void 0:n.get(e.getStateKey()))&&void 0!==t?t:null}updateMember(e){const t=this.getStateEvents(l.EventType.RoomPowerLevels,"");t&&e.setPowerLevelEvent(t),delete this.sentinels[e.userId],this.members[e.userId]=e,this.joinedMemberCount=null,this.invitedMemberCount=null}needsOutOfBandMembers(){return this.oobMemberFlags.status===r.NotStarted}markOutOfBandMembersStarted(){this.oobMemberFlags.status===r.NotStarted&&(this.oobMemberFlags.status=r.InProgress)}markOutOfBandMembersFailed(){this.oobMemberFlags.status===r.InProgress&&(this.oobMemberFlags.status=r.NotStarted)}clearOutOfBandMembers(){let e=0;Object.keys(this.members).forEach((t=>{this.members[t].isOutOfBand()&&(++e,delete this.members[t])})),a.logger.log(`LL: RoomState removed ${e} members...`),this.oobMemberFlags.status=r.NotStarted}setOutOfBandMembers(e){a.logger.log(`LL: RoomState about to set ${e.length} OOB members ...`),this.oobMemberFlags.status===r.InProgress&&(a.logger.log("LL: RoomState put in finished state ..."),this.oobMemberFlags.status=r.Finished,e.forEach((e=>this.setOutOfBandMember(e))),this.emit(b.Update,this))}setOutOfBandMember(e){if(e.getType()!==l.EventType.RoomMember)return;const t=e.getStateKey(),n=this.getMember(t);if(n&&!n.isOutOfBand())return;const i=this.getOrCreateMember(t,e);i.setMembershipEvent(e,this),i.markOutOfBand(),this.updateDisplayNameCache(i.userId,i.name),this.setStateEvent(e),this.updateMember(i),this.emit(b.Members,e,this,i)}setTypingEvent(e){Object.values(this.members).forEach((function(t){t.setTypingEvent(e)}))}getInviteForThreePidToken(e){return this.tokenToInvite[e]||null}updateModifiedTime(){this.modified=Date.now()}getLastModifiedTime(){return this.modified}getUserIdsWithDisplayName(e){var t;return null!==(t=this.displayNameToUserIds.get(c.removeHiddenChars(e)))&&void 0!==t?t:[]}maySendRedactionForEvent(e,t){const n=this.getMember(t);if(!n||"leave"===n.membership)return!1;if(e.status||e.isRedacted())return!1;const i=this.maySendEvent(l.EventType.RoomRedaction,t);return e.getSender()===t?i:this.hasSufficientPowerLevelFor("redact",n.powerLevel)}hasSufficientPowerLevelFor(e,t){const n=this.getStateEvents(l.EventType.RoomPowerLevels,"");let i={};n&&(i=n.getContent());let r=50;return c.isNumber(i[e])&&(r=i[e]),t>=r}maySendMessage(e){return this.maySendEventOfType(l.EventType.RoomMessage,e,!1)}maySendEvent(e,t){return this.maySendEventOfType(e,t,!1)}mayClientSendStateEvent(e,t){return!(t.isGuest()||!t.credentials.userId)&&this.maySendStateEvent(e,t.credentials.userId)}maySendStateEvent(e,t){return this.maySendEventOfType(e,t,!0)}maySendEventOfType(e,t,n){const i=this.getStateEvents(l.EventType.RoomPowerLevels,"");let r,o={},s=0,a=0,c=0;if(i){r=i.getContent(),o=r.events||{},s=Number.isSafeInteger(r.state_default)?r.state_default:50;const e=r.users&&r.users[t];Number.isSafeInteger(e)?c=e:Number.isSafeInteger(r.users_default)&&(c=r.users_default),Number.isSafeInteger(r.events_default)&&(a=r.events_default)}let u=n?s:a;return Number.isSafeInteger(o[e])&&(u=o[e]),c>=u}mayTriggerNotifOfType(e,t){const n=this.getMember(t);if(!n)return!1;const i=this.getStateEvents(l.EventType.RoomPowerLevels,"");let r=50;return i&&i.getContent()&&i.getContent().notifications&&c.isNumber(i.getContent().notifications[e])&&(r=i.getContent().notifications[e]),n.powerLevel>=r}getJoinRule(){var e;const t=this.getStateEvents(l.EventType.RoomJoinRules,"");return(null!==(e=null==t?void 0:t.getContent())&&void 0!==e?e:{}).join_rule||d.JoinRule.Invite}getHistoryVisibility(){var e;const t=this.getStateEvents(l.EventType.RoomHistoryVisibility,"");return(null!==(e=null==t?void 0:t.getContent())&&void 0!==e?e:{}).history_visibility||d.HistoryVisibility.Shared}getGuestAccess(){var e;const t=this.getStateEvents(l.EventType.RoomGuestAccess,"");return(null!==(e=null==t?void 0:t.getContent())&&void 0!==e?e:{}).guest_access||d.GuestAccess.Forbidden}updateThirdPartyTokenCache(e){if(!e.getContent().third_party_invite)return;const t=(e.getContent().third_party_invite.signed||{}).token;t&&this.getStateEvents(l.EventType.RoomThirdPartyInvite,t)&&(this.tokenToInvite[t]=e)}updateDisplayNameCache(e,t){const n=this.userIdsToDisplayNames[e];if(delete this.userIdsToDisplayNames[e],n){const t=c.removeHiddenChars(n),i=this.displayNameToUserIds.get(t);if(i){const n=i.filter((t=>t!==e));this.displayNameToUserIds.set(t,n)}}this.userIdsToDisplayNames[e]=t;const i=t&&c.removeHiddenChars(t);if(i){var r;const t=null!==(r=this.displayNameToUserIds.get(i))&&void 0!==r?r:[];t.push(e),this.displayNameToUserIds.set(i,t)}}}t.RoomState=E},65205:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RoomSummary=void 0,t.RoomSummary=class{constructor(e,t){this.roomId=e}}},27366:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RoomNameType=t.RoomEvent=t.Room=t.NotificationCountType=t.KNOWN_SAFE_ROOM_VERSION=void 0;var r=i(n(59713)),o=n(33705),s=n(88910),a=n(73667),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(3102)),l=n(24369),u=n(88881),d=n(32848),h=n(65205),p=n(7434),f=n(20771),m=n(42481),g=n(62168),v=n(27906),y=n(26860),b=n(26320),E=n(36969),S=n(95550),w=n(47286),_=n(82958),T=n(25268);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.KNOWN_SAFE_ROOM_VERSION="9";const k=["1","2","3","4","5","6","7","8","9"];let M,A;t.NotificationCountType=M,function(e){e.Highlight="highlight",e.Total="total"}(M||(t.NotificationCountType=M={})),t.RoomEvent=A,function(e){e.MyMembership="Room.myMembership",e.Tags="Room.tags",e.AccountData="Room.accountData",e.Receipt="Room.receipt",e.Name="Room.name",e.Redaction="Room.redaction",e.RedactionCancelled="Room.redactionCancelled",e.LocalEchoUpdated="Room.localEchoUpdated",e.Timeline="Room.timeline",e.TimelineReset="Room.timelineReset",e.TimelineRefresh="Room.TimelineRefresh",e.OldStateUpdated="Room.OldStateUpdated",e.CurrentStateUpdated="Room.CurrentStateUpdated",e.HistoryImportedWithinTimeline="Room.historyImportedWithinTimeline",e.UnreadNotifications="Room.UnreadNotifications"}(A||(t.RoomEvent=A={}));class O extends _.ReadReceipt{constructor(e,t,n,i={}){super(),this.roomId=e,this.client=t,this.myUserId=n,this.opts=i,(0,r.default)(this,"reEmitter",void 0),(0,r.default)(this,"txnToEvent",{}),(0,r.default)(this,"notificationCounts",{}),(0,r.default)(this,"threadNotifications",new Map),(0,r.default)(this,"timelineSets",void 0),(0,r.default)(this,"threadsTimelineSets",[]),(0,r.default)(this,"filteredTimelineSets",{}),(0,r.default)(this,"timelineNeedsRefresh",!1),(0,r.default)(this,"pendingEventList",void 0),(0,r.default)(this,"blacklistUnverifiedDevices",void 0),(0,r.default)(this,"selfMembership",void 0),(0,r.default)(this,"summaryHeroes",null),(0,r.default)(this,"getTypeWarning",!1),(0,r.default)(this,"getVersionWarning",!1),(0,r.default)(this,"membersPromise",void 0),(0,r.default)(this,"name",void 0),(0,r.default)(this,"normalizedName",void 0),(0,r.default)(this,"tags",{}),(0,r.default)(this,"accountData",{}),(0,r.default)(this,"summary",null),(0,r.default)(this,"timeline",void 0),(0,r.default)(this,"oldState",void 0),(0,r.default)(this,"currentState",void 0),(0,r.default)(this,"relations",new w.RelationsContainer(this.client,this)),(0,r.default)(this,"threads",new Map),(0,r.default)(this,"lastThread",void 0),(0,r.default)(this,"visibilityEvents",new Map),(0,r.default)(this,"threadTimelineSetsPromise",null),(0,r.default)(this,"threadsReady",!1),(0,r.default)(this,"updateThreadRootEvents",((e,t)=>{var n,i;e.length&&(this.updateThreadRootEvent(null===(n=this.threadsTimelineSets)||void 0===n?void 0:n[0],e,t),e.hasCurrentUserParticipated&&this.updateThreadRootEvent(null===(i=this.threadsTimelineSets)||void 0===i?void 0:i[1],e,t))})),(0,r.default)(this,"updateThreadRootEvent",((e,t,n)=>{e&&t.rootEvent&&(E.Thread.hasServerSideSupport?e.addLiveEvent(t.rootEvent,{duplicateStrategy:o.DuplicateStrategy.Replace,fromCache:!1,roomState:this.currentState}):e.addEventToTimeline(t.rootEvent,e.getLiveTimeline(),{toStartOfTimeline:n}))})),(0,r.default)(this,"applyRedaction",(e=>{if(e.isRedaction()){const t=e.event.redacts,n=t?this.findEventById(t):void 0;if(n){if(n.makeRedacted(e),n.isState()){const e=this.currentState.getStateEvents(n.getType(),n.getStateKey());(null==e?void 0:e.getId())===n.getId()&&this.currentState.setStateEvents([n])}this.emit(A.Redaction,e,this),this.visibilityEvents.delete(t),n.isVisibilityEvent()&&this.redactVisibilityChangeEvent(e)}}})),this.setMaxListeners(100),this.reEmitter=new f.TypedReEmitter(this),i.pendingEventOrdering=i.pendingEventOrdering||g.PendingEventOrdering.Chronological,this.name=e,this.normalizedName=e,this.timelineSets=[new o.EventTimelineSet(this,i)],this.reEmitter.reEmit(this.getUnfilteredTimelineSet(),[A.Timeline,A.TimelineReset]),this.fixUpLegacyTimelineFields(),this.opts.pendingEventOrdering===g.PendingEventOrdering.Detached&&(this.pendingEventList=[],this.client.store.getPendingEvents(this.roomId).then((e=>{const t=this.client.getEventMapper({toDevice:!1,decrypt:!1});e.forEach((async e=>{const n=t(e);n.getType()===m.EventType.RoomMessageEncrypted&&this.client.isCryptoEnabled()&&await n.attemptDecryption(this.client.crypto),n.setStatus(u.EventStatus.NOT_SENT),this.addPendingEvent(n,n.getTxnId())}))}))),this.opts.lazyLoadMembers?this.membersPromise=void 0:this.membersPromise=Promise.resolve(!1)}async createThreadsTimelineSets(){var e;if(this.threadTimelineSetsPromise)return this.threadTimelineSetsPromise;if(null!==(e=this.client)&&void 0!==e&&e.supportsExperimentalThreads())try{this.threadTimelineSetsPromise=Promise.all([this.createThreadTimelineSet(),this.createThreadTimelineSet(E.ThreadFilterType.My)]);const e=await this.threadTimelineSetsPromise;return this.threadsTimelineSets.push(...e),e}catch(e){return this.threadTimelineSetsPromise=null,null}return null}async decryptCriticalEvents(){if(!this.client.isCryptoEnabled())return;const e=this.getEventReadUpTo(this.client.getUserId(),!0),t=this.getLiveTimeline().getEvents(),n=t.findIndex((t=>t.event.event_id===e)),i=t.slice(n).filter((e=>e.shouldAttemptDecryption())).reverse().map((e=>e.attemptDecryption(this.client.crypto,{isRetry:!0})));await Promise.allSettled(i)}async decryptAllEvents(){if(!this.client.isCryptoEnabled())return;const e=this.getUnfilteredTimelineSet().getLiveTimeline().getEvents().filter((e=>e.shouldAttemptDecryption())).reverse().map((e=>e.attemptDecryption(this.client.crypto,{isRetry:!0})));await Promise.allSettled(e)}getCreator(){var e;const t=this.currentState.getStateEvents(m.EventType.RoomCreate,"");return null!==(e=null==t?void 0:t.getContent().creator)&&void 0!==e?e:null}getVersion(){var e;const t=this.currentState.getStateEvents(m.EventType.RoomCreate,"");return t?null!==(e=t.getContent().room_version)&&void 0!==e?e:"1":(this.getVersionWarning||(p.logger.warn("[getVersion] Room "+this.roomId+" does not have an m.room.create event"),this.getVersionWarning=!0),"1")}shouldUpgradeToVersion(){return k.includes(this.getVersion())?null:"9"}async getRecommendedVersion(){let e=(await this.client.getCapabilities())["m.room_versions"];if(!e){e={default:"9",available:{}};for(const t of k)e.available[t]=g.RoomVersionStability.Stable}let t=this.checkVersionAgainstCapability(e);if(t.urgent&&t.needsUpgrade){if(p.logger.warn("Refreshing room version capability because the server looks to be supporting a newer room version we don't know about."),e=(await this.client.getCapabilities(!0))["m.room_versions"],!e)return p.logger.warn("No room version capability - assuming upgrade required."),t;t=this.checkVersionAgainstCapability(e)}return t}checkVersionAgainstCapability(e){const t=this.getVersion();p.logger.log(`[${this.roomId}] Current version: ${t}`),p.logger.log(`[${this.roomId}] Version capability: `,e);const n={version:t,needsUpgrade:!1,urgent:!1};return t===e.default||Object.keys(e.available).filter((t=>"stable"===e.available[t])).includes(t)||(n.version=e.default,n.needsUpgrade=!0,n.urgent=!!this.getVersion().match(/^[0-9]+[0-9.]*$/g),n.urgent?p.logger.warn(`URGENT upgrade required on ${this.roomId}`):p.logger.warn(`Non-urgent upgrade required on ${this.roomId}`)),n}userMayUpgradeRoom(e){return this.currentState.maySendStateEvent(m.EventType.RoomTombstone,e)}getPendingEvents(){if(!this.pendingEventList)throw new Error("Cannot call getPendingEvents with pendingEventOrdering == "+this.opts.pendingEventOrdering);return this.pendingEventList}removePendingEvent(e){if(!this.pendingEventList)throw new Error("Cannot call removePendingEvent with pendingEventOrdering == "+this.opts.pendingEventOrdering);const t=c.removeElement(this.pendingEventList,(function(t){return t.getId()==e}),!1);return this.savePendingEvents(),t}hasPendingEvent(e){var t,n;return null!==(t=null===(n=this.pendingEventList)||void 0===n?void 0:n.some((t=>t.getId()===e)))&&void 0!==t&&t}getPendingEvent(e){var t,n;return null!==(t=null===(n=this.pendingEventList)||void 0===n?void 0:n.find((t=>t.getId()===e)))&&void 0!==t?t:null}getLiveTimeline(){return this.getUnfilteredTimelineSet().getLiveTimeline()}getLastActiveTimestamp(){const e=this.getLiveTimeline().getEvents();return e.length?e[e.length-1].getTs():Number.MIN_SAFE_INTEGER}getMyMembership(){var e;return null!==(e=this.selfMembership)&&void 0!==e?e:"leave"}getDMInviter(){const e=this.getMember(this.myUserId);if(e)return e.getDMInviter();var t;if("invite"===this.selfMembership&&2===this.getInvitedAndJoinedMemberCount())return null===(t=this.summaryHeroes)||void 0===t?void 0:t[0]}guessDMUserId(){const e=this.getMember(this.myUserId);if(e){const t=e.getDMInviter();if(t)return t}if(Array.isArray(this.summaryHeroes)&&this.summaryHeroes.length)return this.summaryHeroes[0];const t=this.currentState.getMembers().find((e=>e.userId!==this.myUserId));return t?t.userId:this.myUserId}getAvatarFallbackMember(){if(this.getInvitedAndJoinedMemberCount()>2)return;const e=Array.isArray(this.summaryHeroes)&&this.summaryHeroes.length;if(e){const e=this.summaryHeroes.map((e=>this.getMember(e))).find((e=>!!e));if(e)return e}const t=this.currentState.getMembers();if(t.length<=2){const e=t.find((e=>e.userId!==this.myUserId));if(e)return e}if(e){const e=this.summaryHeroes.map((e=>this.client.getUser(e))).find((e=>!!e));if(e){const t=new d.RoomMember(this.roomId,e.userId);return t.user=e,t}}}updateMyMembership(e){const t=this.selfMembership;this.selfMembership=e,t!==e&&("leave"===e&&this.cleanupAfterLeaving(),this.emit(A.MyMembership,this,e,t))}async loadMembersFromServer(){const e=this.client.store.getSyncToken();return(await this.client.members(this.roomId,void 0,"leave",null!=e?e:void 0)).chunk}async loadMembers(){let e=!1,t=await this.client.store.getOutOfBandMembers(this.roomId);return(null===t||this.client.isCryptoEnabled()&&this.client.isRoomEncrypted(this.roomId))&&(e=!0,t=await this.loadMembersFromServer(),p.logger.log(`LL: got ${t.length} members from server for room ${this.roomId}`)),{memberEvents:t.map(this.client.getEventMapper()),fromServer:e}}loadMembersIfNeeded(){if(this.membersPromise)return this.membersPromise;this.currentState.markOutOfBandMembersStarted();const e=this.loadMembers().then((e=>(this.currentState.setOutOfBandMembers(e.memberEvents),this.client.isCryptoEnabled()&&this.client.isRoomEncrypted(this.roomId)&&this.client.crypto.trackRoomDevices(this.roomId),e.fromServer))).catch((e=>{throw this.membersPromise=void 0,this.currentState.markOutOfBandMembersFailed(),e}));return e.then((e=>{if(e){const e=this.currentState.getMembers().filter((e=>e.isOutOfBand())).map((e=>{var t;return null===(t=e.events.member)||void 0===t?void 0:t.event}));return p.logger.log(`LL: telling store to write ${e.length} members for room ${this.roomId}`),this.client.store.setOutOfBandMembers(this.roomId,e).catch((e=>{p.logger.log("LL: storing OOB room members failed, oh well",e)}))}})).catch((e=>{p.logger.error(e)})),this.membersPromise=e,this.membersPromise}async clearLoadedMembersIfNeeded(){this.opts.lazyLoadMembers&&this.membersPromise&&(await this.loadMembersIfNeeded(),await this.client.store.clearOutOfBandMembers(this.roomId),this.currentState.clearOutOfBandMembers(),this.membersPromise=void 0)}cleanupAfterLeaving(){this.clearLoadedMembersIfNeeded().catch((e=>{p.logger.error(`error after clearing loaded members from room ${this.roomId} after leaving`),p.logger.log(e)}))}async refreshLiveTimeline(){const e=this.getLiveTimeline(),t=e.getPaginationToken(s.EventTimeline.FORWARDS),n=e.getPaginationToken(s.EventTimeline.BACKWARDS),i=e.getEvents(),r=i[i.length-1];p.logger.log(`[refreshLiveTimeline for ${this.roomId}] at mostRecentEventInTimeline=${r&&r.getId()} liveTimelineBefore=${e.toString()} forwardPaginationToken=${t} backwardPaginationToken=${n}`);const o=this.getUnfilteredTimelineSet();let a;r?(this.resetLiveTimeline(null,null),this.emit(A.TimelineRefresh,this,o),a=await this.client.getEventTimeline(o,r.getId())):a=await this.client.getLatestTimeline(o);const c=o.getLiveTimeline();!c||null===c.getPaginationToken(s.Direction.Forward)&&null===c.getPaginationToken(s.Direction.Backward)&&0===c.getEvents().length?(p.logger.log(`[refreshLiveTimeline for ${this.roomId}] using our new live timeline`),a.setPaginationToken(t,s.EventTimeline.FORWARDS),o.setLiveTimeline(a),this.fixUpLegacyTimelineFields()):p.logger.log(`[refreshLiveTimeline for ${this.roomId}] \`/sync\` or some other request beat us to creating a new live timeline after we reset it. We'll use that instead since any events in the scrollback from this timeline will include the history.`),this.setTimelineNeedsRefresh(!1),this.emit(A.TimelineRefresh,this,o)}resetLiveTimeline(e,t){for(const n of this.timelineSets)n.resetLiveTimeline(null!=e?e:void 0,null!=t?t:void 0);this.fixUpLegacyTimelineFields()}fixUpLegacyTimelineFields(){const e=this.oldState,t=this.currentState;this.timeline=this.getLiveTimeline().getEvents(),this.oldState=this.getLiveTimeline().getState(s.EventTimeline.BACKWARDS),this.currentState=this.getLiveTimeline().getState(s.EventTimeline.FORWARDS),e!==this.oldState&&this.emit(A.OldStateUpdated,this,e,this.oldState),t!==this.currentState&&(this.emit(A.CurrentStateUpdated,this,t,this.currentState),this.reEmitter.stopReEmitting(t,[y.RoomStateEvent.Events,y.RoomStateEvent.Members,y.RoomStateEvent.NewMember,y.RoomStateEvent.Update,y.RoomStateEvent.Marker,b.BeaconEvent.New,b.BeaconEvent.Update,b.BeaconEvent.Destroy,b.BeaconEvent.LivenessChange]),this.reEmitter.reEmit(this.currentState,[y.RoomStateEvent.Events,y.RoomStateEvent.Members,y.RoomStateEvent.NewMember,y.RoomStateEvent.Update,y.RoomStateEvent.Marker,b.BeaconEvent.New,b.BeaconEvent.Update,b.BeaconEvent.Destroy,b.BeaconEvent.LivenessChange]))}async hasUnverifiedDevices(){if(!this.client.isRoomEncrypted(this.roomId))return!1;const e=await this.getEncryptionTargetMembers();for(const t of e)if(this.client.getStoredDevicesForUser(t.userId).some((e=>e.isUnverified())))return!0;return!1}getTimelineSets(){return this.timelineSets}getUnfilteredTimelineSet(){return this.timelineSets[0]}getTimelineForEvent(e){const t=this.findEventById(e),n=this.findThreadForEvent(t);return n?n.timelineSet.getLiveTimeline():this.getUnfilteredTimelineSet().getTimelineForEvent(e)}addTimeline(){return this.getUnfilteredTimelineSet().addTimeline()}setTimelineNeedsRefresh(e){this.timelineNeedsRefresh=e}getTimelineNeedsRefresh(){return this.timelineNeedsRefresh}findEventById(e){let t=this.getUnfilteredTimelineSet().findEventById(e);if(!t){const n=this.getThreads();for(let i=0;i<n.length;i++)if(t=n[i].findEventById(e),t)return t}return t}getUnreadNotificationCount(e=M.Total){let t=this.getRoomUnreadNotificationCount(e);if(this.client.canSupport.get(T.Feature.ThreadUnreadNotifications)!==T.ServerSupport.Unsupported)for(const i of this.threadNotifications.values()){var n;t+=null!==(n=i[e])&&void 0!==n?n:0}return t}getUnreadCountForEventContext(e=M.Total,t){var n;return null!==(n=t.threadRootId&&!t.isThreadRoot?this.getThreadUnreadNotificationCount(t.threadRootId,e):this.getRoomUnreadNotificationCount(e))&&void 0!==n?n:0}getRoomUnreadNotificationCount(e=M.Total){var t;return null!==(t=this.notificationCounts[e])&&void 0!==t?t:0}getThreadUnreadNotificationCount(e,t=M.Total){var n,i;return null!==(n=null===(i=this.threadNotifications.get(e))||void 0===i?void 0:i[t])&&void 0!==n?n:0}hasThreadUnreadNotification(){for(const n of this.threadNotifications.values()){var e,t;if((null!==(e=n.highlight)&&void 0!==e?e:0)>0||(null!==(t=n.total)&&void 0!==t?t:0)>0)return!0}return!1}setThreadUnreadNotificationCount(e,t,n){var i,r;const o=I({highlight:null===(i=this.threadNotifications.get(e))||void 0===i?void 0:i.highlight,total:null===(r=this.threadNotifications.get(e))||void 0===r?void 0:r.total},{[t]:n});this.threadNotifications.set(e,o),this.emit(A.UnreadNotifications,o,e)}get threadsAggregateNotificationType(){let e=null;for(const i of this.threadNotifications.values()){var t,n;if((null!==(t=i.highlight)&&void 0!==t?t:0)>0)return M.Highlight;(null!==(n=i.total)&&void 0!==n?n:0)>0&&!e&&(e=M.Total)}return e}resetThreadUnreadNotificationCount(e){if(e)for(const[t]of this.threadNotifications)e.includes(t)||this.threadNotifications.delete(t);else this.threadNotifications.clear();this.emit(A.UnreadNotifications)}setUnreadNotificationCount(e,t){this.notificationCounts[e]=t,this.emit(A.UnreadNotifications,this.notificationCounts)}setSummary(e){const t=e["m.heroes"],n=e["m.joined_member_count"],i=e["m.invited_member_count"];Number.isInteger(n)&&this.currentState.setJoinedMemberCount(n),Number.isInteger(i)&&this.currentState.setInvitedMemberCount(i),Array.isArray(t)&&(this.summaryHeroes=t.filter((e=>e!==this.myUserId)))}setBlacklistUnverifiedDevices(e){this.blacklistUnverifiedDevices=e}getBlacklistUnverifiedDevices(){return void 0===this.blacklistUnverifiedDevices?null:this.blacklistUnverifiedDevices}getAvatarUrl(e,t,n,i,r=!0){const o=this.currentState.getStateEvents(m.EventType.RoomAvatar,"");if(!o&&!r)return null;const s=o?o.getContent().url:null;return s?(0,a.getHttpUriForMxc)(e,s,t,n,i):null}getMxcAvatarUrl(){var e,t;return(null===(e=this.currentState.getStateEvents(m.EventType.RoomAvatar,""))||void 0===e||null===(t=e.getContent())||void 0===t?void 0:t.url)||null}getCanonicalAlias(){const e=this.currentState.getStateEvents(m.EventType.RoomCanonicalAlias,"");return e&&e.getContent().alias||null}getAltAliases(){const e=this.currentState.getStateEvents(m.EventType.RoomCanonicalAlias,"");return e&&e.getContent().alt_aliases||[]}addEventsToTimeline(e,t,n,i){n.getTimelineSet().addEventsToTimeline(e,t,n,i)}getThread(e){var t;return null!==(t=this.threads.get(e))&&void 0!==t?t:null}getThreads(){return Array.from(this.threads.values())}getMember(e){return this.currentState.getMember(e)}getMembers(){return this.currentState.getMembers()}getJoinedMembers(){return this.getMembersWithMembership("join")}getJoinedMemberCount(){return this.currentState.getJoinedMemberCount()}getInvitedMemberCount(){return this.currentState.getInvitedMemberCount()}getInvitedAndJoinedMemberCount(){return this.getInvitedMemberCount()+this.getJoinedMemberCount()}getMembersWithMembership(e){return this.currentState.getMembers().filter((function(t){return t.membership===e}))}async getEncryptionTargetMembers(){await this.loadMembersIfNeeded();let e=this.getMembersWithMembership("join");return this.shouldEncryptForInvitedMembers()&&(e=e.concat(this.getMembersWithMembership("invite"))),e}shouldEncryptForInvitedMembers(){var e;const t=this.currentState.getStateEvents(m.EventType.RoomHistoryVisibility,"");return"joined"!==(null==t||null===(e=t.getContent())||void 0===e?void 0:e.history_visibility)}getDefaultRoomName(e){return this.calculateRoomName(e,!0)}hasMembershipState(e,t){const n=this.getMember(e);return!!n&&n.membership===t}getOrCreateFilteredTimelineSet(e,{prepopulateTimeline:t=!0,useSyncEvents:n=!0,pendingEvents:i=!0}={}){if(this.filteredTimelineSets[e.filterId])return this.filteredTimelineSets[e.filterId];const r=Object.assign({filter:e,pendingEvents:i},this.opts),a=new o.EventTimelineSet(this,r);this.reEmitter.reEmit(a,[A.Timeline,A.TimelineReset]),n&&(this.filteredTimelineSets[e.filterId]=a,this.timelineSets.push(a));const c=this.getLiveTimeline();if(t){c.getEvents().forEach((function(e){a.addLiveEvent(e)}));let e=c;for(;e.getNeighbouringTimeline(s.EventTimeline.BACKWARDS);)e=e.getNeighbouringTimeline(s.EventTimeline.BACKWARDS);a.getLiveTimeline().setPaginationToken(e.getPaginationToken(s.EventTimeline.BACKWARDS),s.EventTimeline.BACKWARDS)}else if(n){const e=c.getPaginationToken(s.Direction.Forward);a.getLiveTimeline().setPaginationToken(e,s.Direction.Backward)}return a}async getThreadListFilter(e=E.ThreadFilterType.All){const t=this.client.getUserId(),n=new v.Filter(t),i={room:{timeline:{[E.FILTER_RELATED_BY_REL_TYPES.name]:[E.THREAD_RELATION_TYPE.name]}}};e===E.ThreadFilterType.My&&(i.room.timeline[E.FILTER_RELATED_BY_SENDERS.name]=[t]),n.setDefinition(i);const r=await this.client.getOrCreateFilter(`THREAD_PANEL_${this.roomId}_${e}`,n);return n.filterId=r,n}async createThreadTimelineSet(e){let t;if(E.Thread.hasServerSideListSupport)t=new o.EventTimelineSet(this,I(I({},this.opts),{},{pendingEvents:!1}),void 0,void 0,null!=e?e:E.ThreadFilterType.All),this.reEmitter.reEmit(t,[A.Timeline,A.TimelineReset]);else if(E.Thread.hasServerSideSupport){const n=await this.getThreadListFilter(e);t=this.getOrCreateFilteredTimelineSet(n,{prepopulateTimeline:!1,useSyncEvents:!1,pendingEvents:!1})}else t=new o.EventTimelineSet(this,{pendingEvents:!1}),Array.from(this.threads).forEach((([,n])=>{if(0===n.length)return;const i=n.timeline.some((e=>e.getSender()===this.client.getUserId()));(e!==E.ThreadFilterType.My||i)&&t.getLiveTimeline().addEvent(n.rootEvent,{toStartOfTimeline:!1})}));return t}processThreadRoots(e,t){for(const n of e)s.EventTimeline.setEventMetadata(n,this.currentState,t),this.getThread(n.getId())||this.createThread(n.getId(),n,[],t)}async fetchRoomThreads(){if(!this.threadsReady&&this.client.supportsExperimentalThreads()){if(E.Thread.hasServerSideListSupport)await Promise.all([this.fetchRoomThreadList(E.ThreadFilterType.All),this.fetchRoomThreadList(E.ThreadFilterType.My)]);else{const n=await this.getThreadListFilter(),{chunk:i}=await this.client.createMessagesRequest(this.roomId,"",Number.MAX_SAFE_INTEGER,s.Direction.Backward,n);if(!i.length)return;const r=i.map(this.client.getEventMapper()).sort(((e,t)=>{const n=e.getServerAggregatedRelation(E.THREAD_RELATION_TYPE.name),i=t.getServerAggregatedRelation(E.THREAD_RELATION_TYPE.name);return n.latest_event.origin_server_ts-i.latest_event.origin_server_ts}));let a;const c=this.getLiveTimeline().getState(s.EventTimeline.FORWARDS);for(const n of r){var e;const i={duplicateStrategy:o.DuplicateStrategy.Ignore,fromCache:!1,roomState:c};null===(e=this.threadsTimelineSets[0])||void 0===e||e.addLiveEvent(n,i);const r=n.getServerAggregatedRelation(E.THREAD_RELATION_TYPE.name);var t;null!=r&&r.current_user_participated&&(null===(t=this.threadsTimelineSets[1])||void 0===t||t.addLiveEvent(n,i),a=n)}this.processThreadRoots(r,!0),this.client.decryptEventIfNeeded(r[r.length-1]),a&&this.client.decryptEventIfNeeded(a)}this.on(E.ThreadEvent.NewReply,this.onThreadNewReply),this.on(E.ThreadEvent.Delete,this.onThreadDelete),this.threadsReady=!0}}async fetchRoomThreadList(e){const t=e===E.ThreadFilterType.My?this.threadsTimelineSets[1]:this.threadsTimelineSets[0],{chunk:n,end:i}=await this.client.createThreadListMessagesRequest(this.roomId,null,void 0,s.Direction.Backward,t.threadListType,t.getFilter());if(t.getLiveTimeline().setPaginationToken(i,s.Direction.Backward),!n.length)return;const r=n.map(this.client.getEventMapper());this.processThreadRoots(r,!0);const a=this.getLiveTimeline().getState(s.EventTimeline.FORWARDS);for(const e of r)t.addLiveEvent(e,{duplicateStrategy:o.DuplicateStrategy.Replace,fromCache:!1,roomState:a})}onThreadNewReply(e){this.updateThreadRootEvents(e,!1)}onThreadDelete(e){var t;this.threads.delete(e.id);const n=this.getTimelineForEvent(e.id),i=null==n||null===(t=n.getEvents())||void 0===t?void 0:t.find((t=>t.getId()===e.id));i?e.clearEventMetadata(i):p.logger.debug("onThreadDelete: Could not find root event in room timeline");for(const t of this.threadsTimelineSets)t.removeEvent(e.id)}removeFilteredTimelineSet(e){const t=this.filteredTimelineSets[e.filterId];delete this.filteredTimelineSets[e.filterId];const n=this.timelineSets.indexOf(t);n>-1&&this.timelineSets.splice(n,1)}eventShouldLiveIn(e,t,n){var i,r;if(null===(i=this.client)||void 0===i||!i.supportsExperimentalThreads())return{shouldLiveInRoom:!0,shouldLiveInThread:!1};if(e.isThreadRoot||null!=n&&n.has(e.getId()))return{shouldLiveInRoom:!0,shouldLiveInThread:!0,threadId:e.getId()};if(e.isRelation(E.THREAD_RELATION_TYPE.name))return{shouldLiveInRoom:!1,shouldLiveInThread:!0,threadId:e.threadRootId};const o=e.getAssociatedId(),s=null!==(r=this.findEventById(o))&&void 0!==r?r:null==t?void 0:t.find((e=>e.getId()===o));return s&&(e.isRelation()||e.isRedaction())?this.eventShouldLiveIn(s,t,n):null!=n&&n.has(e.relationEventId)?{shouldLiveInRoom:!0,shouldLiveInThread:!0,threadId:e.relationEventId}:{shouldLiveInRoom:!0,shouldLiveInThread:!1}}findThreadForEvent(e){if(!e)return null;const{threadId:t}=this.eventShouldLiveIn(e);return t?this.getThread(t):null}addThreadedEvents(e,t,n=!1){let i=this.getThread(e);if(!i){var r;const o=null!==(r=this.findEventById(e))&&void 0!==r?r:t.find((t=>t.getId()===e));i=this.createThread(e,o,t,n)}i.addEvents(t,n)}processThreadedEvents(e,t){e.forEach(this.applyRedaction);const n={};for(const t of e){var i;const{threadId:e,shouldLiveInThread:r}=this.eventShouldLiveIn(t);r&&!n[e]&&(n[e]=[]),null===(i=n[e])||void 0===i||i.push(t)}Object.entries(n).map((([e,n])=>this.addThreadedEvents(e,n,t)))}createThread(e,t,n=[],i){var r,o;if(t){const e=this.relations.getAllChildEventsForEvent(t.getId());null!=e&&e.length&&(n=n.concat(e.filter((e=>!e.isRelation(m.RelationType.Replace)))))}const s=new E.Thread(e,t,{room:this,client:this.client});for(const e of n)s.setEventMetadata(e);this.threads.set(s.id,s),this.reEmitter.reEmit(s,[E.ThreadEvent.Delete,E.ThreadEvent.Update,E.ThreadEvent.NewReply,A.Timeline,A.TimelineReset]);const a=(null===(r=this.lastThread)||void 0===r?void 0:r.rootEvent)&&(null==t?void 0:t.localTimestamp)&&(null===(o=this.lastThread.rootEvent)||void 0===o?void 0:o.localTimestamp)<(null==t?void 0:t.localTimestamp);return this.lastThread&&!a||(this.lastThread=s),this.threadsReady&&this.updateThreadRootEvents(s,i),this.emit(E.ThreadEvent.New,s,i),s}processLiveEvent(e){if(this.applyRedaction(e),e.isVisibilityEvent()&&this.applyNewVisibilityEvent(e),this.applyPendingVisibilityEvents(e),!e.getUnsigned().transaction_id&&e.getSender()===this.myUserId)for(const t in this.txnToEvent)if(this.txnToEvent[t].getId()===e.getId()){p.logger.debug("processLiveEvent: found sent event without txn ID: ",t,e.getId());const n=e.getUnsigned();n.transaction_id=t,e.setUnsigned(n);break}}addLiveEvent(e,t){const{duplicateStrategy:n,timelineWasEmpty:i,fromCache:r}=t;for(const t of this.timelineSets)t.addLiveEvent(e,{duplicateStrategy:n,fromCache:r,timelineWasEmpty:i});e.sender&&e.getType()!==m.EventType.RoomRedaction&&this.addReceipt((0,_.synthesizeReceipt)(e.sender.userId,e,S.ReceiptType.Read),!0)}addPendingEvent(e,t){if(e.status!==u.EventStatus.SENDING&&e.status!==u.EventStatus.NOT_SENT)throw new Error("addPendingEvent called on an event with status "+e.status);if(this.txnToEvent[t])throw new Error("addPendingEvent called on an event with known txnId "+t);if(s.EventTimeline.setEventMetadata(e,this.getLiveTimeline().getState(s.EventTimeline.FORWARDS),!1),this.txnToEvent[t]=e,this.pendingEventList){if(this.pendingEventList.some((e=>e.status===u.EventStatus.NOT_SENT))&&(p.logger.warn("Setting event as NOT_SENT due to messages in the same state"),e.setStatus(u.EventStatus.NOT_SENT)),this.pendingEventList.push(e),this.savePendingEvents(),e.isRelation()&&this.aggregateNonLiveRelation(e),e.isRedaction()){const t=e.event.redacts;let n=this.pendingEventList.find((e=>e.getId()===t));!n&&t&&(n=this.findEventById(t)),n&&(n.markLocallyRedacted(e),this.emit(A.Redaction,e,this))}}else for(const t of this.timelineSets)t.getFilter()?t.getFilter().filterRoomTimeline([e]).length&&t.addEventToTimeline(e,t.getLiveTimeline(),{toStartOfTimeline:!1}):t.addEventToTimeline(e,t.getLiveTimeline(),{toStartOfTimeline:!1});this.emit(A.LocalEchoUpdated,e,this)}savePendingEvents(){if(this.pendingEventList){const e=this.pendingEventList.map((e=>I(I({},e.event),{},{txn_id:e.getTxnId()}))).filter((e=>{const t=e.type===m.EventType.RoomMessageEncrypted,n=this.client.isRoomEncrypted(this.roomId);return t||!n}));this.client.store.setPendingEvents(this.roomId,e)}}aggregateNonLiveRelation(e){this.relations.aggregateChildEvent(e)}getEventForTxnId(e){return this.txnToEvent[e]}handleRemoteEcho(e,t){const n=t.getId(),i=e.getId(),r=t.status;p.logger.debug(`Got remote echo for event ${n} -> ${i} old status ${r}`),delete this.txnToEvent[e.getUnsigned().transaction_id],this.pendingEventList&&this.removePendingEvent(n),t.handleRemoteEcho(e.event);const{shouldLiveInRoom:o,threadId:s}=this.eventShouldLiveIn(e),a=s?this.getThread(s):null;if(null==a||a.timelineSet.handleRemoteEcho(t,n,i),o)for(const e of this.timelineSets)e.handleRemoteEcho(t,n,i);this.emit(A.LocalEchoUpdated,t,this,n,r)}updatePendingEvent(e,t,n){if(p.logger.log(`setting pendingEvent status to ${t} in ${e.getRoomId()} event ID ${e.getId()} -> ${n}`),t==u.EventStatus.SENT&&!n)throw new Error("updatePendingEvent called with status=SENT, but no new event id");if(t==u.EventStatus.SENT&&this.getTimelineForEvent(n)){const t=this.findEventById(n);if(!(null==t?void 0:t.getUnsigned().transaction_id)&&t){const n=t.getUnsigned();n.transaction_id=e.getTxnId(),t.setUnsigned(n),this.removeEvent(t.getId()),this.handleRemoteEcho(t,e)}return}const i=e.status,r=e.getId();if(!i)throw new Error("updatePendingEventStatus called on an event which is not a local echo.");const o=R[i];if(null==o||!o.includes(t))throw new Error(`Invalid EventStatus transition ${i}->${t}`);if(e.setStatus(t),t==u.EventStatus.SENT){e.replaceLocalEventId(n);const{shouldLiveInRoom:t,threadId:i}=this.eventShouldLiveIn(e),o=i?this.getThread(i):void 0;if(null==o||o.timelineSet.replaceEventId(r,n),t)for(const e of this.timelineSets)e.replaceEventId(r,n)}else if(t==u.EventStatus.CANCELLED){if(this.pendingEventList){const e=this.getPendingEvent(r);this.removePendingEvent(r),null!=e&&e.isRedaction()&&this.revertRedactionLocalEcho(e)}this.removeEvent(r)}this.savePendingEvents(),this.emit(A.LocalEchoUpdated,e,this,r,i)}revertRedactionLocalEcho(e){const t=e.event.redacts;if(!t)return;const n=this.getUnfilteredTimelineSet().findEventById(t);n&&(n.unmarkLocallyRedacted(),this.emit(A.RedactionCancelled,e,this),n.isRelation()&&this.aggregateNonLiveRelation(n))}addLiveEvents(e,t,n=!1){let i=t,r=!1;if("object"==typeof t?({duplicateStrategy:i,fromCache:n=!1,timelineWasEmpty:r}=t):void 0!==t&&p.logger.warn("Overload deprecated: `Room.addLiveEvents(events, duplicateStrategy?, fromCache?)` is deprecated in favor of the overload with `Room.addLiveEvents(events, IAddLiveEventOptions)`"),i&&-1===["replace","ignore"].indexOf(i))throw new Error("duplicateStrategy MUST be either 'replace' or 'ignore'");for(let e=0;e<this.timelineSets.length;e++){const t=this.timelineSets[e].getLiveTimeline();if(t.getPaginationToken(s.EventTimeline.FORWARDS))throw new Error("live timeline "+e+" is no longer live - it has a pagination token ("+t.getPaginationToken(s.EventTimeline.FORWARDS)+")");if(t.getNeighbouringTimeline(s.EventTimeline.FORWARDS))throw new Error(`live timeline ${e} is no longer live - it has a neighbouring timeline`)}const o=this.findThreadRoots(e),a={},c={duplicateStrategy:i,fromCache:n,timelineWasEmpty:r};for(const t of e){var l;if(this.processLiveEvent(t),t.getUnsigned().transaction_id){const e=this.txnToEvent[t.getUnsigned().transaction_id];if(e){this.handleRemoteEcho(t,e);continue}}const{shouldLiveInRoom:n,shouldLiveInThread:i,threadId:r}=this.eventShouldLiveIn(t,e,o);i&&!a[null!=r?r:""]&&(a[null!=r?r:""]=[]),null===(l=a[null!=r?r:""])||void 0===l||l.push(t),n&&this.addLiveEvent(t,c)}Object.entries(a).forEach((([e,t])=>{this.addThreadedEvents(e,t,!1)}))}partitionThreadedEvents(e){if(this.client.supportsExperimentalThreads()){const t=this.findThreadRoots(e);return e.reduce(((n,i)=>{const{shouldLiveInRoom:r,shouldLiveInThread:o,threadId:s}=this.eventShouldLiveIn(i,e,t);return r&&n[0].push(i),o&&(i.setThreadId(null!=s?s:""),n[1].push(i)),n}),[[],[]])}return[e,[]]}findThreadRoots(e){const t=new Set;for(const i of e){var n;i.isRelation(E.THREAD_RELATION_TYPE.name)&&t.add(null!==(n=i.relationEventId)&&void 0!==n?n:"")}return t}addReceipt(e,t=!1){const n=e.getContent();Object.keys(n).forEach((e=>{Object.keys(n[e]).forEach((i=>{Object.keys(n[e][i]).forEach((r=>{var o;const s=n[e][i][r],a=s.thread_id&&s.thread_id!==S.MAIN_ROOM_TIMELINE?this.threads.get(null!==(o=s.thread_id)&&void 0!==o?o:""):this;null==a||a.addReceiptToStructure(e,i,r,s,t)}))}))})),this.emit(A.Receipt,e,this)}addEphemeralEvents(e){for(const t of e)t.getType()===m.EventType.Typing?this.currentState.setTypingEvent(t):t.getType()===m.EventType.Receipt&&this.addReceipt(t)}removeEvents(e){for(const t of e)this.removeEvent(t)}removeEvent(e){let t=!1;for(const n of this.timelineSets){const i=n.removeEvent(e);i&&(i.isRedaction()&&this.revertRedactionLocalEcho(i),t=!0)}return t}recalculate(){const e=this.currentState.getStateEvents(m.EventType.RoomMember,this.myUserId);if(e){const t=e.getContent().membership;this.updateMyMembership(t),"invite"===t&&(e.getUnsigned().invite_room_state||[]).forEach((e=>{this.currentState.getStateEvents(e.type,e.state_key)||this.currentState.setStateEvents([new l.MatrixEvent({type:e.type,state_key:e.state_key,content:e.content,event_id:"$fake"+Date.now(),room_id:this.roomId,user_id:this.myUserId})])}))}const t=this.name;this.name=this.calculateRoomName(this.myUserId),this.normalizedName=(0,c.normalize)(this.name),this.summary=new h.RoomSummary(this.roomId,{title:this.name}),t!==this.name&&this.emit(A.Name,this)}addTags(e){this.tags=e.getContent().tags||{},this.emit(A.Tags,e,this)}addAccountData(e){for(const t of e){"m.tag"===t.getType()&&this.addTags(t);const e=this.accountData[t.getType()];this.accountData[t.getType()]=t,this.emit(A.AccountData,t,this,e)}}getAccountData(e){return this.accountData[e]}maySendMessage(){return"join"===this.getMyMembership()&&(this.client.isRoomEncrypted(this.roomId)?this.currentState.maySendEvent(m.EventType.RoomMessageEncrypted,this.myUserId):this.currentState.maySendEvent(m.EventType.RoomMessage,this.myUserId))}canInvite(e){let t="join"===this.getMyMembership();const n=this.currentState.getStateEvents(m.EventType.RoomPowerLevels,""),i=n&&n.getContent(),r=this.getMember(e);return i&&r&&i.invite>r.powerLevel&&(t=!1),t}getJoinRule(){return this.currentState.getJoinRule()}getHistoryVisibility(){return this.currentState.getHistoryVisibility()}getGuestAccess(){return this.currentState.getGuestAccess()}getType(){const e=this.currentState.getStateEvents(m.EventType.RoomCreate,"");if(e)return e.getContent()[m.RoomCreateTypeField];this.getTypeWarning||(p.logger.warn("[getType] Room "+this.roomId+" does not have an m.room.create event"),this.getTypeWarning=!0)}isSpaceRoom(){return this.getType()===m.RoomType.Space}isCallRoom(){return this.getType()===m.RoomType.UnstableCall}isElementVideoRoom(){return this.getType()===m.RoomType.ElementVideo}roomNameGenerator(e){if(this.client.roomNameGenerator){const t=this.client.roomNameGenerator(this.roomId,e);if(null!==t)return t}switch(e.type){case L.Actual:return e.name;case L.Generated:return"Inviting"===e.subtype?`Inviting ${D(e.names,e.count)}`:D(e.names,e.count);case L.EmptyRoom:return e.oldName?`Empty room (was ${e.oldName})`:"Empty room"}}calculateRoomName(e,t=!1){if(!t){const e=this.currentState.getStateEvents(m.EventType.RoomName,"");if(null!=e&&e.getContent().name)return this.roomNameGenerator({type:L.Actual,name:e.getContent().name})}const n=this.getCanonicalAlias();if(n)return this.roomNameGenerator({type:L.Actual,name:n});let i=this.currentState.getJoinedMemberCount()+this.currentState.getInvitedMemberCount()-1,r=[];const o=this.currentState.getStateEvents(m.UNSTABLE_ELEMENT_FUNCTIONAL_USERS.name,"");Array.isArray(null==o?void 0:o.getContent().service_members)&&(r=o.getContent().service_members);let s=[];if(this.summaryHeroes)this.summaryHeroes.forEach((e=>{if(r.includes(e))return void i--;const t=this.getMember(e);s.push(t?t.name:e)}));else{let t=this.currentState.getMembers().filter((t=>t.userId!==e&&("invite"===t.membership||"join"===t.membership)));t=t.filter((({userId:e})=>!r.includes(e)||(i--,!1))),t.sort(((e,t)=>c.compare(e.userId,t.userId))),t=t.slice(0,5),s=t.map((e=>e.name))}if(i)return this.roomNameGenerator({type:L.Generated,names:s,count:i});if("join"==this.getMyMembership()){const e=this.currentState.getStateEvents(m.EventType.RoomThirdPartyInvite);if(null!=e&&e.length){const t=e.map((e=>e.getContent().display_name));return this.roomNameGenerator({type:L.Generated,subtype:"Inviting",names:t,count:t.length+1})}}let a,l=s;return l.length||(l=this.currentState.getMembers().filter((t=>t.userId!==e&&"invite"!==t.membership&&"join"!==t.membership)).map((e=>e.name))),l.length&&(a=this.roomNameGenerator({type:L.Generated,names:l,count:l.length+1})),this.roomNameGenerator({type:L.EmptyRoom,oldName:a})}applyNewVisibilityEvent(e){const t=e.asVisibilityChange();if(!t)return;const n=e.getSender();if(!n)return;if(!(m.EVENT_VISIBILITY_CHANGE_TYPE.name&&this.currentState.maySendStateEvent(m.EVENT_VISIBILITY_CHANGE_TYPE.name,n)||m.EVENT_VISIBILITY_CHANGE_TYPE.altName&&this.currentState.maySendStateEvent(m.EVENT_VISIBILITY_CHANGE_TYPE.altName,n)))return;const i=this.visibilityEvents.get(t.eventId);if(i){let t=i.length-1;const n=Math.max(0,i.length-30);for(;t>=n&&!(i[t].getTs()<e.getTs());--t);-1===t?i.unshift(e):i.splice(t+1,0,e)}else this.visibilityEvents.set(t.eventId,[e]);const r=this.findEventById(t.eventId);r&&r.applyVisibilityEvent(t)}redactVisibilityChangeEvent(e){if(!e.isVisibilityEvent)throw new Error("expected a visibility change event");const t=e.getRelation(),n=null==t?void 0:t.event_id,i=this.visibilityEvents.get(n);if(!i)return;const r=i.findIndex((t=>t.getId()===e.getId()));if(-1!==r&&(i.splice(r,1),r===i.length)){const e=this.findEventById(n);if(!e)return;if(0===r)this.visibilityEvents.delete(n),e.applyVisibilityEvent();else{const t=i[i.length-1].asVisibilityChange();if(!t)throw new Error("at this stage, visibility changes should be well-formed");e.applyVisibilityEvent(t)}}}applyPendingVisibilityEvents(e){const t=this.visibilityEvents.get(e.getId());if(!t||0==t.length)return;const n=t[t.length-1],i=n.asVisibilityChange();i&&(i.visible,n.getTs()<e.getTs()||e.applyVisibilityEvent(i))}}t.Room=O;const R={[u.EventStatus.ENCRYPTING]:[u.EventStatus.SENDING,u.EventStatus.NOT_SENT,u.EventStatus.CANCELLED],[u.EventStatus.SENDING]:[u.EventStatus.ENCRYPTING,u.EventStatus.QUEUED,u.EventStatus.NOT_SENT,u.EventStatus.SENT],[u.EventStatus.QUEUED]:[u.EventStatus.SENDING,u.EventStatus.CANCELLED],[u.EventStatus.SENT]:[],[u.EventStatus.NOT_SENT]:[u.EventStatus.SENDING,u.EventStatus.QUEUED,u.EventStatus.CANCELLED],[u.EventStatus.CANCELLED]:[]};let L;function D(e,t){const n=t-1;return e.length?1===e.length&&n<=1?e[0]:2===e.length&&n<=2?`${e[0]} and ${e[1]}`:n>1?`${e[0]} and ${n} others`:`${e[0]} and 1 other`:"Empty room"}t.RoomNameType=L,function(e){e[e.EmptyRoom=0]="EmptyRoom",e[e.Generated=1]="Generated",e[e.Actual=2]="Actual"}(L||(t.RoomNameType=L={}))},41398:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SearchResult=void 0;var i=n(43558);class r{static fromJson(e,t){const n=e.context||{};let o=(n.events_before||[]).map(t),s=(n.events_after||[]).map(t);const a=new i.EventContext(t(e.result)),c=a.ourEvent.threadRootId;return o=o.filter((e=>e.threadRootId===c)),s=s.filter((e=>e.threadRootId===c)),a.setPaginateToken(n.start,!0),a.addEvents(o,!0),a.addEvents(s,!1),a.setPaginateToken(n.end,!1),new r(e.rank,a)}constructor(e,t){this.rank=e,this.context=t}}t.SearchResult=r},36969:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ThreadFilterType=t.ThreadEvent=t.Thread=t.THREAD_RELATION_TYPE=t.FeatureSupport=t.FILTER_RELATED_BY_SENDERS=t.FILTER_RELATED_BY_REL_TYPES=void 0,t.determineFeatureSupport=function(e,t){return e?g.Stable:t?g.Experimental:g.None},t.threadFilterTypeToFilter=function(e){return e===S.My?"participated":"all"};var r=i(n(59713)),o=n(20771),s=n(42481),a=n(24369),c=n(88910),l=n(33705),u=n(27366),d=n(47048),h=n(7434),p=n(82958),f=n(95550);let m,g;t.ThreadEvent=m,function(e){e.New="Thread.new",e.Update="Thread.update",e.NewReply="Thread.newReply",e.ViewThread="Thread.viewThread",e.Delete="Thread.delete"}(m||(t.ThreadEvent=m={})),t.FeatureSupport=g,function(e){e[e.None=0]="None",e[e.Experimental=1]="Experimental",e[e.Stable=2]="Stable"}(g||(t.FeatureSupport=g={}));class v extends p.ReadReceipt{constructor(e,t,n){if(super(),this.id=e,this.rootEvent=t,(0,r.default)(this,"timelineSet",void 0),(0,r.default)(this,"timeline",[]),(0,r.default)(this,"_currentUserParticipated",!1),(0,r.default)(this,"reEmitter",void 0),(0,r.default)(this,"lastEvent",void 0),(0,r.default)(this,"replyCount",0),(0,r.default)(this,"room",void 0),(0,r.default)(this,"client",void 0),(0,r.default)(this,"initialEventsFetched",!v.hasServerSideSupport),(0,r.default)(this,"onBeforeRedaction",((e,t)=>{null!=e&&e.isRelation(E.name)&&this.room.eventShouldLiveIn(e).threadId===this.id&&e.getId()!==this.id&&!t.status&&(this.replyCount--,this.emit(m.Update,this))})),(0,r.default)(this,"onRedaction",(async e=>{if(e.threadRootId===this.id)if(this.replyCount<=0){for(const e of this.timeline)this.clearEventMetadata(e);this.lastEvent=this.rootEvent,this._currentUserParticipated=!1,this.emit(m.Delete,this)}else await this.initialiseThread()})),(0,r.default)(this,"onTimelineEvent",((e,t,n)=>{n||t.addLocalEchoReceipt(e.getSender(),e,f.ReceiptType.Read),this.onEcho(e)})),(0,r.default)(this,"onEcho",(async e=>{e.threadRootId===this.id&&this.lastEvent!==e&&e.isRelation(E.name)&&(await this.initialiseThread(),this.emit(m.NewReply,this,e))})),null==n||!n.room)throw new Error("element-web#22141: A thread requires a room in order to function");this.room=n.room,this.client=n.client,this.timelineSet=new l.EventTimelineSet(this.room,{timelineSupport:!0,pendingEvents:!0},this.client,this),this.reEmitter=new o.TypedReEmitter(this),this.reEmitter.reEmit(this.timelineSet,[u.RoomEvent.Timeline,u.RoomEvent.TimelineReset]),this.room.on(a.MatrixEventEvent.BeforeRedaction,this.onBeforeRedaction),this.room.on(u.RoomEvent.Redaction,this.onRedaction),this.room.on(u.RoomEvent.LocalEchoUpdated,this.onEcho),this.timelineSet.on(u.RoomEvent.Timeline,this.onTimelineEvent),this.initialiseThread(),this.setEventMetadata(this.rootEvent)}async fetchRootEvent(){this.rootEvent=this.room.findEventById(this.id);try{const e=await this.client.fetchRoomEvent(this.roomId,this.id),t=this.client.getEventMapper();this.rootEvent=t(e)}catch(e){h.logger.error("Failed to fetch thread root to construct thread with",e)}await this.processEvent(this.rootEvent)}static setServerSideSupport(e){v.hasServerSideSupport=e,e!==g.Stable&&(y.setPreferUnstable(!0),b.setPreferUnstable(!0),E.setPreferUnstable(!0))}static setServerSideListSupport(e){v.hasServerSideListSupport=e}static setServerSideFwdPaginationSupport(e){v.hasServerSideFwdPaginationSupport=e}get roomState(){return this.room.getLiveTimeline().getState(c.EventTimeline.FORWARDS)}addEventToTimeline(e,t){this.findEventById(e.getId())||(this.timelineSet.addEventToTimeline(e,this.liveTimeline,{toStartOfTimeline:t,fromCache:!1,roomState:this.roomState}),this.timeline=this.events)}addEvents(e,t){e.forEach((e=>this.addEvent(e,t,!1))),this.initialiseThread()}async addEvent(e,t,n=!0){this.setEventMetadata(e);const i=this.lastReply(),r=!i||e.localTimestamp>i.localTimestamp;if(v.hasServerSideSupport){if(!t&&this.initialEventsFetched&&r)await this.fetchEditsWhereNeeded(e),this.addEventToTimeline(e,!1);else if(e.isRelation(s.RelationType.Annotation)||e.isRelation(s.RelationType.Replace)){var o,a;return null===(o=this.timelineSet.relations)||void 0===o||o.aggregateParentEvent(e),void(null===(a=this.timelineSet.relations)||void 0===a||a.aggregateChildEvent(e,this.timelineSet))}}else this.addEventToTimeline(e,t),this.client.decryptEventIfNeeded(e,{});v.hasServerSideSupport&&this.rootEvent||!e.isRelation(E.name)||this.replyCount++,n&&(this.emit(m.NewReply,this,e),this.initialiseThread())}async processEvent(e){e&&(this.setEventMetadata(e),await this.fetchEditsWhereNeeded(e)),this.timeline=this.events}getRootEventBundledRelationship(e=this.rootEvent){return null==e?void 0:e.getServerAggregatedRelation(E.name)}async initialiseThread(){let e=this.getRootEventBundledRelationship();if(v.hasServerSideSupport&&(await this.fetchRootEvent(),e=this.getRootEventBundledRelationship()),v.hasServerSideSupport&&e){this.replyCount=e.count,this._currentUserParticipated=!!e.current_user_participated;const t=this.client.getEventMapper();this.lastEvent=t(e.latest_event),await this.processEvent(this.lastEvent)}if(!this.initialEventsFetched){this.initialEventsFetched=!0;try{await this.client.paginateEventTimeline(this.liveTimeline,{backwards:!0,limit:1}),this.emit(u.RoomEvent.TimelineReset,this.room,this.timelineSet,!0)}catch(e){h.logger.error("Failed to load start of newly created thread: ",e),this.initialEventsFetched=!1}}this.emit(m.Update,this)}async fetchEditsWhereNeeded(...e){return Promise.all(e.filter((e=>e.isEncrypted())).map((e=>{if(!e.isRelation())return this.client.relations(this.roomId,e.getId(),s.RelationType.Replace,e.getType(),{limit:1}).then((t=>{t.events.length&&e.makeReplaced(t.events[0])})).catch((e=>{h.logger.error("Failed to load edits for encrypted thread event",e)}))})))}setEventMetadata(e){e&&(c.EventTimeline.setEventMetadata(e,this.roomState,!1),e.setThread(this))}clearEventMetadata(e){var t,n,i;e&&(e.setThread(void 0),null===(t=e.event)||void 0===t||null===(n=t.unsigned)||void 0===n||null===(i=n["m.relations"])||void 0===i||delete i[E.name])}findEventById(e){var t;return(null===(t=this.lastEvent)||void 0===t?void 0:t.getId())===e?this.lastEvent:this.timelineSet.findEventById(e)}lastReply(e=(()=>!0)){for(let t=this.timeline.length-1;t>=0;t--){const n=this.timeline[t];if(e(n))return n}return null}get roomId(){return this.room.roomId}get length(){return this.replyCount}get replyToEvent(){var e;return null!==(e=this.lastEvent)&&void 0!==e?e:this.lastReply()}get events(){return this.liveTimeline.getEvents()}has(e){return this.timelineSet.findEventById(e)instanceof a.MatrixEvent}get hasCurrentUserParticipated(){return this._currentUserParticipated}get liveTimeline(){return this.timelineSet.getLiveTimeline()}getUnfilteredTimelineSet(){return this.timelineSet}addReceipt(e,t){throw new Error("Unsupported function on the thread model")}hasUserReadEvent(e,t){if(e===this.client.getUserId()){const t=this.getReadReceiptForUserId(e,!1,f.ReceiptType.Read),n=this.getReadReceiptForUserId(e,!1,f.ReceiptType.ReadPrivate),i=this.room.getThreadUnreadNotificationCount(this.id,u.NotificationCountType.Total)>0;if(!t&&!n&&!i)return!0}return super.hasUserReadEvent(e,t)}}t.Thread=v,(0,r.default)(v,"hasServerSideSupport",g.None),(0,r.default)(v,"hasServerSideListSupport",g.None),(0,r.default)(v,"hasServerSideFwdPaginationSupport",g.None);const y=new d.ServerControlledNamespacedValue("related_by_senders","io.element.relation_senders");t.FILTER_RELATED_BY_SENDERS=y;const b=new d.ServerControlledNamespacedValue("related_by_rel_types","io.element.relation_types");t.FILTER_RELATED_BY_REL_TYPES=b;const E=new d.ServerControlledNamespacedValue("m.thread","io.element.thread");let S;t.THREAD_RELATION_TYPE=E,t.ThreadFilterType=S,function(e){e[e.My=0]="My",e[e.All=1]="All"}(S||(t.ThreadFilterType=S={}))},55861:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEventEmitter=t.EventEmitterEvents=void 0;var i=n(17187);let r;t.EventEmitterEvents=r,function(e){e.NewListener="newListener",e.RemoveListener="removeListener",e.Error="error"}(r||(t.EventEmitterEvents=r={}));class o extends i.EventEmitter{addListener(e,t){return super.addListener(e,t)}emit(e,...t){return super.emit(e,...t)}eventNames(){return super.eventNames()}listenerCount(e){return super.listenerCount(e)}listeners(e){return super.listeners(e)}off(e,t){return super.off(e,t)}on(e,t){return super.on(e,t)}once(e,t){return super.once(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}rawListeners(e){return super.rawListeners(e)}}t.TypedEventEmitter=o},83998:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.UserEvent=t.User=void 0;var r=i(n(59713)),o=n(55861);let s;t.UserEvent=s,function(e){e.DisplayName="User.displayName",e.AvatarUrl="User.avatarUrl",e.Presence="User.presence",e.CurrentlyActive="User.currentlyActive",e.LastPresenceTs="User.lastPresenceTs"}(s||(t.UserEvent=s={}));class a extends o.TypedEventEmitter{constructor(e){super(),this.userId=e,(0,r.default)(this,"modified",-1),(0,r.default)(this,"displayName",void 0),(0,r.default)(this,"rawDisplayName",void 0),(0,r.default)(this,"avatarUrl",void 0),(0,r.default)(this,"presenceStatusMsg",void 0),(0,r.default)(this,"presence","offline"),(0,r.default)(this,"lastActiveAgo",0),(0,r.default)(this,"lastPresenceTs",0),(0,r.default)(this,"currentlyActive",!1),(0,r.default)(this,"events",{}),this.displayName=e,this.rawDisplayName=e,this.updateModifiedTime()}setPresenceEvent(e){if("m.presence"!==e.getType())return;const t=null===this.events.presence;this.events.presence=e;const n=[];(e.getContent().presence!==this.presence||t)&&n.push(s.Presence),e.getContent().avatar_url&&e.getContent().avatar_url!==this.avatarUrl&&n.push(s.AvatarUrl),e.getContent().displayname&&e.getContent().displayname!==this.displayName&&n.push(s.DisplayName),void 0!==e.getContent().currently_active&&e.getContent().currently_active!==this.currentlyActive&&n.push(s.CurrentlyActive),this.presence=e.getContent().presence,n.push(s.LastPresenceTs),e.getContent().status_msg&&(this.presenceStatusMsg=e.getContent().status_msg),e.getContent().displayname&&(this.displayName=e.getContent().displayname),e.getContent().avatar_url&&(this.avatarUrl=e.getContent().avatar_url),this.lastActiveAgo=e.getContent().last_active_ago,this.lastPresenceTs=Date.now(),this.currentlyActive=e.getContent().currently_active,this.updateModifiedTime();for(const t of n)this.emit(t,e,this)}setDisplayName(e){const t=this.displayName;this.displayName=e,e!==t&&this.updateModifiedTime()}setRawDisplayName(e){this.rawDisplayName=e}setAvatarUrl(e){const t=this.avatarUrl;this.avatarUrl=e,e!==t&&this.updateModifiedTime()}updateModifiedTime(){this.modified=Date.now()}getLastModifiedTime(){return this.modified}getLastActiveTs(){return this.lastPresenceTs-this.lastActiveAgo}}t.User=a},31707:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.PushProcessor=void 0;var r=i(n(59713)),o=n(3102),s=n(7434),a=n(1470),c=n(42481);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d=[a.PushRuleKind.Override,a.PushRuleKind.ContentSpecific,a.PushRuleKind.RoomSpecific,a.PushRuleKind.SenderSpecific,a.PushRuleKind.Underride],h=[{rule_id:".m.rule.reaction",default:!0,enabled:!0,conditions:[{kind:a.ConditionKind.EventMatch,key:"type",pattern:"m.reaction"}],actions:[a.PushRuleActionName.DontNotify]},{rule_id:".org.matrix.msc3786.rule.room.server_acl",default:!0,enabled:!0,conditions:[{kind:a.ConditionKind.EventMatch,key:"type",pattern:c.EventType.RoomServerAcl},{kind:a.ConditionKind.EventMatch,key:"state_key",pattern:""}],actions:[]}],p=[{rule_id:".org.matrix.msc3914.rule.room.call",default:!0,enabled:!0,conditions:[{kind:a.ConditionKind.EventMatch,key:"type",pattern:"org.matrix.msc3401.call"},{kind:a.ConditionKind.CallStarted}],actions:[a.PushRuleActionName.Notify,{set_tweak:a.TweakName.Sound,value:"default"}]}];class f{constructor(e){this.client=e}static actionListToActionsObject(e){const t={notify:!1,tweaks:{}};for(const n of e)n===a.PushRuleActionName.Notify?t.notify=!0:"object"==typeof n&&(void 0===n.value&&(n.value=!0),t.tweaks[n.set_tweak]=n.value);return t}static rewriteDefaultRules(e){var t;let n=JSON.parse(JSON.stringify(e));n||(n={}),n.global||(n.global={}),n.global.override||(n.global.override=[]),n.global.override||(n.global.underride=[]);const i=n.global.override;for(const e of h){const t=i.find((t=>t.rule_id===e.rule_id));if(t)t.default=e.default,t.conditions=e.conditions,t.actions=e.actions;else{const t=e.rule_id;s.logger.warn(`Adding default global override for ${t}`),i.push(e)}}const r=null!==(t=n.global.underride)&&void 0!==t?t:[];for(const e of p){const t=r.find((t=>t.rule_id===e.rule_id));if(t)t.default=e.default,t.conditions=e.conditions,t.actions=e.actions;else{const t=e.rule_id;s.logger.warn(`Adding default global underride for ${t}`),r.push(e)}}return n}matchingRuleFromKindSet(e,t){for(const n of d){const i=t[n];if(i)for(const t of i){if(!t.enabled)continue;const i=this.templateRuleToRaw(n,t);if(i&&this.ruleMatchesEvent(i,e))return u(u({},t),{},{kind:n})}}return null}templateRuleToRaw(e,t){const n={rule_id:t.rule_id,actions:t.actions,conditions:[]};switch(e){case a.PushRuleKind.Underride:case a.PushRuleKind.Override:n.conditions=t.conditions;break;case a.PushRuleKind.RoomSpecific:if(!t.rule_id)return null;n.conditions.push({kind:a.ConditionKind.EventMatch,key:"room_id",value:t.rule_id});break;case a.PushRuleKind.SenderSpecific:if(!t.rule_id)return null;n.conditions.push({kind:a.ConditionKind.EventMatch,key:"user_id",value:t.rule_id});break;case a.PushRuleKind.ContentSpecific:if(!t.pattern)return null;n.conditions.push({kind:a.ConditionKind.EventMatch,key:"content.body",pattern:t.pattern})}return n}eventFulfillsCondition(e,t){switch(e.kind){case a.ConditionKind.EventMatch:return this.eventFulfillsEventMatchCondition(e,t);case a.ConditionKind.ContainsDisplayName:return this.eventFulfillsDisplayNameCondition(e,t);case a.ConditionKind.RoomMemberCount:return this.eventFulfillsRoomMemberCountCondition(e,t);case a.ConditionKind.SenderNotificationPermission:return this.eventFulfillsSenderNotifPermCondition(e,t);case a.ConditionKind.CallStarted:case a.ConditionKind.CallStartedPrefix:return this.eventFulfillsCallStartedCondition(e,t)}return!1}eventFulfillsSenderNotifPermCondition(e,t){const n=e.key;if(!n)return!1;const i=this.client.getRoom(t.getRoomId());return!(null==i||!i.currentState)&&i.currentState.mayTriggerNotifOfType(n,t.getSender())}eventFulfillsRoomMemberCountCondition(e,t){if(!e.is)return!1;const n=this.client.getRoom(t.getRoomId());if(!n||!n.currentState||!n.currentState.members)return!1;const i=n.currentState.getJoinedMemberCount(),r=e.is.match(/^([=<>]*)(\d*)$/);if(!r)return!1;const o=r[1],s=parseInt(r[2]);if(isNaN(s))return!1;switch(o){case"":case"==":return i==s;case"<":return i<s;case">":return i>s;case"<=":return i<=s;case">=":return i>=s;default:return!1}}eventFulfillsDisplayNameCondition(e,t){var n;let i=t.getContent();if(t.isEncrypted()&&t.getClearContent()&&(i=t.getClearContent()),!i||!i.body||"string"!=typeof i.body)return!1;const r=this.client.getRoom(t.getRoomId()),s=null==r||null===(n=r.currentState)||void 0===n?void 0:n.getMember(this.client.credentials.userId);if(!s)return!1;const a=s.name,c=new RegExp("(^|\\W)"+(0,o.escapeRegExp)(a)+"(\\W|$)","i");return i.body.search(c)>-1}eventFulfillsEventMatchCondition(e,t){if(!e.key)return!1;const n=this.valueForDottedKey(e.key,t);if("string"!=typeof n)return!1;if(e.value)return e.value===n;if("string"!=typeof e.pattern)return!1;const i="content.body"===e.key?this.createCachedRegex("(^|\\W)",e.pattern,"(\\W|$)"):this.createCachedRegex("^",e.pattern,"$");return!!n.match(i)}eventFulfillsCallStartedCondition(e,t){return["m.ring","m.prompt"].includes(t.getContent()["m.intent"])&&!("m.terminated"in t.getContent())&&(t.getPrevContent()["m.terminated"]!==t.getContent()["m.terminated"]||(0,o.deepCompare)(t.getPrevContent(),{}))}createCachedRegex(e,t,n){return f.cachedGlobToRegex[t]||(f.cachedGlobToRegex[t]=new RegExp(e+(0,o.globToRegexp)(t)+n,"i")),f.cachedGlobToRegex[t]}valueForDottedKey(e,t){const n=e.split(".");let i;const r=n[0];for("content"===r?(i=t.getContent(),n.shift()):"type"===r?(i=t.getType(),n.shift()):i=t.event;n.length>0;){const e=n.shift();if((0,o.isNullOrUndefined)(i[e]))return null;i=i[e]}return i}matchingRuleForEventWithRulesets(e,t){return t?e.getSender()===this.client.credentials.userId?null:this.matchingRuleFromKindSet(e,t.global):null}pushActionsForEventAndRulesets(e,t){const n=this.matchingRuleForEventWithRulesets(e,t);if(!n)return{};const i=f.actionListToActionsObject(n.actions);return void 0===i.tweaks.highlight&&(i.tweaks.highlight=n.kind==a.PushRuleKind.ContentSpecific),i}ruleMatchesEvent(e,t){var n;return!(null!==(n=e.conditions)&&void 0!==n&&n.some((e=>!this.eventFulfillsCondition(e,t))))}actionsForEvent(e){return this.pushActionsForEventAndRulesets(e,this.client.pushRules)}getPushRuleById(e){for(const n of["global"]){var t;if(void 0!==(null===(t=this.client.pushRules)||void 0===t?void 0:t[n]))for(const t of d)if(void 0!==this.client.pushRules[n][t])for(const i of this.client.pushRules[n][t])if(i.rule_id===e)return i}return null}}t.PushProcessor=f,(0,r.default)(f,"cachedGlobToRegex",{})},98401:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomLowercaseString=function(e){return r(e,n)},t.randomString=function(e){return r(e,i+n+"0123456789")},t.randomUppercaseString=function(e){return r(e,i)};const n="abcdefghijklmnopqrstuvwxyz",i="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function r(e,t){let n="";for(let i=0;i<e;++i)n+=t.charAt(Math.floor(Math.random()*t.length));return n}},82731:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearTimeout=function(e){if(0===s.length)return;let t;for(t=0;t<s.length;t++)if(s[t].key==e){s.splice(t,1);break}0===t&&a()},t.setTimeout=function(e,t,...n){(t=t||0)<0&&(t=0);const i=Date.now()+t,r=o++,c={runAt:i,func:e,params:n,key:r},l=function(e,t){let n=0,r=e.length;for(;n<r;){const t=n+r>>1;e[t].runAt-i>0?r=t:n=t+1}return n}(s);return s.splice(l,0,c),a(),r};var i=n(7434);let r,o=0;const s=[];function a(){r&&n.g.clearTimeout(r);const e=s[0];if(!e)return;const t=Date.now(),i=Math.min(e.runAt-t,1e3);r=n.g.setTimeout(c,i)}function c(){const e=Date.now(),t=[];for(;;){const n=s[0];if(!n||n.runAt>e)break;const i=s.shift();i.key,t.push(i)}a();for(const e of t)try{e.func.apply(n.g,e.params)}catch(e){i.logger.error("Uncaught exception in callback function",e)}}},39443:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MatrixScheduler=void 0;var r=i(n(59713)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(3102)),s=(n(7434),n(42481)),a=n(30095);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}class l{static RETRY_BACKOFF_RATELIMIT(e,t,n){if(400===n.httpStatus||403===n.httpStatus||401===n.httpStatus)return-1;if(n instanceof a.ConnectionError)return-1;if("M_TOO_LARGE"===n.name)return-1;if("M_LIMIT_EXCEEDED"===n.name){const e=n.data.retry_after_ms;if(e>0)return e}return t>4?-1:1e3*Math.pow(2,t)}static QUEUE_MESSAGES(e){return e.getType()===s.EventType.RoomMessage||e.hasAssociation()?"message":null}constructor(e=l.RETRY_BACKOFF_RATELIMIT,t=l.QUEUE_MESSAGES){this.retryAlgorithm=e,this.queueAlgorithm=t,(0,r.default)(this,"queues",{}),(0,r.default)(this,"activeQueues",[]),(0,r.default)(this,"procFn",null),(0,r.default)(this,"processQueue",(e=>{const t=this.peekNextEvent(e);if(!t){const t=this.activeQueues.indexOf(e);return t>=0&&this.activeQueues.splice(t,1),void u()}u(this.queues[e].length),Promise.resolve().then((()=>this.procFn(t.event))).then((n=>{this.removeNextEvent(e),u(t.event.getId()),t.defer.resolve(n),this.processQueue(e)}),(n=>{t.attempts+=1;const i=this.retryAlgorithm(t.event,t.attempts,n);u(t.attempts,t.event.getId()),-1===i?(u(t.event.getId()),this.removeNextEvent(e),t.defer.reject(n),this.processQueue(e)):setTimeout(this.processQueue,i,e)}))}))}getQueueForEvent(e){const t=this.queueAlgorithm(e);return t&&this.queues[t]?this.queues[t].map((function(e){return e.event})):null}removeEventFromQueue(e){const t=this.queueAlgorithm(e);if(!t||!this.queues[t])return!1;let n=!1;return o.removeElement(this.queues[t],(t=>t.event.getId()===e.getId()&&(n=!0,!0))),n}setProcessFunction(e){this.procFn=e,this.startProcessingQueues()}queueEvent(e){const t=this.queueAlgorithm(e);if(!t)return null;this.queues[t]||(this.queues[t]=[]);const n=o.defer();return this.queues[t].push({event:e,defer:n,attempts:0}),u(e.getId()),this.startProcessingQueues(),n.promise}startProcessingQueues(){this.procFn&&Object.keys(this.queues).filter((e=>-1===this.activeQueues.indexOf(e)&&this.queues[e].length>0)).forEach((e=>{this.activeQueues.push(e),u(),this.processQueue(e)}))}peekNextEvent(e){const t=this.queues[e];if(Array.isArray(t))return t[0]}removeNextEvent(e){const t=this.queues[e];if(Array.isArray(t))return t.shift()}}function u(...e){}t.MatrixScheduler=l},91415:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.SERVICE_TYPES=void 0,t.SERVICE_TYPES=n,function(e){e.IS="SERVICE_TYPE_IS",e.IM="SERVICE_TYPE_IM"}(n||(t.SERVICE_TYPES=n={}))},70011:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SlidingSyncSdk=void 0;var r=i(n(59713)),o=n(27366),s=n(7434),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(3102)),c=n(88910),l=n(62168),u=n(64551),d=n(30095),h=n(12443),p=n(42481),f=n(31707),m=n(26860),g=n(32848);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}class y{constructor(e){this.crypto=e}name(){return"e2ee"}when(){return h.ExtensionState.PreProcess}onRequest(e){if(e)return{enabled:!0}}async onResponse(e){if(e.device_lists&&await this.crypto.handleDeviceListChanges({oldSyncToken:"yep"},e.device_lists),e.device_one_time_keys_count){const t=e.device_one_time_keys_count.signed_curve25519||0;this.crypto.updateOneTimeKeyCount(t)}if(e.device_unused_fallback_key_types||e["org.matrix.msc2732.device_unused_fallback_key_types"]){const t=e.device_unused_fallback_key_types||e["org.matrix.msc2732.device_unused_fallback_key_types"];this.crypto.setNeedsNewFallback(Array.isArray(t)&&!t.includes("signed_curve25519"))}}}class b{constructor(e){this.client=e,(0,r.default)(this,"nextBatch",null)}name(){return"to_device"}when(){return h.ExtensionState.PreProcess}onRequest(e){const t={since:null!==this.nextBatch?this.nextBatch:void 0};return e&&(t.limit=100,t.enabled=!0),t}async onResponse(e){const t=[];e.events=e.events||[],e.events.map(this.client.getEventMapper()).map((e=>{if("m.key.verification.cancel"===e.getType()){const n=e.getContent().transaction_id;n&&t.push(n)}return e})).forEach((e=>{const n=e.getContent();if("m.room.message"!=e.getType()||"m.bad.encrypted"!=n.msgtype){if("m.key.verification.start"===e.getType()||"m.key.verification.request"===e.getType()){const i=n.transaction_id;t.includes(i)&&e.flagCancelled()}this.client.emit(l.ClientEvent.ToDeviceEvent,e)}else s.logger.log("Ignoring undecryptable to-device event from "+e.getSender())})),this.nextBatch=e.next_batch}}class E{constructor(e){this.client=e}name(){return"account_data"}when(){return h.ExtensionState.PostProcess}onRequest(e){if(e)return{enabled:!0}}onResponse(e){e.global&&e.global.length>0&&this.processGlobalAccountData(e.global);for(const t in e.rooms){const n=_(this.client,t,e.rooms[t]),i=this.client.getRoom(t);i?(i.addAccountData(n),n.forEach((e=>{this.client.emit(l.ClientEvent.Event,e)}))):s.logger.warn("got account data for room but room doesn't exist on client:",t)}}processGlobalAccountData(e){const t=_(this.client,void 0,e),n=t.reduce(((e,t)=>(e[t.getType()]=this.client.store.getAccountData(t.getType()),e)),{});this.client.store.storeAccountDataEvents(t),t.forEach((e=>{if(e.getType()===p.EventType.PushRules){const t=e.getContent();this.client.pushRules=f.PushProcessor.rewriteDefaultRules(t)}const t=n[e.getType()];return this.client.emit(l.ClientEvent.AccountData,e,t),e}))}}class S{constructor(e){this.client=e}name(){return"typing"}when(){return h.ExtensionState.PostProcess}onRequest(e){if(e)return{enabled:!0}}onResponse(e){if(e&&e.rooms)for(const t in e.rooms)T(this.client,t,[e.rooms[t]])}}class w{constructor(e){this.client=e}name(){return"receipts"}when(){return h.ExtensionState.PostProcess}onRequest(e){if(e)return{enabled:!0}}onResponse(e){if(e&&e.rooms)for(const t in e.rooms)T(this.client,t,[e.rooms[t]])}}function _(e,t,n,i=!0){const r=e.getEventMapper({decrypt:i});return n.map((function(e){return e.room_id=t,r(e)}))}function T(e,t,n){const i=_(e,t,n),r=e.getRoom(t);r?(r.addEphemeralEvents(i),i.forEach((t=>{e.emit(l.ClientEvent.Event,t)}))):s.logger.warn("got ephemeral events for room but room doesn't exist on client:",t)}t.SlidingSyncSdk=class{constructor(e,t,n={}){var i;this.slidingSync=e,this.client=t,this.opts=n,(0,r.default)(this,"syncState",null),(0,r.default)(this,"syncStateData",void 0),(0,r.default)(this,"lastPos",null),(0,r.default)(this,"failCount",0),(0,r.default)(this,"notifEvents",[]),this.opts.initialSyncLimit=null!==(i=this.opts.initialSyncLimit)&&void 0!==i?i:8,this.opts.resolveInvitesToProfiles=this.opts.resolveInvitesToProfiles||!1,this.opts.pollTimeout=this.opts.pollTimeout||3e4,this.opts.pendingEventOrdering=this.opts.pendingEventOrdering||l.PendingEventOrdering.Chronological,this.opts.experimentalThreadSupport=!0===this.opts.experimentalThreadSupport,n.canResetEntireTimeline||(n.canResetEntireTimeline=e=>!1),t.getNotifTimelineSet()&&t.reEmitter.reEmit(t.getNotifTimelineSet(),[o.RoomEvent.Timeline,o.RoomEvent.TimelineReset]),this.slidingSync.on(h.SlidingSyncEvent.Lifecycle,this.onLifecycle.bind(this)),this.slidingSync.on(h.SlidingSyncEvent.RoomData,this.onRoomData.bind(this));const s=[new b(this.client),new E(this.client),new S(this.client),new w(this.client)];this.opts.crypto&&s.push(new y(this.opts.crypto)),s.forEach((e=>{this.slidingSync.registerExtension(e)}))}onRoomData(e,t){let n=this.client.store.getRoom(e);if(!n){if(!t.initial)return void s.logger.debug("initial flag not set but no stored room exists for room ",e,t);n=(0,u._createAndReEmitRoom)(this.client,e,this.opts)}this.processRoomData(this.client,n,t)}onLifecycle(e,t,n){switch(n&&s.logger.debug("onLifecycle",e,n),e){case h.SlidingSyncState.Complete:if(this.purgeNotifications(),!t)break;this.lastPos||this.updateSyncState(u.SyncState.Prepared,{oldSyncToken:void 0,nextSyncToken:t.pos,catchingUp:!1,fromCache:!1}),this.updateSyncState(u.SyncState.Syncing,{oldSyncToken:this.lastPos,nextSyncToken:t.pos,catchingUp:!1,fromCache:!1}),this.lastPos=t.pos;break;case h.SlidingSyncState.RequestFinished:if(n){if(this.failCount+=1,this.updateSyncState(this.failCount>3?u.SyncState.Error:u.SyncState.Reconnecting,{error:new d.MatrixError(n)}),this.shouldAbortSync(new d.MatrixError(n)))return}else this.failCount=0}}async syncLeftRooms(){return[]}async peek(e){return null}stopPeeking(){}getSyncState(){return this.syncState}getSyncStateData(){var e;return null!==(e=this.syncStateData)&&void 0!==e?e:null}createRoom(e){const{timelineSupport:t}=this.client,n=new o.Room(e,this.client,this.client.getUserId(),{lazyLoadMembers:this.opts.lazyLoadMembers,pendingEventOrdering:this.opts.pendingEventOrdering,timelineSupport:t});return this.client.reEmitter.reEmit(n,[o.RoomEvent.Name,o.RoomEvent.Redaction,o.RoomEvent.RedactionCancelled,o.RoomEvent.Receipt,o.RoomEvent.Tags,o.RoomEvent.LocalEchoUpdated,o.RoomEvent.AccountData,o.RoomEvent.MyMembership,o.RoomEvent.Timeline,o.RoomEvent.TimelineReset]),this.registerStateListeners(n),n}registerStateListeners(e){this.client.reEmitter.reEmit(e.currentState,[m.RoomStateEvent.Events,m.RoomStateEvent.Members,m.RoomStateEvent.NewMember,m.RoomStateEvent.Update]),e.currentState.on(m.RoomStateEvent.NewMember,((e,t,n)=>{var i;n.user=null!==(i=this.client.getUser(n.userId))&&void 0!==i?i:void 0,this.client.reEmitter.reEmit(n,[g.RoomMemberEvent.Name,g.RoomMemberEvent.Typing,g.RoomMemberEvent.PowerLevel,g.RoomMemberEvent.Membership])}))}shouldAbortSync(e){return"M_UNKNOWN_TOKEN"===e.errcode&&(s.logger.warn("Token no longer valid - assuming logout"),this.stop(),this.updateSyncState(u.SyncState.Error,{error:e}),!0)}async processRoomData(e,t,n){n=function(e,t,n){if(!n.name)return n;for(const e of n.required_state)if(e.type===p.EventType.RoomName&&""===e.state_key)return e.content={name:n.name},n;return n.required_state.push({event_id:"$fake-sliding-sync-name-event-"+t,state_key:"",type:p.EventType.RoomName,content:{name:n.name},sender:e.getUserId(),origin_server_ts:(new Date).getTime()}),n}(e,t.roomId,n);const i=_(this.client,t.roomId,n.required_state);let r=_(this.client,t.roomId,n.timeline,!1);const s=[];if(n.initial){const e=new Set;t.getLiveTimeline().getEvents().forEach((t=>{e.add(t.getId())}));const i=[],o=[];let s=!1;for(let t=r.length-1;t>=0;t--){const n=r[t];e.has(n.getId())?s=!0:s?i.push(n):o.unshift(n)}r=o,i.length>0&&t.addEventsToTimeline(i,!0,t.getLiveTimeline(),n.prev_batch)}const u=this.client.isRoomEncrypted(t.roomId);if(null!=n.notification_count&&t.setUnreadNotificationCount(o.NotificationCountType.Total,n.notification_count),null!=n.highlight_count&&(!u||u&&t.getUnreadNotificationCount(o.NotificationCountType.Highlight)<=0)&&t.setUnreadNotificationCount(o.NotificationCountType.Highlight,n.highlight_count),Number.isInteger(n.invited_count)&&t.currentState.setInvitedMemberCount(n.invited_count),Number.isInteger(n.joined_count)&&t.currentState.setJoinedMemberCount(n.joined_count),n.invite_state){const e=_(this.client,t.roomId,n.invite_state);return this.injectRoomEvents(t,e),n.initial&&(t.recalculate(),this.client.store.storeRoom(t),this.client.emit(l.ClientEvent.Room,t)),e.forEach((e=>{this.client.emit(l.ClientEvent.Event,e)})),void t.updateMyMembership("invite")}var d;n.initial&&t.getLiveTimeline().setPaginationToken(null!==(d=n.prev_batch)&&void 0!==d?d:null,c.EventTimeline.BACKWARDS),this.injectRoomEvents(t,i,r,!1),t.addEphemeralEvents(s),t.updateMyMembership("join"),t.recalculate(),n.initial&&(e.store.storeRoom(t),e.emit(l.ClientEvent.Room,t)),this.addNotifications(r);const h=async t=>{e.emit(l.ClientEvent.Event,t),t.isState()&&t.getType()==p.EventType.RoomEncryption&&this.opts.crypto&&await this.opts.crypto.onCryptoEvent(t)};await a.promiseMapSeries(i,h),await a.promiseMapSeries(r,h),s.forEach((function(t){e.emit(l.ClientEvent.Event,t)})),t.decryptCriticalEvents()}injectRoomEvents(e,t,n,i=!1){n=n||[],t=t||[];const r=e.getLiveTimeline(),o=0==r.getEvents().length;if(o){for(const e of t)this.client.getPushActionsForEvent(e);r.initialiseState(t)}o||(e.oldState.setStateEvents(t),e.currentState.setStateEvents(t)),e.addLiveEvents(n,{fromCache:i}),e.recalculate(),this.resolveInvites(e)}resolveInvites(e){if(!e||!this.opts.resolveInvitesToProfiles)return;const t=this.client;e.getMembersWithMembership("invite").forEach((function(n){if(n.requestedProfileInfo)return;n.requestedProfileInfo=!0;const i=t.getUser(n.userId);let r;r=i?Promise.resolve({avatar_url:i.avatarUrl,displayname:i.displayName}):t.getProfileInfo(n.userId),r.then((function(t){const i=n.events.member;"invite"===i.getContent().membership&&(i.getContent().avatar_url=t.avatar_url,i.getContent().displayname=t.displayname,n.setMembershipEvent(i,e.currentState))}),(function(e){}))}))}retryImmediately(){return!0}async sync(){for(s.logger.debug("Sliding sync init loop");!this.client.isGuest();)try{s.logger.debug("Getting push rules...");const e=await this.client.getPushRules();s.logger.debug("Got push rules"),this.client.pushRules=e;break}catch(e){if(s.logger.error("Getting push rules failed",e),this.shouldAbortSync(e))return}await this.slidingSync.start()}stop(){s.logger.debug("SyncApi.stop"),this.slidingSync.stop()}updateSyncState(e,t){const n=this.syncState;this.syncState=e,this.syncStateData=t,this.client.emit(l.ClientEvent.Sync,this.syncState,n,t)}addNotifications(e){if(this.client.getNotifTimelineSet())for(const t of e){const e=this.client.getPushActionsForEvent(t);e&&e.notify&&e.tweaks&&e.tweaks.highlight&&this.notifEvents.push(t)}}purgeNotifications(){this.notifEvents.sort((function(e,t){return e.getTs()-t.getTs()})),this.notifEvents.forEach((e=>{var t;null===(t=this.client.getNotifTimelineSet())||void 0===t||t.addLiveEvent(e)})),this.notifEvents=[]}}},12443:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SlidingSyncState=t.SlidingSyncEvent=t.SlidingSync=t.MSC3575_WILDCARD=t.MSC3575_STATE_KEY_ME=t.MSC3575_STATE_KEY_LAZY=t.ExtensionState=void 0;var r=i(n(59713)),o=n(7434),s=n(55861),a=n(3102);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let u,d,h;t.MSC3575_WILDCARD="*",t.MSC3575_STATE_KEY_ME="$ME",t.MSC3575_STATE_KEY_LAZY="$LAZY",t.SlidingSyncState=u,function(e){e.RequestFinished="FINISHED",e.Complete="COMPLETE"}(u||(t.SlidingSyncState=u={}));class p{constructor(e){(0,r.default)(this,"list",void 0),(0,r.default)(this,"isModified",void 0),(0,r.default)(this,"roomIndexToRoomId",{}),(0,r.default)(this,"joinedCount",0),this.replaceList(e)}setModified(e){this.isModified=e}updateListRange(e){this.list.ranges=JSON.parse(JSON.stringify(e))}replaceList(e){e.filters=e.filters||{},e.ranges=e.ranges||[],this.list=JSON.parse(JSON.stringify(e)),this.isModified=!0,this.roomIndexToRoomId={},this.joinedCount=0}getList(e){let t={ranges:JSON.parse(JSON.stringify(this.list.ranges))};return(this.isModified||e)&&(t=JSON.parse(JSON.stringify(this.list))),t}isIndexInRange(e){for(const t of this.list.ranges)if(t[0]<=e&&e<=t[1])return!0;return!1}}t.ExtensionState=d,function(e){e.PreProcess="ExtState.PreProcess",e.PostProcess="ExtState.PostProcess"}(d||(t.ExtensionState=d={})),t.SlidingSyncEvent=h,function(e){e.RoomData="SlidingSync.RoomData",e.Lifecycle="SlidingSync.Lifecycle",e.List="SlidingSync.List"}(h||(t.SlidingSyncEvent=h={}));class f extends s.TypedEventEmitter{constructor(e,t,n,i,o){super(),this.proxyBaseUrl=e,this.roomSubscriptionInfo=n,this.client=i,this.timeoutMS=o,(0,r.default)(this,"lists",void 0),(0,r.default)(this,"listModifiedCount",0),(0,r.default)(this,"terminated",!1),(0,r.default)(this,"needsResend",!1),(0,r.default)(this,"txnId",null),(0,r.default)(this,"txnIdDefers",[]),(0,r.default)(this,"extensions",{}),(0,r.default)(this,"desiredRoomSubscriptions",new Set),(0,r.default)(this,"confirmedRoomSubscriptions",new Set),(0,r.default)(this,"customSubscriptions",new Map),(0,r.default)(this,"roomIdToCustomSubscription",new Map),(0,r.default)(this,"pendingReq",void 0),(0,r.default)(this,"abortController",void 0),this.lists=t.map((e=>new p(e)))}addCustomSubscription(e,t){this.customSubscriptions.set(e,t)}useCustomSubscription(e,t){this.roomIdToCustomSubscription.set(e,t),this.confirmedRoomSubscriptions.delete(e)}listLength(){return this.lists.length}getListData(e){return this.lists[e]?{joinedCount:this.lists[e].joinedCount,roomIndexToRoomId:Object.assign({},this.lists[e].roomIndexToRoomId)}:null}getList(e){return this.lists[e]?this.lists[e].getList(!0):null}setListRanges(e,t){return this.lists[e].updateListRange(t),this.resend()}setList(e,t){return this.lists[e]?this.lists[e].replaceList(t):this.lists[e]=new p(t),this.listModifiedCount+=1,this.resend()}getRoomSubscriptions(){return new Set(Array.from(this.desiredRoomSubscriptions))}modifyRoomSubscriptions(e){return this.desiredRoomSubscriptions=e,this.resend()}modifyRoomSubscriptionInfo(e){return this.roomSubscriptionInfo=e,this.confirmedRoomSubscriptions=new Set,this.resend()}registerExtension(e){if(this.extensions[e.name()])throw new Error(`registerExtension: ${e.name()} already exists as an extension`);this.extensions[e.name()]=e}getExtensionRequest(e){const t={};return Object.keys(this.extensions).forEach((n=>{t[n]=this.extensions[n].onRequest(e)})),t}onPreExtensionsResponse(e){Object.keys(e).forEach((t=>{this.extensions[t].when()==d.PreProcess&&this.extensions[t].onResponse(e[t])}))}onPostExtensionsResponse(e){Object.keys(e).forEach((t=>{this.extensions[t].when()==d.PostProcess&&this.extensions[t].onResponse(e[t])}))}invokeRoomDataListeners(e,t){t.required_state||(t.required_state=[]),t.timeline||(t.timeline=[]),this.emit(h.RoomData,e,t)}invokeLifecycleListeners(e,t,n){this.emit(h.Lifecycle,e,t,n)}shiftRight(e,t,n){for(let i=t;i>n;i--)this.lists[e].isIndexInRange(i)&&(this.lists[e].roomIndexToRoomId[i]=this.lists[e].roomIndexToRoomId[i-1])}shiftLeft(e,t,n){for(let i=n;i<t;i++)this.lists[e].isIndexInRange(i)&&(this.lists[e].roomIndexToRoomId[i]=this.lists[e].roomIndexToRoomId[i+1])}removeEntry(e,t){let n=-1;for(const t in this.lists[e].roomIndexToRoomId)Number(t)>n&&(n=Number(t));n<0||t>n||(this.shiftLeft(e,n,t),delete this.lists[e].roomIndexToRoomId[n])}addEntry(e,t){let n=-1;for(const t in this.lists[e].roomIndexToRoomId)Number(t)>n&&(n=Number(t));n<0||t>n||this.shiftRight(e,n+1,t)}processListOps(e,t){let n=-1;e.ops.forEach((e=>{switch(e.op){case"DELETE":o.logger.debug("DELETE",t,e.index,";"),delete this.lists[t].roomIndexToRoomId[e.index],-1!==n&&this.removeEntry(t,n),n=e.index;break;case"INSERT":o.logger.debug("INSERT",t,e.index,e.room_id,";"),this.lists[t].roomIndexToRoomId[e.index]&&(n<0?this.addEntry(t,e.index):n>e.index?this.shiftRight(t,n,e.index):n<e.index&&this.shiftLeft(t,e.index,n)),n=-1,this.lists[t].roomIndexToRoomId[e.index]=e.room_id;break;case"INVALIDATE":for(let n=e.range[0];n<=e.range[1];n++)delete this.lists[t].roomIndexToRoomId[n];o.logger.debug("INVALIDATE",t,e.range[0],e.range[1],";");break;case"SYNC":{const n=e.range[0];for(let i=n;i<=e.range[1];i++){const r=e.room_ids[i-n];if(!r)break;this.lists[t].roomIndexToRoomId[i]=r}o.logger.debug("SYNC",t,e.range[0],e.range[1],(e.room_ids||[]).join(" "),";");break}}})),-1!==n&&this.removeEntry(t,n)}resend(){var e;if(this.needsResend&&this.txnIdDefers.length>0)return this.txnIdDefers[this.txnIdDefers.length-1].promise;this.needsResend=!0,this.txnId=this.client.makeTxnId();const t=(0,a.defer)();return this.txnIdDefers.push(l(l({},t),{},{txnId:this.txnId})),null===(e=this.abortController)||void 0===e||e.abort(),this.abortController=new AbortController,t.promise}resolveTransactionDefers(e){if(!e)return;let t=-1;for(let n=0;n<this.txnIdDefers.length;n++)if(this.txnIdDefers[n].txnId===e){t=n;break}if(-1!==t){for(let e=0;e<t;e++)this.txnIdDefers[e].reject(this.txnIdDefers[e].txnId);this.txnIdDefers[t].resolve(e),this.txnIdDefers=this.txnIdDefers.slice(t+1)}else o.logger.warn(`resolveTransactionDefers: seen ${e} but it isn't a pending txn, ignoring.`)}stop(){var e;this.terminated=!0,null===(e=this.abortController)||void 0===e||e.abort(),this.removeAllListeners(h.Lifecycle),this.removeAllListeners(h.List),this.removeAllListeners(h.RoomData)}resetup(){var e;o.logger.warn("SlidingSync: resetting connection info"),this.txnIdDefers.forEach((e=>{e.reject(e.txnId)})),this.txnIdDefers=[],this.lists.forEach((e=>{e.setModified(!0)})),this.confirmedRoomSubscriptions=new Set,this.needsResend=!0,null===(e=this.abortController)||void 0===e||e.abort(),this.abortController=new AbortController}async start(){let e;for(this.abortController=new AbortController;!this.terminated;){this.needsResend=!1;let t,n=!1;try{const i=this.listModifiedCount,r={lists:this.lists.map((e=>e.getList(!1))),pos:e,timeout:this.timeoutMS,clientTimeout:this.timeoutMS+1e4,extensions:this.getExtensionRequest(void 0===e)},s=m(this.desiredRoomSubscriptions,this.confirmedRoomSubscriptions),a=m(this.confirmedRoomSubscriptions,this.desiredRoomSubscriptions);if(a.size>0&&(r.unsubscribe_rooms=Array.from(a)),s.size>0){r.room_subscriptions={};for(const e of s){const t=this.roomIdToCustomSubscription.get(e);let n=this.roomSubscriptionInfo;t&&this.customSubscriptions.has(t)&&(n=this.customSubscriptions.get(t)),r.room_subscriptions[e]=n}}this.txnId&&(r.txn_id=this.txnId,this.txnId=null),this.pendingReq=this.client.slidingSync(r,this.proxyBaseUrl,this.abortController.signal),t=await this.pendingReq,e=t.pos;for(const e of s)this.confirmedRoomSubscriptions.add(e);for(const e of a)this.confirmedRoomSubscriptions.delete(e);i!==this.listModifiedCount&&(o.logger.debug("list modified during await call, not updating list"),n=!0),this.lists.forEach((e=>{e.setModified(!1)})),t.lists=t.lists||[],t.rooms=t.rooms||{},t.extensions=t.extensions||{},t.lists.forEach(((e,t)=>{this.lists[t].joinedCount=e.count})),this.invokeLifecycleListeners(u.RequestFinished,t)}catch(t){if(t.httpStatus){if(this.invokeLifecycleListeners(u.RequestFinished,null,t),400===t.httpStatus){this.resetup(),e=void 0,await(0,a.sleep)(50);continue}}else if(this.needsResend||"AbortError"===t.name)continue;o.logger.error(t),await(0,a.sleep)(5e3)}if(!t)continue;this.onPreExtensionsResponse(t.extensions),Object.keys(t.rooms).forEach((e=>{this.invokeRoomDataListeners(e,t.rooms[e])}));const i=new Set;n||t.lists.forEach(((e,t)=>{e.ops=e.ops||[],e.ops.length>0&&i.add(t),this.processListOps(e,t)})),this.invokeLifecycleListeners(u.Complete,t),this.onPostExtensionsResponse(t.extensions),i.forEach((e=>{this.emit(h.List,e,this.lists[e].joinedCount,Object.assign({},this.lists[e].roomIndexToRoomId))})),this.resolveTransactionDefers(t.txn_id)}}}t.SlidingSync=f;const m=(e,t)=>{const n=new Set(e);for(const e of t)n.delete(e);return n}},53861:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.LocalIndexedDBStoreBackend=void 0;var r=i(n(59713)),o=n(22741),s=u(n(3102)),a=u(n(33415)),c=n(7434);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}const d=[e=>{e.createObjectStore("users",{keyPath:["userId"]}),e.createObjectStore("accountData",{keyPath:["type"]}),e.createObjectStore("sync",{keyPath:["clobber"]})},e=>{e.createObjectStore("oob_membership_events",{keyPath:["room_id","state_key"]}).createIndex("room","room_id")},e=>{e.createObjectStore("client_options",{keyPath:["clobber"]})},e=>{e.createObjectStore("to_device_queue",{autoIncrement:!0})}],h=d.length;function p(e,t,n){const i=e.openCursor(t);return new Promise(((e,t)=>{const r=[];i.onerror=()=>{t(new Error("Query failed: "+i.error))},i.onsuccess=()=>{const t=i.result;t?(r.push(n(t)),t.continue()):e(r)}}))}function f(e){return new Promise(((t,n)=>{e.oncomplete=function(e){t(e)},e.onerror=function(){n(e.error)}}))}function m(e){return new Promise(((t,n)=>{e.onsuccess=function(e){t(e)},e.onerror=function(){n(e.error)}}))}function g(e){return m(e).then((t=>e.result))}t.LocalIndexedDBStoreBackend=class{static exists(e,t){return t="matrix-js-sdk:"+(t||"default"),a.exists(e,t)}constructor(e,t="default"){this.indexedDB=e,(0,r.default)(this,"dbName",void 0),(0,r.default)(this,"syncAccumulator",void 0),(0,r.default)(this,"db",void 0),(0,r.default)(this,"disconnected",!0),(0,r.default)(this,"_isNewlyCreated",!1),(0,r.default)(this,"isPersisting",!1),(0,r.default)(this,"pendingUserPresenceData",[]),this.dbName="matrix-js-sdk:"+t,this.syncAccumulator=new o.SyncAccumulator}connect(){if(!this.disconnected)return c.logger.log("LocalIndexedDBStoreBackend.connect: already connected or connecting"),Promise.resolve();this.disconnected=!1,c.logger.log("LocalIndexedDBStoreBackend.connect: connecting...");const e=this.indexedDB.open(this.dbName,h);return e.onupgradeneeded=t=>{const n=e.result,i=t.oldVersion;c.logger.log(`LocalIndexedDBStoreBackend.connect: upgrading from ${i}`),i<1&&(this._isNewlyCreated=!0),d.forEach(((e,t)=>{i<=t&&e(n)}))},e.onblocked=()=>{c.logger.log("can't yet open LocalIndexedDBStoreBackend because it is open elsewhere")},c.logger.log("LocalIndexedDBStoreBackend.connect: awaiting connection..."),m(e).then((async()=>{c.logger.log("LocalIndexedDBStoreBackend.connect: connected"),this.db=e.result,this.db.onversionchange=()=>{var e;null===(e=this.db)||void 0===e||e.close()},await this.init()}))}isNewlyCreated(){return Promise.resolve(this._isNewlyCreated)}init(){return Promise.all([this.loadAccountData(),this.loadSyncData()]).then((([e,t])=>{c.logger.log("LocalIndexedDBStoreBackend: loaded initial data"),this.syncAccumulator.accumulate({next_batch:t.nextBatch,rooms:t.roomsData,account_data:{events:e}},!0)}))}getOutOfBandMembers(e){return new Promise(((t,n)=>{const i=this.db.transaction(["oob_membership_events"],"readonly").objectStore("oob_membership_events").index("room"),r=IDBKeyRange.only(e),o=i.openCursor(r),s=[];let a=!1;o.onsuccess=()=>{const e=o.result;if(!e)return s.length||a?t(s):t(null);const n=e.value;n.oob_written?a=!0:s.push(n),e.continue()},o.onerror=e=>{n(e)}})).then((t=>(c.logger.log(`LL: got ${null==t?void 0:t.length} membershipEvents from storage for room ${e} ...`),t)))}async setOutOfBandMembers(e,t){c.logger.log(`LL: backend about to store ${t.length} members for ${e}`);const n=this.db.transaction(["oob_membership_events"],"readwrite"),i=n.objectStore("oob_membership_events");t.forEach((e=>{i.put(e)}));const r={room_id:e,oob_written:!0,state_key:0};i.put(r),await f(n),c.logger.log(`LL: backend done storing for ${e}!`)}async clearOutOfBandMembers(e){const t=this.db.transaction(["oob_membership_events"],"readonly").objectStore("oob_membership_events").index("room"),n=IDBKeyRange.only(e),i=g(t.openKeyCursor(n,"next")).then((e=>e&&e.primaryKey[1])),r=g(t.openKeyCursor(n,"prev")).then((e=>e&&e.primaryKey[1])),[o,s]=await Promise.all([i,r]),a=this.db.transaction(["oob_membership_events"],"readwrite").objectStore("oob_membership_events"),l=IDBKeyRange.bound([e,o],[e,s]);var u;c.logger.log(`LL: Deleting all users + marker in storage for room ${e}, with key range:`,[e,o],[e,s]),await(u=a.delete(l),new Promise(((e,t)=>{u.onsuccess=()=>e(u),u.onerror=e=>t(e)})))}clearDatabase(){return new Promise((e=>{c.logger.log(`Removing indexeddb instance: ${this.dbName}`);const t=this.indexedDB.deleteDatabase(this.dbName);t.onblocked=()=>{c.logger.log(`can't yet delete indexeddb ${this.dbName} because it is open elsewhere`)},t.onerror=()=>{c.logger.warn(`unable to delete js-sdk store indexeddb: ${t.error}`),e()},t.onsuccess=()=>{c.logger.log(`Removed indexeddb instance: ${this.dbName}`),e()}}))}getSavedSync(e=!0){const t=this.syncAccumulator.getJSON();return t.nextBatch?e?Promise.resolve(s.deepCopy(t)):Promise.resolve(t):Promise.resolve(null)}getNextBatchToken(){return Promise.resolve(this.syncAccumulator.getNextBatchToken())}setSyncData(e){return Promise.resolve().then((()=>{this.syncAccumulator.accumulate(e)}))}async syncToDatabase(e){if(this.isPersisting)return c.logger.warn("Skipping syncToDatabase() as persist already in flight"),void this.pendingUserPresenceData.push(...e);e.unshift(...this.pendingUserPresenceData),this.isPersisting=!0;try{const t=this.syncAccumulator.getJSON(!0);await Promise.all([this.persistUserPresenceEvents(e),this.persistAccountData(t.accountData),this.persistSyncData(t.nextBatch,t.roomsData)])}finally{this.isPersisting=!1}}persistSyncData(e,t){return c.logger.log("Persisting sync data up to",e),s.promiseTry((()=>{const n=this.db.transaction(["sync"],"readwrite");return n.objectStore("sync").put({clobber:"-",nextBatch:e,roomsData:t}),f(n).then((()=>{c.logger.log("Persisted sync data up to",e)}))}))}persistAccountData(e){return s.promiseTry((()=>{const t=this.db.transaction(["accountData"],"readwrite"),n=t.objectStore("accountData");for(const t of e)n.put(t);return f(t).then()}))}persistUserPresenceEvents(e){return s.promiseTry((()=>{const t=this.db.transaction(["users"],"readwrite"),n=t.objectStore("users");for(const t of e)n.put({userId:t[0],event:t[1]});return f(t).then()}))}getUserPresenceEvents(){return s.promiseTry((()=>p(this.db.transaction(["users"],"readonly").objectStore("users"),void 0,(e=>[e.value.userId,e.value.event]))))}loadAccountData(){return c.logger.log("LocalIndexedDBStoreBackend: loading account data..."),s.promiseTry((()=>p(this.db.transaction(["accountData"],"readonly").objectStore("accountData"),void 0,(e=>e.value)).then((e=>(c.logger.log("LocalIndexedDBStoreBackend: loaded account data"),e)))))}loadSyncData(){return c.logger.log("LocalIndexedDBStoreBackend: loading sync data..."),s.promiseTry((()=>p(this.db.transaction(["sync"],"readonly").objectStore("sync"),void 0,(e=>e.value)).then((e=>(c.logger.log("LocalIndexedDBStoreBackend: loaded sync data"),e.length>1&&c.logger.warn("loadSyncData: More than 1 sync row found."),e.length>0?e[0]:{})))))}getClientOptions(){return Promise.resolve().then((()=>p(this.db.transaction(["client_options"],"readonly").objectStore("client_options"),void 0,(e=>{var t;return null===(t=e.value)||void 0===t?void 0:t.options})).then((e=>e[0]))))}async storeClientOptions(e){const t=this.db.transaction(["client_options"],"readwrite");t.objectStore("client_options").put({clobber:"-",options:e}),await f(t)}async saveToDeviceBatches(e){const t=this.db.transaction(["to_device_queue"],"readwrite"),n=t.objectStore("to_device_queue");for(const t of e)n.add(t);await f(t)}async getOldestToDeviceBatch(){const e=this.db.transaction(["to_device_queue"],"readonly").objectStore("to_device_queue"),t=await g(e.openCursor());if(!t)return null;const n=t.value;return{id:t.key,txnId:n.txnId,eventType:n.eventType,batch:n.batch}}async removeToDeviceBatch(e){const t=this.db.transaction(["to_device_queue"],"readwrite");t.objectStore("to_device_queue").delete(e),await f(t)}}},64215:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteIndexedDBStoreBackend=void 0;var r=i(n(59713)),o=n(7434),s=n(3102);t.RemoteIndexedDBStoreBackend=class{constructor(e,t){this.workerFactory=e,this.dbName=t,(0,r.default)(this,"worker",void 0),(0,r.default)(this,"nextSeq",0),(0,r.default)(this,"inFlight",{}),(0,r.default)(this,"startPromise",void 0),(0,r.default)(this,"onWorkerMessage",(e=>{const t=e.data;if("cmd_success"==t.command||"cmd_fail"==t.command){if(void 0===t.seq)return void o.logger.error("Got reply from worker with no seq");const e=this.inFlight[t.seq];if(void 0===e)return void o.logger.error("Got reply for unknown seq "+t.seq);if(delete this.inFlight[t.seq],"cmd_success"==t.command)e.resolve(t.result);else{const n=new Error(t.error.message);n.name=t.error.name,e.reject(n)}}else o.logger.warn("Unrecognised message from worker: ",t)}))}connect(){return this.ensureStarted().then((()=>this.doCmd("connect")))}clearDatabase(){return this.ensureStarted().then((()=>this.doCmd("clearDatabase")))}isNewlyCreated(){return this.doCmd("isNewlyCreated")}getSavedSync(){return this.doCmd("getSavedSync")}getNextBatchToken(){return this.doCmd("getNextBatchToken")}setSyncData(e){return this.doCmd("setSyncData",[e])}syncToDatabase(e){return this.doCmd("syncToDatabase",[e])}getOutOfBandMembers(e){return this.doCmd("getOutOfBandMembers",[e])}setOutOfBandMembers(e,t){return this.doCmd("setOutOfBandMembers",[e,t])}clearOutOfBandMembers(e){return this.doCmd("clearOutOfBandMembers",[e])}getClientOptions(){return this.doCmd("getClientOptions")}storeClientOptions(e){return this.doCmd("storeClientOptions",[e])}getUserPresenceEvents(){return this.doCmd("getUserPresenceEvents")}async saveToDeviceBatches(e){return this.doCmd("saveToDeviceBatches",[e])}async getOldestToDeviceBatch(){return this.doCmd("getOldestToDeviceBatch")}async removeToDeviceBatch(e){return this.doCmd("removeToDeviceBatch",[e])}ensureStarted(){return this.startPromise||(this.worker=this.workerFactory(),this.worker.onmessage=this.onWorkerMessage,this.startPromise=this.doCmd("setupWorker",[this.dbName]).then((()=>{o.logger.log("IndexedDB worker is ready")}))),this.startPromise}doCmd(e,t){return Promise.resolve().then((()=>{var n;const i=this.nextSeq++,r=(0,s.defer)();return this.inFlight[i]=r,null===(n=this.worker)||void 0===n||n.postMessage({command:e,seq:i,args:t}),r.promise}))}}},99789:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDBStore=void 0;var r=i(n(59713)),o=n(11703),s=n(53861),a=n(64215),c=n(83998),l=n(24369),u=n(7434),d=n(55861);class h extends o.MemoryStore{static exists(e,t){return s.LocalIndexedDBStoreBackend.exists(e,t)}constructor(e){if(super(e),(0,r.default)(this,"backend",void 0),(0,r.default)(this,"startedUp",!1),(0,r.default)(this,"syncTs",0),(0,r.default)(this,"userModifiedMap",{}),(0,r.default)(this,"emitter",new d.TypedEventEmitter),(0,r.default)(this,"on",this.emitter.on.bind(this.emitter)),(0,r.default)(this,"getSavedSync",this.degradable((()=>this.backend.getSavedSync()),"getSavedSync")),(0,r.default)(this,"isNewlyCreated",this.degradable((()=>this.backend.isNewlyCreated()),"isNewlyCreated")),(0,r.default)(this,"getSavedSyncToken",this.degradable((()=>this.backend.getNextBatchToken()),"getSavedSyncToken")),(0,r.default)(this,"deleteAllData",this.degradable((()=>(super.deleteAllData(),this.backend.clearDatabase().then((()=>{u.logger.log("Deleted indexeddb data.")}),(e=>{throw u.logger.error(`Failed to delete indexeddb data: ${e}`),e})))))),(0,r.default)(this,"reallySave",this.degradable((()=>{this.syncTs=Date.now();const e=[];for(const t of this.getUsers())this.userModifiedMap[t.userId]!==t.getLastModifiedTime()&&t.events.presence&&(e.push([t.userId,t.events.presence.event]),this.userModifiedMap[t.userId]=t.getLastModifiedTime());return this.backend.syncToDatabase(e)}))),(0,r.default)(this,"setSyncData",this.degradable((e=>this.backend.setSyncData(e)),"setSyncData")),(0,r.default)(this,"getOutOfBandMembers",this.degradable((e=>this.backend.getOutOfBandMembers(e)),"getOutOfBandMembers")),(0,r.default)(this,"setOutOfBandMembers",this.degradable(((e,t)=>(super.setOutOfBandMembers(e,t),this.backend.setOutOfBandMembers(e,t))),"setOutOfBandMembers")),(0,r.default)(this,"clearOutOfBandMembers",this.degradable((e=>(super.clearOutOfBandMembers(e),this.backend.clearOutOfBandMembers(e))),"clearOutOfBandMembers")),(0,r.default)(this,"getClientOptions",this.degradable((()=>this.backend.getClientOptions()),"getClientOptions")),(0,r.default)(this,"storeClientOptions",this.degradable((e=>(super.storeClientOptions(e),this.backend.storeClientOptions(e))),"storeClientOptions")),!e.indexedDB)throw new Error("Missing required option: indexedDB");e.workerFactory?this.backend=new a.RemoteIndexedDBStoreBackend(e.workerFactory,e.dbName):this.backend=new s.LocalIndexedDBStoreBackend(e.indexedDB,e.dbName)}startup(){return this.startedUp?(u.logger.log("IndexedDBStore.startup: already started"),Promise.resolve()):(u.logger.log("IndexedDBStore.startup: connecting to backend"),this.backend.connect().then((()=>(u.logger.log("IndexedDBStore.startup: loading presence events"),this.backend.getUserPresenceEvents()))).then((e=>{u.logger.log("IndexedDBStore.startup: processing presence events"),e.forEach((([e,t])=>{const n=new c.User(e);t&&n.setPresenceEvent(new l.MatrixEvent(t)),this.userModifiedMap[n.userId]=n.getLastModifiedTime(),this.storeUser(n)}))})))}wantsSave(){return Date.now()-this.syncTs>3e5}save(e=!1){return e||this.wantsSave()?this.reallySave():Promise.resolve()}degradable(e,t){const n=t?super[t]:null;return async(...t)=>{try{return await e.call(this,...t)}catch(e){u.logger.error("IndexedDBStore failure, degrading to MemoryStore",e),this.emitter.emit("degraded",e);try{u.logger.log("IndexedDBStore trying to delete degraded data"),await this.backend.clearDatabase(),u.logger.log("IndexedDBStore delete after degrading succeeded")}catch(e){u.logger.warn("IndexedDBStore delete after degrading failed",e)}if(n)return n.call(this,...t)}}}async getPendingEvents(e){if(!this.localStorage)return super.getPendingEvents(e);const t=this.localStorage.getItem(p(e));if(t)try{return JSON.parse(t)}catch(e){u.logger.error("Could not parse persisted pending events",e)}return[]}async setPendingEvents(e,t){if(!this.localStorage)return super.setPendingEvents(e,t);t.length>0?this.localStorage.setItem(p(e),JSON.stringify(t)):this.localStorage.removeItem(p(e))}saveToDeviceBatches(e){return this.backend.saveToDeviceBatches(e)}getOldestToDeviceBatch(){return this.backend.getOldestToDeviceBatch()}removeToDeviceBatch(e){return this.backend.removeToDeviceBatch(e)}}function p(e){return`mx_pending_events_${e}`}t.IndexedDBStore=h},11703:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStore=void 0;var r=i(n(59713)),o=n(83998),s=n(26860);function a(e){return"string"==typeof e&&!!e&&"undefined"!==e&&"null"!==e||"number"==typeof e}t.MemoryStore=class{constructor(e={}){(0,r.default)(this,"rooms",{}),(0,r.default)(this,"users",{}),(0,r.default)(this,"syncToken",null),(0,r.default)(this,"filters",{}),(0,r.default)(this,"accountData",{}),(0,r.default)(this,"localStorage",void 0),(0,r.default)(this,"oobMembers",{}),(0,r.default)(this,"pendingEvents",{}),(0,r.default)(this,"clientOptions",void 0),(0,r.default)(this,"pendingToDeviceBatches",[]),(0,r.default)(this,"nextToDeviceBatchId",0),(0,r.default)(this,"onRoomMember",((e,t,n)=>{if("invite"===n.membership)return;const i=this.users[n.userId]||new o.User(n.userId);n.name&&(i.setDisplayName(n.name),n.events.member&&i.setRawDisplayName(n.events.member.getDirectionalContent().displayname)),n.events.member&&n.events.member.getContent().avatar_url&&i.setAvatarUrl(n.events.member.getContent().avatar_url),this.users[i.userId]=i})),this.localStorage=e.localStorage}getSyncToken(){return this.syncToken}isNewlyCreated(){return Promise.resolve(!0)}setSyncToken(e){this.syncToken=e}storeRoom(e){this.rooms[e.roomId]=e,e.currentState.on(s.RoomStateEvent.Members,this.onRoomMember),e.currentState.getMembers().forEach((t=>{this.onRoomMember(null,e.currentState,t)}))}getRoom(e){return this.rooms[e]||null}getRooms(){return Object.values(this.rooms)}removeRoom(e){this.rooms[e]&&this.rooms[e].currentState.removeListener(s.RoomStateEvent.Members,this.onRoomMember),delete this.rooms[e]}getRoomSummaries(){return Object.values(this.rooms).map((function(e){return e.summary}))}storeUser(e){this.users[e.userId]=e}getUser(e){return this.users[e]||null}getUsers(){return Object.values(this.users)}scrollback(e,t){return[]}storeEvents(e,t,n,i){}storeFilter(e){null!=e&&e.userId&&null!=e&&e.filterId&&(this.filters[e.userId]||(this.filters[e.userId]={}),this.filters[e.userId][e.filterId]=e)}getFilter(e,t){return this.filters[e]&&this.filters[e][t]?this.filters[e][t]:null}getFilterIdByName(e){if(!this.localStorage)return null;const t="mxjssdk_memory_filter_"+e;try{const e=this.localStorage.getItem(t);if(a(e))return e}catch(e){}return null}setFilterIdByName(e,t){if(!this.localStorage)return;const n="mxjssdk_memory_filter_"+e;try{a(t)?this.localStorage.setItem(n,t):this.localStorage.removeItem(n)}catch(e){}}storeAccountDataEvents(e){e.forEach((e=>{this.accountData[e.getType()]=e}))}getAccountData(e){return this.accountData[e]}setSyncData(e){return Promise.resolve()}wantsSave(){return!1}save(e){}startup(){return Promise.resolve()}getSavedSync(){return Promise.resolve(null)}getSavedSyncToken(){return Promise.resolve(null)}deleteAllData(){return this.rooms={},this.users={},this.syncToken=null,this.filters={},this.accountData={},Promise.resolve()}getOutOfBandMembers(e){return Promise.resolve(this.oobMembers[e]||null)}setOutOfBandMembers(e,t){return this.oobMembers[e]=t,Promise.resolve()}clearOutOfBandMembers(e){return this.oobMembers={},Promise.resolve()}getClientOptions(){return Promise.resolve(this.clientOptions)}storeClientOptions(e){return this.clientOptions=Object.assign({},e),Promise.resolve()}async getPendingEvents(e){var t;return null!==(t=this.pendingEvents[e])&&void 0!==t?t:[]}async setPendingEvents(e,t){this.pendingEvents[e]=t}saveToDeviceBatches(e){for(const t of e)this.pendingToDeviceBatches.push({id:this.nextToDeviceBatchId++,eventType:t.eventType,txnId:t.txnId,batch:t.batch});return Promise.resolve()}async getOldestToDeviceBatch(){return 0===this.pendingToDeviceBatches.length?null:this.pendingToDeviceBatches[0]}removeToDeviceBatch(e){return this.pendingToDeviceBatches=this.pendingToDeviceBatches.filter((t=>t.id!==e)),Promise.resolve()}}},25641:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.StubStore=void 0;var r=i(n(59713));t.StubStore=class{constructor(){(0,r.default)(this,"accountData",{}),(0,r.default)(this,"fromToken",null)}isNewlyCreated(){return Promise.resolve(!0)}getSyncToken(){return this.fromToken}setSyncToken(e){this.fromToken=e}storeRoom(e){}getRoom(e){return null}getRooms(){return[]}removeRoom(e){}getRoomSummaries(){return[]}storeUser(e){}getUser(e){return null}getUsers(){return[]}scrollback(e,t){return[]}storeEvents(e,t,n,i){}storeFilter(e){}getFilter(e,t){return null}getFilterIdByName(e){return null}setFilterIdByName(e,t){}storeAccountDataEvents(e){}getAccountData(e){}setSyncData(e){return Promise.resolve()}wantsSave(){return!1}save(){}startup(){return Promise.resolve()}getSavedSync(){return Promise.resolve(null)}getSavedSyncToken(){return Promise.resolve(null)}deleteAllData(){return Promise.resolve()}getOutOfBandMembers(){return Promise.resolve(null)}setOutOfBandMembers(e,t){return Promise.resolve()}clearOutOfBandMembers(){return Promise.resolve()}getClientOptions(){return Promise.resolve(void 0)}storeClientOptions(e){return Promise.resolve()}async getPendingEvents(e){return[]}setPendingEvents(e,t){return Promise.resolve()}async saveToDeviceBatches(e){return Promise.resolve()}getOldestToDeviceBatch(){return Promise.resolve(null)}async removeToDeviceBatch(e){return Promise.resolve()}}},22741:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SyncAccumulator=t.Category=void 0;var r=i(n(59713)),o=n(7434),s=n(3102),a=n(42481),c=n(95550),l=n(1467);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let h;function p(e,t){null!==t.state_key&&void 0!==t.state_key&&t.type&&(e[t.type]||(e[t.type]=Object.create(null)),e[t.type][t.state_key]=t)}t.Category=h,function(e){e.Invite="invite",e.Leave="leave",e.Join="join"}(h||(t.Category=h={})),t.SyncAccumulator=class{constructor(e={}){this.opts=e,(0,r.default)(this,"accountData",{}),(0,r.default)(this,"inviteRooms",{}),(0,r.default)(this,"joinRooms",{}),(0,r.default)(this,"nextBatch",null),this.opts.maxTimelineEntries=this.opts.maxTimelineEntries||50}accumulate(e,t=!1){this.accumulateRooms(e,t),this.accumulateAccountData(e),this.nextBatch=e.next_batch}accumulateAccountData(e){e.account_data&&e.account_data.events&&e.account_data.events.forEach((e=>{this.accountData[e.type]=e}))}accumulateRooms(e,t=!1){e.rooms&&(e.rooms.invite&&Object.keys(e.rooms.invite).forEach((n=>{this.accumulateRoom(n,h.Invite,e.rooms.invite[n],t)})),e.rooms.join&&Object.keys(e.rooms.join).forEach((n=>{this.accumulateRoom(n,h.Join,e.rooms.join[n],t)})),e.rooms.leave&&Object.keys(e.rooms.leave).forEach((n=>{this.accumulateRoom(n,h.Leave,e.rooms.leave[n],t)})))}accumulateRoom(e,t,n,i=!1){switch(t){case h.Invite:this.accumulateInviteState(e,n);break;case h.Join:this.inviteRooms[e]&&delete this.inviteRooms[e],this.accumulateJoinState(e,n,i);break;case h.Leave:this.inviteRooms[e]?delete this.inviteRooms[e]:delete this.joinRooms[e];break;default:o.logger.error("Unknown cateogory: ",t)}}accumulateInviteState(e,t){if(!t.invite_state||!t.invite_state.events)return;if(!this.inviteRooms[e])return void(this.inviteRooms[e]={invite_state:t.invite_state});const n=this.inviteRooms[e];t.invite_state.events.forEach((e=>{let t=!1;for(let i=0;i<n.invite_state.events.length;i++){const r=n.invite_state.events[i];r.type===e.type&&r.state_key==e.state_key&&(n.invite_state.events[i]=e,t=!0)}t||n.invite_state.events.push(e)}))}accumulateJoinState(e,t,n=!1){var i,r,o,u;this.joinRooms[e]||(this.joinRooms[e]={_currentState:Object.create(null),_timeline:[],_accountData:Object.create(null),_unreadNotifications:{},_unreadThreadNotifications:{},_summary:{},_readReceipts:{},_threadReadReceipts:{}});const h=this.joinRooms[e];if(t.account_data&&t.account_data.events&&t.account_data.events.forEach((e=>{h._accountData[e.type]=e})),t.unread_notifications&&(h._unreadNotifications=t.unread_notifications),h._unreadThreadNotifications=null!==(i=null!==(r=t[l.UNREAD_THREAD_NOTIFICATIONS.stable])&&void 0!==r?r:t[l.UNREAD_THREAD_NOTIFICATIONS.unstable])&&void 0!==i?i:void 0,t.summary){const e="m.heroes",n="m.invited_member_count",i="m.joined_member_count",r=h._summary,o=t.summary;r[e]=o[e]||r[e],r[i]=o[i]||r[i],r[n]=o[n]||r[n]}if(null===(o=t.ephemeral)||void 0===o||null===(u=o.events)||void 0===u||u.forEach((e=>{e.type===a.EventType.Receipt&&e.content&&Object.keys(e.content).forEach((t=>{Object.entries(e.content[t]).forEach((([n,i])=>{if((0,s.isSupportedReceiptType)(n))for(const o of Object.keys(i)){const i=e.content[t][n][o],s={data:e.content[t][n][o],type:n,eventId:t};var r;i.thread_id&&i.thread_id!==c.MAIN_ROOM_TIMELINE?h._threadReadReceipts=d(d({},h._threadReadReceipts),{},{[i.thread_id]:d(d({},null!==(r=h._threadReadReceipts[i.thread_id])&&void 0!==r?r:{}),{},{[o]:s})}):h._readReceipts[o]=s}}))}))})),t.timeline&&t.timeline.limited&&(h._timeline=[]),t.state&&t.state.events&&t.state.events.forEach((e=>{p(h._currentState,e)})),t.timeline&&t.timeline.events&&t.timeline.events.forEach(((e,i)=>{var r;let o;if(p(h._currentState,e),n)o=e;else{o=Object.assign({},e),void 0!==o.unsigned&&(o.unsigned=Object.assign({},o.unsigned));const t=e.unsigned?e.unsigned.age:e.age;void 0!==t&&(o._localTs=Date.now()-t)}h._timeline.push({event:o,token:0===i&&null!==(r=t.timeline.prev_batch)&&void 0!==r?r:null})})),h._timeline.length>this.opts.maxTimelineEntries)for(let e=h._timeline.length-this.opts.maxTimelineEntries;e<h._timeline.length;e++)if(h._timeline[e].token){h._timeline=h._timeline.slice(e,h._timeline.length);break}}getJSON(e=!1){const t={join:{},invite:{},leave:{}};Object.keys(this.inviteRooms).forEach((e=>{t.invite[e]=this.inviteRooms[e]})),Object.keys(this.joinRooms).forEach((n=>{const i=this.joinRooms[n],r={ephemeral:{events:[]},account_data:{events:[]},state:{events:[]},timeline:{events:[],prev_batch:null},unread_notifications:i._unreadNotifications,unread_thread_notifications:i._unreadThreadNotifications,summary:i._summary};Object.keys(i._accountData).forEach((e=>{r.account_data.events.push(i._accountData[e])}));const o={type:a.EventType.Receipt,room_id:n,content:{}};for(const[e,t]of Object.entries(i._readReceipts))o.content[t.eventId]||(o.content[t.eventId]={}),o.content[t.eventId][t.type]||(o.content[t.eventId][t.type]={}),o.content[t.eventId][t.type][e]=t.data;for(const e of Object.values(i._threadReadReceipts))for(const[t,n]of Object.entries(e))o.content[n.eventId]||(o.content[n.eventId]={}),o.content[n.eventId][n.type]||(o.content[n.eventId][n.type]={}),o.content[n.eventId][n.type][t]=n.data;Object.keys(o.content).length>0&&r.ephemeral.events.push(o),i._timeline.forEach((t=>{if(!r.timeline.prev_batch){if(!t.token)return;r.timeline.prev_batch=t.token}let n;!e&&t.event._localTs?(n=Object.assign({},t.event),void 0!==n.unsigned&&(n.unsigned=Object.assign({},n.unsigned)),delete n._localTs,n.unsigned=n.unsigned||{},n.unsigned.age=Date.now()-t.event._localTs):n=t.event,r.timeline.events.push(n)}));const c=Object.create(null);for(let e=r.timeline.events.length-1;e>=0;e--){const t=r.timeline.events[e];if(null===t.state_key||void 0===t.state_key)continue;const n=(0,s.deepCopy)(t);n.unsigned&&(n.unsigned.prev_content&&(n.content=n.unsigned.prev_content),n.unsigned.prev_sender&&(n.sender=n.unsigned.prev_sender)),p(c,n)}Object.keys(i._currentState).forEach((e=>{Object.keys(i._currentState[e]).forEach((t=>{let n=i._currentState[e][t];c[e]&&c[e][t]&&(n=c[e][t]),r.state.events.push(n)}))})),t.join[n]=r}));const n=[];return Object.keys(this.accountData).forEach((e=>{n.push(this.accountData[e])})),{nextBatch:this.nextBatch,roomsData:t,accountData:n}}getNextBatchToken(){return this.nextBatch}}},64551:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SyncState=t.SyncApi=void 0,t._createAndReEmitRoom=k;var r=i(n(59713)),o=n(83998),s=n(27366),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(3102)),c=n(27906),l=n(88910),u=n(31707),d=n(7434),h=n(19489),p=n(62168),f=n(30095),m=n(42481),g=n(26860),v=n(32848),y=n(26320),b=n(1467),E=n(25268);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}let w;t.SyncState=w,function(e){e.Error="ERROR",e.Prepared="PREPARED",e.Stopped="STOPPED",e.Syncing="SYNCING",e.Catchup="CATCHUP",e.Reconnecting="RECONNECTING"}(w||(t.SyncState=w={}));const _=["org.matrix.msc2716v3"];function T(e,t){return`FILTER_SYNC_${e}`+(t?"_"+t:"")}function x(...e){d.logger.log(...e)}var C;function I(e,t){const n=new o.User(t);return e.reEmitter.reEmit(n,[o.UserEvent.AvatarUrl,o.UserEvent.DisplayName,o.UserEvent.Presence,o.UserEvent.CurrentlyActive,o.UserEvent.LastPresenceTs]),n}function k(e,t,n){const{timelineSupport:i}=e,r=new s.Room(t,e,e.getUserId(),{lazyLoadMembers:n.lazyLoadMembers,pendingEventOrdering:n.pendingEventOrdering,timelineSupport:i});return e.reEmitter.reEmit(r,[s.RoomEvent.Name,s.RoomEvent.Redaction,s.RoomEvent.RedactionCancelled,s.RoomEvent.Receipt,s.RoomEvent.Tags,s.RoomEvent.LocalEchoUpdated,s.RoomEvent.AccountData,s.RoomEvent.MyMembership,s.RoomEvent.Timeline,s.RoomEvent.TimelineReset,g.RoomStateEvent.Events,g.RoomStateEvent.Members,g.RoomStateEvent.NewMember,g.RoomStateEvent.Update,y.BeaconEvent.New,y.BeaconEvent.Update,y.BeaconEvent.Destroy,y.BeaconEvent.LivenessChange]),r.on(g.RoomStateEvent.NewMember,((t,n,i)=>{var r;i.user=null!==(r=e.getUser(i.userId))&&void 0!==r?r:void 0,e.reEmitter.reEmit(i,[v.RoomMemberEvent.Name,v.RoomMemberEvent.Typing,v.RoomMemberEvent.PowerLevel,v.RoomMemberEvent.Membership])})),r}!function(e){e.Offline="offline",e.Online="online",e.Unavailable="unavailable"}(C||(C={})),t.SyncApi=class{constructor(e,t={}){var n;this.client=e,this.opts=t,(0,r.default)(this,"_peekRoom",null),(0,r.default)(this,"currentSyncRequest",void 0),(0,r.default)(this,"abortController",void 0),(0,r.default)(this,"syncState",null),(0,r.default)(this,"syncStateData",void 0),(0,r.default)(this,"catchingUp",!1),(0,r.default)(this,"running",!1),(0,r.default)(this,"keepAliveTimer",void 0),(0,r.default)(this,"connectionReturnedDefer",void 0),(0,r.default)(this,"notifEvents",[]),(0,r.default)(this,"failedSyncCount",0),(0,r.default)(this,"storeIsInvalid",!1),(0,r.default)(this,"getPushRules",(async()=>{try{x("Getting push rules...");const e=await this.client.getPushRules();x("Got push rules"),this.client.pushRules=e}catch(e){if(d.logger.error("Getting push rules failed",e),this.shouldAbortSync(e))return;return x("Waiting for saved sync before retrying push rules..."),await this.recoverFromSyncStartupError(this.savedSyncPromise,e),this.getPushRules()}})),(0,r.default)(this,"buildDefaultFilter",(()=>{const e=new c.Filter(this.client.credentials.userId);return this.client.canSupport.get(E.Feature.ThreadUnreadNotifications)!==E.ServerSupport.Unsupported&&e.setUnreadThreadNotifications(!0),e})),(0,r.default)(this,"checkLazyLoadStatus",(async()=>{if(x("Checking lazy load status..."),this.opts.lazyLoadMembers&&this.client.isGuest()&&(this.opts.lazyLoadMembers=!1),this.opts.lazyLoadMembers&&(x("Checking server lazy load support..."),await this.client.doesServerSupportLazyLoading()?(x("Enabling lazy load on sync filter..."),this.opts.filter||(this.opts.filter=this.buildDefaultFilter()),this.opts.filter.setLazyLoadMembers(!0)):(x("LL: lazy loading requested but not supported by server, so disabling"),this.opts.lazyLoadMembers=!1)),x("Checking whether lazy loading has changed in store..."),await this.wasLazyLoadingToggled(this.opts.lazyLoadMembers)){this.storeIsInvalid=!0;const e=new h.InvalidStoreError(h.InvalidStoreState.ToggledLazyLoading,!!this.opts.lazyLoadMembers);return this.updateSyncState(w.Error,{error:e}),void d.logger.warn("InvalidStoreError: store is not usable: stopping sync.")}var e;this.opts.lazyLoadMembers&&(null===(e=this.opts.crypto)||void 0===e||e.enableLazyLoading());try{x("Storing client options..."),await this.client.storeClientOptions(),x("Stored client options")}catch(e){throw d.logger.error("Storing client options failed",e),e}})),(0,r.default)(this,"getFilter",(async()=>{let e,t;x("Getting filter..."),e=this.opts.filter?this.opts.filter:this.buildDefaultFilter();try{t=await this.client.getOrCreateFilter(T(this.client.credentials.userId),e)}catch(e){return d.logger.error("Getting filter failed",e),this.shouldAbortSync(e)?{}:(x("Waiting for saved sync before retrying filter..."),await this.recoverFromSyncStartupError(this.savedSyncPromise,e),this.getFilter())}return{filter:e,filterId:t}})),(0,r.default)(this,"savedSyncPromise",void 0),(0,r.default)(this,"onOnline",(()=>{x("Browser thinks we are back online"),this.startKeepAlives(0)})),this.opts.initialSyncLimit=null!==(n=this.opts.initialSyncLimit)&&void 0!==n?n:8,this.opts.resolveInvitesToProfiles=this.opts.resolveInvitesToProfiles||!1,this.opts.pollTimeout=this.opts.pollTimeout||3e4,this.opts.pendingEventOrdering=this.opts.pendingEventOrdering||p.PendingEventOrdering.Chronological,this.opts.experimentalThreadSupport=!0===this.opts.experimentalThreadSupport,t.canResetEntireTimeline||(t.canResetEntireTimeline=e=>!1),e.getNotifTimelineSet()&&e.reEmitter.reEmit(e.getNotifTimelineSet(),[s.RoomEvent.Timeline,s.RoomEvent.TimelineReset])}createRoom(e){const t=k(this.client,e,this.opts);return t.on(g.RoomStateEvent.Marker,((e,n)=>{this.onMarkerStateEvent(t,e,n)})),t}onMarkerStateEvent(e,t,{timelineWasEmpty:n}={}){n?d.logger.debug(`MarkerState: Ignoring markerEventId=${t.getId()} in roomId=${e.roomId} because the timeline was empty before the marker arrived which means there is nothing to refresh.`):_.includes(e.getVersion())||t.getSender()===e.getCreator()?(d.logger.debug(`MarkerState: Timeline needs to be refreshed because a new markerEventId=${t.getId()} was sent in roomId=${e.roomId}`),e.setTimelineNeedsRefresh(!0),e.emit(s.RoomEvent.HistoryImportedWithinTimeline,t,e)):d.logger.debug(`MarkerState: Ignoring markerEventId=${t.getId()} in roomId=${e.roomId} because MSC2716 is not supported in the room version or for any room version, the marker wasn't sent by the room creator.`)}async syncLeftRooms(){var e;const t=this.client,n=new c.Filter(this.client.credentials.userId);n.setTimelineLimit(1),n.setIncludeLeaveRooms(!0);const i=this.opts.pollTimeout+8e4,r={timeout:0,filter:await t.getOrCreateFilter(T(t.credentials.userId,"LEFT_ROOMS"),n)},o=await t.http.authedRequest(f.Method.Get,"/sync",r,void 0,{localTimeoutMs:i});let s=[];return null!==(e=o.rooms)&&void 0!==e&&e.leave&&(s=this.mapSyncResponseToRoomArray(o.rooms.leave)),(await Promise.all(s.map((async e=>{const n=e.room;if(!e.isBrandNewRoom)return;e.timeline=e.timeline||{prev_batch:null,events:[]};const i=this.mapSyncEventsFormat(e.timeline,n),r=this.mapSyncEventsFormat(e.state,n);return n.getLiveTimeline().setPaginationToken(e.timeline.prev_batch,l.EventTimeline.BACKWARDS),await this.injectRoomEvents(n,r,i),n.recalculate(),t.store.storeRoom(n),t.emit(p.ClientEvent.Room,n),this.processEventsForNotifs(n,i),n})))).filter(Boolean)}peek(e){var t;if((null===(t=this._peekRoom)||void 0===t?void 0:t.roomId)===e)return Promise.resolve(this._peekRoom);const n=this.client;return this._peekRoom=this.createRoom(e),this.client.roomInitialSync(e,20).then((e=>{e.messages=e.messages||{chunk:[]},e.messages.chunk=e.messages.chunk||[],e.state=e.state||[];const t=a.deepCopy(e.state).map(n.getEventMapper()),i=e.state.map(n.getEventMapper()),r=e.messages.chunk.map(n.getEventMapper());return Array.isArray(e.presence)&&e.presence.map(n.getEventMapper()).forEach((function(e){let t=n.store.getUser(e.getContent().user_id);t?t.setPresenceEvent(e):(t=I(n,e.getContent().user_id),t.setPresenceEvent(e),n.store.storeUser(t)),n.emit(p.ClientEvent.Event,e)})),e.messages.start&&(this._peekRoom.oldState.paginationToken=e.messages.start),this._peekRoom.oldState.setStateEvents(t),this._peekRoom.currentState.setStateEvents(i),this.resolveInvites(this._peekRoom),this._peekRoom.recalculate(),this._peekRoom.addEventsToTimeline(r.reverse(),!0,this._peekRoom.getLiveTimeline(),e.messages.start),n.store.storeRoom(this._peekRoom),n.emit(p.ClientEvent.Room,this._peekRoom),this.peekPoll(this._peekRoom),this._peekRoom}))}stopPeeking(){this._peekRoom=null}peekPoll(e,t){var n;this._peekRoom===e?this.client.http.authedRequest(f.Method.Get,"/events",{room_id:e.roomId,timeout:String(3e4),from:t},void 0,{localTimeoutMs:5e4,abortSignal:null===(n=this.abortController)||void 0===n?void 0:n.signal}).then((t=>{if(this._peekRoom!==e)return void x("Stopped peeking in room %s",e.roomId);t.chunk.filter((function(e){return"m.presence"===e.type})).map(this.client.getEventMapper()).forEach((e=>{let t=this.client.store.getUser(e.getContent().user_id);t?t.setPresenceEvent(e):(t=I(this.client,e.getContent().user_id),t.setPresenceEvent(e),this.client.store.storeUser(t)),this.client.emit(p.ClientEvent.Event,e)}));const n=t.chunk.filter((function(t){return t.room_id===e.roomId&&t.event_id})).map(this.client.getEventMapper());e.addLiveEvents(n),this.peekPoll(e,t.end)}),(n=>{d.logger.error("[%s] Peek poll failed: %s",e.roomId,n),setTimeout((()=>{this.peekPoll(e,t)}),3e4)})):x("Stopped peeking in room %s",e.roomId)}getSyncState(){return this.syncState}getSyncStateData(){var e;return null!==(e=this.syncStateData)&&void 0!==e?e:null}async recoverFromSyncStartupError(e,t){await e;const n=this.startKeepAlives();this.updateSyncState(w.Error,{error:t}),await n}async wasLazyLoadingToggled(e=!1){let t=!1;if(!await this.client.store.isNewlyCreated()){const n=await this.client.store.getClientOptions();return n&&(t=!!n.lazyLoadMembers),t!==e}return!1}shouldAbortSync(e){return"M_UNKNOWN_TOKEN"===e.errcode&&(d.logger.warn("Token no longer valid - assuming logout"),this.stop(),this.updateSyncState(w.Error,{error:e}),!0)}async sync(){var e,t;if(this.running=!0,this.abortController=new AbortController,null===(e=n.g.window)||void 0===e||null===(t=e.addEventListener)||void 0===t||t.call(e,"online",this.onOnline,!1),this.client.isGuest())return this.doSync({});x("Getting saved sync token...");const i=this.client.store.getSavedSyncToken().then((e=>(x("Got saved sync token"),e)));this.savedSyncPromise=this.client.store.getSavedSync().then((e=>{if(x(`Got reply from saved sync, exists? ${!!e}`),e)return this.syncFromCache(e)})).catch((e=>{d.logger.error("Getting saved sync failed",e)})),await this.getPushRules(),await this.checkLazyLoadStatus();const{filterId:r,filter:o}=await this.getFilter();if(o){if(this.client.resetNotifTimelineSet(),!this.currentSyncRequest){let e=r;const t=await i;if(t)x("Sending first sync request...");else{x("Sending initial sync request...");const t=this.buildDefaultFilter();t.setDefinition(o.getDefinition()),t.setTimelineLimit(this.opts.initialSyncLimit),e=JSON.stringify(t.getDefinition())}this.currentSyncRequest=this.doSyncRequest({filter:e},t)}return x("Waiting for saved sync before starting sync processing..."),await this.savedSyncPromise,this.doSync({filter:r})}}stop(){var e,t,i;x("SyncApi.stop"),null===(e=n.g.window)||void 0===e||null===(t=e.removeEventListener)||void 0===t||t.call(e,"online",this.onOnline,!1),this.running=!1,null===(i=this.abortController)||void 0===i||i.abort(),this.keepAliveTimer&&(clearTimeout(this.keepAliveTimer),this.keepAliveTimer=void 0)}retryImmediately(){return!!this.connectionReturnedDefer&&(this.startKeepAlives(0),!0)}async syncFromCache(e){x("sync(): not doing HTTP hit, instead returning stored /sync data");const t=e.nextBatch;this.client.store.setSyncToken(t);const n={nextSyncToken:t,catchingUp:!1,fromCache:!0},i={next_batch:t,rooms:e.roomsData,account_data:{events:e.accountData}};try{await this.processSyncResponse(n,i)}catch(e){d.logger.error("Error processing cached sync",e)}this.storeIsInvalid||this.updateSyncState(w.Prepared,n)}async doSync(e){for(;this.running;){const t=this.client.store.getSyncToken();let n;try{this.currentSyncRequest||(this.currentSyncRequest=this.doSyncRequest(e,t)),n=await this.currentSyncRequest}catch(e){if(await this.onSyncError(e))return;continue}finally{this.currentSyncRequest=void 0}this.client.store.setSyncToken(n.next_batch),this.failedSyncCount=0,await this.client.store.setSyncData(n);const i={oldSyncToken:null!=t?t:void 0,nextSyncToken:n.next_batch,catchingUp:this.catchingUp};this.opts.crypto&&await this.opts.crypto.onSyncWillProcess(i);try{await this.processSyncResponse(i,n)}catch(e){d.logger.error("Caught /sync error",e),this.client.emit(p.ClientEvent.SyncUnexpectedError,e)}i.catchingUp=this.catchingUp,e.hasSyncedBefore||(this.updateSyncState(w.Prepared,i),e.hasSyncedBefore=!0),this.opts.crypto&&await this.opts.crypto.onSyncCompleted(i),this.updateSyncState(w.Syncing,i),this.client.store.wantsSave()&&(this.opts.crypto&&await this.opts.crypto.saveDeviceList(0),this.client.store.save())}this.running||(x("Sync no longer running: exiting."),this.connectionReturnedDefer&&(this.connectionReturnedDefer.reject(),this.connectionReturnedDefer=void 0),this.updateSyncState(w.Stopped))}doSyncRequest(e,t){var n;const i=this.getSyncParams(e,t);return this.client.http.authedRequest(f.Method.Get,"/sync",i,void 0,{localTimeoutMs:i.timeout+8e4,abortSignal:null===(n=this.abortController)||void 0===n?void 0:n.signal})}getSyncParams(e,t){let n=this.opts.pollTimeout;(this.getSyncState()!==w.Syncing||this.catchingUp)&&(this.catchingUp=!0,n=0);let i=e.filter;this.client.isGuest()&&!i&&(i=this.getGuestFilter());const r={filter:i,timeout:n};return this.opts.disablePresence&&(r.set_presence=C.Offline),t?r.since=t:r._cacheBuster=Date.now(),[w.Reconnecting,w.Error].includes(this.getSyncState())&&(r.timeout=0),r}async onSyncError(e){if(!this.running)return x("Sync no longer running: exiting"),this.connectionReturnedDefer&&(this.connectionReturnedDefer.reject(),this.connectionReturnedDefer=void 0),this.updateSyncState(w.Stopped),!0;if(d.logger.error("/sync error %s",e),this.shouldAbortSync(e))return!0;this.failedSyncCount++,d.logger.log("Number of consecutive failed sync requests:",this.failedSyncCount),x("Starting keep-alive");const t=this.startKeepAlives();return this.currentSyncRequest=void 0,this.updateSyncState(this.failedSyncCount>=3?w.Error:w.Reconnecting,{error:e}),await t&&this.getSyncState()===w.Error&&this.updateSyncState(w.Catchup,{catchingUp:!0}),!1}async processSyncResponse(e,t){var n,i,r;const o=this.client;if(Array.isArray(null===(n=t.presence)||void 0===n?void 0:n.events)&&t.presence.events.map(o.getEventMapper()).forEach((function(e){let t=o.store.getUser(e.getSender());t?t.setPresenceEvent(e):(t=I(o,e.getSender()),t.setPresenceEvent(e),o.store.storeUser(t)),o.emit(p.ClientEvent.Event,e)})),Array.isArray(null===(i=t.account_data)||void 0===i?void 0:i.events)){const e=t.account_data.events.map(o.getEventMapper()),n=e.reduce(((e,t)=>(e[t.getType()]=o.store.getAccountData(t.getType()),e)),{});o.store.storeAccountDataEvents(e),e.forEach((function(e){if(e.getType()===m.EventType.PushRules){const t=e.getContent();o.pushRules=u.PushProcessor.rewriteDefaultRules(t)}const t=n[e.getType()];return o.emit(p.ClientEvent.AccountData,e,t),e}))}if(Array.isArray(null===(r=t.to_device)||void 0===r?void 0:r.events)&&t.to_device.events.length>0){const e=[];t.to_device.events.filter((e=>{var t;return!(e.type===m.EventType.RoomMessageEncrypted&&!["m.olm.v1.curve25519-aes-sha2"].includes(null===(t=e.content)||void 0===t?void 0:t.algorithm)&&(d.logger.log("Ignoring invalid encrypted to-device event from "+e.sender),1))})).map(o.getEventMapper({toDevice:!0})).map((t=>{if("m.key.verification.cancel"===t.getType()){const n=t.getContent().transaction_id;n&&e.push(n)}return t})).forEach((function(t){const n=t.getContent();if("m.room.message"!=t.getType()||"m.bad.encrypted"!=n.msgtype){if("m.key.verification.start"===t.getType()||"m.key.verification.request"===t.getType()){const i=n.transaction_id;e.includes(i)&&t.flagCancelled()}o.emit(p.ClientEvent.ToDeviceEvent,t)}else d.logger.log("Ignoring undecryptable to-device event from "+t.getSender())}))}else this.catchingUp=!1;let c=[],h=[],f=[];if(t.rooms&&(t.rooms.invite&&(c=this.mapSyncResponseToRoomArray(t.rooms.invite)),t.rooms.join&&(h=this.mapSyncResponseToRoomArray(t.rooms.join)),t.rooms.leave&&(f=this.mapSyncResponseToRoomArray(t.rooms.leave))),this.notifEvents=[],await a.promiseMapSeries(c,(async e=>{var t;const n=e.room,i=this.mapSyncEventsFormat(e.invite_state,n);await this.injectRoomEvents(n,i);const r=null===(t=n.currentState.getStateEvents(m.EventType.RoomMember,o.getUserId()))||void 0===t?void 0:t.getSender();if(o.isCryptoEnabled()){const e=await o.crypto.cryptoStore.takeParkedSharedHistory(n.roomId);for(const t of e)t.senderId===r&&await o.crypto.olmDevice.addInboundGroupSession(n.roomId,t.senderKey,t.forwardingCurve25519KeyChain,t.sessionId,t.sessionKey,t.keysClaimed,!0,{sharedHistory:!0,untrusted:!0})}e.isBrandNewRoom?(n.recalculate(),o.store.storeRoom(n),o.emit(p.ClientEvent.Room,n)):n.recalculate(),i.forEach((function(e){o.emit(p.ClientEvent.Event,e)}))})),await a.promiseMapSeries(h,(async t=>{var n;const i=t.room,r=this.mapSyncEventsFormat(t.state,i),c=this.mapSyncEventsFormat(t.timeline,i,!1),u=this.mapSyncEventsFormat(t.ephemeral),h=this.mapSyncEventsFormat(t.account_data),f=o.isRoomEncrypted(i.roomId);var m,g;t.unread_notifications&&(i.setUnreadNotificationCount(s.NotificationCountType.Total,null!==(m=t.unread_notifications.notification_count)&&void 0!==m?m:0),(!f||i.getUnreadNotificationCount(s.NotificationCountType.Highlight)<=0)&&i.setUnreadNotificationCount(s.NotificationCountType.Highlight,null!==(g=t.unread_notifications.highlight_count)&&void 0!==g?g:0));const v=null!==(n=t[b.UNREAD_THREAD_NOTIFICATIONS.name])&&void 0!==n?n:t[b.UNREAD_THREAD_NOTIFICATIONS.altName];if(v){i.resetThreadUnreadNotificationCount(Object.keys(v));for(const[e,t]of Object.entries(v)){var y;i.setThreadUnreadNotificationCount(e,s.NotificationCountType.Total,null!==(y=t.notification_count)&&void 0!==y?y:0);const n=i.getThreadUnreadNotificationCount(e,s.NotificationCountType.Highlight)<=0;var E;(!f||f&&n)&&i.setThreadUnreadNotificationCount(e,s.NotificationCountType.Highlight,null!==(E=t.highlight_count)&&void 0!==E?E:0)}}else i.resetThreadUnreadNotificationCount();if(t.timeline=t.timeline||{},t.isBrandNewRoom)null!==t.timeline.prev_batch&&i.getLiveTimeline().setPaginationToken(t.timeline.prev_batch,l.EventTimeline.BACKWARDS);else if(t.timeline.limited){let n=!0;for(let e=c.length-1;e>=0;e--){const t=c[e].getId();if(i.getTimelineForEvent(t)){x(`Already have event ${t} in limited sync - not resetting`),n=!1,c.splice(0,e);break}}var S;n&&(i.resetLiveTimeline(t.timeline.prev_batch,this.opts.canResetEntireTimeline(i.roomId)?null:null!==(S=e.oldSyncToken)&&void 0!==S?S:null),o.resetNotifTimelineSet())}try{await this.injectRoomEvents(i,r,c,e.fromCache)}catch(e){d.logger.error(`Failed to process events on room ${i.roomId}:`,e)}t.summary&&i.setSummary(t.summary),i.addEphemeralEvents(u),i.addAccountData(h),i.recalculate(),t.isBrandNewRoom&&(o.store.storeRoom(i),o.emit(p.ClientEvent.Room,i)),this.processEventsForNotifs(i,c);const w=async e=>{o.emit(p.ClientEvent.Event,e),e.isState()&&"m.room.encryption"==e.getType()&&this.opts.crypto&&await this.opts.crypto.onCryptoEvent(e)};await a.promiseMapSeries(r,w),await a.promiseMapSeries(c,w),u.forEach((function(e){o.emit(p.ClientEvent.Event,e)})),h.forEach((function(e){o.emit(p.ClientEvent.Event,e)})),i.decryptCriticalEvents()})),await a.promiseMapSeries(f,(async e=>{const t=e.room,n=this.mapSyncEventsFormat(e.state,t),i=this.mapSyncEventsFormat(e.timeline,t),r=this.mapSyncEventsFormat(e.account_data);await this.injectRoomEvents(t,n,i),t.addAccountData(r),t.recalculate(),e.isBrandNewRoom&&(o.store.storeRoom(t),o.emit(p.ClientEvent.Room,t)),this.processEventsForNotifs(t,i),n.forEach((function(e){o.emit(p.ClientEvent.Event,e)})),i.forEach((function(e){o.emit(p.ClientEvent.Event,e)})),r.forEach((function(e){o.emit(p.ClientEvent.Event,e)}))})),e.oldSyncToken&&this.notifEvents.length&&(this.notifEvents.sort((function(e,t){return e.getTs()-t.getTs()})),this.notifEvents.forEach((function(e){var t;null===(t=o.getNotifTimelineSet())||void 0===t||t.addLiveEvent(e)}))),t.device_lists&&this.opts.crypto&&await this.opts.crypto.handleDeviceListChanges(e,t.device_lists),this.opts.crypto&&t.device_one_time_keys_count){const e=t.device_one_time_keys_count.signed_curve25519||0;this.opts.crypto.updateOneTimeKeyCount(e)}if(this.opts.crypto&&(t.device_unused_fallback_key_types||t["org.matrix.msc2732.device_unused_fallback_key_types"])){const e=t.device_unused_fallback_key_types||t["org.matrix.msc2732.device_unused_fallback_key_types"];this.opts.crypto.setNeedsNewFallback(Array.isArray(e)&&!e.includes("signed_curve25519"))}}startKeepAlives(e){return void 0===e&&(e=2e3+Math.floor(5e3*Math.random())),null!==this.keepAliveTimer&&clearTimeout(this.keepAliveTimer),e>0?this.keepAliveTimer=setTimeout(this.pokeKeepAlive.bind(this),e):this.pokeKeepAlive(),this.connectionReturnedDefer||(this.connectionReturnedDefer=a.defer()),this.connectionReturnedDefer.promise}pokeKeepAlive(e=!1){var t;const n=()=>{clearTimeout(this.keepAliveTimer),this.connectionReturnedDefer&&(this.connectionReturnedDefer.resolve(e),this.connectionReturnedDefer=void 0)};this.client.http.request(f.Method.Get,"/_matrix/client/versions",void 0,void 0,{prefix:"",localTimeoutMs:15e3,abortSignal:null===(t=this.abortController)||void 0===t?void 0:t.signal}).then((()=>{n()}),(t=>{400==t.httpStatus||404==t.httpStatus?this.keepAliveTimer=setTimeout(n,2e3):(e=!0,this.keepAliveTimer=setTimeout(this.pokeKeepAlive.bind(this,e),5e3+Math.floor(5e3*Math.random())),this.updateSyncState(w.Error,{error:t}))}))}mapSyncResponseToRoomArray(e){const t=this.client;return Object.keys(e).map((n=>{const i=e[n];let r=t.store.getRoom(n),o=!1;return r||(r=this.createRoom(n),o=!0),i.room=r,i.isBrandNewRoom=o,i}))}mapSyncEventsFormat(e,t,n=!0){if(!e||!Array.isArray(e.events))return[];const i=this.client.getEventMapper({decrypt:n});return e.events.map((function(e){return t&&(e.room_id=t.roomId),i(e)}))}resolveInvites(e){if(!e||!this.opts.resolveInvitesToProfiles)return;const t=this.client;e.getMembersWithMembership("invite").forEach((function(n){if(n.requestedProfileInfo)return;n.requestedProfileInfo=!0;const i=t.getUser(n.userId);let r;r=i?Promise.resolve({avatar_url:i.avatarUrl,displayname:i.displayName}):t.getProfileInfo(n.userId),r.then((function(t){const i=n.events.member;"invite"===(null==i?void 0:i.getContent().membership)&&(i.getContent().avatar_url=t.avatar_url,i.getContent().displayname=t.displayname,n.setMembershipEvent(i,e.currentState))}),(function(e){}))}))}async injectRoomEvents(e,t,n,i=!1){const r=e.getLiveTimeline(),o=0==r.getEvents().length;if(o){for(const e of t)this.client.getPushActionsForEvent(e);r.initialiseState(t,{timelineWasEmpty:o})}this.resolveInvites(e),e.recalculate(),o||(e.oldState.setStateEvents(t||[]),e.currentState.setStateEvents(t||[])),e.addLiveEvents(n||[],{fromCache:i,timelineWasEmpty:o}),this.client.processBeaconEvents(e,n)}processEventsForNotifs(e,t){if(this.client.getNotifTimelineSet())for(const e of t){var n;const t=this.client.getPushActionsForEvent(e);null!=t&&t.notify&&null!==(n=t.tweaks)&&void 0!==n&&n.highlight&&this.notifEvents.push(e)}}getGuestFilter(){return"{}"}updateSyncState(e,t){const n=this.syncState;this.syncState=e,this.syncStateData=t,this.client.emit(p.ClientEvent.Sync,this.syncState,n,t)}}},34969:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineWindow=t.TimelineIndex=void 0;var r=i(n(59713)),o=n(88910);n(7434);t.TimelineWindow=class{constructor(e,t,n={}){this.client=e,this.timelineSet=t,(0,r.default)(this,"windowLimit",void 0),(0,r.default)(this,"start",void 0),(0,r.default)(this,"end",void 0),(0,r.default)(this,"eventCount",0),this.windowLimit=n.windowLimit||1e3}load(e,t=20){const n=n=>{if(!n)throw new Error("No timeline given to initFields");let i;const r=n.getEvents();if(e){if(i=r.findIndex((t=>t.getId()===e)),i<0)throw new Error("getEventTimeline result didn't include requested event")}else i=r.length;const o=Math.min(r.length,i+Math.ceil(t/2)),a=Math.max(0,o-t);this.start=new s(n,a-n.getBaseIndex()),this.end=new s(n,o-n.getBaseIndex()),this.eventCount=o-a};return this.timelineSet.getTimelineForEvent(e)?(n(this.timelineSet.getTimelineForEvent(e)),Promise.resolve()):e?this.client.getEventTimeline(this.timelineSet,e).then(n):(n(this.timelineSet.getLiveTimeline()),Promise.resolve())}getTimelineIndex(e){var t,n;if(e==o.EventTimeline.BACKWARDS)return null!==(t=this.start)&&void 0!==t?t:null;if(e==o.EventTimeline.FORWARDS)return null!==(n=this.end)&&void 0!==n?n:null;throw new Error("Invalid direction '"+e+"'")}extend(e,t){const n=this.getTimelineIndex(e);if(!n)return!1;const i=e==o.EventTimeline.BACKWARDS?n.retreat(t):n.advance(t);if(i){this.eventCount+=i,this.eventCount;const t=this.eventCount-this.windowLimit;return t>0&&this.unpaginate(t,e!=o.EventTimeline.BACKWARDS),!0}return!1}canPaginate(e){const t=this.getTimelineIndex(e);if(!t)return!1;if(e==o.EventTimeline.BACKWARDS){if(t.index>t.minIndex())return!0}else if(t.index<t.maxIndex())return!0;const n=t.timeline.getNeighbouringTimeline(e),i=t.timeline.getPaginationToken(e);return Boolean(n)||Boolean(i)}async paginate(e,t,n=!0,i=5){const r=this.getTimelineIndex(e);if(!r)return!1;if(r.pendingPaginate)return r.pendingPaginate;if(this.extend(e,t))return!0;if(!n||0===i)return!1;if(!r.timeline.getPaginationToken(e))return!1;const s=this.client.paginateEventTimeline(r.timeline,{backwards:e==o.EventTimeline.BACKWARDS,limit:t}).finally((function(){r.pendingPaginate=void 0})).then((n=>n?this.paginate(e,t,!0,i-1):this.paginate(e,t,!1,0)));return r.pendingPaginate=s,s}unpaginate(e,t){const n=t?this.start:this.end;if(!n)throw new Error(`Attempting to unpaginate startOfTimeline=${t} but don't have this direction`);if(e>this.eventCount||e<0)throw new Error(`Attemting to unpaginate ${e} events, but only have ${this.eventCount} in the timeline`);for(;e>0;){const i=t?n.advance(e):n.retreat(e);if(i<=0)throw new Error("Unable to unpaginate any further, but still have "+this.eventCount+" events");e-=i,this.eventCount-=i,this.eventCount}}getEvents(){if(!this.start)return[];const e=[];let t=this.start.timeline;for(;;){var n,i;const r=t.getEvents();let s=0,a=r.length;t===this.start.timeline&&(s=this.start.index+t.getBaseIndex()),t===(null===(n=this.end)||void 0===n?void 0:n.timeline)&&(a=this.end.index+t.getBaseIndex());for(let t=s;t<a;t++)e.push(r[t]);if(t===(null===(i=this.end)||void 0===i?void 0:i.timeline))break;t=t.getNeighbouringTimeline(o.EventTimeline.FORWARDS)}return e}};class s{constructor(e,t){this.timeline=e,this.index=t,(0,r.default)(this,"pendingPaginate",void 0)}minIndex(){return-1*this.timeline.getBaseIndex()}maxIndex(){return this.timeline.getEvents().length-this.timeline.getBaseIndex()}advance(e){if(!e)return 0;let t;if(e<0){if(t=Math.max(e,this.minIndex()-this.index),t<0)return this.index+=t,t}else if(t=Math.min(e,this.maxIndex()-this.index),t>0)return this.index+=t,t;const n=this.timeline.getNeighbouringTimeline(e<0?o.EventTimeline.BACKWARDS:o.EventTimeline.FORWARDS);return n?(this.timeline=n,this.index=e<0?this.maxIndex():this.minIndex(),this.advance(e)):0}retreat(e){return-1*this.advance(-1*e)}}t.TimelineIndex=s},3102:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ALPHABET=void 0,t.alphabetPad=g,t.averageBetweenStrings=function(e,t,n=m){const i=Math.max(e.length,t.length),r=y(g(e,i,n),n),o=y(g(t,i,n),n),s=(r+o)/BigInt(2);return s===r||s==o?v(s,n)+n[0]:v(s,n)},t.baseToString=v,t.checkObjectHasKeys=function(e,t){for(const n of t)if(!e.hasOwnProperty(n))throw new Error("Missing required key: "+n)},t.chunkPromises=async function(e,t){const n=[];for(let i=0;i<e.length;i+=t)n.push(...await Promise.all(e.slice(i,i+t).map((e=>e()))));return n},t.compare=function(e,t){return E.compare(e,t)},t.decodeParams=function(e){const t={},n=new URLSearchParams(e);for(const e of n.keys()){const i=n.getAll(e);t[e]=1===i.length?i[0]:i}return t},t.deepCompare=function e(t,n){if(t===n)return!0;if(typeof t!=typeof n)return!1;if("number"==typeof t&&isNaN(t)&&isNaN(n))return!0;if(null===t||null===n)return t===n;if(!(t instanceof Object))return!1;if(t.constructor!==n.constructor||t.prototype!==n.prototype)return!1;if(t instanceof RegExp||t instanceof Date)return t.toString()===n.toString();if(Array.isArray(t)){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!e(t[i],n[i]))return!1}else{for(const e in n)if(n.hasOwnProperty(e)!==t.hasOwnProperty(e))return!1;for(const i in t)if(n.hasOwnProperty(i)!==t.hasOwnProperty(i)||!e(t[i],n[i]))return!1}return!0},t.deepCopy=function(e){return JSON.parse(JSON.stringify(e))},t.deepSortedObjectEntries=function e(t){if("object"!=typeof t)return t;if(null==t||Array.isArray(t))return t;const n=[];for(const[i,r]of Object.entries(t))n.push([i,e(r)]);return n.sort(((e,t)=>b(e[0],t[0]))),n},t.defer=function(){let e,t;const n=new Promise(((n,i)=>{e=n,t=i}));return{resolve:e,reject:t,promise:n}},t.encodeParams=function(e,t){const n=null!=t?t:new URLSearchParams;for(const[t,i]of Object.entries(e))null!=i&&(Array.isArray(i)?i.forEach((e=>{n.append(t,String(e))})):n.append(t,String(i)));return n},t.encodeUri=function(e,t){for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n];null!=i&&(e=e.replace(n,encodeURIComponent(i)))}return e},t.ensureNoTrailingSlash=function(e){return null!=e&&e.endsWith("/")?e.slice(0,-1):e},t.escapeRegExp=f,t.globToRegexp=function(e,t=!1){const n=[[/\\\*/g,".*"],[/\?/g,"."]];return t||n.push([/\\\[(!|)(.*)\\]/g,(e,t,n)=>["[",t?"^":"",n.replace(/\\-/,"-"),"]"].join("")]),n.reduce(((e,t)=>t?e.replace(t[0],t[1]):e),f(e))},t.internaliseString=function(e){return e instanceof String&&(e=e.toString()),d.has(e)||d.set(e,e),d.get(e)},t.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e&&isFinite(e)},t.isSupportedReceiptType=function(e){return[c.ReceiptType.Read,c.ReceiptType.ReadPrivate].includes(e)},t.lexicographicCompare=b,t.mapsEqual=function(e,t,n=((e,t)=>e===t)){if(e.size!==t.size)return!1;for(const[i,r]of e){const e=t.get(i);if(void 0===e||!n(r,e))return!1}return!0},t.nextString=function(e,t=m){return v(y(e,t)+BigInt(1),t)},t.normalize=function(e){return h(e.toLowerCase()).replace(/[\\'!"#$%&()*+,\-./:;<=>?@[\]^_`{|}~\u2000-\u206f\u2e00-\u2e7f]/g,"").toLowerCase()},t.prevString=function(e,t=m){return v(y(e,t)-BigInt(1),t)},t.promiseMapSeries=async function(e,t){for(const n of e)await t(await n)},t.promiseTry=function(e){return Promise.resolve(e())},t.recursivelyAssign=function e(t,n,i=!1){for(const[r,o]of Object.entries(n))t[r]instanceof Object&&o?e(t[r],o):null==o&&i||(t[r]=o);return t},t.removeDirectionOverrideChars=function(e){return"string"==typeof e?e.replace(/[\u202d-\u202e]/g,""):""},t.removeElement=function(e,t,n){let i;if(n){for(i=e.length-1;i>=0;i--)if(t(e[i],i,e))return e.splice(i,1),!0}else for(i=0;i<e.length;i++)if(t(e[i],i,e))return e.splice(i,1),!0;return!1},t.removeHiddenChars=h,t.replaceParam=function(e,t,n){const i=u(u({},n),{},{[t]:n[e]});return delete i[e],i},t.simpleRetryOperation=function(e){return(0,s.default)((t=>e(t)),{forever:!0,factor:2,minTimeout:3e3,maxTimeout:15e3})},t.sleep=function(e,t){return new Promise((n=>{setTimeout(n,e,t)}))},t.sortEventsByLatestContentTimestamp=function(e,t){return S(t)-S(e)},t.stringToBase=y;var r=i(n(59713)),o=i(n(85067)),s=i(n(42693)),a=n(76709),c=n(95550);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d=new Map;function h(e){return"string"==typeof e?(0,o.default)(e.normalize("NFD").replace(p,"")):""}const p=/[\u2000-\u200F\u202A-\u202F\u0300-\u036F\uFEFF\u061C\u2800\u2062-\u2063\s]/g;function f(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const m=(()=>{let e="";for(let t=32;t<=126;t++)e+=String.fromCharCode(t);return e})();function g(e,t,n=m){return e.padEnd(t,n[0])}function v(e,t=m){const n=BigInt(t.length);var i;if(e<=n)return null!==(i=t[Number(e)-1])&&void 0!==i?i:"";let r=e/n,o=Number(e%n)-1;return o<0&&(r-=BigInt(Math.abs(o)),o=Number(n)-1),v(r,t)+t[o]}function y(e,t=m){const n=BigInt(t.length);let i=BigInt(0);for(let r=e.length-1,o=BigInt(0);r>=0;r--,o++){const s=e.charCodeAt(r)-t.charCodeAt(0);i+=BigInt(1+s)*n**o}return i}function b(e,t){return e<t?-1:e>t?1:0}t.DEFAULT_ALPHABET=m;const E=new Intl.Collator;function S(e){var t;return null!==(t=a.M_TIMESTAMP.findIn(e.getContent()))&&void 0!==t?t:-1}},62667:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.releaseContext=t.acquireContext=void 0;let n=null,i=0;t.acquireContext=()=>(null===n&&(n=new AudioContext),i++,n),t.releaseContext=()=>{var e;i--,0===i&&(null===(e=n)||void 0===e||e.close(),n=null)}},59679:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MatrixCall=t.CallType=t.CallState=t.CallParty=t.CallEvent=t.CallErrorCode=t.CallError=t.CallDirection=void 0,t.createNewMatrixCall=function(e,t,n){if(!L())return null;const i=!!n&&n.forceTURN,r={client:e,roomId:t,invitee:null==n?void 0:n.invitee,turnServers:e.getTurnServers(),forceTURN:e.forceTURN||i,opponentDeviceId:null==n?void 0:n.opponentDeviceId,opponentSessionId:null==n?void 0:n.opponentSessionId,groupCallId:null==n?void 0:n.groupCallId},o=new O(r);return e.reEmitter.reEmit(o,Object.values(x)),o},t.genCallID=k,t.setTracksEnabled=R,t.supportsMatrixCall=L;var r,o,s=i(n(59713)),a=n(70766),c=n(7434),l=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}(n(3102)),u=n(42481),d=n(98401),h=n(15964),p=n(49704),f=n(55861),m=n(23272),g=n(8969),v=n(30095);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let S,w,_,T,x,C;!function(e){e.AUDIO="audio",e.VIDEO="video"}(r||(r={})),function(e){e.OPUS="opus"}(o||(o={})),t.CallState=S,function(e){e.Fledgling="fledgling",e.InviteSent="invite_sent",e.WaitLocalMedia="wait_local_media",e.CreateOffer="create_offer",e.CreateAnswer="create_answer",e.Connecting="connecting",e.Connected="connected",e.Ringing="ringing",e.Ended="ended"}(S||(t.CallState=S={})),t.CallType=w,function(e){e.Voice="voice",e.Video="video"}(w||(t.CallType=w={})),t.CallDirection=_,function(e){e.Inbound="inbound",e.Outbound="outbound"}(_||(t.CallDirection=_={})),t.CallParty=T,function(e){e.Local="local",e.Remote="remote"}(T||(t.CallParty=T={})),t.CallEvent=x,function(e){e.Hangup="hangup",e.State="state",e.Error="error",e.Replaced="replaced",e.LocalHoldUnhold="local_hold_unhold",e.RemoteHoldUnhold="remote_hold_unhold",e.HoldUnhold="hold_unhold",e.FeedsChanged="feeds_changed",e.AssertedIdentityChanged="asserted_identity_changed",e.LengthChanged="length_changed",e.DataChannel="datachannel",e.SendVoipEvent="send_voip_event"}(x||(t.CallEvent=x={})),t.CallErrorCode=C,function(e){e.UserHangup="user_hangup",e.LocalOfferFailed="local_offer_failed",e.NoUserMedia="no_user_media",e.UnknownDevices="unknown_devices",e.SendInvite="send_invite",e.CreateAnswer="create_answer",e.CreateOffer="create_offer",e.SendAnswer="send_answer",e.SetRemoteDescription="set_remote_description",e.SetLocalDescription="set_local_description",e.AnsweredElsewhere="answered_elsewhere",e.IceFailed="ice_failed",e.InviteTimeout="invite_timeout",e.Replaced="replaced",e.SignallingFailed="signalling_timeout",e.UserBusy="user_busy",e.Transfered="transferred",e.NewSession="new_session"}(C||(t.CallErrorCode=C={}));class I extends Error{constructor(e,t,n){super(t+": "+n),(0,s.default)(this,"code",void 0),this.code=e}}function k(){return Date.now().toString()+(0,d.randomString)(16)}function M(e){return[{mediaType:"audio",codec:"opus",enableDtx:!0,maxAverageBitrate:e?12e3:void 0}]}function A(e,t){return e+":"+t}t.CallError=I;class O extends f.TypedEventEmitter{constructor(e){var t;if(super(),(0,s.default)(this,"roomId",void 0),(0,s.default)(this,"callId",void 0),(0,s.default)(this,"invitee",void 0),(0,s.default)(this,"state",S.Fledgling),(0,s.default)(this,"hangupParty",void 0),(0,s.default)(this,"hangupReason",void 0),(0,s.default)(this,"direction",void 0),(0,s.default)(this,"ourPartyId",void 0),(0,s.default)(this,"peerConn",void 0),(0,s.default)(this,"toDeviceSeq",0),(0,s.default)(this,"isPtt",!1),(0,s.default)(this,"client",void 0),(0,s.default)(this,"forceTURN",void 0),(0,s.default)(this,"turnServers",void 0),(0,s.default)(this,"candidateSendQueue",[]),(0,s.default)(this,"candidateSendTries",0),(0,s.default)(this,"candidatesEnded",!1),(0,s.default)(this,"feeds",[]),(0,s.default)(this,"transceivers",new Map),(0,s.default)(this,"inviteOrAnswerSent",!1),(0,s.default)(this,"waitForLocalAVStream",!1),(0,s.default)(this,"successor",void 0),(0,s.default)(this,"opponentMember",void 0),(0,s.default)(this,"opponentVersion",void 0),(0,s.default)(this,"opponentPartyId",void 0),(0,s.default)(this,"opponentCaps",void 0),(0,s.default)(this,"iceDisconnectedTimeout",void 0),(0,s.default)(this,"inviteTimeout",void 0),(0,s.default)(this,"removeTrackListeners",new Map),(0,s.default)(this,"remoteOnHold",!1),(0,s.default)(this,"callStatsAtEnd",void 0),(0,s.default)(this,"makingOffer",!1),(0,s.default)(this,"ignoreOffer",!1),(0,s.default)(this,"responsePromiseChain",void 0),(0,s.default)(this,"remoteCandidateBuffer",new Map),(0,s.default)(this,"remoteAssertedIdentity",void 0),(0,s.default)(this,"remoteSDPStreamMetadata",void 0),(0,s.default)(this,"callLengthInterval",void 0),(0,s.default)(this,"callLength",0),(0,s.default)(this,"opponentDeviceId",void 0),(0,s.default)(this,"opponentDeviceInfo",void 0),(0,s.default)(this,"opponentSessionId",void 0),(0,s.default)(this,"groupCallId",void 0),(0,s.default)(this,"gotLocalIceCandidate",(e=>{if(e.candidate){if(this.candidatesEnded)return void c.logger.warn("Got candidate after candidates have ended - ignoring!");if(c.logger.debug("Call "+this.callId+" got local ICE "+e.candidate.sdpMid+" candidate: "+e.candidate.candidate),this.callHasEnded())return;""===e.candidate.candidate?this.queueCandidate(null):this.queueCandidate(e.candidate)}})),(0,s.default)(this,"onIceGatheringStateChange",(e=>{var t;c.logger.debug(`Call ${this.callId} ice gathering state changed to  ${this.peerConn.iceGatheringState}`),"complete"===(null===(t=this.peerConn)||void 0===t?void 0:t.iceGatheringState)&&this.queueCandidate(null)})),(0,s.default)(this,"getLocalOfferFailed",(e=>{c.logger.error(`Call ${this.callId} Failed to get local offer`,e),this.emit(x.Error,new I(C.LocalOfferFailed,"Failed to get local offer!",e)),this.terminate(T.Local,C.LocalOfferFailed,!1)})),(0,s.default)(this,"getUserMediaFailed",(e=>{this.successor?this.successor.getUserMediaFailed(e):(c.logger.warn(`Failed to get user media - ending call ${this.callId}`,e),this.emit(x.Error,new I(C.NoUserMedia,"Couldn't start capturing media! Is your microphone set up and does this app have permission?",e)),this.terminate(T.Local,C.NoUserMedia,!1))})),(0,s.default)(this,"onIceConnectionStateChanged",(()=>{var e,t,n,i,r;if(!this.callHasEnded()){if(c.logger.debug("Call ID "+this.callId+": ICE connection state changed to: "+(null===(e=this.peerConn)||void 0===e?void 0:e.iceConnectionState)),["connected","completed"].includes(null!==(t=null===(n=this.peerConn)||void 0===n?void 0:n.iceConnectionState)&&void 0!==t?t:""))clearTimeout(this.iceDisconnectedTimeout),this.setState(S.Connected),this.callLengthInterval||(this.callLengthInterval=setInterval((()=>{this.callLength++,this.emit(x.LengthChanged,this.callLength)}),1e3));else if("failed"==(null===(i=this.peerConn)||void 0===i?void 0:i.iceConnectionState)){var o;null!==(o=this.peerConn)&&void 0!==o&&o.restartIce?(this.candidatesEnded=!1,this.peerConn.restartIce()):(c.logger.info(`Hanging up call ${this.callId} (ICE failed and no ICE restart method)`),this.hangup(C.IceFailed,!1))}else"disconnected"==(null===(r=this.peerConn)||void 0===r?void 0:r.iceConnectionState)&&(this.iceDisconnectedTimeout=setTimeout((()=>{c.logger.info(`Hanging up call ${this.callId} (ICE disconnected for too long)`),this.hangup(C.IceFailed,!1)}),3e4),this.setState(S.Connecting));if(this.isPtt&&["failed","disconnected"].includes(this.peerConn.iceConnectionState))for(const e of this.getRemoteFeeds())e.setAudioVideoMuted(!0,!0)}})),(0,s.default)(this,"onSignallingStateChanged",(()=>{var e;c.logger.debug(`call ${this.callId}: Signalling state changed to: ${null===(e=this.peerConn)||void 0===e?void 0:e.signalingState}`)})),(0,s.default)(this,"onTrack",(e=>{if(0===e.streams.length)return void c.logger.warn(`Call ${this.callId} Streamless ${e.track.kind} found: ignoring.`);const t=e.streams[0];if(this.pushRemoteFeed(t),!this.removeTrackListeners.has(t)){const e=()=>{0===t.getTracks().length&&(c.logger.info(`Call ${this.callId} removing track streamId: ${t.id}`),this.deleteFeedByStream(t),t.removeEventListener("removetrack",e),this.removeTrackListeners.delete(t))};t.addEventListener("removetrack",e),this.removeTrackListeners.set(t,e)}})),(0,s.default)(this,"onDataChannel",(e=>{this.emit(x.DataChannel,e.channel)})),(0,s.default)(this,"onNegotiationNeeded",(async()=>{c.logger.info(`Call ${this.callId} Negotiation is needed!`),this.state===S.CreateOffer||0!==this.opponentVersion?this.queueGotLocalOffer():c.logger.info(`Call ${this.callId} Opponent does not support renegotiation: ignoring negotiationneeded event`)})),(0,s.default)(this,"onHangupReceived",(e=>{c.logger.debug("Hangup received for call ID "+this.callId),this.partyIdMatches(e)||this.state===S.Ringing?this.terminate(T.Remote,e.reason||C.UserHangup,!0):c.logger.info(`Call ${this.callId} Ignoring message from party ID ${e.party_id}: our partner is ${this.opponentPartyId}`)})),(0,s.default)(this,"onRejectReceived",(e=>{c.logger.debug("Reject received for call ID "+this.callId),[S.InviteSent,S.Ringing].includes(this.state)||this.state===S.Fledgling&&this.direction===_.Inbound?this.terminate(T.Remote,e.reason||C.UserHangup,!0):c.logger.debug(`Call ${this.callId} is in state: ${this.state}: ignoring reject`)})),(0,s.default)(this,"onAnsweredElsewhere",(e=>{c.logger.debug("Call "+this.callId+" answered elsewhere"),this.terminate(T.Remote,C.AnsweredElsewhere,!0)})),this.roomId=e.roomId,this.invitee=e.invitee,this.client=e.client,!this.client.deviceId)throw new Error("Client must have a device ID to start calls");this.forceTURN=null!==(t=e.forceTURN)&&void 0!==t&&t,this.ourPartyId=this.client.deviceId,this.opponentDeviceId=e.opponentDeviceId,this.opponentSessionId=e.opponentSessionId,this.groupCallId=e.groupCallId,this.turnServers=e.turnServers||[],0===this.turnServers.length&&this.client.isFallbackICEServerAllowed()&&this.turnServers.push({urls:["stun:turn.matrix.org"]});for(const e of this.turnServers)l.checkObjectHasKeys(e,["urls"]);this.callId=k()}async placeVoiceCall(){await this.placeCall(!0,!1)}async placeVideoCall(){await this.placeCall(!0,!0)}createDataChannel(e,t){const n=this.peerConn.createDataChannel(e,t);return this.emit(x.DataChannel,n),n}getOpponentMember(){return this.opponentMember}getOpponentDeviceId(){return this.opponentDeviceId}getOpponentSessionId(){return this.opponentSessionId}opponentCanBeTransferred(){return Boolean(this.opponentCaps&&this.opponentCaps["m.call.transferee"])}opponentSupportsDTMF(){return Boolean(this.opponentCaps&&this.opponentCaps["m.call.dtmf"])}getRemoteAssertedIdentity(){return this.remoteAssertedIdentity}get type(){return this.hasLocalUserMediaVideoTrack||this.hasRemoteUserMediaVideoTrack?w.Video:w.Voice}get hasLocalUserMediaVideoTrack(){var e;return!(null===(e=this.localUsermediaStream)||void 0===e||!e.getVideoTracks().length)}get hasRemoteUserMediaVideoTrack(){return this.getRemoteFeeds().some((e=>{var t;return e.purpose===h.SDPStreamMetadataPurpose.Usermedia&&(null===(t=e.stream)||void 0===t?void 0:t.getVideoTracks().length)}))}get hasLocalUserMediaAudioTrack(){var e;return!(null===(e=this.localUsermediaStream)||void 0===e||!e.getAudioTracks().length)}get hasRemoteUserMediaAudioTrack(){return this.getRemoteFeeds().some((e=>{var t;return e.purpose===h.SDPStreamMetadataPurpose.Usermedia&&!(null===(t=e.stream)||void 0===t||!t.getAudioTracks().length)}))}get localUsermediaFeed(){return this.getLocalFeeds().find((e=>e.purpose===h.SDPStreamMetadataPurpose.Usermedia))}get localScreensharingFeed(){return this.getLocalFeeds().find((e=>e.purpose===h.SDPStreamMetadataPurpose.Screenshare))}get localUsermediaStream(){var e;return null===(e=this.localUsermediaFeed)||void 0===e?void 0:e.stream}get localScreensharingStream(){var e;return null===(e=this.localScreensharingFeed)||void 0===e?void 0:e.stream}get remoteUsermediaFeed(){return this.getRemoteFeeds().find((e=>e.purpose===h.SDPStreamMetadataPurpose.Usermedia))}get remoteScreensharingFeed(){return this.getRemoteFeeds().find((e=>e.purpose===h.SDPStreamMetadataPurpose.Screenshare))}get remoteUsermediaStream(){var e;return null===(e=this.remoteUsermediaFeed)||void 0===e?void 0:e.stream}get remoteScreensharingStream(){var e;return null===(e=this.remoteScreensharingFeed)||void 0===e?void 0:e.stream}getFeedByStreamId(e){return this.getFeeds().find((t=>t.stream.id===e))}getFeeds(){return this.feeds}getLocalFeeds(){return this.feeds.filter((e=>e.isLocal()))}getRemoteFeeds(){return this.feeds.filter((e=>!e.isLocal()))}async initOpponentCrypto(){var e;if(!this.opponentDeviceId)return;if(!this.client.getUseE2eForGroupCall())return;if(!this.client.isCryptoEnabled())return void(this.opponentDeviceInfo=new m.DeviceInfo(this.opponentDeviceId));if(!this.client.crypto)throw new Error("Crypto is not initialised.");const t=this.invitee||(null===(e=this.getOpponentMember())||void 0===e?void 0:e.userId);if(!t)throw new Error("Couldn't find opponent user ID to init crypto");const n=await this.client.crypto.deviceList.downloadKeys([t],!1);if(this.opponentDeviceInfo=n[t][this.opponentDeviceId],void 0===this.opponentDeviceInfo)throw new g.GroupCallUnknownDeviceError(t)}getLocalSDPStreamMetadata(e=!1){const t={};for(const n of this.getLocalFeeds())e&&(n.sdpMetadataStreamId=n.stream.id),t[n.sdpMetadataStreamId]={purpose:n.purpose,audio_muted:n.isAudioMuted(),video_muted:n.isVideoMuted()};return t}noIncomingFeeds(){return!this.feeds.some((e=>!e.isLocal()))}pushRemoteFeed(e){if(!this.opponentSupportsSDPStreamMetadata())return void this.pushRemoteFeedWithoutMetadata(e);const t=this.getOpponentMember().userId,n=this.remoteSDPStreamMetadata[e.id].purpose,i=this.remoteSDPStreamMetadata[e.id].audio_muted,r=this.remoteSDPStreamMetadata[e.id].video_muted;n?this.getFeedByStreamId(e.id)?c.logger.warn(`Ignoring stream with id ${e.id} because we already have a feed for it`):(this.feeds.push(new p.CallFeed({client:this.client,roomId:this.roomId,userId:t,deviceId:this.getOpponentDeviceId(),stream:e,purpose:n,audioMuted:i,videoMuted:r})),this.emit(x.FeedsChanged,this.feeds),c.logger.info(`Call ${this.callId} pushed remote stream (id="${e.id}", active="${e.active}", purpose=${n})`)):c.logger.warn(`Call ${this.callId} Ignoring stream with id ${e.id} because we didn't get any metadata about it`)}pushRemoteFeedWithoutMetadata(e){var t;const n=this.getOpponentMember().userId,i=h.SDPStreamMetadataPurpose.Usermedia,r=null===(t=this.feeds.find((e=>!e.isLocal())))||void 0===t?void 0:t.stream;r&&e.id!==r.id?c.logger.warn(`Call ${this.callId} Ignoring new stream ID ${e.id}: we already have stream ID ${r.id}`):this.getFeedByStreamId(e.id)?c.logger.warn(`Ignoring stream with id ${e.id} because we already have a feed for it`):(this.feeds.push(new p.CallFeed({client:this.client,roomId:this.roomId,audioMuted:!1,videoMuted:!1,userId:n,deviceId:this.getOpponentDeviceId(),stream:e,purpose:i})),this.emit(x.FeedsChanged,this.feeds),c.logger.info(`Call ${this.callId} pushed remote stream (id="${e.id}", active="${e.active}")`))}pushNewLocalFeed(e,t,n=!0){const i=this.client.getUserId();R(e.getAudioTracks(),!0),R(e.getVideoTracks(),!0),this.getFeedByStreamId(e.id)?c.logger.warn(`Ignoring stream with id ${e.id} because we already have a feed for it`):this.pushLocalFeed(new p.CallFeed({client:this.client,roomId:this.roomId,audioMuted:!1,videoMuted:!1,userId:i,deviceId:this.getOpponentDeviceId(),stream:e,purpose:t}),n)}pushLocalFeed(e,t=!0){if(this.feeds.some((t=>e.stream.id===t.stream.id)))c.logger.info(`Ignoring duplicate local stream ${e.stream.id} in call ${this.callId}`);else{if(this.feeds.push(e),t)for(const t of e.stream.getTracks()){c.logger.info(`Call ${this.callId} Adding track (id="${t.id}", kind="${t.kind}", streamId="${e.stream.id}", streamPurpose="${e.purpose}", enabled=${t.enabled}) to peer connection`);const n=A(e.purpose,t.kind);if(this.transceivers.has(n)){const i=this.transceivers.get(n);i.sender.setStreams&&i.sender.setStreams(e.stream),i.sender.replaceTrack(t),i.direction="inactive"===i.direction?"sendonly":"sendrecv"}else{const i=this.peerConn.addTrack(t,e.stream),r=this.peerConn.getTransceivers().find((e=>e.sender===i));r?this.transceivers.set(n,r):c.logger.warn("Didn't find a matching transceiver after adding track!")}}c.logger.info(`Call ${this.callId} Pushed local stream (id="${e.stream.id}", active="${e.stream.active}", purpose="${e.purpose}")`),this.emit(x.FeedsChanged,this.feeds)}}removeLocalFeed(e){const t=A(e.purpose,"audio"),n=A(e.purpose,"video");for(const e of[t,n])if(this.transceivers.has(e)){const t=this.transceivers.get(e);t.sender&&this.peerConn.removeTrack(t.sender)}e.purpose===h.SDPStreamMetadataPurpose.Screenshare&&this.client.getMediaHandler().stopScreensharingStream(e.stream),this.deleteFeed(e)}deleteAllFeeds(){for(const e of this.feeds)e.isLocal()&&this.groupCallId||e.dispose();this.feeds=[],this.emit(x.FeedsChanged,this.feeds)}deleteFeedByStream(e){const t=this.getFeedByStreamId(e.id);t?this.deleteFeed(t):c.logger.warn(`Call ${this.callId} Didn't find the feed with stream id ${e.id} to delete`)}deleteFeed(e){e.dispose(),this.feeds.splice(this.feeds.indexOf(e),1),this.emit(x.FeedsChanged,this.feeds)}async getCurrentCallStats(){return this.callHasEnded()?this.callStatsAtEnd:this.collectCallStats()}async collectCallStats(){if(!this.peerConn)return;const e=await this.peerConn.getStats(),t=[];return e.forEach((e=>{t.push(e)})),t}async initWithInvite(e){var t;const n=e.getContent();this.direction=_.Inbound,await this.client.checkTurnServers()||c.logger.warn(`Call ${this.callId} Failed to get TURN credentials! Proceeding with call anyway...`);const i=n[h.SDPStreamMetadataKey];i?this.updateRemoteSDPStreamMetadata(i):c.logger.debug(`Call ${this.callId} did not get any SDPStreamMetadata! Can not send/receive multiple streams`),this.peerConn=this.createPeerConnection(),this.chooseOpponent(e),await this.initOpponentCrypto();try{await this.peerConn.setRemoteDescription(n.offer),await this.addBufferedIceCandidates()}catch(e){return c.logger.debug(`Call ${this.callId} failed to set remote description`,e),void this.terminate(T.Local,C.SetRemoteDescription,!1)}const r=null===(t=this.feeds.find((e=>!e.isLocal())))||void 0===t?void 0:t.stream;if(!r||0===r.getTracks().length)return c.logger.error(`Call ${this.callId} no remote stream or no tracks after setting remote description!`),void this.terminate(T.Local,C.SetRemoteDescription,!1);if(this.setState(S.Ringing),e.getLocalAge()){const t=setTimeout((()=>{this.state==S.Ringing&&(c.logger.debug(`Call ${this.callId} invite has expired. Hanging up.`),this.hangupParty=T.Remote,this.setState(S.Ended),this.stopAllMedia(),"closed"!=this.peerConn.signalingState&&this.peerConn.close(),this.emit(x.Hangup,this))}),n.lifetime-e.getLocalAge()),i=e=>{e!==S.Ringing&&(clearTimeout(t),this.off(x.State,i))};this.on(x.State,i)}}initWithHangup(e){this.setState(S.Ended)}shouldAnswerWithMediaType(e,t,n){return e&&!t?(c.logger.warn(`Call ${this.callId} Unable to answer with ${n} because the other side isn't sending it either.`),!1):l.isNullOrUndefined(e)||e===t||this.opponentSupportsSDPStreamMetadata()?null!=e?e:t:(c.logger.warn(`Call ${this.callId} Unable to answer with ${n}=${e} because the other side doesn't support it. Answering with ${n}=${t}.`),t)}async answer(e,t){if(!this.inviteOrAnswerSent){if(!1===e&&!1===t)throw new Error("You CANNOT answer a call without media");if(this.localUsermediaStream||this.waitForLocalAVStream)this.waitForLocalAVStream&&this.setState(S.WaitLocalMedia);else{const i=this.state,r=this.shouldAnswerWithMediaType(e,this.hasRemoteUserMediaAudioTrack,"audio"),o=this.shouldAnswerWithMediaType(t,this.hasRemoteUserMediaVideoTrack,"video");this.setState(S.WaitLocalMedia),this.waitForLocalAVStream=!0;try{var n;const e=await this.client.getMediaHandler().getUserMediaStream(r,o);this.waitForLocalAVStream=!1;const t=[new p.CallFeed({client:this.client,roomId:this.roomId,userId:this.client.getUserId(),deviceId:null!==(n=this.client.getDeviceId())&&void 0!==n?n:void 0,stream:e,purpose:h.SDPStreamMetadataPurpose.Usermedia,audioMuted:!1,videoMuted:!1})];this.localScreensharingFeed&&t.push(this.localScreensharingFeed),this.answerWithCallFeeds(t)}catch(e){if(!o)return void this.getUserMediaFailed(e);c.logger.warn(`Call ${this.callId} Failed to getUserMedia(), trying to getUserMedia() without video`),this.setState(i),this.waitForLocalAVStream=!1,await this.answer(r,!1)}}}}answerWithCallFeeds(e){this.inviteOrAnswerSent||this.queueGotCallFeedsForAnswer(e)}replacedBy(e){c.logger.debug(`Call ${this.callId} replaced by ${e.callId}`),this.state===S.WaitLocalMedia?(c.logger.debug(`Call ${this.callId} telling new call ${e.callId} to wait for local media`),e.waitForLocalAVStream=!0):[S.CreateOffer,S.InviteSent].includes(this.state)&&(e.direction===_.Outbound?e.queueGotCallFeedsForAnswer([]):(c.logger.debug(`Call ${this.callId} handing local stream to new call ${e.callId}`),e.queueGotCallFeedsForAnswer(this.getLocalFeeds().map((e=>e.clone()))))),this.successor=e,this.emit(x.Replaced,e),this.hangup(C.Replaced,!0)}hangup(e,t){if(this.callHasEnded())return;if(c.logger.debug(`Ending call ${this.callId} with reason ${e}`),this.terminate(T.Local,e,!t),[S.Fledgling,S.WaitLocalMedia].includes(this.state))return;const n={};(this.opponentVersion&&0!==this.opponentVersion||e!==C.UserHangup)&&(n.reason=e),this.sendVoipEvent(u.EventType.CallHangup,n)}reject(){if(this.state!==S.Ringing)throw Error("Call must be in 'ringing' state to reject!");if(0===this.opponentVersion)return c.logger.info(`Call ${this.callId} Opponent version is less than 1 (${this.opponentVersion}): sending hangup instead of reject`),void this.hangup(C.UserHangup,!0);c.logger.debug("Rejecting call: "+this.callId),this.terminate(T.Local,C.UserHangup,!0),this.sendVoipEvent(u.EventType.CallReject,{})}async upgradeCall(e,t){if((e||t)&&this.opponentSupportsSDPStreamMetadata())try{c.logger.debug(`Upgrading call ${this.callId}: audio?=${e} video?=${t}`);const n=e||this.hasLocalUserMediaAudioTrack,i=t||this.hasLocalUserMediaVideoTrack,r=await this.client.getMediaHandler().getUserMediaStream(n,i,!1);await this.updateLocalUsermediaStream(r,e,t)}catch(e){c.logger.error(`Call ${this.callId} Failed to upgrade the call`,e),this.emit(x.Error,new I(C.NoUserMedia,"Failed to get camera access: ",e))}}opponentSupportsSDPStreamMetadata(){return Boolean(this.remoteSDPStreamMetadata)}isScreensharing(){return Boolean(this.localScreensharingStream)}async setScreensharingEnabled(e,t){if(e&&this.isScreensharing())return c.logger.warn(`Call ${this.callId} There is already a screensharing stream - there is nothing to do!`),!0;if(!e&&!this.isScreensharing())return c.logger.warn(`Call ${this.callId} There already isn't a screensharing stream - there is nothing to do!`),!1;if(!this.opponentSupportsSDPStreamMetadata())return this.setScreensharingEnabledWithoutMetadataSupport(e,t);if(c.logger.debug(`Call ${this.callId} set screensharing enabled? ${e}`),!e){const e=this.transceivers.get(A(h.SDPStreamMetadataPurpose.Screenshare,"audio")),t=this.transceivers.get(A(h.SDPStreamMetadataPurpose.Screenshare,"video"));for(const n of[e,t])n&&n.sender&&this.peerConn.removeTrack(n.sender);return this.client.getMediaHandler().stopScreensharingStream(this.localScreensharingStream),this.deleteFeedByStream(this.localScreensharingStream),!1}try{const e=await this.client.getMediaHandler().getScreensharingStream(t);return!!e&&(this.pushNewLocalFeed(e,h.SDPStreamMetadataPurpose.Screenshare),!0)}catch(e){return c.logger.error(`Call ${this.callId} Failed to get screen-sharing stream:`,e),!1}}async setScreensharingEnabledWithoutMetadataSupport(e,t){if(c.logger.debug(`Call ${this.callId} Set screensharing enabled? ${e} using replaceTrack()`),!e){var n,i;const e=null===(n=this.localUsermediaStream)||void 0===n?void 0:n.getTracks().find((e=>"video"===e.kind)),t=null===(i=this.transceivers.get(A(h.SDPStreamMetadataPurpose.Usermedia,"video")))||void 0===i?void 0:i.sender;return null==t||t.replaceTrack(null!=e?e:null),this.client.getMediaHandler().stopScreensharingStream(this.localScreensharingStream),this.deleteFeedByStream(this.localScreensharingStream),!1}try{var r;const e=await this.client.getMediaHandler().getScreensharingStream(t);if(!e)return!1;const n=e.getTracks().find((e=>"video"===e.kind)),i=null===(r=this.transceivers.get(A(h.SDPStreamMetadataPurpose.Usermedia,"video")))||void 0===r?void 0:r.sender;return null==i||i.replaceTrack(null!=n?n:null),this.pushNewLocalFeed(e,h.SDPStreamMetadataPurpose.Screenshare,!1),!0}catch(e){return c.logger.error(`Call ${this.callId} Failed to get screen-sharing stream:`,e),!1}}async updateLocalUsermediaStream(e,t=!1,n=!1){const i=this.localUsermediaFeed,r=t||!i.isAudioMuted()&&!this.remoteOnHold,o=n||!i.isVideoMuted()&&!this.remoteOnHold;c.logger.log(`call ${this.callId} updateLocalUsermediaStream stream ${e.id} audioEnabled ${r} videoEnabled ${o}`),R(e.getAudioTracks(),r),R(e.getVideoTracks(),o);for(const e of this.localUsermediaStream.getTracks())this.localUsermediaStream.removeTrack(e),e.stop();for(const t of e.getTracks())this.localUsermediaStream.addTrack(t);for(const t of e.getTracks()){var s;const n=A(h.SDPStreamMetadataPurpose.Usermedia,t.kind),r=null===(s=this.transceivers.get(n))||void 0===s?void 0:s.sender;let o=!1;if(r)try{c.logger.info(`Call ${this.callId} Replacing track (id="${t.id}", kind="${t.kind}", streamId="${e.id}", streamPurpose="${i.purpose}") to peer connection`),await r.replaceTrack(t),o=!0}catch(e){c.logger.warn("replaceTrack failed: adding new transceiver instead",e)}if(!o){c.logger.info(`Call ${this.callId} Adding track (id="${t.id}", kind="${t.kind}", streamId="${e.id}", streamPurpose="${i.purpose}") to peer connection`);const r=this.peerConn.addTrack(t,this.localUsermediaStream),o=this.peerConn.getTransceivers().find((e=>e.sender===r));o?this.transceivers.set(n,o):c.logger.warn("Couldn't find matching transceiver for newly added track!")}}}async setLocalVideoMuted(e){var t;return c.logger.log(`call ${this.callId} setLocalVideoMuted ${e}`),await this.client.getMediaHandler().hasVideoDevice()?this.hasLocalUserMediaVideoTrack||e?(null===(t=this.localUsermediaFeed)||void 0===t||t.setAudioVideoMuted(null,e),this.updateMuteStatus(),await this.sendMetadataUpdate(),this.isLocalVideoMuted()):(await this.upgradeCall(!1,!0),this.isLocalVideoMuted()):this.isLocalVideoMuted()}isLocalVideoMuted(){var e,t;return null!==(e=null===(t=this.localUsermediaFeed)||void 0===t?void 0:t.isVideoMuted())&&void 0!==e&&e}async setMicrophoneMuted(e){var t;return c.logger.log(`call ${this.callId} setMicrophoneMuted ${e}`),await this.client.getMediaHandler().hasAudioDevice()?this.hasLocalUserMediaAudioTrack||e?(null===(t=this.localUsermediaFeed)||void 0===t||t.setAudioVideoMuted(e,null),this.updateMuteStatus(),await this.sendMetadataUpdate(),this.isMicrophoneMuted()):(await this.upgradeCall(!0,!1),this.isMicrophoneMuted()):this.isMicrophoneMuted()}isMicrophoneMuted(){var e,t;return null!==(e=null===(t=this.localUsermediaFeed)||void 0===t?void 0:t.isAudioMuted())&&void 0!==e&&e}isRemoteOnHold(){return this.remoteOnHold}setRemoteOnHold(e){if(this.isRemoteOnHold()!==e){this.remoteOnHold=e;for(const t of this.peerConn.getTransceivers())t.direction=e?"sendonly":"sendrecv";this.updateMuteStatus(),this.sendMetadataUpdate(),this.emit(x.RemoteHoldUnhold,this.remoteOnHold)}}isLocalOnHold(){if(this.state!==S.Connected)return!1;let e=!0;for(const t of this.peerConn.getTransceivers())["inactive","recvonly"].includes(t.currentDirection)||(e=!1);return e}sendDtmfDigit(e){for(const n of this.peerConn.getSenders()){var t;if("audio"===(null===(t=n.track)||void 0===t?void 0:t.kind)&&n.dtmf)return void n.dtmf.insertDTMF(e)}throw new Error("Unable to find a track to send DTMF on")}updateMuteStatus(){const e=this.isMicrophoneMuted()||this.remoteOnHold,t=this.isLocalVideoMuted()||this.remoteOnHold;c.logger.log(`call ${this.callId} updateMuteStatus stream ${this.localUsermediaStream.id} micShouldBeMuted ${e} vidShouldBeMuted ${t}`),R(this.localUsermediaStream.getAudioTracks(),!e),R(this.localUsermediaStream.getVideoTracks(),!t)}async sendMetadataUpdate(){await this.sendVoipEvent(u.EventType.CallSDPStreamMetadataChangedPrefix,{[h.SDPStreamMetadataKey]:this.getLocalSDPStreamMetadata()})}gotCallFeedsForInvite(e,t=!1){if(this.successor)this.successor.queueGotCallFeedsForAnswer(e);else if(this.callHasEnded())this.stopAllMedia();else{for(const t of e)this.pushLocalFeed(t);t&&this.peerConn.addTransceiver("video",{direction:"recvonly"}),this.setState(S.CreateOffer),c.logger.debug(`Call ${this.callId} gotUserMediaForInvite`)}}async sendAnswer(){const e={answer:{sdp:this.peerConn.localDescription.sdp,type:this.peerConn.localDescription.type},[h.SDPStreamMetadataKey]:this.getLocalSDPStreamMetadata(!0)};e.capabilities={"m.call.transferee":this.client.supportsCallTransfer,"m.call.dtmf":!1};const t=this.discardDuplicateCandidates();c.logger.info(`Call ${this.callId} Discarding ${t} candidates that will be sent in answer`);try{await this.sendVoipEvent(u.EventType.CallAnswer,e),this.inviteOrAnswerSent=!0}catch(e){this.setState(S.Ringing),e instanceof v.MatrixError&&e.event&&this.client.cancelPendingEvent(e.event);let t=C.SendAnswer,n="Failed to send answer";throw"UnknownDeviceError"==e.name&&(t=C.UnknownDevices,n="Unknown devices present in the room"),this.emit(x.Error,new I(t,n,e)),e}this.sendCandidateQueue()}queueGotCallFeedsForAnswer(e){this.responsePromiseChain?this.responsePromiseChain=this.responsePromiseChain.then((()=>this.gotCallFeedsForAnswer(e))):this.responsePromiseChain=this.gotCallFeedsForAnswer(e)}mungeSdp(e,t){const n=(0,a.parse)(e.sdp);n.media.forEach((e=>{const n=new Map,i=new Map;for(const t of e.rtp)n.set(t.payload,t.codec),i.set(t.codec,t.payload);for(const r of t){if(r.mediaType!==e.type)continue;if(!i.has(r.codec)){c.logger.info(`Ignoring SDP modifications for ${r.codec} as it's not present.`);continue}const t=[];void 0!==r.enableDtx&&t.push("usedtx="+(r.enableDtx?"1":"0")),void 0!==r.maxAverageBitrate&&t.push(`maxaveragebitrate=${r.maxAverageBitrate}`);let o=!1;for(const i of e.fmtp)n.get(i.payload)===r.codec&&(o=!0,i.config+=";"+t.join(";"));o||e.fmtp.push({payload:i.get(r.codec),config:t.join(";")})}})),e.sdp=(0,a.write)(n)}async createOffer(){const e=await this.peerConn.createOffer();return this.mungeSdp(e,M(this.isPtt)),e}async createAnswer(){const e=await this.peerConn.createAnswer();return this.mungeSdp(e,M(this.isPtt)),e}async gotCallFeedsForAnswer(e){if(this.callHasEnded())return;this.waitForLocalAVStream=!1;for(const t of e)this.pushLocalFeed(t);let t;this.setState(S.CreateAnswer);try{this.getRidOfRTXCodecs(),t=await this.createAnswer()}catch(e){return c.logger.debug(`Call ${this.callId} Failed to create answer: `,e),void this.terminate(T.Local,C.CreateAnswer,!0)}try{if(await this.peerConn.setLocalDescription(t),this.callHasEnded())return;if(this.setState(S.Connecting),await new Promise((e=>{setTimeout(e,200)})),this.callHasEnded())return;this.sendAnswer()}catch(e){return c.logger.debug(`Call ${this.callId} Error setting local description!`,e),void this.terminate(T.Local,C.SetLocalDescription,!0)}}async onRemoteIceCandidatesReceived(e){if(this.callHasEnded())return;const t=e.getContent(),n=t.candidates;if(!n)return void c.logger.info(`Call ${this.callId} Ignoring candidates event with no candidates!`);const i=0===t.version?null:t.party_id||null;if(void 0!==this.opponentPartyId)this.partyIdMatches(t)?await this.addIceCandidates(n):c.logger.info(`Call ${this.callId} Ignoring candidates from party ID ${t.party_id}: we have chosen party ID ${this.opponentPartyId}`);else if(i){c.logger.info(`Call ${this.callId} Buffering ${n.length} candidates until we pick an opponent`);const e=this.remoteCandidateBuffer.get(i)||[];e.push(...n),this.remoteCandidateBuffer.set(i,e)}}async onAnswerReceived(e){const t=e.getContent();if(c.logger.debug(`Got answer for call ID ${this.callId} from party ID ${t.party_id}`),this.callHasEnded())return void c.logger.debug(`Ignoring answer because call ID ${this.callId} has ended`);if(void 0!==this.opponentPartyId)return void c.logger.info(`Call ${this.callId} Ignoring answer from party ID ${t.party_id}: we already have an answer/reject from ${this.opponentPartyId}`);this.chooseOpponent(e),await this.addBufferedIceCandidates(),this.setState(S.Connecting);const n=t[h.SDPStreamMetadataKey];n?this.updateRemoteSDPStreamMetadata(n):c.logger.warn(`Call ${this.callId} Did not get any SDPStreamMetadata! Can not send/receive multiple streams`);try{await this.peerConn.setRemoteDescription(t.answer)}catch(e){return c.logger.debug(`Call ${this.callId} Failed to set remote description`,e),void this.terminate(T.Local,C.SetRemoteDescription,!1)}if(null!==this.opponentPartyId)try{await this.sendVoipEvent(u.EventType.CallSelectAnswer,{selected_party_id:this.opponentPartyId})}catch(e){c.logger.warn(`Call ${this.callId} Failed to send select_answer event`,e)}}async onSelectAnswerReceived(e){if(this.direction!==_.Inbound)return void c.logger.warn(`Call ${this.callId} Got select_answer for an outbound call: ignoring`);const t=e.getContent().selected_party_id;null!=t?t!==this.ourPartyId&&(c.logger.info(`Call ${this.callId} Got select_answer for party ID ${t}: we are party ID ${this.ourPartyId}.`),await this.terminate(T.Remote,C.AnsweredElsewhere,!0)):c.logger.warn(`Call ${this.callId} Got nonsensical select_answer with null/undefined selected_party_id: ignoring`)}async onNegotiateReceived(e){const t=e.getContent(),n=t.description;if(!n||!n.sdp||!n.type)return void c.logger.info(`Call ${this.callId} Ignoring invalid m.call.negotiate event`);const i=this.direction===_.Inbound,r="offer"===n.type&&(this.makingOffer||"stable"!==this.peerConn.signalingState);if(this.ignoreOffer=!i&&r,this.ignoreOffer)return void c.logger.info(`Call ${this.callId} Ignoring colliding negotiate event because we're impolite`);const o=this.isLocalOnHold(),s=t[h.SDPStreamMetadataKey];s?this.updateRemoteSDPStreamMetadata(s):c.logger.warn(`Call ${this.callId} Received negotiation event without SDPStreamMetadata!`);try{if(await this.peerConn.setRemoteDescription(n),"offer"===n.type){var a;let e;try{this.getRidOfRTXCodecs(),e=await this.createAnswer()}catch(e){return c.logger.debug(`Call ${this.callId} Failed to create answer: `,e),void this.terminate(T.Local,C.CreateAnswer,!0)}await this.peerConn.setLocalDescription(e),this.sendVoipEvent(u.EventType.CallNegotiate,{description:null===(a=this.peerConn.localDescription)||void 0===a?void 0:a.toJSON(),[h.SDPStreamMetadataKey]:this.getLocalSDPStreamMetadata(!0)})}}catch(e){c.logger.warn(`Call ${this.callId} Failed to complete negotiation`,e)}const l=this.isLocalOnHold();o!==l&&(this.emit(x.LocalHoldUnhold,l),this.emit(x.HoldUnhold,l))}updateRemoteSDPStreamMetadata(e){this.remoteSDPStreamMetadata=l.recursivelyAssign(this.remoteSDPStreamMetadata||{},e,!0);for(const e of this.getRemoteFeeds()){var t;const n=e.stream.id,i=this.remoteSDPStreamMetadata[n];e.setAudioVideoMuted(null==i?void 0:i.audio_muted,null==i?void 0:i.video_muted),e.purpose=null===(t=this.remoteSDPStreamMetadata[n])||void 0===t?void 0:t.purpose}}onSDPStreamMetadataChangedReceived(e){const t=e.getContent()[h.SDPStreamMetadataKey];this.updateRemoteSDPStreamMetadata(t)}async onAssertedIdentityReceived(e){const t=e.getContent();t.asserted_identity&&(this.remoteAssertedIdentity={id:t.asserted_identity.id,displayName:t.asserted_identity.display_name},this.emit(x.AssertedIdentityChanged))}callHasEnded(){return this.state===S.Ended}queueGotLocalOffer(){this.responsePromiseChain?this.responsePromiseChain=this.responsePromiseChain.then((()=>this.wrappedGotLocalOffer())):this.responsePromiseChain=this.wrappedGotLocalOffer()}async wrappedGotLocalOffer(){this.makingOffer=!0;try{await this.gotLocalOffer()}catch(e){return void this.getLocalOfferFailed(e)}finally{this.makingOffer=!1}}async gotLocalOffer(){if(c.logger.debug(`Call ${this.callId} Setting local description`),this.callHasEnded())return void c.logger.debug("Ignoring newly created offer on call ID "+this.callId+" because the call has ended");let e;try{this.getRidOfRTXCodecs(),e=await this.createOffer()}catch(e){return c.logger.debug(`Call ${this.callId} Failed to create offer: `,e),void this.terminate(T.Local,C.CreateOffer,!0)}try{await this.peerConn.setLocalDescription(e)}catch(e){return c.logger.debug(`Call ${this.callId} Error setting local description!`,e),void this.terminate(T.Local,C.SetLocalDescription,!0)}if("gathering"===this.peerConn.iceGatheringState&&await new Promise((e=>{setTimeout(e,200)})),this.callHasEnded())return;const t=this.state===S.CreateOffer?u.EventType.CallInvite:u.EventType.CallNegotiate,n={lifetime:6e4};var i,r;t===u.EventType.CallInvite&&this.invitee&&(n.invitee=this.invitee),this.state===S.CreateOffer?n.offer=null===(i=this.peerConn.localDescription)||void 0===i?void 0:i.toJSON():n.description=null===(r=this.peerConn.localDescription)||void 0===r?void 0:r.toJSON(),n.capabilities={"m.call.transferee":this.client.supportsCallTransfer,"m.call.dtmf":!1},n[h.SDPStreamMetadataKey]=this.getLocalSDPStreamMetadata(!0);const o=this.discardDuplicateCandidates();c.logger.info(`Call ${this.callId} Discarding ${o} candidates that will be sent in offer`);try{await this.sendVoipEvent(t,n)}catch(e){c.logger.error(`Call ${this.callId} Failed to send invite`,e),e instanceof v.MatrixError&&e.event&&this.client.cancelPendingEvent(e.event);let t=C.SignallingFailed,n="Signalling failed";return this.state===S.CreateOffer&&(t=C.SendInvite,n="Failed to send invite"),"UnknownDeviceError"==e.name&&(t=C.UnknownDevices,n="Unknown devices present in the room"),this.emit(x.Error,new I(t,n,e)),void this.terminate(T.Local,t,!1)}this.sendCandidateQueue(),this.state===S.CreateOffer&&(this.inviteOrAnswerSent=!0,this.setState(S.InviteSent),this.inviteTimeout=setTimeout((()=>{this.inviteTimeout=void 0,this.state===S.InviteSent&&this.hangup(C.InviteTimeout,!1)}),6e4))}getRidOfRTXCodecs(){if(!RTCRtpReceiver.getCapabilities||!RTCRtpSender.getCapabilities)return;const e=RTCRtpReceiver.getCapabilities("video").codecs,t=[...RTCRtpSender.getCapabilities("video").codecs,...e];for(const e of t)if("video/rtx"===e.mimeType){const n=t.indexOf(e);t.splice(n,1)}const n=this.transceivers.get(A(h.SDPStreamMetadataPurpose.Screenshare,"video"));n&&n.setCodecPreferences(t)}setState(e){const t=this.state;this.state=e,this.emit(x.State,e,t)}async sendVoipEvent(e,t){const n=Object.assign({},t,{version:"1",call_id:this.callId,party_id:this.ourPartyId,conf_id:this.groupCallId});if(this.opponentDeviceId){var i;const t=this.toDeviceSeq++,r=E(E({},n),{},{device_id:this.client.deviceId,sender_session_id:this.client.getSessionId(),dest_session_id:this.opponentSessionId,seq:t});this.emit(x.SendVoipEvent,{type:"toDevice",eventType:e,userId:this.invitee||(null===(i=this.getOpponentMember())||void 0===i?void 0:i.userId),opponentDeviceId:this.opponentDeviceId,content:r});const o=this.invitee||this.getOpponentMember().userId;this.client.getUseE2eForGroupCall()?await this.client.encryptAndSendToDevices([{userId:o,deviceInfo:this.opponentDeviceInfo}],{type:e,content:r}):await this.client.sendToDevice(e,{[o]:{[this.opponentDeviceId]:r}})}else{var r;this.emit(x.SendVoipEvent,{type:"sendEvent",eventType:e,roomId:this.roomId,content:n,userId:this.invitee||(null===(r=this.getOpponentMember())||void 0===r?void 0:r.userId)}),await this.client.sendEvent(this.roomId,e,n)}}queueCandidate(e){if(e?this.candidateSendQueue.push(e):this.candidatesEnded=!0,this.state===S.Ringing||!this.inviteOrAnswerSent)return;const t=this.direction===_.Inbound?500:2e3;0===this.candidateSendTries&&setTimeout((()=>{this.sendCandidateQueue()}),t)}discardDuplicateCandidates(){let e=0;const t=[];for(let n=0;n<this.candidateSendQueue.length;n++){const i=this.candidateSendQueue[n];""===i.candidate?t.push(i):e++}return this.candidateSendQueue=t,e}async transfer(e){const t=await this.client.getProfileInfo(e),n=k(),i={replacement_id:k(),target_user:{id:e,display_name:t.displayname,avatar_url:t.avatar_url},create_call:n};await this.sendVoipEvent(u.EventType.CallReplaces,i),await this.terminate(T.Local,C.Transfered,!0)}async transferToCall(e){var t,n;const i=null===(t=e.getOpponentMember())||void 0===t?void 0:t.userId,r=i?await this.client.getProfileInfo(i):void 0,o=null===(n=this.getOpponentMember())||void 0===n?void 0:n.userId,s=o?await this.client.getProfileInfo(o):void 0,a=k(),c={replacement_id:k(),target_user:{id:o,display_name:null==s?void 0:s.displayname,avatar_url:null==s?void 0:s.avatar_url},await_call:a};await e.sendVoipEvent(u.EventType.CallReplaces,c);const l={replacement_id:k(),target_user:{id:i,display_name:null==r?void 0:r.displayname,avatar_url:null==r?void 0:r.avatar_url},create_call:a};await this.sendVoipEvent(u.EventType.CallReplaces,l),await this.terminate(T.Local,C.Transfered,!0),await e.terminate(T.Local,C.Transfered,!0)}async terminate(e,t,n){if(!this.callHasEnded()){this.hangupParty=e,this.hangupReason=t,this.setState(S.Ended),this.inviteTimeout&&(clearTimeout(this.inviteTimeout),this.inviteTimeout=void 0),this.callLengthInterval&&(clearInterval(this.callLengthInterval),this.callLengthInterval=void 0);for(const[e,t]of this.removeTrackListeners)e.removeEventListener("removetrack",t);this.removeTrackListeners.clear(),this.callStatsAtEnd=await this.collectCallStats(),this.stopAllMedia(),this.deleteAllFeeds(),this.peerConn&&"closed"!==this.peerConn.signalingState&&this.peerConn.close(),n&&this.emit(x.Hangup,this),this.client.callEventHandler.calls.delete(this.callId)}}stopAllMedia(){c.logger.debug(this.groupCallId?`Call ${this.callId} stopping all media except local feeds`:`Call ${this.callId} stopping all media`);for(const e of this.feeds)if(e.isLocal()&&e.purpose===h.SDPStreamMetadataPurpose.Usermedia&&!this.groupCallId)this.client.getMediaHandler().stopUserMediaStream(e.stream);else if(e.isLocal()&&e.purpose===h.SDPStreamMetadataPurpose.Screenshare&&!this.groupCallId)this.client.getMediaHandler().stopScreensharingStream(e.stream);else if(!e.isLocal()||!this.groupCallId){c.logger.debug("Stopping remote stream",e.stream.id);for(const t of e.stream.getTracks())t.stop()}}checkForErrorListener(){if(0===this.listeners(f.EventEmitterEvents.Error).length)throw new Error("You MUST attach an error listener using call.on('error', function() {})")}async sendCandidateQueue(){if(0===this.candidateSendQueue.length||this.callHasEnded())return;const e=this.candidateSendQueue;this.candidateSendQueue=[],++this.candidateSendTries;const t={candidates:e.map((e=>e.toJSON()))};this.candidatesEnded&&t.candidates.push({candidate:""}),c.logger.debug(`Call ${this.callId} attempting to send ${e.length} candidates`);try{await this.sendVoipEvent(u.EventType.CallCandidates,t),this.candidateSendTries=0,this.sendCandidateQueue()}catch(t){if(t instanceof v.MatrixError&&t.event&&this.client.cancelPendingEvent(t.event),this.candidateSendQueue.push(...e),this.candidateSendTries>5){c.logger.debug(`Call ${this.callId} failed to send candidates on attempt ${this.candidateSendTries}. Giving up on this call.`,t);const e=C.SignallingFailed,n="Signalling failed";return this.emit(x.Error,new I(e,n,t)),void this.hangup(e,!1)}const n=500*Math.pow(2,this.candidateSendTries);++this.candidateSendTries,c.logger.debug(`Call ${this.callId} failed to send candidates. Retrying in ${n}ms`,t),setTimeout((()=>{this.sendCandidateQueue()}),n)}}async placeCall(e,t){if(!e)throw new Error("You CANNOT start a call without audio");this.setState(S.WaitLocalMedia);try{var n;const i=await this.client.getMediaHandler().getUserMediaStream(e,t);R(i.getAudioTracks(),!0),R(i.getVideoTracks(),!0);const r=new p.CallFeed({client:this.client,roomId:this.roomId,userId:this.client.getUserId(),deviceId:null!==(n=this.client.getDeviceId())&&void 0!==n?n:void 0,stream:i,purpose:h.SDPStreamMetadataPurpose.Usermedia,audioMuted:!1,videoMuted:!1});await this.placeCallWithCallFeeds([r])}catch(e){return void this.getUserMediaFailed(e)}}async placeCallWithCallFeeds(e,t=!1){this.checkForErrorListener(),this.direction=_.Outbound,await this.initOpponentCrypto(),this.client.callEventHandler.calls.set(this.callId,this),await this.client.checkTurnServers()||c.logger.warn(`Call ${this.callId} Failed to get TURN credentials! Proceeding with call anyway...`),this.peerConn=this.createPeerConnection(),this.gotCallFeedsForInvite(e,t)}createPeerConnection(){const e=new window.RTCPeerConnection({iceTransportPolicy:this.forceTURN?"relay":void 0,iceServers:this.turnServers,iceCandidatePoolSize:this.client.iceCandidatePoolSize,bundlePolicy:"max-bundle"});return e.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChanged),e.addEventListener("signalingstatechange",this.onSignallingStateChanged),e.addEventListener("icecandidate",this.gotLocalIceCandidate),e.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),e.addEventListener("track",this.onTrack),e.addEventListener("negotiationneeded",this.onNegotiationNeeded),e.addEventListener("datachannel",this.onDataChannel),e}partyIdMatches(e){return(0===e.version?null:e.party_id||null)===this.opponentPartyId}chooseOpponent(e){var t;const n=e.getContent();c.logger.debug(`Call ${this.callId} choosing opponent party ID ${n.party_id}`),this.opponentVersion=n.version,0===this.opponentVersion?this.opponentPartyId=null:this.opponentPartyId=n.party_id||null,this.opponentCaps=n.capabilities||{},this.opponentMember=null!==(t=this.client.getRoom(this.roomId).getMember(e.getSender()))&&void 0!==t?t:void 0}async addBufferedIceCandidates(){const e=this.remoteCandidateBuffer.get(this.opponentPartyId);e&&(c.logger.info(`Call ${this.callId} Adding ${e.length} buffered candidates for opponent ${this.opponentPartyId}`),await this.addIceCandidates(e)),this.remoteCandidateBuffer.clear()}async addIceCandidates(e){for(const t of e){null!==t.sdpMid&&void 0!==t.sdpMid||null!==t.sdpMLineIndex&&void 0!==t.sdpMLineIndex?c.logger.debug(`Call ${this.callId} got remote ICE ${t.sdpMid} candidate: ${t.candidate}`):c.logger.debug(`Call ${this.callId} got remote ICE end-of-candidates`);try{await this.peerConn.addIceCandidate(t)}catch(e){this.ignoreOffer||c.logger.info(`Call ${this.callId} failed to add remote ICE candidate`,e)}}}get hasPeerConnection(){return Boolean(this.peerConn)}}function R(e,t){for(const n of e)n.enabled=t}function L(){if("undefined"==typeof window||"undefined"==typeof document)return!1;try{if(!Boolean(window.RTCPeerConnection||window.RTCSessionDescription||window.RTCIceCandidate||navigator.mediaDevices))return c.logger.error("WebRTC is not supported in this browser / environment"),!1}catch(e){return c.logger.error("Exception thrown when trying to access WebRTC",e),!1}return!0}t.MatrixCall=O},62931:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CallEventHandlerEvent=t.CallEventHandler=void 0;var r=i(n(59713)),o=n(7434),s=n(59679),a=n(42481),c=n(62168),l=n(8969),u=n(27366);let d;t.CallEventHandlerEvent=d,function(e){e.Incoming="Call.incoming"}(d||(t.CallEventHandlerEvent=d={})),t.CallEventHandler=class{constructor(e){(0,r.default)(this,"calls",void 0),(0,r.default)(this,"callEventBuffer",void 0),(0,r.default)(this,"nextSeqByCall",new Map),(0,r.default)(this,"toDeviceEventBuffers",new Map),(0,r.default)(this,"client",void 0),(0,r.default)(this,"candidateEventsByCall",void 0),(0,r.default)(this,"eventBufferPromiseChain",void 0),(0,r.default)(this,"onSync",(()=>{const e=this.callEventBuffer;this.callEventBuffer=[],this.eventBufferPromiseChain?this.eventBufferPromiseChain=this.eventBufferPromiseChain.then((()=>this.evaluateEventBuffer(e))):this.eventBufferPromiseChain=this.evaluateEventBuffer(e)})),(0,r.default)(this,"onRoomTimeline",(e=>{this.callEventBuffer.push(e)})),(0,r.default)(this,"onToDeviceEvent",(e=>{const t=e.getContent();if(!t.call_id)return void this.callEventBuffer.push(e);if(this.nextSeqByCall.has(t.call_id)||this.nextSeqByCall.set(t.call_id,0),void 0===t.seq)return void this.callEventBuffer.push(e);const n=this.nextSeqByCall.get(t.call_id)||0;if(t.seq!==n){this.toDeviceEventBuffers.has(t.call_id)||this.toDeviceEventBuffers.set(t.call_id,[]);const n=this.toDeviceEventBuffers.get(t.call_id),i=n.findIndex((e=>e.getContent().seq>t.seq));-1===i?n.push(e):n.splice(i,0,e)}else{const n=t.call_id;this.callEventBuffer.push(e),this.nextSeqByCall.set(n,t.seq+1);const i=this.toDeviceEventBuffers.get(n);let r=i&&i.shift();for(;r&&r.getContent().seq===this.nextSeqByCall.get(n);)this.callEventBuffer.push(r),this.nextSeqByCall.set(n,r.getContent().seq+1),r=i.shift()}})),this.client=e,this.calls=new Map,this.callEventBuffer=[],this.candidateEventsByCall=new Map}start(){this.client.on(c.ClientEvent.Sync,this.onSync),this.client.on(u.RoomEvent.Timeline,this.onRoomTimeline),this.client.on(c.ClientEvent.ToDeviceEvent,this.onToDeviceEvent)}stop(){this.client.removeListener(c.ClientEvent.Sync,this.onSync),this.client.removeListener(u.RoomEvent.Timeline,this.onRoomTimeline),this.client.removeListener(c.ClientEvent.ToDeviceEvent,this.onToDeviceEvent)}async evaluateEventBuffer(e){await Promise.all(e.map((e=>this.client.decryptEventIfNeeded(e))));const t=e.filter((e=>{const t=e.getType();return t.startsWith("m.call.")||t.startsWith("org.matrix.call.")})),n=new Set;for(const e of t){const t=e.getType();t!==a.EventType.CallAnswer&&t!==a.EventType.CallHangup||n.add(e.getContent().call_id)}for(const e of t){const t=e.getType(),i=e.getContent().call_id;if(t!==a.EventType.CallInvite||!n.has(i))try{await this.handleCallEvent(e)}catch(e){o.logger.error("Caught exception handling call event",e)}}}async handleCallEvent(e){var t,n;this.client.emit(c.ClientEvent.ReceivedVoipEvent,e);const i=e.getContent(),r=e.getRoomId()||(null===(t=this.client.groupCallEventHandler.getGroupCallById(i.conf_id))||void 0===t||null===(n=t.room)||void 0===n?void 0:n.roomId),u=i.conf_id,h=e.getType(),p=e.getSender();let f,m,g=i.call_id?this.calls.get(i.call_id):void 0;if(u){if(m=this.client.groupCallEventHandler.getGroupCallById(u),!m)return void o.logger.warn(`Cannot find a group call ${u} for event ${h}. Ignoring event.`);if(f=i.device_id,!f)return o.logger.warn(`Cannot find a device id for ${p}. Ignoring event.`),void m.emit(l.GroupCallEvent.Error,new l.GroupCallUnknownDeviceError(p));if(i.dest_session_id!==this.client.getSessionId())return void o.logger.warn("Call event does not match current session id, ignoring.")}const v=p===this.client.credentials.userId&&(void 0===f||f===this.client.getDeviceId());if(r)if(h!==a.EventType.CallInvite)if(h!==a.EventType.CallCandidates){var y;if([a.EventType.CallHangup,a.EventType.CallReject].includes(h))g?g.state!==s.CallState.Ended&&(h===a.EventType.CallHangup?g.onHangupReceived(i):g.onRejectReceived(i),g.state===s.CallState.Ended&&this.calls.delete(i.call_id)):(g=null!==(y=(0,s.createNewMatrixCall)(this.client,r,{opponentDeviceId:f,opponentSessionId:i.sender_session_id}))&&void 0!==y?y:void 0,g&&(g.callId=i.call_id,g.initWithHangup(e),this.calls.set(i.call_id,g)));else if(g&&g.hasPeerConnection){if(e.getContent().party_id!==g.ourPartyId)switch(h){case a.EventType.CallAnswer:v?g.state===s.CallState.Ringing&&g.onAnsweredElsewhere(i):g.onAnswerReceived(e);break;case a.EventType.CallSelectAnswer:g.onSelectAnswerReceived(e);break;case a.EventType.CallNegotiate:g.onNegotiateReceived(e);break;case a.EventType.CallAssertedIdentity:case a.EventType.CallAssertedIdentityPrefix:g.onAssertedIdentityReceived(e);break;case a.EventType.CallSDPStreamMetadataChanged:case a.EventType.CallSDPStreamMetadataChangedPrefix:g.onSDPStreamMetadataChangedReceived(e)}}else o.logger.info(`Discarding possible call event ${e.getId()} as we don't have a call/peerConn`,h)}else{if(v)return;g?g.onRemoteIceCandidatesReceived(e):(this.candidateEventsByCall.has(i.call_id)||this.candidateEventsByCall.set(i.call_id,[]),this.candidateEventsByCall.get(i.call_id).push(e))}else{var b,E;if(v)return;if(e.getLocalAge()>i.lifetime-3e3)return;if(g&&g.state===s.CallState.Ended)return;if(g&&o.logger.log(`WARN: Already have a MatrixCall with id ${i.call_id} but got an invite. Clobbering.`),i.invitee&&i.invitee!==this.client.getUserId())return;const t=(null!==(b=this.client.getTurnServersExpiry())&&void 0!==b?b:0)-Date.now();if(o.logger.info("Current turn creds expire in "+t+" ms"),g=null!==(E=(0,s.createNewMatrixCall)(this.client,r,{forceTURN:this.client.forceTURN,opponentDeviceId:f,groupCallId:u,opponentSessionId:i.sender_session_id}))&&void 0!==E?E:void 0,!g)return void o.logger.log("Incoming call ID "+i.call_id+" but this client doesn't support WebRTC");g.callId=i.call_id;try{await g.initWithInvite(e)}catch(e){var S;e instanceof s.CallError&&(e.code===l.GroupCallErrorCode.UnknownDevice?null===(S=m)||void 0===S||S.emit(l.GroupCallEvent.Error,e):o.logger.error(e))}if(this.calls.set(g.callId,g),this.candidateEventsByCall.get(g.callId))for(const e of this.candidateEventsByCall.get(g.callId))g.onRemoteIceCandidatesReceived(e);let n;for(const e of this.calls.values()){var w;const t=[s.CallState.WaitLocalMedia,s.CallState.CreateOffer,s.CallState.InviteSent].includes(e.state);if(g.roomId===e.roomId&&e.direction===s.CallDirection.Outbound&&(null===(w=g.getOpponentMember())||void 0===w?void 0:w.userId)===e.invitee&&t){n=e;break}}n?n.callId>g.callId?(o.logger.log("Glare detected: answering incoming call "+g.callId+" and canceling outgoing call "+n.callId),n.replacedBy(g)):(o.logger.log("Glare detected: rejecting incoming call "+g.callId+" and keeping outgoing call "+n.callId),g.hangup(s.CallErrorCode.Replaced,!0)):this.client.emit(d.Incoming,g)}}}},15964:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.SDPStreamMetadataPurpose=t.SDPStreamMetadataKey=void 0,t.SDPStreamMetadataKey="org.matrix.msc3077.sdp_stream_metadata",t.SDPStreamMetadataPurpose=n,function(e){e.Usermedia="m.usermedia",e.Screenshare="m.screenshare"}(n||(t.SDPStreamMetadataPurpose=n={}))},49704:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SPEAKING_THRESHOLD=t.CallFeedEvent=t.CallFeed=void 0;var r=i(n(59713)),o=n(15964),s=n(62667),a=n(7434),c=n(55861);let l;t.SPEAKING_THRESHOLD=-60,t.CallFeedEvent=l,function(e){e.NewStream="new_stream",e.MuteStateChanged="mute_state_changed",e.LocalVolumeChanged="local_volume_changed",e.VolumeChanged="volume_changed",e.Speaking="speaking",e.Disposed="disposed"}(l||(t.CallFeedEvent=l={}));class u extends c.TypedEventEmitter{constructor(e){super(),(0,r.default)(this,"stream",void 0),(0,r.default)(this,"sdpMetadataStreamId",void 0),(0,r.default)(this,"userId",void 0),(0,r.default)(this,"deviceId",void 0),(0,r.default)(this,"purpose",void 0),(0,r.default)(this,"speakingVolumeSamples",void 0),(0,r.default)(this,"client",void 0),(0,r.default)(this,"roomId",void 0),(0,r.default)(this,"audioMuted",void 0),(0,r.default)(this,"videoMuted",void 0),(0,r.default)(this,"localVolume",1),(0,r.default)(this,"measuringVolumeActivity",!1),(0,r.default)(this,"audioContext",void 0),(0,r.default)(this,"analyser",void 0),(0,r.default)(this,"frequencyBinCount",void 0),(0,r.default)(this,"speakingThreshold",-60),(0,r.default)(this,"speaking",!1),(0,r.default)(this,"volumeLooperTimeout",void 0),(0,r.default)(this,"_disposed",!1),(0,r.default)(this,"onAddTrack",(()=>{this.emit(l.NewStream,this.stream)})),(0,r.default)(this,"volumeLooper",(()=>{if(!this.analyser)return;if(!this.measuringVolumeActivity)return;this.analyser.getFloatFrequencyData(this.frequencyBinCount);let e=-1/0;for(const t of this.frequencyBinCount)t>e&&(e=t);this.speakingVolumeSamples.shift(),this.speakingVolumeSamples.push(e),this.emit(l.VolumeChanged,e);let t=!1;for(const e of this.speakingVolumeSamples)if(e>this.speakingThreshold){t=!0;break}this.speaking!==t&&(this.speaking=t,this.emit(l.Speaking,this.speaking)),this.volumeLooperTimeout=setTimeout(this.volumeLooper,200)})),this.client=e.client,this.roomId=e.roomId,this.userId=e.userId,this.deviceId=e.deviceId,this.purpose=e.purpose,this.audioMuted=e.audioMuted,this.videoMuted=e.videoMuted,this.speakingVolumeSamples=new Array(8).fill(-1/0),this.sdpMetadataStreamId=e.stream.id,this.updateStream(null,e.stream),this.stream=e.stream,this.hasAudioTrack&&this.initVolumeMeasuring()}get hasAudioTrack(){return this.stream.getAudioTracks().length>0}updateStream(e,t){t!==e&&(e&&(e.removeEventListener("addtrack",this.onAddTrack),this.measureVolumeActivity(!1)),this.stream=t,t.addEventListener("addtrack",this.onAddTrack),this.hasAudioTrack?this.initVolumeMeasuring():this.measureVolumeActivity(!1),this.emit(l.NewStream,this.stream))}initVolumeMeasuring(){this.hasAudioTrack&&(this.audioContext||(this.audioContext=(0,s.acquireContext)()),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=512,this.analyser.smoothingTimeConstant=.1,this.audioContext.createMediaStreamSource(this.stream).connect(this.analyser),this.frequencyBinCount=new Float32Array(this.analyser.frequencyBinCount))}getMember(){var e;const t=this.client.getRoom(this.roomId);return null!==(e=null==t?void 0:t.getMember(this.userId))&&void 0!==e?e:null}isLocal(){return this.userId===this.client.getUserId()&&(void 0===this.deviceId||this.deviceId===this.client.getDeviceId())}isAudioMuted(){return 0===this.stream.getAudioTracks().length||this.audioMuted}isVideoMuted(){return 0===this.stream.getVideoTracks().length||this.videoMuted}isSpeaking(){return this.speaking}setNewStream(e){this.updateStream(this.stream,e)}setAudioVideoMuted(e,t){null!==e&&(this.audioMuted!==e&&this.speakingVolumeSamples.fill(-1/0),this.audioMuted=e),null!==t&&(this.videoMuted=t),this.emit(l.MuteStateChanged,this.audioMuted,this.videoMuted)}measureVolumeActivity(e){if(e){if(!this.analyser||!this.frequencyBinCount||!this.hasAudioTrack)return;this.measuringVolumeActivity=!0,this.volumeLooper()}else this.measuringVolumeActivity=!1,this.speakingVolumeSamples.fill(-1/0),this.emit(l.VolumeChanged,-1/0)}setSpeakingThreshold(e){this.speakingThreshold=e}clone(){const e=this.client.getMediaHandler(),t=this.stream.clone();return a.logger.log(`callFeed cloning stream ${this.stream.id} newStream ${t.id}`),this.purpose===o.SDPStreamMetadataPurpose.Usermedia?e.userMediaStreams.push(t):e.screensharingStreams.push(t),new u({client:this.client,roomId:this.roomId,userId:this.userId,deviceId:this.deviceId,stream:t,purpose:this.purpose,audioMuted:this.audioMuted,videoMuted:this.videoMuted})}dispose(){var e;clearTimeout(this.volumeLooperTimeout),null===(e=this.stream)||void 0===e||e.removeEventListener("addtrack",this.onAddTrack),this.audioContext&&(this.audioContext=void 0,this.analyser=void 0,(0,s.releaseContext)()),this._disposed=!0,this.emit(l.Disposed)}get disposed(){return this._disposed}set disposed(e){this._disposed=e}getLocalVolume(){return this.localVolume}setLocalVolume(e){this.localVolume=e,this.emit(l.LocalVolumeChanged,e)}}t.CallFeed=u},8969:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.OtherUserSpeakingError=t.GroupCallUnknownDeviceError=t.GroupCallType=t.GroupCallTerminationReason=t.GroupCallState=t.GroupCallIntent=t.GroupCallEvent=t.GroupCallErrorCode=t.GroupCallError=t.GroupCall=void 0;var r=i(n(59713)),o=n(55861),s=n(49704),a=n(59679),c=n(26860),l=n(7434),u=n(20771),d=n(15964),h=n(42481),p=n(62931),f=n(98738),m=n(3102);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let y,b,E,S,w,_;t.GroupCallIntent=y,function(e){e.Ring="m.ring",e.Prompt="m.prompt",e.Room="m.room"}(y||(t.GroupCallIntent=y={})),t.GroupCallType=b,function(e){e.Video="m.video",e.Voice="m.voice"}(b||(t.GroupCallType=b={})),t.GroupCallTerminationReason=E,function(e){e.CallEnded="call_ended"}(E||(t.GroupCallTerminationReason=E={})),t.GroupCallEvent=S,function(e){e.GroupCallStateChanged="group_call_state_changed",e.ActiveSpeakerChanged="active_speaker_changed",e.CallsChanged="calls_changed",e.UserMediaFeedsChanged="user_media_feeds_changed",e.ScreenshareFeedsChanged="screenshare_feeds_changed",e.LocalScreenshareStateChanged="local_screenshare_state_changed",e.LocalMuteStateChanged="local_mute_state_changed",e.ParticipantsChanged="participants_changed",e.Error="error"}(S||(t.GroupCallEvent=S={})),t.GroupCallErrorCode=w,function(e){e.NoUserMedia="no_user_media",e.UnknownDevice="unknown_device",e.PlaceCallFailed="place_call_failed"}(w||(t.GroupCallErrorCode=w={}));class T extends Error{constructor(e,t,n){n?(super(t+": "+n),(0,r.default)(this,"code",void 0)):(super(t),(0,r.default)(this,"code",void 0)),this.code=e}}t.GroupCallError=T,t.GroupCallUnknownDeviceError=class extends T{constructor(e){super(w.UnknownDevice,"No device found for "+e),this.userId=e}};class x extends Error{constructor(){super("Cannot unmute: another user is speaking")}}t.OtherUserSpeakingError=x,t.GroupCallState=_,function(e){e.LocalCallFeedUninitialized="local_call_feed_uninitialized",e.InitializingLocalCallFeed="initializing_local_call_feed",e.LocalCallFeedInitialized="local_call_feed_initialized",e.Entered="entered",e.Ended="ended"}(_||(t.GroupCallState=_={}));function C(e){var t;return(null===(t=e.getOpponentMember())||void 0===t?void 0:t.userId)||e.invitee||null}class I extends o.TypedEventEmitter{constructor(e,t,n,i,o,d,p,f){var m,g;super(),this.client=e,this.room=t,this.type=n,this.isPtt=i,this.intent=o,this.dataChannelsEnabled=p,this.dataChannelOptions=f,(0,r.default)(this,"activeSpeakerInterval",1e3),(0,r.default)(this,"retryCallInterval",5e3),(0,r.default)(this,"participantTimeout",15e3),(0,r.default)(this,"pttMaxTransmitTime",2e4),(0,r.default)(this,"activeSpeaker",void 0),(0,r.default)(this,"localCallFeed",void 0),(0,r.default)(this,"localScreenshareFeed",void 0),(0,r.default)(this,"localDesktopCapturerSourceId",void 0),(0,r.default)(this,"calls",new Map),(0,r.default)(this,"userMediaFeeds",[]),(0,r.default)(this,"screenshareFeeds",[]),(0,r.default)(this,"groupCallId",void 0),(0,r.default)(this,"callHandlers",new Map),(0,r.default)(this,"activeSpeakerLoopInterval",void 0),(0,r.default)(this,"retryCallLoopInterval",void 0),(0,r.default)(this,"retryCallCounts",new Map),(0,r.default)(this,"reEmitter",void 0),(0,r.default)(this,"transmitTimer",null),(0,r.default)(this,"participantsExpirationTimer",null),(0,r.default)(this,"resendMemberStateTimer",null),(0,r.default)(this,"initWithAudioMuted",!1),(0,r.default)(this,"initWithVideoMuted",!1),(0,r.default)(this,"_state",_.LocalCallFeedUninitialized),(0,r.default)(this,"_participants",new Map),(0,r.default)(this,"_creationTs",null),(0,r.default)(this,"_enteredViaAnotherSession",!1),(0,r.default)(this,"onIncomingCall",(e=>{var t;if(e.roomId!==this.room.roomId)return;if(e.state!==a.CallState.Ringing)return void l.logger.warn("Incoming call no longer in ringing state. Ignoring.");if(!e.groupCallId||e.groupCallId!==this.groupCallId)return l.logger.log(`Incoming call with groupCallId ${e.groupCallId} ignored because it doesn't match the current group call`),void e.reject();const n=e.getOpponentMember();if(void 0===n)return void l.logger.warn("Incoming call with no member. Ignoring.");const i=null!==(t=this.calls.get(n))&&void 0!==t?t:new Map,r=i.get(e.getOpponentDeviceId());(null==r?void 0:r.callId)!==e.callId&&(l.logger.log(`GroupCall: incoming call from ${n.userId} with ID ${e.callId}`),r&&this.disposeCall(r,a.CallErrorCode.Replaced),this.initCall(e),e.answerWithCallFeeds(this.getLocalFeeds().map((e=>e.clone()))),i.set(e.getOpponentDeviceId(),e),this.calls.set(n,i),this.emit(S.CallsChanged,this.calls))})),(0,r.default)(this,"onRetryCallLoop",(()=>{let e=!1;for(const[i,r]of this.participants){const o=this.calls.get(i);let s=this.retryCallCounts.get(i);for(const[a,c]of r){var t,n;const r=null==o?void 0:o.get(a),l=null!==(t=null===(n=s)||void 0===n?void 0:n.get(a))&&void 0!==t?t:0;(null==r?void 0:r.getOpponentSessionId())!==c.sessionId&&this.wantsOutgoingCall(i.userId,a)&&l<3&&(void 0===s&&(s=new Map,this.retryCallCounts.set(i,s)),s.set(a,l+1),e=!0)}}e&&this.placeOutgoingCalls()})),(0,r.default)(this,"onCallFeedsChanged",(e=>{const t=C(e),n=e.getOpponentDeviceId();if(!t)throw new Error("Cannot change call feeds without user id");const i=this.getUserMediaFeed(t,n),r=e.remoteUsermediaFeed;r!==i&&(!i&&r?this.addUserMediaFeed(r):i&&r?this.replaceUserMediaFeed(i,r):i&&!r&&this.removeUserMediaFeed(i));const o=this.getScreenshareFeed(t,n),s=e.remoteScreensharingFeed;s!==o&&(!o&&s?this.addScreenshareFeed(s):o&&s?this.replaceScreenshareFeed(o,s):o&&!s&&this.removeScreenshareFeed(o))})),(0,r.default)(this,"onCallStateChanged",((e,t,n)=>{const i=this.localCallFeed.isAudioMuted();e.localUsermediaStream&&e.isMicrophoneMuted()!==i&&e.setMicrophoneMuted(i);const r=this.localCallFeed.isVideoMuted();if(e.localUsermediaStream&&e.isLocalVideoMuted()!==r&&e.setLocalVideoMuted(r),t===a.CallState.Connected){const t=e.getOpponentMember(),n=this.retryCallCounts.get(t);null==n||n.delete(e.getOpponentDeviceId()),0===(null==n?void 0:n.size)&&this.retryCallCounts.delete(t)}})),(0,r.default)(this,"onCallHangup",(e=>{var t;if(e.hangupReason===a.CallErrorCode.Replaced)return;const n=null!==(t=e.getOpponentMember())&&void 0!==t?t:this.room.getMember(e.invitee),i=this.calls.get(n);(null==i?void 0:i.get(e.getOpponentDeviceId()))===e&&(this.disposeCall(e,e.hangupReason),i.delete(e.getOpponentDeviceId()),0===i.size&&this.calls.delete(n),this.emit(S.CallsChanged,this.calls))})),(0,r.default)(this,"onCallReplaced",((e,t)=>{const n=e.getOpponentMember();let i=this.calls.get(n);void 0===i&&(i=new Map,this.calls.set(n,i)),this.disposeCall(e,a.CallErrorCode.Replaced),this.initCall(t),i.set(e.getOpponentDeviceId(),t),this.emit(S.CallsChanged,this.calls)})),(0,r.default)(this,"onActiveSpeakerLoop",(()=>{let e,t;for(const n of this.userMediaFeeds){if(n.isLocal()&&this.userMediaFeeds.length>1)continue;const i=n.speakingVolumeSamples.reduce(((e,t)=>e+Math.max(t,s.SPEAKING_THRESHOLD)))/n.speakingVolumeSamples.length;(!e||i>e)&&(e=i,t=n)}t&&this.activeSpeaker!==t&&e&&e>s.SPEAKING_THRESHOLD&&(this.activeSpeaker=t,this.emit(S.ActiveSpeakerChanged,this.activeSpeaker))})),(0,r.default)(this,"onRoomState",(()=>this.updateParticipants())),(0,r.default)(this,"onParticipantsChanged",(()=>{this.state===_.Entered&&this.placeOutgoingCalls()})),(0,r.default)(this,"onStateChanged",((e,t)=>{e!==_.Entered&&t!==_.Entered&&e!==_.Ended||(this.updateParticipants(),this.updateMemberState().catch((e=>l.logger.error("Failed to update member state devices",e))))})),(0,r.default)(this,"onLocalFeedsChanged",(()=>{this.state===_.Entered&&this.updateMemberState().catch((e=>l.logger.error("Failed to update member state feeds",e)))})),this.reEmitter=new u.ReEmitter(this),this.groupCallId=null!=d?d:(0,a.genCallID)(),this.creationTs=null!==(m=null===(g=t.currentState.getStateEvents(h.EventType.GroupCallPrefix,this.groupCallId))||void 0===g?void 0:g.getTs())&&void 0!==m?m:null,this.updateParticipants(),t.on(c.RoomStateEvent.Update,this.onRoomState),this.on(S.ParticipantsChanged,this.onParticipantsChanged),this.on(S.GroupCallStateChanged,this.onStateChanged),this.on(S.LocalScreenshareStateChanged,this.onLocalFeedsChanged)}async create(){return this.creationTs=Date.now(),this.client.groupCallEventHandler.groupCalls.set(this.room.roomId,this),this.client.emit(f.GroupCallEventHandlerEvent.Outgoing,this),await this.client.sendStateEvent(this.room.roomId,h.EventType.GroupCallPrefix,{"m.intent":this.intent,"m.type":this.type,"io.element.ptt":this.isPtt,dataChannelsEnabled:this.dataChannelsEnabled,dataChannelOptions:this.dataChannelOptions},this.groupCallId),this}get state(){return this._state}set state(e){const t=this._state;e!==t&&(this._state=e,this.emit(S.GroupCallStateChanged,e,t))}get participants(){return this._participants}set participants(e){const t=this._participants,n=(e,t)=>e.sessionId===t.sessionId&&e.screensharing===t.screensharing;(0,m.mapsEqual)(e,t,((e,t)=>(0,m.mapsEqual)(e,t,n)))||(this._participants=e,this.emit(S.ParticipantsChanged,e))}get creationTs(){return this._creationTs}set creationTs(e){this._creationTs=e}get enteredViaAnotherSession(){return this._enteredViaAnotherSession}set enteredViaAnotherSession(e){this._enteredViaAnotherSession=e,this.updateParticipants()}forEachCall(e){for(const t of this.calls.values())for(const n of t.values())e(n)}getLocalFeeds(){const e=[];return this.localCallFeed&&e.push(this.localCallFeed),this.localScreenshareFeed&&e.push(this.localScreenshareFeed),e}hasLocalParticipant(){var e,t;return null!==(e=null===(t=this.participants.get(this.room.getMember(this.client.getUserId())))||void 0===t?void 0:t.has(this.client.getDeviceId()))&&void 0!==e&&e}async initLocalCallFeed(){if(l.logger.log(`groupCall ${this.groupCallId} initLocalCallFeed`),this.state!==_.LocalCallFeedUninitialized)throw new Error(`Cannot initialize local call feed in the "${this.state}" state.`);let e;this.state=_.InitializingLocalCallFeed;let t=!1;const n=e=>{e===_.LocalCallFeedUninitialized&&(t=!0)};this.on(S.GroupCallStateChanged,n);try{e=await this.client.getMediaHandler().getUserMediaStream(!0,this.type===b.Video)}catch(e){throw this.state=_.LocalCallFeedUninitialized,e}finally{this.off(S.GroupCallStateChanged,n)}if(t)throw new Error("Group call disposed");const i=new s.CallFeed({client:this.client,roomId:this.room.roomId,userId:this.client.getUserId(),deviceId:this.client.getDeviceId(),stream:e,purpose:d.SDPStreamMetadataPurpose.Usermedia,audioMuted:this.initWithAudioMuted||0===e.getAudioTracks().length||this.isPtt,videoMuted:this.initWithVideoMuted||0===e.getVideoTracks().length});return(0,a.setTracksEnabled)(e.getAudioTracks(),!i.isAudioMuted()),(0,a.setTracksEnabled)(e.getVideoTracks(),!i.isVideoMuted()),this.localCallFeed=i,this.addUserMediaFeed(i),this.state=_.LocalCallFeedInitialized,i}async updateLocalUsermediaStream(e){if(this.localCallFeed){const t=this.localCallFeed.stream;this.localCallFeed.setNewStream(e);const n=this.localCallFeed.isAudioMuted(),i=this.localCallFeed.isVideoMuted();l.logger.log(`groupCall ${this.groupCallId} updateLocalUsermediaStream oldStream ${t.id} newStream ${e.id} micShouldBeMuted ${n} vidShouldBeMuted ${i}`),(0,a.setTracksEnabled)(e.getAudioTracks(),!n),(0,a.setTracksEnabled)(e.getVideoTracks(),!i),this.client.getMediaHandler().stopUserMediaStream(t)}}async enter(){if(this.state===_.LocalCallFeedUninitialized)await this.initLocalCallFeed();else if(this.state!==_.LocalCallFeedInitialized)throw new Error(`Cannot enter call in the "${this.state}" state`);l.logger.log(`Entered group call ${this.groupCallId}`),this.state=_.Entered,this.client.on(p.CallEventHandlerEvent.Incoming,this.onIncomingCall);for(const e of this.client.callEventHandler.calls.values())this.onIncomingCall(e);this.retryCallLoopInterval=setInterval(this.onRetryCallLoop,this.retryCallInterval),this.activeSpeaker=void 0,this.onActiveSpeakerLoop(),this.activeSpeakerLoopInterval=setInterval(this.onActiveSpeakerLoop,this.activeSpeakerInterval)}dispose(){this.localCallFeed&&(this.removeUserMediaFeed(this.localCallFeed),this.localCallFeed=void 0),this.localScreenshareFeed&&(this.client.getMediaHandler().stopScreensharingStream(this.localScreenshareFeed.stream),this.removeScreenshareFeed(this.localScreenshareFeed),this.localScreenshareFeed=void 0,this.localDesktopCapturerSourceId=void 0),this.client.getMediaHandler().stopAllStreams(),null!==this.transmitTimer&&(clearTimeout(this.transmitTimer),this.transmitTimer=null),void 0!==this.retryCallLoopInterval&&(clearInterval(this.retryCallLoopInterval),this.retryCallLoopInterval=void 0),this.state===_.Entered&&(this.forEachCall((e=>this.disposeCall(e,a.CallErrorCode.UserHangup))),this.calls.clear(),this.activeSpeaker=void 0,clearInterval(this.activeSpeakerLoopInterval),this.retryCallCounts.clear(),clearInterval(this.retryCallLoopInterval),this.client.removeListener(p.CallEventHandlerEvent.Incoming,this.onIncomingCall))}leave(){this.dispose(),this.state=_.LocalCallFeedUninitialized}async terminate(e=!0){if(this.dispose(),this.room.off(c.RoomStateEvent.Update,this.onRoomState),this.client.groupCallEventHandler.groupCalls.delete(this.room.roomId),this.client.emit(f.GroupCallEventHandlerEvent.Ended,this),this.state=_.Ended,e){const e=this.room.currentState.getStateEvents(h.EventType.GroupCallPrefix,this.groupCallId);await this.client.sendStateEvent(this.room.roomId,h.EventType.GroupCallPrefix,v(v({},e.getContent()),{},{"m.terminated":E.CallEnded}),this.groupCallId)}}isLocalVideoMuted(){return!this.localCallFeed||this.localCallFeed.isVideoMuted()}isMicrophoneMuted(){return!this.localCallFeed||this.localCallFeed.isAudioMuted()}async setMicrophoneMuted(e){if(!e&&!await this.client.getMediaHandler().hasAudioDevice())return!1;const t=!e&&this.isPtt;this.isPtt&&(!e&&this.isMicrophoneMuted()?this.transmitTimer=setTimeout((()=>{this.setMicrophoneMuted(!0)}),this.pttMaxTransmitTime):e&&!this.isMicrophoneMuted()&&(null!==this.transmitTimer&&clearTimeout(this.transmitTimer),this.transmitTimer=null)),this.forEachCall((t=>{var n;return null===(n=t.localUsermediaFeed)||void 0===n?void 0:n.setAudioVideoMuted(e,null)}));const n=async()=>{const e=[];this.forEachCall((t=>e.push(t.sendMetadataUpdate()))),await Promise.all(e).catch((e=>l.logger.info("Failed to send some metadata updates",e)))};return t&&await n(),this.localCallFeed?(l.logger.log(`groupCall ${this.groupCallId} setMicrophoneMuted stream ${this.localCallFeed.stream.id} muted ${e}`),this.localCallFeed.setAudioVideoMuted(e,null),(0,a.setTracksEnabled)(this.localCallFeed.stream.getAudioTracks(),!e)):(l.logger.log(`groupCall ${this.groupCallId} setMicrophoneMuted no stream muted ${e}`),this.initWithAudioMuted=e),this.forEachCall((t=>(0,a.setTracksEnabled)(t.localUsermediaFeed.stream.getAudioTracks(),!e))),this.emit(S.LocalMuteStateChanged,e,this.isLocalVideoMuted()),t||await n(),!0}async setLocalVideoMuted(e){if(!e&&!await this.client.getMediaHandler().hasVideoDevice())return!1;this.localCallFeed?(l.logger.log(`groupCall ${this.groupCallId} setLocalVideoMuted stream ${this.localCallFeed.stream.id} muted ${e}`),this.localCallFeed.setAudioVideoMuted(null,e),(0,a.setTracksEnabled)(this.localCallFeed.stream.getVideoTracks(),!e)):(l.logger.log(`groupCall ${this.groupCallId} setLocalVideoMuted no stream muted ${e}`),this.initWithVideoMuted=e);const t=[];return this.forEachCall((n=>t.push(n.setLocalVideoMuted(e)))),await Promise.all(t),this.emit(S.LocalMuteStateChanged,this.isMicrophoneMuted(),e),!0}async setScreensharingEnabled(e,t={}){if(e===this.isScreensharing())return e;if(!e)return this.forEachCall((e=>{e.localScreensharingFeed&&e.removeLocalFeed(e.localScreensharingFeed)})),this.client.getMediaHandler().stopScreensharingStream(this.localScreenshareFeed.stream),this.removeScreenshareFeed(this.localScreenshareFeed),this.localScreenshareFeed=void 0,this.localDesktopCapturerSourceId=void 0,this.emit(S.LocalScreenshareStateChanged,!1,void 0,void 0),!1;try{l.logger.log("Asking for screensharing permissions...");const e=await this.client.getMediaHandler().getScreensharingStream(t);for(const t of e.getTracks()){const e=()=>{this.setScreensharingEnabled(!1),t.removeEventListener("ended",e)};t.addEventListener("ended",e)}return l.logger.log("Screensharing permissions granted. Setting screensharing enabled on all calls"),this.localDesktopCapturerSourceId=t.desktopCapturerSourceId,this.localScreenshareFeed=new s.CallFeed({client:this.client,roomId:this.room.roomId,userId:this.client.getUserId(),deviceId:this.client.getDeviceId(),stream:e,purpose:d.SDPStreamMetadataPurpose.Screenshare,audioMuted:!1,videoMuted:!1}),this.addScreenshareFeed(this.localScreenshareFeed),this.emit(S.LocalScreenshareStateChanged,!0,this.localScreenshareFeed,this.localDesktopCapturerSourceId),this.forEachCall((e=>e.pushLocalFeed(this.localScreenshareFeed.clone()))),!0}catch(e){if(t.throwOnFail)throw e;return l.logger.error("Enabling screensharing error",e),this.emit(S.Error,new T(w.NoUserMedia,"Failed to get screen-sharing stream: ",e)),!1}}isScreensharing(){return!!this.localScreenshareFeed}wantsOutgoingCall(e,t){const n=this.client.getUserId(),i=this.client.getDeviceId();return e>=n&&(e!==n||t>i)}placeOutgoingCalls(){let e=!1;for(const[n,i]of this.participants){var t;const r=null!==(t=this.calls.get(n))&&void 0!==t?t:new Map;for(const[t,o]of i){const i=r.get(t);if((null==i?void 0:i.getOpponentSessionId())!==o.sessionId&&this.wantsOutgoingCall(n.userId,t)){e=!0,void 0!==i&&(l.logger.debug(`Replacing call ${i.callId} to ${n.userId} ${t}`),this.disposeCall(i,a.CallErrorCode.NewSession));const s=(0,a.createNewMatrixCall)(this.client,this.room.roomId,{invitee:n.userId,opponentDeviceId:t,opponentSessionId:o.sessionId,groupCallId:this.groupCallId});null===s?(l.logger.error(`Failed to create call with ${n.userId} ${t}`),r.delete(t)):(this.initCall(s),r.set(t,s),l.logger.debug(`Placing call to ${n.userId} ${t} (session ${o.sessionId})`),s.placeCallWithCallFeeds(this.getLocalFeeds().map((e=>e.clone())),o.screensharing).then((()=>{this.dataChannelsEnabled&&s.createDataChannel("datachannel",this.dataChannelOptions)})).catch((e=>{l.logger.warn(`Failed to place call to ${n.userId}`,e),e instanceof a.CallError&&e.code===w.UnknownDevice?this.emit(S.Error,e):this.emit(S.Error,new T(w.PlaceCallFailed,`Failed to place call to ${n.userId}`)),this.disposeCall(s,a.CallErrorCode.SignallingFailed),r.get(t)===s&&r.delete(t)})))}}r.size>0?this.calls.set(n,r):this.calls.delete(n)}e&&this.emit(S.CallsChanged,this.calls)}getMemberStateEvents(e){return void 0===e?this.room.currentState.getStateEvents(h.EventType.GroupCallMemberPrefix):this.room.currentState.getStateEvents(h.EventType.GroupCallMemberPrefix,e)}initCall(e){const t=C(e);if(!t)throw new Error("Cannot init call without user id");const n=()=>this.onCallFeedsChanged(e),i=(t,n)=>this.onCallStateChanged(e,t,n),r=this.onCallHangup,o=t=>this.onCallReplaced(e,t);let s=this.callHandlers.get(t);void 0===s&&(s=new Map,this.callHandlers.set(t,s)),s.set(e.getOpponentDeviceId(),{onCallFeedsChanged:n,onCallStateChanged:i,onCallHangup:r,onCallReplaced:o}),e.on(a.CallEvent.FeedsChanged,n),e.on(a.CallEvent.State,i),e.on(a.CallEvent.Hangup,r),e.on(a.CallEvent.Replaced,o),e.isPtt=this.isPtt,this.reEmitter.reEmit(e,Object.values(a.CallEvent)),n()}disposeCall(e,t){const n=C(e),i=e.getOpponentDeviceId();if(!n)throw new Error("Cannot dispose call without user id");const r=this.callHandlers.get(n),{onCallFeedsChanged:o,onCallStateChanged:s,onCallHangup:c,onCallReplaced:l}=r.get(i);if(e.removeListener(a.CallEvent.FeedsChanged,o),e.removeListener(a.CallEvent.State,s),e.removeListener(a.CallEvent.Hangup,c),e.removeListener(a.CallEvent.Replaced,l),r.delete(n),0===r.size&&this.callHandlers.delete(n),e.hangupReason===a.CallErrorCode.Replaced)return;e.state!==a.CallState.Ended&&e.hangup(t,!1);const u=this.getUserMediaFeed(n,i);u&&this.removeUserMediaFeed(u);const d=this.getScreenshareFeed(n,i);d&&this.removeScreenshareFeed(d)}getUserMediaFeed(e,t){return this.userMediaFeeds.find((n=>n.userId===e&&n.deviceId===t))}addUserMediaFeed(e){this.userMediaFeeds.push(e),e.measureVolumeActivity(!0),this.emit(S.UserMediaFeedsChanged,this.userMediaFeeds)}replaceUserMediaFeed(e,t){const n=this.userMediaFeeds.findIndex((t=>t.userId===e.userId&&t.deviceId===e.deviceId));if(-1===n)throw new Error("Couldn't find user media feed to replace");this.userMediaFeeds.splice(n,1,t),e.dispose(),t.measureVolumeActivity(!0),this.emit(S.UserMediaFeedsChanged,this.userMediaFeeds)}removeUserMediaFeed(e){const t=this.userMediaFeeds.findIndex((t=>t.userId===e.userId&&t.deviceId===e.deviceId));if(-1===t)throw new Error("Couldn't find user media feed to remove");this.userMediaFeeds.splice(t,1),e.dispose(),this.emit(S.UserMediaFeedsChanged,this.userMediaFeeds),this.activeSpeaker===e&&(this.activeSpeaker=this.userMediaFeeds[0],this.emit(S.ActiveSpeakerChanged,this.activeSpeaker))}getScreenshareFeed(e,t){return this.screenshareFeeds.find((n=>n.userId===e&&n.deviceId===t))}addScreenshareFeed(e){this.screenshareFeeds.push(e),this.emit(S.ScreenshareFeedsChanged,this.screenshareFeeds)}replaceScreenshareFeed(e,t){const n=this.screenshareFeeds.findIndex((t=>t.userId===e.userId&&t.deviceId===e.deviceId));if(-1===n)throw new Error("Couldn't find screenshare feed to replace");this.screenshareFeeds.splice(n,1,t),e.dispose(),this.emit(S.ScreenshareFeedsChanged,this.screenshareFeeds)}removeScreenshareFeed(e){const t=this.screenshareFeeds.findIndex((t=>t.userId===e.userId&&t.deviceId===e.deviceId));if(-1===t)throw new Error("Couldn't find screenshare feed to remove");this.screenshareFeeds.splice(t,1),e.dispose(),this.emit(S.ScreenshareFeedsChanged,this.screenshareFeeds)}updateParticipants(){if(null!==this.participantsExpirationTimer&&(clearTimeout(this.participantsExpirationTimer),this.participantsExpirationTimer=null),this.state===_.Ended)return void(this.participants=new Map);const e=new Map,t=Date.now(),n=this.state===_.Entered||this.enteredViaAnotherSession;let i=1/0;for(const r of this.getMemberStateEvents()){const o=this.room.getMember(r.getStateKey()),s=r.getContent(),a=(Array.isArray(s["m.calls"])?s["m.calls"]:[]).find((e=>e["m.call_id"]===this.groupCallId));let c=(Array.isArray(null==a?void 0:a["m.devices"])?a["m.devices"]:[]).filter((e=>"string"==typeof e.device_id&&"string"==typeof e.session_id&&"number"==typeof e.expires_ts&&e.expires_ts>t&&Array.isArray(e.feeds)));if(n||(null==o?void 0:o.userId)!==this.client.getUserId()||(c=c.filter((e=>e.device_id!==this.client.getDeviceId()))),c.length>0&&"join"===(null==o?void 0:o.membership)){const t=new Map;e.set(o,t);for(const e of c)t.set(e.device_id,{sessionId:e.session_id,screensharing:e.feeds.some((e=>e.purpose===d.SDPStreamMetadataPurpose.Screenshare))}),e.expires_ts<i&&(i=e.expires_ts)}}if(n){const t=this.room.getMember(this.client.getUserId());let n=e.get(t);void 0===n&&(n=new Map,e.set(t,n)),n.has(this.client.getDeviceId())||n.set(this.client.getDeviceId(),{sessionId:this.client.getSessionId(),screensharing:this.getLocalFeeds().some((e=>e.purpose===d.SDPStreamMetadataPurpose.Screenshare))})}this.participants=e,i<1/0&&(this.participantsExpirationTimer=setTimeout((()=>this.updateParticipants()),i-t))}async updateDevices(e,t=!1){var n;const i=Date.now(),r=this.client.getUserId(),o=this.getMemberStateEvents(r),s=null!==(n=null==o?void 0:o.getContent())&&void 0!==n?n:{},a=Array.isArray(s["m.calls"])?s["m.calls"]:[];let c=null;const l=[];for(const e of a)e["m.call_id"]===this.groupCallId?c=e:l.push(e);null===c&&(c={});const u=e((Array.isArray(c["m.devices"])?c["m.devices"]:[]).filter((e=>"string"==typeof e.device_id&&"string"==typeof e.session_id&&"number"==typeof e.expires_ts&&e.expires_ts>i&&Array.isArray(e.feeds))));if(null===u)return;const d=[...l];u.length>0&&d.push(v(v({},c),{},{"m.call_id":this.groupCallId,"m.devices":u}));const p={"m.calls":d};await this.client.sendStateEvent(this.room.roomId,h.EventType.GroupCallMemberPrefix,p,r,{keepAlive:t})}async addDeviceToMemberState(){await this.updateDevices((e=>[...e.filter((e=>e.device_id!==this.client.getDeviceId())),{device_id:this.client.getDeviceId(),session_id:this.client.getSessionId(),expires_ts:Date.now()+36e5,feeds:this.getLocalFeeds().map((e=>({purpose:e.purpose})))}]))}async updateMemberState(){null!==this.resendMemberStateTimer&&(clearInterval(this.resendMemberStateTimer),this.resendMemberStateTimer=null),this.state===_.Entered?(await this.addDeviceToMemberState(),this.resendMemberStateTimer=setInterval((async()=>{l.logger.log("Resending call member state");try{await this.addDeviceToMemberState()}catch(e){l.logger.error("Failed to resend call member state",e)}}),27e5)):await this.updateDevices((e=>e.filter((e=>e.device_id!==this.client.getDeviceId()))),!0)}async cleanMemberState(){const{devices:e}=await this.client.getDevices(),t=new Map(e.map((e=>[e.device_id,e])));await this.updateDevices((e=>{const n=e.filter((e=>{const n=t.get(e.device_id);return void 0!==(null==n?void 0:n.last_seen_ts)&&!(e.device_id===this.client.getDeviceId()&&this.state!==_.Entered&&!this.enteredViaAnotherSession)}));return n.length===e.length?null:n}))}}t.GroupCall=I},98738:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupCallEventHandlerEvent=t.GroupCallEventHandler=void 0;var r=i(n(59713)),o=n(62168),s=n(8969),a=n(26860),c=n(7434),l=n(42481),u=n(64551);let d;t.GroupCallEventHandlerEvent=d,function(e){e.Incoming="GroupCall.incoming",e.Outgoing="GroupCall.outgoing",e.Ended="GroupCall.ended",e.Participants="GroupCall.participants"}(d||(t.GroupCallEventHandlerEvent=d={})),t.GroupCallEventHandler=class{constructor(e){this.client=e,(0,r.default)(this,"groupCalls",new Map),(0,r.default)(this,"roomDeferreds",new Map),(0,r.default)(this,"onRoomsChanged",(e=>{this.createGroupCallForRoom(e)})),(0,r.default)(this,"onRoomStateChanged",((e,t)=>{if(e.getType()===l.EventType.GroupCallPrefix){const n=e.getStateKey(),i=e.getContent(),r=this.groupCalls.get(t.roomId);r||i["m.terminated"]?r&&r.groupCallId===n?i["m.terminated"]?r.terminate(!1):i["m.type"]!==r.type&&c.logger.warn(`The group call type changed for room: ${t.roomId}. Changing the group call type is currently unsupported.`):r&&r.groupCallId!==n&&c.logger.warn(`Multiple group calls detected for room: ${t.roomId}. Multiple group calls are currently unsupported.`):this.createGroupCallFromRoomStateEvent(e)}}))}async start(){this.client.getSyncState()!==u.SyncState.Syncing&&(c.logger.debug("Waiting for client to start syncing..."),await new Promise((e=>{const t=()=>{if(this.client.getSyncState()===u.SyncState.Syncing)return this.client.off(o.ClientEvent.Sync,t),e()};this.client.on(o.ClientEvent.Sync,t)})));const e=this.client.getRooms();for(const t of e)this.createGroupCallForRoom(t);this.client.on(o.ClientEvent.Room,this.onRoomsChanged),this.client.on(a.RoomStateEvent.Events,this.onRoomStateChanged)}stop(){this.client.removeListener(a.RoomStateEvent.Events,this.onRoomStateChanged)}getRoomDeferred(e){let t=this.roomDeferreds.get(e);if(void 0===t){let n;t={prom:new Promise((e=>{n=e}))},t.resolve=n,this.roomDeferreds.set(e,t)}return t}waitUntilRoomReadyForGroupCalls(e){return this.getRoomDeferred(e).prom}getGroupCallById(e){return[...this.groupCalls.values()].find((t=>t.groupCallId===e))}createGroupCallForRoom(e){const t=e.currentState.getStateEvents(l.EventType.GroupCallPrefix),n=t.sort(((e,t)=>t.getTs()-e.getTs()));for(const i of n)if(!i.getContent()["m.terminated"]){c.logger.debug(`Choosing group call ${i.getStateKey()} with TS ${i.getTs()} for room ${e.roomId} from ${t.length} possible calls.`),this.createGroupCallFromRoomStateEvent(i);break}c.logger.info("Group call event handler processed room",e.roomId),this.getRoomDeferred(e.roomId).resolve()}createGroupCallFromRoomStateEvent(e){const t=e.getRoomId(),n=e.getContent(),i=this.client.getRoom(t);if(!i)return void c.logger.warn(`Couldn't find room ${t} for GroupCall`);const r=e.getStateKey(),o=n["m.type"];if(!Object.values(s.GroupCallType).includes(o))return void c.logger.warn(`Received invalid group call type ${o} for room ${t}.`);const a=n["m.intent"];if(!Object.values(s.GroupCallIntent).includes(a))return void c.logger.warn(`Received invalid group call intent ${o} for room ${t}.`);const l=Boolean(n["io.element.ptt"]);let u;if(null!=n&&n.dataChannelsEnabled&&null!=n&&n.dataChannelOptions){const{ordered:e,maxPacketLifeTime:t,maxRetransmits:i,protocol:r}=n.dataChannelOptions;u={ordered:e,maxPacketLifeTime:t,maxRetransmits:i,protocol:r}}const h=new s.GroupCall(this.client,i,o,l,a,r,null==n?void 0:n.dataChannelsEnabled,u);return this.groupCalls.set(i.roomId,h),this.client.emit(d.Incoming,h),h}}},7626:(e,t,n)=>{"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.MediaHandlerEvent=t.MediaHandler=void 0;var r=i(n(59713)),o=n(55861),s=n(8969),a=n(7434);let c;t.MediaHandlerEvent=c,function(e){e.LocalStreamsChanged="local_streams_changed"}(c||(t.MediaHandlerEvent=c={}));class l extends o.TypedEventEmitter{constructor(e){super(),this.client=e,(0,r.default)(this,"audioInput",void 0),(0,r.default)(this,"audioSettings",void 0),(0,r.default)(this,"videoInput",void 0),(0,r.default)(this,"localUserMediaStream",void 0),(0,r.default)(this,"userMediaStreams",[]),(0,r.default)(this,"screensharingStreams",[])}restoreMediaSettings(e,t){this.audioInput=e,this.videoInput=t}async setAudioInput(e){a.logger.info("Setting audio input to",e),this.audioInput!==e&&(this.audioInput=e,await this.updateLocalUsermediaStreams())}async setAudioSettings(e){a.logger.info("Setting audio settings to",e),this.audioSettings=Object.assign({},e),await this.updateLocalUsermediaStreams()}async setVideoInput(e){a.logger.info("Setting video input to",e),this.videoInput!==e&&(this.videoInput=e,await this.updateLocalUsermediaStreams())}async setMediaInputs(e,t){a.logger.log(`mediaHandler setMediaInputs audioInput: ${e} videoInput: ${t}`),this.audioInput=e,this.videoInput=t,await this.updateLocalUsermediaStreams()}async updateLocalUsermediaStreams(){if(0===this.userMediaStreams.length)return;const e=new Map;for(const t of this.client.callEventHandler.calls.values())e.set(t.callId,{audio:t.hasLocalUserMediaAudioTrack,video:t.hasLocalUserMediaVideoTrack});for(const e of this.userMediaStreams){a.logger.log(`mediaHandler stopping all tracks for stream ${e.id}`);for(const t of e.getTracks())t.stop()}this.userMediaStreams=[],this.localUserMediaStream=void 0;for(const t of this.client.callEventHandler.calls.values()){if(t.callHasEnded()||!e.has(t.callId))continue;const{audio:n,video:i}=e.get(t.callId);a.logger.log(`mediaHandler updateLocalUsermediaStreams getUserMediaStream call ${t.callId}`);const r=await this.getUserMediaStream(n,i);t.callHasEnded()||await t.updateLocalUsermediaStream(r)}for(const e of this.client.groupCallEventHandler.groupCalls.values()){if(!e.localCallFeed)continue;a.logger.log(`mediaHandler updateLocalUsermediaStreams getUserMediaStream groupCall ${e.groupCallId}`);const t=await this.getUserMediaStream(!0,e.type===s.GroupCallType.Video);e.state!==s.GroupCallState.Ended&&await e.updateLocalUsermediaStream(t)}this.emit(c.LocalStreamsChanged)}async hasAudioDevice(){return(await navigator.mediaDevices.enumerateDevices()).filter((e=>"audioinput"===e.kind)).length>0}async hasVideoDevice(){return(await navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind)).length>0}async getUserMediaStream(e,t,n=!0){const i=e&&await this.hasAudioDevice(),r=t&&await this.hasVideoDevice();let o,s=!0;var l,u,d,h;this.localUserMediaStream?(i&&(0!==this.localUserMediaStream.getAudioTracks().length&&(null===(l=this.localUserMediaStream.getAudioTracks()[0])||void 0===l||null===(u=l.getSettings())||void 0===u?void 0:u.deviceId)===this.audioInput||(s=!1)),r&&(0!==this.localUserMediaStream.getVideoTracks().length&&(null===(d=this.localUserMediaStream.getVideoTracks()[0])||void 0===d||null===(h=d.getSettings())||void 0===h?void 0:h.deviceId)===this.videoInput||(s=!1))):s=!1;if(s){var p;if(o=this.localUserMediaStream.clone(),a.logger.log(`mediaHandler clone userMediaStream ${null===(p=this.localUserMediaStream)||void 0===p?void 0:p.id} new stream ${o.id} shouldRequestAudio ${i} shouldRequestVideo ${r}`),!i)for(const e of o.getAudioTracks())o.removeTrack(e);if(!r)for(const e of o.getVideoTracks())o.removeTrack(e)}else{const e=this.getUserMediaContraints(i,r);o=await navigator.mediaDevices.getUserMedia(e),a.logger.log(`mediaHandler getUserMediaStream streamId ${o.id} shouldRequestAudio ${i} shouldRequestVideo ${r}`,e);for(const e of o.getTracks()){const t=e.getSettings();"audio"===e.kind?this.audioInput=t.deviceId:"video"===e.kind&&(this.videoInput=t.deviceId)}n&&(this.localUserMediaStream=o)}return n&&this.userMediaStreams.push(o),this.emit(c.LocalStreamsChanged),o}stopUserMediaStream(e){a.logger.log(`mediaHandler stopUserMediaStream stopping stream ${e.id}`);for(const t of e.getTracks())t.stop();const t=this.userMediaStreams.indexOf(e);-1!==t&&(a.logger.debug("Splicing usermedia stream out stream array",e.id),this.userMediaStreams.splice(t,1)),this.emit(c.LocalStreamsChanged),this.localUserMediaStream===e&&(this.localUserMediaStream=void 0)}async getScreensharingStream(e={},t=!0){let n;if(0===this.screensharingStreams.length){const t=this.getScreenshareContraints(e);e.desktopCapturerSourceId?(a.logger.debug("Getting screensharing stream using getUserMedia()",e),n=await navigator.mediaDevices.getUserMedia(t)):(a.logger.debug("Getting screensharing stream using getDisplayMedia()",e),n=await navigator.mediaDevices.getDisplayMedia(t))}else{const e=this.screensharingStreams[this.screensharingStreams.length-1];a.logger.log("Cloning screensharing stream",e.id),n=e.clone()}return t&&this.screensharingStreams.push(n),this.emit(c.LocalStreamsChanged),n}stopScreensharingStream(e){a.logger.debug("Stopping screensharing stream",e.id);for(const t of e.getTracks())t.stop();const t=this.screensharingStreams.indexOf(e);-1!==t&&(a.logger.debug("Splicing screensharing stream out stream array",e.id),this.screensharingStreams.splice(t,1)),this.emit(c.LocalStreamsChanged)}stopAllStreams(){for(const e of this.userMediaStreams){a.logger.log(`mediaHandler stopAllStreams stopping stream ${e.id}`);for(const t of e.getTracks())t.stop()}for(const e of this.screensharingStreams)for(const t of e.getTracks())t.stop();this.userMediaStreams=[],this.screensharingStreams=[],this.localUserMediaStream=void 0,this.emit(c.LocalStreamsChanged)}getUserMediaContraints(e,t){const n=!!navigator.webkitGetUserMedia;return{audio:!!e&&{deviceId:this.audioInput?{ideal:this.audioInput}:void 0,autoGainControl:this.audioSettings?{ideal:this.audioSettings.autoGainControl}:void 0,echoCancellation:this.audioSettings?{ideal:this.audioSettings.echoCancellation}:void 0,noiseSuppression:this.audioSettings?{ideal:this.audioSettings.noiseSuppression}:void 0},video:!!t&&{deviceId:this.videoInput?{ideal:this.videoInput}:void 0,width:n?{exact:640}:{ideal:640},height:n?{exact:360}:{ideal:360}}}}getScreenshareContraints(e){const{desktopCapturerSourceId:t,audio:n}=e;return t?(a.logger.debug("Using desktop capturer source",t),{audio:null!=n&&n,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t}}}):(a.logger.debug("Not using desktop capturer source"),{audio:null!=n&&n,video:!0})}}t.MediaHandler=l},97779:(e,t,n)=>{"use strict";var i=n(25108);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ClientWidgetApi=void 0;var o=n(17187),s=n(9843),a=n(75206),c=n(82047),l=n(52646),u=n(66376),d=n(86005),h=n(24693),p=n(78793),f=n(64963);function m(){m=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),s=new x(i||[]);return o._invoke=function(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var a=w(s,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=u(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}(e,n,s),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function h(){}function p(){}function f(){}var g={};c(g,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(C([])));y&&y!==t&&n.call(y,o)&&(g=y);var b=f.prototype=h.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,s,a,c){var l=u(e[o],e,s);if("throw"!==l.type){var d=l.arg,h=d.value;return h&&"object"==r(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,a,c)}),(function(e){i("throw",e,a,c)})):t.resolve(h).then((function(e){d.value=e,a(d)}),(function(e){return i("throw",e,a,c)}))}c(l.arg)}var o;this._invoke=function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=u(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=f,c(b,"constructor",f),c(f,"constructor",p),p.displayName=c(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,a,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},E(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var s=new S(l(t,n,i,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(b),c(b,a,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return s.type="throw",s.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function g(e,t,n,i,r,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(i,r)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function s(e){g(o,i,r,s,a,"next",e)}function a(e){g(o,i,r,s,a,"throw",e)}s(void 0)}))}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function _(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new k(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function k(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return k=function(e){this.s=e,this.n=e.next},k.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new k(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(D,e);var t,n,r,o,g,b,k,M,A,O,R,L=(O=D,R=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(O);if(R){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function D(e,t,n){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,D),(i=L.call(this)).widget=e,i.iframe=t,i.driver=n,C(T(i),"transport",void 0),C(T(i),"contentLoadedActionSent",!1),C(T(i),"allowedCapabilities",new Set),C(T(i),"allowedEvents",[]),C(T(i),"isStopped",!1),C(T(i),"turnServers",null),null==t||!t.contentWindow)throw new Error("No iframe supplied");if(!e)throw new Error("Invalid widget");if(!n)throw new Error("Invalid driver");return i.transport=new s.PostmessageTransport(a.WidgetApiDirection.ToWidget,e.id,t.contentWindow,window),i.transport.targetOrigin=e.origin,i.transport.on("message",i.handleMessage.bind(T(i))),t.addEventListener("load",i.onIframeLoad.bind(T(i))),i.transport.start(),i}return t=D,n=[{key:"hasCapability",value:function(e){return this.allowedCapabilities.has(e)}},{key:"canUseRoomTimeline",value:function(e){return this.hasCapability("org.matrix.msc2762.timeline:".concat(f.Symbols.AnyRoom))||this.hasCapability("org.matrix.msc2762.timeline:".concat(e))}},{key:"canSendRoomEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.allowedEvents.some((function(n){return n.matchesAsRoomEvent(d.EventDirection.Send,e,t)}))}},{key:"canSendStateEvent",value:function(e,t){return this.allowedEvents.some((function(n){return n.matchesAsStateEvent(d.EventDirection.Send,e,t)}))}},{key:"canSendToDeviceEvent",value:function(e){return this.allowedEvents.some((function(t){return t.matchesAsToDeviceEvent(d.EventDirection.Send,e)}))}},{key:"canReceiveRoomEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.allowedEvents.some((function(n){return n.matchesAsRoomEvent(d.EventDirection.Receive,e,t)}))}},{key:"canReceiveStateEvent",value:function(e,t){return this.allowedEvents.some((function(n){return n.matchesAsStateEvent(d.EventDirection.Receive,e,t)}))}},{key:"canReceiveToDeviceEvent",value:function(e){return this.allowedEvents.some((function(t){return t.matchesAsToDeviceEvent(d.EventDirection.Receive,e)}))}},{key:"stop",value:function(){this.isStopped=!0,this.transport.stop()}},{key:"beginCapabilities",value:function(){var e,t=this;this.emit("preparing"),this.transport.send(c.WidgetApiToWidgetAction.Capabilities,{}).then((function(n){return e=n.capabilities,t.driver.validateCapabilities(new Set(n.capabilities))})).then((function(n){i.log("Widget ".concat(t.widget.id," is allowed capabilities:"),Array.from(n)),t.allowedCapabilities=n,t.allowedEvents=d.WidgetEventCapability.findEventCapabilities(n),t.notifyCapabilities(e),t.emit("ready")}))}},{key:"notifyCapabilities",value:function(e){var t=this;this.transport.send(c.WidgetApiToWidgetAction.NotifyCapabilities,{requested:e,approved:Array.from(this.allowedCapabilities)}).catch((function(e){i.warn("non-fatal error notifying widget of approved capabilities:",e)})).then((function(){t.emit("capabilitiesNotified")}))}},{key:"onIframeLoad",value:function(e){this.widget.waitForIframeLoad?this.beginCapabilities():this.contentLoadedActionSent=!1}},{key:"handleContentLoadedAction",value:function(e){if(this.contentLoadedActionSent)throw new Error("Improper sequence: ContentLoaded Action can only be send once after the widget loaded and should only be used if waitForIframeLoad is false (default=true)");this.widget.waitForIframeLoad?this.transport.reply(e,{error:{message:"Improper sequence: not expecting ContentLoaded event if waitForIframLoad is true (default=true)"}}):(this.transport.reply(e,{}),this.beginCapabilities()),this.contentLoadedActionSent=!0}},{key:"replyVersions",value:function(e){this.transport.reply(e,{supported_versions:u.CurrentApiVersions})}},{key:"handleCapabilitiesRenegotiate",value:function(e){var t,n=this;this.transport.reply(e,{});var i=(null===(t=e.data)||void 0===t?void 0:t.capabilities)||[],r=new Set(i.filter((function(e){return!n.hasCapability(e)})));if(0===r.size)return this.notifyCapabilities([]);this.driver.validateCapabilities(r).then((function(e){return e.forEach((function(e){return n.allowedCapabilities.add(e)})),d.WidgetEventCapability.findEventCapabilities(e).forEach((function(e){return n.allowedEvents.push(e)})),n.notifyCapabilities(Array.from(r))}))}},{key:"handleNavigate",value:function(e){var t,n,r=this;if(!this.hasCapability(l.MatrixCapabilities.MSC2931Navigate))return this.transport.reply(e,{error:{message:"Missing capability"}});if(null===(t=e.data)||void 0===t||!t.uri||null===(n=e.data)||void 0===n||!n.uri.toString().startsWith("https://matrix.to/#"))return this.transport.reply(e,{error:{message:"Invalid matrix.to URI"}});var o=function(t){return i.error("[ClientWidgetApi] Failed to handle navigation: ",t),r.transport.reply(e,{error:{message:"Error handling navigation"}})};try{this.driver.navigate(e.data.uri.toString()).catch((function(e){return o(e)})).then((function(){return r.transport.reply(e,{})}))}catch(e){return o(e)}}},{key:"handleOIDC",value:function(e){var t=this,n=1,r=function(i,r){return r=r||{},n>1?t.transport.send(c.WidgetApiToWidgetAction.OpenIDCredentials,E({state:i,original_request_id:e.requestId},r)):t.transport.reply(e,E({state:i},r))},o=function(o){return i.error("[ClientWidgetApi] Failed to handle OIDC: ",o),n>1?r(h.OpenIDRequestState.Blocked):t.transport.reply(e,{error:{message:o}})},s=new p.SimpleObservable((function(e){return e.state===h.OpenIDRequestState.PendingUserConfirmation&&n>1?(s.close(),o("client provided out-of-phase response to OIDC flow")):e.state===h.OpenIDRequestState.PendingUserConfirmation?(r(e.state),void n++):e.state!==h.OpenIDRequestState.Allowed||e.token?(e.state===h.OpenIDRequestState.Blocked&&(e.token=null),s.close(),r(e.state,e.token)):o("client provided invalid OIDC token for an allowed request")}));this.driver.askOpenID(s)}},{key:"handleReadEvents",value:function(e){var t=this;if(!e.data.type)return this.transport.reply(e,{error:{message:"Invalid request - missing event type"}});if(void 0!==e.data.limit&&(!e.data.limit||e.data.limit<0))return this.transport.reply(e,{error:{message:"Invalid request - limit out of range"}});var n=null;if(e.data.room_ids){n=e.data.room_ids,Array.isArray(n)||(n=[n]);var i,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(n);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(!this.canUseRoomTimeline(o))return this.transport.reply(e,{error:{message:"Unable to access room timeline: ".concat(o)}})}}catch(e){r.e(e)}finally{r.f()}}var s=e.data.limit||0,a=Promise.resolve([]);if(void 0!==e.data.state_key){var c=!0===e.data.state_key?void 0:e.data.state_key.toString();if(!this.canReceiveStateEvent(e.data.type,c))return this.transport.reply(e,{error:{message:"Cannot read state events of this type"}});a=this.driver.readStateEvents(e.data.type,c,s,n)}else{if(!this.canReceiveRoomEvent(e.data.type,e.data.msgtype))return this.transport.reply(e,{error:{message:"Cannot read room events of this type"}});a=this.driver.readRoomEvents(e.data.type,e.data.msgtype,s,n)}return a.then((function(n){return t.transport.reply(e,{events:n})}))}},{key:"handleSendEvent",value:function(e){var t,n=this;if(!e.data.type)return this.transport.reply(e,{error:{message:"Invalid request - missing event type"}});if(e.data.room_id&&!this.canUseRoomTimeline(e.data.room_id))return this.transport.reply(e,{error:{message:"Unable to access room timeline: ".concat(e.data.room_id)}});if(null!==e.data.state_key&&void 0!==e.data.state_key){if(!this.canSendStateEvent(e.data.type,e.data.state_key))return this.transport.reply(e,{error:{message:"Cannot send state events of this type"}});t=this.driver.sendEvent(e.data.type,e.data.content||{},e.data.state_key,e.data.room_id)}else{var r=e.data.content||{},o=r.msgtype;if(!this.canSendRoomEvent(e.data.type,o))return this.transport.reply(e,{error:{message:"Cannot send room events of this type"}});t=this.driver.sendEvent(e.data.type,r,null,e.data.room_id)}t.then((function(t){return n.transport.reply(e,{room_id:t.roomId,event_id:t.eventId})})).catch((function(t){return i.error("error sending event: ",t),n.transport.reply(e,{error:{message:"Error sending event"}})}))}},{key:"handleSendToDevice",value:(A=v(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data.type){e.next=5;break}return e.next=3,this.transport.reply(t,{error:{message:"Invalid request - missing event type"}});case 3:case 8:case 13:case 18:case 25:e.next=32;break;case 5:if(t.data.messages){e.next=10;break}return e.next=8,this.transport.reply(t,{error:{message:"Invalid request - missing event contents"}});case 10:if("boolean"==typeof t.data.encrypted){e.next=15;break}return e.next=13,this.transport.reply(t,{error:{message:"Invalid request - missing encryption flag"}});case 15:if(this.canSendToDeviceEvent(t.data.type)){e.next=20;break}return e.next=18,this.transport.reply(t,{error:{message:"Cannot send to-device events of this type"}});case 20:return e.prev=20,e.next=23,this.driver.sendToDevice(t.data.type,t.data.encrypted,t.data.messages);case 23:return e.next=25,this.transport.reply(t,{});case 27:return e.prev=27,e.t0=e.catch(20),i.error("error sending to-device event",e.t0),e.next=32,this.transport.reply(t,{error:{message:"Error sending event"}});case 32:case"end":return e.stop()}}),e,this,[[20,27]])}))),function(e){return A.apply(this,arguments)})},{key:"pollTurnServers",value:(M=v(m().mark((function e(t,n){var r,o,s,a,l,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.transport.send(c.WidgetApiToWidgetAction.UpdateTurnServers,n);case 3:r=!1,o=!1,e.prev=5,a=I(t);case 7:return e.next=9,a.next();case 9:if(!(r=!(l=e.sent).done)){e.next=16;break}return u=l.value,e.next=13,this.transport.send(c.WidgetApiToWidgetAction.UpdateTurnServers,u);case 13:r=!1,e.next=7;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),o=!0,s=e.t0;case 22:if(e.prev=22,e.prev=23,!r||null==a.return){e.next=27;break}return e.next=27,a.return();case 27:if(e.prev=27,!o){e.next=30;break}throw s;case 30:return e.finish(27);case 31:return e.finish(22);case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(0),i.error("error polling for TURN servers",e.t1);case 37:case"end":return e.stop()}}),e,this,[[0,34],[5,18,22,32],[23,,27,31]])}))),function(e,t){return M.apply(this,arguments)})},{key:"handleWatchTurnServers",value:(k=v(m().mark((function e(t){var n,r,o,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasCapability(l.MatrixCapabilities.MSC3846TurnServers)){e.next=5;break}return e.next=3,this.transport.reply(t,{error:{message:"Missing capability"}});case 3:case 8:e.next=30;break;case 5:if(!this.turnServers){e.next=10;break}return e.next=8,this.transport.reply(t,{});case 10:return e.prev=10,n=this.driver.getTurnServers(),e.next=14,n.next();case 14:if(r=e.sent,o=r.done,s=r.value,!o){e.next=19;break}throw new Error("Client refuses to provide any TURN servers");case 19:return e.next=21,this.transport.reply(t,{});case 21:this.pollTurnServers(n,s),this.turnServers=n,e.next=30;break;case 25:return e.prev=25,e.t0=e.catch(10),i.error("error getting first TURN server results",e.t0),e.next=30,this.transport.reply(t,{error:{message:"TURN servers not available"}});case 30:case"end":return e.stop()}}),e,this,[[10,25]])}))),function(e){return k.apply(this,arguments)})},{key:"handleUnwatchTurnServers",value:(b=v(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasCapability(l.MatrixCapabilities.MSC3846TurnServers)){e.next=5;break}return e.next=3,this.transport.reply(t,{error:{message:"Missing capability"}});case 3:case 8:e.next=15;break;case 5:if(this.turnServers){e.next=10;break}return e.next=8,this.transport.reply(t,{});case 10:return e.next=12,this.turnServers.return(void 0);case 12:return this.turnServers=null,e.next=15,this.transport.reply(t,{});case 15:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"handleReadRelations",value:(g=v(m().mark((function e(t){var n,r,o=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.data.event_id){e.next=2;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Invalid request - missing event ID"}}));case 2:if(!(void 0!==t.data.limit&&t.data.limit<0)){e.next=4;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Invalid request - limit out of range"}}));case 4:if(void 0===t.data.room_id||this.canUseRoomTimeline(t.data.room_id)){e.next=6;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Unable to access room timeline: ".concat(t.data.room_id)}}));case 6:return e.prev=6,e.next=9,this.driver.readEventRelations(t.data.event_id,t.data.room_id,t.data.rel_type,t.data.event_type,t.data.from,t.data.to,t.data.limit,t.data.direction);case 9:if(!(n=e.sent).originalEvent){e.next=18;break}if(void 0===n.originalEvent.state_key){e.next=16;break}if(this.canReceiveStateEvent(n.originalEvent.type,n.originalEvent.state_key)){e.next=14;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Cannot read state events of this type"}}));case 14:e.next=18;break;case 16:if(this.canReceiveRoomEvent(n.originalEvent.type,n.originalEvent.content.msgtype)){e.next=18;break}return e.abrupt("return",this.transport.reply(t,{error:{message:"Cannot read room events of this type"}}));case 18:return r=n.chunk.filter((function(e){return void 0!==e.state_key?o.canReceiveStateEvent(e.type,e.state_key):o.canReceiveRoomEvent(e.type,e.content.msgtype)})),e.abrupt("return",this.transport.reply(t,{original_event:n.originalEvent,chunk:r,prev_batch:n.prevBatch,next_batch:n.nextBatch}));case 22:return e.prev=22,e.t0=e.catch(6),i.error("error getting the relations",e.t0),e.next=27,this.transport.reply(t,{error:{message:"Unexpected error while reading relations"}});case 27:case"end":return e.stop()}}),e,this,[[6,22]])}))),function(e){return g.apply(this,arguments)})},{key:"handleMessage",value:function(e){if(!this.isStopped){var t=new CustomEvent("action:".concat(e.detail.action),{detail:e.detail,cancelable:!0});if(this.emit("action:".concat(e.detail.action),t),!t.defaultPrevented)switch(e.detail.action){case c.WidgetApiFromWidgetAction.ContentLoaded:return this.handleContentLoadedAction(e.detail);case c.WidgetApiFromWidgetAction.SupportedApiVersions:return this.replyVersions(e.detail);case c.WidgetApiFromWidgetAction.SendEvent:return this.handleSendEvent(e.detail);case c.WidgetApiFromWidgetAction.SendToDevice:return this.handleSendToDevice(e.detail);case c.WidgetApiFromWidgetAction.GetOpenIDCredentials:return this.handleOIDC(e.detail);case c.WidgetApiFromWidgetAction.MSC2931Navigate:return this.handleNavigate(e.detail);case c.WidgetApiFromWidgetAction.MSC2974RenegotiateCapabilities:return this.handleCapabilitiesRenegotiate(e.detail);case c.WidgetApiFromWidgetAction.MSC2876ReadEvents:return this.handleReadEvents(e.detail);case c.WidgetApiFromWidgetAction.WatchTurnServers:return this.handleWatchTurnServers(e.detail);case c.WidgetApiFromWidgetAction.UnwatchTurnServers:return this.handleUnwatchTurnServers(e.detail);case c.WidgetApiFromWidgetAction.MSC3869ReadRelations:return this.handleReadRelations(e.detail);default:return this.transport.reply(e.detail,{error:{message:"Unknown or unsupported action: "+e.detail.action}})}}}},{key:"takeScreenshot",value:function(){return this.transport.send(c.WidgetApiToWidgetAction.TakeScreenshot,{})}},{key:"updateVisibility",value:function(e){return this.transport.send(c.WidgetApiToWidgetAction.UpdateVisibility,{visible:e})}},{key:"sendWidgetConfig",value:function(e){return this.transport.send(c.WidgetApiToWidgetAction.WidgetConfig,e).then()}},{key:"notifyModalWidgetButtonClicked",value:function(e){return this.transport.send(c.WidgetApiToWidgetAction.ButtonClicked,{id:e}).then()}},{key:"notifyModalWidgetClose",value:function(e){return this.transport.send(c.WidgetApiToWidgetAction.CloseModalWidget,e).then()}},{key:"feedEvent",value:(o=v(m().mark((function e(t,n){var i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.room_id===n||this.canUseRoomTimeline(t.room_id)){e.next=2;break}return e.abrupt("return");case 2:if(void 0===t.state_key||null===t.state_key){e.next=7;break}if(this.canReceiveStateEvent(t.type,t.state_key)){e.next=5;break}return e.abrupt("return");case 5:e.next=9;break;case 7:if(this.canReceiveRoomEvent(t.type,null===(i=t.content)||void 0===i?void 0:i.msgtype)){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.transport.send(c.WidgetApiToWidgetAction.SendEvent,t);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"feedToDevice",value:(r=v(m().mark((function e(t,n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.canReceiveToDeviceEvent(t.type)){e.next=3;break}return e.next=3,this.transport.send(c.WidgetApiToWidgetAction.SendToDevice,E(E({},t),{},{encrypted:n}));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}],n&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),D}(o.EventEmitter);t.ClientWidgetApi=M},64963:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Symbols=void 0,t.Symbols=n,function(e){e.AnyRoom="*"}(n||(t.Symbols=n={}))},34692:(e,t,n)=>{"use strict";var i=n(25108);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetApi=void 0;var o=n(17187),s=n(75206),a=n(66376),c=n(9843),l=n(82047),u=n(24693),d=n(49094),h=n(42793),p=n(86005),f=n(64963);function m(){m=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var r=t&&t.prototype instanceof h?t:h,o=Object.create(r.prototype),s=new x(i||[]);return o._invoke=function(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var a=w(s,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=u(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}(e,n,s),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function h(){}function p(){}function f(){}var g={};c(g,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(C([])));y&&y!==t&&n.call(y,o)&&(g=y);var b=f.prototype=h.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function i(o,s,a,c){var l=u(e[o],e,s);if("throw"!==l.type){var d=l.arg,h=d.value;return h&&"object"==r(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,a,c)}),(function(e){i("throw",e,a,c)})):t.resolve(h).then((function(e){d.value=e,a(d)}),(function(e){return i("throw",e,a,c)}))}c(l.arg)}var o;this._invoke=function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=u(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=f,c(b,"constructor",f),c(f,"constructor",p),p.displayName=c(f,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,a,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},E(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var s=new S(l(t,n,i,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(b),c(b,a,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return s.type="throw",s.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function g(e,t,n,i,r,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(i,r)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function s(e){g(o,i,r,s,a,"next",e)}function a(e){g(o,i,r,s,a,"throw",e)}s(void 0)}))}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function S(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return new I(e)}function C(e){var t,n;function i(t,n){try{var o=e[t](n),s=o.value,a=s instanceof I;Promise.resolve(a?s.wrapped:s).then((function(e){a?i("return"===t?"return":"next",e):r(o.done?"return":"normal",e)}),(function(e){i("throw",e)}))}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise((function(o,s){var a={key:e,arg:r,resolve:o,reject:s,next:null};n?n=n.next=a:(t=n=a,i(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}function I(e){this.wrapped=e}C.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},C.prototype.next=function(e){return this._invoke("next",e)},C.prototype.throw=function(e){return this._invoke("throw",e)},C.prototype.return=function(e){return this._invoke("return",e)};var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(k,e);var t,n,r,o,g,I=(o=k,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(o);if(g){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function k(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(y(this,k),(e=I.call(this)).clientOrigin=n,T(w(e),"transport",void 0),T(w(e),"capabilitiesFinished",!1),T(w(e),"supportsMSC2974Renegotiate",!1),T(w(e),"requestedCapabilities",[]),T(w(e),"approvedCapabilities",void 0),T(w(e),"cachedClientVersions",void 0),T(w(e),"turnServerWatchers",0),!window.parent)throw new Error("No parent window. This widget doesn't appear to be embedded properly.");return e.transport=new c.PostmessageTransport(s.WidgetApiDirection.FromWidget,t,window.parent,window),e.transport.targetOrigin=n,e.transport.on("message",e.handleMessage.bind(w(e))),e}return t=k,n=[{key:"hasCapability",value:function(e){return Array.isArray(this.approvedCapabilities)?this.approvedCapabilities.includes(e):this.requestedCapabilities.includes(e)}},{key:"requestCapability",value:function(e){if(this.capabilitiesFinished&&!this.supportsMSC2974Renegotiate)throw new Error("Capabilities have already been negotiated");this.requestedCapabilities.push(e)}},{key:"requestCapabilities",value:function(e){var t=this;e.forEach((function(e){return t.requestCapability(e)}))}},{key:"requestCapabilityForRoomTimeline",value:function(e){this.requestCapability("org.matrix.msc2762.timeline:".concat(e))}},{key:"requestCapabilityToSendState",value:function(e,t){this.requestCapability(p.WidgetEventCapability.forStateEvent(p.EventDirection.Send,e,t).raw)}},{key:"requestCapabilityToReceiveState",value:function(e,t){this.requestCapability(p.WidgetEventCapability.forStateEvent(p.EventDirection.Receive,e,t).raw)}},{key:"requestCapabilityToSendToDevice",value:function(e){this.requestCapability(p.WidgetEventCapability.forToDeviceEvent(p.EventDirection.Send,e).raw)}},{key:"requestCapabilityToReceiveToDevice",value:function(e){this.requestCapability(p.WidgetEventCapability.forToDeviceEvent(p.EventDirection.Receive,e).raw)}},{key:"requestCapabilityToSendEvent",value:function(e){this.requestCapability(p.WidgetEventCapability.forRoomEvent(p.EventDirection.Send,e).raw)}},{key:"requestCapabilityToReceiveEvent",value:function(e){this.requestCapability(p.WidgetEventCapability.forRoomEvent(p.EventDirection.Receive,e).raw)}},{key:"requestCapabilityToSendMessage",value:function(e){this.requestCapability(p.WidgetEventCapability.forRoomMessageEvent(p.EventDirection.Send,e).raw)}},{key:"requestCapabilityToReceiveMessage",value:function(e){this.requestCapability(p.WidgetEventCapability.forRoomMessageEvent(p.EventDirection.Receive,e).raw)}},{key:"requestOpenIDConnectToken",value:function(){var e=this;return new Promise((function(t,n){e.transport.sendComplete(l.WidgetApiFromWidgetAction.GetOpenIDCredentials,{}).then((function(i){var r=i.response;r.state===u.OpenIDRequestState.Allowed?t(r):r.state===u.OpenIDRequestState.Blocked?n(new Error("User declined to verify their identity")):r.state===u.OpenIDRequestState.PendingUserConfirmation?e.on("action:".concat(l.WidgetApiToWidgetAction.OpenIDCredentials),(function o(s){s.preventDefault();var a=s.detail;a.data.original_request_id===i.requestId&&(a.data.state===u.OpenIDRequestState.Allowed?(t(a.data),e.transport.reply(a,{})):a.data.state===u.OpenIDRequestState.Blocked?(n(new Error("User declined to verify their identity")),e.transport.reply(a,{})):(n(new Error("Invalid state on reply: "+r.state)),e.transport.reply(a,{error:{message:"Invalid state"}})),e.off("action:".concat(l.WidgetApiToWidgetAction.OpenIDCredentials),o))})):n(new Error("Invalid state: "+r.state))})).catch(n)}))}},{key:"updateRequestedCapabilities",value:function(){return this.transport.send(l.WidgetApiFromWidgetAction.MSC2974RenegotiateCapabilities,{capabilities:this.requestedCapabilities}).then()}},{key:"sendContentLoaded",value:function(){return this.transport.send(l.WidgetApiFromWidgetAction.ContentLoaded,{}).then()}},{key:"sendSticker",value:function(e){return this.transport.send(l.WidgetApiFromWidgetAction.SendSticker,e).then()}},{key:"setAlwaysOnScreen",value:function(e){return this.transport.send(l.WidgetApiFromWidgetAction.UpdateAlwaysOnScreen,{value:e}).then((function(e){return e.success}))}},{key:"openModalWidget",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d.MatrixWidgetType.Custom;return this.transport.send(l.WidgetApiFromWidgetAction.OpenModalWidget,{type:r,url:e,name:t,buttons:n,data:i}).then()}},{key:"closeModalWidget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.transport.send(l.WidgetApiFromWidgetAction.CloseModalWidget,e).then()}},{key:"sendRoomEvent",value:function(e,t,n){return this.transport.send(l.WidgetApiFromWidgetAction.SendEvent,{type:e,content:t,room_id:n})}},{key:"sendStateEvent",value:function(e,t,n,i){return this.transport.send(l.WidgetApiFromWidgetAction.SendEvent,{type:e,content:n,state_key:t,room_id:i})}},{key:"sendToDevice",value:function(e,t,n){return this.transport.send(l.WidgetApiFromWidgetAction.SendToDevice,{type:e,encrypted:t,messages:n})}},{key:"readRoomEvents",value:function(e,t,n,i){var r={type:e,msgtype:n};return void 0!==t&&(r.limit=t),i&&(i.includes(f.Symbols.AnyRoom)?r.room_ids=f.Symbols.AnyRoom:r.room_ids=i),this.transport.send(l.WidgetApiFromWidgetAction.MSC2876ReadEvents,r).then((function(e){return e.events}))}},{key:"readEventRelations",value:(r=v(m().mark((function e(t,n,i,r,o,s,c,u){var d;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getClientVersions();case 2:if(e.sent.includes(a.UnstableApiVersion.MSC3869)){e.next=5;break}throw new Error("The read_relations action is not supported by the client.");case 5:return d={event_id:t,rel_type:i,event_type:r,room_id:n,to:c,from:s,limit:o,direction:u},e.abrupt("return",this.transport.send(l.WidgetApiFromWidgetAction.MSC3869ReadRelations,d));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i,o,s,a,c){return r.apply(this,arguments)})},{key:"readStateEvents",value:function(e,t,n,i){var r={type:e,state_key:void 0===n||n};return void 0!==t&&(r.limit=t),i&&(i.includes(f.Symbols.AnyRoom)?r.room_ids=f.Symbols.AnyRoom:r.room_ids=i),this.transport.send(l.WidgetApiFromWidgetAction.MSC2876ReadEvents,r).then((function(e){return e.events}))}},{key:"setModalButtonEnabled",value:function(e,t){if(e===h.BuiltInModalButtonID.Close)throw new Error("The close button cannot be disabled");return this.transport.send(l.WidgetApiFromWidgetAction.SetModalButtonEnabled,{button:e,enabled:t}).then()}},{key:"navigateTo",value:function(e){if(!e||!e.startsWith("https://matrix.to/#"))throw new Error("Invalid matrix.to URI");return this.transport.send(l.WidgetApiFromWidgetAction.MSC2931Navigate,{uri:e}).then()}},{key:"getTurnServers",value:function(){var e,t=this;return(e=m().mark((function e(){var n,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=function(){var e=v(m().mark((function e(i){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.preventDefault(),n(i.detail.data),e.next=4,t.transport.reply(i.detail,{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.on("action:".concat(l.WidgetApiToWidgetAction.UpdateTurnServers),i),0!==t.turnServerWatchers){e.next=12;break}return e.prev=3,e.next=6,x(t.transport.send(l.WidgetApiFromWidgetAction.WatchTurnServers,{}));case 6:e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(3),t.off("action:".concat(l.WidgetApiToWidgetAction.UpdateTurnServers),i),e.t0;case 12:t.turnServerWatchers++,e.prev=13;case 14:return e.next=17,x(new Promise((function(e){return n=e})));case 17:return e.next=19,e.sent;case 19:e.next=14;break;case 21:if(e.prev=21,t.off("action:".concat(l.WidgetApiToWidgetAction.UpdateTurnServers),i),t.turnServerWatchers--,0!==t.turnServerWatchers){e.next=27;break}return e.next=27,x(t.transport.send(l.WidgetApiFromWidgetAction.UnwatchTurnServers,{}));case 27:return e.finish(21);case 28:case"end":return e.stop()}}),e,null,[[3,8],[13,,21,28]])})),function(){return new C(e.apply(this,arguments))})()}},{key:"start",value:function(){var e=this;this.transport.start(),this.getClientVersions().then((function(t){t.includes(a.UnstableApiVersion.MSC2974)&&(e.supportsMSC2974Renegotiate=!0)}))}},{key:"handleMessage",value:function(e){var t=new CustomEvent("action:".concat(e.detail.action),{detail:e.detail,cancelable:!0});if(this.emit("action:".concat(e.detail.action),t),!t.defaultPrevented)switch(e.detail.action){case l.WidgetApiToWidgetAction.SupportedApiVersions:return this.replyVersions(e.detail);case l.WidgetApiToWidgetAction.Capabilities:return this.handleCapabilities(e.detail);case l.WidgetApiToWidgetAction.UpdateVisibility:case l.WidgetApiToWidgetAction.NotifyCapabilities:return this.transport.reply(e.detail,{});default:return this.transport.reply(e.detail,{error:{message:"Unknown or unsupported action: "+e.detail.action}})}}},{key:"replyVersions",value:function(e){this.transport.reply(e,{supported_versions:a.CurrentApiVersions})}},{key:"getClientVersions",value:function(){var e=this;return Array.isArray(this.cachedClientVersions)?Promise.resolve(this.cachedClientVersions):this.transport.send(l.WidgetApiFromWidgetAction.SupportedApiVersions,{}).then((function(t){return e.cachedClientVersions=t.supported_versions,t.supported_versions})).catch((function(e){return i.warn("non-fatal error getting supported client versions: ",e),[]}))}},{key:"handleCapabilities",value:function(e){var t=this;return this.capabilitiesFinished?this.transport.reply(e,{error:{message:"Capability negotiation already completed"}}):this.getClientVersions().then((function(n){return n.includes(a.UnstableApiVersion.MSC2871)?t.once("action:".concat(l.WidgetApiToWidgetAction.NotifyCapabilities),(function(e){t.approvedCapabilities=e.detail.data.approved,t.emit("ready")})):t.emit("ready"),t.capabilitiesFinished=!0,t.transport.reply(e,{capabilities:t.requestedCapabilities})}))}}],n&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),k}(o.EventEmitter);t.WidgetApi=k},20988:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetDriver=void 0;var i=n(37760);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"validateCapabilities",value:function(e){return Promise.resolve(new Set)}},{key:"sendEvent",value:function(e,t){return Promise.reject(new Error("Failed to override function"))}},{key:"sendToDevice",value:function(e,t,n){return Promise.reject(new Error("Failed to override function"))}},{key:"readRoomEvents",value:function(e,t,n){return Promise.resolve([])}},{key:"readStateEvents",value:function(e,t,n){return Promise.resolve([])}},{key:"readEventRelations",value:function(e,t,n,i,r,o,s,a){return Promise.resolve({chunk:[]})}},{key:"askOpenID",value:function(e){e.update({state:i.OpenIDRequestState.Blocked})}},{key:"navigate",value:function(e){throw new Error("Navigation is not implemented")}},{key:"getTurnServers",value:function(){throw new Error("TURN server support is not implemented")}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.WidgetDriver=o},37760:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(34692);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var r=n(97779);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var o=n(64963);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var s=n(28958);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var a=n(9843);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var c=n(54565);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var l=n(32981);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var u=n(28651);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var d=n(13094);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var h=n(49094);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var p=n(4764);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var f=n(25456);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var m=n(9301);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var g=n(82047);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var v=n(75206);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var y=n(66376);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))}));var b=n(52646);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===b[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}}))}));var E=n(71409);Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))}));var S=n(76549);Object.keys(S).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===S[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return S[e]}}))}));var w=n(26425);Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===w[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}}))}));var _=n(32179);Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))}));var T=n(7008);Object.keys(T).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===T[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return T[e]}}))}));var x=n(59674);Object.keys(x).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===x[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return x[e]}}))}));var C=n(71085);Object.keys(C).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===C[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}}))}));var I=n(24693);Object.keys(I).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===I[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return I[e]}}))}));var k=n(13114);Object.keys(k).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===k[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return k[e]}}))}));var M=n(2603);Object.keys(M).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===M[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return M[e]}}))}));var A=n(43859);Object.keys(A).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===A[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return A[e]}}))}));var O=n(42793);Object.keys(O).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===O[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}}))}));var R=n(81471);Object.keys(R).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===R[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return R[e]}}))}));var L=n(99471);Object.keys(L).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===L[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return L[e]}}))}));var D=n(29362);Object.keys(D).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===D[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return D[e]}}))}));var N=n(56531);Object.keys(N).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===N[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return N[e]}}))}));var P=n(6067);Object.keys(P).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===P[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}}))}));var $=n(40846);Object.keys($).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===$[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return $[e]}}))}));var U=n(30435);Object.keys(U).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===U[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return U[e]}}))}));var B=n(48299);Object.keys(B).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===B[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return B[e]}}))}));var F=n(14889);Object.keys(F).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===F[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return F[e]}}))}));var j=n(86005);Object.keys(j).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===j[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return j[e]}}))}));var H=n(79177);Object.keys(H).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===H[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return H[e]}}))}));var K=n(97325);Object.keys(K).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===K[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return K[e]}}))}));var q=n(6328);Object.keys(q).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===q[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return q[e]}}))}));var V=n(36634);Object.keys(V).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===V[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return V[e]}}))}));var G=n(84174);Object.keys(G).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===G[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return G[e]}}))}));var W=n(78793);Object.keys(W).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===W[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return W[e]}}))}));var z=n(20988);Object.keys(z).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===z[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return z[e]}}))}))},66376:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.UnstableApiVersion=t.MatrixApiVersion=t.CurrentApiVersions=void 0,t.MatrixApiVersion=n,function(e){e.Prerelease1="0.0.1",e.Prerelease2="0.0.2"}(n||(t.MatrixApiVersion=n={})),t.UnstableApiVersion=i,function(e){e.MSC2762="org.matrix.msc2762",e.MSC2871="org.matrix.msc2871",e.MSC2931="org.matrix.msc2931",e.MSC2974="org.matrix.msc2974",e.MSC2876="org.matrix.msc2876",e.MSC3819="org.matrix.msc3819",e.MSC3846="town.robin.msc3846",e.MSC3869="org.matrix.msc3869"}(i||(t.UnstableApiVersion=i={}));var r=[n.Prerelease1,n.Prerelease2,i.MSC2762,i.MSC2871,i.MSC2931,i.MSC2974,i.MSC2876,i.MSC3819,i.MSC3846,i.MSC3869];t.CurrentApiVersions=r},52646:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.VideoConferenceCapabilities=t.StickerpickerCapabilities=t.MatrixCapabilities=void 0,t.getTimelineRoomIDFromCapability=function(e){return e.substring(e.indexOf(":")+1)},t.isTimelineCapability=function(e){return null==e?void 0:e.startsWith("org.matrix.msc2762.timeline:")},t.isTimelineCapabilityFor=function(e,t){return e==="org.matrix.msc2762.timeline:".concat(t)},t.MatrixCapabilities=n,function(e){e.Screenshots="m.capability.screenshot",e.StickerSending="m.sticker",e.AlwaysOnScreen="m.always_on_screen",e.RequiresClient="io.element.requires_client",e.MSC2931Navigate="org.matrix.msc2931.navigate",e.MSC3846TurnServers="town.robin.msc3846.turn_servers"}(n||(t.MatrixCapabilities=n={}));var i=[n.StickerSending];t.StickerpickerCapabilities=i;var r=[n.AlwaysOnScreen];t.VideoConferenceCapabilities=r},71409:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},76549:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},24693:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.OpenIDRequestState=void 0,t.OpenIDRequestState=n,function(e){e.Allowed="allowed",e.Blocked="blocked",e.PendingUserConfirmation="request"}(n||(t.OpenIDRequestState=n={}))},54565:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},32981:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},40846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},28651:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},13094:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4764:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorResponse=function(e){return"error"in e&&!!e.error.message}},25456:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},43859:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ModalButtonKind=void 0,t.ModalButtonKind=n,function(e){e.Primary="m.primary",e.Secondary="m.secondary",e.Warning="m.warning",e.Danger="m.danger",e.Link="m.link"}(n||(t.ModalButtonKind=n={}))},42793:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BuiltInModalButtonID=void 0,t.BuiltInModalButtonID=n,function(e){e.Close="m.close"}(n||(t.BuiltInModalButtonID=n={}))},30435:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},13114:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6067:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},14889:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},26425:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},29362:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},56531:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},81471:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},32179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7008:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},59674:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},48299:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},71085:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},82047:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetApiToWidgetAction=t.WidgetApiFromWidgetAction=void 0,t.WidgetApiToWidgetAction=n,function(e){e.SupportedApiVersions="supported_api_versions",e.Capabilities="capabilities",e.NotifyCapabilities="notify_capabilities",e.TakeScreenshot="screenshot",e.UpdateVisibility="visibility",e.OpenIDCredentials="openid_credentials",e.WidgetConfig="widget_config",e.CloseModalWidget="close_modal",e.ButtonClicked="button_clicked",e.SendEvent="send_event",e.SendToDevice="send_to_device",e.UpdateTurnServers="update_turn_servers"}(n||(t.WidgetApiToWidgetAction=n={})),t.WidgetApiFromWidgetAction=i,function(e){e.SupportedApiVersions="supported_api_versions",e.ContentLoaded="content_loaded",e.SendSticker="m.sticker",e.UpdateAlwaysOnScreen="set_always_on_screen",e.GetOpenIDCredentials="get_openid",e.CloseModalWidget="close_modal",e.OpenModalWidget="open_modal",e.SetModalButtonEnabled="set_button_enabled",e.SendEvent="send_event",e.SendToDevice="send_to_device",e.WatchTurnServers="watch_turn_servers",e.UnwatchTurnServers="unwatch_turn_servers",e.MSC2876ReadEvents="org.matrix.msc2876.read_events",e.MSC2931Navigate="org.matrix.msc2931.navigate",e.MSC2974RenegotiateCapabilities="org.matrix.msc2974.request_capabilities",e.MSC3869ReadRelations="org.matrix.msc3869.read_relations"}(i||(t.WidgetApiFromWidgetAction=i={}))},75206:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetApiDirection=void 0,t.invertedDirection=function(e){if(e===n.ToWidget)return n.FromWidget;if(e===n.FromWidget)return n.ToWidget;throw new Error("Invalid direction")},t.WidgetApiDirection=n,function(e){e.ToWidget="toWidget",e.FromWidget="fromWidget"}(n||(t.WidgetApiDirection=n={}))},99471:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2603:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetKind=void 0,t.WidgetKind=n,function(e){e.Room="room",e.Account="account",e.Modal="modal"}(n||(t.WidgetKind=n={}))},49094:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MatrixWidgetType=void 0,t.MatrixWidgetType=n,function(e){e.Custom="m.custom",e.JitsiMeet="m.jitsi",e.Stickerpicker="m.stickerpicker"}(n||(t.MatrixWidgetType=n={}))},6328:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Widget=void 0;var i=n(97325),r=n(37760);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definition=t,!this.definition)throw new Error("Definition is required");(0,i.assertPresent)(t,"id"),(0,i.assertPresent)(t,"creatorUserId"),(0,i.assertPresent)(t,"type"),(0,i.assertPresent)(t,"url")}var t,n;return t=e,(n=[{key:"creatorUserId",get:function(){return this.definition.creatorUserId}},{key:"type",get:function(){return this.definition.type}},{key:"id",get:function(){return this.definition.id}},{key:"name",get:function(){return this.definition.name||null}},{key:"title",get:function(){return this.rawData.title||null}},{key:"templateUrl",get:function(){return this.definition.url}},{key:"origin",get:function(){return new URL(this.templateUrl).origin}},{key:"waitForIframeLoad",get:function(){return!1!==this.definition.waitForIframeLoad&&(this.definition.waitForIframeLoad,!0)}},{key:"rawData",get:function(){return this.definition.data||{}}},{key:"getCompleteUrl",value:function(e){return(0,r.runTemplate)(this.templateUrl,this.definition,e)}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Widget=s},86005:(e,t)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetEventCapability=t.EventKind=t.EventDirection=void 0,t.EventKind=r,function(e){e.Event="event",e.State="state_event",e.ToDevice="to_device"}(r||(t.EventKind=r={})),t.EventDirection=o,function(e){e.Send="send",e.Receive="receive"}(o||(t.EventDirection=o={}));var s=function(){function e(t,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.direction=t,this.eventType=n,this.kind=i,this.keyStr=r,this.raw=o}var t,s,a;return t=e,s=[{key:"matchesAsStateEvent",value:function(e,t,n){return this.kind===r.State&&this.direction===e&&this.eventType===t&&(null===this.keyStr||this.keyStr===n)}},{key:"matchesAsToDeviceEvent",value:function(e,t){return this.kind===r.ToDevice&&this.direction===e&&this.eventType===t}},{key:"matchesAsRoomEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.kind===r.Event&&this.direction===e&&this.eventType===t&&("m.room.message"!==this.eventType||null===this.keyStr||this.keyStr===n)}}],a=[{key:"forStateEvent",value:function(t,n,i){n=n.replace(/#/g,"\\#"),i=null!=i?"#".concat(i):"";var r="org.matrix.msc2762.".concat(t,".state_event:").concat(n).concat(i);return e.findEventCapabilities([r])[0]}},{key:"forToDeviceEvent",value:function(t,n){var i="org.matrix.msc3819.".concat(t,".to_device:").concat(n);return e.findEventCapabilities([i])[0]}},{key:"forRoomEvent",value:function(t,n){var i="org.matrix.msc2762.".concat(t,".event:").concat(n);return e.findEventCapabilities([i])[0]}},{key:"forRoomMessageEvent",value:function(t,n){n=null==n?"":n;var i="org.matrix.msc2762.".concat(t,".event:m.room.message#").concat(n);return e.findEventCapabilities([i])[0]}},{key:"findEventCapabilities",value:function(t){var i,s=[],a=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(c)throw s}}}}(t);try{for(a.s();!(i=a.n()).done;){var c=i.value,l=null,u=void 0,d=null;if(c.startsWith("org.matrix.msc2762.send.event:")?(l=o.Send,d=r.Event,u=c.substring("org.matrix.msc2762.send.event:".length)):c.startsWith("org.matrix.msc2762.send.state_event:")?(l=o.Send,d=r.State,u=c.substring("org.matrix.msc2762.send.state_event:".length)):c.startsWith("org.matrix.msc3819.send.to_device:")?(l=o.Send,d=r.ToDevice,u=c.substring("org.matrix.msc3819.send.to_device:".length)):c.startsWith("org.matrix.msc2762.receive.event:")?(l=o.Receive,d=r.Event,u=c.substring("org.matrix.msc2762.receive.event:".length)):c.startsWith("org.matrix.msc2762.receive.state_event:")?(l=o.Receive,d=r.State,u=c.substring("org.matrix.msc2762.receive.state_event:".length)):c.startsWith("org.matrix.msc3819.receive.to_device:")&&(l=o.Receive,d=r.ToDevice,u=c.substring("org.matrix.msc3819.receive.to_device:".length)),null!==l&&null!==d){var h=u.startsWith("m.room.message#")||d===r.State,p=null;if(u.includes("#")&&h){var f=u.split("#"),m=f.findIndex((function(e){return!e.endsWith("\\")}));u=f.slice(0,m+1).map((function(e){return e.endsWith("\\")?e.substring(0,e.length-1):e})).join("#"),p=f.slice(m+1).join("#")}s.push(new e(l,u,d,p,c))}}}catch(e){a.e(e)}finally{a.f()}return s}}],s&&i(t.prototype,s),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.WidgetEventCapability=s},36634:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetParser=void 0;var i=n(6328),r=n(79177);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"parseAccountData",value:function(t){if(!t)return[];for(var n=[],i=0,r=Object.keys(t);i<r.length;i++){var o=r[i],s=t[o];if(s&&("m.widget"===s.type||"im.vector.modular.widgets"===s.type)&&s.sender&&(s.state_key||s.id)===o){var a={content:s.content,sender:s.sender,type:"m.widget",state_key:o,event_id:"$example",room_id:"!example",origin_server_ts:1},c=e.parseRoomWidget(a);c&&n.push(c)}}return n}},{key:"parseWidgetsFromRoomState",value:function(t){if(!t)return[];var n,i=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw s}}}}(t);try{for(r.s();!(n=r.n()).done;){var s=n.value,a=e.parseRoomWidget(s);a&&i.push(a)}}catch(e){r.e(e)}finally{r.f()}return i}},{key:"parseRoomWidget",value:function(t){if(!t)return null;if("m.widget"!==t.type&&"im.vector.modular.widgets"!==t.type)return null;var n=t.content||{},i={id:t.state_key,creatorUserId:n.creatorUserId||t.sender,name:n.name,type:n.type,url:n.url,waitForIframeLoad:n.waitForIframeLoad,data:n.data};return e.processEstimatedWidget(i)}},{key:"processEstimatedWidget",value:function(e){return e.id&&e.creatorUserId&&e.type&&(0,r.isValidUrl)(e.url)?new i.Widget(e):null}}],null&&s(t.prototype,null),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.WidgetParser=a},79177:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidUrl=function(e){if(!e)return!1;try{var t=new URL(e);return"http"===t.protocol||"https"===t.protocol}catch(e){if(e instanceof TypeError)return!1;throw e}}},97325:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertPresent=function(e,t){if(!e[t])throw new Error("".concat(t," is required"))}},84174:(e,t)=>{"use strict";function n(e){return null==e?"".concat(e):e.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.runTemplate=function(e,t,i){for(var r=Object.assign({},t.data,{matrix_room_id:i.widgetRoomId||"",matrix_user_id:i.currentUserId,matrix_display_name:i.userDisplayName||i.currentUserId,matrix_avatar_url:i.userHttpAvatarUrl||"",matrix_widget_id:t.id,"org.matrix.msc2873.client_id":i.clientId||"","org.matrix.msc2873.client_theme":i.clientTheme||"","org.matrix.msc2873.client_language":i.clientLanguage||""}),o=e,s=0,a=Object.keys(r);s<a.length;s++){var c=a[s],l="$".concat(c).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),u=new RegExp(l,"g");o=o.replace(u,encodeURIComponent(n(r[c])))}return o},t.toString=n},28958:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9843:(e,t,n)=>{"use strict";var i=n(25108);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PostmessageTransport=void 0;var o=n(17187),s=n(37760);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function d(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(m,e);var t,n,r,o,a=(r=m,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(o){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function m(e,t,n,i){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(r=a.call(this)).sendDirection=e,r.initialWidgetId=t,r.transportWindow=n,r.inboundWindow=i,f(h(r),"strictOriginCheck",void 0),f(h(r),"targetOrigin",void 0),f(h(r),"timeoutSeconds",10),f(h(r),"_ready",!1),f(h(r),"_widgetId",null),f(h(r),"outboundRequests",new Map),f(h(r),"stopController",new AbortController),r._widgetId=t,r}return t=m,(n=[{key:"ready",get:function(){return this._ready}},{key:"widgetId",get:function(){return this._widgetId||null}},{key:"nextRequestId",get:function(){for(var e="widgetapi-".concat(Date.now()),t=0,n=e;this.outboundRequests.has(n);)n="".concat(e,"-").concat(t++);return this.outboundRequests.set(n,null),n}},{key:"sendInternal",value:function(e){var t=this.targetOrigin||"*";i.log("[PostmessageTransport] Sending object to ".concat(t,": "),e),this.transportWindow.postMessage(e,t)}},{key:"reply",value:function(e,t){return this.sendInternal(c(c({},e),{},{response:t}))}},{key:"send",value:function(e,t){return this.sendComplete(e,t).then((function(e){return e.response}))}},{key:"sendComplete",value:function(e,t){var n=this;if(!this.ready||!this.widgetId)return Promise.reject(new Error("Not ready or unknown widget ID"));var i={api:this.sendDirection,widgetId:this.widgetId,requestId:this.nextRequestId,action:e,data:t};return e===s.WidgetApiToWidgetAction.UpdateVisibility&&(i.visible=t.visible),new Promise((function(e,t){var r=function(e){a(),t(e)},o=setTimeout((function(){return r(new Error("Request timed out"))}),1e3*(n.timeoutSeconds||1)),s=function(){return r(new Error("Transport stopped"))};n.stopController.signal.addEventListener("abort",s);var a=function(){n.outboundRequests.delete(i.requestId),clearTimeout(o),n.stopController.signal.removeEventListener("abort",s)};n.outboundRequests.set(i.requestId,{request:i,resolve:function(t){a(),e(t)},reject:r}),n.sendInternal(i)}))}},{key:"start",value:function(){var e=this;this.inboundWindow.addEventListener("message",(function(t){e.handleMessage(t)})),this._ready=!0}},{key:"stop",value:function(){this._ready=!1,this.stopController.abort()}},{key:"handleMessage",value:function(e){if(!this.stopController.signal.aborted&&e.data&&(!this.strictOriginCheck||e.origin===window.origin)){var t=e.data;if(t.action&&t.requestId&&t.widgetId)if(t.response){if(t.api!==this.sendDirection)return;this.handleResponse(t)}else{var n=t;if(n.api!==(0,s.invertedDirection)(this.sendDirection))return;this.handleRequest(n)}}}},{key:"handleRequest",value:function(e){if(this.widgetId){if(this.widgetId!==e.widgetId)return}else this._widgetId=e.widgetId;this.emit("message",new CustomEvent("message",{detail:e}))}},{key:"handleResponse",value:function(e){if(e.widgetId===this.widgetId){var t=this.outboundRequests.get(e.requestId);if(t)if((0,s.isErrorResponse)(e.response)){var n=e.response;t.reject(new Error(n.error.message))}else t.resolve(e)}}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),m}(o.EventEmitter);t.PostmessageTransport=m},78793:(e,t)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleObservable=void 0;var r=function(){function e(t){var n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=[],(n="listeners")in this?Object.defineProperty(this,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[n]=i,t&&this.listeners.push(t)}var t,r;return t=e,(r=[{key:"onUpdate",value:function(e){this.listeners.push(e)}},{key:"update",value:function(e){var t,i=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(c)throw s}}}}(this.listeners);try{for(i.s();!(t=i.n()).done;)(0,t.value)(e)}catch(e){i.e(e)}finally{i.f()}}},{key:"close",value:function(){this.listeners=[]}}])&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.SimpleObservable=r},62318:(e,t,n)=>{"use strict";var i=n(35717),r=n(3349),o=n(89509).Buffer,s=new Array(16);function a(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function c(e,t){return e<<t|e>>>32-t}function l(e,t,n,i,r,o,s){return c(e+(t&n|~t&i)+r+o|0,s)+t|0}function u(e,t,n,i,r,o,s){return c(e+(t&i|n&~i)+r+o|0,s)+t|0}function d(e,t,n,i,r,o,s){return c(e+(t^n^i)+r+o|0,s)+t|0}function h(e,t,n,i,r,o,s){return c(e+(n^(t|~i))+r+o|0,s)+t|0}i(a,r),a.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,i=this._b,r=this._c,o=this._d;n=l(n,i,r,o,e[0],3614090360,7),o=l(o,n,i,r,e[1],3905402710,12),r=l(r,o,n,i,e[2],606105819,17),i=l(i,r,o,n,e[3],3250441966,22),n=l(n,i,r,o,e[4],4118548399,7),o=l(o,n,i,r,e[5],1200080426,12),r=l(r,o,n,i,e[6],2821735955,17),i=l(i,r,o,n,e[7],4249261313,22),n=l(n,i,r,o,e[8],1770035416,7),o=l(o,n,i,r,e[9],2336552879,12),r=l(r,o,n,i,e[10],4294925233,17),i=l(i,r,o,n,e[11],2304563134,22),n=l(n,i,r,o,e[12],1804603682,7),o=l(o,n,i,r,e[13],4254626195,12),r=l(r,o,n,i,e[14],2792965006,17),n=u(n,i=l(i,r,o,n,e[15],1236535329,22),r,o,e[1],4129170786,5),o=u(o,n,i,r,e[6],3225465664,9),r=u(r,o,n,i,e[11],643717713,14),i=u(i,r,o,n,e[0],3921069994,20),n=u(n,i,r,o,e[5],3593408605,5),o=u(o,n,i,r,e[10],38016083,9),r=u(r,o,n,i,e[15],3634488961,14),i=u(i,r,o,n,e[4],3889429448,20),n=u(n,i,r,o,e[9],568446438,5),o=u(o,n,i,r,e[14],3275163606,9),r=u(r,o,n,i,e[3],4107603335,14),i=u(i,r,o,n,e[8],1163531501,20),n=u(n,i,r,o,e[13],2850285829,5),o=u(o,n,i,r,e[2],4243563512,9),r=u(r,o,n,i,e[7],1735328473,14),n=d(n,i=u(i,r,o,n,e[12],2368359562,20),r,o,e[5],4294588738,4),o=d(o,n,i,r,e[8],2272392833,11),r=d(r,o,n,i,e[11],1839030562,16),i=d(i,r,o,n,e[14],4259657740,23),n=d(n,i,r,o,e[1],2763975236,4),o=d(o,n,i,r,e[4],1272893353,11),r=d(r,o,n,i,e[7],4139469664,16),i=d(i,r,o,n,e[10],3200236656,23),n=d(n,i,r,o,e[13],681279174,4),o=d(o,n,i,r,e[0],3936430074,11),r=d(r,o,n,i,e[3],3572445317,16),i=d(i,r,o,n,e[6],76029189,23),n=d(n,i,r,o,e[9],3654602809,4),o=d(o,n,i,r,e[12],3873151461,11),r=d(r,o,n,i,e[15],530742520,16),n=h(n,i=d(i,r,o,n,e[2],3299628645,23),r,o,e[0],4096336452,6),o=h(o,n,i,r,e[7],1126891415,10),r=h(r,o,n,i,e[14],2878612391,15),i=h(i,r,o,n,e[5],4237533241,21),n=h(n,i,r,o,e[12],1700485571,6),o=h(o,n,i,r,e[3],2399980690,10),r=h(r,o,n,i,e[10],4293915773,15),i=h(i,r,o,n,e[1],2240044497,21),n=h(n,i,r,o,e[8],1873313359,6),o=h(o,n,i,r,e[15],4264355552,10),r=h(r,o,n,i,e[6],2734768916,15),i=h(i,r,o,n,e[13],1309151649,21),n=h(n,i,r,o,e[4],4149444226,6),o=h(o,n,i,r,e[11],3174756917,10),r=h(r,o,n,i,e[2],718787259,15),i=h(i,r,o,n,e[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+i|0,this._c=this._c+r|0,this._d=this._d+o|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=o.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=a},86630:(e,t,n)=>{"use strict";var i=n(62854);e.exports=function(e,t){return n=function(e){var t={};if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return i(e,"definition",(function(e){var n=o(e.identifier);r.call(t,n)||(t[n]=e)})),t}(e),function(e){var t=e&&o(e);return t&&r.call(n,t)?n[t]:null};var n};var r={}.hasOwnProperty;function o(e){return e.toUpperCase()}},52962:(e,t,n)=>{"use strict";e.exports=function(e,t,n,i){var r,o;return"string"==typeof t||t&&"function"==typeof t.exec?o=[[t,n]]:(o=t,i=n),a(e,r=i||{},function e(t){var n=t[0];return function(i,o){var c,l,u,d,h=n[0],p=n[1],f=[],m=0,g=o.children.indexOf(i);for(h.lastIndex=0,l=h.exec(i.value);l&&(c=l.index,!1!==(d=p.apply(null,[].concat(l,{index:l.index,input:l.input})))&&(m!==c&&f.push({type:"text",value:i.value.slice(m,c)}),"string"==typeof d&&d.length>0&&(d={type:"text",value:d}),d&&(f=[].concat(f,d)),m=c+l[0].length),h.global);)l=h.exec(i.value);if(void 0===c?(f=[i],g--):(m<i.value.length&&f.push({type:"text",value:i.value.slice(m)}),f.unshift(g,1),s.apply(o.children,f)),t.length>1)for(u=e(t.slice(1)),c=-1;++c<f.length;)"text"===(i=f[c]).type?u(i,o):a(i,r,u);return g+f.length+1}}(function(e){var t,n,i=[];if("object"!=typeof e)throw new Error("Expected array or object as schema");if("length"in e)for(n=-1;++n<e.length;)i.push([c(e[n][0]),l(e[n][1])]);else for(t in e)i.push([c(t),l(e[t])]);return i}(o))),e};var i=n(99294),r=n(48145),o=n(63150),s=[].splice;function a(e,t,n){var o=r(t.ignore||[]);return i(e,"text",(function(e,t){for(var i,r,s=-1;++s<t.length;){if(i=t[s],o(i,r?r.children.indexOf(i):void 0,r))return;r=i}return n(e,r)})),[]}function c(e){return"string"==typeof e?new RegExp(o(e),"g"):e}function l(e){return"function"==typeof e?e:function(){return e}}},52524:(e,t,n)=>{"use strict";e.exports=function(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){var t=e||{},n=function(e,t){for(var n=-1;++n<t.length;)p(e,t[n]);return e}({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:g(A),autolinkProtocol:w,autolinkEmail:w,atxHeading:g(I),blockQuote:g((function(){return{type:"blockquote",children:[]}})),characterEscape:w,characterReference:w,codeFenced:g(C),codeFencedFenceInfo:v,codeFencedFenceMeta:v,codeIndented:g(C,v),codeText:g((function(){return{type:"inlineCode",value:""}}),v),codeTextData:w,data:w,codeFlowValue:w,definition:g((function(){return{type:"definition",identifier:"",label:null,title:null,url:""}})),definitionDestinationString:v,definitionLabelString:v,definitionTitleString:v,emphasis:g((function(){return{type:"emphasis",children:[]}})),hardBreakEscape:g(k),hardBreakTrailing:g(k),htmlFlow:g(M,v),htmlFlowData:w,htmlText:g(M,v),htmlTextData:w,image:g((function(){return{type:"image",title:null,url:"",alt:null}})),label:v,link:g(A),listItem:g((function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}})),listItemValue:function(e){f("expectingFirstListItemValue")&&(this.stack[this.stack.length-2].start=parseInt(this.sliceSerialize(e),10),u("expectingFirstListItemValue"))},listOrdered:g(O,(function(){u("expectingFirstListItemValue",!0)})),listUnordered:g(O),paragraph:g((function(){return{type:"paragraph",children:[]}})),reference:function(){u("referenceType","collapsed")},referenceString:v,resourceDestinationString:v,resourceTitleString:v,setextHeading:g(I),strong:g((function(){return{type:"strong",children:[]}})),thematicBreak:g((function(){return{type:"thematicBreak"}}))},exit:{atxHeading:b(),atxHeadingSequence:function(e){this.stack[this.stack.length-1].depth||(this.stack[this.stack.length-1].depth=this.sliceSerialize(e).length)},autolink:b(),autolinkEmail:function(e){_.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){_.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)},blockQuote:b(),characterEscapeValue:_,characterReferenceMarkerHexadecimal:x,characterReferenceMarkerNumeric:x,characterReferenceValue:function(e){var t,n,i=this.sliceSerialize(e),r=f("characterReferenceType");r?(t=a(i,"characterReferenceMarkerNumeric"===r?10:16),u("characterReferenceType")):t=d(i),(n=this.stack.pop()).value+=t,n.position.end=m(e.end)},codeFenced:b((function(){var e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u("flowCodeInside")})),codeFencedFence:function(){f("flowCodeInside")||(this.buffer(),u("flowCodeInside",!0))},codeFencedFenceInfo:function(){var e=this.resume();this.stack[this.stack.length-1].lang=e},codeFencedFenceMeta:function(){var e=this.resume();this.stack[this.stack.length-1].meta=e},codeFlowValue:_,codeIndented:b((function(){var e=this.resume();this.stack[this.stack.length-1].value=e})),codeText:b((function(){var e=this.resume();this.stack[this.stack.length-1].value=e})),codeTextData:_,data:_,definition:b(),definitionDestinationString:function(){var e=this.resume();this.stack[this.stack.length-1].url=e},definitionLabelString:function(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=s(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){var e=this.resume();this.stack[this.stack.length-1].title=e},emphasis:b(),hardBreakEscape:b(T),hardBreakTrailing:b(T),htmlFlow:b((function(){var e=this.resume();this.stack[this.stack.length-1].value=e})),htmlFlowData:_,htmlText:b((function(){var e=this.resume();this.stack[this.stack.length-1].value=e})),htmlTextData:_,image:b((function(){var e=this.stack[this.stack.length-1];f("inReference")?(e.type+="Reference",e.referenceType=f("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType),u("referenceType")})),label:function(){var e=this.stack[this.stack.length-1],t=this.resume();this.stack[this.stack.length-1].label=t,u("inReference",!0),"link"===this.stack[this.stack.length-1].type?this.stack[this.stack.length-1].children=e.children:this.stack[this.stack.length-1].alt=t},labelText:function(e){this.stack[this.stack.length-2].identifier=s(this.sliceSerialize(e)).toLowerCase()},lineEnding:function(e){var t=this.stack[this.stack.length-1];if(f("atHardBreak"))return t.children[t.children.length-1].position.end=m(e.end),void u("atHardBreak");!f("setextHeadingSlurpLineEnding")&&n.canContainEols.indexOf(t.type)>-1&&(w.call(this,e),_.call(this,e))},link:b((function(){var e=this.stack[this.stack.length-1];f("inReference")?(e.type+="Reference",e.referenceType=f("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType),u("referenceType")})),listItem:b(),listOrdered:b(),listUnordered:b(),paragraph:b(),referenceString:function(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=s(this.sliceSerialize(e)).toLowerCase(),u("referenceType","full")},resourceDestinationString:function(){var e=this.resume();this.stack[this.stack.length-1].url=e},resourceTitleString:function(){var e=this.resume();this.stack[this.stack.length-1].title=e},resource:function(){u("inReference")},setextHeading:b((function(){u("setextHeadingSlurpLineEnding")})),setextHeadingLineSequence:function(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2},setextHeadingText:function(){u("setextHeadingSlurpLineEnding",!0)},strong:b(),thematicBreak:b()}},t.mdastExtensions||[]),c={};return function(e){for(var t,i={type:"root",children:[]},s=[],a=[],c=-1,d={stack:[i],tokenStack:s,config:n,enter:y,exit:E,buffer:v,resume:S,setData:u,getData:f};++c<e.length;)"listOrdered"!==e[c][1].type&&"listUnordered"!==e[c][1].type||("enter"===e[c][0]?a.push(c):c=l(e,a.pop(c),c));for(c=-1;++c<e.length;)t=n[e[c][0]],o.call(t,e[c][1].type)&&t[e[c][1].type].call(r({sliceSerialize:e[c][2].sliceSerialize},d),e[c][1]);if(s.length)throw new Error("Cannot close document, a token (`"+s[s.length-1].type+"`, "+h({start:s[s.length-1].start,end:s[s.length-1].end})+") is still open");for(i.position={start:m(e.length?e[0][1].start:{line:1,column:1,offset:0}),end:m(e.length?e[e.length-2][1].end:{line:1,column:1,offset:0})},c=-1;++c<n.transforms.length;)i=n.transforms[c](i)||i;return i};function l(e,t,n){for(var i,r,o,s,a,c,l,u=t-1,d=-1,h=!1;++u<=n;)if("listUnordered"===(a=e[u])[1].type||"listOrdered"===a[1].type||"blockQuote"===a[1].type?("enter"===a[0]?d++:d--,l=void 0):"lineEndingBlank"===a[1].type?"enter"===a[0]&&(!i||l||d||c||(c=u),l=void 0):"linePrefix"===a[1].type||"listItemValue"===a[1].type||"listItemMarker"===a[1].type||"listItemPrefix"===a[1].type||"listItemPrefixWhitespace"===a[1].type||(l=void 0),!d&&"enter"===a[0]&&"listItemPrefix"===a[1].type||-1===d&&"exit"===a[0]&&("listUnordered"===a[1].type||"listOrdered"===a[1].type)){if(i){for(r=u,o=void 0;r--;)if("lineEnding"===(s=e[r])[1].type||"lineEndingBlank"===s[1].type){if("exit"===s[0])continue;o&&(e[o][1].type="lineEndingBlank",h=!0),s[1].type="lineEnding",o=r}else if("linePrefix"!==s[1].type&&"blockQuotePrefix"!==s[1].type&&"blockQuotePrefixWhitespace"!==s[1].type&&"blockQuoteMarker"!==s[1].type&&"listItemIndent"!==s[1].type)break;c&&(!o||c<o)&&(i._spread=!0),i.end=m(o?e[o][1].start:a[1].end),e.splice(o||u,0,["exit",i,a[2]]),u++,n++}"listItemPrefix"===a[1].type&&(i={type:"listItem",_spread:!1,start:m(a[1].start)},e.splice(u,0,["enter",i,a[2]]),u++,n++,c=void 0,l=!0)}return e[t][1]._spread=h,n}function u(e,t){c[e]=t}function f(e){return c[e]}function m(e){return{line:e.line,column:e.column,offset:e.offset}}function g(e,t){return function(n){y.call(this,e(n),n),t&&t.call(this,n)}}function v(){this.stack.push({type:"fragment",children:[]})}function y(e,t){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push(t),e.position={start:m(t.start)},e}function b(e){return function(t){e&&e.call(this,t),E.call(this,t)}}function E(e){var t=this.stack.pop(),n=this.tokenStack.pop();if(!n)throw new Error("Cannot close `"+e.type+"` ("+h({start:e.start,end:e.end})+"): its not open");if(n.type!==e.type)throw new Error("Cannot close `"+e.type+"` ("+h({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+h({start:n.start,end:n.end})+") is open");return t.position.end=m(e.end),t}function S(){return i(this.stack.pop())}function w(e){var t=this.stack[this.stack.length-1].children,n=t[t.length-1];n&&"text"===n.type||((n={type:"text",value:""}).position={start:m(e.start)},this.stack[this.stack.length-1].children.push(n)),this.stack.push(n)}function _(e){var t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=m(e.end)}function T(){u("atHardBreak",!0)}function x(e){u("characterReferenceType",e.type)}function C(){return{type:"code",lang:null,meta:null,value:""}}function I(){return{type:"heading",depth:void 0,children:[]}}function k(){return{type:"break"}}function M(){return{type:"html",value:""}}function A(){return{type:"link",title:null,url:"",children:[]}}function O(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}}(n)(u(c(n).document().write(l()(e,t,!0))))};var i=n(4999),r=n(99198),o=n(46706),s=n(35478),a=n(10596),c=n(32976),l=n(30162),u=n(61242),d=n(89435),h=n(75432);function p(e,t){var n,i;for(n in t)i=o.call(e,n)?e[n]:e[n]={},"canContainEols"===n||"transforms"===n?e[n]=[].concat(i,t[n]):Object.assign(i,t[n])}},39671:(e,t,n)=>{"use strict";e.exports=n(52524)},18733:(e,t,n)=>{var i=n(30932),r=n(52962),o=n(36996),s=n(10395);function a(e){this.config.enter.autolinkProtocol.call(this,e)}function c(e,t,n,r,o){var s,a,c="";return!!u(o)&&(/^w/i.test(t)&&(n=t+n,t="",c="http://"),!!function(e){var t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}(n)&&!!(s=function(e){var t,n,r,o=/[!"&'),.:;<>?\]}]+$/.exec(e);if(o)for(e=e.slice(0,o.index),t=(o=o[0]).indexOf(")"),n=i(e,"("),r=i(e,")");-1!==t&&n>r;)e+=o.slice(0,t+1),t=(o=o.slice(t+1)).indexOf(")"),r++;return[e,o]}(n+r))[0]&&(a={type:"link",title:null,url:c+t+s[0],children:[{type:"text",value:t+s[0]}]},s[1]&&(a=[a,{type:"text",value:s[1]}]),a))}function l(e,t,n,i){return!(!u(i,!0)||/[_-]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function u(e,t){var n=e.input.charCodeAt(e.index-1);return(n!=n||s(n)||o(n))&&(!t||47!==n)}t.transforms=[function(e){r(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/i,c],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/,l]],{ignore:["link","linkReference"]})}],t.enter={literalAutolink:function(e){this.enter({type:"link",title:null,url:"",children:[]},e)},literalAutolinkEmail:a,literalAutolinkHttp:a,literalAutolinkWww:a},t.exit={literalAutolink:function(e){this.exit(e)},literalAutolinkEmail:function(e){this.config.exit.autolinkEmail.call(this,e)},literalAutolinkHttp:function(e){this.config.exit.autolinkProtocol.call(this,e)},literalAutolinkWww:function(e){this.config.exit.data.call(this,e),this.stack[this.stack.length-1].url="http://"+this.sliceSerialize(e)}}},45574:(e,t)=>{var n="phrasing",i=["autolink","link","image","label"];t.unsafe=[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:n,notInConstruct:i},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:n,notInConstruct:i},{character:":",before:"[ps]",after:"\\/",inConstruct:n,notInConstruct:i}]},89828:(e,t)=>{t.canContainEols=["delete"],t.enter={strikethrough:function(e){this.enter({type:"delete",children:[]},e)}},t.exit={strikethrough:function(e){this.exit(e)}}},9888:(e,t,n)=>{var i=n(25362);function r(e,t,n){var r=n.enter("emphasis"),o=i(e,n,{before:"~",after:"~"});return r(),"~~"+o+"~~"}t.unsafe=[{character:"~",inConstruct:"phrasing"}],t.handlers={delete:r},r.peek=function(){return"~"}},4865:(e,t)=>{function n(e){this.exit(e)}function i(e){this.enter({type:"tableCell",children:[]},e)}function r(e,t){return"|"===t?t:e}t.enter={table:function(e){this.enter({type:"table",align:e._align,children:[]},e),this.setData("inTable",!0)},tableData:i,tableHeader:i,tableRow:function(e){this.enter({type:"tableRow",children:[]},e)}},t.exit={codeText:function(e){var t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,r)),this.stack[this.stack.length-1].value=t,this.exit(e)},table:function(e){this.exit(e),this.setData("inTable")},tableData:n,tableHeader:n,tableRow:n}},63046:(e,t,n)=>{var i=n(25362),r=n(11595),o=n(78234);e.exports=function(e){var t=e||{},n=t.tableCellPadding,s=t.tablePipeAlign,a=t.stringLength,c=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:function(e,t,n){return u(function(e,t){for(var n=e.children,i=-1,r=n.length,o=[],s=t.enter("table");++i<r;)o[i]=d(n[i],t);return s(),o}(e,n),e.align)},tableRow:function(e,t,n){var i=u([d(e,n)]);return i.slice(0,i.indexOf("\n"))},tableCell:l,inlineCode:function(e,t,n){var i=r(e,t,n);return-1!==n.stack.indexOf("tableCell")&&(i=i.replace(/\|/g,"\\$&")),i}}};function l(e,t,n){var r=n.enter("tableCell"),o=i(e,n,{before:c,after:c});return r(),o}function u(e,t){return o(e,{align:t,alignDelimiters:s,padding:n,stringLength:a})}function d(e,t){for(var n=e.children,i=-1,r=n.length,o=[],s=t.enter("tableRow");++i<r;)o[i]=l(n[i],0,t);return s(),o}}},29511:(e,t)=>{function n(e){this.stack[this.stack.length-2].checked="taskListCheckValueChecked"===e.type}t.exit={taskListCheckValueChecked:n,taskListCheckValueUnchecked:n,paragraph:function(e){var t,n=this.stack[this.stack.length-2],i=this.stack[this.stack.length-1],r=n.children,o=i.children[0],s=-1;if(n&&"listItem"===n.type&&"boolean"==typeof n.checked&&o&&"text"===o.type){for(;++s<r.length;)if("paragraph"===r[s].type){t=r[s];break}t===i&&(o.value=o.value.slice(1),0===o.value.length?i.children.shift():(o.position.start.column++,o.position.start.offset++,i.position.start=Object.assign({},o.position.start)))}this.exit(e)}}},94625:(e,t,n)=>{var i=n(48618);t.unsafe=[{atBreak:!0,character:"-",after:"[:|-]"}],t.handlers={listItem:function(e,t,n){var r=i(e,t,n),o=e.children[0];return"boolean"==typeof e.checked&&o&&"paragraph"===o.type&&(r=r.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(t){return t+"["+(e.checked?"x":" ")+"] "}))),r}}},10438:(e,t,n)=>{var i=n(18733),r=n(89828),o=n(4865),s=n(29511),a={}.hasOwnProperty;function c(e,t){var n,i,r;for(n in t)i=a.call(e,n)?e[n]:e[n]={},r=t[n],"canContainEols"===n||"transforms"===n?e[n]=[].concat(i,r):Object.assign(i,r)}e.exports=function(e){for(var t={transforms:[],canContainEols:[]},n=e.length,i=-1;++i<n;)c(t,e[i]);return t}([i,r,o,s])},48135:(e,t,n)=>{var i=n(45574),r=n(9888),o=n(63046),s=n(94625),a=n(2564);e.exports=function(e){var t=a({handlers:{},join:[],unsafe:[],options:{}},{extensions:[i,r,o(e),s]});return Object.assign(t.options,{handlers:t.handlers,join:t.join,unsafe:t.unsafe})}},55288:(e,t,n)=>{"use strict";e.exports=n(31601)},95426:(e,t,n)=>{"use strict";e.exports=function(e,t){for(var n,r,o=t.children||[],s=o.length,a=[],c=-1;++c<s;)(n=i(e,o[c],t))&&(c&&"break"===o[c-1].type&&(n.value&&(n.value=n.value.replace(/^\s+/,"")),(r=n.children&&n.children[0])&&r.value&&(r.value=r.value.replace(/^\s+/,""))),a=a.concat(n));return a};var i=n(60719)},61696:(e,t,n)=>{"use strict";e.exports=function(e){for(var t,n,s,a,c=e.footnoteById,l=e.footnoteOrder,u=l.length,d=-1,h=[];++d<u;)(t=c[l[d].toUpperCase()])&&(a=(s=t.children.concat())[s.length-1],n={type:"link",url:"#fnref-"+t.identifier,data:{hProperties:{className:["footnote-backref"]}},children:[{type:"text",value:""}]},a&&"paragraph"===a.type||(a={type:"paragraph",children:[]},s.push(a)),a.children.push(n),h.push({type:"listItem",data:{hProperties:{id:"fn-"+t.identifier}},children:s,position:t.position}));return 0===h.length?null:e(null,"div",{className:["footnotes"]},o([i(e),r(e,{type:"list",ordered:!0,children:h})],!0))};var i=n(37552),r=n(47888),o=n(96115)},34590:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"blockquote",i(r(e,t),!0))};var i=n(96115),r=n(95426)},13562:(e,t,n)=>{"use strict";e.exports=function(e,t){return[e(t,"br"),i("text","\n")]};var i=n(50914)},37891:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,r=t.value?t.value+"\n":"",o=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),s={};return o&&(s.className=["language-"+o]),n=e(t,"code",s,[i("text",r)]),t.meta&&(n.data={meta:t.meta}),e(t.position,"pre",[n])};var i=n(50914)},59381:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"del",i(e,t))};var i=n(95426)},80790:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"em",i(e,t))};var i=n(95426)},58235:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=e.footnoteOrder,r=String(t.identifier);return-1===n.indexOf(r)&&n.push(r),e(t.position,"sup",{id:"fnref-"+r},[e(t,"a",{href:"#fn-"+r,className:["footnote-ref"]},[i("text",t.label||r)])])};var i=n(50914)},85758:(e,t,n)=>{"use strict";e.exports=function(e,t){for(var n=e.footnoteById,r=e.footnoteOrder,o=1;o in n;)o++;return o=String(o),r.push(o),n[o]={type:"footnoteDefinition",identifier:o,children:[{type:"paragraph",children:t.children}],position:t.position},i(e,{type:"footnoteReference",identifier:o,position:t.position})};var i=n(58235)},34890:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"h"+t.depth,i(e,t))};var i=n(95426)},92202:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.dangerous?e.augment(t,i("raw",t.value)):null};var i=n(50914)},71454:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o=e.definition(t.identifier);return o?(n={src:i(o.url||""),alt:t.alt},null!==o.title&&void 0!==o.title&&(n.title=o.title),e(t,"img",n)):r(e,t)};var i=n(70729),r=n(713)},5037:(e,t,n)=>{"use strict";var i=n(70729);e.exports=function(e,t){var n={src:i(t.url),alt:t.alt};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"img",n)}},44617:(e,t,n)=>{"use strict";function i(){return null}e.exports={blockquote:n(34590),break:n(13562),code:n(37891),delete:n(59381),emphasis:n(80790),footnoteReference:n(58235),footnote:n(85758),heading:n(34890),html:n(92202),imageReference:n(71454),image:n(5037),inlineCode:n(28409),linkReference:n(79266),link:n(20404),listItem:n(94463),list:n(47888),paragraph:n(68346),root:n(68100),strong:n(4970),table:n(72605),text:n(50989),thematicBreak:n(37552),toml:i,yaml:i,definition:i,footnoteDefinition:i}},28409:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=t.value.replace(/\r?\n|\r/g," ");return e(t,"code",[i("text",n)])};var i=n(50914)},79266:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,s=e.definition(t.identifier);return s?(n={href:i(s.url||"")},null!==s.title&&void 0!==s.title&&(n.title=s.title),e(t,"a",n,o(e,t))):r(e,t)};var i=n(70729),r=n(713),o=n(95426)},20404:(e,t,n)=>{"use strict";var i=n(70729),r=n(95426);e.exports=function(e,t){var n={href:i(t.url)};return null!==t.title&&void 0!==t.title&&(n.title=t.title),e(t,"a",n,r(e,t))}},94463:(e,t,n)=>{"use strict";e.exports=function(e,t,n){var s,a,c,l=r(e,t),u=l[0],d=n?function(e){for(var t=e.spread,n=e.children,i=n.length,r=-1;!t&&++r<i;)t=o(n[r]);return t}(n):o(t),h={},p=[];for("boolean"==typeof t.checked&&(u&&"p"===u.tagName||(u=e(null,"p",[]),l.unshift(u)),u.children.length>0&&u.children.unshift(i("text"," ")),u.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),h.className=["task-list-item"]),s=l.length,a=-1;++a<s;)c=l[a],(d||0!==a||"p"!==c.tagName)&&p.push(i("text","\n")),"p"!==c.tagName||d?p.push(c):p=p.concat(c.children);return s&&(d||"p"!==c.tagName)&&p.push(i("text","\n")),e(t,"li",h,p)};var i=n(50914),r=n(95426);function o(e){var t=e.spread;return null==t?e.children.length>1:t}},47888:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o,s={},a=t.ordered?"ol":"ul",c=-1;for("number"==typeof t.start&&1!==t.start&&(s.start=t.start),o=(n=r(e,t)).length;++c<o;)if(n[c].properties.className&&-1!==n[c].properties.className.indexOf("task-list-item")){s.className=["contains-task-list"];break}return e(t,a,s,i(n,!0))};var i=n(96115),r=n(95426)},68346:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"p",i(e,t))};var i=n(95426)},68100:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.augment(t,i("root",r(o(e,t))))};var i=n(50914),r=n(96115),o=n(95426)},4970:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"strong",i(e,t))};var i=n(95426)},72605:(e,t,n)=>{"use strict";e.exports=function(e,t){for(var n,s,a,c,l,u=t.children,d=u.length,h=t.align||[],p=h.length,f=[];d--;){for(s=u[d].children,c=0===d?"th":"td",n=p||s.length,a=[];n--;)l=s[n],a[n]=e(l,c,{align:h[n]},l?o(e,l):[]);f[d]=e(u[d],"tr",r(a,!0))}return e(t,"table",r([e(f[0].position,"thead",r([f[0]],!0))].concat(f[1]?e({start:i.start(f[1]),end:i.end(f[f.length-1])},"tbody",r(f.slice(1),!0)):[]),!0))};var i=n(77361),r=n(96115),o=n(95426)},50989:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.augment(t,i("text",String(t.value).replace(/[ \t]*(\r?\n|\r)[ \t]*/g,"$1")))};var i=n(50914)},37552:e=>{"use strict";e.exports=function(e,t){return e(t,"hr")}},31601:(e,t,n)=>{"use strict";var i=n(25108);e.exports=function(e,t){var n=function(e,t){var n=t||{};void 0===n.allowDangerousHTML||p||(p=!0,i.warn("mdast-util-to-hast: deprecation: `allowDangerousHTML` is nonstandard, use `allowDangerousHtml` instead"));var r=n.allowDangerousHtml||n.allowDangerousHTML,l={};return f.dangerous=r,f.definition=c(e),f.footnoteById=l,f.footnoteOrder=[],f.augment=u,f.handlers=Object.assign({},d,n.handlers),f.unknownHandler=n.unknownHandler,f.passThrough=n.passThrough,o(e,"footnoteDefinition",(function(e){var t=String(e.identifier).toUpperCase();h.call(l,t)||(l[t]=e)})),f;function u(e,t){var n,i;return e&&e.data&&((n=e.data).hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties=Object.assign({},t.properties,n.hProperties)),t.children&&n.hChildren&&(t.children=n.hChildren)),i=e&&e.position?e:{position:e},a(i)||(t.position={start:s.start(i),end:s.end(i)}),t}function f(e,t,n,i){return null==i&&"object"==typeof n&&"length"in n&&(i=n,n={}),u(e,{type:"element",tagName:t,properties:n||{},children:i||[]})}}(e,t),f=l(n,e),m=u(n);return m&&(f.children=f.children.concat(r("text","\n"),m)),f};var r=n(50914),o=n(62854),s=n(77361),a=n(61744),c=n(86630),l=n(60719),u=n(61696),d=n(44617),h={}.hasOwnProperty,p=!1},60719:(e,t,n)=>{"use strict";e.exports=function(e,t,n){var i,r=t&&t.type;if(!r)throw new Error("Expected node, got `"+t+"`");return("function"==typeof(i=o.call(e.handlers,r)?e.handlers[r]:e.passThrough&&e.passThrough.indexOf(r)>-1?a:e.unknownHandler)?i:s)(e,t,n)};var i=n(50914),r=n(95426),o={}.hasOwnProperty;function s(e,t){return function(e){var t=e.data||{};return!(o.call(t,"hName")||o.call(t,"hProperties")||o.call(t,"hChildren"))&&"value"in e}(t)?e.augment(t,i("text",t.value)):e(t,"div",r(e,t))}function a(e,t){var n;return t.children?((n=Object.assign({},t)).children=r(e,t),n):t}},713:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o,s,a=t.referenceType,c="]";return"collapsed"===a?c+="[]":"full"===a&&(c+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type?i("text","!["+t.alt+c):((o=(n=r(e,t))[0])&&"text"===o.type?o.value="["+o.value:n.unshift(i("text","[")),(s=n[n.length-1])&&"text"===s.type?s.value+=c:n.push(i("text",c)),n)};var i=n(50914),r=n(95426)},96115:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=[],r=-1,o=e.length;for(t&&n.push(i("text","\n"));++r<o;)r&&n.push(i("text","\n")),n.push(e[r]);return t&&e.length>0&&n.push(i("text","\n")),n};var i=n(50914)},2564:e=>{e.exports=function e(t,n){var i,r=-1;if(n.extensions)for(;++r<n.extensions.length;)e(t,n.extensions[r]);for(i in n)"extensions"===i||("unsafe"===i||"join"===i?t[i]=t[i].concat(n[i]||[]):"handlers"===i?t[i]=Object.assign(t[i],n[i]||{}):t.options[i]=n[i]);return t}},11595:(e,t,n)=>{e.exports=r,r.peek=function(){return"`"};var i=n(84553);function r(e,t,n){for(var r,o,s,a,c=e.value||"",l="`",u=-1;new RegExp("(^|[^`])"+l+"([^`]|$)").test(c);)l+="`";for(/[^ \r\n]/.test(c)&&(/[ \r\n`]/.test(c.charAt(0))||/[ \r\n`]/.test(c.charAt(c.length-1)))&&(c=" "+c+" ");++u<n.unsafe.length;)if((r=n.unsafe[u]).atBreak)for(o=i(r);s=o.exec(c);)a=s.index,10===c.charCodeAt(a)&&13===c.charCodeAt(a-1)&&a--,c=c.slice(0,a)+" "+c.slice(s.index+1);return l+c+l}},48618:(e,t,n)=>{e.exports=function(e,t,n){var c,l,u,d=r(n),h=o(n);return t&&t.ordered&&(d=(t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+"."),c=d.length+1,("tab"===h||"mixed"===h&&(t&&t.spread||e.spread))&&(c=4*Math.ceil(c/4)),u=n.enter("listItem"),l=a(s(e,n),(function(e,t,n){return t?(n?"":i(" ",c))+e:(n?d:d+i(" ",c-d.length))+e})),u(),l};var i=n(96464),r=n(89400),o=n(56636),s=n(93493),a=n(92670)},89400:e=>{e.exports=function(e){var t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}},56636:e=>{e.exports=function(e){var t=e.options.listItemIndent||"tab";if(1===t||"1"===t)return"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}},93493:(e,t,n)=>{e.exports=function(e,t){for(var n,r=e.children||[],o=[],s=-1;++s<r.length;)n=r[s],o.push(t.handle(n,e,t,{before:"\n",after:"\n"})),s+1<r.length&&o.push(a(n,r[s+1]));return o.join("");function a(n,r){for(var o,s=-1;++s<t.join.length&&!0!==(o=t.join[s](n,r,e,t))&&1!==o;){if("number"==typeof o)return i("\n",1+Number(o));if(!1===o)return"\n\n\x3c!----\x3e\n\n"}return"\n\n"}};var i=n(96464)},25362:e=>{e.exports=function(e,t,n){for(var i,r,o,s=e.children||[],a=[],c=-1,l=n.before;++c<s.length;)o=s[c],c+1<s.length?((r=t.handle.handlers[s[c+1].type])&&r.peek&&(r=r.peek),i=r?r(s[c+1],e,t,{before:"",after:""}).charAt(0):""):i=n.after,a.length>0&&("\r"===l||"\n"===l)&&"html"===o.type&&(a[a.length-1]=a[a.length-1].replace(/(\r?\n|\r)$/," "),l=" "),a.push(t.handle(o,e,t,{before:l,after:i})),l=a[a.length-1].slice(-1);return a.join("")}},92670:e=>{e.exports=function(e,n){for(var i,r=[],o=0,s=0;i=t.exec(e);)a(e.slice(o,i.index)),r.push(i[0]),o=i.index+i[0].length,s++;return a(e.slice(o)),r.join("");function a(e){r.push(n(e,s,!e))}};var t=/\r?\n|\r/g},84553:e=>{e.exports=function(e){var t,n;return e._compiled||(t=e.before?"(?:"+e.before+")":"",n=e.after?"(?:"+e.after+")":"",e.atBreak&&(t="[\\r\\n][\\t ]*"+t),e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(n||""),"g")),e._compiled}},4999:e=>{"use strict";function t(e){return e&&(e.value||e.alt||e.title||"children"in e&&n(e.children)||"length"in e&&n(e))||""}function n(e){for(var n=[],i=-1;++i<e.length;)n[i]=t(e[i]);return n.join("")}e.exports=t},70729:e=>{"use strict";var t={};function n(e,i,r){var o,s,a,c,l,u="";for("string"!=typeof i&&(r=i,i=n.defaultChars),void 0===r&&(r=!0),l=function(e){var n,i,r=t[e];if(r)return r;for(r=t[e]=[],n=0;n<128;n++)i=String.fromCharCode(n),/^[0-9a-z]$/i.test(i)?r.push(i):r.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2));for(n=0;n<e.length;n++)r[e.charCodeAt(n)]=e[n];return r}(i),o=0,s=e.length;o<s;o++)if(a=e.charCodeAt(o),r&&37===a&&o+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(o+1,o+3)))u+=e.slice(o,o+3),o+=2;else if(a<128)u+=l[a];else if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s&&(c=e.charCodeAt(o+1))>=56320&&c<=57343){u+=encodeURIComponent(e[o]+e[o+1]),o++;continue}u+="%EF%BF%BD"}else u+=encodeURIComponent(e[o]);return u}n.defaultChars=";/?:@&=+$,-_.!~*'()#",n.componentChars="-_.!~*'()",e.exports=n},57539:(e,t,n)=>{e.exports=n(62346)},62346:(e,t,n)=>{var i=n(76734),r=n(46712),o=n(89696),s=n(17238),a=n(36996),c=n(10395),l={tokenize:function(e,t,n){return function(t){return e.consume(t),i};function i(t){return 87===t||t-32==87?(e.consume(t),r):n(t)}function r(t){return 87===t||t-32==87?(e.consume(t),o):n(t)}function o(t){return 46===t?(e.consume(t),a):n(t)}function a(e){return null===e||s(e)?n(e):t(e)}},partial:!0},u={tokenize:function(e,t,n){var i,r;return s;function s(t){return 38===t?e.check(p,u,l)(t):46===t||95===t?e.check(h,u,l)(t):o(t)||c(t)||45!==t&&a(t)?u(t):(e.consume(t),s)}function l(t){return 46===t?(r=i,i=void 0,e.consume(t),s):(95===t&&(i=!0),e.consume(t),s)}function u(e){return r||i?n(e):t(e)}},partial:!0},d={tokenize:function(e,t){var n=0;return i;function i(s){return 38===s?e.check(p,t,r)(s):(40===s&&n++,41===s?e.check(h,o,r)(s):E(s)?t(s):b(s)?e.check(h,t,r)(s):(e.consume(s),i))}function r(t){return e.consume(t),i}function o(e){return--n<0?t(e):r(e)}},partial:!0},h={tokenize:function(e,t,n){return function(t){return e.consume(t),i};function i(r){return b(r)?(e.consume(r),i):E(r)?t(r):n(r)}},partial:!0},p={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(t){return i(t)?(e.consume(t),r):59===t?(e.consume(t),o):n(t)}function o(e){return E(e)?t(e):n(e)}},partial:!0},f={tokenize:function(e,t,n){var i=this;return function(t){return 87!==t&&t-32!=87||!w(i.previous)||x(i.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(l,e.attempt(u,e.attempt(d,r),n),n)(t))};function r(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:w},m={tokenize:function(e,t,n){var i=this;return function(t){return 72!==t&&t-32!=72||!_(i.previous)||x(i.events)?n(t):(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(t),r)};function r(t){return 84===t||t-32==84?(e.consume(t),s):n(t)}function s(t){return 84===t||t-32==84?(e.consume(t),l):n(t)}function l(t){return 80===t||t-32==80?(e.consume(t),h):n(t)}function h(t){return 83===t||t-32==83?(e.consume(t),p):p(t)}function p(t){return 58===t?(e.consume(t),f):n(t)}function f(t){return 47===t?(e.consume(t),m):n(t)}function m(t){return 47===t?(e.consume(t),g):n(t)}function g(t){return o(t)||c(t)||a(t)?n(t):e.attempt(u,e.attempt(d,v),n)(t)}function v(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:_},g={tokenize:function(e,t,n){var i,o=this;return function(t){return S(t)&&T(o.previous)&&!x(o.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),s(t)):n(t)};function s(t){return S(t)?(e.consume(t),s):64===t?(e.consume(t),a):n(t)}function a(t){return 46===t?e.check(h,d,c)(t):45===t||95===t?e.check(h,n,l)(t):r(t)?(e.consume(t),a):d(t)}function c(t){return e.consume(t),i=!0,a}function l(t){return e.consume(t),u}function u(t){return 46===t?e.check(h,n,c)(t):a(t)}function d(r){return i?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(r)):n(r)}},previous:T},v={};t.text=v;for(var y=48;y<123;)v[y]=g,58==++y?y=65:91===y&&(y=97);function b(e){return 33===e||34===e||39===e||41===e||42===e||44===e||46===e||58===e||59===e||60===e||63===e||95===e||126===e}function E(e){return null===e||e<0||32===e||60===e}function S(e){return 43===e||45===e||46===e||95===e||r(e)}function w(e){return null===e||e<0||32===e||40===e||42===e||95===e||126===e}function _(e){return null===e||!i(e)}function T(e){return 47!==e&&_(e)}function x(e){for(var t=e.length;t--;)if(("labelLink"===e[t][1].type||"labelImage"===e[t][1].type)&&!e[t][1]._balanced)return!0}v[43]=g,v[45]=g,v[46]=g,v[95]=g,v[72]=[g,m],v[104]=[g,m],v[87]=[g,f],v[119]=[g,f]},3490:(e,t,n)=>{e.exports=function(e){var t=(e||{}).singleTilde,n={tokenize:function(e,n,r){var o=this.previous,s=this.events,a=0;return function(t){return 126!==t||126===o&&"characterEscape"!==s[s.length-1][1].type?r(t):(e.enter("strikethroughSequenceTemporary"),c(t))};function c(s){var l,u,d=i(o);return 126===s?a>1?r(s):(e.consume(s),a++,c):a<2&&!t?r(s):(l=e.exit("strikethroughSequenceTemporary"),u=i(s),l._open=!u||2===u&&d,l._close=!d||2===d&&u,n(s))}},resolveAll:function(e,t){for(var n,i,a,c,l=-1;++l<e.length;)if("enter"===e[l][0]&&"strikethroughSequenceTemporary"===e[l][1].type&&e[l][1]._close)for(a=l;a--;)if("exit"===e[a][0]&&"strikethroughSequenceTemporary"===e[a][1].type&&e[a][1]._open&&e[l][1].end.offset-e[l][1].start.offset==e[a][1].end.offset-e[a][1].start.offset){e[l][1].type="strikethroughSequence",e[a][1].type="strikethroughSequence",n={type:"strikethrough",start:s(e[a][1].start),end:s(e[l][1].end)},i={type:"strikethroughText",start:s(e[a][1].end),end:s(e[l][1].start)},c=[["enter",n,t],["enter",e[a][1],t],["exit",e[a][1],t],["enter",i,t]],r(c,c.length,0,o(t.parser.constructs.insideSpan.null,e.slice(a+1,l),t)),r(c,c.length,0,[["exit",i,t],["enter",e[l][1],t],["exit",e[l][1],t],["exit",n,t]]),r(e,a-1,l-a+3,c),l=a+c.length-2;break}return function(e){for(var t=-1,n=e.length;++t<n;)"strikethroughSequenceTemporary"===e[t][1].type&&(e[t][1].type="data");return e}(e)}};return null==t&&(t=!0),{text:{126:n},insideSpan:{null:n}}};var i=n(19444),r=n(56808),o=n(58280),s=n(75923)},81286:(e,t,n)=>{e.exports=n(23993)},23993:(e,t,n)=>{t.flow={null:{tokenize:function(e,t,n){var s,a,c=[],l=0;return function(t){return null===t||-5===t||-4===t||-3===t?n(t):(e.enter("table")._align=c,e.enter("tableHead"),e.enter("tableRow"),124===t?u(t):(l++,e.enter("temporaryTableCellContent"),p(t)))};function u(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),s=!0,d}function d(t){return null===t||-5===t||-4===t||-3===t?function(t){return null===t?n(t):(e.exit("tableRow"),e.exit("tableHead"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.check(r,n,i(e,m,"linePrefix",4)))}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),h):(s&&(s=void 0,l++),124===t?u(t):(e.enter("temporaryTableCellContent"),p(t)))}function h(t){return-2===t||-1===t||32===t?(e.consume(t),h):(e.exit("whitespace"),d(t))}function p(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),d(t)):(e.consume(t),92===t?f:p)}function f(t){return 92===t||124===t?(e.consume(t),p):p(t)}function m(t){return null===t||t<0||32===t?n(t):(e.enter("tableDelimiterRow"),g(t))}function g(t){return null===t||-5===t||-4===t||-3===t?S(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),v):45===t?(e.enter("tableDelimiterFiller"),e.consume(t),a=!0,c.push(null),y):58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),c.push("left"),b):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),g):n(t)}function v(t){return-2===t||-1===t||32===t?(e.consume(t),v):(e.exit("whitespace"),g(t))}function y(t){return 45===t?(e.consume(t),y):(e.exit("tableDelimiterFiller"),58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),c[c.length-1]="left"===c[c.length-1]?"center":"right",E):g(t))}function b(t){return 45===t?(e.enter("tableDelimiterFiller"),e.consume(t),a=!0,y):n(t)}function E(t){return null===t||-5===t||-4===t||-3===t?S(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),v):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),g):n(t)}function S(t){return e.exit("tableDelimiterRow"),a&&l===c.length?null===t?w(t):e.check(o,w,_)(t):n(t)}function w(n){return e.exit("table"),t(n)}function _(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i(e,T,"linePrefix",4)}function T(t){return e.enter("tableBody"),x(t)}function x(t){return e.enter("tableRow"),124===t?C(t):(e.enter("temporaryTableCellContent"),M(t))}function C(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),I}function I(t){return null===t||-5===t||-4===t||-3===t?function(t){return e.exit("tableRow"),null===t?O(t):e.check(o,O,R)(t)}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),k):124===t?C(t):(e.enter("temporaryTableCellContent"),M(t))}function k(t){return-2===t||-1===t||32===t?(e.consume(t),k):(e.exit("whitespace"),I(t))}function M(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),I(t)):(e.consume(t),92===t?A:M)}function A(t){return 92===t||124===t?(e.consume(t),M):M(t)}function O(t){return e.exit("tableBody"),w(t)}function R(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i(e,x,"linePrefix",4)}},resolve:function(e,t){for(var n,i,r,o,s,a,c,l,u,d,h=e.length,p=-1;++p<h;)n=e[p][1],o&&("temporaryTableCellContent"===n.type&&(l=l||p,u=p),"tableCellDivider"!==n.type&&"tableRow"!==n.type||!u||(c={type:"chunkText",start:(a={type:"tableContent",start:e[l][1].start,end:e[u][1].end}).start,end:a.end,contentType:"text"},e.splice(l,u-l+1,["enter",a,t],["enter",c,t],["exit",c,t],["exit",a,t]),p-=u-l-3,h=e.length,l=void 0,u=void 0)),"exit"===e[p][0]&&d&&d+1<p&&("tableCellDivider"===n.type||"tableRow"===n.type&&(d+3<p||"whitespace"!==e[d][1].type))&&(s={type:r?"tableDelimiter":i?"tableHeader":"tableData",start:e[d][1].start,end:e[p][1].end},e.splice(p+("tableCellDivider"===n.type?1:0),0,["exit",s,t]),e.splice(d,0,["enter",s,t]),p+=2,h=e.length,d=p+1),"tableRow"===n.type&&(o="enter"===e[p][0])&&(d=p+1),"tableDelimiterRow"===n.type&&(r="enter"===e[p][0])&&(d=p+1),"tableHead"===n.type&&(i="enter"===e[p][0]);return e},interruptible:!0}};var i=n(52928),r={tokenize:function(e,t,n){return function(t){return 45!==t?n(t):(e.enter("setextUnderline"),i(t))};function i(t){return 45===t?(e.consume(t),i):r(t)}function r(i){return-2===i||-1===i||32===i?(e.consume(i),r):null===i||-5===i||-4===i||-3===i?t(i):n(i)}},partial:!0},o={tokenize:function(e,t,n){var i=0;return function(t){return e.enter("check"),e.consume(t),r};function r(o){return-1===o||32===o?(e.consume(o),4==++i?t:r):null===o||o<0?t(o):n(o)}},partial:!0}},5675:(e,t,n)=>{e.exports=n(27224)},27224:(e,t,n)=>{var i=n(88367),r=n(52928),o=n(15096),s={tokenize:function(e,t,n){var i=this;return function(t){return 91===t&&null===i.previous&&i._gfmTasklistFirstContentOfListItem?(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),r):n(t)};function r(t){return-2===t||32===t?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),o):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),o):n(t)}function o(i){return 93===i?(e.enter("taskListCheckMarker"),e.consume(i),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:a},t,n)):n(i)}}};function a(e,t,n){var s=this;return r(e,(function(e){return o(s.events,"whitespace")&&null!==e&&!i(e)?t(e):n(e)}),"whitespace")}t.text={91:s}},82747:(e,t,n)=>{e.exports=n(2518)},2518:(e,t,n)=>{var i=n(12952),r=n(57539),o=n(3490),s=n(81286),a=n(5675);e.exports=function(e){return i([r,o(e),s,a])}},76734:(e,t,n)=>{"use strict";var i=n(2841)(/[A-Za-z]/);e.exports=i},46712:(e,t,n)=>{"use strict";var i=n(2841)(/[\dA-Za-z]/);e.exports=i},13571:(e,t,n)=>{"use strict";var i=n(2841)(/[#-'*+\--9=?A-Z^-~]/);e.exports=i},89696:e=>{"use strict";e.exports=function(e){return e<32||127===e}},73977:(e,t,n)=>{"use strict";var i=n(2841)(/\d/);e.exports=i},56238:(e,t,n)=>{"use strict";var i=n(2841)(/[\dA-Fa-f]/);e.exports=i},83074:(e,t,n)=>{"use strict";var i=n(2841)(/[!-/:-@[-`{-~]/);e.exports=i},88367:e=>{"use strict";e.exports=function(e){return e<0||32===e}},17238:e=>{"use strict";e.exports=function(e){return e<-2}},73654:e=>{"use strict";e.exports=function(e){return-2===e||-1===e||32===e}},36996:(e,t,n)=>{"use strict";var i=n(76830),r=n(2841)(i);e.exports=r},10395:(e,t,n)=>{"use strict";var i=n(2841)(/\s/);e.exports=i},99198:e=>{"use strict";var t=Object.assign;e.exports=t},93267:e=>{"use strict";var t=String.fromCharCode;e.exports=t},46706:e=>{"use strict";var t={}.hasOwnProperty;e.exports=t},57139:e=>{"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},16871:e=>{"use strict";e.exports=["pre","script","style","textarea"]},21362:e=>{"use strict";var t=[].splice;e.exports=t},76830:e=>{"use strict";e.exports=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/},36274:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(97082),r=n(47542),o=n(1349),s=n(45485),a=n(49653),c=n(36713),l=n(46597),u=n(20431),d=n(60026),h=n(93865),p=n(65694),f=n(596),m=n(76872),g=n(28911),v=n(31294),y=n(36215),b=n(60534),E=n(92607),S=n(46931),w=n(15874),_=n(37039),T={42:S,43:S,45:S,48:S,49:S,50:S,51:S,52:S,53:S,54:S,55:S,56:S,57:S,62:s},x={91:h},C={"-2":u,"-1":u,32:u},I={35:f,42:_,45:[w,_],60:m,61:w,95:_,96:l,126:l},k={38:c,92:a},M={"-5":E,"-4":E,"-3":E,33:y,38:c,42:r,60:[o,g],91:b,92:[p,a],93:v,95:r,96:d},A={null:[r,i.resolver]};t.contentInitial=x,t.disable={null:[]},t.document=T,t.flow=I,t.flowInitial=C,t.insideSpan=A,t.string=k,t.text=M},13745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17238),r=n(52928);t.tokenize=function(e){var t,n=e.attempt(this.parser.constructs.contentInitial,(function(t){if(null!==t)return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r(e,n,"linePrefix");e.consume(t)}),(function(t){return e.enter("paragraph"),o(t)}));return n;function o(n){var i=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=i),t=i,s(n)}function s(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):i(t)?(e.consume(t),e.exit("chunkText"),o):(e.consume(t),s)}}},14201:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17238),r=n(52928),o=n(66532),s={tokenize:function(e,t,n){return r(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}},a={tokenize:function(e,t,n){return r(e,e.lazy(this.parser.constructs.flow,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}};t.tokenize=function(e){var t,n,r,c=this,l=[],u=0,d={tokenize:function(e,i){var r=0;return t={},u;function u(i){return r<l.length?(c.containerState=l[r][1],e.attempt(l[r][0].continuation,d,h)(i)):n.currentConstruct&&n.currentConstruct.concrete?(t.flowContinue=!0,m(i)):(c.interrupt=n.currentConstruct&&n.currentConstruct.interruptible,c.containerState={},e.attempt(s,f,m)(i))}function d(e){return r++,c.containerState._closeFlow?f(e):u(e)}function h(t){return n.currentConstruct&&n.currentConstruct.lazy?(c.containerState={},e.attempt(s,f,e.attempt(a,f,e.check(o,f,p)))(t)):f(t)}function p(e){return r=l.length,t.lazy=!0,t.flowContinue=!0,m(e)}function f(e){return t.flowEnd=!0,m(e)}function m(e){return t.continued=r,c.interrupt=c.containerState=void 0,i(e)}},partial:!0};return h;function h(t){return u<l.length?(c.containerState=l[u][1],e.attempt(l[u][0].continuation,p,f)(t)):f(t)}function p(e){return u++,h(e)}function f(i){return t&&t.flowContinue?g(i):(c.interrupt=n&&n.currentConstruct&&n.currentConstruct.interruptible,c.containerState={},e.attempt(s,m,g)(i))}function m(e){return l.push([c.currentConstruct,c.containerState]),c.containerState=void 0,f(e)}function g(t){return null===t?(E(0,!0),void e.consume(t)):(n=n||c.parser.flow(c.now()),e.enter("chunkFlow",{contentType:"flow",previous:r,_tokenizer:n}),v(t))}function v(t){return null===t?(b(e.exit("chunkFlow")),g(t)):i(t)?(e.consume(t),b(e.exit("chunkFlow")),e.check(d,y)):(e.consume(t),v)}function y(e){return E(t.continued,t&&t.flowEnd),u=0,h(e)}function b(e){r&&(r.next=e),r=e,n.lazy=t&&t.lazy,n.defineSkip(e.start),n.write(c.sliceStream(e))}function E(t,i){var o=l.length;for(n&&i&&(n.write([null]),r=n=void 0);o-- >t;)c.containerState=l[o][1],l[o][0].exit.call(c,e);l.length=t}}},22871:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(64590),r=n(52928),o=n(66532);t.tokenize=function(e){var t=this,n=e.attempt(o,(function(i){if(null!==i)return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n;e.consume(i)}),e.attempt(this.parser.constructs.flowInitial,s,r(e,e.attempt(this.parser.constructs.flow,s,e.attempt(i,s)),"linePrefix")));return n;function s(i){if(null!==i)return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(i)}}},97082:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(99198),r=n(75923),o=c("text"),s=c("string"),a={resolveAll:l()};function c(e){return{tokenize:function(t){var n=this,i=this.parser.constructs[e],r=t.attempt(i,o,s);return o;function o(e){return c(e)?r(e):s(e)}function s(e){if(null!==e)return t.enter("data"),t.consume(e),a;t.consume(e)}function a(e){return c(e)?(t.exit("data"),r(e)):(t.consume(e),a)}function c(e){var t=i[e],r=-1;if(null===e)return!0;if(t)for(;++r<t.length;)if(!t[r].previous||t[r].previous.call(n,n.previous))return!0}},resolveAll:l("text"===e?u:void 0)}}function l(e){return function(t,n){for(var i,r=-1;++r<=t.length;)void 0===i?t[r]&&"data"===t[r][1].type&&(i=r,r++):t[r]&&"data"===t[r][1].type||(r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),r=i+2),i=void 0);return e?e(t,n):t}}function u(e,t){for(var n,o,s,a,c,l,u,d,h=-1;++h<=e.length;)if((h===e.length||"lineEnding"===e[h][1].type)&&"data"===e[h-1][1].type){for(o=e[h-1][1],a=(n=t.sliceStream(o)).length,c=-1,l=0,u=void 0;a--;)if("string"==typeof(s=n[a])){for(c=s.length;32===s.charCodeAt(c-1);)l++,c--;if(c)break;c=-1}else if(-2===s)u=!0,l++;else if(-1!==s){a++;break}l&&(d={type:h===e.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{line:o.end.line,column:o.end.column-l,offset:o.end.offset-l,_index:o.start._index+a,_bufferIndex:a?c:o.start._bufferIndex+c},end:r(o.end)},o.end=r(d.start),o.start.offset===o.end.offset?i(o,d):(e.splice(h,0,["enter",d,t],["exit",d,t]),h+=2)),h++}return e}t.resolver=a,t.string=s,t.text=o},32976:(e,t,n)=>{"use strict";var i=n(13745),r=n(14201),o=n(22871),s=n(97082),a=n(12952),c=n(21388),l=n(28180),u=n(36274);e.exports=function(e){var t={defined:[],constructs:a([u].concat(l((e||{}).extensions))),content:n(i),document:n(r),flow:n(o),string:n(s.string),text:n(s.text)};return t;function n(e){return function(n){return c(t,e,n)}}}},61242:(e,t,n)=>{"use strict";var i=n(84423);e.exports=function(e){for(;!i(e););return e}},30162:e=>{"use strict";var t=/[\0\t\n\r]/g;e.exports=function(){var e,n=!0,i=1,r="";return function(o,s,a){var c,l,u,d,h,p=[];for(o=r+o.toString(s),u=0,r="",n&&(65279===o.charCodeAt(0)&&u++,n=void 0);u<o.length;){if(t.lastIndex=u,d=(c=t.exec(o))?c.index:o.length,h=o.charCodeAt(d),!c){r=o.slice(u);break}if(10===h&&u===d&&e)p.push(-3),e=void 0;else if(e&&(p.push(-5),e=void 0),u<d&&(p.push(o.slice(u,d)),i+=d-u),0===h)p.push(65533),i++;else if(9===h)for(l=4*Math.ceil(i/4),p.push(-2);i++<l;)p.push(-1);else 10===h?(p.push(-4),i=1):(e=!0,i=1);u=d+1}return a&&(e&&p.push(-5),r&&p.push(r),p.push(null)),p}}},47542:(e,t,n)=>{"use strict";var i=n(78811),r=n(56808),o=n(19444),s=n(15644),a=n(58280),c=n(75923),l={name:"attention",tokenize:function(e,t){var n,i=o(this.previous);return function(t){return e.enter("attentionSequence"),n=t,r(t)};function r(s){var a,c,l,u;return s===n?(e.consume(s),r):(a=e.exit("attentionSequence"),l=!(c=o(s))||2===c&&i,u=!i||2===i&&c,a._open=42===n?l:l&&(i||!u),a._close=42===n?u:u&&(c||!l),t(s))}},resolveAll:function(e,t){for(var n,o,l,u,d,h,p,f,m=-1;++m<e.length;)if("enter"===e[m][0]&&"attentionSequence"===e[m][1].type&&e[m][1]._close)for(n=m;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[m][1]).charCodeAt(0)){if((e[n][1]._close||e[m][1]._open)&&(e[m][1].end.offset-e[m][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[m][1].end.offset-e[m][1].start.offset)%3))continue;u={type:(h=e[n][1].end.offset-e[n][1].start.offset>1&&e[m][1].end.offset-e[m][1].start.offset>1?2:1)>1?"strongSequence":"emphasisSequence",start:s(c(e[n][1].end),-h),end:c(e[n][1].end)},d={type:h>1?"strongSequence":"emphasisSequence",start:c(e[m][1].start),end:s(c(e[m][1].start),h)},l={type:h>1?"strongText":"emphasisText",start:c(e[n][1].end),end:c(e[m][1].start)},o={type:h>1?"strong":"emphasis",start:c(u.start),end:c(d.end)},e[n][1].end=c(u.start),e[m][1].start=c(d.end),p=[],e[n][1].end.offset-e[n][1].start.offset&&(p=i(p,[["enter",e[n][1],t],["exit",e[n][1],t]])),p=i(p,[["enter",o,t],["enter",u,t],["exit",u,t],["enter",l,t]]),p=i(p,a(t.parser.constructs.insideSpan.null,e.slice(n+1,m),t)),p=i(p,[["exit",l,t],["enter",d,t],["exit",d,t],["exit",o,t]]),e[m][1].end.offset-e[m][1].start.offset?(f=2,p=i(p,[["enter",e[m][1],t],["exit",e[m][1],t]])):f=0,r(e,n-1,m-n+3,p),m=n+p.length-f-2;break}for(m=-1;++m<e.length;)"attentionSequence"===e[m][1].type&&(e[m][1].type="data");return e}};e.exports=l},1349:(e,t,n)=>{"use strict";var i=n(76734),r=n(46712),o=n(13571),s=n(89696),a={name:"autolink",tokenize:function(e,t,n){var a=1;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),c};function c(t){return i(t)?(e.consume(t),l):o(t)?h(t):n(t)}function l(e){return 43===e||45===e||46===e||r(e)?u(e):h(e)}function u(t){return 58===t?(e.consume(t),d):(43===t||45===t||46===t||r(t))&&a++<32?(e.consume(t),u):h(t)}function d(t){return 62===t?(e.exit("autolinkProtocol"),g(t)):32===t||60===t||s(t)?n(t):(e.consume(t),d)}function h(t){return 64===t?(e.consume(t),a=0,p):o(t)?(e.consume(t),h):n(t)}function p(e){return r(e)?f(e):n(e)}function f(t){return 46===t?(e.consume(t),a=0,p):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",g(t)):m(t)}function m(t){return(45===t||r(t))&&a++<63?(e.consume(t),45===t?m:f):n(t)}function g(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}};e.exports=a},45485:(e,t,n)=>{"use strict";var i=n(73654),r=n(52928),o={name:"blockQuote",tokenize:function(e,t,n){var r=this;return function(t){return 62===t?(r.containerState.open||(e.enter("blockQuote",{_container:!0}),r.containerState.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),o):n(t)};function o(n){return i(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){return r(e,e.attempt(o,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}},exit:function(e){e.exit("blockQuote")}};e.exports=o},49653:(e,t,n)=>{"use strict";var i=n(83074),r={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return i(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};e.exports=r},36713:(e,t,n)=>{"use strict";var i=n(89435),r=n(46712),o=n(73977),s=n(56238);function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=a(i),l={name:"characterReference",tokenize:function(e,t,n){var i,a,l=this,u=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),d};function d(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),h):(e.enter("characterReferenceValue"),i=31,a=r,p(t))}function h(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=s,p):(e.enter("characterReferenceValue"),i=7,a=o,p(t))}function p(o){var s;return 59===o&&u?(s=e.exit("characterReferenceValue"),a!==r||c.default(l.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)):a(o)&&u++<i?(e.consume(o),p):n(o)}}};e.exports=l},46597:(e,t,n)=>{"use strict";var i=n(17238),r=n(88367),o=n(15096),s=n(52928),a={name:"codeFenced",tokenize:function(e,t,n){var a,c=this,l={tokenize:function(e,t,n){var r=0;return s(e,(function(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),o(t)}),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4);function o(t){return t===a?(e.consume(t),r++,o):r<d?n(t):(e.exit("codeFencedFenceSequence"),s(e,c,"whitespace")(t))}function c(r){return null===r||i(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0},u=o(this.events,"linePrefix"),d=0;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),a=t,h(t)};function h(t){return t===a?(e.consume(t),d++,h):(e.exit("codeFencedFenceSequence"),d<3?n(t):s(e,p,"whitespace")(t))}function p(t){return null===t||i(t)?v(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return null===t||r(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),s(e,m,"whitespace")(t)):96===t&&t===a?n(t):(e.consume(t),f)}function m(t){return null===t||i(t)?v(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(t))}function g(t){return null===t||i(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),v(t)):96===t&&t===a?n(t):(e.consume(t),g)}function v(n){return e.exit("codeFencedFence"),c.interrupt?t(n):y(n)}function y(t){return null===t?E(t):i(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.attempt(l,E,u?s(e,y,"linePrefix",u+1):y)):(e.enter("codeFlowValue"),b(t))}function b(t){return null===t||i(t)?(e.exit("codeFlowValue"),y(t)):(e.consume(t),b)}function E(n){return e.exit("codeFenced"),t(n)}},concrete:!0};e.exports=a},20431:(e,t,n)=>{"use strict";var i=n(17238),r=n(56808),o=n(15096),s=n(52928),a={name:"codeIndented",tokenize:function(e,t,n){return e.attempt(c,r,n);function r(n){return null===n?t(n):i(n)?e.attempt(c,r,t)(n):(e.enter("codeFlowValue"),o(n))}function o(t){return null===t||i(t)?(e.exit("codeFlowValue"),r(t)):(e.consume(t),o)}},resolve:function(e,t){var n={type:"codeIndented",start:e[0][1].start,end:e[e.length-1][1].end};return r(e,0,0,[["enter",n,t]]),r(e,e.length,0,[["exit",n,t]]),e}},c={tokenize:function(e,t,n){var r=this;return s(e,(function a(c){return i(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),s(e,a,"linePrefix",5)):o(r.events,"linePrefix")<4?n(c):t(c)}),"linePrefix",5)},partial:!0};e.exports=a},60026:(e,t,n)=>{"use strict";var i=n(17238),r={name:"codeText",tokenize:function(e,t,n){var r,o,s=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),s++,a):(e.exit("codeTextSequence"),c(t))}function c(t){return null===t?n(t):96===t?(o=e.enter("codeTextSequence"),r=0,u(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),c):i(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),c):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||i(t)?(e.exit("codeTextData"),c(t)):(e.consume(t),l)}function u(n){return 96===n?(e.consume(n),r++,u):r===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(o.type="codeTextData",l(n))}},resolve:function(e){var t,n,i=e.length-4,r=3;if(!("lineEnding"!==e[r][1].type&&"space"!==e[r][1].type||"lineEnding"!==e[i][1].type&&"space"!==e[i][1].type))for(t=r;++t<i;)if("codeTextData"===e[t][1].type){e[i][1].type=e[r][1].type="codeTextPadding",r+=2,i-=2;break}for(t=r-1,i++;++t<=i;)void 0===n?t!==i&&"lineEnding"!==e[t][1].type&&(n=t):t!==i&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),i-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};e.exports=r},64590:(e,t,n)=>{"use strict";var i=n(17238),r=n(15096),o=n(84423),s=n(52928),a={tokenize:function(e,t){var n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?o(t):i(t)?e.check(c,s,o)(t):(e.consume(t),r)}function o(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function s(t){return e.consume(t),e.exit("chunkContent"),n=n.next=e.enter("chunkContent",{contentType:"content",previous:n}),r}},resolve:function(e){return o(e),e},interruptible:!0,lazy:!0},c={tokenize:function(e,t,n){var o=this;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s(e,a,"linePrefix")};function a(s){return null===s||i(s)?n(s):o.parser.constructs.disable.null.indexOf("codeIndented")>-1||r(o.events,"linePrefix")<4?e.interrupt(o.parser.constructs.flow,n,t)(s):t(s)}},partial:!0};e.exports=a},93865:(e,t,n)=>{"use strict";var i=n(17238),r=n(88367),o=n(35478),s=n(38229),a=n(97154),c=n(52928),l=n(31056),u=n(59283),d={name:"definition",tokenize:function(e,t,n){var r,u=this;return function(t){return e.enter("definition"),a.call(u,e,d,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function d(t){return r=o(u.sliceSerialize(u.events[u.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),l(e,s(e,e.attempt(h,c(e,p,"whitespace"),c(e,p,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function p(o){return null===o||i(o)?(e.exit("definition"),u.parser.defined.indexOf(r)<0&&u.parser.defined.push(r),t(o)):n(o)}}},h={tokenize:function(e,t,n){return function(t){return r(t)?l(e,o)(t):n(t)};function o(t){return 34===t||39===t||40===t?u(e,c(e,s,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function s(e){return null===e||i(e)?t(e):n(e)}},partial:!0};e.exports=d},38229:(e,t,n)=>{"use strict";var i=n(89696),r=n(88367),o=n(17238);e.exports=function(e,t,n,s,a,c,l,u,d){var h=d||1/0,p=0;return function(t){return 60===t?(e.enter(s),e.enter(a),e.enter(c),e.consume(t),e.exit(c),f):i(t)||41===t?n(t):(e.enter(s),e.enter(l),e.enter(u),e.enter("chunkString",{contentType:"string"}),v(t))};function f(n){return 62===n?(e.enter(c),e.consume(n),e.exit(c),e.exit(a),e.exit(s),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),m(n))}function m(t){return 62===t?(e.exit("chunkString"),e.exit(u),f(t)):null===t||60===t||o(t)?n(t):(e.consume(t),92===t?g:m)}function g(t){return 60===t||62===t||92===t?(e.consume(t),m):m(t)}function v(o){return 40===o?++p>h?n(o):(e.consume(o),v):41===o?p--?(e.consume(o),v):(e.exit("chunkString"),e.exit(u),e.exit(l),e.exit(s),t(o)):null===o||r(o)?p?n(o):(e.exit("chunkString"),e.exit(u),e.exit(l),e.exit(s),t(o)):i(o)?n(o):(e.consume(o),92===o?y:v)}function y(t){return 40===t||41===t||92===t?(e.consume(t),v):v(t)}}},97154:(e,t,n)=>{"use strict";var i=n(17238),r=n(73654);e.exports=function(e,t,n,o,s,a){var c,l=this,u=0;return function(t){return e.enter(o),e.enter(s),e.consume(t),e.exit(s),e.enter(a),d};function d(r){return null===r||91===r||93===r&&!c||94===r&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs||u>999?n(r):93===r?(e.exit(a),e.enter(s),e.consume(r),e.exit(s),e.exit(o),t):i(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(r))}function h(t){return null===t||91===t||93===t||i(t)||u++>999?(e.exit("chunkString"),d(t)):(e.consume(t),c=c||!r(t),92===t?p:h)}function p(t){return 91===t||92===t||93===t?(e.consume(t),u++,h):h(t)}}},52928:(e,t,n)=>{"use strict";var i=n(73654);e.exports=function(e,t,n,r){var o=r?r-1:1/0,s=0;return function(r){return i(r)?(e.enter(n),a(r)):t(r)};function a(r){return i(r)&&s++<o?(e.consume(r),a):(e.exit(n),t(r))}}},59283:(e,t,n)=>{"use strict";var i=n(17238),r=n(52928);e.exports=function(e,t,n,o,s,a){var c;return function(t){return e.enter(o),e.enter(s),e.consume(t),e.exit(s),c=40===t?41:t,l};function l(n){return n===c?(e.enter(s),e.consume(n),e.exit(s),e.exit(o),t):(e.enter(a),u(n))}function u(t){return t===c?(e.exit(a),l(c)):null===t?n(t):i(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(t))}function d(t){return t===c||null===t||i(t)?(e.exit("chunkString"),u(t)):(e.consume(t),92===t?h:d)}function h(t){return t===c||92===t?(e.consume(t),d):d(t)}}},31056:(e,t,n)=>{"use strict";var i=n(17238),r=n(73654),o=n(52928);e.exports=function(e,t){var n;return function s(a){return i(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,s):r(a)?o(e,s,n?"linePrefix":"lineSuffix")(a):t(a)}}},65694:(e,t,n)=>{"use strict";var i=n(17238),r={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),r};function r(r){return i(r)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(r)):n(r)}}};e.exports=r},596:(e,t,n)=>{"use strict";var i=n(17238),r=n(88367),o=n(73654),s=n(56808),a=n(52928),c={name:"headingAtx",tokenize:function(e,t,n){var s=this,c=0;return function(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),l(t)};function l(i){return 35===i&&c++<6?(e.consume(i),l):null===i||r(i)?(e.exit("atxHeadingSequence"),s.interrupt?t(i):u(i)):n(i)}function u(n){return 35===n?(e.enter("atxHeadingSequence"),d(n)):null===n||i(n)?(e.exit("atxHeading"),t(n)):o(n)?a(e,u,"whitespace")(n):(e.enter("atxHeadingText"),h(n))}function d(t){return 35===t?(e.consume(t),d):(e.exit("atxHeadingSequence"),u(t))}function h(t){return null===t||35===t||r(t)?(e.exit("atxHeadingText"),u(t)):(e.consume(t),h)}},resolve:function(e,t){var n,i,r=e.length-2,o=3;return"whitespace"===e[o][1].type&&(o+=2),r-2>o&&"whitespace"===e[r][1].type&&(r-=2),"atxHeadingSequence"===e[r][1].type&&(o===r-1||r-4>o&&"whitespace"===e[r-2][1].type)&&(r-=o+1===r?2:4),r>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[r][1].end},i={type:"chunkText",start:e[o][1].start,end:e[r][1].end,contentType:"text"},s(e,o,r-o+1,[["enter",n,t],["enter",i,t],["exit",i,t],["exit",n,t]])),e}};e.exports=c},76872:(e,t,n)=>{"use strict";var i=n(76734),r=n(46712),o=n(17238),s=n(88367),a=n(73654),c=n(93267),l=n(57139),u=n(16871),d=n(66532),h={name:"htmlFlow",tokenize:function(e,t,n){var d,h,f,m,g,v=this;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),y};function y(r){return 33===r?(e.consume(r),b):47===r?(e.consume(r),w):63===r?(e.consume(r),d=3,v.interrupt?t:H):i(r)?(e.consume(r),f=c(r),h=!0,_):n(r)}function b(r){return 45===r?(e.consume(r),d=2,E):91===r?(e.consume(r),d=5,f="CDATA[",m=0,S):i(r)?(e.consume(r),d=4,v.interrupt?t:H):n(r)}function E(i){return 45===i?(e.consume(i),v.interrupt?t:H):n(i)}function S(i){return i===f.charCodeAt(m++)?(e.consume(i),m===f.length?v.interrupt?t:N:S):n(i)}function w(t){return i(t)?(e.consume(t),f=c(t),_):n(t)}function _(i){return null===i||47===i||62===i||s(i)?47!==i&&h&&u.indexOf(f.toLowerCase())>-1?(d=1,v.interrupt?t(i):N(i)):l.indexOf(f.toLowerCase())>-1?(d=6,47===i?(e.consume(i),T):v.interrupt?t(i):N(i)):(d=7,v.interrupt?n(i):h?C(i):x(i)):45===i||r(i)?(e.consume(i),f+=c(i),_):n(i)}function T(i){return 62===i?(e.consume(i),v.interrupt?t:N):n(i)}function x(t){return a(t)?(e.consume(t),x):L(t)}function C(t){return 47===t?(e.consume(t),L):58===t||95===t||i(t)?(e.consume(t),I):a(t)?(e.consume(t),C):L(t)}function I(t){return 45===t||46===t||58===t||95===t||r(t)?(e.consume(t),I):k(t)}function k(t){return 61===t?(e.consume(t),M):a(t)?(e.consume(t),k):C(t)}function M(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),g=t,A):a(t)?(e.consume(t),M):(g=void 0,O(t))}function A(t){return t===g?(e.consume(t),R):null===t||o(t)?n(t):(e.consume(t),A)}function O(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||s(t)?k(t):(e.consume(t),O)}function R(e){return 47===e||62===e||a(e)?C(e):n(e)}function L(t){return 62===t?(e.consume(t),D):n(t)}function D(t){return a(t)?(e.consume(t),D):null===t||o(t)?N(t):n(t)}function N(t){return 45===t&&2===d?(e.consume(t),U):60===t&&1===d?(e.consume(t),B):62===t&&4===d?(e.consume(t),K):63===t&&3===d?(e.consume(t),H):93===t&&5===d?(e.consume(t),j):!o(t)||6!==d&&7!==d?null===t||o(t)?P(t):(e.consume(t),N):e.check(p,K,P)(t)}function P(t){return e.exit("htmlFlowData"),$(t)}function $(t){return null===t?q(t):o(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),$):(e.enter("htmlFlowData"),N(t))}function U(t){return 45===t?(e.consume(t),H):N(t)}function B(t){return 47===t?(e.consume(t),f="",F):N(t)}function F(t){return 62===t&&u.indexOf(f.toLowerCase())>-1?(e.consume(t),K):i(t)&&f.length<8?(e.consume(t),f+=c(t),F):N(t)}function j(t){return 93===t?(e.consume(t),H):N(t)}function H(t){return 62===t?(e.consume(t),K):N(t)}function K(t){return null===t||o(t)?(e.exit("htmlFlowData"),q(t)):(e.consume(t),K)}function q(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){for(var t=e.length;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e},concrete:!0},p={tokenize:function(e,t,n){return function(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(d,t,n)}},partial:!0};e.exports=h},28911:(e,t,n)=>{"use strict";var i=n(76734),r=n(46712),o=n(17238),s=n(88367),a=n(73654),c=n(52928),l={name:"htmlText",tokenize:function(e,t,n){var l,u,d,h,p=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),f};function f(t){return 33===t?(e.consume(t),m):47===t?(e.consume(t),k):63===t?(e.consume(t),C):i(t)?(e.consume(t),O):n(t)}function m(t){return 45===t?(e.consume(t),g):91===t?(e.consume(t),u="CDATA[",d=0,S):i(t)?(e.consume(t),x):n(t)}function g(t){return 45===t?(e.consume(t),v):n(t)}function v(t){return null===t||62===t?n(t):45===t?(e.consume(t),y):b(t)}function y(e){return null===e||62===e?n(e):b(e)}function b(t){return null===t?n(t):45===t?(e.consume(t),E):o(t)?(h=b,B(t)):(e.consume(t),b)}function E(t){return 45===t?(e.consume(t),j):b(t)}function S(t){return t===u.charCodeAt(d++)?(e.consume(t),d===u.length?w:S):n(t)}function w(t){return null===t?n(t):93===t?(e.consume(t),_):o(t)?(h=w,B(t)):(e.consume(t),w)}function _(t){return 93===t?(e.consume(t),T):w(t)}function T(t){return 62===t?j(t):93===t?(e.consume(t),T):w(t)}function x(t){return null===t||62===t?j(t):o(t)?(h=x,B(t)):(e.consume(t),x)}function C(t){return null===t?n(t):63===t?(e.consume(t),I):o(t)?(h=C,B(t)):(e.consume(t),C)}function I(e){return 62===e?j(e):C(e)}function k(t){return i(t)?(e.consume(t),M):n(t)}function M(t){return 45===t||r(t)?(e.consume(t),M):A(t)}function A(t){return o(t)?(h=A,B(t)):a(t)?(e.consume(t),A):j(t)}function O(t){return 45===t||r(t)?(e.consume(t),O):47===t||62===t||s(t)?R(t):n(t)}function R(t){return 47===t?(e.consume(t),j):58===t||95===t||i(t)?(e.consume(t),L):o(t)?(h=R,B(t)):a(t)?(e.consume(t),R):j(t)}function L(t){return 45===t||46===t||58===t||95===t||r(t)?(e.consume(t),L):D(t)}function D(t){return 61===t?(e.consume(t),N):o(t)?(h=D,B(t)):a(t)?(e.consume(t),D):R(t)}function N(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,P):o(t)?(h=N,B(t)):a(t)?(e.consume(t),N):(e.consume(t),l=void 0,U)}function P(t){return t===l?(e.consume(t),$):null===t?n(t):o(t)?(h=P,B(t)):(e.consume(t),P)}function $(e){return 62===e||47===e||s(e)?R(e):n(e)}function U(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||s(t)?R(t):(e.consume(t),U)}function B(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),c(e,F,"linePrefix",p.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}function F(t){return e.enter("htmlTextData"),h(t)}function j(i){return 62===i?(e.consume(i),e.exit("htmlTextData"),e.exit("htmlText"),t):n(i)}}};e.exports=l},31294:(e,t,n)=>{"use strict";var i=n(88367),r=n(78811),o=n(56808),s=n(35478),a=n(58280),c=n(75923),l=n(38229),u=n(97154),d=n(59283),h=n(31056),p={name:"labelEnd",tokenize:function(e,t,n){for(var i,r,o=this,a=o.events.length;a--;)if(("labelImage"===o.events[a][1].type||"labelLink"===o.events[a][1].type)&&!o.events[a][1]._balanced){i=o.events[a][1];break}return function(t){return i?i._inactive?l(t):(r=o.parser.defined.indexOf(s(o.sliceSerialize({start:i.end,end:o.now()})))>-1,e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),c):n(t)};function c(n){return 40===n?e.attempt(f,t,r?t:l)(n):91===n?e.attempt(m,t,r?e.attempt(g,t,l):l)(n):r?t(n):l(n)}function l(e){return i._balanced=!0,n(e)}},resolveTo:function(e,t){for(var n,i,s,l,u,d,h,p=e.length,f=0;p--;)if(l=e[p][1],u){if("link"===l.type||"labelLink"===l.type&&l._inactive)break;"enter"===e[p][0]&&"labelLink"===l.type&&(l._inactive=!0)}else if(d){if("enter"===e[p][0]&&("labelImage"===l.type||"labelLink"===l.type)&&!l._balanced&&(u=p,"labelLink"!==l.type)){f=2;break}}else"labelEnd"===l.type&&(d=p);return n={type:"labelLink"===e[u][1].type?"link":"image",start:c(e[u][1].start),end:c(e[e.length-1][1].end)},i={type:"label",start:c(e[u][1].start),end:c(e[d][1].end)},s={type:"labelText",start:c(e[u+f+2][1].end),end:c(e[d-2][1].start)},h=r(h=[["enter",n,t],["enter",i,t]],e.slice(u+1,u+f+3)),h=r(h,[["enter",s,t]]),h=r(h,a(t.parser.constructs.insideSpan.null,e.slice(u+f+4,d-3),t)),h=r(h,[["exit",s,t],e[d-2],e[d-1],["exit",i,t]]),h=r(h,e.slice(d+1)),h=r(h,[["exit",n,t]]),o(e,u,e.length,h),e},resolveAll:function(e){for(var t,n=-1;++n<e.length;)(t=e[n][1])._used||"labelImage"!==t.type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}},f={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),h(e,r)};function r(t){return 41===t?a(t):l(e,o,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",3)(t)}function o(t){return i(t)?h(e,s)(t):a(t)}function s(t){return 34===t||39===t||40===t?d(e,h(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):a(t)}function a(i){return 41===i?(e.enter("resourceMarker"),e.consume(i),e.exit("resourceMarker"),e.exit("resource"),t):n(i)}}},m={tokenize:function(e,t,n){var i=this;return function(t){return u.call(i,e,r,n,"reference","referenceMarker","referenceString")(t)};function r(e){return i.parser.defined.indexOf(s(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))<0?n(e):t(e)}}},g={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),i};function i(i){return 93===i?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}};e.exports=p},36215:(e,t,n)=>{"use strict";var i={name:"labelStartImage",tokenize:function(e,t,n){var i=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),r};function r(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in i.parser.constructs?n(e):t(e)}},resolveAll:n(31294).resolveAll};e.exports=i},60534:(e,t,n)=>{"use strict";var i={name:"labelStartLink",tokenize:function(e,t,n){var i=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),r};function r(e){return 94===e&&"_hiddenFootnoteSupport"in i.parser.constructs?n(e):t(e)}},resolveAll:n(31294).resolveAll};e.exports=i},92607:(e,t,n)=>{"use strict";var i=n(52928),r={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),i(e,t,"linePrefix")}}};e.exports=r},46931:(e,t,n)=>{"use strict";var i=n(73977),r=n(73654),o=n(15096),s=n(18892),a=n(52928),c=n(66532),l=n(37039),u={name:"list",tokenize:function(e,t,n){var a=this,u=o(a.events,"linePrefix"),h=0;return function(t){var r=a.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===r?!a.containerState.marker||t===a.containerState.marker:i(t)){if(a.containerState.type||(a.containerState.type=r,e.enter(r,{_container:!0})),"listUnordered"===r)return e.enter("listItemPrefix"),42===t||45===t?e.check(l,n,f)(t):f(t);if(!a.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),p(t)}return n(t)};function p(t){return i(t)&&++h<10?(e.consume(t),p):(!a.interrupt||h<2)&&(a.containerState.marker?t===a.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),f(t)):n(t)}function f(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||t,e.check(c,a.interrupt?n:m,e.attempt(d,v,g))}function m(e){return a.containerState.initialBlankLine=!0,u++,v(e)}function g(t){return r(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),v):n(t)}function v(n){return a.containerState.size=u+s(a.sliceStream(e.exit("listItemPrefix"))),t(n)}},continuation:{tokenize:function(e,t,n){var i=this;return i.containerState._closeFlow=void 0,e.check(c,(function(n){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,a(e,t,"listItemIndent",i.containerState.size+1)(n)}),(function(n){return i.containerState.furtherBlankLines||!r(n)?(i.containerState.furtherBlankLines=i.containerState.initialBlankLine=void 0,o(n)):(i.containerState.furtherBlankLines=i.containerState.initialBlankLine=void 0,e.attempt(h,t,o)(n))}));function o(r){return i.containerState._closeFlow=!0,i.interrupt=void 0,a(e,e.attempt(u,t,n),"linePrefix",i.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)(r)}}},exit:function(e){e.exit(this.containerState.type)}},d={tokenize:function(e,t,n){var i=this;return a(e,(function(e){return r(e)||!o(i.events,"listItemPrefixWhitespace")?n(e):t(e)}),"listItemPrefixWhitespace",i.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:5)},partial:!0},h={tokenize:function(e,t,n){var i=this;return a(e,(function(e){return o(i.events,"listItemIndent")===i.containerState.size?t(e):n(e)}),"listItemIndent",i.containerState.size+1)},partial:!0};e.exports=u},66532:(e,t,n)=>{"use strict";var i=n(17238),r=n(52928),o={tokenize:function(e,t,n){return r(e,(function(e){return null===e||i(e)?t(e):n(e)}),"linePrefix")},partial:!0};e.exports=o},15874:(e,t,n)=>{"use strict";var i=n(17238),r=n(75923),o=n(52928),s={name:"setextUnderline",tokenize:function(e,t,n){for(var r,s,a=this,c=a.events.length;c--;)if("lineEnding"!==a.events[c][1].type&&"linePrefix"!==a.events[c][1].type&&"content"!==a.events[c][1].type){s="paragraph"===a.events[c][1].type;break}return function(t){return a.lazy||!a.interrupt&&!s?n(t):(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),r=t,l(t))};function l(t){return t===r?(e.consume(t),l):(e.exit("setextHeadingLineSequence"),o(e,u,"lineSuffix")(t))}function u(r){return null===r||i(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){for(var n,i,o,s,a=e.length;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(i=a)}else"content"===e[a][1].type&&e.splice(a,1),o||"definition"!==e[a][1].type||(o=a);return s={type:"setextHeading",start:r(e[i][1].start),end:r(e[e.length-1][1].end)},e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",s,t]),e.splice(o+1,0,["exit",e[n][1],t]),e[n][1].end=r(e[o][1].end)):e[n][1]=s,e.push(["exit",s,t]),e}};e.exports=s},37039:(e,t,n)=>{"use strict";var i=n(17238),r=n(73654),o=n(52928),s={name:"thematicBreak",tokenize:function(e,t,n){var s,a=0;return function(t){return e.enter("thematicBreak"),s=t,c(t)};function c(u){return u===s?(e.enter("thematicBreakSequence"),l(u)):r(u)?o(e,c,"whitespace")(u):a<3||null!==u&&!i(u)?n(u):(e.exit("thematicBreak"),t(u))}function l(t){return t===s?(e.consume(t),a++,l):(e.exit("thematicBreakSequence"),c(t))}}};e.exports=s},78811:(e,t,n)=>{"use strict";var i=n(56808);e.exports=function(e,t){return e.length?(i(e,e.length,0,t),e):t}},56808:(e,t,n)=>{"use strict";var i=n(21362);e.exports=function(e,t,n,r){var o,s=e.length,a=0;if(t=t<0?-t>s?0:s+t:t>s?s:t,n=n>0?n:0,r.length<1e4)(o=Array.from(r)).unshift(t,n),i.apply(e,o);else for(n&&i.apply(e,[t,n]);a<r.length;)(o=r.slice(a,a+1e4)).unshift(t,0),i.apply(e,o),a+=1e4,t+=1e4}},19444:(e,t,n)=>{"use strict";var i=n(88367),r=n(36996),o=n(10395);e.exports=function(e){return null===e||i(e)||o(e)?1:r(e)?2:void 0}},12952:(e,t,n)=>{"use strict";var i=n(46706),r=n(56808),o=n(28180);function s(e,t){var n,r,s,c;for(n in t)for(c in r=i.call(e,n)?e[n]:e[n]={},s=t[n])r[c]=a(o(s[c]),i.call(r,c)?r[c]:[])}function a(e,t){for(var n=-1,i=[];++n<e.length;)("after"===e[n].add?t:i).push(e[n]);return r(t,0,0,i),t}e.exports=function(e){for(var t={},n=-1;++n<e.length;)s(t,e[n]);return t}},21388:(e,t,n)=>{"use strict";var i=n(99198),r=n(17238),o=n(78811),s=n(56808),a=n(28180),c=n(58280),l=n(23082),u=n(75923),d=n(12774);e.exports=function(e,t,n){var h=n?u(n):{line:1,column:1,offset:0},p={},f=[],m=[],g=[],v={consume:function(e){r(e)?(h.line++,h.column=1,h.offset+=-3===e?2:1,C()):-1!==e&&(h.column++,h.offset++),h._bufferIndex<0?h._index++:(h._bufferIndex++,h._bufferIndex===m[h._index].length&&(h._bufferIndex=-1,h._index++)),y.previous=e},enter:function(e,t){var n=t||{};return n.type=e,n.start=S(),y.events.push(["enter",n,y]),g.push(n),n},exit:function(e){var t=g.pop();return t.end=S(),y.events.push(["exit",t,y]),t},attempt:T((function(e,t){x(e,t.from)})),check:T(_),interrupt:T(_,{interrupt:!0}),lazy:T(_,{lazy:!0})},y={previous:null,events:[],parser:e,sliceStream:E,sliceSerialize:function(e){return l(E(e))},now:S,defineSkip:function(e){p[e.line]=e.column,C()},write:function(e){return m=o(m,e),function(){for(var e,t;h._index<m.length;)if("string"==typeof(t=m[h._index]))for(e=h._index,h._bufferIndex<0&&(h._bufferIndex=0);h._index===e&&h._bufferIndex<t.length;)w(t.charCodeAt(h._bufferIndex));else w(t)}(),null!==m[m.length-1]?[]:(x(t,0),y.events=c(f,y.events,y),y.events)}},b=t.tokenize.call(y,v);return t.resolveAll&&f.push(t),h._index=0,h._bufferIndex=-1,y;function E(e){return d(m,e)}function S(){return u(h)}function w(e){b=b(e)}function _(e,t){t.restore()}function T(e,t){return function(n,r,o){var s,c,l,u;return n.tokenize||"length"in n?d(a(n)):function(e){return e in n||null in n?d(n.null?a(n[e]).concat(a(n.null)):n[e])(e):o(e)};function d(e){return s=e,p(e[c=0])}function p(e){return function(n){var r,o,s,a,c;return r=S(),o=y.previous,s=y.currentConstruct,a=y.events.length,c=Array.from(g),u={restore:function(){h=r,y.previous=o,y.currentConstruct=s,y.events.length=a,g=c,C()},from:a},l=e,e.partial||(y.currentConstruct=e),e.name&&y.parser.constructs.disable.null.indexOf(e.name)>-1?m():e.tokenize.call(t?i({},y,t):y,v,f,m)(n)}}function f(t){return e(l,u),r}function m(e){return u.restore(),++c<s.length?p(s[c]):o}}}function x(e,t){e.resolveAll&&f.indexOf(e)<0&&f.push(e),e.resolve&&s(y.events,t,y.events.length-t,e.resolve(y.events.slice(t),y)),e.resolveTo&&(y.events=e.resolveTo(y.events,y))}function C(){h.line in p&&h.column<2&&(h.column=p[h.line],h.offset+=p[h.line]-1)}}},28180:e=>{"use strict";e.exports=function(e){return null==e?[]:"length"in e?e:[e]}},15644:e=>{"use strict";e.exports=function(e,t){return e.column+=t,e.offset+=t,e._bufferIndex+=t,e}},35478:e=>{"use strict";e.exports=function(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}},15096:(e,t,n)=>{"use strict";var i=n(18892);e.exports=function(e,t){var n=e[e.length-1];return n&&n[1].type===t?i(n[2].sliceStream(n[1])):0}},2841:(e,t,n)=>{"use strict";var i=n(93267);e.exports=function(e){return function(t){return e.test(i(t))}}},58280:e=>{"use strict";e.exports=function(e,t,n){for(var i,r=[],o=-1;++o<e.length;)(i=e[o].resolveAll)&&r.indexOf(i)<0&&(t=i(t,n),r.push(i));return t}},10596:(e,t,n)=>{"use strict";var i=n(93267);e.exports=function(e,t){var n=parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535==(65535&n)||65534==(65535&n)||n>1114111?"":i(n)}},23082:(e,t,n)=>{"use strict";var i=n(93267);e.exports=function(e){for(var t,n,r,o=-1,s=[];++o<e.length;){if("string"==typeof(t=e[o]))n=t;else if(-5===t)n="\r";else if(-4===t)n="\n";else if(-3===t)n="\r\n";else if(-2===t)n="\t";else if(-1===t){if(r)continue;n=" "}else n=i(t);r=-2===t,s.push(n)}return s.join("")}},75923:(e,t,n)=>{"use strict";var i=n(99198);e.exports=function(e){return i({},e)}},18892:e=>{"use strict";e.exports=function(e){for(var t=-1,n=0;++t<e.length;)n+="string"==typeof e[t]?e[t].length:1;return n}},12774:e=>{"use strict";e.exports=function(e,t){var n,i=t.start._index,r=t.start._bufferIndex,o=t.end._index,s=t.end._bufferIndex;return i===o?n=[e[i].slice(r,s)]:(n=e.slice(i,o),r>-1&&(n[0]=n[0].slice(r)),s>0&&n.push(e[o].slice(0,s))),n}},84423:(e,t,n)=>{"use strict";var i=n(99198),r=n(56808),o=n(75923);function s(e,t){for(var n,i,o,s,a,c,l=e[t][1],u=e[t][2],d=t-1,h=[],p=l._tokenizer||u.parser[l.contentType](l.start),f=p.events,m=[],g={};l;){for(;e[++d][1]!==l;);h.push(d),l._tokenizer||(n=u.sliceStream(l),l.next||n.push(null),i&&p.defineSkip(l.start),l.isInFirstContentOfListItem&&(p._gfmTasklistFirstContentOfListItem=!0),p.write(n),l.isInFirstContentOfListItem&&(p._gfmTasklistFirstContentOfListItem=void 0)),i=l,l=l.next}for(l=i,o=f.length;o--;)"enter"===f[o][0]?s=!0:s&&f[o][1].type===f[o-1][1].type&&f[o][1].start.line!==f[o][1].end.line&&(v(f.slice(o+1,a)),l._tokenizer=l.next=void 0,l=l.previous,a=o+1);for(p.events=l._tokenizer=l.next=void 0,v(f.slice(0,a)),o=-1,c=0;++o<m.length;)g[c+m[o][0]]=c+m[o][1],c+=m[o][1]-m[o][0]-1;return g;function v(t){var n=h.pop();m.unshift([n,n+t.length-1]),r(e,n,2,t)}}e.exports=function(e){for(var t,n,a,c,l,u,d,h={},p=-1;++p<e.length;){for(;p in h;)p=h[p];if(t=e[p],p&&"chunkFlow"===t[1].type&&"listItemPrefix"===e[p-1][1].type&&((a=0)<(u=t[1]._tokenizer.events).length&&"lineEndingBlank"===u[a][1].type&&(a+=2),a<u.length&&"content"===u[a][1].type))for(;++a<u.length&&"content"!==u[a][1].type;)"chunkText"===u[a][1].type&&(u[a][1].isInFirstContentOfListItem=!0,a++);if("enter"===t[0])t[1].contentType&&(i(h,s(e,p)),p=h[p],d=!0);else if(t[1]._container||t[1]._movePreviousLineEndings){for(a=p,n=void 0;a--&&("lineEnding"===(c=e[a])[1].type||"lineEndingBlank"===c[1].type);)"enter"===c[0]&&(n&&(e[n][1].type="lineEndingBlank"),c[1].type="lineEnding",n=a);n&&(t[1].end=o(e[n][1].start),(l=e.slice(n,p)).unshift(t),r(e,n,p-n+1,l))}}return!d}},63047:(e,t,n)=>{var i=n(13550),r=n(29931);function o(e){this.rand=e||new r.Rand}e.exports=o,o.create=function(e){return new o(e)},o.prototype._randbelow=function(e){var t=e.bitLength(),n=Math.ceil(t/8);do{var r=new i(this.rand.generate(n))}while(r.cmp(e)>=0);return r},o.prototype._randrange=function(e,t){var n=t.sub(e);return e.add(this._randbelow(n))},o.prototype.test=function(e,t,n){var r=e.bitLength(),o=i.mont(e),s=new i(1).toRed(o);t||(t=Math.max(1,r/48|0));for(var a=e.subn(1),c=0;!a.testn(c);c++);for(var l=e.shrn(c),u=a.toRed(o);t>0;t--){var d=this._randrange(new i(2),a);n&&n(d);var h=d.toRed(o).redPow(l);if(0!==h.cmp(s)&&0!==h.cmp(u)){for(var p=1;p<c;p++){if(0===(h=h.redSqr()).cmp(s))return!1;if(0===h.cmp(u))break}if(p===c)return!1}}return!0},o.prototype.getDivisor=function(e,t){var n=e.bitLength(),r=i.mont(e),o=new i(1).toRed(r);t||(t=Math.max(1,n/48|0));for(var s=e.subn(1),a=0;!s.testn(a);a++);for(var c=e.shrn(a),l=s.toRed(r);t>0;t--){var u=this._randrange(new i(2),s),d=e.gcd(u);if(0!==d.cmpn(1))return d;var h=u.toRed(r).redPow(c);if(0!==h.cmp(o)&&0!==h.cmp(l)){for(var p=1;p<a;p++){if(0===(h=h.redSqr()).cmp(o))return h.fromRed().subn(1).gcd(e);if(0===h.cmp(l))break}if(p===a)return(h=h.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},80983:(e,t,n)=>{"use strict";var i,r,o,s=n(58240),a=n(26470).extname,c=/^\s*([^;\s]*)(?:;|\s|$)/,l=/^text\//i;function u(e){if(!e||"string"!=typeof e)return!1;var t=c.exec(e),n=t&&s[t[1].toLowerCase()];return n&&n.charset?n.charset:!(!t||!l.test(t[1]))&&"UTF-8"}t.charset=u,t.charsets={lookup:u},t.contentType=function(e){if(!e||"string"!=typeof e)return!1;var n=-1===e.indexOf("/")?t.lookup(e):e;if(!n)return!1;if(-1===n.indexOf("charset")){var i=t.charset(n);i&&(n+="; charset="+i.toLowerCase())}return n},t.extension=function(e){if(!e||"string"!=typeof e)return!1;var n=c.exec(e),i=n&&t.extensions[n[1].toLowerCase()];return!(!i||!i.length)&&i[0]},t.extensions=Object.create(null),t.lookup=function(e){if(!e||"string"!=typeof e)return!1;var n=a("x."+e).toLowerCase().substr(1);return n&&t.types[n]||!1},t.types=Object.create(null),i=t.extensions,r=t.types,o=["nginx","apache",void 0,"iana"],Object.keys(s).forEach((function(e){var t=s[e],n=t.extensions;if(n&&n.length){i[e]=n;for(var a=0;a<n.length;a++){var c=n[a];if(r[c]){var l=o.indexOf(s[r[c]].source),u=o.indexOf(t.source);if("application/octet-stream"!==r[c]&&(l>u||l===u&&"application/"===r[c].substr(0,12)))continue}r[c]=e}}}))},58240:(e,t,n)=>{e.exports=n(12590)},45213:()=>{},31037:()=>{},79746:e=>{function t(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},34504:(e,t)=>{"use strict";var n=t;function i(e){return 1===e.length?"0"+e:e}function r(e){for(var t="",n=0;n<e.length;n++)t+=i(e[n].toString(16));return t}n.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(var i=0;i<e.length;i++)n[i]=0|e[i];return n}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16));else for(i=0;i<e.length;i++){var r=e.charCodeAt(i),o=r>>8,s=255&r;o?n.push(o,s):n.push(s)}return n},n.zero2=i,n.toHex=r,n.encode=function(e,t){return"hex"===t?r(e):e}},42693:(e,t,n)=>{"use strict";const i=n(99353),r=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class o extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const s=(e,t)=>new Promise(((n,s)=>{t={onFailedAttempt:()=>{},retries:10,...t};const a=i.operation(t);a.attempt((async i=>{try{n(await e(i))}catch(e){if(!(e instanceof Error))return void s(new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`));if(e instanceof o)a.stop(),s(e.originalError);else if(e instanceof TypeError&&(c=e.message,!r.includes(c)))a.stop(),s(e);else{((e,t,n)=>{const i=n.retries-(t-1);e.attemptNumber=t,e.retriesLeft=i})(e,i,t);try{await t.onFailedAttempt(e)}catch(e){return void s(e)}a.retry(e)||s(a.mainError())}}var c}))}));e.exports=s,e.exports.default=s,e.exports.AbortError=o},55161:function(e,t,n){var i=n(34155);e.exports=function(){"use strict";var e=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},t=m,n=c,r=function(e){return l(c(e))},o=l,s=f,a=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function c(e){for(var t,n=[],i=0,r=0,o="";null!=(t=a.exec(e));){var s=t[0],c=t[1],l=t.index;if(o+=e.slice(r,l),r=l+s.length,c)o+=c[1];else{o&&(n.push(o),o="");var u=t[2],h=t[3],p=t[4],f=t[5],m=t[6],g=t[7],v="+"===m||"*"===m,y="?"===m||"*"===m,b=u||"/",E=p||f||(g?".*":"[^"+b+"]+?");n.push({name:h||i++,prefix:u||"",delimiter:b,optional:y,repeat:v,pattern:d(E)})}}return r<e.length&&(o+=e.substr(r)),o&&n.push(o),n}function l(t){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"==typeof t[i]&&(n[i]=new RegExp("^"+t[i].pattern+"$"));return function(i){for(var r="",o=i||{},s=0;s<t.length;s++){var a=t[s];if("string"!=typeof a){var c,l=o[a.name];if(null==l){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(e(l)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+l+'"');if(0===l.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var u=0;u<l.length;u++){if(c=encodeURIComponent(l[u]),!n[s].test(c))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+c+'"');r+=(0===u?a.prefix:a.delimiter)+c}}else{if(c=encodeURIComponent(l),!n[s].test(c))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+c+'"');r+=a.prefix+c}}else r+=a}return r}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function d(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function h(e,t){return e.keys=t,e}function p(e){return e.sensitive?"":"i"}function f(e,t){for(var n=(t=t||{}).strict,i=!1!==t.end,r="",o=e[e.length-1],s="string"==typeof o&&/\/$/.test(o),a=0;a<e.length;a++){var c=e[a];if("string"==typeof c)r+=u(c);else{var l=u(c.prefix),d=c.pattern;c.repeat&&(d+="(?:"+l+d+")*"),r+=d=c.optional?l?"(?:"+l+"("+d+"))?":"("+d+")?":l+"("+d+")"}}return n||(r=(s?r.slice(0,-2):r)+"(?:\\/(?=$))?"),r+=i?"$":n&&s?"":"(?=\\/|$)",new RegExp("^"+r,p(t))}function m(t,n,i){return e(n=n||[])?i||(i={}):(i=n,n=[]),t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return h(e,t)}(t,n):e(t)?function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(m(e[r],t,n).source);return h(new RegExp("(?:"+i.join("|")+")",p(n)),t)}(t,n,i):function(e,t,n){for(var i=c(e),r=f(i,n),o=0;o<i.length;o++)"string"!=typeof i[o]&&t.push(i[o]);return h(r,t)}(t,n,i)}t.parse=n,t.compile=r,t.tokensToFunction=o,t.tokensToRegExp=s;var g,v="undefined"!=typeof document,y="undefined"!=typeof window,b="undefined"!=typeof history,E=void 0!==i,S=v&&document.ontouchstart?"touchstart":"click",w=y&&!(!window.history.location&&!window.location);function _(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function T(e,t){if("function"==typeof e)return T.call(this,"*",e);if("function"==typeof t)for(var n=new I(e,null,this),i=1;i<arguments.length;++i)this.callbacks.push(n.middleware(arguments[i]));else"string"==typeof e?this["string"==typeof t?"redirect":"show"](e,t):this.start(e)}function x(e){if(!e.handled){var t=this,n=t._window;(t._hashbang?w&&this._getBase()+n.location.hash.replace("#!",""):w&&n.location.pathname+n.location.search)!==e.canonicalPath&&(t.stop(),e.handled=!1,w&&(n.location.href=e.canonicalPath))}}function C(e,t,n){var i=this.page=n||T,r=i._window,o=i._hashbang,s=i._getBase();"/"===e[0]&&0!==e.indexOf(s)&&(e=s+(o?"#!":"")+e);var a=e.indexOf("?");this.canonicalPath=e;var c=new RegExp("^"+s.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"));if(this.path=e.replace(c,"")||"/",o&&(this.path=this.path.replace("#!","")||"/"),this.title=v&&r.document.title,this.state=t||{},this.state.path=e,this.querystring=~a?i._decodeURLEncodedURIComponent(e.slice(a+1)):"",this.pathname=i._decodeURLEncodedURIComponent(~a?e.slice(0,a):e),this.params={},this.hash="",!o){if(!~this.path.indexOf("#"))return;var l=this.path.split("#");this.path=this.pathname=l[0],this.hash=i._decodeURLEncodedURIComponent(l[1])||"",this.querystring=this.querystring.split("#")[0]}}function I(e,n,i){var r=this.page=i||k,o=n||{};o.strict=o.strict||r._strict,this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=t(this.path,this.keys=[],o)}_.prototype.configure=function(e){var t=e||{};this._window=t.window||y&&window,this._decodeURLComponents=!1!==t.decodeURLComponents,this._popstate=!1!==t.popstate&&y,this._click=!1!==t.click&&v,this._hashbang=!!t.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):y&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener(S,this.clickHandler,!1):v&&n.document.removeEventListener(S,this.clickHandler,!1),this._hashbang&&y&&!b?n.addEventListener("hashchange",this._onpopstate,!1):y&&n.removeEventListener("hashchange",this._onpopstate,!1)},_.prototype.base=function(e){if(0===arguments.length)return this._base;this._base=e},_.prototype._getBase=function(){var e=this._base;if(e)return e;var t=y&&this._window&&this._window.location;return y&&this._hashbang&&t&&"file:"===t.protocol&&(e=t.pathname),e},_.prototype.strict=function(e){if(0===arguments.length)return this._strict;this._strict=e},_.prototype.start=function(e){var t=e||{};if(this.configure(t),!1!==t.dispatch){var n;if(this._running=!0,w){var i=this._window.location;n=this._hashbang&&~i.hash.indexOf("#!")?i.hash.substr(2)+i.search:this._hashbang?i.search+i.hash:i.pathname+i.search+i.hash}this.replace(n,null,!0,t.dispatch)}},_.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(S,this.clickHandler,!1),y&&e.removeEventListener("popstate",this._onpopstate,!1),y&&e.removeEventListener("hashchange",this._onpopstate,!1)}},_.prototype.show=function(e,t,n,i){var r=new C(e,t,this),o=this.prevContext;return this.prevContext=r,this.current=r.path,!1!==n&&this.dispatch(r,o),!1!==r.handled&&!1!==i&&r.pushState(),r},_.prototype.back=function(e,t){var n=this;if(this.len>0){var i=this._window;b&&i.history.back(),this.len--}else e?setTimeout((function(){n.show(e,t)})):setTimeout((function(){n.show(n._getBase(),t)}))},_.prototype.redirect=function(e,t){var n=this;"string"==typeof e&&"string"==typeof t&&T.call(this,e,(function(e){setTimeout((function(){n.replace(t)}),0)})),"string"==typeof e&&void 0===t&&setTimeout((function(){n.replace(e)}),0)},_.prototype.replace=function(e,t,n,i){var r=new C(e,t,this),o=this.prevContext;return this.prevContext=r,this.current=r.path,r.init=n,r.save(),!1!==i&&this.dispatch(r,o),r},_.prototype.dispatch=function(e,t){var n=0,i=0,r=this;function o(){var t=r.callbacks[n++];if(e.path===r.current)return t?void t(e,o):x.call(r,e);e.handled=!1}t?function e(){var n=r.exits[i++];if(!n)return o();n(t,e)}():o()},_.prototype.exit=function(e,t){if("function"==typeof e)return this.exit("*",e);for(var n=new I(e,null,this),i=1;i<arguments.length;++i)this.exits.push(n.middleware(arguments[i]))},_.prototype.clickHandler=function(e){if(1===this._which(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){var t=e.target,n=e.path||(e.composedPath?e.composedPath():null);if(n)for(var i=0;i<n.length;i++)if(n[i].nodeName&&"A"===n[i].nodeName.toUpperCase()&&n[i].href){t=n[i];break}for(;t&&"A"!==t.nodeName.toUpperCase();)t=t.parentNode;if(t&&"A"===t.nodeName.toUpperCase()){var r="object"==typeof t.href&&"SVGAnimatedString"===t.href.constructor.name;if(!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var o=t.getAttribute("href");if((this._hashbang||!this._samePath(t)||!t.hash&&"#"!==o)&&!(o&&o.indexOf("mailto:")>-1)&&!(r?t.target.baseVal:t.target)&&(r||this.sameOrigin(t.href))){var s=r?t.href.baseVal:t.pathname+t.search+(t.hash||"");s="/"!==s[0]?"/"+s:s,E&&s.match(/^\/[a-zA-Z]:\//)&&(s=s.replace(/^\/[a-zA-Z]:\//,"/"));var a=s,c=this._getBase();0===s.indexOf(c)&&(s=s.substr(c.length)),this._hashbang&&(s=s.replace("#!","")),(!c||a!==s||w&&"file:"===this._window.location.protocol)&&(e.preventDefault(),this.show(a))}}}}},_.prototype._onpopstate=(g=!1,y?(v&&"complete"===document.readyState?g=!0:window.addEventListener("load",(function(){setTimeout((function(){g=!0}),0)})),function(e){if(g){var t=this;if(e.state){var n=e.state.path;t.replace(n,e.state)}else if(w){var i=t._window.location;t.show(i.pathname+i.search+i.hash,void 0,void 0,!1)}}}):function(){}),_.prototype._which=function(e){return null==(e=e||y&&this._window.event).which?e.button:e.which},_.prototype._toURL=function(e){var t=this._window;if("function"==typeof URL&&w)return new URL(e,t.location.toString());if(v){var n=t.document.createElement("a");return n.href=e,n}},_.prototype.sameOrigin=function(e){if(!e||!w)return!1;var t=this._toURL(e),n=this._window.location;return n.protocol===t.protocol&&n.hostname===t.hostname&&(n.port===t.port||""===n.port&&(80==t.port||443==t.port))},_.prototype._samePath=function(e){if(!w)return!1;var t=this._window.location;return e.pathname===t.pathname&&e.search===t.search},_.prototype._decodeURLEncodedURIComponent=function(e){return"string"!=typeof e?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e},C.prototype.pushState=function(){var e=this.page,t=e._window,n=e._hashbang;e.len++,b&&t.history.pushState(this.state,this.title,n&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},C.prototype.save=function(){var e=this.page;b&&e._window.history.replaceState(this.state,this.title,e._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},I.prototype.middleware=function(e){var t=this;return function(n,i){if(t.match(n.path,n.params))return n.routePath=t.path,e(n,i);i()}},I.prototype.match=function(e,t){var n=this.keys,i=e.indexOf("?"),r=~i?e.slice(0,i):e,o=this.regexp.exec(decodeURIComponent(r));if(!o)return!1;delete t[0];for(var s=1,a=o.length;s<a;++s){var c=n[s-1],l=this.page._decodeURLEncodedURIComponent(o[s]);void 0===l&&hasOwnProperty.call(t,c.name)||(t[c.name]=l)}return!0};var k=function e(){var t=new _;function n(){return T.apply(t,arguments)}return n.callbacks=t.callbacks,n.exits=t.exits,n.base=t.base.bind(t),n.strict=t.strict.bind(t),n.start=t.start.bind(t),n.stop=t.stop.bind(t),n.show=t.show.bind(t),n.back=t.back.bind(t),n.redirect=t.redirect.bind(t),n.replace=t.replace.bind(t),n.dispatch=t.dispatch.bind(t),n.exit=t.exit.bind(t),n.configure=t.configure.bind(t),n.sameOrigin=t.sameOrigin.bind(t),n.clickHandler=t.clickHandler.bind(t),n.create=e,Object.defineProperty(n,"len",{get:function(){return t.len},set:function(e){t.len=e}}),Object.defineProperty(n,"current",{get:function(){return t.current},set:function(e){t.current=e}}),n.Context=C,n.Route=I,n}(),M=k,A=k;return M.default=A,M}()},52818:(e,t,n)=>{"use strict";var i=n(39809);t.certificate=n(41934);var r=i.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));t.RSAPrivateKey=r;var o=i.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));t.RSAPublicKey=o;var s=i.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}));t.PublicKey=s;var a=i.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),c=i.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())}));t.PrivateKey=c;var l=i.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));t.EncryptedPrivateKey=l;var u=i.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));t.DSAPrivateKey=u,t.DSAparam=i.define("DSAparam",(function(){this.int()}));var d=i.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(h),this.key("publicKey").optional().explicit(1).bitstr())}));t.ECPrivateKey=d;var h=i.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));t.signature=i.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},41934:(e,t,n)=>{"use strict";var i=n(39809),r=i.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=i.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),s=i.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),a=i.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())})),c=i.define("RelativeDistinguishedName",(function(){this.setof(o)})),l=i.define("RDNSequence",(function(){this.seqof(c)})),u=i.define("Name",(function(){this.choice({rdnSequence:this.use(l)})})),d=i.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(r),this.key("notAfter").use(r))})),h=i.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),p=i.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(u),this.key("validity").use(d),this.key("subject").use(u),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(h).optional())})),f=i.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(p),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())}));e.exports=f},77631:(e,t,n)=>{var i=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,s=n(13048),a=n(44696),c=n(89509).Buffer;e.exports=function(e,t){var n,l=e.toString(),u=l.match(i);if(u){var d="aes"+u[1],h=c.from(u[2],"hex"),p=c.from(u[3].replace(/[\r\n]/g,""),"base64"),f=s(t,h.slice(0,8),parseInt(u[1],10)).key,m=[],g=a.createDecipheriv(d,f,h);m.push(g.update(p)),m.push(g.final()),n=c.concat(m)}else{var v=l.match(o);n=c.from(v[2].replace(/[\r\n]/g,""),"base64")}return{tag:l.match(r)[1],data:n}}},70980:(e,t,n)=>{var i=n(52818),r=n(22562),o=n(77631),s=n(44696),a=n(25632),c=n(89509).Buffer;function l(e){var t;"object"!=typeof e||c.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=c.from(e));var n,l,u=o(e,t),d=u.tag,h=u.data;switch(d){case"CERTIFICATE":l=i.certificate.decode(h,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(l||(l=i.PublicKey.decode(h,"der")),n=l.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(l.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return l.subjectPrivateKey=l.subjectPublicKey,{type:"ec",data:l};case"1.2.840.10040.4.1":return l.algorithm.params.pub_key=i.DSAparam.decode(l.subjectPublicKey.data,"der"),{type:"dsa",data:l.algorithm.params};default:throw new Error("unknown key id "+n)}case"ENCRYPTED PRIVATE KEY":h=function(e,t){var n=e.algorithm.decrypt.kde.kdeparams.salt,i=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=r[e.algorithm.decrypt.cipher.algo.join(".")],l=e.algorithm.decrypt.cipher.iv,u=e.subjectPrivateKey,d=parseInt(o.split("-")[1],10)/8,h=a.pbkdf2Sync(t,n,i,d,"sha1"),p=s.createDecipheriv(o,h,l),f=[];return f.push(p.update(u)),f.push(p.final()),c.concat(f)}(h=i.EncryptedPrivateKey.decode(h,"der"),t);case"PRIVATE KEY":switch(n=(l=i.PrivateKey.decode(h,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(l.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:l.algorithm.curve,privateKey:i.ECPrivateKey.decode(l.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return l.algorithm.params.priv_key=i.DSAparam.decode(l.subjectPrivateKey,"der"),{type:"dsa",params:l.algorithm.params};default:throw new Error("unknown key id "+n)}case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(h,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(h,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(h,"der")};case"EC PRIVATE KEY":return{curve:(h=i.ECPrivateKey.decode(h,"der")).parameters.value,privateKey:h.privateKey};default:throw new Error("unknown key type "+d)}}e.exports=l,l.signature=i.signature},89435:e=>{"use strict";var t;e.exports=function(e){var n,i="&"+e+";";return(t=t||document.createElement("i")).innerHTML=i,(59!==(n=t.textContent).charCodeAt(n.length-1)||"semi"===e)&&(n!==i&&n)}},31515:(e,t,n)=>{"use strict";const{DOCUMENT_MODE:i}=n(16152),r="html",o=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],s=o.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]),a=["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"],c=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],l=c.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]);function u(e){const t=-1!==e.indexOf('"')?"'":'"';return t+e+t}function d(e,t){for(let n=0;n<t.length;n++)if(0===e.indexOf(t[n]))return!0;return!1}t.isConforming=function(e){return e.name===r&&null===e.publicId&&(null===e.systemId||"about:legacy-compat"===e.systemId)},t.getDocumentMode=function(e){if(e.name!==r)return i.QUIRKS;const t=e.systemId;if(t&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===t.toLowerCase())return i.QUIRKS;let n=e.publicId;if(null!==n){if(n=n.toLowerCase(),a.indexOf(n)>-1)return i.QUIRKS;let e=null===t?s:o;if(d(n,e))return i.QUIRKS;if(e=null===t?c:l,d(n,e))return i.LIMITED_QUIRKS}return i.NO_QUIRKS},t.serializeContent=function(e,t,n){let i="!DOCTYPE ";return e&&(i+=e),t?i+=" PUBLIC "+u(t):n&&(i+=" SYSTEM"),null!==n&&(i+=" "+u(n)),i}},41734:e=>{"use strict";e.exports={controlCharacterInInputStream:"control-character-in-input-stream",noncharacterInInputStream:"noncharacter-in-input-stream",surrogateInInputStream:"surrogate-in-input-stream",nonVoidHtmlElementStartTagWithTrailingSolidus:"non-void-html-element-start-tag-with-trailing-solidus",endTagWithAttributes:"end-tag-with-attributes",endTagWithTrailingSolidus:"end-tag-with-trailing-solidus",unexpectedSolidusInTag:"unexpected-solidus-in-tag",unexpectedNullCharacter:"unexpected-null-character",unexpectedQuestionMarkInsteadOfTagName:"unexpected-question-mark-instead-of-tag-name",invalidFirstCharacterOfTagName:"invalid-first-character-of-tag-name",unexpectedEqualsSignBeforeAttributeName:"unexpected-equals-sign-before-attribute-name",missingEndTagName:"missing-end-tag-name",unexpectedCharacterInAttributeName:"unexpected-character-in-attribute-name",unknownNamedCharacterReference:"unknown-named-character-reference",missingSemicolonAfterCharacterReference:"missing-semicolon-after-character-reference",unexpectedCharacterAfterDoctypeSystemIdentifier:"unexpected-character-after-doctype-system-identifier",unexpectedCharacterInUnquotedAttributeValue:"unexpected-character-in-unquoted-attribute-value",eofBeforeTagName:"eof-before-tag-name",eofInTag:"eof-in-tag",missingAttributeValue:"missing-attribute-value",missingWhitespaceBetweenAttributes:"missing-whitespace-between-attributes",missingWhitespaceAfterDoctypePublicKeyword:"missing-whitespace-after-doctype-public-keyword",missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:"missing-whitespace-between-doctype-public-and-system-identifiers",missingWhitespaceAfterDoctypeSystemKeyword:"missing-whitespace-after-doctype-system-keyword",missingQuoteBeforeDoctypePublicIdentifier:"missing-quote-before-doctype-public-identifier",missingQuoteBeforeDoctypeSystemIdentifier:"missing-quote-before-doctype-system-identifier",missingDoctypePublicIdentifier:"missing-doctype-public-identifier",missingDoctypeSystemIdentifier:"missing-doctype-system-identifier",abruptDoctypePublicIdentifier:"abrupt-doctype-public-identifier",abruptDoctypeSystemIdentifier:"abrupt-doctype-system-identifier",cdataInHtmlContent:"cdata-in-html-content",incorrectlyOpenedComment:"incorrectly-opened-comment",eofInScriptHtmlCommentLikeText:"eof-in-script-html-comment-like-text",eofInDoctype:"eof-in-doctype",nestedComment:"nested-comment",abruptClosingOfEmptyComment:"abrupt-closing-of-empty-comment",eofInComment:"eof-in-comment",incorrectlyClosedComment:"incorrectly-closed-comment",eofInCdata:"eof-in-cdata",absenceOfDigitsInNumericCharacterReference:"absence-of-digits-in-numeric-character-reference",nullCharacterReference:"null-character-reference",surrogateCharacterReference:"surrogate-character-reference",characterReferenceOutsideUnicodeRange:"character-reference-outside-unicode-range",controlCharacterReference:"control-character-reference",noncharacterCharacterReference:"noncharacter-character-reference",missingWhitespaceBeforeDoctypeName:"missing-whitespace-before-doctype-name",missingDoctypeName:"missing-doctype-name",invalidCharacterSequenceAfterDoctypeName:"invalid-character-sequence-after-doctype-name",duplicateAttribute:"duplicate-attribute",nonConformingDoctype:"non-conforming-doctype",missingDoctype:"missing-doctype",misplacedDoctype:"misplaced-doctype",endTagWithoutMatchingOpenElement:"end-tag-without-matching-open-element",closingOfElementWithOpenChildElements:"closing-of-element-with-open-child-elements",disallowedContentInNoscriptInHead:"disallowed-content-in-noscript-in-head",openElementsLeftAfterEof:"open-elements-left-after-eof",abandonedHeadElementChild:"abandoned-head-element-child",misplacedStartTagForHeadElement:"misplaced-start-tag-for-head-element",nestedNoscriptInHead:"nested-noscript-in-head",eofInElementThatCanContainOnlyText:"eof-in-element-that-can-contain-only-text"}},88779:(e,t,n)=>{"use strict";const i=n(55763),r=n(16152),o=r.TAG_NAMES,s=r.NAMESPACES,a=r.ATTRS,c={attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},l={"xlink:actuate":{prefix:"xlink",name:"actuate",namespace:s.XLINK},"xlink:arcrole":{prefix:"xlink",name:"arcrole",namespace:s.XLINK},"xlink:href":{prefix:"xlink",name:"href",namespace:s.XLINK},"xlink:role":{prefix:"xlink",name:"role",namespace:s.XLINK},"xlink:show":{prefix:"xlink",name:"show",namespace:s.XLINK},"xlink:title":{prefix:"xlink",name:"title",namespace:s.XLINK},"xlink:type":{prefix:"xlink",name:"type",namespace:s.XLINK},"xml:base":{prefix:"xml",name:"base",namespace:s.XML},"xml:lang":{prefix:"xml",name:"lang",namespace:s.XML},"xml:space":{prefix:"xml",name:"space",namespace:s.XML},xmlns:{prefix:"",name:"xmlns",namespace:s.XMLNS},"xmlns:xlink":{prefix:"xmlns",name:"xlink",namespace:s.XMLNS}},u=t.SVG_TAG_NAMES_ADJUSTMENT_MAP={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},d={[o.B]:!0,[o.BIG]:!0,[o.BLOCKQUOTE]:!0,[o.BODY]:!0,[o.BR]:!0,[o.CENTER]:!0,[o.CODE]:!0,[o.DD]:!0,[o.DIV]:!0,[o.DL]:!0,[o.DT]:!0,[o.EM]:!0,[o.EMBED]:!0,[o.H1]:!0,[o.H2]:!0,[o.H3]:!0,[o.H4]:!0,[o.H5]:!0,[o.H6]:!0,[o.HEAD]:!0,[o.HR]:!0,[o.I]:!0,[o.IMG]:!0,[o.LI]:!0,[o.LISTING]:!0,[o.MENU]:!0,[o.META]:!0,[o.NOBR]:!0,[o.OL]:!0,[o.P]:!0,[o.PRE]:!0,[o.RUBY]:!0,[o.S]:!0,[o.SMALL]:!0,[o.SPAN]:!0,[o.STRONG]:!0,[o.STRIKE]:!0,[o.SUB]:!0,[o.SUP]:!0,[o.TABLE]:!0,[o.TT]:!0,[o.U]:!0,[o.UL]:!0,[o.VAR]:!0};t.causesExit=function(e){const t=e.tagName;return!(t!==o.FONT||null===i.getTokenAttr(e,a.COLOR)&&null===i.getTokenAttr(e,a.SIZE)&&null===i.getTokenAttr(e,a.FACE))||d[t]},t.adjustTokenMathMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++)if("definitionurl"===e.attrs[t].name){e.attrs[t].name="definitionURL";break}},t.adjustTokenSVGAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=c[e.attrs[t].name];n&&(e.attrs[t].name=n)}},t.adjustTokenXMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=l[e.attrs[t].name];n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}},t.adjustTokenSVGTagName=function(e){const t=u[e.tagName];t&&(e.tagName=t)},t.isIntegrationPoint=function(e,t,n,i){return!(i&&i!==s.HTML||!function(e,t,n){if(t===s.MATHML&&e===o.ANNOTATION_XML)for(let e=0;e<n.length;e++)if(n[e].name===a.ENCODING){const t=n[e].value.toLowerCase();return"text/html"===t||"application/xhtml+xml"===t}return t===s.SVG&&(e===o.FOREIGN_OBJECT||e===o.DESC||e===o.TITLE)}(e,t,n))||!(i&&i!==s.MATHML||!function(e,t){return t===s.MATHML&&(e===o.MI||e===o.MO||e===o.MN||e===o.MS||e===o.MTEXT)}(e,t))}},16152:(e,t)=>{"use strict";const n=t.NAMESPACES={HTML:"http://www.w3.org/1999/xhtml",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"};t.ATTRS={TYPE:"type",ACTION:"action",ENCODING:"encoding",PROMPT:"prompt",NAME:"name",COLOR:"color",FACE:"face",SIZE:"size"},t.DOCUMENT_MODE={NO_QUIRKS:"no-quirks",QUIRKS:"quirks",LIMITED_QUIRKS:"limited-quirks"};const i=t.TAG_NAMES={A:"a",ADDRESS:"address",ANNOTATION_XML:"annotation-xml",APPLET:"applet",AREA:"area",ARTICLE:"article",ASIDE:"aside",B:"b",BASE:"base",BASEFONT:"basefont",BGSOUND:"bgsound",BIG:"big",BLOCKQUOTE:"blockquote",BODY:"body",BR:"br",BUTTON:"button",CAPTION:"caption",CENTER:"center",CODE:"code",COL:"col",COLGROUP:"colgroup",DD:"dd",DESC:"desc",DETAILS:"details",DIALOG:"dialog",DIR:"dir",DIV:"div",DL:"dl",DT:"dt",EM:"em",EMBED:"embed",FIELDSET:"fieldset",FIGCAPTION:"figcaption",FIGURE:"figure",FONT:"font",FOOTER:"footer",FOREIGN_OBJECT:"foreignObject",FORM:"form",FRAME:"frame",FRAMESET:"frameset",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",HEAD:"head",HEADER:"header",HGROUP:"hgroup",HR:"hr",HTML:"html",I:"i",IMG:"img",IMAGE:"image",INPUT:"input",IFRAME:"iframe",KEYGEN:"keygen",LABEL:"label",LI:"li",LINK:"link",LISTING:"listing",MAIN:"main",MALIGNMARK:"malignmark",MARQUEE:"marquee",MATH:"math",MENU:"menu",META:"meta",MGLYPH:"mglyph",MI:"mi",MO:"mo",MN:"mn",MS:"ms",MTEXT:"mtext",NAV:"nav",NOBR:"nobr",NOFRAMES:"noframes",NOEMBED:"noembed",NOSCRIPT:"noscript",OBJECT:"object",OL:"ol",OPTGROUP:"optgroup",OPTION:"option",P:"p",PARAM:"param",PLAINTEXT:"plaintext",PRE:"pre",RB:"rb",RP:"rp",RT:"rt",RTC:"rtc",RUBY:"ruby",S:"s",SCRIPT:"script",SECTION:"section",SELECT:"select",SOURCE:"source",SMALL:"small",SPAN:"span",STRIKE:"strike",STRONG:"strong",STYLE:"style",SUB:"sub",SUMMARY:"summary",SUP:"sup",TABLE:"table",TBODY:"tbody",TEMPLATE:"template",TEXTAREA:"textarea",TFOOT:"tfoot",TD:"td",TH:"th",THEAD:"thead",TITLE:"title",TR:"tr",TRACK:"track",TT:"tt",U:"u",UL:"ul",SVG:"svg",VAR:"var",WBR:"wbr",XMP:"xmp"};t.SPECIAL_ELEMENTS={[n.HTML]:{[i.ADDRESS]:!0,[i.APPLET]:!0,[i.AREA]:!0,[i.ARTICLE]:!0,[i.ASIDE]:!0,[i.BASE]:!0,[i.BASEFONT]:!0,[i.BGSOUND]:!0,[i.BLOCKQUOTE]:!0,[i.BODY]:!0,[i.BR]:!0,[i.BUTTON]:!0,[i.CAPTION]:!0,[i.CENTER]:!0,[i.COL]:!0,[i.COLGROUP]:!0,[i.DD]:!0,[i.DETAILS]:!0,[i.DIR]:!0,[i.DIV]:!0,[i.DL]:!0,[i.DT]:!0,[i.EMBED]:!0,[i.FIELDSET]:!0,[i.FIGCAPTION]:!0,[i.FIGURE]:!0,[i.FOOTER]:!0,[i.FORM]:!0,[i.FRAME]:!0,[i.FRAMESET]:!0,[i.H1]:!0,[i.H2]:!0,[i.H3]:!0,[i.H4]:!0,[i.H5]:!0,[i.H6]:!0,[i.HEAD]:!0,[i.HEADER]:!0,[i.HGROUP]:!0,[i.HR]:!0,[i.HTML]:!0,[i.IFRAME]:!0,[i.IMG]:!0,[i.INPUT]:!0,[i.LI]:!0,[i.LINK]:!0,[i.LISTING]:!0,[i.MAIN]:!0,[i.MARQUEE]:!0,[i.MENU]:!0,[i.META]:!0,[i.NAV]:!0,[i.NOEMBED]:!0,[i.NOFRAMES]:!0,[i.NOSCRIPT]:!0,[i.OBJECT]:!0,[i.OL]:!0,[i.P]:!0,[i.PARAM]:!0,[i.PLAINTEXT]:!0,[i.PRE]:!0,[i.SCRIPT]:!0,[i.SECTION]:!0,[i.SELECT]:!0,[i.SOURCE]:!0,[i.STYLE]:!0,[i.SUMMARY]:!0,[i.TABLE]:!0,[i.TBODY]:!0,[i.TD]:!0,[i.TEMPLATE]:!0,[i.TEXTAREA]:!0,[i.TFOOT]:!0,[i.TH]:!0,[i.THEAD]:!0,[i.TITLE]:!0,[i.TR]:!0,[i.TRACK]:!0,[i.UL]:!0,[i.WBR]:!0,[i.XMP]:!0},[n.MATHML]:{[i.MI]:!0,[i.MO]:!0,[i.MN]:!0,[i.MS]:!0,[i.MTEXT]:!0,[i.ANNOTATION_XML]:!0},[n.SVG]:{[i.TITLE]:!0,[i.FOREIGN_OBJECT]:!0,[i.DESC]:!0}}},54284:(e,t)=>{"use strict";const n=[65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111];t.REPLACEMENT_CHARACTER="",t.CODE_POINTS={EOF:-1,NULL:0,TABULATION:9,CARRIAGE_RETURN:13,LINE_FEED:10,FORM_FEED:12,SPACE:32,EXCLAMATION_MARK:33,QUOTATION_MARK:34,NUMBER_SIGN:35,AMPERSAND:38,APOSTROPHE:39,HYPHEN_MINUS:45,SOLIDUS:47,DIGIT_0:48,DIGIT_9:57,SEMICOLON:59,LESS_THAN_SIGN:60,EQUALS_SIGN:61,GREATER_THAN_SIGN:62,QUESTION_MARK:63,LATIN_CAPITAL_A:65,LATIN_CAPITAL_F:70,LATIN_CAPITAL_X:88,LATIN_CAPITAL_Z:90,RIGHT_SQUARE_BRACKET:93,GRAVE_ACCENT:96,LATIN_SMALL_A:97,LATIN_SMALL_F:102,LATIN_SMALL_X:120,LATIN_SMALL_Z:122,REPLACEMENT_CHARACTER:65533},t.CODE_POINT_SEQUENCES={DASH_DASH_STRING:[45,45],DOCTYPE_STRING:[68,79,67,84,89,80,69],CDATA_START_STRING:[91,67,68,65,84,65,91],SCRIPT_STRING:[115,99,114,105,112,116],PUBLIC_STRING:[80,85,66,76,73,67],SYSTEM_STRING:[83,89,83,84,69,77]},t.isSurrogate=function(e){return e>=55296&&e<=57343},t.isSurrogatePair=function(e){return e>=56320&&e<=57343},t.getSurrogatePairCodePoint=function(e,t){return 1024*(e-55296)+9216+t},t.isControlCodePoint=function(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159},t.isUndefinedCodePoint=function(e){return e>=64976&&e<=65007||n.indexOf(e)>-1}},23843:(e,t,n)=>{"use strict";const i=n(81704);e.exports=class extends i{constructor(e,t){super(e),this.posTracker=null,this.onParseError=t.onParseError}_setErrorLocation(e){e.startLine=e.endLine=this.posTracker.line,e.startCol=e.endCol=this.posTracker.col,e.startOffset=e.endOffset=this.posTracker.offset}_reportError(e){const t={code:e,startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1};this._setErrorLocation(t),this.onParseError(t)}_getOverriddenMethods(e){return{_err(t){e._reportError(t)}}}}},22232:(e,t,n)=>{"use strict";const i=n(23843),r=n(70050),o=n(46110),s=n(81704);e.exports=class extends i{constructor(e,t){super(e,t),this.opts=t,this.ctLoc=null,this.locBeforeToken=!1}_setErrorLocation(e){this.ctLoc&&(e.startLine=this.ctLoc.startLine,e.startCol=this.ctLoc.startCol,e.startOffset=this.ctLoc.startOffset,e.endLine=this.locBeforeToken?this.ctLoc.startLine:this.ctLoc.endLine,e.endCol=this.locBeforeToken?this.ctLoc.startCol:this.ctLoc.endCol,e.endOffset=this.locBeforeToken?this.ctLoc.startOffset:this.ctLoc.endOffset)}_getOverriddenMethods(e,t){return{_bootstrap(n,i){t._bootstrap.call(this,n,i),s.install(this.tokenizer,r,e.opts),s.install(this.tokenizer,o)},_processInputToken(n){e.ctLoc=n.location,t._processInputToken.call(this,n)},_err(t,n){e.locBeforeToken=n&&n.beforeToken,e._reportError(t)}}}}},23288:(e,t,n)=>{"use strict";const i=n(23843),r=n(57930),o=n(81704);e.exports=class extends i{constructor(e,t){super(e,t),this.posTracker=o.install(e,r),this.lastErrOffset=-1}_reportError(e){this.lastErrOffset!==this.posTracker.offset&&(this.lastErrOffset=this.posTracker.offset,super._reportError(e))}}},70050:(e,t,n)=>{"use strict";const i=n(23843),r=n(23288),o=n(81704);e.exports=class extends i{constructor(e,t){super(e,t);const n=o.install(e.preprocessor,r,t);this.posTracker=n.posTracker}}},11077:(e,t,n)=>{"use strict";const i=n(81704);e.exports=class extends i{constructor(e,t){super(e),this.onItemPop=t.onItemPop}_getOverriddenMethods(e,t){return{pop(){e.onItemPop(this.current),t.pop.call(this)},popAllUpToHtmlElement(){for(let t=this.stackTop;t>0;t--)e.onItemPop(this.items[t]);t.popAllUpToHtmlElement.call(this)},remove(n){e.onItemPop(this.current),t.remove.call(this,n)}}}}},452:(e,t,n)=>{"use strict";const i=n(81704),r=n(55763),o=n(46110),s=n(11077),a=n(16152).TAG_NAMES;e.exports=class extends i{constructor(e){super(e),this.parser=e,this.treeAdapter=this.parser.treeAdapter,this.posTracker=null,this.lastStartTagToken=null,this.lastFosterParentingLocation=null,this.currentToken=null}_setStartLocation(e){let t=null;this.lastStartTagToken&&(t=Object.assign({},this.lastStartTagToken.location),t.startTag=this.lastStartTagToken.location),this.treeAdapter.setNodeSourceCodeLocation(e,t)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,i=this.treeAdapter.getTagName(e),o={};t.type===r.END_TAG_TOKEN&&i===t.tagName?(o.endTag=Object.assign({},n),o.endLine=n.endLine,o.endCol=n.endCol,o.endOffset=n.endOffset):(o.endLine=n.startLine,o.endCol=n.startCol,o.endOffset=n.startOffset),this.treeAdapter.updateNodeSourceCodeLocation(e,o)}}_getOverriddenMethods(e,t){return{_bootstrap(n,r){t._bootstrap.call(this,n,r),e.lastStartTagToken=null,e.lastFosterParentingLocation=null,e.currentToken=null;const a=i.install(this.tokenizer,o);e.posTracker=a.posTracker,i.install(this.openElements,s,{onItemPop:function(t){e._setEndLocation(t,e.currentToken)}})},_runParsingLoop(n){t._runParsingLoop.call(this,n);for(let t=this.openElements.stackTop;t>=0;t--)e._setEndLocation(this.openElements.items[t],e.currentToken)},_processTokenInForeignContent(n){e.currentToken=n,t._processTokenInForeignContent.call(this,n)},_processToken(n){if(e.currentToken=n,t._processToken.call(this,n),n.type===r.END_TAG_TOKEN&&(n.tagName===a.HTML||n.tagName===a.BODY&&this.openElements.hasInScope(a.BODY)))for(let t=this.openElements.stackTop;t>=0;t--){const i=this.openElements.items[t];if(this.treeAdapter.getTagName(i)===n.tagName){e._setEndLocation(i,n);break}}},_setDocumentType(e){t._setDocumentType.call(this,e);const n=this.treeAdapter.getChildNodes(this.document),i=n.length;for(let t=0;t<i;t++){const i=n[t];if(this.treeAdapter.isDocumentTypeNode(i)){this.treeAdapter.setNodeSourceCodeLocation(i,e.location);break}}},_attachElementToTree(n){e._setStartLocation(n),e.lastStartTagToken=null,t._attachElementToTree.call(this,n)},_appendElement(n,i){e.lastStartTagToken=n,t._appendElement.call(this,n,i)},_insertElement(n,i){e.lastStartTagToken=n,t._insertElement.call(this,n,i)},_insertTemplate(n){e.lastStartTagToken=n,t._insertTemplate.call(this,n);const i=this.treeAdapter.getTemplateContent(this.openElements.current);this.treeAdapter.setNodeSourceCodeLocation(i,null)},_insertFakeRootElement(){t._insertFakeRootElement.call(this),this.treeAdapter.setNodeSourceCodeLocation(this.openElements.current,null)},_appendCommentNode(e,n){t._appendCommentNode.call(this,e,n);const i=this.treeAdapter.getChildNodes(n),r=i[i.length-1];this.treeAdapter.setNodeSourceCodeLocation(r,e.location)},_findFosterParentingLocation(){return e.lastFosterParentingLocation=t._findFosterParentingLocation.call(this),e.lastFosterParentingLocation},_insertCharacters(n){t._insertCharacters.call(this,n);const i=this._shouldFosterParentOnInsertion(),r=i&&e.lastFosterParentingLocation.parent||this.openElements.currentTmplContent||this.openElements.current,o=this.treeAdapter.getChildNodes(r),s=i&&e.lastFosterParentingLocation.beforeElement?o.indexOf(e.lastFosterParentingLocation.beforeElement)-1:o.length-1,a=o[s];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:e,endCol:t,endOffset:i}=n.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:e,endCol:t,endOffset:i})}else this.treeAdapter.setNodeSourceCodeLocation(a,n.location)}}}}},46110:(e,t,n)=>{"use strict";const i=n(81704),r=n(55763),o=n(57930);e.exports=class extends i{constructor(e){super(e),this.tokenizer=e,this.posTracker=i.install(e.preprocessor,o),this.currentAttrLocation=null,this.ctLoc=null}_getCurrentLocation(){return{startLine:this.posTracker.line,startCol:this.posTracker.col,startOffset:this.posTracker.offset,endLine:-1,endCol:-1,endOffset:-1}}_attachCurrentAttrLocationInfo(){this.currentAttrLocation.endLine=this.posTracker.line,this.currentAttrLocation.endCol=this.posTracker.col,this.currentAttrLocation.endOffset=this.posTracker.offset;const e=this.tokenizer.currentToken,t=this.tokenizer.currentAttr;e.location.attrs||(e.location.attrs=Object.create(null)),e.location.attrs[t.name]=this.currentAttrLocation}_getOverriddenMethods(e,t){const n={_createStartTagToken(){t._createStartTagToken.call(this),this.currentToken.location=e.ctLoc},_createEndTagToken(){t._createEndTagToken.call(this),this.currentToken.location=e.ctLoc},_createCommentToken(){t._createCommentToken.call(this),this.currentToken.location=e.ctLoc},_createDoctypeToken(n){t._createDoctypeToken.call(this,n),this.currentToken.location=e.ctLoc},_createCharacterToken(n,i){t._createCharacterToken.call(this,n,i),this.currentCharacterToken.location=e.ctLoc},_createEOFToken(){t._createEOFToken.call(this),this.currentToken.location=e._getCurrentLocation()},_createAttr(n){t._createAttr.call(this,n),e.currentAttrLocation=e._getCurrentLocation()},_leaveAttrName(n){t._leaveAttrName.call(this,n),e._attachCurrentAttrLocationInfo()},_leaveAttrValue(n){t._leaveAttrValue.call(this,n),e._attachCurrentAttrLocationInfo()},_emitCurrentToken(){const n=this.currentToken.location;this.currentCharacterToken&&(this.currentCharacterToken.location.endLine=n.startLine,this.currentCharacterToken.location.endCol=n.startCol,this.currentCharacterToken.location.endOffset=n.startOffset),this.currentToken.type===r.EOF_TOKEN?(n.endLine=n.startLine,n.endCol=n.startCol,n.endOffset=n.startOffset):(n.endLine=e.posTracker.line,n.endCol=e.posTracker.col+1,n.endOffset=e.posTracker.offset+1),t._emitCurrentToken.call(this)},_emitCurrentCharacterToken(){const n=this.currentCharacterToken&&this.currentCharacterToken.location;n&&-1===n.endOffset&&(n.endLine=e.posTracker.line,n.endCol=e.posTracker.col,n.endOffset=e.posTracker.offset),t._emitCurrentCharacterToken.call(this)}};return Object.keys(r.MODE).forEach((i=>{const o=r.MODE[i];n[o]=function(n){e.ctLoc=e._getCurrentLocation(),t[o].call(this,n)}})),n}}},57930:(e,t,n)=>{"use strict";const i=n(81704);e.exports=class extends i{constructor(e){super(e),this.preprocessor=e,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.offset=0,this.col=0,this.line=1}_getOverriddenMethods(e,t){return{advance(){const n=this.pos+1,i=this.html[n];return e.isEol&&(e.isEol=!1,e.line++,e.lineStartPos=n),("\n"===i||"\r"===i&&"\n"!==this.html[n+1])&&(e.isEol=!0),e.col=n-e.lineStartPos+1,e.offset=e.droppedBufferSize+n,t.advance.call(this)},retreat(){t.retreat.call(this),e.isEol=!1,e.col=this.pos-e.lineStartPos+1},dropParsedChunk(){const n=this.pos;t.dropParsedChunk.call(this);const i=n-this.pos;e.lineStartPos-=i,e.droppedBufferSize+=i,e.offset=e.droppedBufferSize+this.pos}}}}},12484:e=>{"use strict";class t{constructor(e){this.length=0,this.entries=[],this.treeAdapter=e,this.bookmark=null}_getNoahArkConditionCandidates(e){const n=[];if(this.length>=3){const i=this.treeAdapter.getAttrList(e).length,r=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let e=this.length-1;e>=0;e--){const s=this.entries[e];if(s.type===t.MARKER_ENTRY)break;const a=s.element,c=this.treeAdapter.getAttrList(a);this.treeAdapter.getTagName(a)===r&&this.treeAdapter.getNamespaceURI(a)===o&&c.length===i&&n.push({idx:e,attrs:c})}}return n.length<3?[]:n}_ensureNoahArkCondition(e){const t=this._getNoahArkConditionCandidates(e);let n=t.length;if(n){const i=this.treeAdapter.getAttrList(e),r=i.length,o=Object.create(null);for(let e=0;e<r;e++){const t=i[e];o[t.name]=t.value}for(let e=0;e<r;e++)for(let i=0;i<n;i++){const r=t[i].attrs[e];if(o[r.name]!==r.value&&(t.splice(i,1),n--),t.length<3)return}for(let e=n-1;e>=2;e--)this.entries.splice(t[e].idx,1),this.length--}}insertMarker(){this.entries.push({type:t.MARKER_ENTRY}),this.length++}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.push({type:t.ELEMENT_ENTRY,element:e,token:n}),this.length++}insertElementAfterBookmark(e,n){let i=this.length-1;for(;i>=0&&this.entries[i]!==this.bookmark;i--);this.entries.splice(i+1,0,{type:t.ELEMENT_ENTRY,element:e,token:n}),this.length++}removeEntry(e){for(let t=this.length-1;t>=0;t--)if(this.entries[t]===e){this.entries.splice(t,1),this.length--;break}}clearToLastMarker(){for(;this.length;){const e=this.entries.pop();if(this.length--,e.type===t.MARKER_ENTRY)break}}getElementEntryInScopeWithTagName(e){for(let n=this.length-1;n>=0;n--){const i=this.entries[n];if(i.type===t.MARKER_ENTRY)return null;if(this.treeAdapter.getTagName(i.element)===e)return i}return null}getElementEntry(e){for(let n=this.length-1;n>=0;n--){const i=this.entries[n];if(i.type===t.ELEMENT_ENTRY&&i.element===e)return i}return null}}t.MARKER_ENTRY="MARKER_ENTRY",t.ELEMENT_ENTRY="ELEMENT_ENTRY",e.exports=t},7045:(e,t,n)=>{"use strict";const i=n(55763),r=n(46519),o=n(12484),s=n(452),a=n(22232),c=n(81704),l=n(17296),u=n(8904),d=n(31515),h=n(88779),p=n(41734),f=n(54284),m=n(16152),g=m.TAG_NAMES,v=m.NAMESPACES,y=m.ATTRS,b={scriptingEnabled:!0,sourceCodeLocationInfo:!1,onParseError:null,treeAdapter:l},E="hidden",S="INITIAL_MODE",w="BEFORE_HTML_MODE",_="BEFORE_HEAD_MODE",T="IN_HEAD_MODE",x="IN_HEAD_NO_SCRIPT_MODE",C="AFTER_HEAD_MODE",I="IN_BODY_MODE",k="TEXT_MODE",M="IN_TABLE_MODE",A="IN_TABLE_TEXT_MODE",O="IN_CAPTION_MODE",R="IN_COLUMN_GROUP_MODE",L="IN_TABLE_BODY_MODE",D="IN_ROW_MODE",N="IN_CELL_MODE",P="IN_SELECT_MODE",$="IN_SELECT_IN_TABLE_MODE",U="IN_TEMPLATE_MODE",B="AFTER_BODY_MODE",F="IN_FRAMESET_MODE",j="AFTER_FRAMESET_MODE",H="AFTER_AFTER_BODY_MODE",K="AFTER_AFTER_FRAMESET_MODE",q={[g.TR]:D,[g.TBODY]:L,[g.THEAD]:L,[g.TFOOT]:L,[g.CAPTION]:O,[g.COLGROUP]:R,[g.TABLE]:M,[g.BODY]:I,[g.FRAMESET]:F},V={[g.CAPTION]:M,[g.COLGROUP]:M,[g.TBODY]:M,[g.TFOOT]:M,[g.THEAD]:M,[g.COL]:R,[g.TR]:L,[g.TD]:D,[g.TH]:D},G={[S]:{[i.CHARACTER_TOKEN]:se,[i.NULL_CHARACTER_TOKEN]:se,[i.WHITESPACE_CHARACTER_TOKEN]:ee,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:function(e,t){e._setDocumentType(t);const n=t.forceQuirks?m.DOCUMENT_MODE.QUIRKS:d.getDocumentMode(t);d.isConforming(t)||e._err(p.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=w},[i.START_TAG_TOKEN]:se,[i.END_TAG_TOKEN]:se,[i.EOF_TOKEN]:se},[w]:{[i.CHARACTER_TOKEN]:ae,[i.NULL_CHARACTER_TOKEN]:ae,[i.WHITESPACE_CHARACTER_TOKEN]:ee,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:function(e,t){t.tagName===g.HTML?(e._insertElement(t,v.HTML),e.insertionMode=_):ae(e,t)},[i.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n!==g.HTML&&n!==g.HEAD&&n!==g.BODY&&n!==g.BR||ae(e,t)},[i.EOF_TOKEN]:ae},[_]:{[i.CHARACTER_TOKEN]:ce,[i.NULL_CHARACTER_TOKEN]:ce,[i.WHITESPACE_CHARACTER_TOKEN]:ee,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:te,[i.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.HTML?Ce(e,t):n===g.HEAD?(e._insertElement(t,v.HTML),e.headElement=e.openElements.current,e.insertionMode=T):ce(e,t)},[i.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.HEAD||n===g.BODY||n===g.HTML||n===g.BR?ce(e,t):e._err(p.endTagWithoutMatchingOpenElement)},[i.EOF_TOKEN]:ce},[T]:{[i.CHARACTER_TOKEN]:de,[i.NULL_CHARACTER_TOKEN]:de,[i.WHITESPACE_CHARACTER_TOKEN]:re,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:te,[i.START_TAG_TOKEN]:le,[i.END_TAG_TOKEN]:ue,[i.EOF_TOKEN]:de},[x]:{[i.CHARACTER_TOKEN]:he,[i.NULL_CHARACTER_TOKEN]:he,[i.WHITESPACE_CHARACTER_TOKEN]:re,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:te,[i.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.HTML?Ce(e,t):n===g.BASEFONT||n===g.BGSOUND||n===g.HEAD||n===g.LINK||n===g.META||n===g.NOFRAMES||n===g.STYLE?le(e,t):n===g.NOSCRIPT?e._err(p.nestedNoscriptInHead):he(e,t)},[i.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.NOSCRIPT?(e.openElements.pop(),e.insertionMode=T):n===g.BR?he(e,t):e._err(p.endTagWithoutMatchingOpenElement)},[i.EOF_TOKEN]:he},[C]:{[i.CHARACTER_TOKEN]:pe,[i.NULL_CHARACTER_TOKEN]:pe,[i.WHITESPACE_CHARACTER_TOKEN]:re,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:te,[i.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.HTML?Ce(e,t):n===g.BODY?(e._insertElement(t,v.HTML),e.framesetOk=!1,e.insertionMode=I):n===g.FRAMESET?(e._insertElement(t,v.HTML),e.insertionMode=F):n===g.BASE||n===g.BASEFONT||n===g.BGSOUND||n===g.LINK||n===g.META||n===g.NOFRAMES||n===g.SCRIPT||n===g.STYLE||n===g.TEMPLATE||n===g.TITLE?(e._err(p.abandonedHeadElementChild),e.openElements.push(e.headElement),le(e,t),e.openElements.remove(e.headElement)):n===g.HEAD?e._err(p.misplacedStartTagForHeadElement):pe(e,t)},[i.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.BODY||n===g.HTML||n===g.BR?pe(e,t):n===g.TEMPLATE?ue(e,t):e._err(p.endTagWithoutMatchingOpenElement)},[i.EOF_TOKEN]:pe},[I]:{[i.CHARACTER_TOKEN]:me,[i.NULL_CHARACTER_TOKEN]:ee,[i.WHITESPACE_CHARACTER_TOKEN]:fe,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:Ce,[i.END_TAG_TOKEN]:Ae,[i.EOF_TOKEN]:Oe},[k]:{[i.CHARACTER_TOKEN]:re,[i.NULL_CHARACTER_TOKEN]:re,[i.WHITESPACE_CHARACTER_TOKEN]:re,[i.COMMENT_TOKEN]:ee,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:ee,[i.END_TAG_TOKEN]:function(e,t){t.tagName===g.SCRIPT&&(e.pendingScript=e.openElements.current),e.openElements.pop(),e.insertionMode=e.originalInsertionMode},[i.EOF_TOKEN]:function(e,t){e._err(p.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e._processToken(t)}},[M]:{[i.CHARACTER_TOKEN]:Re,[i.NULL_CHARACTER_TOKEN]:Re,[i.WHITESPACE_CHARACTER_TOKEN]:Re,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:Le,[i.END_TAG_TOKEN]:De,[i.EOF_TOKEN]:Oe},[A]:{[i.CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0},[i.NULL_CHARACTER_TOKEN]:ee,[i.WHITESPACE_CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t)},[i.COMMENT_TOKEN]:Pe,[i.DOCTYPE_TOKEN]:Pe,[i.START_TAG_TOKEN]:Pe,[i.END_TAG_TOKEN]:Pe,[i.EOF_TOKEN]:Pe},[O]:{[i.CHARACTER_TOKEN]:me,[i.NULL_CHARACTER_TOKEN]:ee,[i.WHITESPACE_CHARACTER_TOKEN]:fe,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.CAPTION||n===g.COL||n===g.COLGROUP||n===g.TBODY||n===g.TD||n===g.TFOOT||n===g.TH||n===g.THEAD||n===g.TR?e.openElements.hasInTableScope(g.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(g.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=M,e._processToken(t)):Ce(e,t)},[i.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.CAPTION||n===g.TABLE?e.openElements.hasInTableScope(g.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(g.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=M,n===g.TABLE&&e._processToken(t)):n!==g.BODY&&n!==g.COL&&n!==g.COLGROUP&&n!==g.HTML&&n!==g.TBODY&&n!==g.TD&&n!==g.TFOOT&&n!==g.TH&&n!==g.THEAD&&n!==g.TR&&Ae(e,t)},[i.EOF_TOKEN]:Oe},[R]:{[i.CHARACTER_TOKEN]:$e,[i.NULL_CHARACTER_TOKEN]:$e,[i.WHITESPACE_CHARACTER_TOKEN]:re,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.HTML?Ce(e,t):n===g.COL?(e._appendElement(t,v.HTML),t.ackSelfClosing=!0):n===g.TEMPLATE?le(e,t):$e(e,t)},[i.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.COLGROUP?e.openElements.currentTagName===g.COLGROUP&&(e.openElements.pop(),e.insertionMode=M):n===g.TEMPLATE?ue(e,t):n!==g.COL&&$e(e,t)},[i.EOF_TOKEN]:Oe},[L]:{[i.CHARACTER_TOKEN]:Re,[i.NULL_CHARACTER_TOKEN]:Re,[i.WHITESPACE_CHARACTER_TOKEN]:Re,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.TR?(e.openElements.clearBackToTableBodyContext(),e._insertElement(t,v.HTML),e.insertionMode=D):n===g.TH||n===g.TD?(e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(g.TR),e.insertionMode=D,e._processToken(t)):n===g.CAPTION||n===g.COL||n===g.COLGROUP||n===g.TBODY||n===g.TFOOT||n===g.THEAD?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=M,e._processToken(t)):Le(e,t)},[i.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.TBODY||n===g.TFOOT||n===g.THEAD?e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=M):n===g.TABLE?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=M,e._processToken(t)):(n!==g.BODY&&n!==g.CAPTION&&n!==g.COL&&n!==g.COLGROUP||n!==g.HTML&&n!==g.TD&&n!==g.TH&&n!==g.TR)&&De(e,t)},[i.EOF_TOKEN]:Oe},[D]:{[i.CHARACTER_TOKEN]:Re,[i.NULL_CHARACTER_TOKEN]:Re,[i.WHITESPACE_CHARACTER_TOKEN]:Re,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.TH||n===g.TD?(e.openElements.clearBackToTableRowContext(),e._insertElement(t,v.HTML),e.insertionMode=N,e.activeFormattingElements.insertMarker()):n===g.CAPTION||n===g.COL||n===g.COLGROUP||n===g.TBODY||n===g.TFOOT||n===g.THEAD||n===g.TR?e.openElements.hasInTableScope(g.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=L,e._processToken(t)):Le(e,t)},[i.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.TR?e.openElements.hasInTableScope(g.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=L):n===g.TABLE?e.openElements.hasInTableScope(g.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=L,e._processToken(t)):n===g.TBODY||n===g.TFOOT||n===g.THEAD?(e.openElements.hasInTableScope(n)||e.openElements.hasInTableScope(g.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=L,e._processToken(t)):(n!==g.BODY&&n!==g.CAPTION&&n!==g.COL&&n!==g.COLGROUP||n!==g.HTML&&n!==g.TD&&n!==g.TH)&&De(e,t)},[i.EOF_TOKEN]:Oe},[N]:{[i.CHARACTER_TOKEN]:me,[i.NULL_CHARACTER_TOKEN]:ee,[i.WHITESPACE_CHARACTER_TOKEN]:fe,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.CAPTION||n===g.COL||n===g.COLGROUP||n===g.TBODY||n===g.TD||n===g.TFOOT||n===g.TH||n===g.THEAD||n===g.TR?(e.openElements.hasInTableScope(g.TD)||e.openElements.hasInTableScope(g.TH))&&(e._closeTableCell(),e._processToken(t)):Ce(e,t)},[i.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.TD||n===g.TH?e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=D):n===g.TABLE||n===g.TBODY||n===g.TFOOT||n===g.THEAD||n===g.TR?e.openElements.hasInTableScope(n)&&(e._closeTableCell(),e._processToken(t)):n!==g.BODY&&n!==g.CAPTION&&n!==g.COL&&n!==g.COLGROUP&&n!==g.HTML&&Ae(e,t)},[i.EOF_TOKEN]:Oe},[P]:{[i.CHARACTER_TOKEN]:re,[i.NULL_CHARACTER_TOKEN]:ee,[i.WHITESPACE_CHARACTER_TOKEN]:re,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:Ue,[i.END_TAG_TOKEN]:Be,[i.EOF_TOKEN]:Oe},[$]:{[i.CHARACTER_TOKEN]:re,[i.NULL_CHARACTER_TOKEN]:ee,[i.WHITESPACE_CHARACTER_TOKEN]:re,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.CAPTION||n===g.TABLE||n===g.TBODY||n===g.TFOOT||n===g.THEAD||n===g.TR||n===g.TD||n===g.TH?(e.openElements.popUntilTagNamePopped(g.SELECT),e._resetInsertionMode(),e._processToken(t)):Ue(e,t)},[i.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.CAPTION||n===g.TABLE||n===g.TBODY||n===g.TFOOT||n===g.THEAD||n===g.TR||n===g.TD||n===g.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(g.SELECT),e._resetInsertionMode(),e._processToken(t)):Be(e,t)},[i.EOF_TOKEN]:Oe},[U]:{[i.CHARACTER_TOKEN]:me,[i.NULL_CHARACTER_TOKEN]:ee,[i.WHITESPACE_CHARACTER_TOKEN]:fe,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:function(e,t){const n=t.tagName;if(n===g.BASE||n===g.BASEFONT||n===g.BGSOUND||n===g.LINK||n===g.META||n===g.NOFRAMES||n===g.SCRIPT||n===g.STYLE||n===g.TEMPLATE||n===g.TITLE)le(e,t);else{const i=V[n]||I;e._popTmplInsertionMode(),e._pushTmplInsertionMode(i),e.insertionMode=i,e._processToken(t)}},[i.END_TAG_TOKEN]:function(e,t){t.tagName===g.TEMPLATE&&ue(e,t)},[i.EOF_TOKEN]:Fe},[B]:{[i.CHARACTER_TOKEN]:je,[i.NULL_CHARACTER_TOKEN]:je,[i.WHITESPACE_CHARACTER_TOKEN]:fe,[i.COMMENT_TOKEN]:function(e,t){e._appendCommentNode(t,e.openElements.items[0])},[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:function(e,t){t.tagName===g.HTML?Ce(e,t):je(e,t)},[i.END_TAG_TOKEN]:function(e,t){t.tagName===g.HTML?e.fragmentContext||(e.insertionMode=H):je(e,t)},[i.EOF_TOKEN]:oe},[F]:{[i.CHARACTER_TOKEN]:ee,[i.NULL_CHARACTER_TOKEN]:ee,[i.WHITESPACE_CHARACTER_TOKEN]:re,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.HTML?Ce(e,t):n===g.FRAMESET?e._insertElement(t,v.HTML):n===g.FRAME?(e._appendElement(t,v.HTML),t.ackSelfClosing=!0):n===g.NOFRAMES&&le(e,t)},[i.END_TAG_TOKEN]:function(e,t){t.tagName!==g.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagName===g.FRAMESET||(e.insertionMode=j))},[i.EOF_TOKEN]:oe},[j]:{[i.CHARACTER_TOKEN]:ee,[i.NULL_CHARACTER_TOKEN]:ee,[i.WHITESPACE_CHARACTER_TOKEN]:re,[i.COMMENT_TOKEN]:ne,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.HTML?Ce(e,t):n===g.NOFRAMES&&le(e,t)},[i.END_TAG_TOKEN]:function(e,t){t.tagName===g.HTML&&(e.insertionMode=K)},[i.EOF_TOKEN]:oe},[H]:{[i.CHARACTER_TOKEN]:He,[i.NULL_CHARACTER_TOKEN]:He,[i.WHITESPACE_CHARACTER_TOKEN]:fe,[i.COMMENT_TOKEN]:ie,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:function(e,t){t.tagName===g.HTML?Ce(e,t):He(e,t)},[i.END_TAG_TOKEN]:He,[i.EOF_TOKEN]:oe},[K]:{[i.CHARACTER_TOKEN]:ee,[i.NULL_CHARACTER_TOKEN]:ee,[i.WHITESPACE_CHARACTER_TOKEN]:fe,[i.COMMENT_TOKEN]:ie,[i.DOCTYPE_TOKEN]:ee,[i.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===g.HTML?Ce(e,t):n===g.NOFRAMES&&le(e,t)},[i.END_TAG_TOKEN]:ee,[i.EOF_TOKEN]:oe}};function W(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagName)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Me(e,t),n}function z(e,t){let n=null;for(let i=e.openElements.stackTop;i>=0;i--){const r=e.openElements.items[i];if(r===t.element)break;e._isSpecialElement(r)&&(n=r)}return n||(e.openElements.popUntilElementPopped(t.element),e.activeFormattingElements.removeEntry(t)),n}function Y(e,t,n){let i=t,r=e.openElements.getCommonAncestor(t);for(let o=0,s=r;s!==n;o++,s=r){r=e.openElements.getCommonAncestor(s);const n=e.activeFormattingElements.getElementEntry(s),a=n&&o>=3;!n||a?(a&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(s)):(s=X(e,n),i===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(i),e.treeAdapter.appendChild(s,i),i=s)}return i}function X(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),i=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,i),t.element=i,i}function J(e,t,n){if(e._isElementCausesFosterParenting(t))e._fosterParentElement(n);else{const i=e.treeAdapter.getTagName(t),r=e.treeAdapter.getNamespaceURI(t);i===g.TEMPLATE&&r===v.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Q(e,t,n){const i=e.treeAdapter.getNamespaceURI(n.element),r=n.token,o=e.treeAdapter.createElement(r.tagName,i,r.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,n.token),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o)}function Z(e,t){let n;for(let i=0;i<8&&(n=W(e,t),n);i++){const t=z(e,n);if(!t)break;e.activeFormattingElements.bookmark=n;const i=Y(e,t,n.element),r=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(i),J(e,r,i),Q(e,t,n)}}function ee(){}function te(e){e._err(p.misplacedDoctype)}function ne(e,t){e._appendCommentNode(t,e.openElements.currentTmplContent||e.openElements.current)}function ie(e,t){e._appendCommentNode(t,e.document)}function re(e,t){e._insertCharacters(t)}function oe(e){e.stopped=!0}function se(e,t){e._err(p.missingDoctype,{beforeToken:!0}),e.treeAdapter.setDocumentMode(e.document,m.DOCUMENT_MODE.QUIRKS),e.insertionMode=w,e._processToken(t)}function ae(e,t){e._insertFakeRootElement(),e.insertionMode=_,e._processToken(t)}function ce(e,t){e._insertFakeElement(g.HEAD),e.headElement=e.openElements.current,e.insertionMode=T,e._processToken(t)}function le(e,t){const n=t.tagName;n===g.HTML?Ce(e,t):n===g.BASE||n===g.BASEFONT||n===g.BGSOUND||n===g.LINK||n===g.META?(e._appendElement(t,v.HTML),t.ackSelfClosing=!0):n===g.TITLE?e._switchToTextParsing(t,i.MODE.RCDATA):n===g.NOSCRIPT?e.options.scriptingEnabled?e._switchToTextParsing(t,i.MODE.RAWTEXT):(e._insertElement(t,v.HTML),e.insertionMode=x):n===g.NOFRAMES||n===g.STYLE?e._switchToTextParsing(t,i.MODE.RAWTEXT):n===g.SCRIPT?e._switchToTextParsing(t,i.MODE.SCRIPT_DATA):n===g.TEMPLATE?(e._insertTemplate(t,v.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=U,e._pushTmplInsertionMode(U)):n===g.HEAD?e._err(p.misplacedStartTagForHeadElement):de(e,t)}function ue(e,t){const n=t.tagName;n===g.HEAD?(e.openElements.pop(),e.insertionMode=C):n===g.BODY||n===g.BR||n===g.HTML?de(e,t):n===g.TEMPLATE&&e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagName!==g.TEMPLATE&&e._err(p.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(g.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode()):e._err(p.endTagWithoutMatchingOpenElement)}function de(e,t){e.openElements.pop(),e.insertionMode=C,e._processToken(t)}function he(e,t){const n=t.type===i.EOF_TOKEN?p.openElementsLeftAfterEof:p.disallowedContentInNoscriptInHead;e._err(n),e.openElements.pop(),e.insertionMode=T,e._processToken(t)}function pe(e,t){e._insertFakeElement(g.BODY),e.insertionMode=I,e._processToken(t)}function fe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function me(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function ge(e,t){e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._insertElement(t,v.HTML)}function ve(e,t){e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._insertElement(t,v.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function ye(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function be(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Ee(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,v.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Se(e,t){e._appendElement(t,v.HTML),t.ackSelfClosing=!0}function we(e,t){e._switchToTextParsing(t,i.MODE.RAWTEXT)}function _e(e,t){e.openElements.currentTagName===g.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML)}function Te(e,t){e.openElements.hasInScope(g.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,v.HTML)}function xe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML)}function Ce(e,t){const n=t.tagName;switch(n.length){case 1:n===g.I||n===g.S||n===g.B||n===g.U?ye(e,t):n===g.P?ge(e,t):n===g.A?function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(g.A);n&&(Z(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):xe(e,t);break;case 2:n===g.DL||n===g.OL||n===g.UL?ge(e,t):n===g.H1||n===g.H2||n===g.H3||n===g.H4||n===g.H5||n===g.H6?function(e,t){e.openElements.hasInButtonScope(g.P)&&e._closePElement();const n=e.openElements.currentTagName;n!==g.H1&&n!==g.H2&&n!==g.H3&&n!==g.H4&&n!==g.H5&&n!==g.H6||e.openElements.pop(),e._insertElement(t,v.HTML)}(e,t):n===g.LI||n===g.DD||n===g.DT?function(e,t){e.framesetOk=!1;const n=t.tagName;for(let t=e.openElements.stackTop;t>=0;t--){const i=e.openElements.items[t],r=e.treeAdapter.getTagName(i);let o=null;if(n===g.LI&&r===g.LI?o=g.LI:n!==g.DD&&n!==g.DT||r!==g.DD&&r!==g.DT||(o=r),o){e.openElements.generateImpliedEndTagsWithExclusion(o),e.openElements.popUntilTagNamePopped(o);break}if(r!==g.ADDRESS&&r!==g.DIV&&r!==g.P&&e._isSpecialElement(i))break}e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._insertElement(t,v.HTML)}(e,t):n===g.EM||n===g.TT?ye(e,t):n===g.BR?Ee(e,t):n===g.HR?function(e,t){e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._appendElement(t,v.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t):n===g.RB?Te(e,t):n===g.RT||n===g.RP?function(e,t){e.openElements.hasInScope(g.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(g.RTC),e._insertElement(t,v.HTML)}(e,t):n!==g.TH&&n!==g.TD&&n!==g.TR&&xe(e,t);break;case 3:n===g.DIV||n===g.DIR||n===g.NAV?ge(e,t):n===g.PRE?ve(e,t):n===g.BIG?ye(e,t):n===g.IMG||n===g.WBR?Ee(e,t):n===g.XMP?function(e,t){e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,i.MODE.RAWTEXT)}(e,t):n===g.SVG?function(e,t){e._reconstructActiveFormattingElements(),h.adjustTokenSVGAttrs(t),h.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,v.SVG):e._insertElement(t,v.SVG),t.ackSelfClosing=!0}(e,t):n===g.RTC?Te(e,t):n!==g.COL&&xe(e,t);break;case 4:n===g.HTML?function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t):n===g.BASE||n===g.LINK||n===g.META?le(e,t):n===g.BODY?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t):n===g.MAIN||n===g.MENU?ge(e,t):n===g.FORM?function(e,t){const n=e.openElements.tmplCount>0;e.formElement&&!n||(e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._insertElement(t,v.HTML),n||(e.formElement=e.openElements.current))}(e,t):n===g.CODE||n===g.FONT?ye(e,t):n===g.NOBR?function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(g.NOBR)&&(Z(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,v.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):n===g.AREA?Ee(e,t):n===g.MATH?function(e,t){e._reconstructActiveFormattingElements(),h.adjustTokenMathMLAttrs(t),h.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,v.MATHML):e._insertElement(t,v.MATHML),t.ackSelfClosing=!0}(e,t):n===g.MENU?function(e,t){e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._insertElement(t,v.HTML)}(e,t):n!==g.HEAD&&xe(e,t);break;case 5:n===g.STYLE||n===g.TITLE?le(e,t):n===g.ASIDE?ge(e,t):n===g.SMALL?ye(e,t):n===g.TABLE?function(e,t){e.treeAdapter.getDocumentMode(e.document)!==m.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._insertElement(t,v.HTML),e.framesetOk=!1,e.insertionMode=M}(e,t):n===g.EMBED?Ee(e,t):n===g.INPUT?function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,v.HTML);const n=i.getTokenAttr(t,y.TYPE);n&&n.toLowerCase()===E||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t):n===g.PARAM||n===g.TRACK?Se(e,t):n===g.IMAGE?function(e,t){t.tagName=g.IMG,Ee(e,t)}(e,t):n!==g.FRAME&&n!==g.TBODY&&n!==g.TFOOT&&n!==g.THEAD&&xe(e,t);break;case 6:n===g.SCRIPT?le(e,t):n===g.CENTER||n===g.FIGURE||n===g.FOOTER||n===g.HEADER||n===g.HGROUP||n===g.DIALOG?ge(e,t):n===g.BUTTON?function(e,t){e.openElements.hasInScope(g.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(g.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML),e.framesetOk=!1}(e,t):n===g.STRIKE||n===g.STRONG?ye(e,t):n===g.APPLET||n===g.OBJECT?be(e,t):n===g.KEYGEN?Ee(e,t):n===g.SOURCE?Se(e,t):n===g.IFRAME?function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,i.MODE.RAWTEXT)}(e,t):n===g.SELECT?function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,v.HTML),e.framesetOk=!1,e.insertionMode===M||e.insertionMode===O||e.insertionMode===L||e.insertionMode===D||e.insertionMode===N?e.insertionMode=$:e.insertionMode=P}(e,t):n===g.OPTION?_e(e,t):xe(e,t);break;case 7:n===g.BGSOUND?le(e,t):n===g.DETAILS||n===g.ADDRESS||n===g.ARTICLE||n===g.SECTION||n===g.SUMMARY?ge(e,t):n===g.LISTING?ve(e,t):n===g.MARQUEE?be(e,t):n===g.NOEMBED?we(e,t):n!==g.CAPTION&&xe(e,t);break;case 8:n===g.BASEFONT?le(e,t):n===g.FRAMESET?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,v.HTML),e.insertionMode=F)}(e,t):n===g.FIELDSET?ge(e,t):n===g.TEXTAREA?function(e,t){e._insertElement(t,v.HTML),e.skipNextNewLine=!0,e.tokenizer.state=i.MODE.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=k}(e,t):n===g.TEMPLATE?le(e,t):n===g.NOSCRIPT?e.options.scriptingEnabled?we(e,t):xe(e,t):n===g.OPTGROUP?_e(e,t):n!==g.COLGROUP&&xe(e,t);break;case 9:n===g.PLAINTEXT?function(e,t){e.openElements.hasInButtonScope(g.P)&&e._closePElement(),e._insertElement(t,v.HTML),e.tokenizer.state=i.MODE.PLAINTEXT}(e,t):xe(e,t);break;case 10:n===g.BLOCKQUOTE||n===g.FIGCAPTION?ge(e,t):xe(e,t);break;default:xe(e,t)}}function Ie(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function ke(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Me(e,t){const n=t.tagName;for(let t=e.openElements.stackTop;t>0;t--){const i=e.openElements.items[t];if(e.treeAdapter.getTagName(i)===n){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilElementPopped(i);break}if(e._isSpecialElement(i))break}}function Ae(e,t){const n=t.tagName;switch(n.length){case 1:n===g.A||n===g.B||n===g.I||n===g.S||n===g.U?Z(e,t):n===g.P?function(e){e.openElements.hasInButtonScope(g.P)||e._insertFakeElement(g.P),e._closePElement()}(e):Me(e,t);break;case 2:n===g.DL||n===g.UL||n===g.OL?Ie(e,t):n===g.LI?function(e){e.openElements.hasInListItemScope(g.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(g.LI),e.openElements.popUntilTagNamePopped(g.LI))}(e):n===g.DD||n===g.DT?function(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t):n===g.H1||n===g.H2||n===g.H3||n===g.H4||n===g.H5||n===g.H6?function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e):n===g.BR?function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(g.BR),e.openElements.pop(),e.framesetOk=!1}(e):n===g.EM||n===g.TT?Z(e,t):Me(e,t);break;case 3:n===g.BIG?Z(e,t):n===g.DIR||n===g.DIV||n===g.NAV||n===g.PRE?Ie(e,t):Me(e,t);break;case 4:n===g.BODY?function(e){e.openElements.hasInScope(g.BODY)&&(e.insertionMode=B)}(e):n===g.HTML?function(e,t){e.openElements.hasInScope(g.BODY)&&(e.insertionMode=B,e._processToken(t))}(e,t):n===g.FORM?function(e){const t=e.openElements.tmplCount>0,n=e.formElement;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(g.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(g.FORM):e.openElements.remove(n))}(e):n===g.CODE||n===g.FONT||n===g.NOBR?Z(e,t):n===g.MAIN||n===g.MENU?Ie(e,t):Me(e,t);break;case 5:n===g.ASIDE?Ie(e,t):n===g.SMALL?Z(e,t):Me(e,t);break;case 6:n===g.CENTER||n===g.FIGURE||n===g.FOOTER||n===g.HEADER||n===g.HGROUP||n===g.DIALOG?Ie(e,t):n===g.APPLET||n===g.OBJECT?ke(e,t):n===g.STRIKE||n===g.STRONG?Z(e,t):Me(e,t);break;case 7:n===g.ADDRESS||n===g.ARTICLE||n===g.DETAILS||n===g.SECTION||n===g.SUMMARY||n===g.LISTING?Ie(e,t):n===g.MARQUEE?ke(e,t):Me(e,t);break;case 8:n===g.FIELDSET?Ie(e,t):n===g.TEMPLATE?ue(e,t):Me(e,t);break;case 10:n===g.BLOCKQUOTE||n===g.FIGCAPTION?Ie(e,t):Me(e,t);break;default:Me(e,t)}}function Oe(e,t){e.tmplInsertionModeStackTop>-1?Fe(e,t):e.stopped=!0}function Re(e,t){const n=e.openElements.currentTagName;n===g.TABLE||n===g.TBODY||n===g.TFOOT||n===g.THEAD||n===g.TR?(e.pendingCharacterTokens=[],e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=A,e._processToken(t)):Ne(e,t)}function Le(e,t){const n=t.tagName;switch(n.length){case 2:n===g.TD||n===g.TH||n===g.TR?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(g.TBODY),e.insertionMode=L,e._processToken(t)}(e,t):Ne(e,t);break;case 3:n===g.COL?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(g.COLGROUP),e.insertionMode=R,e._processToken(t)}(e,t):Ne(e,t);break;case 4:n===g.FORM?function(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,v.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t):Ne(e,t);break;case 5:n===g.TABLE?function(e,t){e.openElements.hasInTableScope(g.TABLE)&&(e.openElements.popUntilTagNamePopped(g.TABLE),e._resetInsertionMode(),e._processToken(t))}(e,t):n===g.STYLE?le(e,t):n===g.TBODY||n===g.TFOOT||n===g.THEAD?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,v.HTML),e.insertionMode=L}(e,t):n===g.INPUT?function(e,t){const n=i.getTokenAttr(t,y.TYPE);n&&n.toLowerCase()===E?e._appendElement(t,v.HTML):Ne(e,t),t.ackSelfClosing=!0}(e,t):Ne(e,t);break;case 6:n===g.SCRIPT?le(e,t):Ne(e,t);break;case 7:n===g.CAPTION?function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,v.HTML),e.insertionMode=O}(e,t):Ne(e,t);break;case 8:n===g.COLGROUP?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,v.HTML),e.insertionMode=R}(e,t):n===g.TEMPLATE?le(e,t):Ne(e,t);break;default:Ne(e,t)}}function De(e,t){const n=t.tagName;n===g.TABLE?e.openElements.hasInTableScope(g.TABLE)&&(e.openElements.popUntilTagNamePopped(g.TABLE),e._resetInsertionMode()):n===g.TEMPLATE?ue(e,t):n!==g.BODY&&n!==g.CAPTION&&n!==g.COL&&n!==g.COLGROUP&&n!==g.HTML&&n!==g.TBODY&&n!==g.TD&&n!==g.TFOOT&&n!==g.TH&&n!==g.THEAD&&n!==g.TR&&Ne(e,t)}function Ne(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,e._processTokenInBodyMode(t),e.fosterParentingEnabled=n}function Pe(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Ne(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}function $e(e,t){e.openElements.currentTagName===g.COLGROUP&&(e.openElements.pop(),e.insertionMode=M,e._processToken(t))}function Ue(e,t){const n=t.tagName;n===g.HTML?Ce(e,t):n===g.OPTION?(e.openElements.currentTagName===g.OPTION&&e.openElements.pop(),e._insertElement(t,v.HTML)):n===g.OPTGROUP?(e.openElements.currentTagName===g.OPTION&&e.openElements.pop(),e.openElements.currentTagName===g.OPTGROUP&&e.openElements.pop(),e._insertElement(t,v.HTML)):n===g.INPUT||n===g.KEYGEN||n===g.TEXTAREA||n===g.SELECT?e.openElements.hasInSelectScope(g.SELECT)&&(e.openElements.popUntilTagNamePopped(g.SELECT),e._resetInsertionMode(),n!==g.SELECT&&e._processToken(t)):n!==g.SCRIPT&&n!==g.TEMPLATE||le(e,t)}function Be(e,t){const n=t.tagName;if(n===g.OPTGROUP){const t=e.openElements.items[e.openElements.stackTop-1],n=t&&e.treeAdapter.getTagName(t);e.openElements.currentTagName===g.OPTION&&n===g.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagName===g.OPTGROUP&&e.openElements.pop()}else n===g.OPTION?e.openElements.currentTagName===g.OPTION&&e.openElements.pop():n===g.SELECT&&e.openElements.hasInSelectScope(g.SELECT)?(e.openElements.popUntilTagNamePopped(g.SELECT),e._resetInsertionMode()):n===g.TEMPLATE&&ue(e,t)}function Fe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(g.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode(),e._processToken(t)):e.stopped=!0}function je(e,t){e.insertionMode=I,e._processToken(t)}function He(e,t){e.insertionMode=I,e._processToken(t)}e.exports=class{constructor(e){this.options=u(b,e),this.treeAdapter=this.options.treeAdapter,this.pendingScript=null,this.options.sourceCodeLocationInfo&&c.install(this,s),this.options.onParseError&&c.install(this,a,{onParseError:this.options.onParseError})}parse(e){const t=this.treeAdapter.createDocument();return this._bootstrap(t,null),this.tokenizer.write(e,!0),this._runParsingLoop(null),t}parseFragment(e,t){t||(t=this.treeAdapter.createElement(g.TEMPLATE,v.HTML,[]));const n=this.treeAdapter.createElement("documentmock",v.HTML,[]);this._bootstrap(n,t),this.treeAdapter.getTagName(t)===g.TEMPLATE&&this._pushTmplInsertionMode(U),this._initTokenizerForFragmentParsing(),this._insertFakeRootElement(),this._resetInsertionMode(),this._findFormInFragmentContext(),this.tokenizer.write(e,!0),this._runParsingLoop(null);const i=this.treeAdapter.getFirstChild(n),r=this.treeAdapter.createDocumentFragment();return this._adoptNodes(i,r),r}_bootstrap(e,t){this.tokenizer=new i(this.options),this.stopped=!1,this.insertionMode=S,this.originalInsertionMode="",this.document=e,this.fragmentContext=t,this.headElement=null,this.formElement=null,this.openElements=new r(this.document,this.treeAdapter),this.activeFormattingElements=new o(this.treeAdapter),this.tmplInsertionModeStack=[],this.tmplInsertionModeStackTop=-1,this.currentTmplInsertionMode=null,this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1}_err(){}_runParsingLoop(e){for(;!this.stopped;){this._setupTokenizerCDATAMode();const t=this.tokenizer.getNextToken();if(t.type===i.HIBERNATION_TOKEN)break;if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.type===i.WHITESPACE_CHARACTER_TOKEN&&"\n"===t.chars[0])){if(1===t.chars.length)continue;t.chars=t.chars.substr(1)}if(this._processInputToken(t),e&&this.pendingScript)break}}runParsingLoopForCurrentChunk(e,t){if(this._runParsingLoop(t),t&&this.pendingScript){const e=this.pendingScript;return this.pendingScript=null,void t(e)}e&&e()}_setupTokenizerCDATAMode(){const e=this._getAdjustedCurrentElement();this.tokenizer.allowCDATA=e&&e!==this.document&&this.treeAdapter.getNamespaceURI(e)!==v.HTML&&!this._isIntegrationPoint(e)}_switchToTextParsing(e,t){this._insertElement(e,v.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=k}switchToPlaintextParsing(){this.insertionMode=k,this.originalInsertionMode=I,this.tokenizer.state=i.MODE.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;do{if(this.treeAdapter.getTagName(e)===g.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}while(e)}_initTokenizerForFragmentParsing(){if(this.treeAdapter.getNamespaceURI(this.fragmentContext)===v.HTML){const e=this.treeAdapter.getTagName(this.fragmentContext);e===g.TITLE||e===g.TEXTAREA?this.tokenizer.state=i.MODE.RCDATA:e===g.STYLE||e===g.XMP||e===g.IFRAME||e===g.NOEMBED||e===g.NOFRAMES||e===g.NOSCRIPT?this.tokenizer.state=i.MODE.RAWTEXT:e===g.SCRIPT?this.tokenizer.state=i.MODE.SCRIPT_DATA:e===g.PLAINTEXT&&(this.tokenizer.state=i.MODE.PLAINTEXT)}}_setDocumentType(e){const t=e.name||"",n=e.publicId||"",i=e.systemId||"";this.treeAdapter.setDocumentType(this.document,t,n,i)}_attachElementToTree(e){if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.appendChild(t,e)}}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n),this.openElements.push(n)}_insertFakeElement(e){const t=this.treeAdapter.createElement(e,v.HTML,[]);this._attachElementToTree(t),this.openElements.push(t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,v.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t),this.openElements.push(t)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(g.HTML,v.HTML,[]);this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n)}_insertCharacters(e){if(this._shouldFosterParentOnInsertion())this._fosterParentText(e.chars);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.insertText(t,e.chars)}}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_shouldProcessTokenInForeignContent(e){const t=this._getAdjustedCurrentElement();if(!t||t===this.document)return!1;const n=this.treeAdapter.getNamespaceURI(t);if(n===v.HTML)return!1;if(this.treeAdapter.getTagName(t)===g.ANNOTATION_XML&&n===v.MATHML&&e.type===i.START_TAG_TOKEN&&e.tagName===g.SVG)return!1;const r=e.type===i.CHARACTER_TOKEN||e.type===i.NULL_CHARACTER_TOKEN||e.type===i.WHITESPACE_CHARACTER_TOKEN;return!((e.type===i.START_TAG_TOKEN&&e.tagName!==g.MGLYPH&&e.tagName!==g.MALIGNMARK||r)&&this._isIntegrationPoint(t,v.MATHML)||(e.type===i.START_TAG_TOKEN||r)&&this._isIntegrationPoint(t,v.HTML)||e.type===i.EOF_TOKEN)}_processToken(e){G[this.insertionMode][e.type](this,e)}_processTokenInBodyMode(e){G.IN_BODY_MODE[e.type](this,e)}_processTokenInForeignContent(e){e.type===i.CHARACTER_TOKEN?function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e):e.type===i.NULL_CHARACTER_TOKEN?function(e,t){t.chars=f.REPLACEMENT_CHARACTER,e._insertCharacters(t)}(this,e):e.type===i.WHITESPACE_CHARACTER_TOKEN?re(this,e):e.type===i.COMMENT_TOKEN?ne(this,e):e.type===i.START_TAG_TOKEN?function(e,t){if(h.causesExit(t)&&!e.fragmentContext){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==v.HTML&&!e._isIntegrationPoint(e.openElements.current);)e.openElements.pop();e._processToken(t)}else{const n=e._getAdjustedCurrentElement(),i=e.treeAdapter.getNamespaceURI(n);i===v.MATHML?h.adjustTokenMathMLAttrs(t):i===v.SVG&&(h.adjustTokenSVGTagName(t),h.adjustTokenSVGAttrs(t)),h.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,i):e._insertElement(t,i),t.ackSelfClosing=!0}}(this,e):e.type===i.END_TAG_TOKEN&&function(e,t){for(let n=e.openElements.stackTop;n>0;n--){const i=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(i)===v.HTML){e._processToken(t);break}if(e.treeAdapter.getTagName(i).toLowerCase()===t.tagName){e.openElements.popUntilElementPopped(i);break}}}(this,e)}_processInputToken(e){this._shouldProcessTokenInForeignContent(e)?this._processTokenInForeignContent(e):this._processToken(e),e.type===i.START_TAG_TOKEN&&e.selfClosing&&!e.ackSelfClosing&&this._err(p.nonVoidHtmlElementStartTagWithTrailingSolidus)}_isIntegrationPoint(e,t){const n=this.treeAdapter.getTagName(e),i=this.treeAdapter.getNamespaceURI(e),r=this.treeAdapter.getAttrList(e);return h.isIntegrationPoint(n,i,r,t)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.length;if(e){let t=e,n=null;do{if(t--,n=this.activeFormattingElements.entries[t],n.type===o.MARKER_ENTRY||this.openElements.contains(n.element)){t++;break}}while(t>0);for(let i=t;i<e;i++)n=this.activeFormattingElements.entries[i],this._insertElement(n.token,this.treeAdapter.getNamespaceURI(n.element)),n.element=this.openElements.current}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=D}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(g.P),this.openElements.popUntilTagNamePopped(g.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop,t=!1;e>=0;e--){let n=this.openElements.items[e];0===e&&(t=!0,this.fragmentContext&&(n=this.fragmentContext));const i=this.treeAdapter.getTagName(n),r=q[i];if(r){this.insertionMode=r;break}if(!(t||i!==g.TD&&i!==g.TH)){this.insertionMode=N;break}if(!t&&i===g.HEAD){this.insertionMode=T;break}if(i===g.SELECT){this._resetInsertionModeForSelect(e);break}if(i===g.TEMPLATE){this.insertionMode=this.currentTmplInsertionMode;break}if(i===g.HTML){this.insertionMode=this.headElement?C:_;break}if(t){this.insertionMode=I;break}}}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.items[t],n=this.treeAdapter.getTagName(e);if(n===g.TEMPLATE)break;if(n===g.TABLE)return void(this.insertionMode=$)}this.insertionMode=P}_pushTmplInsertionMode(e){this.tmplInsertionModeStack.push(e),this.tmplInsertionModeStackTop++,this.currentTmplInsertionMode=e}_popTmplInsertionMode(){this.tmplInsertionModeStack.pop(),this.tmplInsertionModeStackTop--,this.currentTmplInsertionMode=this.tmplInsertionModeStack[this.tmplInsertionModeStackTop]}_isElementCausesFosterParenting(e){const t=this.treeAdapter.getTagName(e);return t===g.TABLE||t===g.TBODY||t===g.TFOOT||t===g.THEAD||t===g.TR}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.current)}_findFosterParentingLocation(){const e={parent:null,beforeElement:null};for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t],i=this.treeAdapter.getTagName(n),r=this.treeAdapter.getNamespaceURI(n);if(i===g.TEMPLATE&&r===v.HTML){e.parent=this.treeAdapter.getTemplateContent(n);break}if(i===g.TABLE){e.parent=this.treeAdapter.getParentNode(n),e.parent?e.beforeElement=n:e.parent=this.openElements.items[t-1];break}}return e.parent||(e.parent=this.openElements.items[0]),e}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_fosterParentText(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertTextBefore(t.parent,e,t.beforeElement):this.treeAdapter.insertText(t.parent,e)}_isSpecialElement(e){const t=this.treeAdapter.getTagName(e),n=this.treeAdapter.getNamespaceURI(e);return m.SPECIAL_ELEMENTS[n][t]}}},46519:(e,t,n)=>{"use strict";const i=n(16152),r=i.TAG_NAMES,o=i.NAMESPACES;function s(e){switch(e.length){case 1:return e===r.P;case 2:return e===r.RB||e===r.RP||e===r.RT||e===r.DD||e===r.DT||e===r.LI;case 3:return e===r.RTC;case 6:return e===r.OPTION;case 8:return e===r.OPTGROUP}return!1}function a(e){switch(e.length){case 1:return e===r.P;case 2:return e===r.RB||e===r.RP||e===r.RT||e===r.DD||e===r.DT||e===r.LI||e===r.TD||e===r.TH||e===r.TR;case 3:return e===r.RTC;case 5:return e===r.TBODY||e===r.TFOOT||e===r.THEAD;case 6:return e===r.OPTION;case 7:return e===r.CAPTION;case 8:return e===r.OPTGROUP||e===r.COLGROUP}return!1}function c(e,t){switch(e.length){case 2:if(e===r.TD||e===r.TH)return t===o.HTML;if(e===r.MI||e===r.MO||e===r.MN||e===r.MS)return t===o.MATHML;break;case 4:if(e===r.HTML)return t===o.HTML;if(e===r.DESC)return t===o.SVG;break;case 5:if(e===r.TABLE)return t===o.HTML;if(e===r.MTEXT)return t===o.MATHML;if(e===r.TITLE)return t===o.SVG;break;case 6:return(e===r.APPLET||e===r.OBJECT)&&t===o.HTML;case 7:return(e===r.CAPTION||e===r.MARQUEE)&&t===o.HTML;case 8:return e===r.TEMPLATE&&t===o.HTML;case 13:return e===r.FOREIGN_OBJECT&&t===o.SVG;case 14:return e===r.ANNOTATION_XML&&t===o.MATHML}return!1}e.exports=class{constructor(e,t){this.stackTop=-1,this.items=[],this.current=e,this.currentTagName=null,this.currentTmplContent=null,this.tmplCount=0,this.treeAdapter=t}_indexOf(e){let t=-1;for(let n=this.stackTop;n>=0;n--)if(this.items[n]===e){t=n;break}return t}_isInTemplate(){return this.currentTagName===r.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===o.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagName=this.current&&this.treeAdapter.getTagName(this.current),this.currentTmplContent=this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):null}push(e){this.items[++this.stackTop]=e,this._updateCurrentElement(),this._isInTemplate()&&this.tmplCount++}pop(){this.stackTop--,this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this._updateCurrentElement()}replace(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&this._updateCurrentElement()}insertAfter(e,t){const n=this._indexOf(e)+1;this.items.splice(n,0,t),n===++this.stackTop&&this._updateCurrentElement()}popUntilTagNamePopped(e){for(;this.stackTop>-1;){const t=this.currentTagName,n=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),t===e&&n===o.HTML)break}}popUntilElementPopped(e){for(;this.stackTop>-1;){const t=this.current;if(this.pop(),t===e)break}}popUntilNumberedHeaderPopped(){for(;this.stackTop>-1;){const e=this.currentTagName,t=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===r.H1||e===r.H2||e===r.H3||e===r.H4||e===r.H5||e===r.H6&&t===o.HTML)break}}popUntilTableCellPopped(){for(;this.stackTop>-1;){const e=this.currentTagName,t=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===r.TD||e===r.TH&&t===o.HTML)break}}popAllUpToHtmlElement(){this.stackTop=0,this._updateCurrentElement()}clearBackToTableContext(){for(;this.currentTagName!==r.TABLE&&this.currentTagName!==r.TEMPLATE&&this.currentTagName!==r.HTML||this.treeAdapter.getNamespaceURI(this.current)!==o.HTML;)this.pop()}clearBackToTableBodyContext(){for(;this.currentTagName!==r.TBODY&&this.currentTagName!==r.TFOOT&&this.currentTagName!==r.THEAD&&this.currentTagName!==r.TEMPLATE&&this.currentTagName!==r.HTML||this.treeAdapter.getNamespaceURI(this.current)!==o.HTML;)this.pop()}clearBackToTableRowContext(){for(;this.currentTagName!==r.TR&&this.currentTagName!==r.TEMPLATE&&this.currentTagName!==r.HTML||this.treeAdapter.getNamespaceURI(this.current)!==o.HTML;)this.pop()}remove(e){for(let t=this.stackTop;t>=0;t--)if(this.items[t]===e){this.items.splice(t,1),this.stackTop--,this._updateCurrentElement();break}}tryPeekProperlyNestedBodyElement(){const e=this.items[1];return e&&this.treeAdapter.getTagName(e)===r.BODY?e:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){let t=this._indexOf(e);return--t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.currentTagName===r.HTML}hasInScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),i=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&i===o.HTML)return!0;if(c(n,i))return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.treeAdapter.getTagName(this.items[e]),n=this.treeAdapter.getNamespaceURI(this.items[e]);if((t===r.H1||t===r.H2||t===r.H3||t===r.H4||t===r.H5||t===r.H6)&&n===o.HTML)return!0;if(c(t,n))return!1}return!0}hasInListItemScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),i=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&i===o.HTML)return!0;if((n===r.UL||n===r.OL)&&i===o.HTML||c(n,i))return!1}return!0}hasInButtonScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),i=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&i===o.HTML)return!0;if(n===r.BUTTON&&i===o.HTML||c(n,i))return!1}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===o.HTML){if(n===e)return!0;if(n===r.TABLE||n===r.TEMPLATE||n===r.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const t=this.treeAdapter.getTagName(this.items[e]);if(this.treeAdapter.getNamespaceURI(this.items[e])===o.HTML){if(t===r.TBODY||t===r.THEAD||t===r.TFOOT)return!0;if(t===r.TABLE||t===r.HTML)return!1}}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===o.HTML){if(n===e)return!0;if(n!==r.OPTION&&n!==r.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;s(this.currentTagName);)this.pop()}generateImpliedEndTagsThoroughly(){for(;a(this.currentTagName);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;s(this.currentTagName)&&this.currentTagName!==e;)this.pop()}}},55763:(e,t,n)=>{"use strict";const i=n(77118),r=n(54284),o=n(5482),s=n(41734),a=r.CODE_POINTS,c=r.CODE_POINT_SEQUENCES,l={128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},u="DATA_STATE",d="RCDATA_STATE",h="RAWTEXT_STATE",p="SCRIPT_DATA_STATE",f="PLAINTEXT_STATE",m="TAG_OPEN_STATE",g="END_TAG_OPEN_STATE",v="TAG_NAME_STATE",y="RCDATA_LESS_THAN_SIGN_STATE",b="RCDATA_END_TAG_OPEN_STATE",E="RCDATA_END_TAG_NAME_STATE",S="RAWTEXT_LESS_THAN_SIGN_STATE",w="RAWTEXT_END_TAG_OPEN_STATE",_="RAWTEXT_END_TAG_NAME_STATE",T="SCRIPT_DATA_LESS_THAN_SIGN_STATE",x="SCRIPT_DATA_END_TAG_OPEN_STATE",C="SCRIPT_DATA_END_TAG_NAME_STATE",I="SCRIPT_DATA_ESCAPE_START_STATE",k="SCRIPT_DATA_ESCAPE_START_DASH_STATE",M="SCRIPT_DATA_ESCAPED_STATE",A="SCRIPT_DATA_ESCAPED_DASH_STATE",O="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",R="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE",L="SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE",D="SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE",N="SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE",P="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",$="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE",U="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE",B="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",F="SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE",j="BEFORE_ATTRIBUTE_NAME_STATE",H="ATTRIBUTE_NAME_STATE",K="AFTER_ATTRIBUTE_NAME_STATE",q="BEFORE_ATTRIBUTE_VALUE_STATE",V="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE",G="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE",W="ATTRIBUTE_VALUE_UNQUOTED_STATE",z="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE",Y="SELF_CLOSING_START_TAG_STATE",X="BOGUS_COMMENT_STATE",J="MARKUP_DECLARATION_OPEN_STATE",Q="COMMENT_START_STATE",Z="COMMENT_START_DASH_STATE",ee="COMMENT_STATE",te="COMMENT_LESS_THAN_SIGN_STATE",ne="COMMENT_LESS_THAN_SIGN_BANG_STATE",ie="COMMENT_LESS_THAN_SIGN_BANG_DASH_STATE",re="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH_STATE",oe="COMMENT_END_DASH_STATE",se="COMMENT_END_STATE",ae="COMMENT_END_BANG_STATE",ce="DOCTYPE_STATE",le="BEFORE_DOCTYPE_NAME_STATE",ue="DOCTYPE_NAME_STATE",de="AFTER_DOCTYPE_NAME_STATE",he="AFTER_DOCTYPE_PUBLIC_KEYWORD_STATE",pe="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE",fe="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE",me="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE",ge="AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE",ve="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE",ye="AFTER_DOCTYPE_SYSTEM_KEYWORD_STATE",be="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE",Ee="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE",Se="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE",we="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE",_e="BOGUS_DOCTYPE_STATE",Te="CDATA_SECTION_STATE",xe="CDATA_SECTION_BRACKET_STATE",Ce="CDATA_SECTION_END_STATE",Ie="CHARACTER_REFERENCE_STATE",ke="NAMED_CHARACTER_REFERENCE_STATE",Me="AMBIGUOS_AMPERSAND_STATE",Ae="NUMERIC_CHARACTER_REFERENCE_STATE",Oe="HEXADEMICAL_CHARACTER_REFERENCE_START_STATE",Re="DECIMAL_CHARACTER_REFERENCE_START_STATE",Le="HEXADEMICAL_CHARACTER_REFERENCE_STATE",De="DECIMAL_CHARACTER_REFERENCE_STATE",Ne="NUMERIC_CHARACTER_REFERENCE_END_STATE";function Pe(e){return e===a.SPACE||e===a.LINE_FEED||e===a.TABULATION||e===a.FORM_FEED}function $e(e){return e>=a.DIGIT_0&&e<=a.DIGIT_9}function Ue(e){return e>=a.LATIN_CAPITAL_A&&e<=a.LATIN_CAPITAL_Z}function Be(e){return e>=a.LATIN_SMALL_A&&e<=a.LATIN_SMALL_Z}function Fe(e){return Be(e)||Ue(e)}function je(e){return Fe(e)||$e(e)}function He(e){return e>=a.LATIN_CAPITAL_A&&e<=a.LATIN_CAPITAL_F}function Ke(e){return e>=a.LATIN_SMALL_A&&e<=a.LATIN_SMALL_F}function qe(e){return e+32}function Ve(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(e>>>10&1023|55296)+String.fromCharCode(56320|1023&e))}function Ge(e){return String.fromCharCode(qe(e))}function We(e,t){const n=o[++e];let i=++e,r=i+n-1;for(;i<=r;){const e=i+r>>>1,s=o[e];if(s<t)i=e+1;else{if(!(s>t))return o[e+n];r=e-1}}return-1}class ze{constructor(){this.preprocessor=new i,this.tokenQueue=[],this.allowCDATA=!1,this.state=u,this.returnState="",this.charRefCode=-1,this.tempBuff=[],this.lastStartTagName="",this.consumedAfterSnapshot=-1,this.active=!1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr=null}_err(){}_errOnNextCodePoint(e){this._consume(),this._err(e),this._unconsume()}getNextToken(){for(;!this.tokenQueue.length&&this.active;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this[this.state](e)}return this.tokenQueue.shift()}write(e,t){this.active=!0,this.preprocessor.write(e,t)}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e)}_ensureHibernation(){if(this.preprocessor.endOfChunkHit){for(;this.consumedAfterSnapshot>0;this.consumedAfterSnapshot--)this.preprocessor.retreat();return this.active=!1,this.tokenQueue.push({type:ze.HIBERNATION_TOKEN}),!0}return!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(){this.consumedAfterSnapshot--,this.preprocessor.retreat()}_reconsumeInState(e){this.state=e,this._unconsume()}_consumeSequenceIfMatch(e,t,n){let i=0,r=!0;const o=e.length;let s,c=0,l=t;for(;c<o;c++){if(c>0&&(l=this._consume(),i++),l===a.EOF){r=!1;break}if(s=e[c],l!==s&&(n||l!==qe(s))){r=!1;break}}if(!r)for(;i--;)this._unconsume();return r}_isTempBufferEqualToScriptString(){if(this.tempBuff.length!==c.SCRIPT_STRING.length)return!1;for(let e=0;e<this.tempBuff.length;e++)if(this.tempBuff[e]!==c.SCRIPT_STRING[e])return!1;return!0}_createStartTagToken(){this.currentToken={type:ze.START_TAG_TOKEN,tagName:"",selfClosing:!1,ackSelfClosing:!1,attrs:[]}}_createEndTagToken(){this.currentToken={type:ze.END_TAG_TOKEN,tagName:"",selfClosing:!1,attrs:[]}}_createCommentToken(){this.currentToken={type:ze.COMMENT_TOKEN,data:""}}_createDoctypeToken(e){this.currentToken={type:ze.DOCTYPE_TOKEN,name:e,forceQuirks:!1,publicId:null,systemId:null}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t}}_createEOFToken(){this.currentToken={type:ze.EOF_TOKEN}}_createAttr(e){this.currentAttr={name:e,value:""}}_leaveAttrName(e){null===ze.getTokenAttr(this.currentToken,this.currentAttr.name)?this.currentToken.attrs.push(this.currentAttr):this._err(s.duplicateAttribute),this.state=e}_leaveAttrValue(e){this.state=e}_emitCurrentToken(){this._emitCurrentCharacterToken();const e=this.currentToken;this.currentToken=null,e.type===ze.START_TAG_TOKEN?this.lastStartTagName=e.tagName:e.type===ze.END_TAG_TOKEN&&(e.attrs.length>0&&this._err(s.endTagWithAttributes),e.selfClosing&&this._err(s.endTagWithTrailingSolidus)),this.tokenQueue.push(e)}_emitCurrentCharacterToken(){this.currentCharacterToken&&(this.tokenQueue.push(this.currentCharacterToken),this.currentCharacterToken=null)}_emitEOFToken(){this._createEOFToken(),this._emitCurrentToken()}_appendCharToCurrentCharacterToken(e,t){this.currentCharacterToken&&this.currentCharacterToken.type!==e&&this._emitCurrentCharacterToken(),this.currentCharacterToken?this.currentCharacterToken.chars+=t:this._createCharacterToken(e,t)}_emitCodePoint(e){let t=ze.CHARACTER_TOKEN;Pe(e)?t=ze.WHITESPACE_CHARACTER_TOKEN:e===a.NULL&&(t=ze.NULL_CHARACTER_TOKEN),this._appendCharToCurrentCharacterToken(t,Ve(e))}_emitSeveralCodePoints(e){for(let t=0;t<e.length;t++)this._emitCodePoint(e[t])}_emitChars(e){this._appendCharToCurrentCharacterToken(ze.CHARACTER_TOKEN,e)}_matchNamedCharacterReference(e){let t=null,n=1,i=We(0,e);for(this.tempBuff.push(e);i>-1;){const e=o[i],r=e<7;r&&1&e&&(t=2&e?[o[++i],o[++i]]:[o[++i]],n=0);const s=this._consume();if(this.tempBuff.push(s),n++,s===a.EOF)break;i=r?4&e?We(i,s):-1:s===e?++i:-1}for(;n--;)this.tempBuff.pop(),this._unconsume();return t}_isCharacterReferenceInAttribute(){return this.returnState===V||this.returnState===G||this.returnState===W}_isCharacterReferenceAttributeQuirk(e){if(!e&&this._isCharacterReferenceInAttribute()){const e=this._consume();return this._unconsume(),e===a.EQUALS_SIGN||je(e)}return!1}_flushCodePointsConsumedAsCharacterReference(){if(this._isCharacterReferenceInAttribute())for(let e=0;e<this.tempBuff.length;e++)this.currentAttr.value+=Ve(this.tempBuff[e]);else this._emitSeveralCodePoints(this.tempBuff);this.tempBuff=[]}[u](e){this.preprocessor.dropParsedChunk(),e===a.LESS_THAN_SIGN?this.state=m:e===a.AMPERSAND?(this.returnState=u,this.state=Ie):e===a.NULL?(this._err(s.unexpectedNullCharacter),this._emitCodePoint(e)):e===a.EOF?this._emitEOFToken():this._emitCodePoint(e)}[d](e){this.preprocessor.dropParsedChunk(),e===a.AMPERSAND?(this.returnState=d,this.state=Ie):e===a.LESS_THAN_SIGN?this.state=y:e===a.NULL?(this._err(s.unexpectedNullCharacter),this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?this._emitEOFToken():this._emitCodePoint(e)}[h](e){this.preprocessor.dropParsedChunk(),e===a.LESS_THAN_SIGN?this.state=S:e===a.NULL?(this._err(s.unexpectedNullCharacter),this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?this._emitEOFToken():this._emitCodePoint(e)}[p](e){this.preprocessor.dropParsedChunk(),e===a.LESS_THAN_SIGN?this.state=T:e===a.NULL?(this._err(s.unexpectedNullCharacter),this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?this._emitEOFToken():this._emitCodePoint(e)}[f](e){this.preprocessor.dropParsedChunk(),e===a.NULL?(this._err(s.unexpectedNullCharacter),this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?this._emitEOFToken():this._emitCodePoint(e)}[m](e){e===a.EXCLAMATION_MARK?this.state=J:e===a.SOLIDUS?this.state=g:Fe(e)?(this._createStartTagToken(),this._reconsumeInState(v)):e===a.QUESTION_MARK?(this._err(s.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(),this._reconsumeInState(X)):e===a.EOF?(this._err(s.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken()):(this._err(s.invalidFirstCharacterOfTagName),this._emitChars("<"),this._reconsumeInState(u))}[g](e){Fe(e)?(this._createEndTagToken(),this._reconsumeInState(v)):e===a.GREATER_THAN_SIGN?(this._err(s.missingEndTagName),this.state=u):e===a.EOF?(this._err(s.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken()):(this._err(s.invalidFirstCharacterOfTagName),this._createCommentToken(),this._reconsumeInState(X))}[v](e){Pe(e)?this.state=j:e===a.SOLIDUS?this.state=Y:e===a.GREATER_THAN_SIGN?(this.state=u,this._emitCurrentToken()):Ue(e)?this.currentToken.tagName+=Ge(e):e===a.NULL?(this._err(s.unexpectedNullCharacter),this.currentToken.tagName+=r.REPLACEMENT_CHARACTER):e===a.EOF?(this._err(s.eofInTag),this._emitEOFToken()):this.currentToken.tagName+=Ve(e)}[y](e){e===a.SOLIDUS?(this.tempBuff=[],this.state=b):(this._emitChars("<"),this._reconsumeInState(d))}[b](e){Fe(e)?(this._createEndTagToken(),this._reconsumeInState(E)):(this._emitChars("</"),this._reconsumeInState(d))}[E](e){if(Ue(e))this.currentToken.tagName+=Ge(e),this.tempBuff.push(e);else if(Be(e))this.currentToken.tagName+=Ve(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(Pe(e))return void(this.state=j);if(e===a.SOLIDUS)return void(this.state=Y);if(e===a.GREATER_THAN_SIGN)return this.state=u,void this._emitCurrentToken()}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(d)}}[S](e){e===a.SOLIDUS?(this.tempBuff=[],this.state=w):(this._emitChars("<"),this._reconsumeInState(h))}[w](e){Fe(e)?(this._createEndTagToken(),this._reconsumeInState(_)):(this._emitChars("</"),this._reconsumeInState(h))}[_](e){if(Ue(e))this.currentToken.tagName+=Ge(e),this.tempBuff.push(e);else if(Be(e))this.currentToken.tagName+=Ve(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(Pe(e))return void(this.state=j);if(e===a.SOLIDUS)return void(this.state=Y);if(e===a.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=u)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(h)}}[T](e){e===a.SOLIDUS?(this.tempBuff=[],this.state=x):e===a.EXCLAMATION_MARK?(this.state=I,this._emitChars("<!")):(this._emitChars("<"),this._reconsumeInState(p))}[x](e){Fe(e)?(this._createEndTagToken(),this._reconsumeInState(C)):(this._emitChars("</"),this._reconsumeInState(p))}[C](e){if(Ue(e))this.currentToken.tagName+=Ge(e),this.tempBuff.push(e);else if(Be(e))this.currentToken.tagName+=Ve(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(Pe(e))return void(this.state=j);if(e===a.SOLIDUS)return void(this.state=Y);if(e===a.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=u)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(p)}}[I](e){e===a.HYPHEN_MINUS?(this.state=k,this._emitChars("-")):this._reconsumeInState(p)}[k](e){e===a.HYPHEN_MINUS?(this.state=O,this._emitChars("-")):this._reconsumeInState(p)}[M](e){e===a.HYPHEN_MINUS?(this.state=A,this._emitChars("-")):e===a.LESS_THAN_SIGN?this.state=R:e===a.NULL?(this._err(s.unexpectedNullCharacter),this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?(this._err(s.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}[A](e){e===a.HYPHEN_MINUS?(this.state=O,this._emitChars("-")):e===a.LESS_THAN_SIGN?this.state=R:e===a.NULL?(this._err(s.unexpectedNullCharacter),this.state=M,this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?(this._err(s.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=M,this._emitCodePoint(e))}[O](e){e===a.HYPHEN_MINUS?this._emitChars("-"):e===a.LESS_THAN_SIGN?this.state=R:e===a.GREATER_THAN_SIGN?(this.state=p,this._emitChars(">")):e===a.NULL?(this._err(s.unexpectedNullCharacter),this.state=M,this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?(this._err(s.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=M,this._emitCodePoint(e))}[R](e){e===a.SOLIDUS?(this.tempBuff=[],this.state=L):Fe(e)?(this.tempBuff=[],this._emitChars("<"),this._reconsumeInState(N)):(this._emitChars("<"),this._reconsumeInState(M))}[L](e){Fe(e)?(this._createEndTagToken(),this._reconsumeInState(D)):(this._emitChars("</"),this._reconsumeInState(M))}[D](e){if(Ue(e))this.currentToken.tagName+=Ge(e),this.tempBuff.push(e);else if(Be(e))this.currentToken.tagName+=Ve(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(Pe(e))return void(this.state=j);if(e===a.SOLIDUS)return void(this.state=Y);if(e===a.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=u)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(M)}}[N](e){Pe(e)||e===a.SOLIDUS||e===a.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?P:M,this._emitCodePoint(e)):Ue(e)?(this.tempBuff.push(qe(e)),this._emitCodePoint(e)):Be(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState(M)}[P](e){e===a.HYPHEN_MINUS?(this.state=$,this._emitChars("-")):e===a.LESS_THAN_SIGN?(this.state=B,this._emitChars("<")):e===a.NULL?(this._err(s.unexpectedNullCharacter),this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?(this._err(s.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}[$](e){e===a.HYPHEN_MINUS?(this.state=U,this._emitChars("-")):e===a.LESS_THAN_SIGN?(this.state=B,this._emitChars("<")):e===a.NULL?(this._err(s.unexpectedNullCharacter),this.state=P,this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?(this._err(s.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=P,this._emitCodePoint(e))}[U](e){e===a.HYPHEN_MINUS?this._emitChars("-"):e===a.LESS_THAN_SIGN?(this.state=B,this._emitChars("<")):e===a.GREATER_THAN_SIGN?(this.state=p,this._emitChars(">")):e===a.NULL?(this._err(s.unexpectedNullCharacter),this.state=P,this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?(this._err(s.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=P,this._emitCodePoint(e))}[B](e){e===a.SOLIDUS?(this.tempBuff=[],this.state=F,this._emitChars("/")):this._reconsumeInState(P)}[F](e){Pe(e)||e===a.SOLIDUS||e===a.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?M:P,this._emitCodePoint(e)):Ue(e)?(this.tempBuff.push(qe(e)),this._emitCodePoint(e)):Be(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState(P)}[j](e){Pe(e)||(e===a.SOLIDUS||e===a.GREATER_THAN_SIGN||e===a.EOF?this._reconsumeInState(K):e===a.EQUALS_SIGN?(this._err(s.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=H):(this._createAttr(""),this._reconsumeInState(H)))}[H](e){Pe(e)||e===a.SOLIDUS||e===a.GREATER_THAN_SIGN||e===a.EOF?(this._leaveAttrName(K),this._unconsume()):e===a.EQUALS_SIGN?this._leaveAttrName(q):Ue(e)?this.currentAttr.name+=Ge(e):e===a.QUOTATION_MARK||e===a.APOSTROPHE||e===a.LESS_THAN_SIGN?(this._err(s.unexpectedCharacterInAttributeName),this.currentAttr.name+=Ve(e)):e===a.NULL?(this._err(s.unexpectedNullCharacter),this.currentAttr.name+=r.REPLACEMENT_CHARACTER):this.currentAttr.name+=Ve(e)}[K](e){Pe(e)||(e===a.SOLIDUS?this.state=Y:e===a.EQUALS_SIGN?this.state=q:e===a.GREATER_THAN_SIGN?(this.state=u,this._emitCurrentToken()):e===a.EOF?(this._err(s.eofInTag),this._emitEOFToken()):(this._createAttr(""),this._reconsumeInState(H)))}[q](e){Pe(e)||(e===a.QUOTATION_MARK?this.state=V:e===a.APOSTROPHE?this.state=G:e===a.GREATER_THAN_SIGN?(this._err(s.missingAttributeValue),this.state=u,this._emitCurrentToken()):this._reconsumeInState(W))}[V](e){e===a.QUOTATION_MARK?this.state=z:e===a.AMPERSAND?(this.returnState=V,this.state=Ie):e===a.NULL?(this._err(s.unexpectedNullCharacter),this.currentAttr.value+=r.REPLACEMENT_CHARACTER):e===a.EOF?(this._err(s.eofInTag),this._emitEOFToken()):this.currentAttr.value+=Ve(e)}[G](e){e===a.APOSTROPHE?this.state=z:e===a.AMPERSAND?(this.returnState=G,this.state=Ie):e===a.NULL?(this._err(s.unexpectedNullCharacter),this.currentAttr.value+=r.REPLACEMENT_CHARACTER):e===a.EOF?(this._err(s.eofInTag),this._emitEOFToken()):this.currentAttr.value+=Ve(e)}[W](e){Pe(e)?this._leaveAttrValue(j):e===a.AMPERSAND?(this.returnState=W,this.state=Ie):e===a.GREATER_THAN_SIGN?(this._leaveAttrValue(u),this._emitCurrentToken()):e===a.NULL?(this._err(s.unexpectedNullCharacter),this.currentAttr.value+=r.REPLACEMENT_CHARACTER):e===a.QUOTATION_MARK||e===a.APOSTROPHE||e===a.LESS_THAN_SIGN||e===a.EQUALS_SIGN||e===a.GRAVE_ACCENT?(this._err(s.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=Ve(e)):e===a.EOF?(this._err(s.eofInTag),this._emitEOFToken()):this.currentAttr.value+=Ve(e)}[z](e){Pe(e)?this._leaveAttrValue(j):e===a.SOLIDUS?this._leaveAttrValue(Y):e===a.GREATER_THAN_SIGN?(this._leaveAttrValue(u),this._emitCurrentToken()):e===a.EOF?(this._err(s.eofInTag),this._emitEOFToken()):(this._err(s.missingWhitespaceBetweenAttributes),this._reconsumeInState(j))}[Y](e){e===a.GREATER_THAN_SIGN?(this.currentToken.selfClosing=!0,this.state=u,this._emitCurrentToken()):e===a.EOF?(this._err(s.eofInTag),this._emitEOFToken()):(this._err(s.unexpectedSolidusInTag),this._reconsumeInState(j))}[X](e){e===a.GREATER_THAN_SIGN?(this.state=u,this._emitCurrentToken()):e===a.EOF?(this._emitCurrentToken(),this._emitEOFToken()):e===a.NULL?(this._err(s.unexpectedNullCharacter),this.currentToken.data+=r.REPLACEMENT_CHARACTER):this.currentToken.data+=Ve(e)}[J](e){this._consumeSequenceIfMatch(c.DASH_DASH_STRING,e,!0)?(this._createCommentToken(),this.state=Q):this._consumeSequenceIfMatch(c.DOCTYPE_STRING,e,!1)?this.state=ce:this._consumeSequenceIfMatch(c.CDATA_START_STRING,e,!0)?this.allowCDATA?this.state=Te:(this._err(s.cdataInHtmlContent),this._createCommentToken(),this.currentToken.data="[CDATA[",this.state=X):this._ensureHibernation()||(this._err(s.incorrectlyOpenedComment),this._createCommentToken(),this._reconsumeInState(X))}[Q](e){e===a.HYPHEN_MINUS?this.state=Z:e===a.GREATER_THAN_SIGN?(this._err(s.abruptClosingOfEmptyComment),this.state=u,this._emitCurrentToken()):this._reconsumeInState(ee)}[Z](e){e===a.HYPHEN_MINUS?this.state=se:e===a.GREATER_THAN_SIGN?(this._err(s.abruptClosingOfEmptyComment),this.state=u,this._emitCurrentToken()):e===a.EOF?(this._err(s.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState(ee))}[ee](e){e===a.HYPHEN_MINUS?this.state=oe:e===a.LESS_THAN_SIGN?(this.currentToken.data+="<",this.state=te):e===a.NULL?(this._err(s.unexpectedNullCharacter),this.currentToken.data+=r.REPLACEMENT_CHARACTER):e===a.EOF?(this._err(s.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.data+=Ve(e)}[te](e){e===a.EXCLAMATION_MARK?(this.currentToken.data+="!",this.state=ne):e===a.LESS_THAN_SIGN?this.currentToken.data+="!":this._reconsumeInState(ee)}[ne](e){e===a.HYPHEN_MINUS?this.state=ie:this._reconsumeInState(ee)}[ie](e){e===a.HYPHEN_MINUS?this.state=re:this._reconsumeInState(oe)}[re](e){e!==a.GREATER_THAN_SIGN&&e!==a.EOF&&this._err(s.nestedComment),this._reconsumeInState(se)}[oe](e){e===a.HYPHEN_MINUS?this.state=se:e===a.EOF?(this._err(s.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState(ee))}[se](e){e===a.GREATER_THAN_SIGN?(this.state=u,this._emitCurrentToken()):e===a.EXCLAMATION_MARK?this.state=ae:e===a.HYPHEN_MINUS?this.currentToken.data+="-":e===a.EOF?(this._err(s.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--",this._reconsumeInState(ee))}[ae](e){e===a.HYPHEN_MINUS?(this.currentToken.data+="--!",this.state=oe):e===a.GREATER_THAN_SIGN?(this._err(s.incorrectlyClosedComment),this.state=u,this._emitCurrentToken()):e===a.EOF?(this._err(s.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--!",this._reconsumeInState(ee))}[ce](e){Pe(e)?this.state=le:e===a.GREATER_THAN_SIGN?this._reconsumeInState(le):e===a.EOF?(this._err(s.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(s.missingWhitespaceBeforeDoctypeName),this._reconsumeInState(le))}[le](e){Pe(e)||(Ue(e)?(this._createDoctypeToken(Ge(e)),this.state=ue):e===a.NULL?(this._err(s.unexpectedNullCharacter),this._createDoctypeToken(r.REPLACEMENT_CHARACTER),this.state=ue):e===a.GREATER_THAN_SIGN?(this._err(s.missingDoctypeName),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=u):e===a.EOF?(this._err(s.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._createDoctypeToken(Ve(e)),this.state=ue))}[ue](e){Pe(e)?this.state=de:e===a.GREATER_THAN_SIGN?(this.state=u,this._emitCurrentToken()):Ue(e)?this.currentToken.name+=Ge(e):e===a.NULL?(this._err(s.unexpectedNullCharacter),this.currentToken.name+=r.REPLACEMENT_CHARACTER):e===a.EOF?(this._err(s.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.name+=Ve(e)}[de](e){Pe(e)||(e===a.GREATER_THAN_SIGN?(this.state=u,this._emitCurrentToken()):e===a.EOF?(this._err(s.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this._consumeSequenceIfMatch(c.PUBLIC_STRING,e,!1)?this.state=he:this._consumeSequenceIfMatch(c.SYSTEM_STRING,e,!1)?this.state=ye:this._ensureHibernation()||(this._err(s.invalidCharacterSequenceAfterDoctypeName),this.currentToken.forceQuirks=!0,this._reconsumeInState(_e)))}[he](e){Pe(e)?this.state=pe:e===a.QUOTATION_MARK?(this._err(s.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state=fe):e===a.APOSTROPHE?(this._err(s.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state=me):e===a.GREATER_THAN_SIGN?(this._err(s.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=u,this._emitCurrentToken()):e===a.EOF?(this._err(s.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(s.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(_e))}[pe](e){Pe(e)||(e===a.QUOTATION_MARK?(this.currentToken.publicId="",this.state=fe):e===a.APOSTROPHE?(this.currentToken.publicId="",this.state=me):e===a.GREATER_THAN_SIGN?(this._err(s.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=u,this._emitCurrentToken()):e===a.EOF?(this._err(s.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(s.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(_e)))}[fe](e){e===a.QUOTATION_MARK?this.state=ge:e===a.NULL?(this._err(s.unexpectedNullCharacter),this.currentToken.publicId+=r.REPLACEMENT_CHARACTER):e===a.GREATER_THAN_SIGN?(this._err(s.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=u):e===a.EOF?(this._err(s.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=Ve(e)}[me](e){e===a.APOSTROPHE?this.state=ge:e===a.NULL?(this._err(s.unexpectedNullCharacter),this.currentToken.publicId+=r.REPLACEMENT_CHARACTER):e===a.GREATER_THAN_SIGN?(this._err(s.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=u):e===a.EOF?(this._err(s.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=Ve(e)}[ge](e){Pe(e)?this.state=ve:e===a.GREATER_THAN_SIGN?(this.state=u,this._emitCurrentToken()):e===a.QUOTATION_MARK?(this._err(s.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state=Ee):e===a.APOSTROPHE?(this._err(s.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state=Se):e===a.EOF?(this._err(s.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(s.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(_e))}[ve](e){Pe(e)||(e===a.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=u):e===a.QUOTATION_MARK?(this.currentToken.systemId="",this.state=Ee):e===a.APOSTROPHE?(this.currentToken.systemId="",this.state=Se):e===a.EOF?(this._err(s.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(s.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(_e)))}[ye](e){Pe(e)?this.state=be:e===a.QUOTATION_MARK?(this._err(s.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state=Ee):e===a.APOSTROPHE?(this._err(s.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state=Se):e===a.GREATER_THAN_SIGN?(this._err(s.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=u,this._emitCurrentToken()):e===a.EOF?(this._err(s.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(s.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(_e))}[be](e){Pe(e)||(e===a.QUOTATION_MARK?(this.currentToken.systemId="",this.state=Ee):e===a.APOSTROPHE?(this.currentToken.systemId="",this.state=Se):e===a.GREATER_THAN_SIGN?(this._err(s.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=u,this._emitCurrentToken()):e===a.EOF?(this._err(s.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(s.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(_e)))}[Ee](e){e===a.QUOTATION_MARK?this.state=we:e===a.NULL?(this._err(s.unexpectedNullCharacter),this.currentToken.systemId+=r.REPLACEMENT_CHARACTER):e===a.GREATER_THAN_SIGN?(this._err(s.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=u):e===a.EOF?(this._err(s.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=Ve(e)}[Se](e){e===a.APOSTROPHE?this.state=we:e===a.NULL?(this._err(s.unexpectedNullCharacter),this.currentToken.systemId+=r.REPLACEMENT_CHARACTER):e===a.GREATER_THAN_SIGN?(this._err(s.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=u):e===a.EOF?(this._err(s.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=Ve(e)}[we](e){Pe(e)||(e===a.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=u):e===a.EOF?(this._err(s.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(s.unexpectedCharacterAfterDoctypeSystemIdentifier),this._reconsumeInState(_e)))}[_e](e){e===a.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=u):e===a.NULL?this._err(s.unexpectedNullCharacter):e===a.EOF&&(this._emitCurrentToken(),this._emitEOFToken())}[Te](e){e===a.RIGHT_SQUARE_BRACKET?this.state=xe:e===a.EOF?(this._err(s.eofInCdata),this._emitEOFToken()):this._emitCodePoint(e)}[xe](e){e===a.RIGHT_SQUARE_BRACKET?this.state=Ce:(this._emitChars("]"),this._reconsumeInState(Te))}[Ce](e){e===a.GREATER_THAN_SIGN?this.state=u:e===a.RIGHT_SQUARE_BRACKET?this._emitChars("]"):(this._emitChars("]]"),this._reconsumeInState(Te))}[Ie](e){this.tempBuff=[a.AMPERSAND],e===a.NUMBER_SIGN?(this.tempBuff.push(e),this.state=Ae):je(e)?this._reconsumeInState(ke):(this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}[ke](e){const t=this._matchNamedCharacterReference(e);if(this._ensureHibernation())this.tempBuff=[a.AMPERSAND];else if(t){const e=this.tempBuff[this.tempBuff.length-1]===a.SEMICOLON;this._isCharacterReferenceAttributeQuirk(e)||(e||this._errOnNextCodePoint(s.missingSemicolonAfterCharacterReference),this.tempBuff=t),this._flushCodePointsConsumedAsCharacterReference(),this.state=this.returnState}else this._flushCodePointsConsumedAsCharacterReference(),this.state=Me}[Me](e){je(e)?this._isCharacterReferenceInAttribute()?this.currentAttr.value+=Ve(e):this._emitCodePoint(e):(e===a.SEMICOLON&&this._err(s.unknownNamedCharacterReference),this._reconsumeInState(this.returnState))}[Ae](e){this.charRefCode=0,e===a.LATIN_SMALL_X||e===a.LATIN_CAPITAL_X?(this.tempBuff.push(e),this.state=Oe):this._reconsumeInState(Re)}[Oe](e){!function(e){return $e(e)||He(e)||Ke(e)}(e)?(this._err(s.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)):this._reconsumeInState(Le)}[Re](e){$e(e)?this._reconsumeInState(De):(this._err(s.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}[Le](e){He(e)?this.charRefCode=16*this.charRefCode+e-55:Ke(e)?this.charRefCode=16*this.charRefCode+e-87:$e(e)?this.charRefCode=16*this.charRefCode+e-48:e===a.SEMICOLON?this.state=Ne:(this._err(s.missingSemicolonAfterCharacterReference),this._reconsumeInState(Ne))}[De](e){$e(e)?this.charRefCode=10*this.charRefCode+e-48:e===a.SEMICOLON?this.state=Ne:(this._err(s.missingSemicolonAfterCharacterReference),this._reconsumeInState(Ne))}[Ne](){if(this.charRefCode===a.NULL)this._err(s.nullCharacterReference),this.charRefCode=a.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(s.characterReferenceOutsideUnicodeRange),this.charRefCode=a.REPLACEMENT_CHARACTER;else if(r.isSurrogate(this.charRefCode))this._err(s.surrogateCharacterReference),this.charRefCode=a.REPLACEMENT_CHARACTER;else if(r.isUndefinedCodePoint(this.charRefCode))this._err(s.noncharacterCharacterReference);else if(r.isControlCodePoint(this.charRefCode)||this.charRefCode===a.CARRIAGE_RETURN){this._err(s.controlCharacterReference);const e=l[this.charRefCode];e&&(this.charRefCode=e)}this.tempBuff=[this.charRefCode],this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)}}ze.CHARACTER_TOKEN="CHARACTER_TOKEN",ze.NULL_CHARACTER_TOKEN="NULL_CHARACTER_TOKEN",ze.WHITESPACE_CHARACTER_TOKEN="WHITESPACE_CHARACTER_TOKEN",ze.START_TAG_TOKEN="START_TAG_TOKEN",ze.END_TAG_TOKEN="END_TAG_TOKEN",ze.COMMENT_TOKEN="COMMENT_TOKEN",ze.DOCTYPE_TOKEN="DOCTYPE_TOKEN",ze.EOF_TOKEN="EOF_TOKEN",ze.HIBERNATION_TOKEN="HIBERNATION_TOKEN",ze.MODE={DATA:u,RCDATA:d,RAWTEXT:h,SCRIPT_DATA:p,PLAINTEXT:f},ze.getTokenAttr=function(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null},e.exports=ze},5482:e=>{"use strict";e.exports=new Uint16Array([4,52,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,106,303,412,810,1432,1701,1796,1987,2114,2360,2420,2484,3170,3251,4140,4393,4575,4610,5106,5512,5728,6117,6274,6315,6345,6427,6516,7002,7910,8733,9323,9870,10170,10631,10893,11318,11386,11467,12773,13092,14474,14922,15448,15542,16419,17666,18166,18611,19004,19095,19298,19397,4,16,69,77,97,98,99,102,103,108,109,110,111,112,114,115,116,117,140,150,158,169,176,194,199,210,216,222,226,242,256,266,283,294,108,105,103,5,198,1,59,148,1,198,80,5,38,1,59,156,1,38,99,117,116,101,5,193,1,59,167,1,193,114,101,118,101,59,1,258,4,2,105,121,182,191,114,99,5,194,1,59,189,1,194,59,1,1040,114,59,3,55349,56580,114,97,118,101,5,192,1,59,208,1,192,112,104,97,59,1,913,97,99,114,59,1,256,100,59,1,10835,4,2,103,112,232,237,111,110,59,1,260,102,59,3,55349,56632,112,108,121,70,117,110,99,116,105,111,110,59,1,8289,105,110,103,5,197,1,59,264,1,197,4,2,99,115,272,277,114,59,3,55349,56476,105,103,110,59,1,8788,105,108,100,101,5,195,1,59,292,1,195,109,108,5,196,1,59,301,1,196,4,8,97,99,101,102,111,114,115,117,321,350,354,383,388,394,400,405,4,2,99,114,327,336,107,115,108,97,115,104,59,1,8726,4,2,118,119,342,345,59,1,10983,101,100,59,1,8966,121,59,1,1041,4,3,99,114,116,362,369,379,97,117,115,101,59,1,8757,110,111,117,108,108,105,115,59,1,8492,97,59,1,914,114,59,3,55349,56581,112,102,59,3,55349,56633,101,118,101,59,1,728,99,114,59,1,8492,109,112,101,113,59,1,8782,4,14,72,79,97,99,100,101,102,104,105,108,111,114,115,117,442,447,456,504,542,547,569,573,577,616,678,784,790,796,99,121,59,1,1063,80,89,5,169,1,59,454,1,169,4,3,99,112,121,464,470,497,117,116,101,59,1,262,4,2,59,105,476,478,1,8914,116,97,108,68,105,102,102,101,114,101,110,116,105,97,108,68,59,1,8517,108,101,121,115,59,1,8493,4,4,97,101,105,111,514,520,530,535,114,111,110,59,1,268,100,105,108,5,199,1,59,528,1,199,114,99,59,1,264,110,105,110,116,59,1,8752,111,116,59,1,266,4,2,100,110,553,560,105,108,108,97,59,1,184,116,101,114,68,111,116,59,1,183,114,59,1,8493,105,59,1,935,114,99,108,101,4,4,68,77,80,84,591,596,603,609,111,116,59,1,8857,105,110,117,115,59,1,8854,108,117,115,59,1,8853,105,109,101,115,59,1,8855,111,4,2,99,115,623,646,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8754,101,67,117,114,108,121,4,2,68,81,658,671,111,117,98,108,101,81,117,111,116,101,59,1,8221,117,111,116,101,59,1,8217,4,4,108,110,112,117,688,701,736,753,111,110,4,2,59,101,696,698,1,8759,59,1,10868,4,3,103,105,116,709,717,722,114,117,101,110,116,59,1,8801,110,116,59,1,8751,111,117,114,73,110,116,101,103,114,97,108,59,1,8750,4,2,102,114,742,745,59,1,8450,111,100,117,99,116,59,1,8720,110,116,101,114,67,108,111,99,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8755,111,115,115,59,1,10799,99,114,59,3,55349,56478,112,4,2,59,67,803,805,1,8915,97,112,59,1,8781,4,11,68,74,83,90,97,99,101,102,105,111,115,834,850,855,860,865,888,903,916,921,1011,1415,4,2,59,111,840,842,1,8517,116,114,97,104,100,59,1,10513,99,121,59,1,1026,99,121,59,1,1029,99,121,59,1,1039,4,3,103,114,115,873,879,883,103,101,114,59,1,8225,114,59,1,8609,104,118,59,1,10980,4,2,97,121,894,900,114,111,110,59,1,270,59,1,1044,108,4,2,59,116,910,912,1,8711,97,59,1,916,114,59,3,55349,56583,4,2,97,102,927,998,4,2,99,109,933,992,114,105,116,105,99,97,108,4,4,65,68,71,84,950,957,978,985,99,117,116,101,59,1,180,111,4,2,116,117,964,967,59,1,729,98,108,101,65,99,117,116,101,59,1,733,114,97,118,101,59,1,96,105,108,100,101,59,1,732,111,110,100,59,1,8900,102,101,114,101,110,116,105,97,108,68,59,1,8518,4,4,112,116,117,119,1021,1026,1048,1249,102,59,3,55349,56635,4,3,59,68,69,1034,1036,1041,1,168,111,116,59,1,8412,113,117,97,108,59,1,8784,98,108,101,4,6,67,68,76,82,85,86,1065,1082,1101,1189,1211,1236,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8751,111,4,2,116,119,1089,1092,59,1,168,110,65,114,114,111,119,59,1,8659,4,2,101,111,1107,1141,102,116,4,3,65,82,84,1117,1124,1136,114,114,111,119,59,1,8656,105,103,104,116,65,114,114,111,119,59,1,8660,101,101,59,1,10980,110,103,4,2,76,82,1149,1177,101,102,116,4,2,65,82,1158,1165,114,114,111,119,59,1,10232,105,103,104,116,65,114,114,111,119,59,1,10234,105,103,104,116,65,114,114,111,119,59,1,10233,105,103,104,116,4,2,65,84,1199,1206,114,114,111,119,59,1,8658,101,101,59,1,8872,112,4,2,65,68,1218,1225,114,114,111,119,59,1,8657,111,119,110,65,114,114,111,119,59,1,8661,101,114,116,105,99,97,108,66,97,114,59,1,8741,110,4,6,65,66,76,82,84,97,1264,1292,1299,1352,1391,1408,114,114,111,119,4,3,59,66,85,1276,1278,1283,1,8595,97,114,59,1,10515,112,65,114,114,111,119,59,1,8693,114,101,118,101,59,1,785,101,102,116,4,3,82,84,86,1310,1323,1334,105,103,104,116,86,101,99,116,111,114,59,1,10576,101,101,86,101,99,116,111,114,59,1,10590,101,99,116,111,114,4,2,59,66,1345,1347,1,8637,97,114,59,1,10582,105,103,104,116,4,2,84,86,1362,1373,101,101,86,101,99,116,111,114,59,1,10591,101,99,116,111,114,4,2,59,66,1384,1386,1,8641,97,114,59,1,10583,101,101,4,2,59,65,1399,1401,1,8868,114,114,111,119,59,1,8615,114,114,111,119,59,1,8659,4,2,99,116,1421,1426,114,59,3,55349,56479,114,111,107,59,1,272,4,16,78,84,97,99,100,102,103,108,109,111,112,113,115,116,117,120,1466,1470,1478,1489,1515,1520,1525,1536,1544,1593,1609,1617,1650,1664,1668,1677,71,59,1,330,72,5,208,1,59,1476,1,208,99,117,116,101,5,201,1,59,1487,1,201,4,3,97,105,121,1497,1503,1512,114,111,110,59,1,282,114,99,5,202,1,59,1510,1,202,59,1,1069,111,116,59,1,278,114,59,3,55349,56584,114,97,118,101,5,200,1,59,1534,1,200,101,109,101,110,116,59,1,8712,4,2,97,112,1550,1555,99,114,59,1,274,116,121,4,2,83,86,1563,1576,109,97,108,108,83,113,117,97,114,101,59,1,9723,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9643,4,2,103,112,1599,1604,111,110,59,1,280,102,59,3,55349,56636,115,105,108,111,110,59,1,917,117,4,2,97,105,1624,1640,108,4,2,59,84,1631,1633,1,10869,105,108,100,101,59,1,8770,108,105,98,114,105,117,109,59,1,8652,4,2,99,105,1656,1660,114,59,1,8496,109,59,1,10867,97,59,1,919,109,108,5,203,1,59,1675,1,203,4,2,105,112,1683,1689,115,116,115,59,1,8707,111,110,101,110,116,105,97,108,69,59,1,8519,4,5,99,102,105,111,115,1713,1717,1722,1762,1791,121,59,1,1060,114,59,3,55349,56585,108,108,101,100,4,2,83,86,1732,1745,109,97,108,108,83,113,117,97,114,101,59,1,9724,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9642,4,3,112,114,117,1770,1775,1781,102,59,3,55349,56637,65,108,108,59,1,8704,114,105,101,114,116,114,102,59,1,8497,99,114,59,1,8497,4,12,74,84,97,98,99,100,102,103,111,114,115,116,1822,1827,1834,1848,1855,1877,1882,1887,1890,1896,1978,1984,99,121,59,1,1027,5,62,1,59,1832,1,62,109,109,97,4,2,59,100,1843,1845,1,915,59,1,988,114,101,118,101,59,1,286,4,3,101,105,121,1863,1869,1874,100,105,108,59,1,290,114,99,59,1,284,59,1,1043,111,116,59,1,288,114,59,3,55349,56586,59,1,8921,112,102,59,3,55349,56638,101,97,116,101,114,4,6,69,70,71,76,83,84,1915,1933,1944,1953,1959,1971,113,117,97,108,4,2,59,76,1925,1927,1,8805,101,115,115,59,1,8923,117,108,108,69,113,117,97,108,59,1,8807,114,101,97,116,101,114,59,1,10914,101,115,115,59,1,8823,108,97,110,116,69,113,117,97,108,59,1,10878,105,108,100,101,59,1,8819,99,114,59,3,55349,56482,59,1,8811,4,8,65,97,99,102,105,111,115,117,2005,2012,2026,2032,2036,2049,2073,2089,82,68,99,121,59,1,1066,4,2,99,116,2018,2023,101,107,59,1,711,59,1,94,105,114,99,59,1,292,114,59,1,8460,108,98,101,114,116,83,112,97,99,101,59,1,8459,4,2,112,114,2055,2059,102,59,1,8461,105,122,111,110,116,97,108,76,105,110,101,59,1,9472,4,2,99,116,2079,2083,114,59,1,8459,114,111,107,59,1,294,109,112,4,2,68,69,2097,2107,111,119,110,72,117,109,112,59,1,8782,113,117,97,108,59,1,8783,4,14,69,74,79,97,99,100,102,103,109,110,111,115,116,117,2144,2149,2155,2160,2171,2189,2194,2198,2209,2245,2307,2329,2334,2341,99,121,59,1,1045,108,105,103,59,1,306,99,121,59,1,1025,99,117,116,101,5,205,1,59,2169,1,205,4,2,105,121,2177,2186,114,99,5,206,1,59,2184,1,206,59,1,1048,111,116,59,1,304,114,59,1,8465,114,97,118,101,5,204,1,59,2207,1,204,4,3,59,97,112,2217,2219,2238,1,8465,4,2,99,103,2225,2229,114,59,1,298,105,110,97,114,121,73,59,1,8520,108,105,101,115,59,1,8658,4,2,116,118,2251,2281,4,2,59,101,2257,2259,1,8748,4,2,103,114,2265,2271,114,97,108,59,1,8747,115,101,99,116,105,111,110,59,1,8898,105,115,105,98,108,101,4,2,67,84,2293,2300,111,109,109,97,59,1,8291,105,109,101,115,59,1,8290,4,3,103,112,116,2315,2320,2325,111,110,59,1,302,102,59,3,55349,56640,97,59,1,921,99,114,59,1,8464,105,108,100,101,59,1,296,4,2,107,109,2347,2352,99,121,59,1,1030,108,5,207,1,59,2358,1,207,4,5,99,102,111,115,117,2372,2386,2391,2397,2414,4,2,105,121,2378,2383,114,99,59,1,308,59,1,1049,114,59,3,55349,56589,112,102,59,3,55349,56641,4,2,99,101,2403,2408,114,59,3,55349,56485,114,99,121,59,1,1032,107,99,121,59,1,1028,4,7,72,74,97,99,102,111,115,2436,2441,2446,2452,2467,2472,2478,99,121,59,1,1061,99,121,59,1,1036,112,112,97,59,1,922,4,2,101,121,2458,2464,100,105,108,59,1,310,59,1,1050,114,59,3,55349,56590,112,102,59,3,55349,56642,99,114,59,3,55349,56486,4,11,74,84,97,99,101,102,108,109,111,115,116,2508,2513,2520,2562,2585,2981,2986,3004,3011,3146,3167,99,121,59,1,1033,5,60,1,59,2518,1,60,4,5,99,109,110,112,114,2532,2538,2544,2548,2558,117,116,101,59,1,313,98,100,97,59,1,923,103,59,1,10218,108,97,99,101,116,114,102,59,1,8466,114,59,1,8606,4,3,97,101,121,2570,2576,2582,114,111,110,59,1,317,100,105,108,59,1,315,59,1,1051,4,2,102,115,2591,2907,116,4,10,65,67,68,70,82,84,85,86,97,114,2614,2663,2672,2728,2735,2760,2820,2870,2888,2895,4,2,110,114,2620,2633,103,108,101,66,114,97,99,107,101,116,59,1,10216,114,111,119,4,3,59,66,82,2644,2646,2651,1,8592,97,114,59,1,8676,105,103,104,116,65,114,114,111,119,59,1,8646,101,105,108,105,110,103,59,1,8968,111,4,2,117,119,2679,2692,98,108,101,66,114,97,99,107,101,116,59,1,10214,110,4,2,84,86,2699,2710,101,101,86,101,99,116,111,114,59,1,10593,101,99,116,111,114,4,2,59,66,2721,2723,1,8643,97,114,59,1,10585,108,111,111,114,59,1,8970,105,103,104,116,4,2,65,86,2745,2752,114,114,111,119,59,1,8596,101,99,116,111,114,59,1,10574,4,2,101,114,2766,2792,101,4,3,59,65,86,2775,2777,2784,1,8867,114,114,111,119,59,1,8612,101,99,116,111,114,59,1,10586,105,97,110,103,108,101,4,3,59,66,69,2806,2808,2813,1,8882,97,114,59,1,10703,113,117,97,108,59,1,8884,112,4,3,68,84,86,2829,2841,2852,111,119,110,86,101,99,116,111,114,59,1,10577,101,101,86,101,99,116,111,114,59,1,10592,101,99,116,111,114,4,2,59,66,2863,2865,1,8639,97,114,59,1,10584,101,99,116,111,114,4,2,59,66,2881,2883,1,8636,97,114,59,1,10578,114,114,111,119,59,1,8656,105,103,104,116,97,114,114,111,119,59,1,8660,115,4,6,69,70,71,76,83,84,2922,2936,2947,2956,2962,2974,113,117,97,108,71,114,101,97,116,101,114,59,1,8922,117,108,108,69,113,117,97,108,59,1,8806,114,101,97,116,101,114,59,1,8822,101,115,115,59,1,10913,108,97,110,116,69,113,117,97,108,59,1,10877,105,108,100,101,59,1,8818,114,59,3,55349,56591,4,2,59,101,2992,2994,1,8920,102,116,97,114,114,111,119,59,1,8666,105,100,111,116,59,1,319,4,3,110,112,119,3019,3110,3115,103,4,4,76,82,108,114,3030,3058,3070,3098,101,102,116,4,2,65,82,3039,3046,114,114,111,119,59,1,10229,105,103,104,116,65,114,114,111,119,59,1,10231,105,103,104,116,65,114,114,111,119,59,1,10230,101,102,116,4,2,97,114,3079,3086,114,114,111,119,59,1,10232,105,103,104,116,97,114,114,111,119,59,1,10234,105,103,104,116,97,114,114,111,119,59,1,10233,102,59,3,55349,56643,101,114,4,2,76,82,3123,3134,101,102,116,65,114,114,111,119,59,1,8601,105,103,104,116,65,114,114,111,119,59,1,8600,4,3,99,104,116,3154,3158,3161,114,59,1,8466,59,1,8624,114,111,107,59,1,321,59,1,8810,4,8,97,99,101,102,105,111,115,117,3188,3192,3196,3222,3227,3237,3243,3248,112,59,1,10501,121,59,1,1052,4,2,100,108,3202,3213,105,117,109,83,112,97,99,101,59,1,8287,108,105,110,116,114,102,59,1,8499,114,59,3,55349,56592,110,117,115,80,108,117,115,59,1,8723,112,102,59,3,55349,56644,99,114,59,1,8499,59,1,924,4,9,74,97,99,101,102,111,115,116,117,3271,3276,3283,3306,3422,3427,4120,4126,4137,99,121,59,1,1034,99,117,116,101,59,1,323,4,3,97,101,121,3291,3297,3303,114,111,110,59,1,327,100,105,108,59,1,325,59,1,1053,4,3,103,115,119,3314,3380,3415,97,116,105,118,101,4,3,77,84,86,3327,3340,3365,101,100,105,117,109,83,112,97,99,101,59,1,8203,104,105,4,2,99,110,3348,3357,107,83,112,97,99,101,59,1,8203,83,112,97,99,101,59,1,8203,101,114,121,84,104,105,110,83,112,97,99,101,59,1,8203,116,101,100,4,2,71,76,3389,3405,114,101,97,116,101,114,71,114,101,97,116,101,114,59,1,8811,101,115,115,76,101,115,115,59,1,8810,76,105,110,101,59,1,10,114,59,3,55349,56593,4,4,66,110,112,116,3437,3444,3460,3464,114,101,97,107,59,1,8288,66,114,101,97,107,105,110,103,83,112,97,99,101,59,1,160,102,59,1,8469,4,13,59,67,68,69,71,72,76,78,80,82,83,84,86,3492,3494,3517,3536,3578,3657,3685,3784,3823,3860,3915,4066,4107,1,10988,4,2,111,117,3500,3510,110,103,114,117,101,110,116,59,1,8802,112,67,97,112,59,1,8813,111,117,98,108,101,86,101,114,116,105,99,97,108,66,97,114,59,1,8742,4,3,108,113,120,3544,3552,3571,101,109,101,110,116,59,1,8713,117,97,108,4,2,59,84,3561,3563,1,8800,105,108,100,101,59,3,8770,824,105,115,116,115,59,1,8708,114,101,97,116,101,114,4,7,59,69,70,71,76,83,84,3600,3602,3609,3621,3631,3637,3650,1,8815,113,117,97,108,59,1,8817,117,108,108,69,113,117,97,108,59,3,8807,824,114,101,97,116,101,114,59,3,8811,824,101,115,115,59,1,8825,108,97,110,116,69,113,117,97,108,59,3,10878,824,105,108,100,101,59,1,8821,117,109,112,4,2,68,69,3666,3677,111,119,110,72,117,109,112,59,3,8782,824,113,117,97,108,59,3,8783,824,101,4,2,102,115,3692,3724,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3709,3711,3717,1,8938,97,114,59,3,10703,824,113,117,97,108,59,1,8940,115,4,6,59,69,71,76,83,84,3739,3741,3748,3757,3764,3777,1,8814,113,117,97,108,59,1,8816,114,101,97,116,101,114,59,1,8824,101,115,115,59,3,8810,824,108,97,110,116,69,113,117,97,108,59,3,10877,824,105,108,100,101,59,1,8820,101,115,116,101,100,4,2,71,76,3795,3812,114,101,97,116,101,114,71,114,101,97,116,101,114,59,3,10914,824,101,115,115,76,101,115,115,59,3,10913,824,114,101,99,101,100,101,115,4,3,59,69,83,3838,3840,3848,1,8832,113,117,97,108,59,3,10927,824,108,97,110,116,69,113,117,97,108,59,1,8928,4,2,101,105,3866,3881,118,101,114,115,101,69,108,101,109,101,110,116,59,1,8716,103,104,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3900,3902,3908,1,8939,97,114,59,3,10704,824,113,117,97,108,59,1,8941,4,2,113,117,3921,3973,117,97,114,101,83,117,4,2,98,112,3933,3952,115,101,116,4,2,59,69,3942,3945,3,8847,824,113,117,97,108,59,1,8930,101,114,115,101,116,4,2,59,69,3963,3966,3,8848,824,113,117,97,108,59,1,8931,4,3,98,99,112,3981,4e3,4045,115,101,116,4,2,59,69,3990,3993,3,8834,8402,113,117,97,108,59,1,8840,99,101,101,100,115,4,4,59,69,83,84,4015,4017,4025,4037,1,8833,113,117,97,108,59,3,10928,824,108,97,110,116,69,113,117,97,108,59,1,8929,105,108,100,101,59,3,8831,824,101,114,115,101,116,4,2,59,69,4056,4059,3,8835,8402,113,117,97,108,59,1,8841,105,108,100,101,4,4,59,69,70,84,4080,4082,4089,4100,1,8769,113,117,97,108,59,1,8772,117,108,108,69,113,117,97,108,59,1,8775,105,108,100,101,59,1,8777,101,114,116,105,99,97,108,66,97,114,59,1,8740,99,114,59,3,55349,56489,105,108,100,101,5,209,1,59,4135,1,209,59,1,925,4,14,69,97,99,100,102,103,109,111,112,114,115,116,117,118,4170,4176,4187,4205,4212,4217,4228,4253,4259,4292,4295,4316,4337,4346,108,105,103,59,1,338,99,117,116,101,5,211,1,59,4185,1,211,4,2,105,121,4193,4202,114,99,5,212,1,59,4200,1,212,59,1,1054,98,108,97,99,59,1,336,114,59,3,55349,56594,114,97,118,101,5,210,1,59,4226,1,210,4,3,97,101,105,4236,4241,4246,99,114,59,1,332,103,97,59,1,937,99,114,111,110,59,1,927,112,102,59,3,55349,56646,101,110,67,117,114,108,121,4,2,68,81,4272,4285,111,117,98,108,101,81,117,111,116,101,59,1,8220,117,111,116,101,59,1,8216,59,1,10836,4,2,99,108,4301,4306,114,59,3,55349,56490,97,115,104,5,216,1,59,4314,1,216,105,4,2,108,109,4323,4332,100,101,5,213,1,59,4330,1,213,101,115,59,1,10807,109,108,5,214,1,59,4344,1,214,101,114,4,2,66,80,4354,4380,4,2,97,114,4360,4364,114,59,1,8254,97,99,4,2,101,107,4372,4375,59,1,9182,101,116,59,1,9140,97,114,101,110,116,104,101,115,105,115,59,1,9180,4,9,97,99,102,104,105,108,111,114,115,4413,4422,4426,4431,4435,4438,4448,4471,4561,114,116,105,97,108,68,59,1,8706,121,59,1,1055,114,59,3,55349,56595,105,59,1,934,59,1,928,117,115,77,105,110,117,115,59,1,177,4,2,105,112,4454,4467,110,99,97,114,101,112,108,97,110,101,59,1,8460,102,59,1,8473,4,4,59,101,105,111,4481,4483,4526,4531,1,10939,99,101,100,101,115,4,4,59,69,83,84,4498,4500,4507,4519,1,8826,113,117,97,108,59,1,10927,108,97,110,116,69,113,117,97,108,59,1,8828,105,108,100,101,59,1,8830,109,101,59,1,8243,4,2,100,112,4537,4543,117,99,116,59,1,8719,111,114,116,105,111,110,4,2,59,97,4555,4557,1,8759,108,59,1,8733,4,2,99,105,4567,4572,114,59,3,55349,56491,59,1,936,4,4,85,102,111,115,4585,4594,4599,4604,79,84,5,34,1,59,4592,1,34,114,59,3,55349,56596,112,102,59,1,8474,99,114,59,3,55349,56492,4,12,66,69,97,99,101,102,104,105,111,114,115,117,4636,4642,4650,4681,4704,4763,4767,4771,5047,5069,5081,5094,97,114,114,59,1,10512,71,5,174,1,59,4648,1,174,4,3,99,110,114,4658,4664,4668,117,116,101,59,1,340,103,59,1,10219,114,4,2,59,116,4675,4677,1,8608,108,59,1,10518,4,3,97,101,121,4689,4695,4701,114,111,110,59,1,344,100,105,108,59,1,342,59,1,1056,4,2,59,118,4710,4712,1,8476,101,114,115,101,4,2,69,85,4722,4748,4,2,108,113,4728,4736,101,109,101,110,116,59,1,8715,117,105,108,105,98,114,105,117,109,59,1,8651,112,69,113,117,105,108,105,98,114,105,117,109,59,1,10607,114,59,1,8476,111,59,1,929,103,104,116,4,8,65,67,68,70,84,85,86,97,4792,4840,4849,4905,4912,4972,5022,5040,4,2,110,114,4798,4811,103,108,101,66,114,97,99,107,101,116,59,1,10217,114,111,119,4,3,59,66,76,4822,4824,4829,1,8594,97,114,59,1,8677,101,102,116,65,114,114,111,119,59,1,8644,101,105,108,105,110,103,59,1,8969,111,4,2,117,119,4856,4869,98,108,101,66,114,97,99,107,101,116,59,1,10215,110,4,2,84,86,4876,4887,101,101,86,101,99,116,111,114,59,1,10589,101,99,116,111,114,4,2,59,66,4898,4900,1,8642,97,114,59,1,10581,108,111,111,114,59,1,8971,4,2,101,114,4918,4944,101,4,3,59,65,86,4927,4929,4936,1,8866,114,114,111,119,59,1,8614,101,99,116,111,114,59,1,10587,105,97,110,103,108,101,4,3,59,66,69,4958,4960,4965,1,8883,97,114,59,1,10704,113,117,97,108,59,1,8885,112,4,3,68,84,86,4981,4993,5004,111,119,110,86,101,99,116,111,114,59,1,10575,101,101,86,101,99,116,111,114,59,1,10588,101,99,116,111,114,4,2,59,66,5015,5017,1,8638,97,114,59,1,10580,101,99,116,111,114,4,2,59,66,5033,5035,1,8640,97,114,59,1,10579,114,114,111,119,59,1,8658,4,2,112,117,5053,5057,102,59,1,8477,110,100,73,109,112,108,105,101,115,59,1,10608,105,103,104,116,97,114,114,111,119,59,1,8667,4,2,99,104,5087,5091,114,59,1,8475,59,1,8625,108,101,68,101,108,97,121,101,100,59,1,10740,4,13,72,79,97,99,102,104,105,109,111,113,115,116,117,5134,5150,5157,5164,5198,5203,5259,5265,5277,5283,5374,5380,5385,4,2,67,99,5140,5146,72,99,121,59,1,1065,121,59,1,1064,70,84,99,121,59,1,1068,99,117,116,101,59,1,346,4,5,59,97,101,105,121,5176,5178,5184,5190,5195,1,10940,114,111,110,59,1,352,100,105,108,59,1,350,114,99,59,1,348,59,1,1057,114,59,3,55349,56598,111,114,116,4,4,68,76,82,85,5216,5227,5238,5250,111,119,110,65,114,114,111,119,59,1,8595,101,102,116,65,114,114,111,119,59,1,8592,105,103,104,116,65,114,114,111,119,59,1,8594,112,65,114,114,111,119,59,1,8593,103,109,97,59,1,931,97,108,108,67,105,114,99,108,101,59,1,8728,112,102,59,3,55349,56650,4,2,114,117,5289,5293,116,59,1,8730,97,114,101,4,4,59,73,83,85,5306,5308,5322,5367,1,9633,110,116,101,114,115,101,99,116,105,111,110,59,1,8851,117,4,2,98,112,5329,5347,115,101,116,4,2,59,69,5338,5340,1,8847,113,117,97,108,59,1,8849,101,114,115,101,116,4,2,59,69,5358,5360,1,8848,113,117,97,108,59,1,8850,110,105,111,110,59,1,8852,99,114,59,3,55349,56494,97,114,59,1,8902,4,4,98,99,109,112,5395,5420,5475,5478,4,2,59,115,5401,5403,1,8912,101,116,4,2,59,69,5411,5413,1,8912,113,117,97,108,59,1,8838,4,2,99,104,5426,5468,101,101,100,115,4,4,59,69,83,84,5440,5442,5449,5461,1,8827,113,117,97,108,59,1,10928,108,97,110,116,69,113,117,97,108,59,1,8829,105,108,100,101,59,1,8831,84,104,97,116,59,1,8715,59,1,8721,4,3,59,101,115,5486,5488,5507,1,8913,114,115,101,116,4,2,59,69,5498,5500,1,8835,113,117,97,108,59,1,8839,101,116,59,1,8913,4,11,72,82,83,97,99,102,104,105,111,114,115,5536,5546,5552,5567,5579,5602,5607,5655,5695,5701,5711,79,82,78,5,222,1,59,5544,1,222,65,68,69,59,1,8482,4,2,72,99,5558,5563,99,121,59,1,1035,121,59,1,1062,4,2,98,117,5573,5576,59,1,9,59,1,932,4,3,97,101,121,5587,5593,5599,114,111,110,59,1,356,100,105,108,59,1,354,59,1,1058,114,59,3,55349,56599,4,2,101,105,5613,5631,4,2,114,116,5619,5627,101,102,111,114,101,59,1,8756,97,59,1,920,4,2,99,110,5637,5647,107,83,112,97,99,101,59,3,8287,8202,83,112,97,99,101,59,1,8201,108,100,101,4,4,59,69,70,84,5668,5670,5677,5688,1,8764,113,117,97,108,59,1,8771,117,108,108,69,113,117,97,108,59,1,8773,105,108,100,101,59,1,8776,112,102,59,3,55349,56651,105,112,108,101,68,111,116,59,1,8411,4,2,99,116,5717,5722,114,59,3,55349,56495,114,111,107,59,1,358,4,14,97,98,99,100,102,103,109,110,111,112,114,115,116,117,5758,5789,5805,5823,5830,5835,5846,5852,5921,5937,6089,6095,6101,6108,4,2,99,114,5764,5774,117,116,101,5,218,1,59,5772,1,218,114,4,2,59,111,5781,5783,1,8607,99,105,114,59,1,10569,114,4,2,99,101,5796,5800,121,59,1,1038,118,101,59,1,364,4,2,105,121,5811,5820,114,99,5,219,1,59,5818,1,219,59,1,1059,98,108,97,99,59,1,368,114,59,3,55349,56600,114,97,118,101,5,217,1,59,5844,1,217,97,99,114,59,1,362,4,2,100,105,5858,5905,101,114,4,2,66,80,5866,5892,4,2,97,114,5872,5876,114,59,1,95,97,99,4,2,101,107,5884,5887,59,1,9183,101,116,59,1,9141,97,114,101,110,116,104,101,115,105,115,59,1,9181,111,110,4,2,59,80,5913,5915,1,8899,108,117,115,59,1,8846,4,2,103,112,5927,5932,111,110,59,1,370,102,59,3,55349,56652,4,8,65,68,69,84,97,100,112,115,5955,5985,5996,6009,6026,6033,6044,6075,114,114,111,119,4,3,59,66,68,5967,5969,5974,1,8593,97,114,59,1,10514,111,119,110,65,114,114,111,119,59,1,8645,111,119,110,65,114,114,111,119,59,1,8597,113,117,105,108,105,98,114,105,117,109,59,1,10606,101,101,4,2,59,65,6017,6019,1,8869,114,114,111,119,59,1,8613,114,114,111,119,59,1,8657,111,119,110,97,114,114,111,119,59,1,8661,101,114,4,2,76,82,6052,6063,101,102,116,65,114,114,111,119,59,1,8598,105,103,104,116,65,114,114,111,119,59,1,8599,105,4,2,59,108,6082,6084,1,978,111,110,59,1,933,105,110,103,59,1,366,99,114,59,3,55349,56496,105,108,100,101,59,1,360,109,108,5,220,1,59,6115,1,220,4,9,68,98,99,100,101,102,111,115,118,6137,6143,6148,6152,6166,6250,6255,6261,6267,97,115,104,59,1,8875,97,114,59,1,10987,121,59,1,1042,97,115,104,4,2,59,108,6161,6163,1,8873,59,1,10982,4,2,101,114,6172,6175,59,1,8897,4,3,98,116,121,6183,6188,6238,97,114,59,1,8214,4,2,59,105,6194,6196,1,8214,99,97,108,4,4,66,76,83,84,6209,6214,6220,6231,97,114,59,1,8739,105,110,101,59,1,124,101,112,97,114,97,116,111,114,59,1,10072,105,108,100,101,59,1,8768,84,104,105,110,83,112,97,99,101,59,1,8202,114,59,3,55349,56601,112,102,59,3,55349,56653,99,114,59,3,55349,56497,100,97,115,104,59,1,8874,4,5,99,101,102,111,115,6286,6292,6298,6303,6309,105,114,99,59,1,372,100,103,101,59,1,8896,114,59,3,55349,56602,112,102,59,3,55349,56654,99,114,59,3,55349,56498,4,4,102,105,111,115,6325,6330,6333,6339,114,59,3,55349,56603,59,1,926,112,102,59,3,55349,56655,99,114,59,3,55349,56499,4,9,65,73,85,97,99,102,111,115,117,6365,6370,6375,6380,6391,6405,6410,6416,6422,99,121,59,1,1071,99,121,59,1,1031,99,121,59,1,1070,99,117,116,101,5,221,1,59,6389,1,221,4,2,105,121,6397,6402,114,99,59,1,374,59,1,1067,114,59,3,55349,56604,112,102,59,3,55349,56656,99,114,59,3,55349,56500,109,108,59,1,376,4,8,72,97,99,100,101,102,111,115,6445,6450,6457,6472,6477,6501,6505,6510,99,121,59,1,1046,99,117,116,101,59,1,377,4,2,97,121,6463,6469,114,111,110,59,1,381,59,1,1047,111,116,59,1,379,4,2,114,116,6483,6497,111,87,105,100,116,104,83,112,97,99,101,59,1,8203,97,59,1,918,114,59,1,8488,112,102,59,1,8484,99,114,59,3,55349,56501,4,16,97,98,99,101,102,103,108,109,110,111,112,114,115,116,117,119,6550,6561,6568,6612,6622,6634,6645,6672,6699,6854,6870,6923,6933,6963,6974,6983,99,117,116,101,5,225,1,59,6559,1,225,114,101,118,101,59,1,259,4,6,59,69,100,105,117,121,6582,6584,6588,6591,6600,6609,1,8766,59,3,8766,819,59,1,8767,114,99,5,226,1,59,6598,1,226,116,101,5,180,1,59,6607,1,180,59,1,1072,108,105,103,5,230,1,59,6620,1,230,4,2,59,114,6628,6630,1,8289,59,3,55349,56606,114,97,118,101,5,224,1,59,6643,1,224,4,2,101,112,6651,6667,4,2,102,112,6657,6663,115,121,109,59,1,8501,104,59,1,8501,104,97,59,1,945,4,2,97,112,6678,6692,4,2,99,108,6684,6688,114,59,1,257,103,59,1,10815,5,38,1,59,6697,1,38,4,2,100,103,6705,6737,4,5,59,97,100,115,118,6717,6719,6724,6727,6734,1,8743,110,100,59,1,10837,59,1,10844,108,111,112,101,59,1,10840,59,1,10842,4,7,59,101,108,109,114,115,122,6753,6755,6758,6762,6814,6835,6848,1,8736,59,1,10660,101,59,1,8736,115,100,4,2,59,97,6770,6772,1,8737,4,8,97,98,99,100,101,102,103,104,6790,6793,6796,6799,6802,6805,6808,6811,59,1,10664,59,1,10665,59,1,10666,59,1,10667,59,1,10668,59,1,10669,59,1,10670,59,1,10671,116,4,2,59,118,6821,6823,1,8735,98,4,2,59,100,6830,6832,1,8894,59,1,10653,4,2,112,116,6841,6845,104,59,1,8738,59,1,197,97,114,114,59,1,9084,4,2,103,112,6860,6865,111,110,59,1,261,102,59,3,55349,56658,4,7,59,69,97,101,105,111,112,6886,6888,6891,6897,6900,6904,6908,1,8776,59,1,10864,99,105,114,59,1,10863,59,1,8778,100,59,1,8779,115,59,1,39,114,111,120,4,2,59,101,6917,6919,1,8776,113,59,1,8778,105,110,103,5,229,1,59,6931,1,229,4,3,99,116,121,6941,6946,6949,114,59,3,55349,56502,59,1,42,109,112,4,2,59,101,6957,6959,1,8776,113,59,1,8781,105,108,100,101,5,227,1,59,6972,1,227,109,108,5,228,1,59,6981,1,228,4,2,99,105,6989,6997,111,110,105,110,116,59,1,8755,110,116,59,1,10769,4,16,78,97,98,99,100,101,102,105,107,108,110,111,112,114,115,117,7036,7041,7119,7135,7149,7155,7219,7224,7347,7354,7463,7489,7786,7793,7814,7866,111,116,59,1,10989,4,2,99,114,7047,7094,107,4,4,99,101,112,115,7058,7064,7073,7080,111,110,103,59,1,8780,112,115,105,108,111,110,59,1,1014,114,105,109,101,59,1,8245,105,109,4,2,59,101,7088,7090,1,8765,113,59,1,8909,4,2,118,119,7100,7105,101,101,59,1,8893,101,100,4,2,59,103,7113,7115,1,8965,101,59,1,8965,114,107,4,2,59,116,7127,7129,1,9141,98,114,107,59,1,9142,4,2,111,121,7141,7146,110,103,59,1,8780,59,1,1073,113,117,111,59,1,8222,4,5,99,109,112,114,116,7167,7181,7188,7193,7199,97,117,115,4,2,59,101,7176,7178,1,8757,59,1,8757,112,116,121,118,59,1,10672,115,105,59,1,1014,110,111,117,59,1,8492,4,3,97,104,119,7207,7210,7213,59,1,946,59,1,8502,101,101,110,59,1,8812,114,59,3,55349,56607,103,4,7,99,111,115,116,117,118,119,7241,7262,7288,7305,7328,7335,7340,4,3,97,105,117,7249,7253,7258,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,4,3,100,112,116,7270,7275,7281,111,116,59,1,10752,108,117,115,59,1,10753,105,109,101,115,59,1,10754,4,2,113,116,7294,7300,99,117,112,59,1,10758,97,114,59,1,9733,114,105,97,110,103,108,101,4,2,100,117,7318,7324,111,119,110,59,1,9661,112,59,1,9651,112,108,117,115,59,1,10756,101,101,59,1,8897,101,100,103,101,59,1,8896,97,114,111,119,59,1,10509,4,3,97,107,111,7362,7436,7458,4,2,99,110,7368,7432,107,4,3,108,115,116,7377,7386,7394,111,122,101,110,103,101,59,1,10731,113,117,97,114,101,59,1,9642,114,105,97,110,103,108,101,4,4,59,100,108,114,7411,7413,7419,7425,1,9652,111,119,110,59,1,9662,101,102,116,59,1,9666,105,103,104,116,59,1,9656,107,59,1,9251,4,2,49,51,7442,7454,4,2,50,52,7448,7451,59,1,9618,59,1,9617,52,59,1,9619,99,107,59,1,9608,4,2,101,111,7469,7485,4,2,59,113,7475,7478,3,61,8421,117,105,118,59,3,8801,8421,116,59,1,8976,4,4,112,116,119,120,7499,7504,7517,7523,102,59,3,55349,56659,4,2,59,116,7510,7512,1,8869,111,109,59,1,8869,116,105,101,59,1,8904,4,12,68,72,85,86,98,100,104,109,112,116,117,118,7549,7571,7597,7619,7655,7660,7682,7708,7715,7721,7728,7750,4,4,76,82,108,114,7559,7562,7565,7568,59,1,9559,59,1,9556,59,1,9558,59,1,9555,4,5,59,68,85,100,117,7583,7585,7588,7591,7594,1,9552,59,1,9574,59,1,9577,59,1,9572,59,1,9575,4,4,76,82,108,114,7607,7610,7613,7616,59,1,9565,59,1,9562,59,1,9564,59,1,9561,4,7,59,72,76,82,104,108,114,7635,7637,7640,7643,7646,7649,7652,1,9553,59,1,9580,59,1,9571,59,1,9568,59,1,9579,59,1,9570,59,1,9567,111,120,59,1,10697,4,4,76,82,108,114,7670,7673,7676,7679,59,1,9557,59,1,9554,59,1,9488,59,1,9484,4,5,59,68,85,100,117,7694,7696,7699,7702,7705,1,9472,59,1,9573,59,1,9576,59,1,9516,59,1,9524,105,110,117,115,59,1,8863,108,117,115,59,1,8862,105,109,101,115,59,1,8864,4,4,76,82,108,114,7738,7741,7744,7747,59,1,9563,59,1,9560,59,1,9496,59,1,9492,4,7,59,72,76,82,104,108,114,7766,7768,7771,7774,7777,7780,7783,1,9474,59,1,9578,59,1,9569,59,1,9566,59,1,9532,59,1,9508,59,1,9500,114,105,109,101,59,1,8245,4,2,101,118,7799,7804,118,101,59,1,728,98,97,114,5,166,1,59,7812,1,166,4,4,99,101,105,111,7824,7829,7834,7846,114,59,3,55349,56503,109,105,59,1,8271,109,4,2,59,101,7841,7843,1,8765,59,1,8909,108,4,3,59,98,104,7855,7857,7860,1,92,59,1,10693,115,117,98,59,1,10184,4,2,108,109,7872,7885,108,4,2,59,101,7879,7881,1,8226,116,59,1,8226,112,4,3,59,69,101,7894,7896,7899,1,8782,59,1,10926,4,2,59,113,7905,7907,1,8783,59,1,8783,4,15,97,99,100,101,102,104,105,108,111,114,115,116,117,119,121,7942,8021,8075,8080,8121,8126,8157,8279,8295,8430,8446,8485,8491,8707,8726,4,3,99,112,114,7950,7956,8007,117,116,101,59,1,263,4,6,59,97,98,99,100,115,7970,7972,7977,7984,7998,8003,1,8745,110,100,59,1,10820,114,99,117,112,59,1,10825,4,2,97,117,7990,7994,112,59,1,10827,112,59,1,10823,111,116,59,1,10816,59,3,8745,65024,4,2,101,111,8013,8017,116,59,1,8257,110,59,1,711,4,4,97,101,105,117,8031,8046,8056,8061,4,2,112,114,8037,8041,115,59,1,10829,111,110,59,1,269,100,105,108,5,231,1,59,8054,1,231,114,99,59,1,265,112,115,4,2,59,115,8069,8071,1,10828,109,59,1,10832,111,116,59,1,267,4,3,100,109,110,8088,8097,8104,105,108,5,184,1,59,8095,1,184,112,116,121,118,59,1,10674,116,5,162,2,59,101,8112,8114,1,162,114,100,111,116,59,1,183,114,59,3,55349,56608,4,3,99,101,105,8134,8138,8154,121,59,1,1095,99,107,4,2,59,109,8146,8148,1,10003,97,114,107,59,1,10003,59,1,967,114,4,7,59,69,99,101,102,109,115,8174,8176,8179,8258,8261,8268,8273,1,9675,59,1,10691,4,3,59,101,108,8187,8189,8193,1,710,113,59,1,8791,101,4,2,97,100,8200,8223,114,114,111,119,4,2,108,114,8210,8216,101,102,116,59,1,8634,105,103,104,116,59,1,8635,4,5,82,83,97,99,100,8235,8238,8241,8246,8252,59,1,174,59,1,9416,115,116,59,1,8859,105,114,99,59,1,8858,97,115,104,59,1,8861,59,1,8791,110,105,110,116,59,1,10768,105,100,59,1,10991,99,105,114,59,1,10690,117,98,115,4,2,59,117,8288,8290,1,9827,105,116,59,1,9827,4,4,108,109,110,112,8305,8326,8376,8400,111,110,4,2,59,101,8313,8315,1,58,4,2,59,113,8321,8323,1,8788,59,1,8788,4,2,109,112,8332,8344,97,4,2,59,116,8339,8341,1,44,59,1,64,4,3,59,102,108,8352,8354,8358,1,8705,110,59,1,8728,101,4,2,109,120,8365,8371,101,110,116,59,1,8705,101,115,59,1,8450,4,2,103,105,8382,8395,4,2,59,100,8388,8390,1,8773,111,116,59,1,10861,110,116,59,1,8750,4,3,102,114,121,8408,8412,8417,59,3,55349,56660,111,100,59,1,8720,5,169,2,59,115,8424,8426,1,169,114,59,1,8471,4,2,97,111,8436,8441,114,114,59,1,8629,115,115,59,1,10007,4,2,99,117,8452,8457,114,59,3,55349,56504,4,2,98,112,8463,8474,4,2,59,101,8469,8471,1,10959,59,1,10961,4,2,59,101,8480,8482,1,10960,59,1,10962,100,111,116,59,1,8943,4,7,100,101,108,112,114,118,119,8507,8522,8536,8550,8600,8697,8702,97,114,114,4,2,108,114,8516,8519,59,1,10552,59,1,10549,4,2,112,115,8528,8532,114,59,1,8926,99,59,1,8927,97,114,114,4,2,59,112,8545,8547,1,8630,59,1,10557,4,6,59,98,99,100,111,115,8564,8566,8573,8587,8592,8596,1,8746,114,99,97,112,59,1,10824,4,2,97,117,8579,8583,112,59,1,10822,112,59,1,10826,111,116,59,1,8845,114,59,1,10821,59,3,8746,65024,4,4,97,108,114,118,8610,8623,8663,8672,114,114,4,2,59,109,8618,8620,1,8631,59,1,10556,121,4,3,101,118,119,8632,8651,8656,113,4,2,112,115,8639,8645,114,101,99,59,1,8926,117,99,99,59,1,8927,101,101,59,1,8910,101,100,103,101,59,1,8911,101,110,5,164,1,59,8670,1,164,101,97,114,114,111,119,4,2,108,114,8684,8690,101,102,116,59,1,8630,105,103,104,116,59,1,8631,101,101,59,1,8910,101,100,59,1,8911,4,2,99,105,8713,8721,111,110,105,110,116,59,1,8754,110,116,59,1,8753,108,99,116,121,59,1,9005,4,19,65,72,97,98,99,100,101,102,104,105,106,108,111,114,115,116,117,119,122,8773,8778,8783,8821,8839,8854,8887,8914,8930,8944,9036,9041,9058,9197,9227,9258,9281,9297,9305,114,114,59,1,8659,97,114,59,1,10597,4,4,103,108,114,115,8793,8799,8805,8809,103,101,114,59,1,8224,101,116,104,59,1,8504,114,59,1,8595,104,4,2,59,118,8816,8818,1,8208,59,1,8867,4,2,107,108,8827,8834,97,114,111,119,59,1,10511,97,99,59,1,733,4,2,97,121,8845,8851,114,111,110,59,1,271,59,1,1076,4,3,59,97,111,8862,8864,8880,1,8518,4,2,103,114,8870,8876,103,101,114,59,1,8225,114,59,1,8650,116,115,101,113,59,1,10871,4,3,103,108,109,8895,8902,8907,5,176,1,59,8900,1,176,116,97,59,1,948,112,116,121,118,59,1,10673,4,2,105,114,8920,8926,115,104,116,59,1,10623,59,3,55349,56609,97,114,4,2,108,114,8938,8941,59,1,8643,59,1,8642,4,5,97,101,103,115,118,8956,8986,8989,8996,9001,109,4,3,59,111,115,8965,8967,8983,1,8900,110,100,4,2,59,115,8975,8977,1,8900,117,105,116,59,1,9830,59,1,9830,59,1,168,97,109,109,97,59,1,989,105,110,59,1,8946,4,3,59,105,111,9009,9011,9031,1,247,100,101,5,247,2,59,111,9020,9022,1,247,110,116,105,109,101,115,59,1,8903,110,120,59,1,8903,99,121,59,1,1106,99,4,2,111,114,9048,9053,114,110,59,1,8990,111,112,59,1,8973,4,5,108,112,116,117,119,9070,9076,9081,9130,9144,108,97,114,59,1,36,102,59,3,55349,56661,4,5,59,101,109,112,115,9093,9095,9109,9116,9122,1,729,113,4,2,59,100,9102,9104,1,8784,111,116,59,1,8785,105,110,117,115,59,1,8760,108,117,115,59,1,8724,113,117,97,114,101,59,1,8865,98,108,101,98,97,114,119,101,100,103,101,59,1,8966,110,4,3,97,100,104,9153,9160,9172,114,114,111,119,59,1,8595,111,119,110,97,114,114,111,119,115,59,1,8650,97,114,112,111,111,110,4,2,108,114,9184,9190,101,102,116,59,1,8643,105,103,104,116,59,1,8642,4,2,98,99,9203,9211,107,97,114,111,119,59,1,10512,4,2,111,114,9217,9222,114,110,59,1,8991,111,112,59,1,8972,4,3,99,111,116,9235,9248,9252,4,2,114,121,9241,9245,59,3,55349,56505,59,1,1109,108,59,1,10742,114,111,107,59,1,273,4,2,100,114,9264,9269,111,116,59,1,8945,105,4,2,59,102,9276,9278,1,9663,59,1,9662,4,2,97,104,9287,9292,114,114,59,1,8693,97,114,59,1,10607,97,110,103,108,101,59,1,10662,4,2,99,105,9311,9315,121,59,1,1119,103,114,97,114,114,59,1,10239,4,18,68,97,99,100,101,102,103,108,109,110,111,112,113,114,115,116,117,120,9361,9376,9398,9439,9444,9447,9462,9495,9531,9585,9598,9614,9659,9755,9771,9792,9808,9826,4,2,68,111,9367,9372,111,116,59,1,10871,116,59,1,8785,4,2,99,115,9382,9392,117,116,101,5,233,1,59,9390,1,233,116,101,114,59,1,10862,4,4,97,105,111,121,9408,9414,9430,9436,114,111,110,59,1,283,114,4,2,59,99,9421,9423,1,8790,5,234,1,59,9428,1,234,108,111,110,59,1,8789,59,1,1101,111,116,59,1,279,59,1,8519,4,2,68,114,9453,9458,111,116,59,1,8786,59,3,55349,56610,4,3,59,114,115,9470,9472,9482,1,10906,97,118,101,5,232,1,59,9480,1,232,4,2,59,100,9488,9490,1,10902,111,116,59,1,10904,4,4,59,105,108,115,9505,9507,9515,9518,1,10905,110,116,101,114,115,59,1,9191,59,1,8467,4,2,59,100,9524,9526,1,10901,111,116,59,1,10903,4,3,97,112,115,9539,9544,9564,99,114,59,1,275,116,121,4,3,59,115,118,9554,9556,9561,1,8709,101,116,59,1,8709,59,1,8709,112,4,2,49,59,9571,9583,4,2,51,52,9577,9580,59,1,8196,59,1,8197,1,8195,4,2,103,115,9591,9594,59,1,331,112,59,1,8194,4,2,103,112,9604,9609,111,110,59,1,281,102,59,3,55349,56662,4,3,97,108,115,9622,9635,9640,114,4,2,59,115,9629,9631,1,8917,108,59,1,10723,117,115,59,1,10865,105,4,3,59,108,118,9649,9651,9656,1,949,111,110,59,1,949,59,1,1013,4,4,99,115,117,118,9669,9686,9716,9747,4,2,105,111,9675,9680,114,99,59,1,8790,108,111,110,59,1,8789,4,2,105,108,9692,9696,109,59,1,8770,97,110,116,4,2,103,108,9705,9710,116,114,59,1,10902,101,115,115,59,1,10901,4,3,97,101,105,9724,9729,9734,108,115,59,1,61,115,116,59,1,8799,118,4,2,59,68,9741,9743,1,8801,68,59,1,10872,112,97,114,115,108,59,1,10725,4,2,68,97,9761,9766,111,116,59,1,8787,114,114,59,1,10609,4,3,99,100,105,9779,9783,9788,114,59,1,8495,111,116,59,1,8784,109,59,1,8770,4,2,97,104,9798,9801,59,1,951,5,240,1,59,9806,1,240,4,2,109,114,9814,9822,108,5,235,1,59,9820,1,235,111,59,1,8364,4,3,99,105,112,9834,9838,9843,108,59,1,33,115,116,59,1,8707,4,2,101,111,9849,9859,99,116,97,116,105,111,110,59,1,8496,110,101,110,116,105,97,108,101,59,1,8519,4,12,97,99,101,102,105,106,108,110,111,112,114,115,9896,9910,9914,9921,9954,9960,9967,9989,9994,10027,10036,10164,108,108,105,110,103,100,111,116,115,101,113,59,1,8786,121,59,1,1092,109,97,108,101,59,1,9792,4,3,105,108,114,9929,9935,9950,108,105,103,59,1,64259,4,2,105,108,9941,9945,103,59,1,64256,105,103,59,1,64260,59,3,55349,56611,108,105,103,59,1,64257,108,105,103,59,3,102,106,4,3,97,108,116,9975,9979,9984,116,59,1,9837,105,103,59,1,64258,110,115,59,1,9649,111,102,59,1,402,4,2,112,114,1e4,10005,102,59,3,55349,56663,4,2,97,107,10011,10016,108,108,59,1,8704,4,2,59,118,10022,10024,1,8916,59,1,10969,97,114,116,105,110,116,59,1,10765,4,2,97,111,10042,10159,4,2,99,115,10048,10155,4,6,49,50,51,52,53,55,10062,10102,10114,10135,10139,10151,4,6,50,51,52,53,54,56,10076,10083,10086,10093,10096,10099,5,189,1,59,10081,1,189,59,1,8531,5,188,1,59,10091,1,188,59,1,8533,59,1,8537,59,1,8539,4,2,51,53,10108,10111,59,1,8532,59,1,8534,4,3,52,53,56,10122,10129,10132,5,190,1,59,10127,1,190,59,1,8535,59,1,8540,53,59,1,8536,4,2,54,56,10145,10148,59,1,8538,59,1,8541,56,59,1,8542,108,59,1,8260,119,110,59,1,8994,99,114,59,3,55349,56507,4,17,69,97,98,99,100,101,102,103,105,106,108,110,111,114,115,116,118,10206,10217,10247,10254,10268,10273,10358,10363,10374,10380,10385,10406,10458,10464,10470,10497,10610,4,2,59,108,10212,10214,1,8807,59,1,10892,4,3,99,109,112,10225,10231,10244,117,116,101,59,1,501,109,97,4,2,59,100,10239,10241,1,947,59,1,989,59,1,10886,114,101,118,101,59,1,287,4,2,105,121,10260,10265,114,99,59,1,285,59,1,1075,111,116,59,1,289,4,4,59,108,113,115,10283,10285,10288,10308,1,8805,59,1,8923,4,3,59,113,115,10296,10298,10301,1,8805,59,1,8807,108,97,110,116,59,1,10878,4,4,59,99,100,108,10318,10320,10324,10345,1,10878,99,59,1,10921,111,116,4,2,59,111,10332,10334,1,10880,4,2,59,108,10340,10342,1,10882,59,1,10884,4,2,59,101,10351,10354,3,8923,65024,115,59,1,10900,114,59,3,55349,56612,4,2,59,103,10369,10371,1,8811,59,1,8921,109,101,108,59,1,8503,99,121,59,1,1107,4,4,59,69,97,106,10395,10397,10400,10403,1,8823,59,1,10898,59,1,10917,59,1,10916,4,4,69,97,101,115,10416,10419,10434,10453,59,1,8809,112,4,2,59,112,10426,10428,1,10890,114,111,120,59,1,10890,4,2,59,113,10440,10442,1,10888,4,2,59,113,10448,10450,1,10888,59,1,8809,105,109,59,1,8935,112,102,59,3,55349,56664,97,118,101,59,1,96,4,2,99,105,10476,10480,114,59,1,8458,109,4,3,59,101,108,10489,10491,10494,1,8819,59,1,10894,59,1,10896,5,62,6,59,99,100,108,113,114,10512,10514,10527,10532,10538,10545,1,62,4,2,99,105,10520,10523,59,1,10919,114,59,1,10874,111,116,59,1,8919,80,97,114,59,1,10645,117,101,115,116,59,1,10876,4,5,97,100,101,108,115,10557,10574,10579,10599,10605,4,2,112,114,10563,10570,112,114,111,120,59,1,10886,114,59,1,10616,111,116,59,1,8919,113,4,2,108,113,10586,10592,101,115,115,59,1,8923,108,101,115,115,59,1,10892,101,115,115,59,1,8823,105,109,59,1,8819,4,2,101,110,10616,10626,114,116,110,101,113,113,59,3,8809,65024,69,59,3,8809,65024,4,10,65,97,98,99,101,102,107,111,115,121,10653,10658,10713,10718,10724,10760,10765,10786,10850,10875,114,114,59,1,8660,4,4,105,108,109,114,10668,10674,10678,10684,114,115,112,59,1,8202,102,59,1,189,105,108,116,59,1,8459,4,2,100,114,10690,10695,99,121,59,1,1098,4,3,59,99,119,10703,10705,10710,1,8596,105,114,59,1,10568,59,1,8621,97,114,59,1,8463,105,114,99,59,1,293,4,3,97,108,114,10732,10748,10754,114,116,115,4,2,59,117,10741,10743,1,9829,105,116,59,1,9829,108,105,112,59,1,8230,99,111,110,59,1,8889,114,59,3,55349,56613,115,4,2,101,119,10772,10779,97,114,111,119,59,1,10533,97,114,111,119,59,1,10534,4,5,97,109,111,112,114,10798,10803,10809,10839,10844,114,114,59,1,8703,116,104,116,59,1,8763,107,4,2,108,114,10816,10827,101,102,116,97,114,114,111,119,59,1,8617,105,103,104,116,97,114,114,111,119,59,1,8618,102,59,3,55349,56665,98,97,114,59,1,8213,4,3,99,108,116,10858,10863,10869,114,59,3,55349,56509,97,115,104,59,1,8463,114,111,107,59,1,295,4,2,98,112,10881,10887,117,108,108,59,1,8259,104,101,110,59,1,8208,4,15,97,99,101,102,103,105,106,109,110,111,112,113,115,116,117,10925,10936,10958,10977,10990,11001,11039,11045,11101,11192,11220,11226,11237,11285,11299,99,117,116,101,5,237,1,59,10934,1,237,4,3,59,105,121,10944,10946,10955,1,8291,114,99,5,238,1,59,10953,1,238,59,1,1080,4,2,99,120,10964,10968,121,59,1,1077,99,108,5,161,1,59,10975,1,161,4,2,102,114,10983,10986,59,1,8660,59,3,55349,56614,114,97,118,101,5,236,1,59,10999,1,236,4,4,59,105,110,111,11011,11013,11028,11034,1,8520,4,2,105,110,11019,11024,110,116,59,1,10764,116,59,1,8749,102,105,110,59,1,10716,116,97,59,1,8489,108,105,103,59,1,307,4,3,97,111,112,11053,11092,11096,4,3,99,103,116,11061,11065,11088,114,59,1,299,4,3,101,108,112,11073,11076,11082,59,1,8465,105,110,101,59,1,8464,97,114,116,59,1,8465,104,59,1,305,102,59,1,8887,101,100,59,1,437,4,5,59,99,102,111,116,11113,11115,11121,11136,11142,1,8712,97,114,101,59,1,8453,105,110,4,2,59,116,11129,11131,1,8734,105,101,59,1,10717,100,111,116,59,1,305,4,5,59,99,101,108,112,11154,11156,11161,11179,11186,1,8747,97,108,59,1,8890,4,2,103,114,11167,11173,101,114,115,59,1,8484,99,97,108,59,1,8890,97,114,104,107,59,1,10775,114,111,100,59,1,10812,4,4,99,103,112,116,11202,11206,11211,11216,121,59,1,1105,111,110,59,1,303,102,59,3,55349,56666,97,59,1,953,114,111,100,59,1,10812,117,101,115,116,5,191,1,59,11235,1,191,4,2,99,105,11243,11248,114,59,3,55349,56510,110,4,5,59,69,100,115,118,11261,11263,11266,11271,11282,1,8712,59,1,8953,111,116,59,1,8949,4,2,59,118,11277,11279,1,8948,59,1,8947,59,1,8712,4,2,59,105,11291,11293,1,8290,108,100,101,59,1,297,4,2,107,109,11305,11310,99,121,59,1,1110,108,5,239,1,59,11316,1,239,4,6,99,102,109,111,115,117,11332,11346,11351,11357,11363,11380,4,2,105,121,11338,11343,114,99,59,1,309,59,1,1081,114,59,3,55349,56615,97,116,104,59,1,567,112,102,59,3,55349,56667,4,2,99,101,11369,11374,114,59,3,55349,56511,114,99,121,59,1,1112,107,99,121,59,1,1108,4,8,97,99,102,103,104,106,111,115,11404,11418,11433,11438,11445,11450,11455,11461,112,112,97,4,2,59,118,11413,11415,1,954,59,1,1008,4,2,101,121,11424,11430,100,105,108,59,1,311,59,1,1082,114,59,3,55349,56616,114,101,101,110,59,1,312,99,121,59,1,1093,99,121,59,1,1116,112,102,59,3,55349,56668,99,114,59,3,55349,56512,4,23,65,66,69,72,97,98,99,100,101,102,103,104,106,108,109,110,111,112,114,115,116,117,118,11515,11538,11544,11555,11560,11721,11780,11818,11868,12136,12160,12171,12203,12208,12246,12275,12327,12509,12523,12569,12641,12732,12752,4,3,97,114,116,11523,11528,11532,114,114,59,1,8666,114,59,1,8656,97,105,108,59,1,10523,97,114,114,59,1,10510,4,2,59,103,11550,11552,1,8806,59,1,10891,97,114,59,1,10594,4,9,99,101,103,109,110,112,113,114,116,11580,11586,11594,11600,11606,11624,11627,11636,11694,117,116,101,59,1,314,109,112,116,121,118,59,1,10676,114,97,110,59,1,8466,98,100,97,59,1,955,103,4,3,59,100,108,11615,11617,11620,1,10216,59,1,10641,101,59,1,10216,59,1,10885,117,111,5,171,1,59,11634,1,171,114,4,8,59,98,102,104,108,112,115,116,11655,11657,11669,11673,11677,11681,11685,11690,1,8592,4,2,59,102,11663,11665,1,8676,115,59,1,10527,115,59,1,10525,107,59,1,8617,112,59,1,8619,108,59,1,10553,105,109,59,1,10611,108,59,1,8610,4,3,59,97,101,11702,11704,11709,1,10923,105,108,59,1,10521,4,2,59,115,11715,11717,1,10925,59,3,10925,65024,4,3,97,98,114,11729,11734,11739,114,114,59,1,10508,114,107,59,1,10098,4,2,97,107,11745,11758,99,4,2,101,107,11752,11755,59,1,123,59,1,91,4,2,101,115,11764,11767,59,1,10635,108,4,2,100,117,11774,11777,59,1,10639,59,1,10637,4,4,97,101,117,121,11790,11796,11811,11815,114,111,110,59,1,318,4,2,100,105,11802,11807,105,108,59,1,316,108,59,1,8968,98,59,1,123,59,1,1083,4,4,99,113,114,115,11828,11832,11845,11864,97,59,1,10550,117,111,4,2,59,114,11840,11842,1,8220,59,1,8222,4,2,100,117,11851,11857,104,97,114,59,1,10599,115,104,97,114,59,1,10571,104,59,1,8626,4,5,59,102,103,113,115,11880,11882,12008,12011,12031,1,8804,116,4,5,97,104,108,114,116,11895,11913,11935,11947,11996,114,114,111,119,4,2,59,116,11905,11907,1,8592,97,105,108,59,1,8610,97,114,112,111,111,110,4,2,100,117,11925,11931,111,119,110,59,1,8637,112,59,1,8636,101,102,116,97,114,114,111,119,115,59,1,8647,105,103,104,116,4,3,97,104,115,11959,11974,11984,114,114,111,119,4,2,59,115,11969,11971,1,8596,59,1,8646,97,114,112,111,111,110,115,59,1,8651,113,117,105,103,97,114,114,111,119,59,1,8621,104,114,101,101,116,105,109,101,115,59,1,8907,59,1,8922,4,3,59,113,115,12019,12021,12024,1,8804,59,1,8806,108,97,110,116,59,1,10877,4,5,59,99,100,103,115,12043,12045,12049,12070,12083,1,10877,99,59,1,10920,111,116,4,2,59,111,12057,12059,1,10879,4,2,59,114,12065,12067,1,10881,59,1,10883,4,2,59,101,12076,12079,3,8922,65024,115,59,1,10899,4,5,97,100,101,103,115,12095,12103,12108,12126,12131,112,112,114,111,120,59,1,10885,111,116,59,1,8918,113,4,2,103,113,12115,12120,116,114,59,1,8922,103,116,114,59,1,10891,116,114,59,1,8822,105,109,59,1,8818,4,3,105,108,114,12144,12150,12156,115,104,116,59,1,10620,111,111,114,59,1,8970,59,3,55349,56617,4,2,59,69,12166,12168,1,8822,59,1,10897,4,2,97,98,12177,12198,114,4,2,100,117,12184,12187,59,1,8637,4,2,59,108,12193,12195,1,8636,59,1,10602,108,107,59,1,9604,99,121,59,1,1113,4,5,59,97,99,104,116,12220,12222,12227,12235,12241,1,8810,114,114,59,1,8647,111,114,110,101,114,59,1,8990,97,114,100,59,1,10603,114,105,59,1,9722,4,2,105,111,12252,12258,100,111,116,59,1,320,117,115,116,4,2,59,97,12267,12269,1,9136,99,104,101,59,1,9136,4,4,69,97,101,115,12285,12288,12303,12322,59,1,8808,112,4,2,59,112,12295,12297,1,10889,114,111,120,59,1,10889,4,2,59,113,12309,12311,1,10887,4,2,59,113,12317,12319,1,10887,59,1,8808,105,109,59,1,8934,4,8,97,98,110,111,112,116,119,122,12345,12359,12364,12421,12446,12467,12474,12490,4,2,110,114,12351,12355,103,59,1,10220,114,59,1,8701,114,107,59,1,10214,103,4,3,108,109,114,12373,12401,12409,101,102,116,4,2,97,114,12382,12389,114,114,111,119,59,1,10229,105,103,104,116,97,114,114,111,119,59,1,10231,97,112,115,116,111,59,1,10236,105,103,104,116,97,114,114,111,119,59,1,10230,112,97,114,114,111,119,4,2,108,114,12433,12439,101,102,116,59,1,8619,105,103,104,116,59,1,8620,4,3,97,102,108,12454,12458,12462,114,59,1,10629,59,3,55349,56669,117,115,59,1,10797,105,109,101,115,59,1,10804,4,2,97,98,12480,12485,115,116,59,1,8727,97,114,59,1,95,4,3,59,101,102,12498,12500,12506,1,9674,110,103,101,59,1,9674,59,1,10731,97,114,4,2,59,108,12517,12519,1,40,116,59,1,10643,4,5,97,99,104,109,116,12535,12540,12548,12561,12564,114,114,59,1,8646,111,114,110,101,114,59,1,8991,97,114,4,2,59,100,12556,12558,1,8651,59,1,10605,59,1,8206,114,105,59,1,8895,4,6,97,99,104,105,113,116,12583,12589,12594,12597,12614,12635,113,117,111,59,1,8249,114,59,3,55349,56513,59,1,8624,109,4,3,59,101,103,12606,12608,12611,1,8818,59,1,10893,59,1,10895,4,2,98,117,12620,12623,59,1,91,111,4,2,59,114,12630,12632,1,8216,59,1,8218,114,111,107,59,1,322,5,60,8,59,99,100,104,105,108,113,114,12660,12662,12675,12680,12686,12692,12698,12705,1,60,4,2,99,105,12668,12671,59,1,10918,114,59,1,10873,111,116,59,1,8918,114,101,101,59,1,8907,109,101,115,59,1,8905,97,114,114,59,1,10614,117,101,115,116,59,1,10875,4,2,80,105,12711,12716,97,114,59,1,10646,4,3,59,101,102,12724,12726,12729,1,9667,59,1,8884,59,1,9666,114,4,2,100,117,12739,12746,115,104,97,114,59,1,10570,104,97,114,59,1,10598,4,2,101,110,12758,12768,114,116,110,101,113,113,59,3,8808,65024,69,59,3,8808,65024,4,14,68,97,99,100,101,102,104,105,108,110,111,112,115,117,12803,12809,12893,12908,12914,12928,12933,12937,13011,13025,13032,13049,13052,13069,68,111,116,59,1,8762,4,4,99,108,112,114,12819,12827,12849,12887,114,5,175,1,59,12825,1,175,4,2,101,116,12833,12836,59,1,9794,4,2,59,101,12842,12844,1,10016,115,101,59,1,10016,4,2,59,115,12855,12857,1,8614,116,111,4,4,59,100,108,117,12869,12871,12877,12883,1,8614,111,119,110,59,1,8615,101,102,116,59,1,8612,112,59,1,8613,107,101,114,59,1,9646,4,2,111,121,12899,12905,109,109,97,59,1,10793,59,1,1084,97,115,104,59,1,8212,97,115,117,114,101,100,97,110,103,108,101,59,1,8737,114,59,3,55349,56618,111,59,1,8487,4,3,99,100,110,12945,12954,12985,114,111,5,181,1,59,12952,1,181,4,4,59,97,99,100,12964,12966,12971,12976,1,8739,115,116,59,1,42,105,114,59,1,10992,111,116,5,183,1,59,12983,1,183,117,115,4,3,59,98,100,12995,12997,13e3,1,8722,59,1,8863,4,2,59,117,13006,13008,1,8760,59,1,10794,4,2,99,100,13017,13021,112,59,1,10971,114,59,1,8230,112,108,117,115,59,1,8723,4,2,100,112,13038,13044,101,108,115,59,1,8871,102,59,3,55349,56670,59,1,8723,4,2,99,116,13058,13063,114,59,3,55349,56514,112,111,115,59,1,8766,4,3,59,108,109,13077,13079,13087,1,956,116,105,109,97,112,59,1,8888,97,112,59,1,8888,4,24,71,76,82,86,97,98,99,100,101,102,103,104,105,106,108,109,111,112,114,115,116,117,118,119,13142,13165,13217,13229,13247,13330,13359,13414,13420,13508,13513,13579,13602,13626,13631,13762,13767,13855,13936,13995,14214,14285,14312,14432,4,2,103,116,13148,13152,59,3,8921,824,4,2,59,118,13158,13161,3,8811,8402,59,3,8811,824,4,3,101,108,116,13173,13200,13204,102,116,4,2,97,114,13181,13188,114,114,111,119,59,1,8653,105,103,104,116,97,114,114,111,119,59,1,8654,59,3,8920,824,4,2,59,118,13210,13213,3,8810,8402,59,3,8810,824,105,103,104,116,97,114,114,111,119,59,1,8655,4,2,68,100,13235,13241,97,115,104,59,1,8879,97,115,104,59,1,8878,4,5,98,99,110,112,116,13259,13264,13270,13275,13308,108,97,59,1,8711,117,116,101,59,1,324,103,59,3,8736,8402,4,5,59,69,105,111,112,13287,13289,13293,13298,13302,1,8777,59,3,10864,824,100,59,3,8779,824,115,59,1,329,114,111,120,59,1,8777,117,114,4,2,59,97,13316,13318,1,9838,108,4,2,59,115,13325,13327,1,9838,59,1,8469,4,2,115,117,13336,13344,112,5,160,1,59,13342,1,160,109,112,4,2,59,101,13352,13355,3,8782,824,59,3,8783,824,4,5,97,101,111,117,121,13371,13385,13391,13407,13411,4,2,112,114,13377,13380,59,1,10819,111,110,59,1,328,100,105,108,59,1,326,110,103,4,2,59,100,13399,13401,1,8775,111,116,59,3,10861,824,112,59,1,10818,59,1,1085,97,115,104,59,1,8211,4,7,59,65,97,100,113,115,120,13436,13438,13443,13466,13472,13478,13494,1,8800,114,114,59,1,8663,114,4,2,104,114,13450,13454,107,59,1,10532,4,2,59,111,13460,13462,1,8599,119,59,1,8599,111,116,59,3,8784,824,117,105,118,59,1,8802,4,2,101,105,13484,13489,97,114,59,1,10536,109,59,3,8770,824,105,115,116,4,2,59,115,13503,13505,1,8708,59,1,8708,114,59,3,55349,56619,4,4,69,101,115,116,13523,13527,13563,13568,59,3,8807,824,4,3,59,113,115,13535,13537,13559,1,8817,4,3,59,113,115,13545,13547,13551,1,8817,59,3,8807,824,108,97,110,116,59,3,10878,824,59,3,10878,824,105,109,59,1,8821,4,2,59,114,13574,13576,1,8815,59,1,8815,4,3,65,97,112,13587,13592,13597,114,114,59,1,8654,114,114,59,1,8622,97,114,59,1,10994,4,3,59,115,118,13610,13612,13623,1,8715,4,2,59,100,13618,13620,1,8956,59,1,8954,59,1,8715,99,121,59,1,1114,4,7,65,69,97,100,101,115,116,13647,13652,13656,13661,13665,13737,13742,114,114,59,1,8653,59,3,8806,824,114,114,59,1,8602,114,59,1,8229,4,4,59,102,113,115,13675,13677,13703,13725,1,8816,116,4,2,97,114,13684,13691,114,114,111,119,59,1,8602,105,103,104,116,97,114,114,111,119,59,1,8622,4,3,59,113,115,13711,13713,13717,1,8816,59,3,8806,824,108,97,110,116,59,3,10877,824,4,2,59,115,13731,13734,3,10877,824,59,1,8814,105,109,59,1,8820,4,2,59,114,13748,13750,1,8814,105,4,2,59,101,13757,13759,1,8938,59,1,8940,105,100,59,1,8740,4,2,112,116,13773,13778,102,59,3,55349,56671,5,172,3,59,105,110,13787,13789,13829,1,172,110,4,4,59,69,100,118,13800,13802,13806,13812,1,8713,59,3,8953,824,111,116,59,3,8949,824,4,3,97,98,99,13820,13823,13826,59,1,8713,59,1,8951,59,1,8950,105,4,2,59,118,13836,13838,1,8716,4,3,97,98,99,13846,13849,13852,59,1,8716,59,1,8958,59,1,8957,4,3,97,111,114,13863,13892,13899,114,4,4,59,97,115,116,13874,13876,13883,13888,1,8742,108,108,101,108,59,1,8742,108,59,3,11005,8421,59,3,8706,824,108,105,110,116,59,1,10772,4,3,59,99,101,13907,13909,13914,1,8832,117,101,59,1,8928,4,2,59,99,13920,13923,3,10927,824,4,2,59,101,13929,13931,1,8832,113,59,3,10927,824,4,4,65,97,105,116,13946,13951,13971,13982,114,114,59,1,8655,114,114,4,3,59,99,119,13961,13963,13967,1,8603,59,3,10547,824,59,3,8605,824,103,104,116,97,114,114,111,119,59,1,8603,114,105,4,2,59,101,13990,13992,1,8939,59,1,8941,4,7,99,104,105,109,112,113,117,14011,14036,14060,14080,14085,14090,14106,4,4,59,99,101,114,14021,14023,14028,14032,1,8833,117,101,59,1,8929,59,3,10928,824,59,3,55349,56515,111,114,116,4,2,109,112,14045,14050,105,100,59,1,8740,97,114,97,108,108,101,108,59,1,8742,109,4,2,59,101,14067,14069,1,8769,4,2,59,113,14075,14077,1,8772,59,1,8772,105,100,59,1,8740,97,114,59,1,8742,115,117,4,2,98,112,14098,14102,101,59,1,8930,101,59,1,8931,4,3,98,99,112,14114,14157,14171,4,4,59,69,101,115,14124,14126,14130,14133,1,8836,59,3,10949,824,59,1,8840,101,116,4,2,59,101,14141,14144,3,8834,8402,113,4,2,59,113,14151,14153,1,8840,59,3,10949,824,99,4,2,59,101,14164,14166,1,8833,113,59,3,10928,824,4,4,59,69,101,115,14181,14183,14187,14190,1,8837,59,3,10950,824,59,1,8841,101,116,4,2,59,101,14198,14201,3,8835,8402,113,4,2,59,113,14208,14210,1,8841,59,3,10950,824,4,4,103,105,108,114,14224,14228,14238,14242,108,59,1,8825,108,100,101,5,241,1,59,14236,1,241,103,59,1,8824,105,97,110,103,108,101,4,2,108,114,14254,14269,101,102,116,4,2,59,101,14263,14265,1,8938,113,59,1,8940,105,103,104,116,4,2,59,101,14279,14281,1,8939,113,59,1,8941,4,2,59,109,14291,14293,1,957,4,3,59,101,115,14301,14303,14308,1,35,114,111,59,1,8470,112,59,1,8199,4,9,68,72,97,100,103,105,108,114,115,14332,14338,14344,14349,14355,14369,14376,14408,14426,97,115,104,59,1,8877,97,114,114,59,1,10500,112,59,3,8781,8402,97,115,104,59,1,8876,4,2,101,116,14361,14365,59,3,8805,8402,59,3,62,8402,110,102,105,110,59,1,10718,4,3,65,101,116,14384,14389,14393,114,114,59,1,10498,59,3,8804,8402,4,2,59,114,14399,14402,3,60,8402,105,101,59,3,8884,8402,4,2,65,116,14414,14419,114,114,59,1,10499,114,105,101,59,3,8885,8402,105,109,59,3,8764,8402,4,3,65,97,110,14440,14445,14468,114,114,59,1,8662,114,4,2,104,114,14452,14456,107,59,1,10531,4,2,59,111,14462,14464,1,8598,119,59,1,8598,101,97,114,59,1,10535,4,18,83,97,99,100,101,102,103,104,105,108,109,111,112,114,115,116,117,118,14512,14515,14535,14560,14597,14603,14618,14643,14657,14662,14701,14741,14747,14769,14851,14877,14907,14916,59,1,9416,4,2,99,115,14521,14531,117,116,101,5,243,1,59,14529,1,243,116,59,1,8859,4,2,105,121,14541,14557,114,4,2,59,99,14548,14550,1,8858,5,244,1,59,14555,1,244,59,1,1086,4,5,97,98,105,111,115,14572,14577,14583,14587,14591,115,104,59,1,8861,108,97,99,59,1,337,118,59,1,10808,116,59,1,8857,111,108,100,59,1,10684,108,105,103,59,1,339,4,2,99,114,14609,14614,105,114,59,1,10687,59,3,55349,56620,4,3,111,114,116,14626,14630,14640,110,59,1,731,97,118,101,5,242,1,59,14638,1,242,59,1,10689,4,2,98,109,14649,14654,97,114,59,1,10677,59,1,937,110,116,59,1,8750,4,4,97,99,105,116,14672,14677,14693,14698,114,114,59,1,8634,4,2,105,114,14683,14687,114,59,1,10686,111,115,115,59,1,10683,110,101,59,1,8254,59,1,10688,4,3,97,101,105,14709,14714,14719,99,114,59,1,333,103,97,59,1,969,4,3,99,100,110,14727,14733,14736,114,111,110,59,1,959,59,1,10678,117,115,59,1,8854,112,102,59,3,55349,56672,4,3,97,101,108,14755,14759,14764,114,59,1,10679,114,112,59,1,10681,117,115,59,1,8853,4,7,59,97,100,105,111,115,118,14785,14787,14792,14831,14837,14841,14848,1,8744,114,114,59,1,8635,4,4,59,101,102,109,14802,14804,14817,14824,1,10845,114,4,2,59,111,14811,14813,1,8500,102,59,1,8500,5,170,1,59,14822,1,170,5,186,1,59,14829,1,186,103,111,102,59,1,8886,114,59,1,10838,108,111,112,101,59,1,10839,59,1,10843,4,3,99,108,111,14859,14863,14873,114,59,1,8500,97,115,104,5,248,1,59,14871,1,248,108,59,1,8856,105,4,2,108,109,14884,14893,100,101,5,245,1,59,14891,1,245,101,115,4,2,59,97,14901,14903,1,8855,115,59,1,10806,109,108,5,246,1,59,14914,1,246,98,97,114,59,1,9021,4,12,97,99,101,102,104,105,108,109,111,114,115,117,14948,14992,14996,15033,15038,15068,15090,15189,15192,15222,15427,15441,114,4,4,59,97,115,116,14959,14961,14976,14989,1,8741,5,182,2,59,108,14968,14970,1,182,108,101,108,59,1,8741,4,2,105,108,14982,14986,109,59,1,10995,59,1,11005,59,1,8706,121,59,1,1087,114,4,5,99,105,109,112,116,15009,15014,15019,15024,15027,110,116,59,1,37,111,100,59,1,46,105,108,59,1,8240,59,1,8869,101,110,107,59,1,8241,114,59,3,55349,56621,4,3,105,109,111,15046,15057,15063,4,2,59,118,15052,15054,1,966,59,1,981,109,97,116,59,1,8499,110,101,59,1,9742,4,3,59,116,118,15076,15078,15087,1,960,99,104,102,111,114,107,59,1,8916,59,1,982,4,2,97,117,15096,15119,110,4,2,99,107,15103,15115,107,4,2,59,104,15110,15112,1,8463,59,1,8462,118,59,1,8463,115,4,9,59,97,98,99,100,101,109,115,116,15140,15142,15148,15151,15156,15168,15171,15179,15184,1,43,99,105,114,59,1,10787,59,1,8862,105,114,59,1,10786,4,2,111,117,15162,15165,59,1,8724,59,1,10789,59,1,10866,110,5,177,1,59,15177,1,177,105,109,59,1,10790,119,111,59,1,10791,59,1,177,4,3,105,112,117,15200,15208,15213,110,116,105,110,116,59,1,10773,102,59,3,55349,56673,110,100,5,163,1,59,15220,1,163,4,10,59,69,97,99,101,105,110,111,115,117,15244,15246,15249,15253,15258,15334,15347,15367,15416,15421,1,8826,59,1,10931,112,59,1,10935,117,101,59,1,8828,4,2,59,99,15264,15266,1,10927,4,6,59,97,99,101,110,115,15280,15282,15290,15299,15303,15329,1,8826,112,112,114,111,120,59,1,10935,117,114,108,121,101,113,59,1,8828,113,59,1,10927,4,3,97,101,115,15311,15319,15324,112,112,114,111,120,59,1,10937,113,113,59,1,10933,105,109,59,1,8936,105,109,59,1,8830,109,101,4,2,59,115,15342,15344,1,8242,59,1,8473,4,3,69,97,115,15355,15358,15362,59,1,10933,112,59,1,10937,105,109,59,1,8936,4,3,100,102,112,15375,15378,15404,59,1,8719,4,3,97,108,115,15386,15392,15398,108,97,114,59,1,9006,105,110,101,59,1,8978,117,114,102,59,1,8979,4,2,59,116,15410,15412,1,8733,111,59,1,8733,105,109,59,1,8830,114,101,108,59,1,8880,4,2,99,105,15433,15438,114,59,3,55349,56517,59,1,968,110,99,115,112,59,1,8200,4,6,102,105,111,112,115,117,15462,15467,15472,15478,15485,15491,114,59,3,55349,56622,110,116,59,1,10764,112,102,59,3,55349,56674,114,105,109,101,59,1,8279,99,114,59,3,55349,56518,4,3,97,101,111,15499,15520,15534,116,4,2,101,105,15506,15515,114,110,105,111,110,115,59,1,8461,110,116,59,1,10774,115,116,4,2,59,101,15528,15530,1,63,113,59,1,8799,116,5,34,1,59,15540,1,34,4,21,65,66,72,97,98,99,100,101,102,104,105,108,109,110,111,112,114,115,116,117,120,15586,15609,15615,15620,15796,15855,15893,15931,15977,16001,16039,16183,16204,16222,16228,16285,16312,16318,16363,16408,16416,4,3,97,114,116,15594,15599,15603,114,114,59,1,8667,114,59,1,8658,97,105,108,59,1,10524,97,114,114,59,1,10511,97,114,59,1,10596,4,7,99,100,101,110,113,114,116,15636,15651,15656,15664,15687,15696,15770,4,2,101,117,15642,15646,59,3,8765,817,116,101,59,1,341,105,99,59,1,8730,109,112,116,121,118,59,1,10675,103,4,4,59,100,101,108,15675,15677,15680,15683,1,10217,59,1,10642,59,1,10661,101,59,1,10217,117,111,5,187,1,59,15694,1,187,114,4,11,59,97,98,99,102,104,108,112,115,116,119,15721,15723,15727,15739,15742,15746,15750,15754,15758,15763,15767,1,8594,112,59,1,10613,4,2,59,102,15733,15735,1,8677,115,59,1,10528,59,1,10547,115,59,1,10526,107,59,1,8618,112,59,1,8620,108,59,1,10565,105,109,59,1,10612,108,59,1,8611,59,1,8605,4,2,97,105,15776,15781,105,108,59,1,10522,111,4,2,59,110,15788,15790,1,8758,97,108,115,59,1,8474,4,3,97,98,114,15804,15809,15814,114,114,59,1,10509,114,107,59,1,10099,4,2,97,107,15820,15833,99,4,2,101,107,15827,15830,59,1,125,59,1,93,4,2,101,115,15839,15842,59,1,10636,108,4,2,100,117,15849,15852,59,1,10638,59,1,10640,4,4,97,101,117,121,15865,15871,15886,15890,114,111,110,59,1,345,4,2,100,105,15877,15882,105,108,59,1,343,108,59,1,8969,98,59,1,125,59,1,1088,4,4,99,108,113,115,15903,15907,15914,15927,97,59,1,10551,100,104,97,114,59,1,10601,117,111,4,2,59,114,15922,15924,1,8221,59,1,8221,104,59,1,8627,4,3,97,99,103,15939,15966,15970,108,4,4,59,105,112,115,15950,15952,15957,15963,1,8476,110,101,59,1,8475,97,114,116,59,1,8476,59,1,8477,116,59,1,9645,5,174,1,59,15975,1,174,4,3,105,108,114,15985,15991,15997,115,104,116,59,1,10621,111,111,114,59,1,8971,59,3,55349,56623,4,2,97,111,16007,16028,114,4,2,100,117,16014,16017,59,1,8641,4,2,59,108,16023,16025,1,8640,59,1,10604,4,2,59,118,16034,16036,1,961,59,1,1009,4,3,103,110,115,16047,16167,16171,104,116,4,6,97,104,108,114,115,116,16063,16081,16103,16130,16143,16155,114,114,111,119,4,2,59,116,16073,16075,1,8594,97,105,108,59,1,8611,97,114,112,111,111,110,4,2,100,117,16093,16099,111,119,110,59,1,8641,112,59,1,8640,101,102,116,4,2,97,104,16112,16120,114,114,111,119,115,59,1,8644,97,114,112,111,111,110,115,59,1,8652,105,103,104,116,97,114,114,111,119,115,59,1,8649,113,117,105,103,97,114,114,111,119,59,1,8605,104,114,101,101,116,105,109,101,115,59,1,8908,103,59,1,730,105,110,103,100,111,116,115,101,113,59,1,8787,4,3,97,104,109,16191,16196,16201,114,114,59,1,8644,97,114,59,1,8652,59,1,8207,111,117,115,116,4,2,59,97,16214,16216,1,9137,99,104,101,59,1,9137,109,105,100,59,1,10990,4,4,97,98,112,116,16238,16252,16257,16278,4,2,110,114,16244,16248,103,59,1,10221,114,59,1,8702,114,107,59,1,10215,4,3,97,102,108,16265,16269,16273,114,59,1,10630,59,3,55349,56675,117,115,59,1,10798,105,109,101,115,59,1,10805,4,2,97,112,16291,16304,114,4,2,59,103,16298,16300,1,41,116,59,1,10644,111,108,105,110,116,59,1,10770,97,114,114,59,1,8649,4,4,97,99,104,113,16328,16334,16339,16342,113,117,111,59,1,8250,114,59,3,55349,56519,59,1,8625,4,2,98,117,16348,16351,59,1,93,111,4,2,59,114,16358,16360,1,8217,59,1,8217,4,3,104,105,114,16371,16377,16383,114,101,101,59,1,8908,109,101,115,59,1,8906,105,4,4,59,101,102,108,16394,16396,16399,16402,1,9657,59,1,8885,59,1,9656,116,114,105,59,1,10702,108,117,104,97,114,59,1,10600,59,1,8478,4,19,97,98,99,100,101,102,104,105,108,109,111,112,113,114,115,116,117,119,122,16459,16466,16472,16572,16590,16672,16687,16746,16844,16850,16924,16963,16988,17115,17121,17154,17206,17614,17656,99,117,116,101,59,1,347,113,117,111,59,1,8218,4,10,59,69,97,99,101,105,110,112,115,121,16494,16496,16499,16513,16518,16531,16536,16556,16564,16569,1,8827,59,1,10932,4,2,112,114,16505,16508,59,1,10936,111,110,59,1,353,117,101,59,1,8829,4,2,59,100,16524,16526,1,10928,105,108,59,1,351,114,99,59,1,349,4,3,69,97,115,16544,16547,16551,59,1,10934,112,59,1,10938,105,109,59,1,8937,111,108,105,110,116,59,1,10771,105,109,59,1,8831,59,1,1089,111,116,4,3,59,98,101,16582,16584,16587,1,8901,59,1,8865,59,1,10854,4,7,65,97,99,109,115,116,120,16606,16611,16634,16642,16646,16652,16668,114,114,59,1,8664,114,4,2,104,114,16618,16622,107,59,1,10533,4,2,59,111,16628,16630,1,8600,119,59,1,8600,116,5,167,1,59,16640,1,167,105,59,1,59,119,97,114,59,1,10537,109,4,2,105,110,16659,16665,110,117,115,59,1,8726,59,1,8726,116,59,1,10038,114,4,2,59,111,16679,16682,3,55349,56624,119,110,59,1,8994,4,4,97,99,111,121,16697,16702,16716,16739,114,112,59,1,9839,4,2,104,121,16708,16713,99,121,59,1,1097,59,1,1096,114,116,4,2,109,112,16724,16729,105,100,59,1,8739,97,114,97,108,108,101,108,59,1,8741,5,173,1,59,16744,1,173,4,2,103,109,16752,16770,109,97,4,3,59,102,118,16762,16764,16767,1,963,59,1,962,59,1,962,4,8,59,100,101,103,108,110,112,114,16788,16790,16795,16806,16817,16828,16832,16838,1,8764,111,116,59,1,10858,4,2,59,113,16801,16803,1,8771,59,1,8771,4,2,59,69,16812,16814,1,10910,59,1,10912,4,2,59,69,16823,16825,1,10909,59,1,10911,101,59,1,8774,108,117,115,59,1,10788,97,114,114,59,1,10610,97,114,114,59,1,8592,4,4,97,101,105,116,16860,16883,16891,16904,4,2,108,115,16866,16878,108,115,101,116,109,105,110,117,115,59,1,8726,104,112,59,1,10803,112,97,114,115,108,59,1,10724,4,2,100,108,16897,16900,59,1,8739,101,59,1,8995,4,2,59,101,16910,16912,1,10922,4,2,59,115,16918,16920,1,10924,59,3,10924,65024,4,3,102,108,112,16932,16938,16958,116,99,121,59,1,1100,4,2,59,98,16944,16946,1,47,4,2,59,97,16952,16954,1,10692,114,59,1,9023,102,59,3,55349,56676,97,4,2,100,114,16970,16985,101,115,4,2,59,117,16978,16980,1,9824,105,116,59,1,9824,59,1,8741,4,3,99,115,117,16996,17028,17089,4,2,97,117,17002,17015,112,4,2,59,115,17009,17011,1,8851,59,3,8851,65024,112,4,2,59,115,17022,17024,1,8852,59,3,8852,65024,117,4,2,98,112,17035,17062,4,3,59,101,115,17043,17045,17048,1,8847,59,1,8849,101,116,4,2,59,101,17056,17058,1,8847,113,59,1,8849,4,3,59,101,115,17070,17072,17075,1,8848,59,1,8850,101,116,4,2,59,101,17083,17085,1,8848,113,59,1,8850,4,3,59,97,102,17097,17099,17112,1,9633,114,4,2,101,102,17106,17109,59,1,9633,59,1,9642,59,1,9642,97,114,114,59,1,8594,4,4,99,101,109,116,17131,17136,17142,17148,114,59,3,55349,56520,116,109,110,59,1,8726,105,108,101,59,1,8995,97,114,102,59,1,8902,4,2,97,114,17160,17172,114,4,2,59,102,17167,17169,1,9734,59,1,9733,4,2,97,110,17178,17202,105,103,104,116,4,2,101,112,17188,17197,112,115,105,108,111,110,59,1,1013,104,105,59,1,981,115,59,1,175,4,5,98,99,109,110,112,17218,17351,17420,17423,17427,4,9,59,69,100,101,109,110,112,114,115,17238,17240,17243,17248,17261,17267,17279,17285,17291,1,8834,59,1,10949,111,116,59,1,10941,4,2,59,100,17254,17256,1,8838,111,116,59,1,10947,117,108,116,59,1,10945,4,2,69,101,17273,17276,59,1,10955,59,1,8842,108,117,115,59,1,10943,97,114,114,59,1,10617,4,3,101,105,117,17299,17335,17339,116,4,3,59,101,110,17308,17310,17322,1,8834,113,4,2,59,113,17317,17319,1,8838,59,1,10949,101,113,4,2,59,113,17330,17332,1,8842,59,1,10955,109,59,1,10951,4,2,98,112,17345,17348,59,1,10965,59,1,10963,99,4,6,59,97,99,101,110,115,17366,17368,17376,17385,17389,17415,1,8827,112,112,114,111,120,59,1,10936,117,114,108,121,101,113,59,1,8829,113,59,1,10928,4,3,97,101,115,17397,17405,17410,112,112,114,111,120,59,1,10938,113,113,59,1,10934,105,109,59,1,8937,105,109,59,1,8831,59,1,8721,103,59,1,9834,4,13,49,50,51,59,69,100,101,104,108,109,110,112,115,17455,17462,17469,17476,17478,17481,17496,17509,17524,17530,17536,17548,17554,5,185,1,59,17460,1,185,5,178,1,59,17467,1,178,5,179,1,59,17474,1,179,1,8835,59,1,10950,4,2,111,115,17487,17491,116,59,1,10942,117,98,59,1,10968,4,2,59,100,17502,17504,1,8839,111,116,59,1,10948,115,4,2,111,117,17516,17520,108,59,1,10185,98,59,1,10967,97,114,114,59,1,10619,117,108,116,59,1,10946,4,2,69,101,17542,17545,59,1,10956,59,1,8843,108,117,115,59,1,10944,4,3,101,105,117,17562,17598,17602,116,4,3,59,101,110,17571,17573,17585,1,8835,113,4,2,59,113,17580,17582,1,8839,59,1,10950,101,113,4,2,59,113,17593,17595,1,8843,59,1,10956,109,59,1,10952,4,2,98,112,17608,17611,59,1,10964,59,1,10966,4,3,65,97,110,17622,17627,17650,114,114,59,1,8665,114,4,2,104,114,17634,17638,107,59,1,10534,4,2,59,111,17644,17646,1,8601,119,59,1,8601,119,97,114,59,1,10538,108,105,103,5,223,1,59,17664,1,223,4,13,97,98,99,100,101,102,104,105,111,112,114,115,119,17694,17709,17714,17737,17742,17749,17754,17860,17905,17957,17964,18090,18122,4,2,114,117,17700,17706,103,101,116,59,1,8982,59,1,964,114,107,59,1,9140,4,3,97,101,121,17722,17728,17734,114,111,110,59,1,357,100,105,108,59,1,355,59,1,1090,111,116,59,1,8411,108,114,101,99,59,1,8981,114,59,3,55349,56625,4,4,101,105,107,111,17764,17805,17836,17851,4,2,114,116,17770,17786,101,4,2,52,102,17777,17780,59,1,8756,111,114,101,59,1,8756,97,4,3,59,115,118,17795,17797,17802,1,952,121,109,59,1,977,59,1,977,4,2,99,110,17811,17831,107,4,2,97,115,17818,17826,112,112,114,111,120,59,1,8776,105,109,59,1,8764,115,112,59,1,8201,4,2,97,115,17842,17846,112,59,1,8776,105,109,59,1,8764,114,110,5,254,1,59,17858,1,254,4,3,108,109,110,17868,17873,17901,100,101,59,1,732,101,115,5,215,3,59,98,100,17884,17886,17898,1,215,4,2,59,97,17892,17894,1,8864,114,59,1,10801,59,1,10800,116,59,1,8749,4,3,101,112,115,17913,17917,17953,97,59,1,10536,4,4,59,98,99,102,17927,17929,17934,17939,1,8868,111,116,59,1,9014,105,114,59,1,10993,4,2,59,111,17945,17948,3,55349,56677,114,107,59,1,10970,97,59,1,10537,114,105,109,101,59,1,8244,4,3,97,105,112,17972,17977,18082,100,101,59,1,8482,4,7,97,100,101,109,112,115,116,17993,18051,18056,18059,18066,18072,18076,110,103,108,101,4,5,59,100,108,113,114,18009,18011,18017,18032,18035,1,9653,111,119,110,59,1,9663,101,102,116,4,2,59,101,18026,18028,1,9667,113,59,1,8884,59,1,8796,105,103,104,116,4,2,59,101,18045,18047,1,9657,113,59,1,8885,111,116,59,1,9708,59,1,8796,105,110,117,115,59,1,10810,108,117,115,59,1,10809,98,59,1,10701,105,109,101,59,1,10811,101,122,105,117,109,59,1,9186,4,3,99,104,116,18098,18111,18116,4,2,114,121,18104,18108,59,3,55349,56521,59,1,1094,99,121,59,1,1115,114,111,107,59,1,359,4,2,105,111,18128,18133,120,116,59,1,8812,104,101,97,100,4,2,108,114,18143,18154,101,102,116,97,114,114,111,119,59,1,8606,105,103,104,116,97,114,114,111,119,59,1,8608,4,18,65,72,97,98,99,100,102,103,104,108,109,111,112,114,115,116,117,119,18204,18209,18214,18234,18250,18268,18292,18308,18319,18343,18379,18397,18413,18504,18547,18553,18584,18603,114,114,59,1,8657,97,114,59,1,10595,4,2,99,114,18220,18230,117,116,101,5,250,1,59,18228,1,250,114,59,1,8593,114,4,2,99,101,18241,18245,121,59,1,1118,118,101,59,1,365,4,2,105,121,18256,18265,114,99,5,251,1,59,18263,1,251,59,1,1091,4,3,97,98,104,18276,18281,18287,114,114,59,1,8645,108,97,99,59,1,369,97,114,59,1,10606,4,2,105,114,18298,18304,115,104,116,59,1,10622,59,3,55349,56626,114,97,118,101,5,249,1,59,18317,1,249,4,2,97,98,18325,18338,114,4,2,108,114,18332,18335,59,1,8639,59,1,8638,108,107,59,1,9600,4,2,99,116,18349,18374,4,2,111,114,18355,18369,114,110,4,2,59,101,18363,18365,1,8988,114,59,1,8988,111,112,59,1,8975,114,105,59,1,9720,4,2,97,108,18385,18390,99,114,59,1,363,5,168,1,59,18395,1,168,4,2,103,112,18403,18408,111,110,59,1,371,102,59,3,55349,56678,4,6,97,100,104,108,115,117,18427,18434,18445,18470,18475,18494,114,114,111,119,59,1,8593,111,119,110,97,114,114,111,119,59,1,8597,97,114,112,111,111,110,4,2,108,114,18457,18463,101,102,116,59,1,8639,105,103,104,116,59,1,8638,117,115,59,1,8846,105,4,3,59,104,108,18484,18486,18489,1,965,59,1,978,111,110,59,1,965,112,97,114,114,111,119,115,59,1,8648,4,3,99,105,116,18512,18537,18542,4,2,111,114,18518,18532,114,110,4,2,59,101,18526,18528,1,8989,114,59,1,8989,111,112,59,1,8974,110,103,59,1,367,114,105,59,1,9721,99,114,59,3,55349,56522,4,3,100,105,114,18561,18566,18572,111,116,59,1,8944,108,100,101,59,1,361,105,4,2,59,102,18579,18581,1,9653,59,1,9652,4,2,97,109,18590,18595,114,114,59,1,8648,108,5,252,1,59,18601,1,252,97,110,103,108,101,59,1,10663,4,15,65,66,68,97,99,100,101,102,108,110,111,112,114,115,122,18643,18648,18661,18667,18847,18851,18857,18904,18909,18915,18931,18937,18943,18949,18996,114,114,59,1,8661,97,114,4,2,59,118,18656,18658,1,10984,59,1,10985,97,115,104,59,1,8872,4,2,110,114,18673,18679,103,114,116,59,1,10652,4,7,101,107,110,112,114,115,116,18695,18704,18711,18720,18742,18754,18810,112,115,105,108,111,110,59,1,1013,97,112,112,97,59,1,1008,111,116,104,105,110,103,59,1,8709,4,3,104,105,114,18728,18732,18735,105,59,1,981,59,1,982,111,112,116,111,59,1,8733,4,2,59,104,18748,18750,1,8597,111,59,1,1009,4,2,105,117,18760,18766,103,109,97,59,1,962,4,2,98,112,18772,18791,115,101,116,110,101,113,4,2,59,113,18784,18787,3,8842,65024,59,3,10955,65024,115,101,116,110,101,113,4,2,59,113,18803,18806,3,8843,65024,59,3,10956,65024,4,2,104,114,18816,18822,101,116,97,59,1,977,105,97,110,103,108,101,4,2,108,114,18834,18840,101,102,116,59,1,8882,105,103,104,116,59,1,8883,121,59,1,1074,97,115,104,59,1,8866,4,3,101,108,114,18865,18884,18890,4,3,59,98,101,18873,18875,18880,1,8744,97,114,59,1,8891,113,59,1,8794,108,105,112,59,1,8942,4,2,98,116,18896,18901,97,114,59,1,124,59,1,124,114,59,3,55349,56627,116,114,105,59,1,8882,115,117,4,2,98,112,18923,18927,59,3,8834,8402,59,3,8835,8402,112,102,59,3,55349,56679,114,111,112,59,1,8733,116,114,105,59,1,8883,4,2,99,117,18955,18960,114,59,3,55349,56523,4,2,98,112,18966,18981,110,4,2,69,101,18973,18977,59,3,10955,65024,59,3,8842,65024,110,4,2,69,101,18988,18992,59,3,10956,65024,59,3,8843,65024,105,103,122,97,103,59,1,10650,4,7,99,101,102,111,112,114,115,19020,19026,19061,19066,19072,19075,19089,105,114,99,59,1,373,4,2,100,105,19032,19055,4,2,98,103,19038,19043,97,114,59,1,10847,101,4,2,59,113,19050,19052,1,8743,59,1,8793,101,114,112,59,1,8472,114,59,3,55349,56628,112,102,59,3,55349,56680,59,1,8472,4,2,59,101,19081,19083,1,8768,97,116,104,59,1,8768,99,114,59,3,55349,56524,4,14,99,100,102,104,105,108,109,110,111,114,115,117,118,119,19125,19146,19152,19157,19173,19176,19192,19197,19202,19236,19252,19269,19286,19291,4,3,97,105,117,19133,19137,19142,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,116,114,105,59,1,9661,114,59,3,55349,56629,4,2,65,97,19163,19168,114,114,59,1,10234,114,114,59,1,10231,59,1,958,4,2,65,97,19182,19187,114,114,59,1,10232,114,114,59,1,10229,97,112,59,1,10236,105,115,59,1,8955,4,3,100,112,116,19210,19215,19230,111,116,59,1,10752,4,2,102,108,19221,19225,59,3,55349,56681,117,115,59,1,10753,105,109,101,59,1,10754,4,2,65,97,19242,19247,114,114,59,1,10233,114,114,59,1,10230,4,2,99,113,19258,19263,114,59,3,55349,56525,99,117,112,59,1,10758,4,2,112,116,19275,19281,108,117,115,59,1,10756,114,105,59,1,9651,101,101,59,1,8897,101,100,103,101,59,1,8896,4,8,97,99,101,102,105,111,115,117,19316,19335,19349,19357,19362,19367,19373,19379,99,4,2,117,121,19323,19332,116,101,5,253,1,59,19330,1,253,59,1,1103,4,2,105,121,19341,19346,114,99,59,1,375,59,1,1099,110,5,165,1,59,19355,1,165,114,59,3,55349,56630,99,121,59,1,1111,112,102,59,3,55349,56682,99,114,59,3,55349,56526,4,2,99,109,19385,19389,121,59,1,1102,108,5,255,1,59,19395,1,255,4,10,97,99,100,101,102,104,105,111,115,119,19419,19426,19441,19446,19462,19467,19472,19480,19486,19492,99,117,116,101,59,1,378,4,2,97,121,19432,19438,114,111,110,59,1,382,59,1,1079,111,116,59,1,380,4,2,101,116,19452,19458,116,114,102,59,1,8488,97,59,1,950,114,59,3,55349,56631,99,121,59,1,1078,103,114,97,114,114,59,1,8669,112,102,59,3,55349,56683,99,114,59,3,55349,56527,4,2,106,110,19498,19501,59,1,8205,106,59,1,8204])},77118:(e,t,n)=>{"use strict";const i=n(54284),r=n(41734),o=i.CODE_POINTS;e.exports=class{constructor(){this.html=null,this.pos=-1,this.lastGapPos=-1,this.lastCharPos=-1,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536}_err(){}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.lastCharPos){const t=this.html.charCodeAt(this.pos+1);if(i.isSurrogatePair(t))return this.pos++,this._addGap(),i.getSurrogatePairCodePoint(e,t)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,o.EOF;return this._err(r.surrogateInInputStream),e}dropParsedChunk(){this.pos>this.bufferWaterline&&(this.lastCharPos-=this.pos,this.html=this.html.substring(this.pos),this.pos=0,this.lastGapPos=-1,this.gapStack=[])}write(e,t){this.html?this.html+=e:this.html=e,this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1,this.html.length),this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1}advance(){if(this.pos++,this.pos>this.lastCharPos)return this.endOfChunkHit=!this.lastChunkWritten,o.EOF;let e=this.html.charCodeAt(this.pos);return this.skipNextNewLine&&e===o.LINE_FEED?(this.skipNextNewLine=!1,this._addGap(),this.advance()):e===o.CARRIAGE_RETURN?(this.skipNextNewLine=!0,o.LINE_FEED):(this.skipNextNewLine=!1,i.isSurrogate(e)&&(e=this._processSurrogate(e)),e>31&&e<127||e===o.LINE_FEED||e===o.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){i.isControlCodePoint(e)?this._err(r.controlCharacterInInputStream):i.isUndefinedCodePoint(e)&&this._err(r.noncharacterInInputStream)}retreat(){this.pos===this.lastGapPos&&(this.lastGapPos=this.gapStack.pop(),this.pos--),this.pos--}}},17296:(e,t,n)=>{"use strict";const{DOCUMENT_MODE:i}=n(16152);t.createDocument=function(){return{nodeName:"#document",mode:i.NO_QUIRKS,childNodes:[]}},t.createDocumentFragment=function(){return{nodeName:"#document-fragment",childNodes:[]}},t.createElement=function(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},t.createCommentNode=function(e){return{nodeName:"#comment",data:e,parentNode:null}};const r=function(e){return{nodeName:"#text",value:e,parentNode:null}},o=t.appendChild=function(e,t){e.childNodes.push(t),t.parentNode=e},s=t.insertBefore=function(e,t,n){const i=e.childNodes.indexOf(n);e.childNodes.splice(i,0,t),t.parentNode=e};t.setTemplateContent=function(e,t){e.content=t},t.getTemplateContent=function(e){return e.content},t.setDocumentType=function(e,t,n,i){let r=null;for(let t=0;t<e.childNodes.length;t++)if("#documentType"===e.childNodes[t].nodeName){r=e.childNodes[t];break}r?(r.name=t,r.publicId=n,r.systemId=i):o(e,{nodeName:"#documentType",name:t,publicId:n,systemId:i})},t.setDocumentMode=function(e,t){e.mode=t},t.getDocumentMode=function(e){return e.mode},t.detachNode=function(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},t.insertText=function(e,t){if(e.childNodes.length){const n=e.childNodes[e.childNodes.length-1];if("#text"===n.nodeName)return void(n.value+=t)}o(e,r(t))},t.insertTextBefore=function(e,t,n){const i=e.childNodes[e.childNodes.indexOf(n)-1];i&&"#text"===i.nodeName?i.value+=t:s(e,r(t),n)},t.adoptAttributes=function(e,t){const n=[];for(let t=0;t<e.attrs.length;t++)n.push(e.attrs[t].name);for(let i=0;i<t.length;i++)-1===n.indexOf(t[i].name)&&e.attrs.push(t[i])},t.getFirstChild=function(e){return e.childNodes[0]},t.getChildNodes=function(e){return e.childNodes},t.getParentNode=function(e){return e.parentNode},t.getAttrList=function(e){return e.attrs},t.getTagName=function(e){return e.tagName},t.getNamespaceURI=function(e){return e.namespaceURI},t.getTextNodeContent=function(e){return e.value},t.getCommentNodeContent=function(e){return e.data},t.getDocumentTypeNodeName=function(e){return e.name},t.getDocumentTypeNodePublicId=function(e){return e.publicId},t.getDocumentTypeNodeSystemId=function(e){return e.systemId},t.isTextNode=function(e){return"#text"===e.nodeName},t.isCommentNode=function(e){return"#comment"===e.nodeName},t.isDocumentTypeNode=function(e){return"#documentType"===e.nodeName},t.isElementNode=function(e){return!!e.tagName},t.setNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=t},t.getNodeSourceCodeLocation=function(e){return e.sourceCodeLocation},t.updateNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=Object.assign(e.sourceCodeLocation,t)}},8904:e=>{"use strict";e.exports=function(e,t){return[e,t=t||Object.create(null)].reduce(((e,t)=>(Object.keys(t).forEach((n=>{e[n]=t[n]})),e)),Object.create(null))}},81704:e=>{"use strict";class t{constructor(e){const t={},n=this._getOverriddenMethods(this,t);for(const i of Object.keys(n))"function"==typeof n[i]&&(t[i]=e[i],e[i]=n[i])}_getOverriddenMethods(){throw new Error("Not implemented")}}t.install=function(e,t,n){e.__mixins||(e.__mixins=[]);for(let n=0;n<e.__mixins.length;n++)if(e.__mixins[n].constructor===t)return e.__mixins[n];const i=new t(e,n);return e.__mixins.push(i),i},e.exports=t},25632:(e,t,n)=>{t.pbkdf2=n(88638),t.pbkdf2Sync=n(91257)},88638:(e,t,n)=>{var i,r,o=n(89509).Buffer,s=n(77357),a=n(12368),c=n(91257),l=n(57777),u=n.g.crypto&&n.g.crypto.subtle,d={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},h=[];function p(){return r||(r=n.g.process&&n.g.process.nextTick?n.g.process.nextTick:n.g.queueMicrotask?n.g.queueMicrotask:n.g.setImmediate?n.g.setImmediate:n.g.setTimeout)}function f(e,t,n,i,r){return u.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return u.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:{name:r}},e,i<<3)})).then((function(e){return o.from(e)}))}e.exports=function(e,t,r,m,g,v){"function"==typeof g&&(v=g,g=void 0);var y=d[(g=g||"sha1").toLowerCase()];if(y&&"function"==typeof n.g.Promise){if(s(r,m),e=l(e,a,"Password"),t=l(t,a,"Salt"),"function"!=typeof v)throw new Error("No callback provided to pbkdf2");!function(e,t){e.then((function(e){p()((function(){t(null,e)}))}),(function(e){p()((function(){t(e)}))}))}(function(e){if(n.g.process&&!n.g.process.browser)return Promise.resolve(!1);if(!u||!u.importKey||!u.deriveBits)return Promise.resolve(!1);if(void 0!==h[e])return h[e];var t=f(i=i||o.alloc(8),i,10,128,e).then((function(){return!0})).catch((function(){return!1}));return h[e]=t,t}(y).then((function(n){return n?f(e,t,r,m,y):c(e,t,r,m,g)})),v)}else p()((function(){var n;try{n=c(e,t,r,m,g)}catch(e){return v(e)}v(null,n)}))}},12368:(e,t,n)=>{var i,r=n(34155);i=n.g.process&&n.g.process.browser?"utf-8":n.g.process&&n.g.process.version?parseInt(r.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",e.exports=i},77357:e=>{var t=Math.pow(2,30)-1;e.exports=function(e,n){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof n)throw new TypeError("Key length not a number");if(n<0||n>t||n!=n)throw new TypeError("Bad key length")}},91257:(e,t,n)=>{var i=n(78028),r=n(79785),o=n(89072),s=n(89509).Buffer,a=n(77357),c=n(12368),l=n(57777),u=s.alloc(128),d={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function h(e,t,n){var a=function(e){return"rmd160"===e||"ripemd160"===e?function(e){return(new r).update(e).digest()}:"md5"===e?i:function(t){return o(e).update(t).digest()}}(e),c="sha512"===e||"sha384"===e?128:64;t.length>c?t=a(t):t.length<c&&(t=s.concat([t,u],c));for(var l=s.allocUnsafe(c+d[e]),h=s.allocUnsafe(c+d[e]),p=0;p<c;p++)l[p]=54^t[p],h[p]=92^t[p];var f=s.allocUnsafe(c+n+4);l.copy(f,0,0,c),this.ipad1=f,this.ipad2=l,this.opad=h,this.alg=e,this.blocksize=c,this.hash=a,this.size=d[e]}h.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(e,t,n,i,r){a(n,i);var o=new h(r=r||"sha1",e=l(e,c,"Password"),(t=l(t,c,"Salt")).length),u=s.allocUnsafe(i),p=s.allocUnsafe(t.length+4);t.copy(p,0,0,t.length);for(var f=0,m=d[r],g=Math.ceil(i/m),v=1;v<=g;v++){p.writeUInt32BE(v,t.length);for(var y=o.run(p,o.ipad1),b=y,E=1;E<n;E++){b=o.run(b,o.ipad2);for(var S=0;S<m;S++)y[S]^=b[S]}y.copy(u,f),f+=m}return u}},57777:(e,t,n)=>{var i=n(89509).Buffer;e.exports=function(e,t,n){if(i.isBuffer(e))return e;if("string"==typeof e)return i.from(e,t);if(ArrayBuffer.isView(e))return i.from(e.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")}},99560:(e,t,n)=>{"use strict";var i=n(66632),r=n(98805),o=n(57643),s="data";e.exports=function(e,t){var n=i(t),h=t,p=o;return n in e.normal?e.property[e.normal[n]]:(n.length>4&&n.slice(0,4)===s&&a.test(t)&&("-"===t.charAt(4)?h=function(e){var t=e.slice(5).replace(c,d);return s+t.charAt(0).toUpperCase()+t.slice(1)}(t):t=function(e){var t=e.slice(4);return c.test(t)?e:("-"!==(t=t.replace(l,u)).charAt(0)&&(t="-"+t),s+t)}(t),p=r),new p(h,t))};var a=/^data[-\w.:]+$/i,c=/-[a-z]/g,l=/[A-Z]/g;function u(e){return"-"+e.toLowerCase()}function d(e){return e.charAt(1).toUpperCase()}},97247:(e,t,n)=>{"use strict";var i=n(19940),r=n(8289),o=n(5812),s=n(94397),a=n(67716),c=n(61805);e.exports=i([o,r,s,a,c])},67716:(e,t,n)=>{"use strict";var i=n(17e3),r=n(17596),o=i.booleanish,s=i.number,a=i.spaceSeparated;e.exports=r({transform:function(e,t){return"role"===t?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:o,ariaAutoComplete:null,ariaBusy:o,ariaChecked:o,ariaColCount:s,ariaColIndex:s,ariaColSpan:s,ariaControls:a,ariaCurrent:null,ariaDescribedBy:a,ariaDetails:null,ariaDisabled:o,ariaDropEffect:a,ariaErrorMessage:null,ariaExpanded:o,ariaFlowTo:a,ariaGrabbed:o,ariaHasPopup:null,ariaHidden:o,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:a,ariaLevel:s,ariaLive:null,ariaModal:o,ariaMultiLine:o,ariaMultiSelectable:o,ariaOrientation:null,ariaOwns:a,ariaPlaceholder:null,ariaPosInSet:s,ariaPressed:o,ariaReadOnly:o,ariaRelevant:null,ariaRequired:o,ariaRoleDescription:a,ariaRowCount:s,ariaRowIndex:s,ariaRowSpan:s,ariaSelected:o,ariaSetSize:s,ariaSort:null,ariaValueMax:s,ariaValueMin:s,ariaValueNow:s,ariaValueText:null,role:null}})},61805:(e,t,n)=>{"use strict";var i=n(17e3),r=n(17596),o=n(10855),s=i.boolean,a=i.overloadedBoolean,c=i.booleanish,l=i.number,u=i.spaceSeparated,d=i.commaSeparated;e.exports=r({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:o,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:d,acceptCharset:u,accessKey:u,action:null,allow:null,allowFullScreen:s,allowPaymentRequest:s,allowUserMedia:s,alt:null,as:null,async:s,autoCapitalize:null,autoComplete:u,autoFocus:s,autoPlay:s,capture:s,charSet:null,checked:s,cite:null,className:u,cols:l,colSpan:null,content:null,contentEditable:c,controls:s,controlsList:u,coords:l|d,crossOrigin:null,data:null,dateTime:null,decoding:null,default:s,defer:s,dir:null,dirName:null,disabled:s,download:a,draggable:c,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:s,formTarget:null,headers:u,height:l,hidden:s,high:l,href:null,hrefLang:null,htmlFor:u,httpEquiv:u,id:null,imageSizes:null,imageSrcSet:d,inputMode:null,integrity:null,is:null,isMap:s,itemId:null,itemProp:u,itemRef:u,itemScope:s,itemType:u,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:s,low:l,manifest:null,max:null,maxLength:l,media:null,method:null,min:null,minLength:l,multiple:s,muted:s,name:null,nonce:null,noModule:s,noValidate:s,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextMenu:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:s,optimum:l,pattern:null,ping:u,placeholder:null,playsInline:s,poster:null,preload:null,readOnly:s,referrerPolicy:null,rel:u,required:s,reversed:s,rows:l,rowSpan:l,sandbox:u,scope:null,scoped:s,seamless:s,selected:s,shape:null,size:l,sizes:null,slot:null,span:l,spellCheck:c,src:null,srcDoc:null,srcLang:null,srcSet:d,start:l,step:null,style:null,tabIndex:l,target:null,title:null,translate:null,type:null,typeMustMatch:s,useMap:null,value:c,width:l,wrap:null,align:null,aLink:null,archive:u,axis:null,background:null,bgColor:null,border:l,borderColor:null,bottomMargin:l,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:s,declare:s,event:null,face:null,frame:null,frameBorder:null,hSpace:l,leftMargin:l,link:null,longDesc:null,lowSrc:null,marginHeight:l,marginWidth:l,noResize:s,noHref:s,noShade:s,noWrap:s,object:null,profile:null,prompt:null,rev:null,rightMargin:l,rules:null,scheme:null,scrolling:c,standby:null,summary:null,text:null,topMargin:l,valueType:null,version:null,vAlign:null,vLink:null,vSpace:l,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:s,disableRemotePlayback:s,prefix:null,property:null,results:l,security:null,unselectable:null}})},45789:(e,t,n)=>{"use strict";var i=n(17e3),r=n(17596),o=n(28740),s=i.boolean,a=i.number,c=i.spaceSeparated,l=i.commaSeparated,u=i.commaOrSpaceSeparated;e.exports=r({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:o,properties:{about:u,accentHeight:a,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:a,amplitude:a,arabicForm:null,ascent:a,attributeName:null,attributeType:null,azimuth:a,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:a,by:null,calcMode:null,capHeight:a,className:c,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:a,diffuseConstant:a,direction:null,display:null,dur:null,divisor:a,dominantBaseline:null,download:s,dx:null,dy:null,edgeMode:null,editable:null,elevation:a,enableBackground:null,end:null,event:null,exponent:a,externalResourcesRequired:null,fill:null,fillOpacity:a,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:l,g2:l,glyphName:l,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:a,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:a,horizOriginX:a,horizOriginY:a,id:null,ideographic:a,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:a,k:a,k1:a,k2:a,k3:a,k4:a,kernelMatrix:u,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:a,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:a,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:a,overlineThickness:a,paintOrder:null,panose1:null,path:null,pathLength:a,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:c,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:a,pointsAtY:a,pointsAtZ:a,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:u,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:u,rev:u,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:u,requiredFeatures:u,requiredFonts:u,requiredFormats:u,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:a,specularExponent:a,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:a,strikethroughThickness:a,string:null,stroke:null,strokeDashArray:u,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:a,strokeOpacity:a,strokeWidth:null,style:null,surfaceScale:a,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:u,tabIndex:a,tableValues:null,target:null,targetX:a,targetY:a,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:u,to:null,transform:null,u1:null,u2:null,underlinePosition:a,underlineThickness:a,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:a,values:null,vAlphabetic:a,vMathematical:a,vectorEffect:null,vHanging:a,vIdeographic:a,version:null,vertAdvY:a,vertOriginX:a,vertOriginY:a,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:a,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}})},10855:(e,t,n)=>{"use strict";var i=n(28740);e.exports=function(e,t){return i(e,t.toLowerCase())}},28740:e=>{"use strict";e.exports=function(e,t){return t in e?e[t]:t}},17596:(e,t,n)=>{"use strict";var i=n(66632),r=n(99607),o=n(98805);e.exports=function(e){var t,n,s=e.space,a=e.mustUseProperty||[],c=e.attributes||{},l=e.properties,u=e.transform,d={},h={};for(t in l)n=new o(t,u(c,t),l[t],s),-1!==a.indexOf(t)&&(n.mustUseProperty=!0),d[t]=n,h[i(t)]=t,h[i(n.attribute)]=t;return new r(d,h,s)}},98805:(e,t,n)=>{"use strict";var i=n(57643),r=n(17e3);e.exports=a,a.prototype=new i,a.prototype.defined=!0;var o=["boolean","booleanish","overloadedBoolean","number","commaSeparated","spaceSeparated","commaOrSpaceSeparated"],s=o.length;function a(e,t,n,a){var l,u=-1;for(c(this,"space",a),i.call(this,e,t);++u<s;)c(this,l=o[u],(n&r[l])===r[l])}function c(e,t,n){n&&(e[t]=n)}},57643:e=>{"use strict";e.exports=n;var t=n.prototype;function n(e,t){this.property=e,this.attribute=t}t.space=null,t.attribute=null,t.property=null,t.boolean=!1,t.booleanish=!1,t.overloadedBoolean=!1,t.number=!1,t.commaSeparated=!1,t.spaceSeparated=!1,t.commaOrSpaceSeparated=!1,t.mustUseProperty=!1,t.defined=!1},19940:(e,t,n)=>{"use strict";var i=n(47529),r=n(99607);e.exports=function(e){for(var t,n,o=e.length,s=[],a=[],c=-1;++c<o;)t=e[c],s.push(t.property),a.push(t.normal),n=t.space;return new r(i.apply(null,s),i.apply(null,a),n)}},99607:e=>{"use strict";e.exports=n;var t=n.prototype;function n(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}t.space=null,t.normal={},t.property={}},17e3:(e,t)=>{"use strict";var n=0;function i(){return Math.pow(2,++n)}t.boolean=i(),t.booleanish=i(),t.overloadedBoolean=i(),t.number=i(),t.spaceSeparated=i(),t.commaSeparated=i(),t.commaOrSpaceSeparated=i()},8289:(e,t,n)=>{"use strict";var i=n(17596);e.exports=i({space:"xlink",transform:function(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}})},5812:(e,t,n)=>{"use strict";var i=n(17596);e.exports=i({space:"xml",transform:function(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}})},94397:(e,t,n)=>{"use strict";var i=n(17596),r=n(10855);e.exports=i({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:r,properties:{xmlns:null,xmlnsXLink:null}})},66632:e=>{"use strict";e.exports=function(e){return e.toLowerCase()}},11218:(e,t,n)=>{"use strict";var i=n(19940),r=n(8289),o=n(5812),s=n(94397),a=n(67716),c=n(45789);e.exports=i([o,r,s,a,c])},7900:(e,t,n)=>{t.publicEncrypt=n(16559),t.privateDecrypt=n(26138),t.privateEncrypt=function(e,n){return t.publicEncrypt(e,n,!0)},t.publicDecrypt=function(e,n){return t.privateDecrypt(e,n,!0)}},99199:(e,t,n)=>{var i=n(23482),r=n(89509).Buffer;function o(e){var t=r.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports=function(e,t){for(var n,s=r.alloc(0),a=0;s.length<t;)n=o(a++),s=r.concat([s,i("sha1").update(e).update(n).digest()]);return s.slice(0,t)}},26138:(e,t,n)=>{var i=n(70980),r=n(99199),o=n(57859),s=n(13550),a=n(23663),c=n(23482),l=n(84818),u=n(89509).Buffer;e.exports=function(e,t,n){var d;d=e.padding?e.padding:n?1:4;var h,p=i(e),f=p.modulus.byteLength();if(t.length>f||new s(t).cmp(p.modulus)>=0)throw new Error("decryption error");h=n?l(new s(t),p):a(t,p);var m=u.alloc(f-h.length);if(h=u.concat([m,h],f),4===d)return function(e,t){var n=e.modulus.byteLength(),i=c("sha1").update(u.alloc(0)).digest(),s=i.length;if(0!==t[0])throw new Error("decryption error");var a=t.slice(1,s+1),l=t.slice(s+1),d=o(a,r(l,s)),h=o(l,r(d,n-s-1));if(function(e,t){e=u.from(e),t=u.from(t);var n=0,i=e.length;e.length!==t.length&&(n++,i=Math.min(e.length,t.length));for(var r=-1;++r<i;)n+=e[r]^t[r];return n}(i,h.slice(0,s)))throw new Error("decryption error");for(var p=s;0===h[p];)p++;if(1!==h[p++])throw new Error("decryption error");return h.slice(p)}(p,h);if(1===d)return function(e,t,n){for(var i=t.slice(0,2),r=2,o=0;0!==t[r++];)if(r>=t.length){o++;break}var s=t.slice(2,r-1);if(("0002"!==i.toString("hex")&&!n||"0001"!==i.toString("hex")&&n)&&o++,s.length<8&&o++,o)throw new Error("decryption error");return t.slice(r)}(0,h,n);if(3===d)return h;throw new Error("unknown padding")}},16559:(e,t,n)=>{var i=n(70980),r=n(61798),o=n(23482),s=n(99199),a=n(57859),c=n(13550),l=n(84818),u=n(23663),d=n(89509).Buffer;e.exports=function(e,t,n){var h;h=e.padding?e.padding:n?1:4;var p,f=i(e);if(4===h)p=function(e,t){var n=e.modulus.byteLength(),i=t.length,l=o("sha1").update(d.alloc(0)).digest(),u=l.length,h=2*u;if(i>n-h-2)throw new Error("message too long");var p=d.alloc(n-i-h-2),f=n-u-1,m=r(u),g=a(d.concat([l,p,d.alloc(1,1),t],f),s(m,f)),v=a(m,s(g,u));return new c(d.concat([d.alloc(1),v,g],n))}(f,t);else if(1===h)p=function(e,t,n){var i,o=t.length,s=e.modulus.byteLength();if(o>s-11)throw new Error("message too long");return i=n?d.alloc(s-o-3,255):function(e){for(var t,n=d.allocUnsafe(e),i=0,o=r(2*e),s=0;i<e;)s===o.length&&(o=r(2*e),s=0),(t=o[s++])&&(n[i++]=t);return n}(s-o-3),new c(d.concat([d.from([0,n?1:2]),i,d.alloc(1),t],s))}(f,t,n);else{if(3!==h)throw new Error("unknown padding");if((p=new c(t)).cmp(f.modulus)>=0)throw new Error("data too long for modulus")}return n?u(p,f):l(p,f)}},84818:(e,t,n)=>{var i=n(13550),r=n(89509).Buffer;e.exports=function(e,t){return r.from(e.toRed(i.mont(t.modulus)).redPow(new i(t.publicExponent)).fromRed().toArray())}},57859:e=>{e.exports=function(e,t){for(var n=e.length,i=-1;++i<n;)e[i]^=t[i];return e}},62587:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,i,r){n=n||"&",i=i||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(n);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var c=e.length;a>0&&c>a&&(c=a);for(var l=0;l<c;++l){var u,d,h,p,f=e[l].replace(s,"%20"),m=f.indexOf(i);m>=0?(u=f.substr(0,m),d=f.substr(m+1)):(u=f,d=""),h=decodeURIComponent(u),p=decodeURIComponent(d),t(o,h)?Array.isArray(o[h])?o[h].push(p):o[h]=[o[h],p]:o[h]=p}return o}},12361:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,i,r){return n=n||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(r){var o=encodeURIComponent(t(r))+i;return Array.isArray(e[r])?e[r].map((function(e){return o+encodeURIComponent(t(e))})).join(n):o+encodeURIComponent(t(e[r]))})).join(n):r?encodeURIComponent(t(r))+i+encodeURIComponent(t(e)):""}},17673:(e,t,n)=>{"use strict";t.decode=t.parse=n(62587),t.encode=t.stringify=n(12361)},61798:(e,t,n)=>{"use strict";var i=n(34155),r=65536,o=n(89509).Buffer,s=n.g.crypto||n.g.msCrypto;s&&s.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=o.allocUnsafe(e);if(e>0)if(e>r)for(var a=0;a<e;a+=r)s.getRandomValues(n.slice(a,a+r));else s.getRandomValues(n);return"function"==typeof t?i.nextTick((function(){t(null,n)})):n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},77963:(e,t,n)=>{"use strict";var i=n(34155);function r(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=n(89509),s=n(61798),a=o.Buffer,c=o.kMaxLength,l=n.g.crypto||n.g.msCrypto,u=Math.pow(2,32)-1;function d(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>u||e<0)throw new TypeError("offset must be a uint32");if(e>c||e>t)throw new RangeError("offset out of range")}function h(e,t,n){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>u||e<0)throw new TypeError("size must be a uint32");if(e+t>n||e>c)throw new RangeError("buffer too small")}function p(e,t,n,r){if(i.browser){var o=e.buffer,a=new Uint8Array(o,t,n);return l.getRandomValues(a),r?void i.nextTick((function(){r(null,e)})):e}if(!r)return s(n).copy(e,t),e;s(n,(function(n,i){if(n)return r(n);i.copy(e,t),r(null,e)}))}l&&l.getRandomValues||!i.browser?(t.randomFill=function(e,t,i,r){if(!(a.isBuffer(e)||e instanceof n.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof t)r=t,t=0,i=e.length;else if("function"==typeof i)r=i,i=e.length-t;else if("function"!=typeof r)throw new TypeError('"cb" argument must be a function');return d(t,e.length),h(i,t,e.length),p(e,t,i,r)},t.randomFillSync=function(e,t,i){if(void 0===t&&(t=0),!(a.isBuffer(e)||e instanceof n.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return d(t,e.length),void 0===i&&(i=e.length-t),h(i,t,e.length),p(e,t,i)}):(t.randomFill=r,t.randomFillSync=r)},94281:e=>{"use strict";var t={};function n(e,n,i){i||(i=Error);var r=function(e){var t,i;function r(t,i,r){return e.call(this,function(e,t,i){return"string"==typeof n?n:n(e,t,i)}(t,i,r))||this}return i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,r}(i);r.prototype.name=i.name,r.prototype.code=e,t[e]=r}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,o,s,a,c;if("string"==typeof t&&(o="not ",t.substr(0,o.length)===o)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(r," ").concat(i(t,"type"));else{var l=("number"!=typeof c&&(c=0),c+".".length>(a=e).length||-1===a.indexOf(".",c)?"argument":"property");s='The "'.concat(e,'" ').concat(l," ").concat(r," ").concat(i(t,"type"))}return s+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},56753:(e,t,n)=>{"use strict";var i=n(34155),r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var o=n(79481),s=n(64229);n(35717)(u,o);for(var a=r(s.prototype),c=0;c<a.length;c++){var l=a[c];u.prototype[l]||(u.prototype[l]=s.prototype[l])}function u(e){if(!(this instanceof u))return new u(e);o.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||i.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},82725:(e,t,n)=>{"use strict";e.exports=r;var i=n(74605);function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}n(35717)(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},79481:(e,t,n)=>{"use strict";var i,r=n(34155);e.exports=x,x.ReadableState=T,n(17187).EventEmitter;var o,s=function(e,t){return e.listeners(t).length},a=n(22503),c=n(48764).Buffer,l=n.g.Uint8Array||function(){},u=n(94616);o=u&&u.debuglog?u.debuglog("stream"):function(){};var d,h,p,f=n(57327),m=n(61195),g=n(82457).getHighWaterMark,v=n(94281).q,y=v.ERR_INVALID_ARG_TYPE,b=v.ERR_STREAM_PUSH_AFTER_EOF,E=v.ERR_METHOD_NOT_IMPLEMENTED,S=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(35717)(x,a);var w=m.errorOrDestroy,_=["error","close","destroy","pause","resume"];function T(e,t,r){i=i||n(56753),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",r),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(32553).s),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function x(e){if(i=i||n(56753),!(this instanceof x))return new x(e);var t=this instanceof i;this._readableState=new T(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function C(e,t,n,i,r){o("readableAddChunk",t);var s,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?A(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}}(e,a);else if(r||(s=function(e,t){var n,i;return i=t,c.isBuffer(i)||i instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t)),n}(a,t)),s)w(e,s);else if(a.objectMode||t&&t.length>0)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),i)a.endEmitted?w(e,new S):I(e,a,t,!0);else if(a.ended)w(e,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?I(e,a,t,!1):R(e,a)):I(e,a,t,!1)}else i||(a.reading=!1,R(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function I(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&A(e)),R(e,t)}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),x.prototype.destroy=m.destroy,x.prototype._undestroy=m.undestroy,x.prototype._destroy=function(e,t){t(e)},x.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=c.from(e,t),t=""),n=!0),C(this,e,t,!1,n)},x.prototype.unshift=function(e){return C(this,e,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(e){d||(d=n(32553).s);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var k=1073741824;function M(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=k?e=k:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(O,e))}function O(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,$(e)}function R(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(L,e,t))}function L(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(o("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function D(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){o("readable nexttick read 0"),e.read(0)}function P(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),$(e),t.flowing&&!t.reading&&e.read(0)}function $(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function U(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function B(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(F,t,e))}function F(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function j(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}x.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):A(this),null;if(0===(e=M(e,t))&&t.ended)return 0===t.length&&B(this),null;var i,r=t.needReadable;return o("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",r=!0),t.ended||t.reading?o("reading or ended",r=!1):r&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=M(n,t))),null===(i=e>0?U(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&B(this)),null!==i&&this.emit("data",i),i},x.prototype._read=function(e){w(this,new E("_read()"))},x.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,o("pipe count=%d opts=%j",i.pipesCount,t);var a=t&&!1===t.end||e===r.stdout||e===r.stderr?m:c;function c(){o("onend"),e.end()}i.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",(function t(r,s){o("onunpipe"),r===n&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,o("cleanup"),e.removeListener("close",p),e.removeListener("finish",f),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",t),n.removeListener("end",c),n.removeListener("end",m),n.removeListener("data",d),u=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}));var l=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,$(e))}}(n);e.on("drain",l);var u=!1;function d(t){o("ondata");var r=e.write(t);o("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==j(i.pipes,e))&&!u&&(o("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function h(t){o("onerror",t),m(),e.removeListener("error",h),0===s(e,"error")&&w(e,t)}function p(){e.removeListener("finish",f),m()}function f(){o("onfinish"),e.removeListener("close",p),m()}function m(){o("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on(t,n)}(e,"error",h),e.once("close",p),e.once("finish",f),e.emit("pipe",n),i.flowing||(o("pipe resume"),n.resume()),e},x.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=j(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},x.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,o("on readable",i.length,i.reading),i.length?A(this):i.reading||r.nextTick(N,this))),n},x.prototype.addListener=x.prototype.on,x.prototype.removeListener=function(e,t){var n=a.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(D,this),n},x.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(D,this),t},x.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(P,e,t))}(this,e)),e.paused=!1,this},x.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},x.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){if(o("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){o("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var s=0;s<_.length;s++)e.on(_[s],this.emit.bind(this,_[s]));return this._read=function(t){o("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(x.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n(45850)),h(this)}),Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(x.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(x.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),x._fromList=U,Object.defineProperty(x.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(x.from=function(e,t){return void 0===p&&(p=n(15167)),p(x,e,t)})},74605:(e,t,n)=>{"use strict";e.exports=u;var i=n(94281).q,r=i.ERR_METHOD_NOT_IMPLEMENTED,o=i.ERR_MULTIPLE_CALLBACK,s=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,c=n(56753);function l(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}n(35717)(u,c),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,n){n(new r("_transform()"))},u.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},64229:(e,t,n)=>{"use strict";var i,r=n(34155);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(undefined),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=x,x.WritableState=T;var s,a={deprecate:n(94927)},c=n(22503),l=n(48764).Buffer,u=n.g.Uint8Array||function(){},d=n(61195),h=n(82457).getHighWaterMark,p=n(94281).q,f=p.ERR_INVALID_ARG_TYPE,m=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,v=p.ERR_STREAM_CANNOT_PIPE,y=p.ERR_STREAM_DESTROYED,b=p.ERR_STREAM_NULL_VALUES,E=p.ERR_STREAM_WRITE_AFTER_END,S=p.ERR_UNKNOWN_ENCODING,w=d.errorOrDestroy;function _(){}function T(e,t,s){i=i||n(56753),e=e||{},"boolean"!=typeof s&&(s=t instanceof i),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(O,e,t),e._writableState.errorEmitted=!0,w(e,i)):(o(i),e._writableState.errorEmitted=!0,w(e,i),O(e,t))}(e,n,i,t,o);else{var s=M(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||k(e,n),i?r.nextTick(I,e,n,s,o):I(e,n,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function x(e){var t=this instanceof(i=i||n(56753));if(!t&&!s.call(x,this))return new x(e);this._writableState=new T(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),c.call(this)}function C(e,t,n,i,r,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function I(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),O(e,t)}function k(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var a=0,c=!0;n;)r[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;r.allBuffers=c,C(e,t,!0,t.length,r,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,d=n.callback;if(C(e,t,!1,t.objectMode?1:l.length,l,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function M(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var n=M(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(A,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n(35717)(x,c),T.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(T.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!s.call(this,e)||this===x&&e&&e._writableState instanceof T}})):s=function(e){return e instanceof this},x.prototype.pipe=function(){w(this,new v)},x.prototype.write=function(e,t,n){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=e,l.isBuffer(i)||i instanceof u);return a&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=_),o.ending?function(e,t){var n=new E;w(e,n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var o;return null===n?o=new b:"string"==typeof n||t.objectMode||(o=new f("chunk",["string","Buffer"],n)),!o||(w(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,s=function(e,t,n,i,r,o){if(!n){var s=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,n)),t}(t,i,r);i!==s&&(n=!0,r="buffer",i=s)}var a=t.objectMode?1:i.length;t.length+=a;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,a,i,r,o);return c}(this,o,a,e,t,n)),s},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||k(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new S(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,n){n(new m("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,O(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=d.destroy,x.prototype._undestroy=d.undestroy,x.prototype._destroy=function(e,t){t(e)}},45850:(e,t,n)=>{"use strict";var i,r=n(34155);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(8610),a=Symbol("lastResolve"),c=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),d=Symbol("lastPromise"),h=Symbol("handlePromise"),p=Symbol("stream");function f(e,t){return{value:e,done:t}}function m(e){var t=e[a];if(null!==t){var n=e[p].read();null!==n&&(e[d]=null,e[a]=null,e[c]=null,t(f(n,!1)))}}function g(e){r.nextTick(m,e)}var v=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((o(i={get stream(){return this[p]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(f(void 0,!0));if(this[p].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[l]?n(e[l]):t(f(void 0,!0))}))}));var n,i=this[d];if(i)n=new Promise(function(e,t){return function(n,i){e.then((function(){t[u]?n(f(void 0,!0)):t[h](n,i)}),i)}}(i,this));else{var o=this[p].read();if(null!==o)return Promise.resolve(f(o,!1));n=new Promise(this[h])}return this[d]=n,n}},Symbol.asyncIterator,(function(){return this})),o(i,"return",(function(){var e=this;return new Promise((function(t,n){e[p].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),i),v);e.exports=function(e){var t,n=Object.create(y,(o(t={},p,{value:e,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,l,{value:null,writable:!0}),o(t,u,{value:e._readableState.endEmitted,writable:!0}),o(t,h,{value:function(e,t){var i=n[p].read();i?(n[d]=null,n[a]=null,n[c]=null,e(f(i,!1))):(n[a]=e,n[c]=t)},writable:!0}),t));return n[d]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[c];return null!==t&&(n[d]=null,n[a]=null,n[c]=null,t(e)),void(n[l]=e)}var i=n[a];null!==i&&(n[d]=null,n[a]=null,n[c]=null,i(f(void 0,!0))),n[u]=!0})),e.on("readable",g.bind(null,n)),n}},57327:(e,t,n)=>{"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=n(48764).Buffer,a=n(52361).inspect,c=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,i,r=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=r,i=a,s.prototype.copy.call(t,n,i),a+=o.data.length,o=o.next;return r}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var r=t.data,o=e>r.length?r.length:e;if(o===r.length?i+=r:i+=r.slice(0,e),0==(e-=o)){o===r.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=r.slice(o));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var r=n.data,o=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,o),0==(e-=o)){o===r.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=r.slice(o));break}++i}return this.length-=i,t}},{key:c,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&o(t.prototype,n),e}()},61195:(e,t,n)=>{"use strict";var i=n(34155);function r(e,t){s(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(s,this,e)):i.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?i.nextTick(o,n):(n._writableState.errorEmitted=!0,i.nextTick(r,n,e)):i.nextTick(r,n,e):t?(i.nextTick(o,n),t(e)):i.nextTick(o,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}},8610:(e,t,n)=>{"use strict";var i=n(94281).q.ERR_STREAM_PREMATURE_CLOSE;function r(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i)}}}(o||r);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){a=!1,l=!0,s||o.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,d=!0,a||o.call(t)},p=function(e){o.call(t,e)},f=function(){var e;return s&&!d?(t._readableState&&t._readableState.ended||(e=new i),o.call(t,e)):a&&!l?(t._writableState&&t._writableState.ended||(e=new i),o.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",f),t.req?m():t.on("request",m)):a&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",h),t.on("finish",u),!1!==n.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",f)}}},15167:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},59946:(e,t,n)=>{"use strict";var i,r=n(94281).q,o=r.ERR_MISSING_ARGS,s=r.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e,t,r,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===i&&(i=n(8610)),i(e,{readable:t,writable:r},(function(e){if(e)return o(e);a=!0,o()}));var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function l(e){e()}function u(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,r=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,n){var o=n<t.length-1;return c(e,o,n>0,(function(e){i||(i=e),e&&s.forEach(l),o||(s.forEach(l),r(i))}))}));return t.reduce(u)}},82457:(e,t,n)=>{"use strict";var i=n(94281).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,r){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,r,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new i(r?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},22503:(e,t,n)=>{e.exports=n(17187).EventEmitter},88473:(e,t,n)=>{(t=e.exports=n(79481)).Stream=t,t.Readable=t,t.Writable=n(64229),t.Duplex=n(56753),t.Transform=n(74605),t.PassThrough=n(82725),t.finished=n(8610),t.pipeline=n(59946)},76388:(e,t,n)=>{"use strict";var i=n(36343);e.exports=function(e){return function(t,n){return i(t,n,e)}}},1667:(e,t,n)=>{"use strict";var i=n(52624);e.exports=function(e){return function(t){return i(t,e)}}},17532:(e,t,n)=>{"use strict";var i=n(773);e.exports=function(e){var t=Object.assign({},e,this.data("settings"));this.Compiler=function(e){return i(e,t)}}},10043:(e,t,n)=>{"use strict";var i,r=n(25108),o=n(82747),s=n(10438),a=n(48135);e.exports=function(e){var t=this.data();function n(e,n){t[e]?t[e].push(n):t[e]=[n]}!i&&(this.Parser&&this.Parser.prototype&&this.Parser.prototype.blockTokenizers||this.Compiler&&this.Compiler.prototype&&this.Compiler.prototype.visitors)&&(i=!0,r.warn("[remark-gfm] Warning: please upgrade to remark 13 to use this plugin")),n("micromarkExtensions",o(e)),n("fromMarkdownExtensions",s),n("toMarkdownExtensions",a(e))}},12861:(e,t,n)=>{"use strict";e.exports=function(e){var t=this;this.Parser=function(n){return i(n,Object.assign({},t.data("settings"),e,{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}};var i=n(39671)},78818:(e,t,n)=>{"use strict";var i=n(55288);e.exports=function(e,t){return e&&!e.process&&(t=e,e=null),e?function(e,t){return function(n,r,o){e.run(i(n,t),r,(function(e){o(e)}))}}(e,t):function(e){return function(t){return i(t,e)}}(t)}},96464:e=>{"use strict";var t,n="";e.exports=function(e,i){if("string"!=typeof e)throw new TypeError("expected a string");if(1===i)return e;if(2===i)return e+e;var r=e.length*i;if(t!==e||void 0===t)t=e,n="";else if(n.length>=r)return n.substr(0,r);for(;r>n.length&&i>1;)1&i&&(n+=e),i>>=1,e+=e;return n=(n+=e).substr(0,r)}},99353:(e,t,n)=>{e.exports=n(71846)},71846:(e,t,n)=>{var i=n(41960);t.operation=function(e){var n=t.timeouts(e);return new i(n,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],r=0;r<t.retries;r++)i.push(this.createTimeout(r,t));return e&&e.forever&&!i.length&&i.push(this.createTimeout(r,t)),i.sort((function(e,t){return e-t})),i},t.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1,i=Math.round(n*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return Math.min(i,t.maxTimeout)},t.wrap=function(e,n,i){if(n instanceof Array&&(i=n,n=null),!i)for(var r in i=[],e)"function"==typeof e[r]&&i.push(r);for(var o=0;o<i.length;o++){var s=i[o],a=e[s];e[s]=function(i){var r=t.operation(n),o=Array.prototype.slice.call(arguments,1),s=o.pop();o.push((function(e){r.retry(e)||(e&&(arguments[0]=r.mainError()),s.apply(this,arguments))})),r.attempt((function(){i.apply(e,o)}))}.bind(e,a),e[s].options=n}}},41960:(e,t,n)=>{var i=n(25108);function r(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(void 0===n){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1)}var i=this;return this._timer=setTimeout((function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout((function(){i._operationTimeoutCb(i._attempts)}),i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)}),n),this._options.unref&&this._timer.unref(),!0},r.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){n._operationTimeoutCb()}),n._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},r.prototype.try=function(e){i.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},r.prototype.start=function(e){i.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,i=0;i<this._errors.length;i++){var r=this._errors[i],o=r.message,s=(e[o]||0)+1;e[o]=s,s>=n&&(t=r,n=s)}return t}},79785:(e,t,n)=>{"use strict";var i=n(48764).Buffer,r=n(35717),o=n(3349),s=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],h=[1352829926,1548603684,1836072691,2053994217,0];function p(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function f(e,t){return e<<t|e>>>32-t}function m(e,t,n,i,r,o,s,a){return f(e+(t^n^i)+o+s|0,a)+r|0}function g(e,t,n,i,r,o,s,a){return f(e+(t&n|~t&i)+o+s|0,a)+r|0}function v(e,t,n,i,r,o,s,a){return f(e+((t|~n)^i)+o+s|0,a)+r|0}function y(e,t,n,i,r,o,s,a){return f(e+(t&i|n&~i)+o+s|0,a)+r|0}function b(e,t,n,i,r,o,s,a){return f(e+(t^(n|~i))+o+s|0,a)+r|0}r(p,o),p.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var n=0|this._a,i=0|this._b,r=0|this._c,o=0|this._d,p=0|this._e,E=0|this._a,S=0|this._b,w=0|this._c,_=0|this._d,T=0|this._e,x=0;x<80;x+=1){var C,I;x<16?(C=m(n,i,r,o,p,e[a[x]],d[0],l[x]),I=b(E,S,w,_,T,e[c[x]],h[0],u[x])):x<32?(C=g(n,i,r,o,p,e[a[x]],d[1],l[x]),I=y(E,S,w,_,T,e[c[x]],h[1],u[x])):x<48?(C=v(n,i,r,o,p,e[a[x]],d[2],l[x]),I=v(E,S,w,_,T,e[c[x]],h[2],u[x])):x<64?(C=y(n,i,r,o,p,e[a[x]],d[3],l[x]),I=g(E,S,w,_,T,e[c[x]],h[3],u[x])):(C=b(n,i,r,o,p,e[a[x]],d[4],l[x]),I=m(E,S,w,_,T,e[c[x]],h[4],u[x])),n=p,p=o,o=f(r,10),r=i,i=C,E=T,T=_,_=f(w,10),w=S,S=I}var k=this._b+r+_|0;this._b=this._c+o+T|0,this._c=this._d+p+E|0,this._d=this._e+n+S|0,this._e=this._a+i+w|0,this._a=k},p.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=i.alloc?i.alloc(20):new i(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=p},89509:(e,t,n)=>{var i=n(48764),r=i.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(o(i,t),t.Buffer=s),s.prototype=Object.create(r.prototype),o(r,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},2399:(e,t,n)=>{"use strict";var i,r=n(34155),o=n(48764),s=o.Buffer,a={};for(i in o)o.hasOwnProperty(i)&&"SlowBuffer"!==i&&"Buffer"!==i&&(a[i]=o[i]);var c=a.Buffer={};for(i in s)s.hasOwnProperty(i)&&"allocUnsafe"!==i&&"allocUnsafeSlow"!==i&&(c[i]=s[i]);if(a.Buffer.prototype=s.prototype,c.from&&c.from!==Uint8Array.from||(c.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return s(e,t,n)}),c.alloc||(c.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var i=s(e);return t&&0!==t.length?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i}),!a.kStringMaxLength)try{a.kStringMaxLength=r.binding("buffer").kStringMaxLength}catch(e){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),e.exports=a},96692:e=>{var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",(t+=null!=e.rateNumerator?" rate=%s":"")+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},70766:(e,t,n)=>{var i=n(70962),r=n(95776);t.write=r,t.parse=i.parse,t.parseParams=i.parseParams,t.parseFmtpConfig=i.parseFmtpConfig,t.parsePayloads=i.parsePayloads,t.parseRemoteCandidates=i.parseRemoteCandidates,t.parseImageAttributes=i.parseImageAttributes,t.parseSimulcastStreamList=i.parseSimulcastStreamList},70962:(e,t,n)=>{var i=function(e){return String(Number(e))===e?Number(e):e},r=function(e,t,n){var r=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:r?t[e.name]:t;!function(e,t,n,r){if(r&&!n)t[r]=i(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=i(e[o+1]))}(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},o=n(96692),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],i=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach((function(e){var t=e[0],s=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),i=n[n.length-1]);for(var a=0;a<(o[t]||[]).length;a+=1){var c=o[t][a];if(c.reg.test(s))return r(c,i,s)}})),t.media=n,t};var a=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=i(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(i),r=0;r<n.length;r+=3)t.push({component:n[r],ip:n[r+1],port:n[r+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(a,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=i(e):(t=i(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},95776:(e,t,n)=>{var i=n(96692),r=/%[sdv%]/g,o=function(e){var t=1,n=arguments,i=n.length;return e.replace(r,(function(e){if(t>=i)return e;var r=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(r);case"%d":return Number(r);case"%v":return""}}))},s=function(e,t,n){var i=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var r=0;r<t.names.length;r+=1){var s=t.names[r];t.name?i.push(n[t.name][s]):i.push(n[t.names[r]])}else i.push(n[t.name]);return o.apply(null,i)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||a,r=t.innerOrder||c,o=[];return n.forEach((function(t){i[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(s(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(s(t,n,e))}))}))})),e.media.forEach((function(e){o.push(s("m",i.m[0],e)),r.forEach((function(t){i[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(s(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(s(t,n,e))}))}))}))})),o.join("\r\n")+"\r\n"}},24189:(e,t,n)=>{var i=n(89509).Buffer;function r(e,t){this._block=i.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}r.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=i.from(e,t));for(var n=this._block,r=this._blockSize,o=e.length,s=this._len,a=0;a<o;){for(var c=s%r,l=Math.min(o-a,r-c),u=0;u<l;u++)n[c+u]=e[a+u];a+=l,(s+=l)%r==0&&this._update(n)}return this._len+=o,this},r.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var i=(4294967295&n)>>>0,r=(n-i)/4294967296;this._block.writeUInt32BE(r,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=r},89072:(e,t,n)=>{var i=e.exports=function(e){e=e.toLowerCase();var t=i[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};i.sha=n(74448),i.sha1=n(18336),i.sha224=n(48432),i.sha256=n(67499),i.sha384=n(51686),i.sha512=n(87816)},74448:(e,t,n)=>{var i=n(35717),r=n(24189),o=n(89509).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function c(){this.init(),this._w=a,r.call(this,64,56)}function l(e){return e<<30|e>>>2}function u(e,t,n,i){return 0===e?t&n|~t&i:2===e?t&n|t&i|n&i:t^n^i}i(c,r),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t,n=this._w,i=0|this._a,r=0|this._b,o=0|this._c,a=0|this._d,c=0|this._e,d=0;d<16;++d)n[d]=e.readInt32BE(4*d);for(;d<80;++d)n[d]=n[d-3]^n[d-8]^n[d-14]^n[d-16];for(var h=0;h<80;++h){var p=~~(h/20),f=0|((t=i)<<5|t>>>27)+u(p,r,o,a)+c+n[h]+s[p];c=a,a=o,o=l(r),r=i,i=f}this._a=i+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},18336:(e,t,n)=>{var i=n(35717),r=n(24189),o=n(89509).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function c(){this.init(),this._w=a,r.call(this,64,56)}function l(e){return e<<5|e>>>27}function u(e){return e<<30|e>>>2}function d(e,t,n,i){return 0===e?t&n|~t&i:2===e?t&n|t&i|n&i:t^n^i}i(c,r),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t,n=this._w,i=0|this._a,r=0|this._b,o=0|this._c,a=0|this._d,c=0|this._e,h=0;h<16;++h)n[h]=e.readInt32BE(4*h);for(;h<80;++h)n[h]=(t=n[h-3]^n[h-8]^n[h-14]^n[h-16])<<1|t>>>31;for(var p=0;p<80;++p){var f=~~(p/20),m=l(i)+d(f,r,o,a)+c+n[p]+s[f]|0;c=a,a=o,o=u(r),r=i,i=m}this._a=i+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},48432:(e,t,n)=>{var i=n(35717),r=n(67499),o=n(24189),s=n(89509).Buffer,a=new Array(64);function c(){this.init(),this._w=a,o.call(this,64,56)}i(c,r),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var e=s.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=c},67499:(e,t,n)=>{var i=n(35717),r=n(24189),o=n(89509).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function c(){this.init(),this._w=a,r.call(this,64,56)}function l(e,t,n){return n^e&(t^n)}function u(e,t,n){return e&t|n&(e|t)}function d(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function h(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function p(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}i(c,r),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(e){for(var t,n=this._w,i=0|this._a,r=0|this._b,o=0|this._c,a=0|this._d,c=0|this._e,f=0|this._f,m=0|this._g,g=0|this._h,v=0;v<16;++v)n[v]=e.readInt32BE(4*v);for(;v<64;++v)n[v]=0|(((t=n[v-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+n[v-7]+p(n[v-15])+n[v-16];for(var y=0;y<64;++y){var b=g+h(c)+l(c,f,m)+s[y]+n[y]|0,E=d(i)+u(i,r,o)|0;g=m,m=f,f=c,c=a+b|0,a=o,o=r,r=i,i=b+E|0}this._a=i+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=c+this._e|0,this._f=f+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},c.prototype._hash=function(){var e=o.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=c},51686:(e,t,n)=>{var i=n(35717),r=n(87816),o=n(24189),s=n(89509).Buffer,a=new Array(160);function c(){this.init(),this._w=a,o.call(this,128,112)}i(c,r),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var e=s.allocUnsafe(48);function t(t,n,i){e.writeInt32BE(t,i),e.writeInt32BE(n,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=c},87816:(e,t,n)=>{var i=n(35717),r=n(24189),o=n(89509).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function c(){this.init(),this._w=a,r.call(this,128,112)}function l(e,t,n){return n^e&(t^n)}function u(e,t,n){return e&t|n&(e|t)}function d(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function h(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function f(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function v(e,t){return e>>>0<t>>>0?1:0}i(c,r),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},c.prototype._update=function(e){for(var t=this._w,n=0|this._ah,i=0|this._bh,r=0|this._ch,o=0|this._dh,a=0|this._eh,c=0|this._fh,y=0|this._gh,b=0|this._hh,E=0|this._al,S=0|this._bl,w=0|this._cl,_=0|this._dl,T=0|this._el,x=0|this._fl,C=0|this._gl,I=0|this._hl,k=0;k<32;k+=2)t[k]=e.readInt32BE(4*k),t[k+1]=e.readInt32BE(4*k+4);for(;k<160;k+=2){var M=t[k-30],A=t[k-30+1],O=p(M,A),R=f(A,M),L=m(M=t[k-4],A=t[k-4+1]),D=g(A,M),N=t[k-14],P=t[k-14+1],$=t[k-32],U=t[k-32+1],B=R+P|0,F=O+N+v(B,R)|0;F=(F=F+L+v(B=B+D|0,D)|0)+$+v(B=B+U|0,U)|0,t[k]=F,t[k+1]=B}for(var j=0;j<160;j+=2){F=t[j],B=t[j+1];var H=u(n,i,r),K=u(E,S,w),q=d(n,E),V=d(E,n),G=h(a,T),W=h(T,a),z=s[j],Y=s[j+1],X=l(a,c,y),J=l(T,x,C),Q=I+W|0,Z=b+G+v(Q,I)|0;Z=(Z=(Z=Z+X+v(Q=Q+J|0,J)|0)+z+v(Q=Q+Y|0,Y)|0)+F+v(Q=Q+B|0,B)|0;var ee=V+K|0,te=q+H+v(ee,V)|0;b=y,I=C,y=c,C=x,c=a,x=T,a=o+Z+v(T=_+Q|0,_)|0,o=r,_=w,r=i,w=S,i=n,S=E,n=Z+te+v(E=Q+ee|0,Q)|0}this._al=this._al+E|0,this._bl=this._bl+S|0,this._cl=this._cl+w|0,this._dl=this._dl+_|0,this._el=this._el+T|0,this._fl=this._fl+x|0,this._gl=this._gl+C|0,this._hl=this._hl+I|0,this._ah=this._ah+n+v(this._al,E)|0,this._bh=this._bh+i+v(this._bl,S)|0,this._ch=this._ch+r+v(this._cl,w)|0,this._dh=this._dh+o+v(this._dl,_)|0,this._eh=this._eh+a+v(this._el,T)|0,this._fh=this._fh+c+v(this._fl,x)|0,this._gh=this._gh+y+v(this._gl,C)|0,this._hh=this._hh+b+v(this._hl,I)|0},c.prototype._hash=function(){var e=o.allocUnsafe(64);function t(t,n,i){e.writeInt32BE(t,i),e.writeInt32BE(n,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=c},36582:(e,t)=>{"use strict";t.parse=function(e){var t=String(e||"").trim();return""===t?[]:t.split(n)},t.stringify=function(e){return e.join(" ").trim()};var n=/[ \t\n\r\f]+/g},42830:(e,t,n)=>{e.exports=r;var i=n(17187).EventEmitter;function r(){i.call(this)}n(35717)(r,i),r.Readable=n(79481),r.Writable=n(64229),r.Duplex=n(56753),r.Transform=n(74605),r.PassThrough=n(82725),r.finished=n(8610),r.pipeline=n(59946),r.Stream=r,r.prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",c));var s=!1;function a(){s||(s=!0,e.end())}function c(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",r),e.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",c),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",l),e.on("error",l),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},32553:(e,t,n)=>{"use strict";var i=n(89509).Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=s(t[i]);return r>=0?(r>0&&(e.lastNeed=r-1),r):--i<n||-2===r?0:(r=s(t[i]))>=0?(r>0&&(e.lastNeed=r-2),r):--i<n||-2===r?0:(r=s(t[i]))>=0?(r>0&&(2===r?r=0:e.lastNeed=r-3),r):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},24860:(e,t,n)=>{"use strict";e.exports=n(59676)},14983:(e,t,n)=>{var i,r=n(68348),o={};for(i in e.exports=o,r)o[r[i]]=i},57472:e=>{e.exports=String.fromCharCode},38003:e=>{e.exports={}.hasOwnProperty},34988:e=>{"use strict";e.exports=function(e,t){return e=e.replace(t.subset?function(e){for(var t=[],n=-1;++n<e.length;)t.push(e[n].replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}(t.subset):/["&'<>`]/g,n),t.subset||t.escapeOnly?e:e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,(function(e,n,i){return t.format(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,i.charCodeAt(n+2),t)})).replace(/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,n);function n(e,n,i){return t.format(e.charCodeAt(0),i.charCodeAt(n+1),t)}}},54930:(e,t,n)=>{"use strict";var i=n(47529),r=n(34988),o=n(81586);e.exports=function(e,t){return r(e,i(t,{format:o}))}},95664:(e,t,n)=>{"use strict";var i=n(34988),r=n(81586);e.exports=function(e){return i(e,{escapeOnly:!0,useNamedReferences:!0,format:r})}},59676:(e,t,n)=>{"use strict";var i=n(54930),r=n(95664);e.exports=i,i.escape=r},81586:(e,t,n)=>{e.exports=function(e,t,n){var s,a,c;return(n.useNamedReferences||n.useShortestReferences)&&(s=o(e,t,n.omitOptionalSemicolons,n.attribute)),!n.useShortestReferences&&s||(a=i(e,t,n.omitOptionalSemicolons),n.useShortestReferences&&(c=r(e,t,n.omitOptionalSemicolons)).length<a.length&&(a=c)),s&&(!n.useShortestReferences||s.length<a.length)?s:a};var i=n(19206),r=n(9327),o=n(45906)},9327:(e,t,n)=>{e.exports=function(e,t,n){var r="&#"+String(e);return n&&t&&!/\d/.test(i(t))?r:r+";"};var i=n(57472)},19206:(e,t,n)=>{e.exports=function(e,t,n){var r="&#x"+e.toString(16).toUpperCase();return n&&t&&!/[\dA-Fa-f]/.test(i(t))?r:r+";"};var i=n(57472)},45906:(e,t,n)=>{e.exports=function(e,t,n,c){var l,u,d=o(e);return s.call(r,d)?(u="&"+(l=r[d]),n&&s.call(i,l)&&-1===a.indexOf(l)&&(!c||t&&61!==t&&/[^\da-z]/i.test(o(t)))?u:u+";"):""};var i=n(37452),r=n(14983),o=n(57472),s=n(38003),a=n(52930)},57848:(e,t,n)=>{var i=n(18139);e.exports=function(e,t){var n,r=null;if(!e||"string"!=typeof e)return r;for(var o,s,a=i(e),c="function"==typeof t,l=0,u=a.length;l<u;l++)o=(n=a[l]).property,s=n.value,c?t(o,s,n):s&&(r||(r={}),r[o]=s);return r}},31668:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(24234),r=n(68568),o=n(48261),s=n(26318);function a(e){let t;return{c(){t=(0,i.bGB)("span"),t.textContent=""},m(e,n){(0,i.$Tr)(e,t,n)},d(e){e&&(0,i.ogt)(t)}}}function c(e){let t;return{c(){t=(0,i.bGB)("span"),t.textContent=""},m(e,n){(0,i.$Tr)(e,t,n)},d(e){e&&(0,i.ogt)(t)}}}function l(e){let t,n,r,o,s,l,u;function d(e,t){return e[1]?c:a}let h=d(e),p=h(e);return{c(){t=(0,i.bGB)("div"),n=(0,i.bGB)("span"),p.c(),r=(0,i.DhX)(),o=(0,i.fLW)(e[0]),(0,i.Ljt)(t,"class",s=(0,i.H1I)(`accordion-section__header ${e[2]}`)+" svelte-zvjuy4")},m(s,a){(0,i.$Tr)(s,t,a),(0,i.R3I)(t,n),p.m(n,null),(0,i.R3I)(t,r),(0,i.R3I)(t,o),l||(u=(0,i.oLt)(t,"click",e[3]),l=!0)},p(e,[r]){h!==(h=d(e))&&(p.d(1),p=h(e),p&&(p.c(),p.m(n,null))),1&r&&(0,i.rTO)(o,e[0]),4&r&&s!==(s=(0,i.H1I)(`accordion-section__header ${e[2]}`)+" svelte-zvjuy4")&&(0,i.Ljt)(t,"class",s)},i:i.ZTd,o:i.ZTd,d(e){e&&(0,i.ogt)(t),p.d(),l=!1,u()}}}function u(e,t,n){let{title:r}=t,{open:o}=t,{className:s=""}=t;return e.$$set=e=>{"title"in e&&n(0,r=e.title),"open"in e&&n(1,o=e.open),"className"in e&&n(2,s=e.className)},[r,o,s,function(t){i.cKT.call(this,e,t)}]}class d extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,u,l,i.N8,{title:0,open:1,className:2})}}const h=d;function p(e){let t,n,r;const o=e[8].default,a=(0,i.nuO)(o,e,e[7],null);return{c(){t=(0,i.bGB)("div"),a&&a.c()},m(e,n){(0,i.$Tr)(e,t,n),a&&a.m(t,null),r=!0},p(e,t){a&&a.p&&(!r||128&t)&&(0,i.kmG)(a,o,e,e[7],r?(0,i.u2N)(o,e[7],t,null):(0,i.VOJ)(e[7]),null)},i(e){r||((0,i.Ui)(a,e),(0,i.P$F)((()=>{n||(n=(0,i.uPJ)(t,s.JD,{},!0)),n.run(1)})),r=!0)},o(e){(0,i.etI)(a,e),n||(n=(0,i.uPJ)(t,s.JD,{},!1)),n.run(0),r=!1},d(e){e&&(0,i.ogt)(t),a&&a.d(e),e&&n&&n.end()}}}function f(e){let t,n,r,o,s;n=new h({props:{title:e[2],open:e[1]}}),n.$on("click",(function(){(0,i.sBU)(e[4].bind(null,e[0]))&&e[4].bind(null,e[0]).apply(this,arguments)}));let a=e[1]&&p(e);return{c(){t=(0,i.bGB)("li"),(0,i.YCL)(n.$$.fragment),r=(0,i.DhX)(),a&&a.c(),(0,i.Ljt)(t,"classname",o=`accordion-section ${e[3]}`)},m(e,o){(0,i.$Tr)(e,t,o),(0,i.yef)(n,t,null),(0,i.R3I)(t,r),a&&a.m(t,null),s=!0},p(r,[c]){e=r;const l={};4&c&&(l.title=e[2]),2&c&&(l.open=e[1]),n.$set(l),e[1]?a?(a.p(e,c),2&c&&(0,i.Ui)(a,1)):(a=p(e),a.c(),(0,i.Ui)(a,1),a.m(t,null)):a&&((0,i.dvw)(),(0,i.etI)(a,1,1,(()=>{a=null})),(0,i.gbL)()),(!s||8&c&&o!==(o=`accordion-section ${e[3]}`))&&(0,i.Ljt)(t,"classname",o)},i(e){s||((0,i.Ui)(n.$$.fragment,e),(0,i.Ui)(a),s=!0)},o(e){(0,i.etI)(n.$$.fragment,e),(0,i.etI)(a),s=!1},d(e){e&&(0,i.ogt)(t),(0,i.vpE)(n),a&&a.d()}}}const m={};function g(e,t,n){let o,{$$slots:s={},$$scope:a}=t,{title:c}=t,{open:l=!1}=t,{className:u=""}=t,{key:d}=t;const{handleChange:h,selected:p}=(0,r.fw)(m);return(0,i.FIv)(e,p,(e=>n(6,o=e))),e.$$set=e=>{"title"in e&&n(2,c=e.title),"open"in e&&n(1,l=e.open),"className"in e&&n(3,u=e.className),"key"in e&&n(0,d=e.key),"$$scope"in e&&n(7,a=e.$$scope)},e.$$.update=()=>{5&e.$$.dirty&&n(0,d=d||c),65&e.$$.dirty&&n(1,l=o===d)},[d,l,c,u,h,p,o,a,s]}class v extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,g,f,i.N8,{title:2,open:1,className:3,key:0})}}const y=v;function b(e){let t,n,r;const o=e[4].default,s=(0,i.nuO)(o,e,e[3],null);return{c(){t=(0,i.bGB)("ul"),s&&s.c(),(0,i.Ljt)(t,"class",n=(0,i.H1I)(`accordion ${e[0]}`)+" svelte-h4j7vw")},m(e,n){(0,i.$Tr)(e,t,n),s&&s.m(t,null),r=!0},p(e,[a]){s&&s.p&&(!r||8&a)&&(0,i.kmG)(s,o,e,e[3],r?(0,i.u2N)(o,e[3],a,null):(0,i.VOJ)(e[3]),null),(!r||1&a&&n!==(n=(0,i.H1I)(`accordion ${e[0]}`)+" svelte-h4j7vw"))&&(0,i.Ljt)(t,"class",n)},i(e){r||((0,i.Ui)(s,e),r=!0)},o(e){(0,i.etI)(s,e),r=!1},d(e){e&&(0,i.ogt)(t),s&&s.d(e)}}}function E(e,t,n){let i,{$$slots:s={},$$scope:a}=t,{value:c}=t,{className:l=""}=t;const u=(0,r.x)(),d=(0,o.fZ)(null);return(0,r.v)(m,{handleChange:function(e){i||d.set(e),u("change",e)},selected:d}),e.$$set=e=>{"value"in e&&n(1,c=e.value),"className"in e&&n(0,l=e.className),"$$scope"in e&&n(3,a=e.$$scope)},e.$$.update=()=>{2&e.$$.dirty&&n(2,i=void 0!==c),6&e.$$.dirty&&i&&d.set(c)},[l,c,i,a,s]}class S extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,E,b,i.N8,{value:1,className:0})}}const w=S;w.Section=y,w.Header=h;const _=w},63605:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(24234),r=n(47658);function o(e){let t,n,o,s,a,c;const l=e[6].default,u=(0,i.nuO)(l,e,e[5],null);let d=[e[3]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("div"),u&&u.c(),(0,i.UF7)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),e[7](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||32&r)&&(0,i.kmG)(u,l,e,e[5],s?(0,i.u2N)(l,e[5],r,null):(0,i.VOJ)(e[5]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[7](null),a=!1,(0,i.j7q)(c)}}}function s(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}class a extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,s,o,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const c=a},80242:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(24234),r=n(47658);function o(e){let t,n,o,s,a,c;const l=e[6].default,u=(0,i.nuO)(l,e,e[5],null);let d=[e[3]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("i"),u&&u.c(),(0,i.UF7)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),e[7](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||32&r)&&(0,i.kmG)(u,l,e,e[5],s?(0,i.u2N)(l,e[5],r,null):(0,i.VOJ)(e[5]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[7](null),a=!1,(0,i.j7q)(c)}}}function s(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}class a extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,s,o,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const c=a},94884:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(24234),r=n(47658);function o(e){let t,n,o,s,a,c;const l=e[6].default,u=(0,i.nuO)(l,e,e[5],null);let d=[e[3]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("span"),u&&u.c(),(0,i.UF7)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),e[7](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||32&r)&&(0,i.kmG)(u,l,e,e[5],s?(0,i.u2N)(l,e[5],r,null):(0,i.VOJ)(e[5]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[7](null),a=!1,(0,i.j7q)(c)}}}function s(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}class a extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,s,o,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const c=a},10761:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(24234),r=n(47658);function o(e){let t,n,o,s,a,c;const l=e[6].default,u=(0,i.nuO)(l,e,e[5],null);let d=[e[3]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bi5)("svg"),u&&u.c(),(0,i.NVz)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),e[7](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||32&r)&&(0,i.kmG)(u,l,e,e[5],s?(0,i.u2N)(l,e[5],r,null):(0,i.VOJ)(e[5]),null),(0,i.NVz)(t,h=(0,i.LoY)(d,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[7](null),a=!1,(0,i.j7q)(c)}}}function s(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}class a extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,s,o,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const c=a},93886:(e,t,n)=>{"use strict";n.d(t,{Z:()=>R});var i=n(24234),r=n(70655),o=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function s(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),i=o.get(n);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!=typeof n.path){var i=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"==typeof t?t:"string"==typeof i&&i.length>0?i:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var a=[".DS_Store","Thumbs.db"];function c(e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return[2,(n=e,n.dataTransfer&&e.dataTransfer?u(e.dataTransfer,e.type):l(e))];var n}))}))}function l(e){return(null!==e.target&&e.target.files?h(e.target.files):[]).map((function(e){return s(e)}))}function u(e,t){return(0,r.mG)(this,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return e.items?(n=h(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(p))]):[3,2];case 1:return[2,d(f(i.sent()))];case 2:return[2,d(h(e.files).map((function(e){return s(e)})))]}}))}))}function d(e){return e.filter((function(e){return-1===a.indexOf(e.name)}))}function h(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(i)}return t}function p(e){if("function"!=typeof e.webkitGetAsEntry)return m(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?v(t):m(e)}function f(e){return e.reduce((function(e,t){return(0,r.fl)(e,Array.isArray(t)?f(t):[t])}),[])}function m(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=s(t);return Promise.resolve(n)}function g(e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return[2,e.isDirectory?v(e):y(e)]}))}))}function v(e){var t=e.createReader();return new Promise((function(e,n){var i=[];!function o(){var s=this;t.readEntries((function(t){return(0,r.mG)(s,void 0,void 0,(function(){var s,a,c;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if(t.length)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return s=r.sent(),e(s),[3,4];case 3:return a=r.sent(),n(a),[3,4];case 4:return[3,6];case 5:c=Promise.all(t.map(g)),i.push(c),o(),r.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function y(e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var i=s(n,e.fullPath);t(i)}),(function(e){n(e)}))}))]}))}))}const b=e=>(e=Array.isArray(e)&&1===e.length?e[0]:e,{code:"file-invalid-type",message:`File type must be ${Array.isArray(e)?`one of ${e.join(", ")}`:e}`}),E=e=>({code:"file-too-large",message:`File is larger than ${e} bytes`}),S=e=>({code:"file-too-small",message:`File is smaller than ${e} bytes`}),w={code:"too-many-files",message:"Too many files"};function _(e){return null!=e}function T(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function x(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(e=>"Files"===e||"application/x-moz-file"===e)):!!e.target&&!!e.target.files}function C(e){e.preventDefault()}var I=n(68568);function k(e){let t,n,r,o,s,a,c;const l=e[28].default,u=(0,i.nuO)(l,e,e[27],null),d=u||function(e){let t;return{c(){t=(0,i.bGB)("p"),t.textContent="Drag 'n' drop some files here, or click to select files"},m(e,n){(0,i.$Tr)(e,t,n)},p:i.ZTd,d(e){e&&(0,i.ogt)(t)}}}();return{c(){t=(0,i.bGB)("div"),n=(0,i.bGB)("input"),r=(0,i.DhX)(),d&&d.c(),(0,i.Ljt)(n,"accept",e[0]),n.multiple=e[1],(0,i.Ljt)(n,"type","file"),(0,i.Ljt)(n,"autocomplete","off"),(0,i.Ljt)(n,"tabindex","-1"),(0,i.czc)(n,"display","none"),(0,i.Ljt)(t,"tabindex","0"),(0,i.Ljt)(t,"class",o=(e[4]?"":"dropzone")+" "+e[2]+" svelte-817dg2"),(0,i.Ljt)(t,"style",e[3])},m(o,l){(0,i.$Tr)(o,t,l),(0,i.R3I)(t,n),e[29](n),(0,i.R3I)(t,r),d&&d.m(t,null),e[30](t),s=!0,a||(c=[(0,i.oLt)(n,"change",e[14]),(0,i.oLt)(n,"click",M),(0,i.oLt)(t,"keydown",e[16](e[7])),(0,i.oLt)(t,"focus",e[16](e[8])),(0,i.oLt)(t,"blur",e[16](e[9])),(0,i.oLt)(t,"click",e[15](e[10])),(0,i.oLt)(t,"dragenter",e[17](e[11])),(0,i.oLt)(t,"dragover",e[17](e[12])),(0,i.oLt)(t,"dragleave",e[17](e[13])),(0,i.oLt)(t,"drop",e[17](e[14]))],a=!0)},p(e,r){(!s||1&r[0])&&(0,i.Ljt)(n,"accept",e[0]),(!s||2&r[0])&&(n.multiple=e[1]),u&&u.p&&(!s||134217728&r[0])&&(0,i.kmG)(u,l,e,e[27],s?(0,i.u2N)(l,e[27],r,null):(0,i.VOJ)(e[27]),null),(!s||20&r[0]&&o!==(o=(e[4]?"":"dropzone")+" "+e[2]+" svelte-817dg2"))&&(0,i.Ljt)(t,"class",o),(!s||8&r[0])&&(0,i.Ljt)(t,"style",e[3])},i(e){s||((0,i.Ui)(d,e),s=!0)},o(e){(0,i.etI)(d,e),s=!1},d(n){n&&(0,i.ogt)(t),e[29](null),d&&d.d(n),e[30](null),a=!1,(0,i.j7q)(c)}}}function M(e){e.stopPropagation()}function A(e,t,n){let{$$slots:r={},$$scope:o}=t,{accept:s}=t,{disabled:a=!1}=t,{getFilesFromEvent:l=c}=t,{maxSize:u=1/0}=t,{minSize:d=0}=t,{multiple:h=!0}=t,{preventDropOnDocument:p=!0}=t,{noClick:f=!1}=t,{noKeyboard:m=!1}=t,{noDrag:g=!1}=t,{noDragEventsBubbling:v=!1}=t,{containerClasses:y=""}=t,{containerStyles:k=""}=t,{disableDefaultStyles:M=!1}=t;const A=(0,I.x)();let O,R,L={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function D(){R&&(n(6,R.value=null,R),L.isFileDialogActive=!0,R.click())}function N(e){return a?null:e}function P(e){v&&e.stopPropagation()}let $=[];function U(e){O&&O.contains(e.target)||(e.preventDefault(),$=[])}function B(){L.isFileDialogActive&&setTimeout((()=>{if(R){const{files:e}=R;e.length||(L.isFileDialogActive=!1,A("filedialogcancel"))}}),300)}return(0,I.H3)((()=>{window.addEventListener("focus",B,!1),p&&(document.addEventListener("dragover",C,!1),document.addEventListener("drop",U,!1))})),(0,I.ev)((()=>{window.removeEventListener("focus",B,!1),p&&(document.removeEventListener("dragover",C),document.removeEventListener("drop",U))})),e.$$set=e=>{"accept"in e&&n(0,s=e.accept),"disabled"in e&&n(18,a=e.disabled),"getFilesFromEvent"in e&&n(19,l=e.getFilesFromEvent),"maxSize"in e&&n(20,u=e.maxSize),"minSize"in e&&n(21,d=e.minSize),"multiple"in e&&n(1,h=e.multiple),"preventDropOnDocument"in e&&n(22,p=e.preventDropOnDocument),"noClick"in e&&n(23,f=e.noClick),"noKeyboard"in e&&n(24,m=e.noKeyboard),"noDrag"in e&&n(25,g=e.noDrag),"noDragEventsBubbling"in e&&n(26,v=e.noDragEventsBubbling),"containerClasses"in e&&n(2,y=e.containerClasses),"containerStyles"in e&&n(3,k=e.containerStyles),"disableDefaultStyles"in e&&n(4,M=e.disableDefaultStyles),"$$scope"in e&&n(27,o=e.$$scope)},[s,h,y,k,M,O,R,function(e){O&&O.isEqualNode(e.target)&&(32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),D()))},function(){L.isFocused=!0},function(){L.isFocused=!1},function(){f||(function(e=window.navigator.userAgent){return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?setTimeout(D,0):D())},function(e){e.preventDefault(),P(e),$=[...$,e.target],x(e)&&Promise.resolve(l(e)).then((t=>{T(e)&&!v||(L.draggedFiles=t,L.isDragActive=!0,A("dragenter",{dragEvent:e}))}))},function(e){if(e.preventDefault(),P(e),e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch{}return x(e)&&A("dragover",{dragEvent:e}),!1},function(e){e.preventDefault(),P(e);const t=$.filter((e=>O&&O.contains(e))),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),$=t,t.length>0||(L.isDragActive=!1,L.draggedFiles=[],x(e)&&A("dragleave",{dragEvent:e}))},function(e){e.preventDefault(),P(e),$=[],x(e)&&Promise.resolve(l(e)).then((t=>{if(T(e)&&!v)return;const n=[],i=[];t.forEach((e=>{const[t,r]=function(e,t){const n="application/x-moz-file"===e.type||function(e,t){if(e&&t){const n=Array.isArray(t)?t:t.split(","),i=e.name||"",r=(e.type||"").toLowerCase(),o=r.replace(/\/.*$/,"");return n.some((e=>{const t=e.trim().toLowerCase();return"."===t.charAt(0)?i.toLowerCase().endsWith(t):t.endsWith("/*")?o===t.replace(/\/.*$/,""):r===t}))}return!0}(e,t);return[n,n?null:b(t)]}(e,s),[o,a]=function(e,t,n){if(_(e.size))if(_(t)&&_(n)){if(e.size>n)return[!1,E(n)];if(e.size<t)return[!1,S(t)]}else{if(_(t)&&e.size<t)return[!1,S(t)];if(_(n)&&e.size>n)return[!1,E(n)]}return[!0,null]}(e,d,u);if(t&&o)n.push(e);else{const t=[r,a].filter((e=>e));i.push({file:e,errors:t})}})),!h&&n.length>1&&(n.forEach((e=>{i.push({file:e,errors:[w]})})),n.splice(0)),L.acceptedFiles=n,L.fileRejections=i,A("drop",{acceptedFiles:n,fileRejections:i,event:e}),i.length>0&&A("droprejected",{fileRejections:i,event:e}),n.length>0&&A("dropaccepted",{acceptedFiles:n,event:e})})),L.isFileDialogActive=!1,L.isDragActive=!1,L.draggedFiles=[],L.acceptedFiles=[],L.fileRejections=[]},N,function(e){return m?null:N(e)},function(e){return g?null:N(e)},a,l,u,d,p,f,m,g,v,o,r,function(e){i.VnY[e?"unshift":"push"]((()=>{R=e,n(6,R)}))},function(e){i.VnY[e?"unshift":"push"]((()=>{O=e,n(5,O)}))}]}class O extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,A,k,i.N8,{accept:0,disabled:18,getFilesFromEvent:19,maxSize:20,minSize:21,multiple:1,preventDropOnDocument:22,noClick:23,noKeyboard:24,noDrag:25,noDragEventsBubbling:26,containerClasses:2,containerStyles:3,disableDefaultStyles:4},null,[-1,-1])}}const R=O},49413:(e,t,n)=>{"use strict";n.d(t,{O:()=>a});var i=n(24234);function r(e){let t;return{c(){t=(0,i.bGB)("div"),(0,i.Ljt)(t,"class","skeleton svelte-cjmcab"),(0,i.czc)(t,"height",e[1]),(0,i.czc)(t,"width",e[0]),(0,i.czc)(t,"border-radius",e[2]),(0,i.czc)(t,"--baseColor",e[3]),(0,i.czc)(t,"--highlightColor",e[4]),(0,i.czc)(t,"--animationLength",e[5])},m(e,n){(0,i.$Tr)(e,t,n)},p(e,[n]){2&n&&(0,i.czc)(t,"height",e[1]),1&n&&(0,i.czc)(t,"width",e[0]),4&n&&(0,i.czc)(t,"border-radius",e[2]),8&n&&(0,i.czc)(t,"--baseColor",e[3]),16&n&&(0,i.czc)(t,"--highlightColor",e[4]),32&n&&(0,i.czc)(t,"--animationLength",e[5])},i:i.ZTd,o:i.ZTd,d(e){e&&(0,i.ogt)(t)}}}function o(e,t,n){let{width:i="100%"}=t,{height:r="25px"}=t,{borderRadius:o="4px"}=t,{baseColor:s="rgb(238, 238, 238)"}=t,{highlightColor:a="rgb(245, 245, 245)"}=t,{animationLength:c="1.2s"}=t;return e.$$set=e=>{"width"in e&&n(0,i=e.width),"height"in e&&n(1,r=e.height),"borderRadius"in e&&n(2,o=e.borderRadius),"baseColor"in e&&n(3,s=e.baseColor),"highlightColor"in e&&n(4,a=e.highlightColor),"animationLength"in e&&n(5,c=e.animationLength)},[i,r,o,s,a,c]}class s extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,o,r,i.N8,{width:0,height:1,borderRadius:2,baseColor:3,highlightColor:4,animationLength:5})}}const a=s},66715:(e,t,n)=>{"use strict";n.d(t,{sz:()=>F,Ix:()=>w,Vy:()=>r});var i=n(48261);const r=function(e=[]){const t=(0,i.fZ)(e),{set:n,update:r,subscribe:s}=t;let a={duration:3e3,placement:"bottom-right",type:"info",theme:"dark"};function c(e){const{duration:n=3e3,placement:o="bottom-right",type:s="info",theme:c="dark",...l}={...a,...e},u=Date.now(),d={...l,uid:u,placement:o,type:s,theme:c,duration:n,remove:()=>{r((e=>e.filter((e=>e.uid!==u))))},update:e=>{delete e.uid;const n=(0,i.U2)(t)?.findIndex((e=>e?.uid===u));n>-1&&r((t=>[...t.slice(0,n),{...t[n],...e},...t.slice(n+1)]))}};return r((e=>[...e,d])),n>0&&setTimeout((()=>{d.remove(),"function"==typeof d.onRemove&&d.onRemove()}),n),d}return{subscribe:s,add:c,success:o("success",c),info:o("info",c),error:o("error",c),warning:o("warning",c),clearAll:function(){n([])},clearLast:function(){r((e=>e.slice(0,e.length-1)))},getById:function(e){return(0,i.U2)(t)?.find((t=>t?.uid===e))},setDefaults:function(e){a={...a,...e}}}}([]);function o(e,t){return function(){return"object"==typeof arguments[0]?t({...arguments[0],type:e}):"string"==typeof arguments[0]&&"string"==typeof arguments[1]?t({...arguments[2]||{},type:e,title:arguments[0],description:arguments[1]}):"string"==typeof arguments[0]?t({...arguments[1]||{},type:e,description:arguments[0]}):void 0}}var s=n(24234),a=n(26318),c=n(68568),l=n(44300);function u(e,{from:t,to:n},i={}){const r=getComputedStyle(e),o="none"===r.transform?"":r.transform,[a,c]=r.transformOrigin.split(" ").map(parseFloat),u=t.left+t.width*a/n.width-(n.left+a),d=t.top+t.height*c/n.height-(n.top+c),{delay:h=0,duration:p=(e=>120*Math.sqrt(e)),easing:f=l._e}=i;return{delay:h,duration:(0,s.sBU)(p)?p(Math.sqrt(u*u+d*d)):p,easing:f,css:(e,i)=>{const r=i*u,s=i*d,a=e+i*t.width/n.width,c=e+i*t.height/n.height;return`transform: ${o} translate(${r}px, ${s}px) scale(${a}, ${c});`}}}function d(e,t,n){const i=e.slice();return i[1]=t[n],i}function h(e,t,n){const i=e.slice();return i[14]=t[n],i}const p=e=>({data:4&e}),f=e=>({data:e[14]});function m(e){let t;const n=e[10].default,i=(0,s.nuO)(n,e,e[9],f);return{c(){i&&i.c()},m(e,n){i&&i.m(e,n),t=!0},p(e,r){i&&i.p&&(!t||516&r)&&(0,s.kmG)(i,n,e,e[9],t?(0,s.u2N)(n,e[9],r,p):(0,s.VOJ)(e[9]),f)},i(e){t||((0,s.Ui)(i,e),t=!0)},o(e){(0,s.etI)(i,e),t=!1},d(e){i&&i.d(e)}}}function g(e){let t,n,i;var r=e[14].component;function o(e){return{props:{data:e[14]}}}return r&&(t=new r(o(e))),{c(){t&&(0,s.YCL)(t.$$.fragment),n=(0,s.cSb)()},m(e,r){t&&(0,s.yef)(t,e,r),(0,s.$Tr)(e,n,r),i=!0},p(e,i){const a={};if(4&i&&(a.data=e[14]),r!==(r=e[14].component)){if(t){(0,s.dvw)();const e=t;(0,s.etI)(e.$$.fragment,1,0,(()=>{(0,s.vpE)(e,1)})),(0,s.gbL)()}r?(t=new r(o(e)),(0,s.YCL)(t.$$.fragment),(0,s.Ui)(t.$$.fragment,1),(0,s.yef)(t,n.parentNode,n)):t=null}else r&&t.$set(a)},i(e){i||(t&&(0,s.Ui)(t.$$.fragment,e),i=!0)},o(e){t&&(0,s.etI)(t.$$.fragment,e),i=!1},d(e){e&&(0,s.ogt)(n),t&&(0,s.vpE)(t,e)}}}function v(e,t){let n,i,r,o,c,l,d,h,p=s.ZTd;const f=[g,m],v=[];function y(e,t){return e[14].component?0:1}return i=y(t),r=v[i]=f[i](t),{key:e,first:null,c(){n=(0,s.bGB)("li"),r.c(),o=(0,s.DhX)(),(0,s.Ljt)(n,"class","svelte-1rg6zyw"),this.first=n},m(e,t){(0,s.$Tr)(e,n,t),v[i].m(n,null),(0,s.R3I)(n,o),h=!0},p(e,a){let c=i;i=y(t=e),i===c?v[i].p(t,a):((0,s.dvw)(),(0,s.etI)(v[c],1,1,(()=>{v[c]=null})),(0,s.gbL)(),r=v[i],r?r.p(t,a):(r=v[i]=f[i](t),r.c()),(0,s.Ui)(r,1),r.m(n,o))},r(){d=n.getBoundingClientRect()},f(){(0,s.uYD)(n),p(),(0,s.orW)(n,d)},a(){p(),p=(0,s.wVP)(n,d,u,{})},i(e){h||((0,s.Ui)(r),(0,s.P$F)((()=>{l&&l.end(1),c=(0,s.HCz)(n,a.U1,{duration:500}),c.start()})),h=!0)},o(e){(0,s.etI)(r),c&&c.invalidate(),l=(0,s.eZl)(n,a.Zw,{y:t[4][t[14].placement],duration:1e3}),h=!1},d(e){e&&(0,s.ogt)(n),v[i].d(),e&&l&&l.end()}}}function y(e){let t,n,i,r,o,a=[],c=new Map;function l(...t){return e[11](e[1],...t)}let u=e[2].filter(l).reverse();const d=e=>e[14].uid;for(let t=0;t<u.length;t+=1){let n=h(e,u,t),i=d(n);c.set(i,a[t]=v(i,n))}return{c(){t=(0,s.bGB)("div"),n=(0,s.bGB)("ul");for(let e=0;e<a.length;e+=1)a[e].c();i=(0,s.DhX)(),(0,s.Ljt)(n,"class","svelte-1rg6zyw"),(0,s.Ljt)(t,"class",r="toast-container "+e[1]+" svelte-1rg6zyw"),(0,s.czc)(t,"width",e[0])},m(e,r){(0,s.$Tr)(e,t,r),(0,s.R3I)(t,n);for(let e=0;e<a.length;e+=1)a[e].m(n,null);(0,s.R3I)(t,i),o=!0},p(i,r){if(e=i,540&r){u=e[2].filter(l).reverse(),(0,s.dvw)();for(let e=0;e<a.length;e+=1)a[e].r();a=(0,s.GQg)(a,r,d,1,e,u,c,n,s.g3Q,v,null,h);for(let e=0;e<a.length;e+=1)a[e].a();(0,s.gbL)()}(!o||1&r)&&(0,s.czc)(t,"width",e[0])},i(e){if(!o){for(let e=0;e<u.length;e+=1)(0,s.Ui)(a[e]);o=!0}},o(e){for(let e=0;e<a.length;e+=1)(0,s.etI)(a[e]);o=!1},d(e){e&&(0,s.ogt)(t);for(let e=0;e<a.length;e+=1)a[e].d()}}}function b(e){let t,n,i=e[3],r=[];for(let t=0;t<i.length;t+=1)r[t]=y(d(e,i,t));const o=e=>(0,s.etI)(r[e],1,1,(()=>{r[e]=null}));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=(0,s.cSb)()},m(e,i){for(let t=0;t<r.length;t+=1)r[t].m(e,i);(0,s.$Tr)(e,t,i),n=!0},p(e,[n]){if(541&n){let a;for(i=e[3],a=0;a<i.length;a+=1){const o=d(e,i,a);r[a]?(r[a].p(o,n),(0,s.Ui)(r[a],1)):(r[a]=y(o),r[a].c(),(0,s.Ui)(r[a],1),r[a].m(t.parentNode,t))}for((0,s.dvw)(),a=i.length;a<r.length;a+=1)o(a);(0,s.gbL)()}},i(e){if(!n){for(let e=0;e<i.length;e+=1)(0,s.Ui)(r[e]);n=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)(0,s.etI)(r[e]);n=!1},d(e){(0,s.RMB)(r,e),e&&(0,s.ogt)(t)}}}function E(e,t,n){let i;(0,s.FIv)(e,r,(e=>n(2,i=e)));let{$$slots:o={},$$scope:a}=t,{theme:l="dark"}=t,{placement:u="bottom-right"}=t,{type:d="info"}=t,{showProgress:h=!1}=t,{duration:p=3e3}=t,{width:f="320px"}=t;return(0,c.H3)((()=>{r.setDefaults({placement:u,showProgress:h,theme:l,duration:p,type:d})})),e.$$set=e=>{"theme"in e&&n(5,l=e.theme),"placement"in e&&n(1,u=e.placement),"type"in e&&n(6,d=e.type),"showProgress"in e&&n(7,h=e.showProgress),"duration"in e&&n(8,p=e.duration),"width"in e&&n(0,f=e.width),"$$scope"in e&&n(9,a=e.$$scope)},[f,u,i,["bottom-right","bottom-left","top-right","top-left","top-center","bottom-center","center-center"],{"bottom-right":400,"top-right":-400,"bottom-left":400,"top-left":-400,"bottom-center":400,"top-center":-400,"center-center":-800},l,d,h,p,a,o,(e,t)=>t.placement===e]}class S extends s.f_C{constructor(e){super(),(0,s.S1n)(this,e,E,b,s.N8,{theme:5,placement:1,type:6,showProgress:7,duration:8,width:0})}}const w=S;function _(e){return"[object Date]"===Object.prototype.toString.call(e)}function T(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map(((t,n)=>T(e[n],t)));return e=>n.map((t=>t(e)))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if(_(e)&&_(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),i={};return n.forEach((n=>{i[n]=T(e[n],t[n])})),e=>{const t={};return n.forEach((n=>{t[n]=i[n](e)})),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error(`Cannot interpolate ${n} values`)}const x=e=>({}),C=e=>({}),I=e=>({}),k=e=>({}),M=e=>({}),A=e=>({});function O(e){let t,n,i;return{c(){t=(0,s.bi5)("svg"),n=(0,s.bi5)("path"),i=(0,s.bi5)("path"),(0,s.Ljt)(n,"d","M10,1c-5,0-9,4-9,9s4,9,9,9s9-4,9-9S15,1,10,1z M9.2,5h1.5v7H9.2V5z M10,16c-0.6,0-1-0.4-1-1s0.4-1,1-1\ts1,0.4,1,1S10.6,16,10,16z"),(0,s.Ljt)(i,"d","M9.2,5h1.5v7H9.2V5z M10,16c-0.6,0-1-0.4-1-1s0.4-1,1-1s1,0.4,1,1S10.6,16,10,16z"),(0,s.Ljt)(i,"data-icon-path","inner-path"),(0,s.Ljt)(i,"opacity","0"),(0,s.Ljt)(t,"class","st-toast-icon svelte-is9c7e"),(0,s.Ljt)(t,"xmlns","http://www.w3.org/2000/svg"),(0,s.Ljt)(t,"width","20"),(0,s.Ljt)(t,"height","20"),(0,s.Ljt)(t,"viewBox","0 0 20 20"),(0,s.Ljt)(t,"aria-hidden","true")},m(e,r){(0,s.$Tr)(e,t,r),(0,s.R3I)(t,n),(0,s.R3I)(t,i)},d(e){e&&(0,s.ogt)(t)}}}function R(e){let t,n,i;return{c(){t=(0,s.bi5)("svg"),n=(0,s.bi5)("path"),i=(0,s.bi5)("path"),(0,s.Ljt)(n,"d","M10,1c-5,0-9,4-9,9s4,9,9,9s9-4,9-9S15,1,10,1z M13.5,14.5l-8-8l1-1l8,8L13.5,14.5z"),(0,s.Ljt)(i,"d","M13.5,14.5l-8-8l1-1l8,8L13.5,14.5z"),(0,s.Ljt)(i,"data-icon-path","inner-path"),(0,s.Ljt)(i,"opacity","0"),(0,s.Ljt)(t,"class","st-toast-icon svelte-is9c7e"),(0,s.Ljt)(t,"xmlns","http://www.w3.org/2000/svg"),(0,s.Ljt)(t,"width","20"),(0,s.Ljt)(t,"height","20"),(0,s.Ljt)(t,"viewBox","0 0 20 20"),(0,s.Ljt)(t,"aria-hidden","true")},m(e,r){(0,s.$Tr)(e,t,r),(0,s.R3I)(t,n),(0,s.R3I)(t,i)},d(e){e&&(0,s.ogt)(t)}}}function L(e){let t,n;return{c(){t=(0,s.bi5)("svg"),n=(0,s.bi5)("path"),(0,s.Ljt)(n,"d","M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Zm0,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,16,7Zm4,17.12H12V21.88h2.88V15.12H13V12.88h4.13v9H20Z"),(0,s.Ljt)(t,"class","st-toast-icon svelte-is9c7e"),(0,s.Ljt)(t,"xmlns","http://www.w3.org/2000/svg"),(0,s.Ljt)(t,"width","20"),(0,s.Ljt)(t,"height","20"),(0,s.Ljt)(t,"viewBox","0 0 32 32"),(0,s.Ljt)(t,"aria-hidden","true")},m(e,i){(0,s.$Tr)(e,t,i),(0,s.R3I)(t,n)},d(e){e&&(0,s.ogt)(t)}}}function D(e){let t,n,i;return{c(){t=(0,s.bi5)("svg"),n=(0,s.bi5)("path"),i=(0,s.bi5)("path"),(0,s.Ljt)(n,"d","M10,1c-4.9,0-9,4.1-9,9s4.1,9,9,9s9-4,9-9S15,1,10,1z M8.7,13.5l-3.2-3.2l1-1l2.2,2.2l4.8-4.8l1,1L8.7,13.5z"),(0,s.Ljt)(i,"fill","none"),(0,s.Ljt)(i,"d","M8.7,13.5l-3.2-3.2l1-1l2.2,2.2l4.8-4.8l1,1L8.7,13.5z"),(0,s.Ljt)(i,"data-icon-path","inner-path"),(0,s.Ljt)(i,"opacity","0"),(0,s.Ljt)(t,"class","st-toast-icon svelte-is9c7e"),(0,s.Ljt)(t,"xmlns","http://www.w3.org/2000/svg"),(0,s.Ljt)(t,"width","20"),(0,s.Ljt)(t,"height","20"),(0,s.Ljt)(t,"viewBox","0 0 20 20"),(0,s.Ljt)(t,"aria-hidden","true")},m(e,r){(0,s.$Tr)(e,t,r),(0,s.R3I)(t,n),(0,s.R3I)(t,i)},d(e){e&&(0,s.ogt)(t)}}}function N(e){let t,n,i=e[1].title+"";return{c(){t=(0,s.bGB)("h3"),n=(0,s.fLW)(i),(0,s.Ljt)(t,"class","st-toast-title svelte-is9c7e")},m(e,i){(0,s.$Tr)(e,t,i),(0,s.R3I)(t,n)},p(e,t){2&t&&i!==(i=e[1].title+"")&&(0,s.rTO)(n,i)},d(e){e&&(0,s.ogt)(t)}}}function P(e){let t;return{c(){t=(0,s.bGB)("progress"),(0,s.czc)(t,"height",e[1].duration>0?"4px":0),t.value=e[2],(0,s.Ljt)(t,"class","svelte-is9c7e")},m(e,n){(0,s.$Tr)(e,t,n)},p(e,n){2&n&&(0,s.czc)(t,"height",e[1].duration>0?"4px":0),4&n&&(t.value=e[2])},d(e){e&&(0,s.ogt)(t)}}}function $(e){let t,n,i,r,o,a,c,l,u,d,h,p,f,m,g,v=e[1].description+"";const y=e[7].icon,b=(0,s.nuO)(y,e,e[6],A),E=b||function(e){let t;function n(e,t){return"success"===e[1].type?D:"info"===e[1].type?L:"error"===e[1].type?R:O}let i=n(e),r=i(e);return{c(){r.c(),t=(0,s.cSb)()},m(e,n){r.m(e,n),(0,s.$Tr)(e,t,n)},p(e,o){i!==(i=n(e))&&(r.d(1),r=i(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){r.d(e),e&&(0,s.ogt)(t)}}}(e);let S=e[1].title&&N(e);const w=e[7].extra,_=(0,s.nuO)(w,e,e[6],k),T=e[7]["close-icon"],$=(0,s.nuO)(T,e,e[6],C),U=$||function(e){let t,n;return{c(){t=(0,s.bi5)("svg"),n=(0,s.bi5)("path"),(0,s.Ljt)(n,"d","M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"),(0,s.Ljt)(t,"xmlns","http://www.w3.org/2000/svg"),(0,s.Ljt)(t,"class","bx--toast-notification__close-icon svelte-is9c7e"),(0,s.Ljt)(t,"width","20"),(0,s.Ljt)(t,"height","20"),(0,s.Ljt)(t,"viewBox","0 0 32 32"),(0,s.Ljt)(t,"aria-hidden","true")},m(e,i){(0,s.$Tr)(e,t,i),(0,s.R3I)(t,n)},p:s.ZTd,d(e){e&&(0,s.ogt)(t)}}}();let B=e[1].showProgress&&P(e);return{c(){t=(0,s.bGB)("div"),E&&E.c(),n=(0,s.DhX)(),i=(0,s.bGB)("div"),S&&S.c(),r=(0,s.DhX)(),o=(0,s.bGB)("p"),a=(0,s.fLW)(v),c=(0,s.DhX)(),l=(0,s.bGB)("div"),_&&_.c(),u=(0,s.DhX)(),d=(0,s.bGB)("button"),U&&U.c(),h=(0,s.DhX)(),B&&B.c(),(0,s.Ljt)(o,"class","st-toast-description svelte-is9c7e"),(0,s.Ljt)(l,"class","st-toast-extra"),(0,s.Ljt)(i,"class","st-toast-details svelte-is9c7e"),(0,s.Ljt)(d,"class","st-toast-close-btn svelte-is9c7e"),(0,s.Ljt)(d,"type","button"),(0,s.Ljt)(d,"aria-label","close"),(0,s.Ljt)(t,"class",p="st-toast flat "+(e[1].theme||e[0])+" "+(e[1].type||"info")+" svelte-is9c7e"),(0,s.Ljt)(t,"role","alert"),(0,s.Ljt)(t,"aria-live","assertive"),(0,s.Ljt)(t,"aria-atomic","true")},m(p,v){(0,s.$Tr)(p,t,v),E&&E.m(t,null),(0,s.R3I)(t,n),(0,s.R3I)(t,i),S&&S.m(i,null),(0,s.R3I)(i,r),(0,s.R3I)(i,o),(0,s.R3I)(o,a),(0,s.R3I)(i,c),(0,s.R3I)(i,l),_&&_.m(l,null),(0,s.R3I)(t,u),(0,s.R3I)(t,d),U&&U.m(d,null),(0,s.R3I)(t,h),B&&B.m(t,null),f=!0,m||(g=[(0,s.oLt)(d,"click",e[4]),(0,s.oLt)(t,"click",e[5])],m=!0)},p(e,[n]){b?b.p&&(!f||64&n)&&(0,s.kmG)(b,y,e,e[6],f?(0,s.u2N)(y,e[6],n,M):(0,s.VOJ)(e[6]),A):E&&E.p&&(!f||2&n)&&E.p(e,f?n:-1),e[1].title?S?S.p(e,n):(S=N(e),S.c(),S.m(i,r)):S&&(S.d(1),S=null),(!f||2&n)&&v!==(v=e[1].description+"")&&(0,s.rTO)(a,v),_&&_.p&&(!f||64&n)&&(0,s.kmG)(_,w,e,e[6],f?(0,s.u2N)(w,e[6],n,I):(0,s.VOJ)(e[6]),k),$&&$.p&&(!f||64&n)&&(0,s.kmG)($,T,e,e[6],f?(0,s.u2N)(T,e[6],n,x):(0,s.VOJ)(e[6]),C),e[1].showProgress?B?B.p(e,n):(B=P(e),B.c(),B.m(t,null)):B&&(B.d(1),B=null),(!f||3&n&&p!==(p="st-toast flat "+(e[1].theme||e[0])+" "+(e[1].type||"info")+" svelte-is9c7e"))&&(0,s.Ljt)(t,"class",p)},i(e){f||((0,s.Ui)(E,e),(0,s.Ui)(_,e),(0,s.Ui)(U,e),f=!0)},o(e){(0,s.etI)(E,e),(0,s.etI)(_,e),(0,s.etI)(U,e),f=!1},d(e){e&&(0,s.ogt)(t),E&&E.d(e),S&&S.d(),_&&_.d(e),U&&U.d(e),B&&B.d(),m=!1,(0,s.j7q)(g)}}}function U(e,t,n){let r,{$$slots:o={},$$scope:a}=t,{theme:u="light"}=t,{data:d={}}=t;const h=function(e,t={}){const n=(0,i.fZ)(e);let r,o=e;function a(i,a){if(null==e)return n.set(e=i),Promise.resolve();o=i;let c=r,u=!1,{delay:d=0,duration:h=400,easing:p=l.GE,interpolate:f=T}=(0,s.f0i)((0,s.f0i)({},t),a);if(0===h)return c&&(c.abort(),c=null),n.set(e=o),Promise.resolve();const m=(0,s.zOc)()+d;let g;return r=(0,s.VXY)((t=>{if(t<m)return!0;u||(g=f(e,i),"function"==typeof h&&(h=h(e,i)),u=!0),c&&(c.abort(),c=null);const r=t-m;return r>h?(n.set(e=i),!1):(n.set(e=g(p(r/h))),!0)})),r.promise}return{set:a,update:(t,n)=>a(t(o,e),n),subscribe:n.subscribe}}(1,{duration:d.duration,easing:l.GE});return(0,s.FIv)(e,h,(e=>n(2,r=e))),(0,c.H3)((()=>{h.set(0,{duration:d.duration})})),e.$$set=e=>{"theme"in e&&n(0,u=e.theme),"data"in e&&n(1,d=e.data),"$$scope"in e&&n(6,a=e.$$scope)},[u,d,r,h,e=>{e.stopPropagation(),d.remove(),"function"==typeof d.onRemove&&d.onRemove()},()=>{"function"==typeof d.onClick&&d.onClick()},a,o]}class B extends s.f_C{constructor(e){super(),(0,s.S1n)(this,e,U,$,s.N8,{theme:0,data:1})}}const F=B},28281:(e,t,n)=>{"use strict";var i=n(43368);e.exports=o,o.wrap=i;var r=[].slice;function o(){var e=[],t={run:function(){var t=-1,n=r.call(arguments,0,-1),o=arguments[arguments.length-1];if("function"!=typeof o)throw new Error("Expected function as last argument, not "+o);function s(a){var c=e[++t],l=r.call(arguments,0),u=l.slice(1),d=n.length,h=-1;if(a)o(a);else{for(;++h<d;)null!==u[h]&&void 0!==u[h]||(u[h]=n[h]);n=u,c?i(c,s).apply(null,n):o.apply(null,[null].concat(n))}}s.apply(null,[null].concat(n))},use:function(n){if("function"!=typeof n)throw new Error("Expected `fn` to be a function, not "+n);return e.push(n),t}};return t}},43368:e=>{"use strict";var t=[].slice;e.exports=function(e,n){var i;return function(){var n,s=t.call(arguments,0),a=e.length>s.length;a&&s.push(r);try{n=e.apply(null,s)}catch(e){if(a&&i)throw e;return r(e)}a||(n&&"function"==typeof n.then?n.then(o,r):n instanceof Error?r(n):o(n))};function r(){i||(i=!0,n.apply(null,arguments))}function o(e){r(null,e)}}},70655:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>r,pi:()=>o,mG:()=>s,Jh:()=>a,XA:()=>c,fl:()=>u});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function s(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function a(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}Object.create,Object.create},85067:(e,t,n)=>{"use strict";var i=n(47873),r=RegExp(Object.keys(i).map((function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")})).join("|"),"g");function o(e){return i[e]}e.exports=function(e){return e.replace(r,o)}},18835:(e,t,n)=>{"use strict";var i=n(18869),r=n(48738),o=n(94470),s=n(33310),a=n(28281),c=n(10939);e.exports=function e(){var t,n=[],r=a(),y={},b=-1;return E.data=function(e,n){return"string"==typeof e?2===arguments.length?(m("data",t),y[e]=n,E):u.call(y,e)&&y[e]||null:e?(m("data",t),y=e,E):y},E.freeze=S,E.attachers=n,E.use=function(e){var i;if(m("use",t),null==e);else if("function"==typeof e)u.apply(null,arguments);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?c(e):r(e)}return i&&(y.settings=o(y.settings||{},i)),E;function r(e){c(e.plugins),e.settings&&(i=o(i||{},e.settings))}function a(e){if("function"==typeof e)u(e);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?u.apply(null,e):r(e)}}function c(e){var t=-1;if(null==e);else{if("object"!=typeof e||!("length"in e))throw new Error("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;)a(e[t])}}function u(e,t){var i=w(e);i?(s(i[1])&&s(t)&&(t=o(!0,i[1],t)),i[1]=t):n.push(l.call(arguments))}},E.parse=function(e){var t,n=c(e);return S(),p("parse",t=E.Parser),h(t,"parse")?new t(String(n),n).parse():t(String(n),n)},E.stringify=function(e,t){var n,i=c(t);return S(),f("stringify",n=E.Compiler),g(e),h(n,"compile")?new n(e,i).compile():n(e,i)},E.run=_,E.runSync=function(e,t){var n,r;return _(e,t,(function(e,t){r=!0,n=t,i(e)})),v("runSync","run",r),n},E.process=T,E.processSync=function(e){var t,n;return S(),p("processSync",E.Parser),f("processSync",E.Compiler),T(t=c(e),(function(e){n=!0,i(e)})),v("processSync","process",n),t},E;function E(){for(var t=e(),i=-1;++i<n.length;)t.use.apply(null,n[i]);return t.data(o(!0,{},y)),t}function S(){var e,i;if(t)return E;for(;++b<n.length;)!1!==(e=n[b])[1]&&(!0===e[1]&&(e[1]=void 0),"function"==typeof(i=e[0].apply(E,e.slice(1)))&&r.use(i));return t=!0,b=1/0,E}function w(e){for(var t=-1;++t<n.length;)if(n[t][0]===e)return n[t]}function _(e,t,n){if(g(e),S(),n||"function"!=typeof t||(n=t,t=null),!n)return new Promise(i);function i(i,o){r.run(e,c(t),(function(t,r,s){r=r||e,t?o(t):i?i(r):n(null,r,s)}))}i(null,n)}function T(e,t){if(S(),p("process",E.Parser),f("process",E.Compiler),!t)return new Promise(n);function n(n,i){var r=c(e);d.run(E,{file:r},(function(e){e?i(e):n?n(r):t(null,r)}))}n(null,t)}}().freeze();var l=[].slice,u={}.hasOwnProperty,d=a().use((function(e,t){t.tree=e.parse(t.file)})).use((function(e,t,n){e.run(t.tree,t.file,(function(e,i,r){e?n(e):(t.tree=i,t.file=r,n())}))})).use((function(e,t){var n=e.stringify(t.tree,t.file);null==n||("string"==typeof n||r(n)?("value"in t.file&&(t.file.value=n),t.file.contents=n):t.file.result=n)}));function h(e,t){return"function"==typeof e&&e.prototype&&(function(e){var t;for(t in e)return!0;return!1}(e.prototype)||t in e.prototype)}function p(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Parser`")}function f(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Compiler`")}function m(e,t){if(t)throw new Error("Cannot invoke `"+e+"` on a frozen processor.\nCreate a new processor first, by invoking it: use `processor()` instead of `processor`.")}function g(e){if(!e||"string"!=typeof e.type)throw new Error("Expected node, got `"+e+"`")}function v(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}},50914:e=>{"use strict";e.exports=function(e,t,n){var i;return null!=n||"object"==typeof t&&!Array.isArray(t)||(n=t,t={}),i=Object.assign({type:String(e)},t),Array.isArray(n)?i.children=n:null!=n&&(i.value=String(n)),i}},61744:e=>{"use strict";e.exports=function(e){return!(e&&e.position&&e.position.start&&e.position.start.line&&e.position.start.column&&e.position.end&&e.position.end.line&&e.position.end.column)}},48145:e=>{"use strict";function t(){return!0}e.exports=function e(n){if(null==n)return t;if("string"==typeof n)return function(e){return function(t){return Boolean(t&&t.type===e)}}(n);if("object"==typeof n)return"length"in n?function(t){for(var n=[],i=-1;++i<t.length;)n[i]=e(t[i]);return function(){for(var e=-1;++e<n.length;)if(n[e].apply(this,arguments))return!0;return!1}}(n):function(e){return function(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(n);if("function"==typeof n)return n;throw new Error("Expected function, string, or object as test")}},77361:e=>{"use strict";var t=r("start"),n=r("end");function i(e){return{start:t(e),end:n(e)}}function r(e){return t.displayName=e,t;function t(t){var n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:isNaN(n.offset)?null:n.offset}}}e.exports=i,i.start=t,i.end=n},75432:e=>{"use strict";var t={}.hasOwnProperty;function n(e){return e&&"object"==typeof e||(e={}),r(e.line)+":"+r(e.column)}function i(e){return e&&"object"==typeof e||(e={}),n(e.start)+"-"+n(e.end)}function r(e){return e&&"number"==typeof e?e:1}e.exports=function(e){return e&&"object"==typeof e?t.call(e,"position")||t.call(e,"type")?i(e.position):t.call(e,"start")||t.call(e,"end")?i(e):t.call(e,"line")||t.call(e,"column")?n(e):"":""}},66750:e=>{e.exports=function(e){return e}},99294:(e,t,n)=>{"use strict";e.exports=a;var i=n(48145),r=n(66750),o="skip",s=!1;function a(e,t,n,a){var c,l;"function"==typeof t&&"function"!=typeof n&&(a=n,n=t,t=null),l=i(t),c=a?-1:1,function e(i,u,d){var h,p="object"==typeof i&&null!==i?i:{};return"string"==typeof p.type&&(h="string"==typeof p.tagName?p.tagName:"string"==typeof p.name?p.name:void 0,f.displayName="node ("+r(p.type+(h?"<"+h+">":""))+")"),f;function f(){var r,h,p=d.concat(i),f=[];if((!t||l(i,u,d[d.length-1]||null))&&(f=function(e){return null!==e&&"object"==typeof e&&"length"in e?e:"number"==typeof e?[true,e]:[e]}(n(i,d)),f[0]===s))return f;if(i.children&&f[0]!==o)for(h=(a?i.children.length:-1)+c;h>-1&&h<i.children.length;){if((r=e(i.children[h],h,p)())[0]===s)return r;h="number"==typeof r[1]?r[1]:h+c}return f}}(e,null,[])()}a.CONTINUE=!0,a.SKIP=o,a.EXIT=s},62854:(e,t,n)=>{"use strict";e.exports=a;var i=n(99294),r=i.CONTINUE,o=i.SKIP,s=i.EXIT;function a(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),i(e,t,(function(e,t){var i=t[t.length-1],r=i?i.children.indexOf(e):null;return n(e,r,i)}),r)}a.CONTINUE=r,a.SKIP=o,a.EXIT=s},52511:function(e,t,n){var i;e=n.nmd(e),function(r){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var s,a=2147483647,c=36,l=/^xn--/,u=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(e){throw RangeError(h[e])}function g(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function v(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+g((e=e.replace(d,".")).split("."),t).join(".")}function y(e){for(var t,n,i=[],r=0,o=e.length;r<o;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function b(e){return g(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+f(e)})).join("")}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function S(e,t,n){var i=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;i+=c)e=p(e/35);return p(i+36*e/(e+38))}function w(e){var t,n,i,r,o,s,l,u,d,h,f,g=[],v=e.length,y=0,E=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&m("not-basic"),g.push(e.charCodeAt(i));for(r=n>0?n+1:0;r<v;){for(o=y,s=1,l=c;r>=v&&m("invalid-input"),((u=(f=e.charCodeAt(r++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:c)>=c||u>p((a-y)/s))&&m("overflow"),y+=u*s,!(u<(d=l<=w?1:l>=w+26?26:l-w));l+=c)s>p(a/(h=c-d))&&m("overflow"),s*=h;w=S(y-o,t=g.length+1,0==o),p(y/t)>a-E&&m("overflow"),E+=p(y/t),y%=t,g.splice(y++,0,E)}return b(g)}function _(e){var t,n,i,r,o,s,l,u,d,h,g,v,b,w,_,T=[];for(v=(e=y(e)).length,t=128,n=0,o=72,s=0;s<v;++s)(g=e[s])<128&&T.push(f(g));for(i=r=T.length,r&&T.push("-");i<v;){for(l=a,s=0;s<v;++s)(g=e[s])>=t&&g<l&&(l=g);for(l-t>p((a-n)/(b=i+1))&&m("overflow"),n+=(l-t)*b,t=l,s=0;s<v;++s)if((g=e[s])<t&&++n>a&&m("overflow"),g==t){for(u=n,d=c;!(u<(h=d<=o?1:d>=o+26?26:d-o));d+=c)_=u-h,w=c-h,T.push(f(E(h+_%w,0))),u=p(_/w);T.push(f(E(u,0))),o=S(n,b,i==r),n=0,++i}++n,++t}return T.join("")}s={version:"1.3.2",ucs2:{decode:y,encode:b},decode:w,encode:_,toASCII:function(e){return v(e,(function(e){return u.test(e)?"xn--"+_(e):e}))},toUnicode:function(e){return v(e,(function(e){return l.test(e)?w(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,n,t,e))||(e.exports=i)}()},8575:(e,t,n)=>{"use strict";var i=n(52511),r=n(62502);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),d=["%","/","?",";","#"].concat(u),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(17673);o.prototype.parse=function(e,t,n){if(!r.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",l=e.split(a);l[0]=l[0].replace(/\\/g,"/");var b=e=l.join(a);if(b=b.trim(),!n&&1===e.split("#").length){var E=c.exec(b);if(E)return this.path=b,this.href=b,this.pathname=E[1],E[2]?(this.search=E[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var S=s.exec(b);if(S){var w=(S=S[0]).toLowerCase();this.protocol=w,b=b.substr(S.length)}if(n||S||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var _="//"===b.substr(0,2);!_||S&&g[S]||(b=b.substr(2),this.slashes=!0)}if(!g[S]&&(_||S&&!v[S])){for(var T,x,C=-1,I=0;I<h.length;I++)-1!==(k=b.indexOf(h[I]))&&(-1===C||k<C)&&(C=k);for(-1!==(x=-1===C?b.lastIndexOf("@"):b.lastIndexOf("@",C))&&(T=b.slice(0,x),b=b.slice(x+1),this.auth=decodeURIComponent(T)),C=-1,I=0;I<d.length;I++){var k;-1!==(k=b.indexOf(d[I]))&&(-1===C||k<C)&&(C=k)}-1===C&&(C=b.length),this.host=b.slice(0,C),b=b.slice(C),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var A=this.hostname.split(/\./),O=(I=0,A.length);I<O;I++){var R=A[I];if(R&&!R.match(p)){for(var L="",D=0,N=R.length;D<N;D++)R.charCodeAt(D)>127?L+="x":L+=R[D];if(!L.match(p)){var P=A.slice(0,I),$=A.slice(I+1),U=R.match(f);U&&(P.push(U[1]),$.unshift(U[2])),$.length&&(b="/"+$.join(".")+b),this.hostname=P.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=i.toASCII(this.hostname));var B=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+B,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[w])for(I=0,O=u.length;I<O;I++){var j=u[I];if(-1!==b.indexOf(j)){var H=encodeURIComponent(j);H===j&&(H=escape(j)),b=b.split(j).join(H)}}var K=b.indexOf("#");-1!==K&&(this.hash=b.substr(K),b=b.slice(0,K));var q=b.indexOf("?");if(-1!==q?(this.search=b.substr(q),this.query=b.substr(q+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,q)):t&&(this.search="",this.query={}),b&&(this.pathname=b),v[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var V=this.search||"";this.path=B+V}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+i},o.prototype.resolve=function(e){return this.resolveObject(function(e,t,n){if(e&&r.isObject(e)&&e instanceof o)return e;var i=new o;return i.parse(e,t,n),i}(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(r.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,i=Object.keys(this),s=0;s<i.length;s++){var a=i[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),l=0;l<c.length;l++){var u=c[l];"protocol"!==u&&(n[u]=e[u])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!v[e.protocol]){for(var d=Object.keys(e),h=0;h<d.length;h++){var p=d[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",y=n.search||"";n.path=m+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),E=e.host||e.pathname&&"/"===e.pathname.charAt(0),S=E||b||n.host&&e.pathname,w=S,_=n.pathname&&n.pathname.split("/")||[],T=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(T&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),S=S&&(""===f[0]||""===_[0])),E)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,_=f;else if(f.length)_||(_=[]),_.pop(),_=_.concat(f),n.search=e.search,n.query=e.query;else if(!r.isNullOrUndefined(e.search))return T&&(n.hostname=n.host=_.shift(),(M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=M.shift(),n.host=n.hostname=M.shift())),n.search=e.search,n.query=e.query,r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=_.slice(-1)[0],C=(n.host||e.host||_.length>1)&&("."===x||".."===x)||""===x,I=0,k=_.length;k>=0;k--)"."===(x=_[k])?_.splice(k,1):".."===x?(_.splice(k,1),I++):I&&(_.splice(k,1),I--);if(!S&&!w)for(;I--;I)_.unshift("..");!S||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),C&&"/"!==_.join("/").substr(-1)&&_.push("");var M,A=""===_[0]||_[0]&&"/"===_[0].charAt(0);return T&&(n.hostname=n.host=A?"":_.length?_.shift():"",(M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=M.shift(),n.host=n.hostname=M.shift())),(S=S||n.host&&_.length)&&!A&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},62502:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},94927:(e,t,n)=>{var i=n(25108);function r(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?i.trace(t):i.warn(t),n=!0}return e.apply(this,arguments)}}},14787:e=>{"use strict";e.exports=function(e){for(var t=String(e),n=[],i=/\r?\n|\r/g;i.exec(t);)n.push(i.lastIndex);return n.push(t.length+1),{toPoint:r,toPosition:r,toOffset:function(e){var t,i=e&&e.line,r=e&&e.column;return isNaN(i)||isNaN(r)||!(i-1 in n)||(t=(n[i-2]||0)+r-1||0),t>-1&&t<n[n.length-1]?t:-1}};function r(e){var t=-1;if(e>-1&&e<n[n.length-1])for(;++t<n.length;)if(n[t]>e)return{line:t+1,column:e-(n[t-1]||0)+1,offset:e};return{}}}},80734:(e,t,n)=>{"use strict";var i=n(75432);function r(){}e.exports=s,r.prototype=Error.prototype,s.prototype=new r;var o=s.prototype;function s(e,t,n){var r,o,s;"string"==typeof t&&(n=t,t=null),r=function(e){var t,n=[null,null];return"string"==typeof e&&(-1===(t=e.indexOf(":"))?n[1]=e:(n[0]=e.slice(0,t),n[1]=e.slice(t+1))),n}(n),o=i(t)||"1:1",s={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(s=t,t=t.start):s.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=o,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=s,this.source=r[0],this.ruleId=r[1]}o.file="",o.name="",o.reason="",o.message="",o.stack="",o.fatal=null,o.column=null,o.line=null},10939:(e,t,n)=>{"use strict";e.exports=n(65905)},45442:(e,t,n)=>{"use strict";var i=n(28064),r=n(54228),o=n(48738);e.exports=c;var s={}.hasOwnProperty,a=["history","path","basename","stem","extname","dirname"];function c(e){var t,n;if(e){if("string"==typeof e||o(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof c))return new c(e);for(this.data={},this.messages=[],this.history=[],this.cwd=r.cwd(),n=-1;++n<a.length;)t=a[n],s.call(e,t)&&(this[t]=e[t]);for(t in e)a.indexOf(t)<0&&(this[t]=e[t])}function l(e,t){if(e&&e.indexOf(i.sep)>-1)throw new Error("`"+t+"` cannot be a path: did not expect `"+i.sep+"`")}function u(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function d(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}c.prototype.toString=function(e){return(this.contents||"").toString(e)},Object.defineProperty(c.prototype,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){u(e,"path"),this.path!==e&&this.history.push(e)}}),Object.defineProperty(c.prototype,"dirname",{get:function(){return"string"==typeof this.path?i.dirname(this.path):void 0},set:function(e){d(this.path,"dirname"),this.path=i.join(e||"",this.basename)}}),Object.defineProperty(c.prototype,"basename",{get:function(){return"string"==typeof this.path?i.basename(this.path):void 0},set:function(e){u(e,"basename"),l(e,"basename"),this.path=i.join(this.dirname||"",e)}}),Object.defineProperty(c.prototype,"extname",{get:function(){return"string"==typeof this.path?i.extname(this.path):void 0},set:function(e){if(l(e,"extname"),d(this.path,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.indexOf(".",1)>-1)throw new Error("`extname` cannot contain multiple dots")}this.path=i.join(this.dirname,this.stem+(e||""))}}),Object.defineProperty(c.prototype,"stem",{get:function(){return"string"==typeof this.path?i.basename(this.path,this.extname):void 0},set:function(e){u(e,"stem"),l(e,"stem"),this.path=i.join(this.dirname||"",e+(this.extname||""))}})},65905:(e,t,n)=>{"use strict";var i=n(80734),r=n(45442);e.exports=r,r.prototype.message=function(e,t,n){var r=new i(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r},r.prototype.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},r.prototype.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e}},28064:(e,t)=>{"use strict";function n(e){var t,n;return i(e),t=47===e.charCodeAt(0),n=function(e,t){for(var n,i,r="",o=0,s=-1,a=0,c=-1;++c<=e.length;){if(c<e.length)n=e.charCodeAt(c);else{if(47===n)break;n=47}if(47===n){if(s===c-1||1===a);else if(s!==c-1&&2===a){if(r.length<2||2!==o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){if((i=r.lastIndexOf("/"))!==r.length-1){i<0?(r="",o=0):o=(r=r.slice(0,i)).length-1-r.lastIndexOf("/"),s=c,a=0;continue}}else if(r.length){r="",o=0,s=c,a=0;continue}t&&(r=r.length?r+"/..":"..",o=2)}else r.length?r+="/"+e.slice(s+1,c):r=e.slice(s+1,c),o=c-s-1;s=c,a=0}else 46===n&&a>-1?a++:a=-1}return r}(e,!t),n.length||t||(n="."),n.length&&47===e.charCodeAt(e.length-1)&&(n+="/"),t?"/"+n:n}function i(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}t.basename=function(e,t){var n,r,o,s,a=0,c=-1;if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');if(i(e),n=e.length,void 0===t||!t.length||t.length>e.length){for(;n--;)if(47===e.charCodeAt(n)){if(o){a=n+1;break}}else c<0&&(o=!0,c=n+1);return c<0?"":e.slice(a,c)}if(t===e)return"";for(r=-1,s=t.length-1;n--;)if(47===e.charCodeAt(n)){if(o){a=n+1;break}}else r<0&&(o=!0,r=n+1),s>-1&&(e.charCodeAt(n)===t.charCodeAt(s--)?s<0&&(c=n):(s=-1,c=r));return a===c?c=r:c<0&&(c=e.length),e.slice(a,c)},t.dirname=function(e){var t,n,r;if(i(e),!e.length)return".";for(t=-1,r=e.length;--r;)if(47===e.charCodeAt(r)){if(n){t=r;break}}else n||(n=!0);return t<0?47===e.charCodeAt(0)?"/":".":1===t&&47===e.charCodeAt(0)?"//":e.slice(0,t)},t.extname=function(e){var t,n,r,o=-1,s=0,a=-1,c=0;for(i(e),r=e.length;r--;)if(47!==(n=e.charCodeAt(r)))a<0&&(t=!0,a=r+1),46===n?o<0?o=r:1!==c&&(c=1):o>-1&&(c=-1);else if(t){s=r+1;break}return o<0||a<0||0===c||1===c&&o===a-1&&o===s+1?"":e.slice(o,a)},t.join=function(){for(var e,t=-1;++t<arguments.length;)i(arguments[t]),arguments[t]&&(e=void 0===e?arguments[t]:e+"/"+arguments[t]);return void 0===e?".":n(e)},t.sep="/"},54228:(e,t)=>{"use strict";t.cwd=function(){return"/"}},7143:e=>{var t=/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;e.exports=function(e){var n=e.match(t),i=0;if(!n)return 0;for(var r=0;r<n.length;r++)n[r].charCodeAt(0)>=19968?i+=n[r].length:i+=1;return i}},47529:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var i=arguments[n];for(var r in i)t.call(i,r)&&(e[r]=i[r])}return e};var t=Object.prototype.hasOwnProperty},68019:e=>{"use strict";e.exports=function(e,i){var r=i||{};function o(i){var r=o.invalid,s=o.handlers;return i&&n.call(i,e)&&(r=n.call(s,i[e])?s[i[e]]:o.unknown),(r||t).apply(this,arguments)}return o.handlers=r.handlers||{},o.invalid=r.invalid,o.unknown=r.unknown,o};var t=Function.prototype,n={}.hasOwnProperty},78392:(e,t,n)=>{"use strict";n.d(t,{JO:()=>m.JO,__:()=>m.__,ZP:()=>g});var i=n(24234),r=n(68568),o=n(47658),s=n(37341),a=n(46504);function c(e){let t;return{c(){t=(0,i.bGB)("div"),(0,i.Ljt)(t,"class","mdc-button__touch")},m(e,n){(0,i.$Tr)(e,t,n)},d(e){e&&(0,i.ogt)(t)}}}function l(e){let t,n,r,o;const s=e[26].default,a=(0,i.nuO)(s,e,e[28],null);let l=e[6]&&c();return{c(){t=(0,i.bGB)("div"),n=(0,i.DhX)(),a&&a.c(),l&&l.c(),r=(0,i.cSb)(),(0,i.Ljt)(t,"class","mdc-button__ripple")},m(e,s){(0,i.$Tr)(e,t,s),(0,i.$Tr)(e,n,s),a&&a.m(e,s),l&&l.m(e,s),(0,i.$Tr)(e,r,s),o=!0},p(e,t){a&&a.p&&(!o||268435456&t)&&(0,i.kmG)(a,s,e,e[28],o?(0,i.u2N)(s,e[28],t,null):(0,i.VOJ)(e[28]),null),e[6]?l||(l=c(),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},i(e){o||((0,i.Ui)(a,e),o=!0)},o(e){(0,i.etI)(a,e),o=!1},d(e){e&&(0,i.ogt)(t),e&&(0,i.ogt)(n),a&&a.d(e),l&&l.d(e),e&&(0,i.ogt)(r)}}}function u(e){let t,n,r;const a=[{use:[[s.Z,{ripple:e[3],unbounded:!1,color:e[4],disabled:!!e[22].disabled,addClass:e[18],removeClass:e[19],addStyle:e[20]}],e[16],...e[0]]},{class:(0,o.$o)({[e[1]]:!0,"mdc-button":!0,"mdc-button--raised":"raised"===e[5],"mdc-button--unelevated":"unelevated"===e[5],"mdc-button--outlined":"outlined"===e[5],"smui-button--color-secondary":"secondary"===e[4],"mdc-button--touch":e[6],"mdc-card__action":"card:action"===e[17],"mdc-card__action--button":"card:action"===e[17],"mdc-dialog__button":"dialog:action"===e[17],"mdc-top-app-bar__navigation-icon":"top-app-bar:navigation"===e[17],"mdc-top-app-bar__action-item":"top-app-bar:action"===e[17],"mdc-snackbar__action":"snackbar:actions"===e[17],"mdc-banner__secondary-action":"banner"===e[17]&&e[8],"mdc-banner__primary-action":"banner"===e[17]&&!e[8],"mdc-tooltip__action":"tooltip:rich-actions"===e[17],...e[11]})},{style:Object.entries(e[12]).map(d).concat([e[2]]).join(" ")},e[15],e[14],e[13],{href:e[7]},e[22]];var c=e[9];function u(e){let t={$$slots:{default:[l]},$$scope:{ctx:e}};for(let e=0;e<a.length;e+=1)t=(0,i.f0i)(t,a[e]);return{props:t}}return c&&(t=new c(u(e)),e[27](t),t.$on("click",e[21])),{c(){t&&(0,i.YCL)(t.$$.fragment),n=(0,i.cSb)()},m(e,o){t&&(0,i.yef)(t,e,o),(0,i.$Tr)(e,n,o),r=!0},p(e,[r]){const l=6289919&r?(0,i.LoY)(a,[6094873&r&&{use:[[s.Z,{ripple:e[3],unbounded:!1,color:e[4],disabled:!!e[22].disabled,addClass:e[18],removeClass:e[19],addStyle:e[20]}],e[16],...e[0]]},133490&r&&{class:(0,o.$o)({[e[1]]:!0,"mdc-button":!0,"mdc-button--raised":"raised"===e[5],"mdc-button--unelevated":"unelevated"===e[5],"mdc-button--outlined":"outlined"===e[5],"smui-button--color-secondary":"secondary"===e[4],"mdc-button--touch":e[6],"mdc-card__action":"card:action"===e[17],"mdc-card__action--button":"card:action"===e[17],"mdc-dialog__button":"dialog:action"===e[17],"mdc-top-app-bar__navigation-icon":"top-app-bar:navigation"===e[17],"mdc-top-app-bar__action-item":"top-app-bar:action"===e[17],"mdc-snackbar__action":"snackbar:actions"===e[17],"mdc-banner__secondary-action":"banner"===e[17]&&e[8],"mdc-banner__primary-action":"banner"===e[17]&&!e[8],"mdc-tooltip__action":"tooltip:rich-actions"===e[17],...e[11]})},4100&r&&{style:Object.entries(e[12]).map(d).concat([e[2]]).join(" ")},32768&r&&(0,i.gCg)(e[15]),16384&r&&(0,i.gCg)(e[14]),8192&r&&(0,i.gCg)(e[13]),128&r&&{href:e[7]},4194304&r&&(0,i.gCg)(e[22])]):{};if(268435520&r&&(l.$$scope={dirty:r,ctx:e}),c!==(c=e[9])){if(t){(0,i.dvw)();const e=t;(0,i.etI)(e.$$.fragment,1,0,(()=>{(0,i.vpE)(e,1)})),(0,i.gbL)()}c?(t=new c(u(e)),e[27](t),t.$on("click",e[21]),(0,i.YCL)(t.$$.fragment),(0,i.Ui)(t.$$.fragment,1),(0,i.yef)(t,n.parentNode,n)):t=null}else c&&t.$set(l)},i(e){r||(t&&(0,i.Ui)(t.$$.fragment,e),r=!0)},o(e){t&&(0,i.etI)(t.$$.fragment,e),r=!1},d(r){e[27](null),r&&(0,i.ogt)(n),t&&(0,i.vpE)(t,r)}}}const d=([e,t])=>`${e}: ${t};`;function h(e,t,n){let s,c,l;const u=["use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","getElement"];let d=(0,i.q2N)(t,u),{$$slots:h={},$$scope:p}=t;const f=(0,o.PD)((0,i.w2L)());let m,{use:g=[]}=t,{class:v=""}=t,{style:y=""}=t,{ripple:b=!0}=t,{color:E="primary"}=t,{variant:S="text"}=t,{touch:w=!1}=t,{href:_}=t,{action:T="close"}=t,{defaultAction:x=!1}=t,{secondary:C=!1}=t,I={},k={},M=(0,r.fw)("SMUI:button:context"),{component:A=(null==_?a.zx:a.A)}=t;function O(){return m.getElement()}return(0,r.v)("SMUI:label:context","button"),(0,r.v)("SMUI:icon:context","button"),e.$$set=e=>{n(29,t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e))),n(22,d=(0,i.q2N)(t,u)),"use"in e&&n(0,g=e.use),"class"in e&&n(1,v=e.class),"style"in e&&n(2,y=e.style),"ripple"in e&&n(3,b=e.ripple),"color"in e&&n(4,E=e.color),"variant"in e&&n(5,S=e.variant),"touch"in e&&n(6,w=e.touch),"href"in e&&n(7,_=e.href),"action"in e&&n(23,T=e.action),"defaultAction"in e&&n(24,x=e.defaultAction),"secondary"in e&&n(8,C=e.secondary),"component"in e&&n(9,A=e.component),"$$scope"in e&&n(28,p=e.$$scope)},e.$$.update=()=>{n(15,s="dialog:action"===M&&null!=T?{"data-mdc-dialog-action":T}:{action:t.action}),n(14,c="dialog:action"===M&&x?{"data-mdc-dialog-button-default":""}:{default:t.default}),n(13,l="banner"===M?{}:{secondary:t.secondary})},t=(0,i.Jvk)(t),[g,v,y,b,E,S,w,_,C,A,m,I,k,l,c,s,f,M,function(e){I[e]||n(11,I[e]=!0,I)},function(e){e in I&&!I[e]||n(11,I[e]=!1,I)},function(e,t){k[e]!=t&&(""===t||null==t?(delete k[e],n(12,k)):n(12,k[e]=t,k))},function(){"banner"===M&&(0,o.WI)(O(),C?"SMUIBannerButton:secondaryActionClick":"SMUIBannerButton:primaryActionClick")},d,T,x,O,h,function(e){i.VnY[e?"unshift":"push"]((()=>{m=e,n(10,m)}))},p]}class p extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,h,u,i.N8,{use:0,class:1,style:2,ripple:3,color:4,variant:5,touch:6,href:7,action:23,defaultAction:24,secondary:8,component:9,getElement:25})}get getElement(){return this.$$.ctx[25]}}const f=p;var m=n(32091);const g=f},28245:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(24234),r=n(70655),o=n(6308),s={ANIM_CHECKED_INDETERMINATE:"mdc-checkbox--anim-checked-indeterminate",ANIM_CHECKED_UNCHECKED:"mdc-checkbox--anim-checked-unchecked",ANIM_INDETERMINATE_CHECKED:"mdc-checkbox--anim-indeterminate-checked",ANIM_INDETERMINATE_UNCHECKED:"mdc-checkbox--anim-indeterminate-unchecked",ANIM_UNCHECKED_CHECKED:"mdc-checkbox--anim-unchecked-checked",ANIM_UNCHECKED_INDETERMINATE:"mdc-checkbox--anim-unchecked-indeterminate",BACKGROUND:"mdc-checkbox__background",CHECKED:"mdc-checkbox--checked",CHECKMARK:"mdc-checkbox__checkmark",CHECKMARK_PATH:"mdc-checkbox__checkmark-path",DISABLED:"mdc-checkbox--disabled",INDETERMINATE:"mdc-checkbox--indeterminate",MIXEDMARK:"mdc-checkbox__mixedmark",NATIVE_CONTROL:"mdc-checkbox__native-control",ROOT:"mdc-checkbox",SELECTED:"mdc-checkbox--selected",UPGRADED:"mdc-checkbox--upgraded"},a={ARIA_CHECKED_ATTR:"aria-checked",ARIA_CHECKED_INDETERMINATE_VALUE:"mixed",DATA_INDETERMINATE_ATTR:"data-indeterminate",NATIVE_CONTROL_SELECTOR:".mdc-checkbox__native-control",TRANSITION_STATE_CHECKED:"checked",TRANSITION_STATE_INDETERMINATE:"indeterminate",TRANSITION_STATE_INIT:"init",TRANSITION_STATE_UNCHECKED:"unchecked"},c={ANIM_END_LATCH_MS:250},l=function(e){function t(n){var i=e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this;return i.currentCheckState_=a.TRANSITION_STATE_INIT,i.currentAnimationClass_="",i.animEndLatchTimer_=0,i.enableAnimationEndHandler_=!1,i}return(0,r.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return s},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return a},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},forceLayout:function(){},hasNativeControl:function(){return!1},isAttachedToDOM:function(){return!1},isChecked:function(){return!1},isIndeterminate:function(){return!1},removeClass:function(){},removeNativeControlAttr:function(){},setNativeControlAttr:function(){},setNativeControlDisabled:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.currentCheckState_=this.determineCheckState_(),this.updateAriaChecked_(),this.adapter.addClass(s.UPGRADED)},t.prototype.destroy=function(){clearTimeout(this.animEndLatchTimer_)},t.prototype.setDisabled=function(e){this.adapter.setNativeControlDisabled(e),e?this.adapter.addClass(s.DISABLED):this.adapter.removeClass(s.DISABLED)},t.prototype.handleAnimationEnd=function(){var e=this;this.enableAnimationEndHandler_&&(clearTimeout(this.animEndLatchTimer_),this.animEndLatchTimer_=setTimeout((function(){e.adapter.removeClass(e.currentAnimationClass_),e.enableAnimationEndHandler_=!1}),c.ANIM_END_LATCH_MS))},t.prototype.handleChange=function(){this.transitionCheckState_()},t.prototype.transitionCheckState_=function(){if(this.adapter.hasNativeControl()){var e=this.currentCheckState_,t=this.determineCheckState_();if(e!==t){this.updateAriaChecked_();var n=s.SELECTED;t===a.TRANSITION_STATE_UNCHECKED?this.adapter.removeClass(n):this.adapter.addClass(n),this.currentAnimationClass_.length>0&&(clearTimeout(this.animEndLatchTimer_),this.adapter.forceLayout(),this.adapter.removeClass(this.currentAnimationClass_)),this.currentAnimationClass_=this.getTransitionAnimationClass_(e,t),this.currentCheckState_=t,this.adapter.isAttachedToDOM()&&this.currentAnimationClass_.length>0&&(this.adapter.addClass(this.currentAnimationClass_),this.enableAnimationEndHandler_=!0)}}},t.prototype.determineCheckState_=function(){var e=a.TRANSITION_STATE_INDETERMINATE,t=a.TRANSITION_STATE_CHECKED,n=a.TRANSITION_STATE_UNCHECKED;return this.adapter.isIndeterminate()?e:this.adapter.isChecked()?t:n},t.prototype.getTransitionAnimationClass_=function(e,n){var i=a.TRANSITION_STATE_INIT,r=a.TRANSITION_STATE_CHECKED,o=a.TRANSITION_STATE_UNCHECKED,s=t.cssClasses,c=s.ANIM_UNCHECKED_CHECKED,l=s.ANIM_UNCHECKED_INDETERMINATE,u=s.ANIM_CHECKED_UNCHECKED,d=s.ANIM_CHECKED_INDETERMINATE,h=s.ANIM_INDETERMINATE_CHECKED,p=s.ANIM_INDETERMINATE_UNCHECKED;switch(e){case i:return n===o?"":n===r?h:p;case o:return n===r?c:l;case r:return n===o?u:d;default:return n===r?h:p}},t.prototype.updateAriaChecked_=function(){this.adapter.isIndeterminate()?this.adapter.setNativeControlAttr(a.ARIA_CHECKED_ATTR,a.ARIA_CHECKED_INDETERMINATE_VALUE):this.adapter.removeNativeControlAttr(a.ARIA_CHECKED_ATTR)},t}(o.K),u=n(68568),d=n(47658),h=n(37341);function p(e){let t,n,r,o,s,a,c,l,u,p,m,g,v,y,b,E,S,w=[{class:r=(0,d.$o)({[e[9]]:!0,"mdc-checkbox__native-control":!0})},{type:"checkbox"},e[20],{disabled:e[1]},{__value:o=e[19](e[7])?e[6]:e[7]},{"data-indeterminate":s=!e[19](e[0])&&e[0]?"true":void 0},e[16],(0,d.bO)(e[26],"input$")],_={};for(let e=0;e<w.length;e+=1)_=(0,i.f0i)(_,w[e]);let T=[{class:m=(0,d.$o)({[e[3]]:!0,"mdc-checkbox":!0,"mdc-checkbox--disabled":e[1],"mdc-checkbox--touch":e[5],"mdc-data-table__header-row-checkbox":"data-table"===e[21]&&e[22],"mdc-data-table__row-checkbox":"data-table"===e[21]&&!e[22],...e[14]})},{style:g=Object.entries(e[15]).map(f).concat([e[4]]).join(" ")},(0,d.De)(e[26],["input$"])],x={};for(let e=0;e<T.length;e+=1)x=(0,i.f0i)(x,T[e]);return{c(){t=(0,i.bGB)("div"),n=(0,i.bGB)("input"),c=(0,i.DhX)(),l=(0,i.bGB)("div"),l.innerHTML='<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24"><path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"></path></svg> \n    <div class="mdc-checkbox__mixedmark"></div>',u=(0,i.DhX)(),p=(0,i.bGB)("div"),(0,i.UF7)(n,_),(0,i.Ljt)(l,"class","mdc-checkbox__background"),(0,i.Ljt)(p,"class","mdc-checkbox__ripple"),(0,i.UF7)(t,x)},m(r,o){(0,i.$Tr)(r,t,o),(0,i.R3I)(t,n),n.autofocus&&n.focus(),e[36](n),n.checked=e[12],(0,i.R3I)(t,c),(0,i.R3I)(t,l),(0,i.R3I)(t,u),(0,i.R3I)(t,p),e[38](t),E||(S=[(0,i.TVh)(a=d.ol.call(null,n,e[8])),(0,i.oLt)(n,"change",e[37]),(0,i.oLt)(n,"blur",e[34]),(0,i.oLt)(n,"focus",e[35]),(0,i.TVh)(v=d.ol.call(null,t,e[2])),(0,i.TVh)(y=e[18].call(null,t)),(0,i.TVh)(b=h.Z.call(null,t,{unbounded:!0,addClass:e[23],removeClass:e[24],addStyle:e[25],active:e[17],eventTarget:e[11]})),(0,i.oLt)(t,"animationend",e[39])],E=!0)},p(e,c){(0,i.UF7)(n,_=(0,i.LoY)(w,[512&c[0]&&r!==(r=(0,d.$o)({[e[9]]:!0,"mdc-checkbox__native-control":!0}))&&{class:r},{type:"checkbox"},e[20],2&c[0]&&{disabled:e[1]},192&c[0]&&o!==(o=e[19](e[7])?e[6]:e[7])&&{__value:o},1&c[0]&&s!==(s=!e[19](e[0])&&e[0]?"true":void 0)&&{"data-indeterminate":s},65536&c[0]&&e[16],67108864&c[0]&&(0,d.bO)(e[26],"input$")])),a&&(0,i.sBU)(a.update)&&256&c[0]&&a.update.call(null,e[8]),4096&c[0]&&(n.checked=e[12]),(0,i.UF7)(t,x=(0,i.LoY)(T,[16426&c[0]&&m!==(m=(0,d.$o)({[e[3]]:!0,"mdc-checkbox":!0,"mdc-checkbox--disabled":e[1],"mdc-checkbox--touch":e[5],"mdc-data-table__header-row-checkbox":"data-table"===e[21]&&e[22],"mdc-data-table__row-checkbox":"data-table"===e[21]&&!e[22],...e[14]}))&&{class:m},32784&c[0]&&g!==(g=Object.entries(e[15]).map(f).concat([e[4]]).join(" "))&&{style:g},67108864&c[0]&&(0,d.De)(e[26],["input$"])])),v&&(0,i.sBU)(v.update)&&4&c[0]&&v.update.call(null,e[2]),b&&(0,i.sBU)(b.update)&&133120&c[0]&&b.update.call(null,{unbounded:!0,addClass:e[23],removeClass:e[24],addStyle:e[25],active:e[17],eventTarget:e[11]})},i:i.ZTd,o:i.ZTd,d(n){n&&(0,i.ogt)(t),e[36](null),e[38](null),E=!1,(0,i.j7q)(S)}}}const f=([e,t])=>`${e}: ${t};`;function m(e,t,n){const r=["use","class","style","disabled","touch","indeterminate","group","checked","value","valueKey","input$use","input$class","getId","getElement"];let o=(0,i.q2N)(t,r);var s;const a=(0,d.PD)((0,i.w2L)());let c=()=>{};function h(e){return e===c}let p,f,m,{use:g=[]}=t,{class:v=""}=t,{style:y=""}=t,{disabled:b=!1}=t,{touch:E=!1}=t,{indeterminate:S=c}=t,{group:w=c}=t,{checked:_=c}=t,{value:T=null}=t,{valueKey:x=c}=t,{input$use:C=[]}=t,{input$class:I=""}=t,k={},M={},A={},O=!1,R=null!==(s=(0,u.fw)("SMUI:generic:input:props"))&&void 0!==s?s:{},L=h(w)?!h(_)&&(null!=_?_:void 0):-1!==w.indexOf(T),D=(0,u.fw)("SMUI:checkbox:context"),N=(0,u.fw)("SMUI:data-table:row:header"),P=_,$=h(w)?[]:[...w],U=L;function B(e){k[e]||n(14,k[e]=!0,k)}function F(e){e in k&&!k[e]||n(14,k[e]=!1,k)}function j(e,t){A[e]!==t&&n(16,A[e]=t,A)}function H(e){e in A&&null==A[e]||n(16,A[e]=void 0,A)}function K(){return p}return(0,u.H3)((()=>{n(11,m.indeterminate=!h(S)&&S,m),n(10,f=new l({addClass:B,forceLayout:()=>p.offsetWidth,hasNativeControl:()=>!0,isAttachedToDOM:()=>Boolean(p.parentNode),isChecked:()=>null!=L&&L,isIndeterminate:()=>!h(S)&&S,removeClass:F,removeNativeControlAttr:H,setNativeControlAttr:j,setNativeControlDisabled:e=>n(1,b=e)}));const e={_smui_checkbox_accessor:!0,get element(){return K()},get checked(){return null!=L&&L},set checked(e){L!==e&&n(12,L=e)},get indeterminate(){return!h(S)&&S},set indeterminate(e){n(0,S=e)},activateRipple(){b||n(17,O=!0)},deactivateRipple(){n(17,O=!1)}};return(0,d.WI)(p,"SMUIGenericInput:mount",e),(0,d.WI)(p,"SMUICheckbox:mount",e),f.init(),()=>{(0,d.WI)(p,"SMUIGenericInput:unmount",e),(0,d.WI)(p,"SMUICheckbox:unmount",e),f.destroy()}})),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(26,o=(0,i.q2N)(t,r)),"use"in e&&n(2,g=e.use),"class"in e&&n(3,v=e.class),"style"in e&&n(4,y=e.style),"disabled"in e&&n(1,b=e.disabled),"touch"in e&&n(5,E=e.touch),"indeterminate"in e&&n(0,S=e.indeterminate),"group"in e&&n(27,w=e.group),"checked"in e&&n(28,_=e.checked),"value"in e&&n(6,T=e.value),"valueKey"in e&&n(7,x=e.valueKey),"input$use"in e&&n(8,C=e.input$use),"input$class"in e&&n(9,I=e.input$class)},e.$$.update=()=>{if(402660417&e.$$.dirty[0]|7&e.$$.dirty[1]){let e=!1;if(!h(w))if(U!==L){const t=w.indexOf(T);L&&-1===t?(w.push(T),n(27,w),n(33,U),n(12,L),n(6,T),n(32,$),n(28,_),n(31,P),n(0,S),n(11,m),n(10,f)):L||-1===t||(w.splice(t,1),n(27,w),n(33,U),n(12,L),n(6,T),n(32,$),n(28,_),n(31,P),n(0,S),n(11,m),n(10,f)),e=!0}else{const t=$.indexOf(T),i=w.indexOf(T);t>-1&&-1===i?(n(12,L=!1),e=!0):i>-1&&-1===t&&(n(12,L=!0),e=!0)}h(_)?!!U!=!!L&&(e=!0):_!==(null!=L?L:null)&&(_===P?(n(28,_=null!=L?L:null),h(S)||n(0,S=!1)):n(12,L=null!=_?_:void 0),e=!0),m&&(h(S)?m.indeterminate&&(n(11,m.indeterminate=!1,m),e=!0):!S&&m.indeterminate?(n(11,m.indeterminate=!1,m),e=!0):S&&!m.indeterminate&&(n(11,m.indeterminate=!0,m),e=!0)),n(31,P=_),n(32,$=h(w)?[]:[...w]),n(33,U=L),e&&f&&f.handleChange()}},[S,b,g,v,y,E,T,x,C,I,f,m,L,p,k,M,A,O,a,h,R,D,N,B,F,function(e,t){M[e]!=t&&(""===t||null==t?(delete M[e],n(15,M)):n(15,M[e]=t,M))},o,w,_,function(){return R&&R.id},K,P,$,U,function(t){i.cKT.call(this,e,t)},function(t){i.cKT.call(this,e,t)},function(e){i.VnY[e?"unshift":"push"]((()=>{m=e,n(11,m),n(27,w),n(33,U),n(12,L),n(6,T),n(32,$),n(28,_),n(31,P),n(0,S),n(10,f)}))},function(){L=this.checked,n(12,L),n(27,w),n(33,U),n(6,T),n(32,$),n(28,_),n(31,P),n(0,S),n(11,m),n(10,f)},function(e){i.VnY[e?"unshift":"push"]((()=>{p=e,n(13,p)}))},()=>f&&f.handleAnimationEnd()]}class g extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,m,p,i.N8,{use:2,class:3,style:4,disabled:1,touch:5,indeterminate:0,group:27,checked:28,value:6,valueKey:7,input$use:8,input$class:9,getId:29,getElement:30},null,[-1,-1])}get getId(){return this.$$.ctx[29]}get getElement(){return this.$$.ctx[30]}}const v=g},3663:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(24234),r=n(70655),o=n(6308),s={INDETERMINATE_CLASS:"mdc-circular-progress--indeterminate",CLOSED_CLASS:"mdc-circular-progress--closed"},a={ARIA_HIDDEN:"aria-hidden",ARIA_VALUENOW:"aria-valuenow",DETERMINATE_CIRCLE_SELECTOR:".mdc-circular-progress__determinate-circle",RADIUS:"r",STROKE_DASHOFFSET:"stroke-dashoffset"},c=function(e){function t(n){return e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this}return(0,r.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return s},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return a},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},getDeterminateCircleAttribute:function(){return null},hasClass:function(){return!1},removeClass:function(){},removeAttribute:function(){},setAttribute:function(){},setDeterminateCircleAttribute:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.closed=this.adapter.hasClass(s.CLOSED_CLASS),this.determinate=!this.adapter.hasClass(s.INDETERMINATE_CLASS),this.progress=0,this.determinate&&this.adapter.setAttribute(a.ARIA_VALUENOW,this.progress.toString()),this.radius=Number(this.adapter.getDeterminateCircleAttribute(a.RADIUS))},t.prototype.setDeterminate=function(e){this.determinate=e,this.determinate?(this.adapter.removeClass(s.INDETERMINATE_CLASS),this.setProgress(this.progress)):(this.adapter.addClass(s.INDETERMINATE_CLASS),this.adapter.removeAttribute(a.ARIA_VALUENOW))},t.prototype.isDeterminate=function(){return this.determinate},t.prototype.setProgress=function(e){if(this.progress=e,this.determinate){var t=(1-this.progress)*(2*Math.PI*this.radius);this.adapter.setDeterminateCircleAttribute(a.STROKE_DASHOFFSET,""+t),this.adapter.setAttribute(a.ARIA_VALUENOW,this.progress.toString())}},t.prototype.getProgress=function(){return this.progress},t.prototype.open=function(){this.closed=!1,this.adapter.removeClass(s.CLOSED_CLASS),this.adapter.removeAttribute(a.ARIA_HIDDEN)},t.prototype.close=function(){this.closed=!0,this.adapter.addClass(s.CLOSED_CLASS),this.adapter.setAttribute(a.ARIA_HIDDEN,"true")},t.prototype.isClosed=function(){return this.closed},t}(o.K),l=n(68568),u=n(47658);function d(e,t,n){const i=e.slice();return i[24]=t[n],i}function h(e){let t,n,r,o,s,a,c,l;return{c(){t=(0,i.bGB)("div"),n=(0,i.bGB)("div"),n.innerHTML='<svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="4"></circle></svg>',r=(0,i.DhX)(),o=(0,i.bGB)("div"),o.innerHTML='<svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="3.2"></circle></svg>',s=(0,i.DhX)(),a=(0,i.bGB)("div"),a.innerHTML='<svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><circle cx="24" cy="24" r="18" stroke-dasharray="113.097" stroke-dashoffset="56.549" stroke-width="4"></circle></svg>',c=(0,i.DhX)(),(0,i.Ljt)(n,"class","mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left"),(0,i.Ljt)(o,"class","mdc-circular-progress__gap-patch"),(0,i.Ljt)(a,"class","mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right"),(0,i.Ljt)(t,"class",l=(0,u.$o)({[e[1]]:!0,"mdc-circular-progress__spinner-layer":!0,["mdc-circular-progress__color-"+e[24]]:e[5]}))},m(e,l){(0,i.$Tr)(e,t,l),(0,i.R3I)(t,n),(0,i.R3I)(t,r),(0,i.R3I)(t,o),(0,i.R3I)(t,s),(0,i.R3I)(t,a),(0,i.R3I)(t,c)},p(e,n){34&n&&l!==(l=(0,u.$o)({[e[1]]:!0,"mdc-circular-progress__spinner-layer":!0,["mdc-circular-progress__color-"+e[24]]:e[5]}))&&(0,i.Ljt)(t,"class",l)},d(e){e&&(0,i.ogt)(t)}}}function p(e){let t,n,r,o,s,a,c,l,p,f,m,g,v,y,b,E=[{class:"mdc-circular-progress__determinate-circle"},{cx:"24"},{cy:"24"},{r:"18"},{"stroke-dasharray":"113.097"},{"stroke-dashoffset":"113.097"},{"stroke-width":"4"},e[9]],S={};for(let e=0;e<E.length;e+=1)S=(0,i.f0i)(S,E[e]);let w=e[5]?[1,2,3,4]:[1],_=[];for(let t=0;t<w.length;t+=1)_[t]=h(d(e,w,t));let T=[{class:l=(0,u.$o)({[e[1]]:!0,"mdc-circular-progress":!0,"mdc-circular-progress--indeterminate":e[2],"mdc-circular-progress--closed":e[3],...e[7]})},{role:"progressbar"},{"aria-valuemin":p=0},{"aria-valuemax":f=1},{"aria-valuenow":m=e[2]?void 0:e[4]},e[8],e[12]],x={};for(let e=0;e<T.length;e+=1)x=(0,i.f0i)(x,T[e]);return{c(){t=(0,i.bGB)("div"),n=(0,i.bGB)("div"),r=(0,i.bi5)("svg"),o=(0,i.bi5)("circle"),s=(0,i.bi5)("circle"),a=(0,i.DhX)(),c=(0,i.bGB)("div");for(let e=0;e<_.length;e+=1)_[e].c();(0,i.Ljt)(o,"class","mdc-circular-progress__determinate-track"),(0,i.Ljt)(o,"cx","24"),(0,i.Ljt)(o,"cy","24"),(0,i.Ljt)(o,"r","18"),(0,i.Ljt)(o,"stroke-width","4"),(0,i.NVz)(s,S),(0,i.Ljt)(r,"class","mdc-circular-progress__determinate-circle-graphic"),(0,i.Ljt)(r,"viewBox","0 0 48 48"),(0,i.Ljt)(r,"xmlns","http://www.w3.org/2000/svg"),(0,i.Ljt)(n,"class","mdc-circular-progress__determinate-container"),(0,i.Ljt)(c,"class","mdc-circular-progress__indeterminate-container"),(0,i.UF7)(t,x)},m(l,d){(0,i.$Tr)(l,t,d),(0,i.R3I)(t,n),(0,i.R3I)(n,r),(0,i.R3I)(r,o),(0,i.R3I)(r,s),e[15](s),(0,i.R3I)(t,a),(0,i.R3I)(t,c);for(let e=0;e<_.length;e+=1)_[e].m(c,null);e[16](t),y||(b=[(0,i.TVh)(g=u.ol.call(null,t,e[0])),(0,i.TVh)(v=e[11].call(null,t))],y=!0)},p(e,[n]){if((0,i.NVz)(s,S=(0,i.LoY)(E,[{class:"mdc-circular-progress__determinate-circle"},{cx:"24"},{cy:"24"},{r:"18"},{"stroke-dasharray":"113.097"},{"stroke-dashoffset":"113.097"},{"stroke-width":"4"},512&n&&e[9]])),34&n){let t;for(w=e[5]?[1,2,3,4]:[1],t=0;t<w.length;t+=1){const i=d(e,w,t);_[t]?_[t].p(i,n):(_[t]=h(i),_[t].c(),_[t].m(c,null))}for(;t<_.length;t+=1)_[t].d(1);_.length=w.length}(0,i.UF7)(t,x=(0,i.LoY)(T,[142&n&&l!==(l=(0,u.$o)({[e[1]]:!0,"mdc-circular-progress":!0,"mdc-circular-progress--indeterminate":e[2],"mdc-circular-progress--closed":e[3],...e[7]}))&&{class:l},{role:"progressbar"},{"aria-valuemin":0},{"aria-valuemax":1},20&n&&m!==(m=e[2]?void 0:e[4])&&{"aria-valuenow":m},256&n&&e[8],4096&n&&e[12]])),g&&(0,i.sBU)(g.update)&&1&n&&g.update.call(null,e[0])},i:i.ZTd,o:i.ZTd,d(n){n&&(0,i.ogt)(t),e[15](null),(0,i.RMB)(_,n),e[16](null),y=!1,(0,i.j7q)(b)}}}function f(e,t,n){const r=["use","class","indeterminate","closed","progress","fourColor","getElement"];let o=(0,i.q2N)(t,r);const s=(0,u.PD)((0,i.w2L)());let a,d,h,{use:p=[]}=t,{class:f=""}=t,{indeterminate:m=!1}=t,{closed:g=!1}=t,{progress:v=0}=t,{fourColor:y=!1}=t,b={},E={},S={};function w(e){return e in b?b[e]:M().classList.contains(e)}function _(e){b[e]||n(7,b[e]=!0,b)}function T(e){e in b&&!b[e]||n(7,b[e]=!1,b)}function x(e,t){E[e]!==t&&n(8,E[e]=t,E)}function C(e){e in E&&null==E[e]||n(8,E[e]=void 0,E)}function I(e){var t;return e in S?null!==(t=S[e])&&void 0!==t?t:null:h.getAttribute(e)}function k(e,t){S[e]!==t&&n(9,S[e]=t,S)}function M(){return a}return(0,l.H3)((()=>(n(14,d=new c({addClass:_,getDeterminateCircleAttribute:I,hasClass:w,removeClass:T,removeAttribute:C,setAttribute:x,setDeterminateCircleAttribute:k})),d.init(),()=>{d.destroy()}))),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(12,o=(0,i.q2N)(t,r)),"use"in e&&n(0,p=e.use),"class"in e&&n(1,f=e.class),"indeterminate"in e&&n(2,m=e.indeterminate),"closed"in e&&n(3,g=e.closed),"progress"in e&&n(4,v=e.progress),"fourColor"in e&&n(5,y=e.fourColor)},e.$$.update=()=>{16388&e.$$.dirty&&d&&d.isDeterminate()!==!m&&d.setDeterminate(!m),16400&e.$$.dirty&&d&&d.getProgress()!==v&&d.setProgress(v),16392&e.$$.dirty&&d&&(g?d.close():d.open())},[p,f,m,g,v,y,a,b,E,S,h,s,o,M,d,function(e){i.VnY[e?"unshift":"push"]((()=>{h=e,n(10,h)}))},function(e){i.VnY[e?"unshift":"push"]((()=>{a=e,n(6,a)}))}]}class m extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,f,p,i.N8,{use:0,class:1,indeterminate:2,closed:3,progress:4,fourColor:5,getElement:13})}get getElement(){return this.$$.ctx[13]}}const g=m},58858:(e,t,n)=>{"use strict";n.d(t,{C:()=>m});var i=n(24234),r=n(63605),o=n(68568),s=n(1629),a=n(62767);function c(e){let t;const n=e[10].default,r=(0,i.nuO)(n,e,e[12],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||4096&o)&&(0,i.kmG)(r,n,e,e[12],t?(0,i.u2N)(n,e[12],o,null):(0,i.VOJ)(e[12]),null)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function l(e){let t,n,r;const o=[{use:[e[7],...e[0]]},{class:(0,a.$)({[e[1]]:!0,[e[5]]:!0,...e[4]})},e[6],e[8]];var s=e[2];function l(e){let t={$$slots:{default:[c]},$$scope:{ctx:e}};for(let e=0;e<o.length;e+=1)t=(0,i.f0i)(t,o[e]);return{props:t}}return s&&(t=new s(l(e)),e[11](t)),{c(){t&&(0,i.YCL)(t.$$.fragment),n=(0,i.cSb)()},m(e,o){t&&(0,i.yef)(t,e,o),(0,i.$Tr)(e,n,o),r=!0},p(e,[r]){const c=499&r?(0,i.LoY)(o,[129&r&&{use:[e[7],...e[0]]},50&r&&{class:(0,a.$)({[e[1]]:!0,[e[5]]:!0,...e[4]})},64&r&&(0,i.gCg)(e[6]),256&r&&(0,i.gCg)(e[8])]):{};if(4096&r&&(c.$$scope={dirty:r,ctx:e}),s!==(s=e[2])){if(t){(0,i.dvw)();const e=t;(0,i.etI)(e.$$.fragment,1,0,(()=>{(0,i.vpE)(e,1)})),(0,i.gbL)()}s?(t=new s(l(e)),e[11](t),(0,i.YCL)(t.$$.fragment),(0,i.Ui)(t.$$.fragment,1),(0,i.yef)(t,n.parentNode,n)):t=null}else s&&t.$set(c)},i(e){r||(t&&(0,i.Ui)(t.$$.fragment,e),r=!0)},o(e){t&&(0,i.etI)(t.$$.fragment,e),r=!1},d(r){e[11](null),r&&(0,i.ogt)(n),t&&(0,i.vpE)(t,r)}}}const u={component:r.Z,class:"",classMap:{},contexts:{},props:{}};function d(e,t,n){const r=["use","class","component","getElement"];let a,c=(0,i.q2N)(t,r),{$$slots:l={},$$scope:d}=t,{use:h=[]}=t,{class:p=""}=t;const f=u.class,m={},g=[],v=u.contexts,y=u.props;let{component:b=u.component}=t;Object.entries(u.classMap).forEach((([e,t])=>{const i=(0,o.fw)(t);i&&"subscribe"in i&&g.push(i.subscribe((t=>{n(4,m[e]=t,m)})))}));const E=(0,s.P)((0,i.w2L)());for(let e in v)v.hasOwnProperty(e)&&(0,o.v)(e,v[e]);return(0,o.ev)((()=>{for(const e of g)e()})),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(8,c=(0,i.q2N)(t,r)),"use"in e&&n(0,h=e.use),"class"in e&&n(1,p=e.class),"component"in e&&n(2,b=e.component),"$$scope"in e&&n(12,d=e.$$scope)},[h,p,b,a,m,f,y,E,c,function(){return a.getElement()},l,function(e){i.VnY[e?"unshift":"push"]((()=>{a=e,n(3,a)}))},d]}class h extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,d,l,i.N8,{use:0,class:1,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const p=h,f=Object.assign({},u);function m(e){return new Proxy(p,{construct:function(t,n){return Object.assign(u,f,e),new t(...n)},get:function(t,n){return Object.assign(u,f,e),t[n]}})}},46504:(e,t,n)=>{"use strict";n.d(t,{A:()=>J,zx:()=>Q,ZC:()=>Z,H1:()=>ee,H2:()=>te,H3:()=>ne,H5:()=>ie,H6:()=>re,Hr:()=>oe,Li:()=>se,JL:()=>ae,Dr:()=>ce,Ul:()=>le});var i=n(24234),r=n(47658);function o(e){let t,n,o,s,a,c;const l=e[7].default,u=(0,i.nuO)(l,e,e[6],null);let d=[{href:e[1]},e[4]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("a"),u&&u.c(),(0,i.UF7)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),e[8](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[3].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||64&r)&&(0,i.kmG)(u,l,e,e[6],s?(0,i.u2N)(l,e[6],r,null):(0,i.VOJ)(e[6]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[(!s||2&r)&&{href:e[1]},16&r&&e[4]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[8](null),a=!1,(0,i.j7q)(c)}}}function s(e,t,n){const o=["use","href","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t,{href:u="javascript:void(0);"}=t;const d=(0,r.PD)((0,i.w2L)());let h;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(4,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"href"in e&&n(1,u=e.href),"$$scope"in e&&n(6,c=e.$$scope)},[l,u,h,d,s,function(){return h},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{h=e,n(2,h)}))}]}class a extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,s,o,i.N8,{use:0,href:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}const c=a;function l(e){let t,n,o,s,a,c;const l=e[6].default,u=(0,i.nuO)(l,e,e[5],null);let d=[e[3]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("button"),u&&u.c(),(0,i.UF7)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),t.autofocus&&t.focus(),e[7](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||32&r)&&(0,i.kmG)(u,l,e,e[5],s?(0,i.u2N)(l,e[5],r,null):(0,i.VOJ)(e[5]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[7](null),a=!1,(0,i.j7q)(c)}}}function u(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}class d extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,u,l,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const h=d;var p=n(63605);function f(e){let t,n,o,s,a,c;const l=e[6].default,u=(0,i.nuO)(l,e,e[5],null);let d=[e[3]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("h1"),u&&u.c(),(0,i.UF7)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),e[7](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||32&r)&&(0,i.kmG)(u,l,e,e[5],s?(0,i.u2N)(l,e[5],r,null):(0,i.VOJ)(e[5]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[7](null),a=!1,(0,i.j7q)(c)}}}function m(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}class g extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,m,f,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const v=g;function y(e){let t,n,o,s,a,c;const l=e[6].default,u=(0,i.nuO)(l,e,e[5],null);let d=[e[3]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("h2"),u&&u.c(),(0,i.UF7)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),e[7](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||32&r)&&(0,i.kmG)(u,l,e,e[5],s?(0,i.u2N)(l,e[5],r,null):(0,i.VOJ)(e[5]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[7](null),a=!1,(0,i.j7q)(c)}}}function b(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}class E extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,b,y,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const S=E;function w(e){let t,n,o,s,a,c;const l=e[6].default,u=(0,i.nuO)(l,e,e[5],null);let d=[e[3]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("h3"),u&&u.c(),(0,i.UF7)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),e[7](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||32&r)&&(0,i.kmG)(u,l,e,e[5],s?(0,i.u2N)(l,e[5],r,null):(0,i.VOJ)(e[5]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[7](null),a=!1,(0,i.j7q)(c)}}}function _(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}class T extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,_,w,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const x=T;function C(e){let t,n,o,s,a,c;const l=e[6].default,u=(0,i.nuO)(l,e,e[5],null);let d=[e[3]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("h5"),u&&u.c(),(0,i.UF7)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),e[7](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||32&r)&&(0,i.kmG)(u,l,e,e[5],s?(0,i.u2N)(l,e[5],r,null):(0,i.VOJ)(e[5]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[7](null),a=!1,(0,i.j7q)(c)}}}function I(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}class k extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,I,C,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const M=k;function A(e){let t,n,o,s,a,c;const l=e[6].default,u=(0,i.nuO)(l,e,e[5],null);let d=[e[3]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("h6"),u&&u.c(),(0,i.UF7)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),e[7](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||32&r)&&(0,i.kmG)(u,l,e,e[5],s?(0,i.u2N)(l,e[5],r,null):(0,i.VOJ)(e[5]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[7](null),a=!1,(0,i.j7q)(c)}}}function O(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}class R extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,O,A,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const L=R;function D(e){let t,n,o,s,a,c,l,u=[e[3]],d={};for(let e=0;e<u.length;e+=1)d=(0,i.f0i)(d,u[e]);const h=e[6].default,p=(0,i.nuO)(h,e,e[5],null);return{c(){t=(0,i.bGB)("hr"),s=(0,i.DhX)(),p&&p.c(),(0,i.UF7)(t,d)},m(u,d){(0,i.$Tr)(u,t,d),e[7](t),(0,i.$Tr)(u,s,d),p&&p.m(u,d),a=!0,c||(l=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],c=!0)},p(e,[r]){(0,i.UF7)(t,d=(0,i.LoY)(u,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0]),p&&p.p&&(!a||32&r)&&(0,i.kmG)(p,h,e,e[5],a?(0,i.u2N)(h,e[5],r,null):(0,i.VOJ)(e[5]),null)},i(e){a||((0,i.Ui)(p,e),a=!0)},o(e){(0,i.etI)(p,e),a=!1},d(n){n&&(0,i.ogt)(t),e[7](null),n&&(0,i.ogt)(s),p&&p.d(n),c=!1,(0,i.j7q)(l)}}}function N(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}class P extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,N,D,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const $=P;function U(e){let t,n,o,s,a,c;const l=e[6].default,u=(0,i.nuO)(l,e,e[5],null);let d=[e[3]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("li"),u&&u.c(),(0,i.UF7)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),e[7](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||32&r)&&(0,i.kmG)(u,l,e,e[5],s?(0,i.u2N)(l,e[5],r,null):(0,i.VOJ)(e[5]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[7](null),a=!1,(0,i.j7q)(c)}}}function B(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}n(80242);class F extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,B,U,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const j=F;function H(e){let t,n,o,s,a,c;const l=e[6].default,u=(0,i.nuO)(l,e,e[5],null);let d=[e[3]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("nav"),u&&u.c(),(0,i.UF7)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),e[7](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||32&r)&&(0,i.kmG)(u,l,e,e[5],s?(0,i.u2N)(l,e[5],r,null):(0,i.VOJ)(e[5]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[7](null),a=!1,(0,i.j7q)(c)}}}function K(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}class q extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,K,H,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const V=q;var G=n(94884);function W(e){let t,n,o,s,a,c;const l=e[6].default,u=(0,i.nuO)(l,e,e[5],null);let d=[e[3]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("ul"),u&&u.c(),(0,i.UF7)(t,h)},m(l,d){(0,i.$Tr)(l,t,d),u&&u.m(t,null),e[7](t),s=!0,a||(c=[(0,i.TVh)(n=r.ol.call(null,t,e[0])),(0,i.TVh)(o=e[2].call(null,t))],a=!0)},p(e,[r]){u&&u.p&&(!s||32&r)&&(0,i.kmG)(u,l,e,e[5],s?(0,i.u2N)(l,e[5],r,null):(0,i.VOJ)(e[5]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[8&r&&e[3]])),n&&(0,i.sBU)(n.update)&&1&r&&n.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[7](null),a=!1,(0,i.j7q)(c)}}}function z(e,t,n){const o=["use","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t,{use:l=[]}=t;const u=(0,r.PD)((0,i.w2L)());let d;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(3,s=(0,i.q2N)(t,o)),"use"in e&&n(0,l=e.use),"$$scope"in e&&n(5,c=e.$$scope)},[l,d,u,s,function(){return d},c,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(1,d)}))}]}n(10761);class Y extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,z,W,i.N8,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const X=Y,J=c,Q=h,Z=p.Z,ee=v,te=S,ne=x,ie=M,re=L,oe=$,se=j,ae=V,ce=G.Z,le=X},32091:(e,t,n)=>{"use strict";n.d(t,{FW:()=>_,JO:()=>x,__:()=>T});var i=n(24234),r=n(68568),o=n(47658),s=n(94884);function a(e){let t;const n=e[9].default,r=(0,i.nuO)(n,e,e[11],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||2048&o)&&(0,i.kmG)(r,n,e,e[11],t?(0,i.u2N)(n,e[11],o,null):(0,i.VOJ)(e[11]),null)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function c(e){let t,n,r;const s=[{use:[e[4],...e[0]]},{class:(0,o.$o)({[e[1]]:!0,"mdc-button__label":"button"===e[5],"mdc-fab__label":"fab"===e[5],"mdc-tab__text-label":"tab"===e[5],"mdc-image-list__label":"image-list"===e[5],"mdc-snackbar__label":"snackbar"===e[5],"mdc-banner__text":"banner"===e[5],"mdc-segmented-button__label":"segmented-button"===e[5],"mdc-data-table__pagination-rows-per-page-label":"data-table:pagination"===e[5],"mdc-data-table__header-cell-label":"data-table:sortable-header-cell"===e[5]})},"snackbar"===e[5]?{"aria-atomic":"false"}:{},{tabindex:e[6]},e[7]];var c=e[2];function l(e){let t={$$slots:{default:[a]},$$scope:{ctx:e}};for(let e=0;e<s.length;e+=1)t=(0,i.f0i)(t,s[e]);return{props:t}}return c&&(t=new c(l(e)),e[10](t)),{c(){t&&(0,i.YCL)(t.$$.fragment),n=(0,i.cSb)()},m(e,o){t&&(0,i.yef)(t,e,o),(0,i.$Tr)(e,n,o),r=!0},p(e,[r]){const a=243&r?(0,i.LoY)(s,[17&r&&{use:[e[4],...e[0]]},34&r&&{class:(0,o.$o)({[e[1]]:!0,"mdc-button__label":"button"===e[5],"mdc-fab__label":"fab"===e[5],"mdc-tab__text-label":"tab"===e[5],"mdc-image-list__label":"image-list"===e[5],"mdc-snackbar__label":"snackbar"===e[5],"mdc-banner__text":"banner"===e[5],"mdc-segmented-button__label":"segmented-button"===e[5],"mdc-data-table__pagination-rows-per-page-label":"data-table:pagination"===e[5],"mdc-data-table__header-cell-label":"data-table:sortable-header-cell"===e[5]})},32&r&&(0,i.gCg)("snackbar"===e[5]?{"aria-atomic":"false"}:{}),64&r&&{tabindex:e[6]},128&r&&(0,i.gCg)(e[7])]):{};if(2048&r&&(a.$$scope={dirty:r,ctx:e}),c!==(c=e[2])){if(t){(0,i.dvw)();const e=t;(0,i.etI)(e.$$.fragment,1,0,(()=>{(0,i.vpE)(e,1)})),(0,i.gbL)()}c?(t=new c(l(e)),e[10](t),(0,i.YCL)(t.$$.fragment),(0,i.Ui)(t.$$.fragment,1),(0,i.yef)(t,n.parentNode,n)):t=null}else c&&t.$set(a)},i(e){r||(t&&(0,i.Ui)(t.$$.fragment,e),r=!0)},o(e){t&&(0,i.etI)(t.$$.fragment,e),r=!1},d(r){e[10](null),r&&(0,i.ogt)(n),t&&(0,i.vpE)(t,r)}}}function l(e,t,n){const a=["use","class","component","getElement"];let c=(0,i.q2N)(t,a),{$$slots:l={},$$scope:u}=t;const d=(0,o.PD)((0,i.w2L)());let h,{use:p=[]}=t,{class:f=""}=t,{component:m=s.Z}=t;const g=(0,r.fw)("SMUI:label:context"),v=(0,r.fw)("SMUI:label:tabindex");return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(7,c=(0,i.q2N)(t,a)),"use"in e&&n(0,p=e.use),"class"in e&&n(1,f=e.class),"component"in e&&n(2,m=e.component),"$$scope"in e&&n(11,u=e.$$scope)},[p,f,m,h,d,g,v,c,function(){return h.getElement()},l,function(e){i.VnY[e?"unshift":"push"]((()=>{h=e,n(3,h)}))},u]}class u extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,l,c,i.N8,{use:0,class:1,component:2,getElement:8})}get getElement(){return this.$$.ctx[8]}}const d=u;var h=n(80242),p=n(10761);function f(e){let t;const n=e[9].default,r=(0,i.nuO)(n,e,e[11],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||2048&o)&&(0,i.kmG)(r,n,e,e[11],t?(0,i.u2N)(n,e[11],o,null):(0,i.VOJ)(e[11]),null)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function m(e){let t,n,r;const s=[{use:[e[5],...e[0]]},{class:(0,o.$o)({[e[1]]:!0,"mdc-button__icon":"button"===e[6],"mdc-fab__icon":"fab"===e[6],"mdc-icon-button__icon":"icon-button"===e[6],"mdc-icon-button__icon--on":"icon-button"===e[6]&&e[2],"mdc-tab__icon":"tab"===e[6],"mdc-banner__icon":"banner"===e[6],"mdc-segmented-button__icon":"segmented-button"===e[6]})},{"aria-hidden":"true"},e[3]===p.Z?{focusable:"false",tabindex:"-1"}:{},e[7]];var a=e[3];function c(e){let t={$$slots:{default:[f]},$$scope:{ctx:e}};for(let e=0;e<s.length;e+=1)t=(0,i.f0i)(t,s[e]);return{props:t}}return a&&(t=new a(c(e)),e[10](t)),{c(){t&&(0,i.YCL)(t.$$.fragment),n=(0,i.cSb)()},m(e,o){t&&(0,i.yef)(t,e,o),(0,i.$Tr)(e,n,o),r=!0},p(e,[r]){const l=239&r?(0,i.LoY)(s,[33&r&&{use:[e[5],...e[0]]},70&r&&{class:(0,o.$o)({[e[1]]:!0,"mdc-button__icon":"button"===e[6],"mdc-fab__icon":"fab"===e[6],"mdc-icon-button__icon":"icon-button"===e[6],"mdc-icon-button__icon--on":"icon-button"===e[6]&&e[2],"mdc-tab__icon":"tab"===e[6],"mdc-banner__icon":"banner"===e[6],"mdc-segmented-button__icon":"segmented-button"===e[6]})},s[2],8&r&&(0,i.gCg)(e[3]===p.Z?{focusable:"false",tabindex:"-1"}:{}),128&r&&(0,i.gCg)(e[7])]):{};if(2048&r&&(l.$$scope={dirty:r,ctx:e}),a!==(a=e[3])){if(t){(0,i.dvw)();const e=t;(0,i.etI)(e.$$.fragment,1,0,(()=>{(0,i.vpE)(e,1)})),(0,i.gbL)()}a?(t=new a(c(e)),e[10](t),(0,i.YCL)(t.$$.fragment),(0,i.Ui)(t.$$.fragment,1),(0,i.yef)(t,n.parentNode,n)):t=null}else a&&t.$set(l)},i(e){r||(t&&(0,i.Ui)(t.$$.fragment,e),r=!0)},o(e){t&&(0,i.etI)(t.$$.fragment,e),r=!1},d(r){e[10](null),r&&(0,i.ogt)(n),t&&(0,i.vpE)(t,r)}}}function g(e,t,n){const s=["use","class","on","component","getElement"];let a=(0,i.q2N)(t,s),{$$slots:c={},$$scope:l}=t;const u=(0,o.PD)((0,i.w2L)());let d,{use:p=[]}=t,{class:f=""}=t,{on:m=!1}=t,{component:g=h.Z}=t;const v=(0,r.fw)("SMUI:icon:context");return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(7,a=(0,i.q2N)(t,s)),"use"in e&&n(0,p=e.use),"class"in e&&n(1,f=e.class),"on"in e&&n(2,m=e.on),"component"in e&&n(3,g=e.component),"$$scope"in e&&n(11,l=e.$$scope)},[p,f,m,g,d,u,v,a,function(){return d.getElement()},c,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(4,d)}))},l]}class v extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,g,m,i.N8,{use:0,class:1,on:2,component:3,getElement:8})}get getElement(){return this.$$.ctx[8]}}const y=v;var b=n(48261);function E(e){let t;const n=e[4].default,r=(0,i.nuO)(n,e,e[3],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,[o]){r&&r.p&&(!t||8&o)&&(0,i.kmG)(r,n,e,e[3],t?(0,i.u2N)(n,e[3],o,null):(0,i.VOJ)(e[3]),null)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function S(e,t,n){let o,{$$slots:s={},$$scope:a}=t,{key:c}=t,{value:l}=t;const u=(0,b.fZ)(l);return(0,i.FIv)(e,u,(e=>n(5,o=e))),(0,r.v)(c,u),(0,r.ev)((()=>{u.set(void 0)})),e.$$set=e=>{"key"in e&&n(1,c=e.key),"value"in e&&n(2,l=e.value),"$$scope"in e&&n(3,a=e.$$scope)},e.$$.update=()=>{4&e.$$.dirty&&(0,i.fxP)(u,o=l,o)},[u,c,l,a,s]}class w extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,S,E,i.N8,{key:1,value:2})}}const _=w,T=d,x=y},62767:(e,t,n)=>{"use strict";function i(e){return Object.entries(e).filter((([e,t])=>""!==e&&t)).map((([e])=>e)).join(" ")}n.d(t,{$:()=>i})},1629:(e,t,n)=>{"use strict";n.d(t,{P:()=>a});var i=n(24234),r=n(25108);const o=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,s=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function a(e){let t,n=[];function a(t){(0,i.cKT)(e,t)}return e.$on=(e,i)=>{let s=e,a=()=>{};return t?a=t(s,i):n.push([s,i]),s.match(o)&&r&&r.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',s),(...e)=>{a()}},e=>{const c=[],l={};t=(t,n)=>{let u=t,d=n,h=!1;const p=u.match(o),f=u.match(s),m=p||f;if(u.match(/^SMUI:\w+:/)){const e=u.split(":");let t="";for(let n=0;n<e.length;n++)t+=n===e.length-1?":"+e[n]:e[n].split("-").map((e=>e.slice(0,1).toUpperCase()+e.slice(1))).join("");r.warn(`The event ${u.split("$")[0]} has been renamed to ${t.split("$")[0]}.`),u=t}if(m){const e=u.split(p?":":"$");u=e[0];const t=Object.fromEntries(e.slice(1).map((e=>[e,!0])));t.passive&&(h=h||{},h.passive=!0),t.nonpassive&&(h=h||{},h.passive=!1),t.capture&&(h=h||{},h.capture=!0),t.once&&(h=h||{},h.once=!0),t.preventDefault&&(d=(0,i.AT7)(d)),t.stopPropagation&&(d=(0,i.XET)(d))}const g=(0,i.oLt)(e,u,d,h),v=()=>{g();const e=c.indexOf(v);e>-1&&c.splice(e,1)};return c.push(v),u in l||(l[u]=(0,i.oLt)(e,u,a)),v};for(let e=0;e<n.length;e++)t(n[e][0],n[e][1]);return{destroy:()=>{for(let e=0;e<c.length;e++)c[e]();for(let e of Object.entries(l))e[1]()}}}}},47658:(e,t,n)=>{"use strict";n.d(t,{$o:()=>i.$,WI:()=>r,De:()=>o,PD:()=>s.P,bO:()=>a,ol:()=>c});var i=n(62767);function r(e,t,n,i={bubbles:!0}){if("undefined"!=typeof Event&&e){const r=new CustomEvent(t,Object.assign(Object.assign({},i),{detail:n}));return null==e||e.dispatchEvent(r),r}}function o(e,t){let n=Object.getOwnPropertyNames(e);const i={};for(let r=0;r<n.length;r++){const o=n[r],s=o.indexOf("$");-1!==s&&-1!==t.indexOf(o.substring(0,s+1))||-1===t.indexOf(o)&&(i[o]=e[o])}return i}var s=n(1629);function a(e,t){let n=Object.getOwnPropertyNames(e);const i={};for(let r=0;r<n.length;r++){const o=n[r];o.substring(0,t.length)===t&&(i[o.substring(t.length)]=e[o])}return i}function c(e,t){let n=[];if(t)for(let i=0;i<t.length;i++){const r=t[i],o=Array.isArray(r)?r[0]:r;Array.isArray(r)&&r.length>1?n.push(o(e,r[1])):n.push(o(e))}return{update(e){if((e&&e.length||0)!=n.length)throw new Error("You must not change the length of an actions array.");if(e)for(let t=0;t<e.length;t++){const i=n[t];if(i&&i.update){const n=e[t];Array.isArray(n)&&n.length>1?i.update(n[1]):i.update()}}},destroy(){for(let e=0;e<n.length;e++){const t=n[e];t&&t.destroy&&t.destroy()}}}}},8830:(e,t,n)=>{"use strict";n.d(t,{uT:()=>J,bL:()=>Z,Fb:()=>X,X2:()=>Q,ZP:()=>ee});var i,r=n(24234),o=n(70655),s=n(6308),a="mdc-data-table__header-cell--sorted",c="mdc-data-table__header-cell--sorted-descending",l="mdc-data-table--in-progress",u="mdc-data-table__row--selected",d="aria-selected",h="aria-sort";!function(e){e.ASCENDING="ascending",e.DESCENDING="descending",e.NONE="none",e.OTHER="other"}(i||(i={}));var p=function(e){function t(n){return e.call(this,(0,o.pi)((0,o.pi)({},t.defaultAdapter),n))||this}return(0,o.ZT)(t,e),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},addClassAtRowIndex:function(){},getAttributeByHeaderCellIndex:function(){return""},getHeaderCellCount:function(){return 0},getHeaderCellElements:function(){return[]},getRowCount:function(){return 0},getRowElements:function(){return[]},getRowIdAtIndex:function(){return""},getRowIndexByChildElement:function(){return 0},getSelectedRowCount:function(){return 0},getTableContainerHeight:function(){return 0},getTableHeaderHeight:function(){return 0},isCheckboxAtRowIndexChecked:function(){return!1},isHeaderRowCheckboxChecked:function(){return!1},isRowsSelectable:function(){return!1},notifyRowSelectionChanged:function(){},notifySelectedAll:function(){},notifySortAction:function(){},notifyUnselectedAll:function(){},registerHeaderRowCheckbox:function(){},registerRowCheckboxes:function(){},removeClass:function(){},removeClassAtRowIndex:function(){},removeClassNameByHeaderCellIndex:function(){},setAttributeAtRowIndex:function(){},setAttributeByHeaderCellIndex:function(){},setClassNameByHeaderCellIndex:function(){},setHeaderRowCheckboxChecked:function(){},setHeaderRowCheckboxIndeterminate:function(){},setProgressIndicatorStyles:function(){},setRowCheckboxCheckedAtIndex:function(){},setSortStatusLabelByHeaderCellIndex:function(){}}},enumerable:!1,configurable:!0}),t.prototype.layout=function(){this.adapter.isRowsSelectable()&&(this.adapter.registerHeaderRowCheckbox(),this.adapter.registerRowCheckboxes(),this.setHeaderRowCheckboxState())},t.prototype.layoutAsync=function(){return(0,o.mG)(this,void 0,void 0,(function(){return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return this.adapter.isRowsSelectable()?[4,this.adapter.registerHeaderRowCheckbox()]:[3,3];case 1:return e.sent(),[4,this.adapter.registerRowCheckboxes()];case 2:e.sent(),this.setHeaderRowCheckboxState(),e.label=3;case 3:return[2]}}))}))},t.prototype.getRows=function(){return this.adapter.getRowElements()},t.prototype.getHeaderCells=function(){return this.adapter.getHeaderCellElements()},t.prototype.setSelectedRowIds=function(e){for(var t=0;t<this.adapter.getRowCount();t++){var n=this.adapter.getRowIdAtIndex(t),i=!1;n&&e.indexOf(n)>=0&&(i=!0),this.adapter.setRowCheckboxCheckedAtIndex(t,i),this.selectRowAtIndex(t,i)}this.setHeaderRowCheckboxState()},t.prototype.getRowIds=function(){for(var e=[],t=0;t<this.adapter.getRowCount();t++)e.push(this.adapter.getRowIdAtIndex(t));return e},t.prototype.getSelectedRowIds=function(){for(var e=[],t=0;t<this.adapter.getRowCount();t++)this.adapter.isCheckboxAtRowIndexChecked(t)&&e.push(this.adapter.getRowIdAtIndex(t));return e},t.prototype.handleHeaderRowCheckboxChange=function(){for(var e=this.adapter.isHeaderRowCheckboxChecked(),t=0;t<this.adapter.getRowCount();t++)this.adapter.setRowCheckboxCheckedAtIndex(t,e),this.selectRowAtIndex(t,e);e?this.adapter.notifySelectedAll():this.adapter.notifyUnselectedAll()},t.prototype.handleRowCheckboxChange=function(e){var t=this.adapter.getRowIndexByChildElement(e.target);if(-1!==t){var n=this.adapter.isCheckboxAtRowIndexChecked(t);this.selectRowAtIndex(t,n),this.setHeaderRowCheckboxState();var i=this.adapter.getRowIdAtIndex(t);this.adapter.notifyRowSelectionChanged({rowId:i,rowIndex:t,selected:n})}},t.prototype.handleSortAction=function(e){for(var t=e.columnId,n=e.columnIndex,r=e.headerCell,o=0;o<this.adapter.getHeaderCellCount();o++)o!==n&&(this.adapter.removeClassNameByHeaderCellIndex(o,a),this.adapter.removeClassNameByHeaderCellIndex(o,c),this.adapter.setAttributeByHeaderCellIndex(o,h,i.NONE),this.adapter.setSortStatusLabelByHeaderCellIndex(o,i.NONE));this.adapter.setClassNameByHeaderCellIndex(n,a);var s=this.adapter.getAttributeByHeaderCellIndex(n,h),l=i.NONE;s===i.ASCENDING?(this.adapter.setClassNameByHeaderCellIndex(n,c),this.adapter.setAttributeByHeaderCellIndex(n,h,i.DESCENDING),l=i.DESCENDING):s===i.DESCENDING?(this.adapter.removeClassNameByHeaderCellIndex(n,c),this.adapter.setAttributeByHeaderCellIndex(n,h,i.ASCENDING),l=i.ASCENDING):(this.adapter.setAttributeByHeaderCellIndex(n,h,i.ASCENDING),l=i.ASCENDING),this.adapter.setSortStatusLabelByHeaderCellIndex(n,l),this.adapter.notifySortAction({columnId:t,columnIndex:n,headerCell:r,sortValue:l})},t.prototype.showProgress=function(){var e=this.adapter.getTableHeaderHeight(),t=this.adapter.getTableContainerHeight()-e,n=e;this.adapter.setProgressIndicatorStyles({height:t+"px",top:n+"px"}),this.adapter.addClass(l)},t.prototype.hideProgress=function(){this.adapter.removeClass(l)},t.prototype.setHeaderRowCheckboxState=function(){0===this.adapter.getSelectedRowCount()?(this.adapter.setHeaderRowCheckboxChecked(!1),this.adapter.setHeaderRowCheckboxIndeterminate(!1)):this.adapter.getSelectedRowCount()===this.adapter.getRowCount()?(this.adapter.setHeaderRowCheckboxChecked(!0),this.adapter.setHeaderRowCheckboxIndeterminate(!1)):(this.adapter.setHeaderRowCheckboxIndeterminate(!0),this.adapter.setHeaderRowCheckboxChecked(!1))},t.prototype.selectRowAtIndex=function(e,t){t?(this.adapter.addClassAtRowIndex(e,u),this.adapter.setAttributeAtRowIndex(e,d,"true")):(this.adapter.removeClassAtRowIndex(e,u),this.adapter.setAttributeAtRowIndex(e,d,"false"))},t}(s.K),f=n(42851),m=n(68568),g=n(48261),v=n(47658);const y=e=>({}),b=e=>({}),E=e=>({}),S=e=>({});function w(e){let t,n,i,o,s;const a=e[32].progress,c=(0,r.nuO)(a,e,e[31],S);return{c(){t=(0,r.bGB)("div"),n=(0,r.bGB)("div"),i=(0,r.DhX)(),c&&c.c(),(0,r.Ljt)(n,"class","mdc-data-table__scrim"),(0,r.Ljt)(t,"class","mdc-data-table__progress-indicator"),(0,r.Ljt)(t,"style",o=Object.entries(e[13]).map(T).join(" "))},m(e,o){(0,r.$Tr)(e,t,o),(0,r.R3I)(t,n),(0,r.R3I)(t,i),c&&c.m(t,null),s=!0},p(e,n){c&&c.p&&(!s||1&n[1])&&(0,r.kmG)(c,a,e,e[31],s?(0,r.u2N)(a,e[31],n,E):(0,r.VOJ)(e[31]),S),(!s||8192&n[0]&&o!==(o=Object.entries(e[13]).map(T).join(" ")))&&(0,r.Ljt)(t,"style",o)},i(e){s||((0,r.Ui)(c,e),s=!0)},o(e){(0,r.etI)(c,e),s=!1},d(e){e&&(0,r.ogt)(t),c&&c.d(e)}}}function _(e){let t,n,i,o,s,a,c,l,u,d,h,p,f,m,g;const E=e[32].default,S=(0,r.nuO)(E,e,e[31],null);let _=[{class:o=(0,v.$o)({[e[6]]:!0,"mdc-data-table__table":!0})},(0,v.bO)(e[21],"table$")],T={};for(let e=0;e<_.length;e+=1)T=(0,r.f0i)(T,_[e]);let x=[{class:a=(0,v.$o)({[e[4]]:!0,"mdc-data-table__table-container":!0})},(0,v.bO)(e[21],"container$")],C={};for(let e=0;e<x.length;e+=1)C=(0,r.f0i)(C,x[e]);let I=e[20].progress&&w(e);const k=e[32].paginate,M=(0,r.nuO)(k,e,e[31],b);let A=[{class:d=(0,v.$o)({[e[1]]:!0,"mdc-data-table":!0,"mdc-data-table--sticky-header":e[2],...e[12]})},(0,v.De)(e[21],["container$","table$"])],O={};for(let e=0;e<A.length;e+=1)O=(0,r.f0i)(O,A[e]);return{c(){t=(0,r.bGB)("div"),n=(0,r.bGB)("div"),i=(0,r.bGB)("table"),S&&S.c(),l=(0,r.DhX)(),I&&I.c(),u=(0,r.DhX)(),M&&M.c(),(0,r.UF7)(i,T),(0,r.UF7)(n,C),(0,r.UF7)(t,O)},m(o,a){(0,r.$Tr)(o,t,a),(0,r.R3I)(t,n),(0,r.R3I)(n,i),S&&S.m(i,null),e[33](n),(0,r.R3I)(t,l),I&&I.m(t,null),(0,r.R3I)(t,u),M&&M.m(t,null),e[34](t),f=!0,m||(g=[(0,r.TVh)(s=v.ol.call(null,i,e[5])),(0,r.TVh)(c=v.ol.call(null,n,e[3])),(0,r.TVh)(h=v.ol.call(null,t,e[0])),(0,r.TVh)(p=e[15].call(null,t)),(0,r.oLt)(t,"SMUICheckbox:mount",e[35]),(0,r.oLt)(t,"SMUIDataTableHeader:mount",e[36]),(0,r.oLt)(t,"SMUIDataTableHeader:unmount",e[37]),(0,r.oLt)(t,"SMUIDataTableBody:mount",e[38]),(0,r.oLt)(t,"SMUIDataTableBody:unmount",e[39]),(0,r.oLt)(t,"SMUIDataTableHeaderCheckbox:change",e[40]),(0,r.oLt)(t,"SMUIDataTableHeader:click",e[19]),(0,r.oLt)(t,"SMUIDataTableBodyCheckbox:change",e[41])],m=!0)},p(e,l){S&&S.p&&(!f||1&l[1])&&(0,r.kmG)(S,E,e,e[31],f?(0,r.u2N)(E,e[31],l,null):(0,r.VOJ)(e[31]),null),(0,r.UF7)(i,T=(0,r.LoY)(_,[(!f||64&l[0]&&o!==(o=(0,v.$o)({[e[6]]:!0,"mdc-data-table__table":!0})))&&{class:o},2097152&l[0]&&(0,v.bO)(e[21],"table$")])),s&&(0,r.sBU)(s.update)&&32&l[0]&&s.update.call(null,e[5]),(0,r.UF7)(n,C=(0,r.LoY)(x,[(!f||16&l[0]&&a!==(a=(0,v.$o)({[e[4]]:!0,"mdc-data-table__table-container":!0})))&&{class:a},2097152&l[0]&&(0,v.bO)(e[21],"container$")])),c&&(0,r.sBU)(c.update)&&8&l[0]&&c.update.call(null,e[3]),e[20].progress?I?(I.p(e,l),1048576&l[0]&&(0,r.Ui)(I,1)):(I=w(e),I.c(),(0,r.Ui)(I,1),I.m(t,u)):I&&((0,r.dvw)(),(0,r.etI)(I,1,1,(()=>{I=null})),(0,r.gbL)()),M&&M.p&&(!f||1&l[1])&&(0,r.kmG)(M,k,e,e[31],f?(0,r.u2N)(k,e[31],l,y):(0,r.VOJ)(e[31]),b),(0,r.UF7)(t,O=(0,r.LoY)(A,[(!f||4102&l[0]&&d!==(d=(0,v.$o)({[e[1]]:!0,"mdc-data-table":!0,"mdc-data-table--sticky-header":e[2],...e[12]})))&&{class:d},2097152&l[0]&&(0,v.De)(e[21],["container$","table$"])])),h&&(0,r.sBU)(h.update)&&1&l[0]&&h.update.call(null,e[0])},i(e){f||((0,r.Ui)(S,e),(0,r.Ui)(I),(0,r.Ui)(M,e),f=!0)},o(e){(0,r.etI)(S,e),(0,r.etI)(I),(0,r.etI)(M,e),f=!1},d(n){n&&(0,r.ogt)(t),S&&S.d(n),e[33](null),I&&I.d(),M&&M.d(n),e[34](null),m=!1,(0,r.j7q)(g)}}}const T=([e,t])=>`${e}: ${t};`;function x(e,t,n){const i=["use","class","stickyHeader","sortable","sort","sortDirection","sortAscendingAriaLabel","sortDescendingAriaLabel","container$use","container$class","table$use","table$class","layout","getElement"];let o,s,a,c=(0,r.q2N)(t,i),{$$slots:l={},$$scope:u}=t;const d=(0,r.XGm)(l),{closest:h}=f,y=(0,v.PD)((0,r.w2L)());let b,E,S,w,_,T,{use:x=[]}=t,{class:C=""}=t,{stickyHeader:I=!1}=t,{sortable:k=!1}=t,{sort:M=null}=t,{sortDirection:A="ascending"}=t,{sortAscendingAriaLabel:O="sorted, ascending"}=t,{sortDescendingAriaLabel:R="sorted, descending"}=t,{container$use:L=[]}=t,{container$class:D=""}=t,{table$use:N=[]}=t,{table$class:P=""}=t,$={},U={height:"auto",top:"initial"},B=(0,m.fw)("SMUI:addLayoutListener"),F=!1,j=(0,g.fZ)(!1);(0,r.FIv)(e,j,(e=>n(30,o=e)));let H=(0,g.fZ)(M);(0,r.FIv)(e,H,(e=>n(44,a=e)));let K,q=(0,g.fZ)(A);function V(e){$[e]||n(12,$[e]=!0,$)}function G(e){e in $&&!$[e]||n(12,$[e]=!1,$)}function W(e){const t=null==w?void 0:w.checkbox;t&&(t.indeterminate=e)}function z(){return E.layout()}function Y(){return b}return(0,r.FIv)(e,q,(e=>n(43,s=e))),(0,m.v)("SMUI:checkbox:context","data-table"),(0,m.v)("SMUI:linear-progress:context","data-table"),(0,m.v)("SMUI:linear-progress:closed",j),(0,m.v)("SMUI:data-table:sortable",k),(0,m.v)("SMUI:data-table:sort",H),(0,m.v)("SMUI:data-table:sortDirection",q),(0,m.v)("SMUI:data-table:sortAscendingAriaLabel",O),(0,m.v)("SMUI:data-table:sortDescendingAriaLabel",R),B&&(T=B(z)),(0,m.H3)((()=>(n(7,E=new p({addClass:V,removeClass:G,getHeaderCellElements:()=>{var e;return null!==(e=null==w?void 0:w.cells.map((e=>e.element)))&&void 0!==e?e:[]},getHeaderCellCount:()=>{var e;return null!==(e=null==w?void 0:w.cells.length)&&void 0!==e?e:0},getAttributeByHeaderCellIndex:(e,t)=>{var n;return null!==(n=null==w?void 0:w.orderedCells[e].getAttr(t))&&void 0!==n?n:null},setAttributeByHeaderCellIndex:(e,t,n)=>{null==w||w.orderedCells[e].addAttr(t,n)},setClassNameByHeaderCellIndex:(e,t)=>{null==w||w.orderedCells[e].addClass(t)},removeClassNameByHeaderCellIndex:(e,t)=>{null==w||w.orderedCells[e].removeClass(t)},notifySortAction:e=>{n(22,M=e.columnId),n(23,A=e.sortValue),(0,v.WI)(Y(),"MDCDataTable:sorted",e)},getTableContainerHeight:()=>S.getBoundingClientRect().height,getTableHeaderHeight:()=>{const e=Y().querySelector(".mdc-data-table__header-row");if(!e)throw new Error("MDCDataTable: Table header element not found.");return e.getBoundingClientRect().height},setProgressIndicatorStyles:e=>{n(13,U=e)},addClassAtRowIndex:(e,t)=>{null==_||_.orderedRows[e].addClass(t)},getRowCount:()=>{var e;return null!==(e=null==_?void 0:_.rows.length)&&void 0!==e?e:0},getRowElements:()=>{var e;return null!==(e=null==_?void 0:_.rows.map((e=>e.element)))&&void 0!==e?e:[]},getRowIdAtIndex:e=>{var t;return null!==(t=null==_?void 0:_.orderedRows[e].rowId)&&void 0!==t?t:null},getRowIndexByChildElement:e=>{var t;return null!==(t=null==_?void 0:_.orderedRows.map((e=>e.element)).indexOf(h(e,".mdc-data-table__row")))&&void 0!==t?t:-1},getSelectedRowCount:()=>{var e;return null!==(e=null==_?void 0:_.rows.filter((e=>e.selected)).length)&&void 0!==e?e:0},isCheckboxAtRowIndexChecked:e=>{const t=null==_?void 0:_.orderedRows[e].checkbox;return!!t&&t.checked},isHeaderRowCheckboxChecked:()=>{const e=null==w?void 0:w.checkbox;return!!e&&e.checked},isRowsSelectable:()=>!!Y().querySelector(".mdc-data-table__row-checkbox")||!!Y().querySelector(".mdc-data-table__header-row-checkbox"),notifyRowSelectionChanged:e=>{const t=null==_?void 0:_.orderedRows[e.rowIndex];t&&(0,v.WI)(Y(),"MDCDataTable:rowSelectionChanged",{row:t.element,rowId:t.rowId,rowIndex:e.rowIndex,selected:e.selected})},notifySelectedAll:()=>{W(!1),(0,v.WI)(Y(),"MDCDataTable:selectedAll")},notifyUnselectedAll:()=>{W(!1),(0,v.WI)(Y(),"MDCDataTable:unselectedAll")},registerHeaderRowCheckbox:()=>{},registerRowCheckboxes:()=>{},removeClassAtRowIndex:(e,t)=>{null==_||_.orderedRows[e].removeClass(t)},setAttributeAtRowIndex:(e,t,n)=>{null==_||_.orderedRows[e].addAttr(t,n)},setHeaderRowCheckboxChecked:e=>{const t=null==w?void 0:w.checkbox;t&&(t.checked=e)},setHeaderRowCheckboxIndeterminate:W,setRowCheckboxCheckedAtIndex:(e,t)=>{const n=null==_?void 0:_.orderedRows[e].checkbox;n&&(n.checked=t)},setSortStatusLabelByHeaderCellIndex:(e,t)=>{}})),E.init(),E.layout(),n(14,F=!0),()=>{E.destroy()}))),(0,m.ev)((()=>{T&&T()})),e.$$set=e=>{t=(0,r.f0i)((0,r.f0i)({},t),(0,r.Jvk)(e)),n(21,c=(0,r.q2N)(t,i)),"use"in e&&n(0,x=e.use),"class"in e&&n(1,C=e.class),"stickyHeader"in e&&n(2,I=e.stickyHeader),"sortable"in e&&n(24,k=e.sortable),"sort"in e&&n(22,M=e.sort),"sortDirection"in e&&n(23,A=e.sortDirection),"sortAscendingAriaLabel"in e&&n(25,O=e.sortAscendingAriaLabel),"sortDescendingAriaLabel"in e&&n(26,R=e.sortDescendingAriaLabel),"container$use"in e&&n(3,L=e.container$use),"container$class"in e&&n(4,D=e.container$class),"table$use"in e&&n(5,N=e.table$use),"table$class"in e&&n(6,P=e.table$class),"$$scope"in e&&n(31,u=e.$$scope)},e.$$.update=()=>{4194304&e.$$.dirty[0]&&(0,r.fxP)(H,a=M,a),8388608&e.$$.dirty[0]&&(0,r.fxP)(q,s=A,s),1610612864&e.$$.dirty[0]&&d.progress&&E&&K!==o&&(n(29,K=o),o?E.hideProgress():E.showProgress())},[x,C,I,L,D,N,P,E,b,S,w,_,$,U,F,y,j,H,q,function(e){if(!E||!e.detail.target)return;const t=h(e.detail.target,".mdc-data-table__header-cell--with-sort");t&&function(e){var t,n;const i=null!==(t=null==w?void 0:w.orderedCells)&&void 0!==t?t:[],r=i.map((e=>e.element)).indexOf(e);if(-1===r)return;const o=null!==(n=i[r].columnId)&&void 0!==n?n:null;E.handleSortAction({columnId:o,columnIndex:r,headerCell:e})}(t)},d,c,M,A,k,O,R,z,Y,K,o,u,l,function(e){r.VnY[e?"unshift":"push"]((()=>{S=e,n(9,S)}))},function(e){r.VnY[e?"unshift":"push"]((()=>{b=e,n(8,b)}))},()=>E&&F&&E.layout(),e=>n(10,w=e.detail),()=>n(10,w=void 0),e=>n(11,_=e.detail),()=>n(11,_=void 0),()=>E&&E.handleHeaderRowCheckboxChange(),e=>E&&E.handleRowCheckboxChange(e)]}class C extends r.f_C{constructor(e){super(),(0,r.S1n)(this,e,x,_,r.N8,{use:0,class:1,stickyHeader:2,sortable:24,sort:22,sortDirection:23,sortAscendingAriaLabel:25,sortDescendingAriaLabel:26,container$use:3,container$class:4,table$use:5,table$class:6,layout:27,getElement:28},null,[-1,-1])}get layout(){return this.$$.ctx[27]}get getElement(){return this.$$.ctx[28]}}const I=C;function k(e){let t,n,i,o,s,a;const c=e[9].default,l=(0,r.nuO)(c,e,e[8],null);let u=[e[6]],d={};for(let e=0;e<u.length;e+=1)d=(0,r.f0i)(d,u[e]);return{c(){t=(0,r.bGB)("thead"),l&&l.c(),(0,r.UF7)(t,d)},m(c,u){(0,r.$Tr)(c,t,u),l&&l.m(t,null),e[10](t),o=!0,s||(a=[(0,r.TVh)(n=v.ol.call(null,t,e[0])),(0,r.TVh)(i=e[3].call(null,t)),(0,r.oLt)(t,"SMUICheckbox:mount",e[11]),(0,r.oLt)(t,"SMUICheckbox:unmount",e[12]),(0,r.oLt)(t,"SMUIDataTableCell:mount",e[4]),(0,r.oLt)(t,"SMUIDataTableCell:unmount",e[5])],s=!0)},p(e,[i]){l&&l.p&&(!o||256&i)&&(0,r.kmG)(l,c,e,e[8],o?(0,r.u2N)(c,e[8],i,null):(0,r.VOJ)(e[8]),null),(0,r.UF7)(t,d=(0,r.LoY)(u,[64&i&&e[6]])),n&&(0,r.sBU)(n.update)&&1&i&&n.update.call(null,e[0])},i(e){o||((0,r.Ui)(l,e),o=!0)},o(e){(0,r.etI)(l,e),o=!1},d(n){n&&(0,r.ogt)(t),l&&l.d(n),e[10](null),s=!1,(0,r.j7q)(a)}}}function M(e,t,n){const i=["use","getElement"];let o=(0,r.q2N)(t,i),{$$slots:s={},$$scope:a}=t;const c=(0,v.PD)((0,r.w2L)());let l,u,{use:d=[]}=t,h=[];const p=new WeakMap;function f(){return l}return(0,m.v)("SMUI:data-table:row:header",!0),(0,m.H3)((()=>{const e={get cells(){return h},get orderedCells(){return[...f().querySelectorAll(".mdc-data-table__header-cell")].map((e=>p.get(e))).filter((e=>e&&e._smui_data_table_header_cell_accessor))},get checkbox(){return u}};return(0,v.WI)(f(),"SMUIDataTableHeader:mount",e),()=>{(0,v.WI)(f(),"SMUIDataTableHeader:unmount",e)}})),e.$$set=e=>{t=(0,r.f0i)((0,r.f0i)({},t),(0,r.Jvk)(e)),n(6,o=(0,r.q2N)(t,i)),"use"in e&&n(0,d=e.use),"$$scope"in e&&n(8,a=e.$$scope)},[d,l,u,c,function(e){h.push(e.detail),p.set(e.detail.element,e.detail),e.stopPropagation()},function(e){const t=h.indexOf(e.detail);-1!==t&&h.splice(t,1),p.delete(e.detail.element),e.stopPropagation()},o,f,a,s,function(e){r.VnY[e?"unshift":"push"]((()=>{l=e,n(1,l)}))},e=>n(2,u=e.detail),()=>n(2,u=void 0)]}class A extends r.f_C{constructor(e){super(),(0,r.S1n)(this,e,M,k,r.N8,{use:0,getElement:7})}get getElement(){return this.$$.ctx[7]}}const O=A;function R(e){let t,n,i,o,s,a,c;const l=e[9].default,u=(0,r.nuO)(l,e,e[8],null);let d=[{class:n=(0,v.$o)({[e[1]]:!0,"mdc-data-table__content":!0})},e[6]],h={};for(let e=0;e<d.length;e+=1)h=(0,r.f0i)(h,d[e]);return{c(){t=(0,r.bGB)("tbody"),u&&u.c(),(0,r.UF7)(t,h)},m(n,l){(0,r.$Tr)(n,t,l),u&&u.m(t,null),e[10](t),s=!0,a||(c=[(0,r.TVh)(i=v.ol.call(null,t,e[0])),(0,r.TVh)(o=e[3].call(null,t)),(0,r.oLt)(t,"SMUIDataTableRow:mount",e[4]),(0,r.oLt)(t,"SMUIDataTableRow:unmount",e[5])],a=!0)},p(e,[o]){u&&u.p&&(!s||256&o)&&(0,r.kmG)(u,l,e,e[8],s?(0,r.u2N)(l,e[8],o,null):(0,r.VOJ)(e[8]),null),(0,r.UF7)(t,h=(0,r.LoY)(d,[(!s||2&o&&n!==(n=(0,v.$o)({[e[1]]:!0,"mdc-data-table__content":!0})))&&{class:n},64&o&&e[6]])),i&&(0,r.sBU)(i.update)&&1&o&&i.update.call(null,e[0])},i(e){s||((0,r.Ui)(u,e),s=!0)},o(e){(0,r.etI)(u,e),s=!1},d(n){n&&(0,r.ogt)(t),u&&u.d(n),e[10](null),a=!1,(0,r.j7q)(c)}}}function L(e,t,n){const i=["use","class","getElement"];let o=(0,r.q2N)(t,i),{$$slots:s={},$$scope:a}=t;const c=(0,v.PD)((0,r.w2L)());let l,{use:u=[]}=t,{class:d=""}=t,h=[];const p=new WeakMap;function f(){return l}return(0,m.v)("SMUI:data-table:row:header",!1),(0,m.H3)((()=>{const e={get rows(){return h},get orderedRows(){return[...f().querySelectorAll(".mdc-data-table__row")].map((e=>p.get(e))).filter((e=>e&&e._smui_data_table_row_accessor))}};return(0,v.WI)(f(),"SMUIDataTableBody:mount",e),()=>{(0,v.WI)(f(),"SMUIDataTableBody:unmount",e)}})),e.$$set=e=>{t=(0,r.f0i)((0,r.f0i)({},t),(0,r.Jvk)(e)),n(6,o=(0,r.q2N)(t,i)),"use"in e&&n(0,u=e.use),"class"in e&&n(1,d=e.class),"$$scope"in e&&n(8,a=e.$$scope)},[u,d,l,c,function(e){h.push(e.detail),p.set(e.detail.element,e.detail),e.stopPropagation()},function(e){const t=h.indexOf(e.detail);-1!==t&&h.splice(t,1),p.delete(e.detail.element),e.stopPropagation()},o,f,a,s,function(e){r.VnY[e?"unshift":"push"]((()=>{l=e,n(2,l)}))}]}class D extends r.f_C{constructor(e){super(),(0,r.S1n)(this,e,L,R,r.N8,{use:0,class:1,getElement:7})}get getElement(){return this.$$.ctx[7]}}const N=D;function P(e){let t,n,i,o,s,a,c,l;const u=e[13].default,d=(0,r.nuO)(u,e,e[12],null);let h=[{class:n=(0,v.$o)({[e[1]]:!0,"mdc-data-table__header-row":e[7],"mdc-data-table__row":!e[7],"mdc-data-table__row--selected":!e[7]&&e[3]&&e[3].checked,...e[4]})},{"aria-selected":i=e[3]?e[3].checked?"true":"false":void 0},e[5],e[9]],p={};for(let e=0;e<h.length;e+=1)p=(0,r.f0i)(p,h[e]);return{c(){t=(0,r.bGB)("tr"),d&&d.c(),(0,r.UF7)(t,p)},m(n,i){(0,r.$Tr)(n,t,i),d&&d.m(t,null),e[14](t),a=!0,c||(l=[(0,r.TVh)(o=v.ol.call(null,t,e[0])),(0,r.TVh)(s=e[6].call(null,t)),(0,r.oLt)(t,"click",e[15]),(0,r.oLt)(t,"SMUICheckbox:mount",e[16]),(0,r.oLt)(t,"SMUICheckbox:unmount",e[17])],c=!0)},p(e,[s]){d&&d.p&&(!a||4096&s)&&(0,r.kmG)(d,u,e,e[12],a?(0,r.u2N)(u,e[12],s,null):(0,r.VOJ)(e[12]),null),(0,r.UF7)(t,p=(0,r.LoY)(h,[(!a||26&s&&n!==(n=(0,v.$o)({[e[1]]:!0,"mdc-data-table__header-row":e[7],"mdc-data-table__row":!e[7],"mdc-data-table__row--selected":!e[7]&&e[3]&&e[3].checked,...e[4]})))&&{class:n},(!a||8&s&&i!==(i=e[3]?e[3].checked?"true":"false":void 0))&&{"aria-selected":i},32&s&&e[5],512&s&&e[9]])),o&&(0,r.sBU)(o.update)&&1&s&&o.update.call(null,e[0])},i(e){a||((0,r.Ui)(d,e),a=!0)},o(e){(0,r.etI)(d,e),a=!1},d(n){n&&(0,r.ogt)(t),d&&d.d(n),e[14](null),c=!1,(0,r.j7q)(l)}}}let $=0;function U(e,t,n){const i=["use","class","rowId","getElement"];let o=(0,r.q2N)(t,i),{$$slots:s={},$$scope:a}=t;const c=(0,v.PD)((0,r.w2L)());let l,u,{use:d=[]}=t,{class:h=""}=t,{rowId:p="SMUI-data-table-row-"+$++}=t,f={},g={},y=(0,m.fw)("SMUI:data-table:row:header");function b(e){f[e]||n(4,f[e]=!0,f)}function E(e){e in f&&!f[e]||n(4,f[e]=!1,f)}function S(e){var t;return e in g?null!==(t=g[e])&&void 0!==t?t:null:T().getAttribute(e)}function w(e,t){g[e]!==t&&n(5,g[e]=t,g)}function _(e){(0,v.WI)(T(),"SMUIDataTableHeader:click",e)}function T(){return l}return(0,m.H3)((()=>{const e=y?{_smui_data_table_row_accessor:!1,get element(){return T()},get checkbox(){return u},get rowId(){},get selected(){var e;return null!==(e=u&&u.checked)&&void 0!==e&&e},addClass:b,removeClass:E,getAttr:S,addAttr:w}:{_smui_data_table_row_accessor:!0,get element(){return T()},get checkbox(){return u},get rowId(){return p},get selected(){var e;return null!==(e=u&&u.checked)&&void 0!==e&&e},addClass:b,removeClass:E,getAttr:S,addAttr:w};return(0,v.WI)(T(),"SMUIDataTableRow:mount",e),()=>{(0,v.WI)(T(),"SMUIDataTableRow:unmount",e)}})),e.$$set=e=>{t=(0,r.f0i)((0,r.f0i)({},t),(0,r.Jvk)(e)),n(9,o=(0,r.q2N)(t,i)),"use"in e&&n(0,d=e.use),"class"in e&&n(1,h=e.class),"rowId"in e&&n(10,p=e.rowId),"$$scope"in e&&n(12,a=e.$$scope)},[d,h,l,u,f,g,c,y,_,o,p,T,a,s,function(e){r.VnY[e?"unshift":"push"]((()=>{l=e,n(2,l)}))},e=>y&&_(e),e=>n(3,u=e.detail),()=>n(3,u=void 0)]}class B extends r.f_C{constructor(e){super(),(0,r.S1n)(this,e,U,P,r.N8,{use:0,class:1,rowId:10,getElement:11})}get getElement(){return this.$$.ctx[11]}}const F=B;function j(e){let t,n,i,o,s,a,c;const l=e[22].default,u=(0,r.nuO)(l,e,e[21],null);let d=[{class:n=(0,v.$o)({[e[1]]:!0,"mdc-data-table__cell":!0,"mdc-data-table__cell--numeric":e[2],"mdc-data-table__cell--checkbox":e[3],...e[7]})},e[8],e[19]],h={};for(let e=0;e<d.length;e+=1)h=(0,r.f0i)(h,d[e]);return{c(){t=(0,r.bGB)("td"),u&&u.c(),(0,r.UF7)(t,h)},m(n,l){(0,r.$Tr)(n,t,l),u&&u.m(t,null),e[25](t),s=!0,a||(c=[(0,r.TVh)(i=v.ol.call(null,t,e[0])),(0,r.TVh)(o=e[11].call(null,t)),(0,r.oLt)(t,"change",e[26])],a=!0)},p(e,o){u&&u.p&&(!s||2097152&o)&&(0,r.kmG)(u,l,e,e[21],s?(0,r.u2N)(l,e[21],o,null):(0,r.VOJ)(e[21]),null),(0,r.UF7)(t,h=(0,r.LoY)(d,[(!s||142&o&&n!==(n=(0,v.$o)({[e[1]]:!0,"mdc-data-table__cell":!0,"mdc-data-table__cell--numeric":e[2],"mdc-data-table__cell--checkbox":e[3],...e[7]})))&&{class:n},256&o&&e[8],524288&o&&e[19]])),i&&(0,r.sBU)(i.update)&&1&o&&i.update.call(null,e[0])},i(e){s||((0,r.Ui)(u,e),s=!0)},o(e){(0,r.etI)(u,e),s=!1},d(n){n&&(0,r.ogt)(t),u&&u.d(n),e[25](null),a=!1,(0,r.j7q)(c)}}}function H(e){let t,n,i,o,s,a,c,l,u,d;const h=[q,K],p=[];function f(e,t){return e[5]?0:1}n=f(e),i=p[n]=h[n](e);let m=[{class:o=(0,v.$o)({[e[1]]:!0,"mdc-data-table__header-cell":!0,"mdc-data-table__header-cell--numeric":e[2],"mdc-data-table__header-cell--checkbox":e[3],"mdc-data-table__header-cell--with-sort":e[5],"mdc-data-table__header-cell--sorted":e[5]&&e[9]===e[4],...e[7]})},{role:"columnheader"},{scope:"col"},{"data-column-id":e[4]},{"aria-sort":s=e[5]?e[9]===e[4]?e[10]:"none":void 0},e[8],e[19]],g={};for(let e=0;e<m.length;e+=1)g=(0,r.f0i)(g,m[e]);return{c(){t=(0,r.bGB)("th"),i.c(),(0,r.UF7)(t,g)},m(i,o){(0,r.$Tr)(i,t,o),p[n].m(t,null),e[23](t),l=!0,u||(d=[(0,r.TVh)(a=v.ol.call(null,t,e[0])),(0,r.TVh)(c=e[11].call(null,t)),(0,r.oLt)(t,"change",e[24])],u=!0)},p(e,c){let u=n;n=f(e),n===u?p[n].p(e,c):((0,r.dvw)(),(0,r.etI)(p[u],1,1,(()=>{p[u]=null})),(0,r.gbL)(),i=p[n],i?i.p(e,c):(i=p[n]=h[n](e),i.c()),(0,r.Ui)(i,1),i.m(t,null)),(0,r.UF7)(t,g=(0,r.LoY)(m,[(!l||702&c&&o!==(o=(0,v.$o)({[e[1]]:!0,"mdc-data-table__header-cell":!0,"mdc-data-table__header-cell--numeric":e[2],"mdc-data-table__header-cell--checkbox":e[3],"mdc-data-table__header-cell--with-sort":e[5],"mdc-data-table__header-cell--sorted":e[5]&&e[9]===e[4],...e[7]})))&&{class:o},{role:"columnheader"},{scope:"col"},(!l||16&c)&&{"data-column-id":e[4]},(!l||1584&c&&s!==(s=e[5]?e[9]===e[4]?e[10]:"none":void 0))&&{"aria-sort":s},256&c&&e[8],524288&c&&e[19]])),a&&(0,r.sBU)(a.update)&&1&c&&a.update.call(null,e[0])},i(e){l||((0,r.Ui)(i),l=!0)},o(e){(0,r.etI)(i),l=!1},d(i){i&&(0,r.ogt)(t),p[n].d(),e[23](null),u=!1,(0,r.j7q)(d)}}}function K(e){let t;const n=e[22].default,i=(0,r.nuO)(n,e,e[21],null);return{c(){i&&i.c()},m(e,n){i&&i.m(e,n),t=!0},p(e,o){i&&i.p&&(!t||2097152&o)&&(0,r.kmG)(i,n,e,e[21],t?(0,r.u2N)(n,e[21],o,null):(0,r.VOJ)(e[21]),null)},i(e){t||((0,r.Ui)(i,e),t=!0)},o(e){(0,r.etI)(i,e),t=!1},d(e){i&&i.d(e)}}}function q(e){let t,n,i,o,s,a,c=(e[9]===e[4]?"ascending"===e[10]?e[15]:e[16]:"")+"";const l=e[22].default,u=(0,r.nuO)(l,e,e[21],null);return{c(){t=(0,r.bGB)("div"),u&&u.c(),n=(0,r.DhX)(),i=(0,r.bGB)("div"),o=(0,r.fLW)(c),(0,r.Ljt)(i,"class","mdc-data-table__sort-status-label"),(0,r.Ljt)(i,"aria-hidden","true"),(0,r.Ljt)(i,"id",s=e[4]+"-status-label"),(0,r.Ljt)(t,"class","mdc-data-table__header-cell-wrapper")},m(e,s){(0,r.$Tr)(e,t,s),u&&u.m(t,null),(0,r.R3I)(t,n),(0,r.R3I)(t,i),(0,r.R3I)(i,o),a=!0},p(e,t){u&&u.p&&(!a||2097152&t)&&(0,r.kmG)(u,l,e,e[21],a?(0,r.u2N)(l,e[21],t,null):(0,r.VOJ)(e[21]),null),(!a||1552&t)&&c!==(c=(e[9]===e[4]?"ascending"===e[10]?e[15]:e[16]:"")+"")&&(0,r.rTO)(o,c),(!a||16&t&&s!==(s=e[4]+"-status-label"))&&(0,r.Ljt)(i,"id",s)},i(e){a||((0,r.Ui)(u,e),a=!0)},o(e){(0,r.etI)(u,e),a=!1},d(e){e&&(0,r.ogt)(t),u&&u.d(e)}}}function V(e){let t,n,i,o;const s=[H,j],a=[];return t=function(e,t){return e[12]?0:1}(e),n=a[t]=s[t](e),{c(){n.c(),i=(0,r.cSb)()},m(e,n){a[t].m(e,n),(0,r.$Tr)(e,i,n),o=!0},p(e,[t]){n.p(e,t)},i(e){o||((0,r.Ui)(n),o=!0)},o(e){(0,r.etI)(n),o=!1},d(e){a[t].d(e),e&&(0,r.ogt)(i)}}}let G=0;function W(e,t,n){const i=["use","class","numeric","checkbox","columnId","sortable","getElement"];let o,s,a=(0,r.q2N)(t,i),{$$slots:c={},$$scope:l}=t;const u=(0,v.PD)((0,r.w2L)());let d,h=(0,m.fw)("SMUI:data-table:row:header"),{use:p=[]}=t,{class:f=""}=t,{numeric:g=!1}=t,{checkbox:y=!1}=t,{columnId:b=(h?"SMUI-data-table-column-"+G++:"SMUI-data-table-unused")}=t,{sortable:E=(0,m.fw)("SMUI:data-table:sortable")}=t,S={},w={},_=(0,m.fw)("SMUI:data-table:sort");(0,r.FIv)(e,_,(e=>n(9,o=e)));let T=(0,m.fw)("SMUI:data-table:sortDirection");(0,r.FIv)(e,T,(e=>n(10,s=e)));let x=(0,m.fw)("SMUI:data-table:sortAscendingAriaLabel"),C=(0,m.fw)("SMUI:data-table:sortDescendingAriaLabel");function I(e){S[e]||n(7,S[e]=!0,S)}function k(e){e in S&&!S[e]||n(7,S[e]=!1,S)}function M(e){var t;return e in w?null!==(t=w[e])&&void 0!==t?t:null:L().getAttribute(e)}function A(e,t){w[e]!==t&&n(8,w[e]=t,w)}function O(e){(0,v.WI)(L(),"SMUIDataTableHeaderCheckbox:change",e)}function R(e){(0,v.WI)(L(),"SMUIDataTableBodyCheckbox:change",e)}function L(){return d}return E&&((0,m.v)("SMUI:label:context","data-table:sortable-header-cell"),(0,m.v)("SMUI:icon-button:context","data-table:sortable-header-cell"),(0,m.v)("SMUI:icon-button:aria-describedby",b+"-status-label")),(0,m.H3)((()=>{const e=h?{_smui_data_table_header_cell_accessor:!0,get element(){return L()},get columnId(){return b},addClass:I,removeClass:k,getAttr:M,addAttr:A}:{_smui_data_table_header_cell_accessor:!1,get element(){return L()},get columnId(){},addClass:I,removeClass:k,getAttr:M,addAttr:A};return(0,v.WI)(L(),"SMUIDataTableCell:mount",e),()=>{(0,v.WI)(L(),"SMUIDataTableCell:unmount",e)}})),e.$$set=e=>{t=(0,r.f0i)((0,r.f0i)({},t),(0,r.Jvk)(e)),n(19,a=(0,r.q2N)(t,i)),"use"in e&&n(0,p=e.use),"class"in e&&n(1,f=e.class),"numeric"in e&&n(2,g=e.numeric),"checkbox"in e&&n(3,y=e.checkbox),"columnId"in e&&n(4,b=e.columnId),"sortable"in e&&n(5,E=e.sortable),"$$scope"in e&&n(21,l=e.$$scope)},[p,f,g,y,b,E,d,S,w,o,s,u,h,_,T,x,C,O,R,a,L,l,c,function(e){r.VnY[e?"unshift":"push"]((()=>{d=e,n(6,d)}))},e=>y&&O(e),function(e){r.VnY[e?"unshift":"push"]((()=>{d=e,n(6,d)}))},e=>y&&R(e)]}class z extends r.f_C{constructor(e){super(),(0,r.S1n)(this,e,W,V,r.N8,{use:0,class:1,numeric:2,checkbox:3,columnId:4,sortable:5,getElement:20})}get getElement(){return this.$$.ctx[20]}}const Y=z;n(32091);const X=O,J=N,Q=F,Z=Y,ee=I},30330:(e,t,n)=>{"use strict";n.d(t,{eX:()=>A,VY:()=>M,$Y:()=>O,Dx:()=>k,ZP:()=>R});var i,r=n(24234),o=n(70655),s=function(){function e(){this.rafIDs=new Map}return e.prototype.request=function(e,t){var n=this;this.cancel(e);var i=requestAnimationFrame((function(i){n.rafIDs.delete(e),t(i)}));this.rafIDs.set(e,i)},e.prototype.cancel=function(e){var t=this.rafIDs.get(e);t&&(cancelAnimationFrame(t),this.rafIDs.delete(e))},e.prototype.cancelAll=function(){var e=this;this.rafIDs.forEach((function(t,n){e.cancel(n)}))},e.prototype.getQueue=function(){var e=[];return this.rafIDs.forEach((function(t,n){e.push(n)})),e},e}(),a=n(6308),c={CLOSING:"mdc-dialog--closing",OPEN:"mdc-dialog--open",OPENING:"mdc-dialog--opening",SCROLLABLE:"mdc-dialog--scrollable",SCROLL_LOCK:"mdc-dialog-scroll-lock",STACKED:"mdc-dialog--stacked",FULLSCREEN:"mdc-dialog--fullscreen",SCROLL_DIVIDER_HEADER:"mdc-dialog-scroll-divider-header",SCROLL_DIVIDER_FOOTER:"mdc-dialog-scroll-divider-footer",SURFACE_SCRIM_SHOWN:"mdc-dialog__surface-scrim--shown",SURFACE_SCRIM_SHOWING:"mdc-dialog__surface-scrim--showing",SURFACE_SCRIM_HIDING:"mdc-dialog__surface-scrim--hiding",SCRIM_HIDDEN:"mdc-dialog__scrim--hidden"},l={ACTION_ATTRIBUTE:"data-mdc-dialog-action",BUTTON_DEFAULT_ATTRIBUTE:"data-mdc-dialog-button-default",BUTTON_SELECTOR:".mdc-dialog__button",CLOSED_EVENT:"MDCDialog:closed",CLOSE_ACTION:"close",CLOSING_EVENT:"MDCDialog:closing",CONTAINER_SELECTOR:".mdc-dialog__container",CONTENT_SELECTOR:".mdc-dialog__content",DESTROY_ACTION:"destroy",INITIAL_FOCUS_ATTRIBUTE:"data-mdc-dialog-initial-focus",OPENED_EVENT:"MDCDialog:opened",OPENING_EVENT:"MDCDialog:opening",SCRIM_SELECTOR:".mdc-dialog__scrim",SUPPRESS_DEFAULT_PRESS_SELECTOR:["textarea",".mdc-menu .mdc-list-item",".mdc-menu .mdc-deprecated-list-item"].join(", "),SURFACE_SELECTOR:".mdc-dialog__surface"},u={DIALOG_ANIMATION_CLOSE_TIME_MS:75,DIALOG_ANIMATION_OPEN_TIME_MS:150};!function(e){e.POLL_SCROLL_POS="poll_scroll_position",e.POLL_LAYOUT_CHANGE="poll_layout_change"}(i||(i={}));var d=function(e){function t(n){var i=e.call(this,(0,o.pi)((0,o.pi)({},t.defaultAdapter),n))||this;return i.dialogOpen=!1,i.isFullscreen=!1,i.animationFrame=0,i.animationTimer=0,i.escapeKeyAction=l.CLOSE_ACTION,i.scrimClickAction=l.CLOSE_ACTION,i.autoStackButtons=!0,i.areButtonsStacked=!1,i.suppressDefaultPressSelector=l.SUPPRESS_DEFAULT_PRESS_SELECTOR,i.animFrame=new s,i.contentScrollHandler=function(){i.handleScrollEvent()},i.windowResizeHandler=function(){i.layout()},i.windowOrientationChangeHandler=function(){i.layout()},i}return(0,o.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return u},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addBodyClass:function(){},addClass:function(){},areButtonsStacked:function(){return!1},clickDefaultButton:function(){},eventTargetMatches:function(){return!1},getActionFromEvent:function(){return""},getInitialFocusEl:function(){return null},hasClass:function(){return!1},isContentScrollable:function(){return!1},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},releaseFocus:function(){},removeBodyClass:function(){},removeClass:function(){},reverseButtons:function(){},trapFocus:function(){},registerContentEventHandler:function(){},deregisterContentEventHandler:function(){},isScrollableContentAtTop:function(){return!1},isScrollableContentAtBottom:function(){return!1},registerWindowEventHandler:function(){},deregisterWindowEventHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.hasClass(c.STACKED)&&this.setAutoStackButtons(!1),this.isFullscreen=this.adapter.hasClass(c.FULLSCREEN)},t.prototype.destroy=function(){this.dialogOpen&&this.close(l.DESTROY_ACTION),this.animationTimer&&(clearTimeout(this.animationTimer),this.handleAnimationTimerEnd()),this.isFullscreen&&this.adapter.deregisterContentEventHandler("scroll",this.contentScrollHandler),this.animFrame.cancelAll(),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("orientationchange",this.windowOrientationChangeHandler)},t.prototype.open=function(e){var t=this;this.dialogOpen=!0,this.adapter.notifyOpening(),this.adapter.addClass(c.OPENING),this.isFullscreen&&this.adapter.registerContentEventHandler("scroll",this.contentScrollHandler),e&&e.isAboveFullscreenDialog&&this.adapter.addClass(c.SCRIM_HIDDEN),this.adapter.registerWindowEventHandler("resize",this.windowResizeHandler),this.adapter.registerWindowEventHandler("orientationchange",this.windowOrientationChangeHandler),this.runNextAnimationFrame((function(){t.adapter.addClass(c.OPEN),t.adapter.addBodyClass(c.SCROLL_LOCK),t.layout(),t.animationTimer=setTimeout((function(){t.handleAnimationTimerEnd(),t.adapter.trapFocus(t.adapter.getInitialFocusEl()),t.adapter.notifyOpened()}),u.DIALOG_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.dialogOpen&&(this.dialogOpen=!1,this.adapter.notifyClosing(e),this.adapter.addClass(c.CLOSING),this.adapter.removeClass(c.OPEN),this.adapter.removeBodyClass(c.SCROLL_LOCK),this.isFullscreen&&this.adapter.deregisterContentEventHandler("scroll",this.contentScrollHandler),this.adapter.deregisterWindowEventHandler("resize",this.windowResizeHandler),this.adapter.deregisterWindowEventHandler("orientationchange",this.windowOrientationChangeHandler),cancelAnimationFrame(this.animationFrame),this.animationFrame=0,clearTimeout(this.animationTimer),this.animationTimer=setTimeout((function(){t.adapter.releaseFocus(),t.handleAnimationTimerEnd(),t.adapter.notifyClosed(e)}),u.DIALOG_ANIMATION_CLOSE_TIME_MS))},t.prototype.showSurfaceScrim=function(){var e=this;this.adapter.addClass(c.SURFACE_SCRIM_SHOWING),this.runNextAnimationFrame((function(){e.adapter.addClass(c.SURFACE_SCRIM_SHOWN)}))},t.prototype.hideSurfaceScrim=function(){this.adapter.removeClass(c.SURFACE_SCRIM_SHOWN),this.adapter.addClass(c.SURFACE_SCRIM_HIDING)},t.prototype.handleSurfaceScrimTransitionEnd=function(){this.adapter.removeClass(c.SURFACE_SCRIM_HIDING),this.adapter.removeClass(c.SURFACE_SCRIM_SHOWING)},t.prototype.isOpen=function(){return this.dialogOpen},t.prototype.getEscapeKeyAction=function(){return this.escapeKeyAction},t.prototype.setEscapeKeyAction=function(e){this.escapeKeyAction=e},t.prototype.getScrimClickAction=function(){return this.scrimClickAction},t.prototype.setScrimClickAction=function(e){this.scrimClickAction=e},t.prototype.getAutoStackButtons=function(){return this.autoStackButtons},t.prototype.setAutoStackButtons=function(e){this.autoStackButtons=e},t.prototype.getSuppressDefaultPressSelector=function(){return this.suppressDefaultPressSelector},t.prototype.setSuppressDefaultPressSelector=function(e){this.suppressDefaultPressSelector=e},t.prototype.layout=function(){var e=this;this.animFrame.request(i.POLL_LAYOUT_CHANGE,(function(){e.layoutInternal()}))},t.prototype.handleClick=function(e){if(this.adapter.eventTargetMatches(e.target,l.SCRIM_SELECTOR)&&""!==this.scrimClickAction)this.close(this.scrimClickAction);else{var t=this.adapter.getActionFromEvent(e);t&&this.close(t)}},t.prototype.handleKeydown=function(e){var t="Enter"===e.key||13===e.keyCode;if(t&&!this.adapter.getActionFromEvent(e)){var n=e.composedPath?e.composedPath()[0]:e.target,i=!this.suppressDefaultPressSelector||!this.adapter.eventTargetMatches(n,this.suppressDefaultPressSelector);t&&i&&this.adapter.clickDefaultButton()}},t.prototype.handleDocumentKeydown=function(e){("Escape"===e.key||27===e.keyCode)&&""!==this.escapeKeyAction&&this.close(this.escapeKeyAction)},t.prototype.handleScrollEvent=function(){var e=this;this.animFrame.request(i.POLL_SCROLL_POS,(function(){e.toggleScrollDividerHeader(),e.toggleScrollDividerFooter()}))},t.prototype.layoutInternal=function(){this.autoStackButtons&&this.detectStackedButtons(),this.toggleScrollableClasses()},t.prototype.handleAnimationTimerEnd=function(){this.animationTimer=0,this.adapter.removeClass(c.OPENING),this.adapter.removeClass(c.CLOSING)},t.prototype.runNextAnimationFrame=function(e){var t=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame((function(){t.animationFrame=0,clearTimeout(t.animationTimer),t.animationTimer=setTimeout(e,0)}))},t.prototype.detectStackedButtons=function(){this.adapter.removeClass(c.STACKED);var e=this.adapter.areButtonsStacked();e&&this.adapter.addClass(c.STACKED),e!==this.areButtonsStacked&&(this.adapter.reverseButtons(),this.areButtonsStacked=e)},t.prototype.toggleScrollableClasses=function(){this.adapter.removeClass(c.SCROLLABLE),this.adapter.isContentScrollable()&&(this.adapter.addClass(c.SCROLLABLE),this.isFullscreen&&(this.toggleScrollDividerHeader(),this.toggleScrollDividerFooter()))},t.prototype.toggleScrollDividerHeader=function(){this.adapter.isScrollableContentAtTop()?this.adapter.hasClass(c.SCROLL_DIVIDER_HEADER)&&this.adapter.removeClass(c.SCROLL_DIVIDER_HEADER):this.adapter.addClass(c.SCROLL_DIVIDER_HEADER)},t.prototype.toggleScrollDividerFooter=function(){this.adapter.isScrollableContentAtBottom()?this.adapter.hasClass(c.SCROLL_DIVIDER_FOOTER)&&this.adapter.removeClass(c.SCROLL_DIVIDER_FOOTER):this.adapter.addClass(c.SCROLL_DIVIDER_FOOTER)},t}(a.K),h=n(1343),p=n(42851),f=n(68568),m=n(48261),g=n(47658);const{document:v,window:y}=r.lig,b=e=>({}),E=e=>({});function S(e){let t,n,i;return{c(){t=(0,r.bGB)("div"),(0,r.Ljt)(t,"class","mdc-dialog__surface-scrim")},m(o,s){(0,r.$Tr)(o,t,s),n||(i=(0,r.oLt)(t,"transitionend",e[31]),n=!0)},p:r.ZTd,d(e){e&&(0,r.ogt)(t),n=!1,i()}}}function w(e){let t,n,i,o,s,a,c,l,u,d,h,p,f,m,w,_;const T=e[27].default,x=(0,r.nuO)(T,e,e[26],null);let C=e[5]&&S(e),I=[{class:a=(0,g.$o)({[e[7]]:!0,"mdc-dialog__surface":!0})},{role:"alertdialog"},{"aria-modal":"true"},(0,g.bO)(e[17],"surface$")],k={};for(let e=0;e<I.length;e+=1)k=(0,r.f0i)(k,I[e]);let M=[{class:c=(0,g.$o)({[e[6]]:!0,"mdc-dialog__container":!0})},(0,g.bO)(e[17],"container$")],A={};for(let e=0;e<M.length;e+=1)A=(0,r.f0i)(A,M[e]);let O=[{class:d=(0,g.$o)({[e[2]]:!0,"mdc-dialog":!0,"mdc-dialog--stacked":!e[4],"mdc-dialog--fullscreen":e[5],"smui-dialog--selection":e[3],...e[10]})},{role:"alertdialog"},{"aria-modal":"true"},(0,g.De)(e[17],["container$","surface$"])],R={};for(let e=0;e<O.length;e+=1)R=(0,r.f0i)(R,O[e]);const L=e[27].over,D=(0,r.nuO)(L,e,e[26],E);return{c(){t=(0,r.DhX)(),n=(0,r.bGB)("div"),i=(0,r.bGB)("div"),o=(0,r.bGB)("div"),x&&x.c(),s=(0,r.DhX)(),C&&C.c(),l=(0,r.DhX)(),u=(0,r.bGB)("div"),f=(0,r.DhX)(),D&&D.c(),(0,r.UF7)(o,k),(0,r.UF7)(i,A),(0,r.Ljt)(u,"class","mdc-dialog__scrim"),(0,r.UF7)(n,R)},m(a,c){(0,r.$Tr)(a,t,c),(0,r.$Tr)(a,n,c),(0,r.R3I)(n,i),(0,r.R3I)(i,o),x&&x.m(o,null),(0,r.R3I)(o,s),C&&C.m(o,null),(0,r.R3I)(n,l),(0,r.R3I)(n,u),e[32](n),(0,r.$Tr)(a,f,c),D&&D.m(a,c),m=!0,w||(_=[(0,r.oLt)(y,"resize",e[28]),(0,r.oLt)(y,"orientationchange",e[29]),(0,r.oLt)(v.body,"keydown",e[30]),(0,r.TVh)(h=g.ol.call(null,n,e[1])),(0,r.TVh)(p=e[11].call(null,n)),(0,r.oLt)(n,"MDCDialog:opening",e[14]),(0,r.oLt)(n,"MDCDialog:opened",e[15]),(0,r.oLt)(n,"MDCDialog:closed",e[16]),(0,r.oLt)(n,"click",e[33]),(0,r.oLt)(n,"keydown",e[34])],w=!0)},p(e,t){x&&x.p&&(!m||67108864&t[0])&&(0,r.kmG)(x,T,e,e[26],m?(0,r.u2N)(T,e[26],t,null):(0,r.VOJ)(e[26]),null),e[5]?C?C.p(e,t):(C=S(e),C.c(),C.m(o,null)):C&&(C.d(1),C=null),(0,r.UF7)(o,k=(0,r.LoY)(I,[(!m||128&t[0]&&a!==(a=(0,g.$o)({[e[7]]:!0,"mdc-dialog__surface":!0})))&&{class:a},{role:"alertdialog"},{"aria-modal":"true"},131072&t[0]&&(0,g.bO)(e[17],"surface$")])),(0,r.UF7)(i,A=(0,r.LoY)(M,[(!m||64&t[0]&&c!==(c=(0,g.$o)({[e[6]]:!0,"mdc-dialog__container":!0})))&&{class:c},131072&t[0]&&(0,g.bO)(e[17],"container$")])),(0,r.UF7)(n,R=(0,r.LoY)(O,[(!m||1084&t[0]&&d!==(d=(0,g.$o)({[e[2]]:!0,"mdc-dialog":!0,"mdc-dialog--stacked":!e[4],"mdc-dialog--fullscreen":e[5],"smui-dialog--selection":e[3],...e[10]})))&&{class:d},{role:"alertdialog"},{"aria-modal":"true"},131072&t[0]&&(0,g.De)(e[17],["container$","surface$"])])),h&&(0,r.sBU)(h.update)&&2&t[0]&&h.update.call(null,e[1]),D&&D.p&&(!m||67108864&t[0])&&(0,r.kmG)(D,L,e,e[26],m?(0,r.u2N)(L,e[26],t,b):(0,r.VOJ)(e[26]),E)},i(e){m||((0,r.Ui)(x,e),(0,r.Ui)(D,e),m=!0)},o(e){(0,r.etI)(x,e),(0,r.etI)(D,e),m=!1},d(i){i&&(0,r.ogt)(t),i&&(0,r.ogt)(n),x&&x.d(i),C&&C.d(),e[32](null),i&&(0,r.ogt)(f),D&&D.d(i),w=!1,(0,r.j7q)(_)}}}function _(e,t,n){const i=["use","class","open","selection","escapeKeyAction","scrimClickAction","autoStackButtons","fullscreen","container$class","surface$class","isOpen","setOpen","layout","getElement"];let o,s,a=(0,r.q2N)(t,i),{$$slots:c={},$$scope:l}=t;var u;const{FocusTrap:v}=h,{closest:y,matches:b}=p,E=(0,g.PD)((0,r.w2L)());let S,w,_,{use:T=[]}=t,{class:x=""}=t,{open:C=!1}=t,{selection:I=!1}=t,{escapeKeyAction:k="close"}=t,{scrimClickAction:M="close"}=t,{autoStackButtons:A=!0}=t,{fullscreen:O=!1}=t,{container$class:R=""}=t,{surface$class:L=""}=t,D={},N=(0,m.fZ)(!1);(0,r.FIv)(e,N,(e=>n(38,s=e)));let P=(0,f.fw)("SMUI:dialog:aboveFullscreen"),$=null!==(u=(0,f.fw)("SMUI:dialog:aboveFullscreenShown"))&&void 0!==u?u:(0,m.fZ)(!1);(0,r.FIv)(e,$,(e=>n(25,o=e)));let U,B=(0,f.fw)("SMUI:addLayoutListener"),F=[];(0,f.v)("SMUI:dialog:actions:reversed",N),(0,f.v)("SMUI:addLayoutListener",(e=>(F.push(e),()=>{const t=F.indexOf(e);t>=0&&F.splice(t,1)}))),(0,f.v)("SMUI:dialog:selection",I),(0,f.v)("SMUI:dialog:aboveFullscreen",P||O),(0,f.v)("SMUI:dialog:aboveFullscreenShown",$),B&&(U=B(W));let j=o;function H(e){return e in D?D[e]:z().classList.contains(e)}function K(e){D[e]||n(10,D[e]=!0,D)}function q(e){e in D&&!D[e]||n(10,D[e]=!1,D)}function V(){return S.querySelector(".mdc-dialog__content")}function G(){return S.querySelector("[data-mdc-dialog-initial-focus]")}function W(){return w.layout()}function z(){return S}return(0,f.H3)((()=>{var e;return _=new v(S,{initialFocusEl:null!==(e=G())&&void 0!==e?e:void 0}),n(8,w=new d({addBodyClass:e=>document.body.classList.add(e),addClass:K,areButtonsStacked:()=>{return e=[].slice.call(S.querySelectorAll(".mdc-dialog__button")),t=new Set,[].forEach.call(e,(function(e){return t.add(e.offsetTop)})),t.size>1;var e,t},clickDefaultButton:()=>{const e=S.querySelector("[data-mdc-dialog-button-default");e&&e.click()},eventTargetMatches:(e,t)=>!!e&&b(e,t),getActionFromEvent:e=>{if(!e.target)return"";const t=y(e.target,"[data-mdc-dialog-action]");return t&&t.getAttribute("data-mdc-dialog-action")},getInitialFocusEl:G,hasClass:H,isContentScrollable:()=>{return!!(e=V())&&e.scrollHeight>e.offsetHeight;var e},notifyClosed:e=>{n(0,C=!1),(0,g.WI)(z(),"MDCDialog:closed",e?{action:e}:{})},notifyClosing:e=>(0,g.WI)(z(),"MDCDialog:closing",e?{action:e}:{}),notifyOpened:()=>(0,g.WI)(z(),"MDCDialog:opened",{}),notifyOpening:()=>(0,g.WI)(z(),"MDCDialog:opening",{}),releaseFocus:()=>_.releaseFocus(),removeBodyClass:e=>document.body.classList.remove(e),removeClass:q,reverseButtons:()=>{(0,r.fxP)(N,s=!0,s)},trapFocus:()=>_.trapFocus(),registerContentEventHandler:(e,t)=>{const n=V();n instanceof HTMLElement&&n.addEventListener(e,t)},deregisterContentEventHandler:(e,t)=>{const n=V();n instanceof HTMLElement&&n.removeEventListener(e,t)},isScrollableContentAtTop:()=>{return!!(e=V())&&0===e.scrollTop;var e},isScrollableContentAtBottom:()=>{return!!(e=V())&&Math.ceil(e.scrollHeight-e.scrollTop)===e.clientHeight;var e},registerWindowEventHandler:(e,t)=>{window.addEventListener(e,t)},deregisterWindowEventHandler:(e,t)=>{window.removeEventListener(e,t)}})),w.init(),()=>{w.destroy()}})),(0,f.ev)((()=>{U&&U()})),e.$$set=e=>{t=(0,r.f0i)((0,r.f0i)({},t),(0,r.Jvk)(e)),n(17,a=(0,r.q2N)(t,i)),"use"in e&&n(1,T=e.use),"class"in e&&n(2,x=e.class),"open"in e&&n(0,C=e.open),"selection"in e&&n(3,I=e.selection),"escapeKeyAction"in e&&n(18,k=e.escapeKeyAction),"scrimClickAction"in e&&n(19,M=e.scrimClickAction),"autoStackButtons"in e&&n(4,A=e.autoStackButtons),"fullscreen"in e&&n(5,O=e.fullscreen),"container$class"in e&&n(6,R=e.container$class),"surface$class"in e&&n(7,L=e.surface$class),"$$scope"in e&&n(26,l=e.$$scope)},e.$$.update=()=>{262400&e.$$.dirty[0]&&w&&w.getEscapeKeyAction()!==k&&w.setEscapeKeyAction(k),524544&e.$$.dirty[0]&&w&&w.getScrimClickAction()!==M&&w.setScrimClickAction(M),272&e.$$.dirty[0]&&w&&w.getAutoStackButtons()!==A&&w.setAutoStackButtons(A),16&e.$$.dirty[0]&&(A||(0,r.fxP)(N,s=!0,s)),257&e.$$.dirty[0]&&w&&w.isOpen()!==C&&(C?w.open({isAboveFullscreenDialog:!!P}):w.close()),50331936&e.$$.dirty[0]&&O&&w&&j!==o&&(n(24,j=o),o?w.showSurfaceScrim():w.hideSurfaceScrim())},[C,T,x,I,A,O,R,L,w,S,D,E,N,$,function(){P&&(0,r.fxP)($,o=!0,o),requestAnimationFrame((()=>{F.forEach((e=>e()))}))},function(){F.forEach((e=>e()))},function(){P&&(0,r.fxP)($,o=!1,o)},a,k,M,function(){return C},function(e){n(0,C=e)},W,z,j,o,l,c,()=>C&&w&&w.layout(),()=>C&&w&&w.layout(),e=>C&&w&&w.handleDocumentKeydown(e),()=>w&&w.handleSurfaceScrimTransitionEnd(),function(e){r.VnY[e?"unshift":"push"]((()=>{S=e,n(9,S)}))},e=>w&&w.handleClick(e),e=>w&&w.handleKeydown(e)]}class T extends r.f_C{constructor(e){super(),(0,r.S1n)(this,e,_,w,r.N8,{use:1,class:2,open:0,selection:3,escapeKeyAction:18,scrimClickAction:19,autoStackButtons:4,fullscreen:5,container$class:6,surface$class:7,isOpen:20,setOpen:21,layout:22,getElement:23},null,[-1,-1])}get isOpen(){return this.$$.ctx[20]}get setOpen(){return this.$$.ctx[21]}get layout(){return this.$$.ctx[22]}get getElement(){return this.$$.ctx[23]}}const x=T;var C=n(58858),I=n(46504);(0,C.C)({class:"mdc-dialog__header",component:I.ZC,contexts:{"SMUI:icon-button:context":"dialog:header"}});const k=(0,C.C)({class:"mdc-dialog__title",component:I.H2}),M=(0,C.C)({class:"mdc-dialog__content",component:I.ZC}),A=(0,C.C)({class:"mdc-dialog__actions",component:I.ZC,classMap:{"smui-dialog__actions--reversed":"SMUI:dialog:actions:reversed"},contexts:{"SMUI:button:context":"dialog:action"}});function O(e){return e.setAttribute("data-mdc-dialog-initial-focus",""),{destroy(){e.removeAttribute("data-mdc-dialog-initial-focus")}}}const R=x},40214:(e,t,n)=>{"use strict";n.d(t,{Lk:()=>b,VY:()=>E,ZP:()=>S});var i=n(24234),r=n(70655),o=n(6308),s={ANIMATE:"mdc-drawer--animate",CLOSING:"mdc-drawer--closing",DISMISSIBLE:"mdc-drawer--dismissible",MODAL:"mdc-drawer--modal",OPEN:"mdc-drawer--open",OPENING:"mdc-drawer--opening",ROOT:"mdc-drawer"},a={APP_CONTENT_SELECTOR:".mdc-drawer-app-content",CLOSE_EVENT:"MDCDrawer:closed",OPEN_EVENT:"MDCDrawer:opened",SCRIM_SELECTOR:".mdc-drawer-scrim",LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",LIST_ITEM_ACTIVATED_SELECTOR:".mdc-list-item--activated,.mdc-deprecated-list-item--activated"},c=function(e){function t(n){var i=e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this;return i.animationFrame_=0,i.animationTimer_=0,i}return(0,r.ZT)(t,e),Object.defineProperty(t,"strings",{get:function(){return a},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return s},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},elementHasClass:function(){return!1},notifyClose:function(){},notifyOpen:function(){},saveFocus:function(){},restoreFocus:function(){},focusActiveNavigationItem:function(){},trapFocus:function(){},releaseFocus:function(){}}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.animationFrame_&&cancelAnimationFrame(this.animationFrame_),this.animationTimer_&&clearTimeout(this.animationTimer_)},t.prototype.open=function(){var e=this;this.isOpen()||this.isOpening()||this.isClosing()||(this.adapter.addClass(s.OPEN),this.adapter.addClass(s.ANIMATE),this.runNextAnimationFrame_((function(){e.adapter.addClass(s.OPENING)})),this.adapter.saveFocus())},t.prototype.close=function(){!this.isOpen()||this.isOpening()||this.isClosing()||this.adapter.addClass(s.CLOSING)},t.prototype.isOpen=function(){return this.adapter.hasClass(s.OPEN)},t.prototype.isOpening=function(){return this.adapter.hasClass(s.OPENING)||this.adapter.hasClass(s.ANIMATE)},t.prototype.isClosing=function(){return this.adapter.hasClass(s.CLOSING)},t.prototype.handleKeydown=function(e){var t=e.keyCode;("Escape"===e.key||27===t)&&this.close()},t.prototype.handleTransitionEnd=function(e){var t=s.OPENING,n=s.CLOSING,i=s.OPEN,r=s.ANIMATE,o=s.ROOT;this.isElement_(e.target)&&this.adapter.elementHasClass(e.target,o)&&(this.isClosing()?(this.adapter.removeClass(i),this.closed_(),this.adapter.restoreFocus(),this.adapter.notifyClose()):(this.adapter.focusActiveNavigationItem(),this.opened_(),this.adapter.notifyOpen()),this.adapter.removeClass(r),this.adapter.removeClass(t),this.adapter.removeClass(n))},t.prototype.opened_=function(){},t.prototype.closed_=function(){},t.prototype.runNextAnimationFrame_=function(e){var t=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){t.animationFrame_=0,clearTimeout(t.animationTimer_),t.animationTimer_=setTimeout(e,0)}))},t.prototype.isElement_=function(e){return Boolean(e.classList)},t}(o.K),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.handleScrimClick=function(){this.close()},t.prototype.opened_=function(){this.adapter.trapFocus()},t.prototype.closed_=function(){this.adapter.releaseFocus()},t}(c),u=n(1343),d=n(68568),h=n(47658);function p(e){let t,n,r,o,s,a,c;const l=e[15].default,u=(0,i.nuO)(l,e,e[14],null);let d=[{class:n=(0,h.$o)({[e[1]]:!0,"mdc-drawer":!0,"mdc-drawer--dismissible":"dismissible"===e[2],"mdc-drawer--modal":"modal"===e[2],"smui-drawer__absolute":"modal"===e[2]&&!e[3],...e[6]})},e[8]],p={};for(let e=0;e<d.length;e+=1)p=(0,i.f0i)(p,d[e]);return{c(){t=(0,i.bGB)("aside"),u&&u.c(),(0,i.UF7)(t,p)},m(n,l){(0,i.$Tr)(n,t,l),u&&u.m(t,null),e[16](t),s=!0,a||(c=[(0,i.TVh)(r=h.ol.call(null,t,e[0])),(0,i.TVh)(o=e[7].call(null,t)),(0,i.oLt)(t,"keydown",e[17]),(0,i.oLt)(t,"transitionend",e[18])],a=!0)},p(e,[o]){u&&u.p&&(!s||16384&o)&&(0,i.kmG)(u,l,e,e[14],s?(0,i.u2N)(l,e[14],o,null):(0,i.VOJ)(e[14]),null),(0,i.UF7)(t,p=(0,i.LoY)(d,[(!s||78&o&&n!==(n=(0,h.$o)({[e[1]]:!0,"mdc-drawer":!0,"mdc-drawer--dismissible":"dismissible"===e[2],"mdc-drawer--modal":"modal"===e[2],"smui-drawer__absolute":"modal"===e[2]&&!e[3],...e[6]})))&&{class:n},256&o&&e[8]])),r&&(0,i.sBU)(r.update)&&1&o&&r.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[16](null),a=!1,(0,i.j7q)(c)}}}function f(e,t,n){const r=["use","class","variant","open","fixed","setOpen","isOpen","getElement"];let o=(0,i.q2N)(t,r),{$$slots:s={},$$scope:a}=t;const{FocusTrap:p}=u,f=(0,h.PD)((0,i.w2L)());let m,g,v,{use:y=[]}=t,{class:b=""}=t,{variant:E}=t,{open:S=!1}=t,{fixed:w=!0}=t,_={},T=null,x=!1;(0,d.v)("SMUI:list:nav",!0),(0,d.v)("SMUI:list:item:nav",!0),(0,d.v)("SMUI:list:wrapFocus",!0);let C=E;function I(){var e,t;x&&x.removeEventListener("SMUIDrawerScrim:click",O),"modal"===E&&(x=null!==(t=null===(e=m.parentNode)||void 0===e?void 0:e.querySelector(".mdc-drawer-scrim"))&&void 0!==t&&t,x&&x.addEventListener("SMUIDrawerScrim:click",O));const i="dismissible"===E?c:"modal"===E?l:void 0;return i?new i({addClass:M,removeClass:A,hasClass:k,elementHasClass:(e,t)=>e.classList.contains(t),saveFocus:()=>T=document.activeElement,restoreFocus:()=>{T&&"focus"in T&&m.contains(document.activeElement)&&T.focus()},focusActiveNavigationItem:()=>{const e=m.querySelector(".mdc-list-item--activated,.mdc-deprecated-list-item--activated");e&&e.focus()},notifyClose:()=>{n(9,S=!1),(0,h.WI)(m,"MDCDrawer:closed")},notifyOpen:()=>{n(9,S=!0),(0,h.WI)(m,"MDCDrawer:opened")},trapFocus:()=>v.trapFocus(),releaseFocus:()=>v.releaseFocus()}):void 0}function k(e){return e in _?_[e]:R().classList.contains(e)}function M(e){_[e]||n(6,_[e]=!0,_)}function A(e){e in _&&!_[e]||n(6,_[e]=!1,_)}function O(){g&&"handleScrimClick"in g&&g.handleScrimClick()}function R(){return m}return(0,d.H3)((()=>{v=new p(m,{skipInitialFocus:!0}),n(4,g=I()),g&&g.init()})),(0,d.ev)((()=>{g&&g.destroy(),x&&x.removeEventListener("SMUIDrawerScrim:click",O)})),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(8,o=(0,i.q2N)(t,r)),"use"in e&&n(0,y=e.use),"class"in e&&n(1,b=e.class),"variant"in e&&n(2,E=e.variant),"open"in e&&n(9,S=e.open),"fixed"in e&&n(3,w=e.fixed),"$$scope"in e&&n(14,a=e.$$scope)},e.$$.update=()=>{8212&e.$$.dirty&&C!==E&&(n(13,C=E),g&&g.destroy(),n(6,_={}),n(4,g=I()),g&&g.init()),528&e.$$.dirty&&g&&g.isOpen()!==S&&(S?g.open():g.close())},[y,b,E,w,g,m,_,f,o,S,function(e){n(9,S=e)},function(){return S},R,C,a,s,function(e){i.VnY[e?"unshift":"push"]((()=>{m=e,n(5,m)}))},e=>g&&g.handleKeydown(e),e=>g&&g.handleTransitionEnd(e)]}class m extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,f,p,i.N8,{use:0,class:1,variant:2,open:9,fixed:3,setOpen:10,isOpen:11,getElement:12})}get setOpen(){return this.$$.ctx[10]}get isOpen(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}const g=m;var v=n(58858),y=n(46504);const b=(0,v.C)({class:"mdc-drawer-app-content",component:y.ZC}),E=(0,v.C)({class:"mdc-drawer__content",component:y.ZC});(0,v.C)({class:"mdc-drawer__header",component:y.ZC}),(0,v.C)({class:"mdc-drawer__title",component:y.H1}),(0,v.C)({class:"mdc-drawer__subtitle",component:y.H2});const S=g},58820:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(24234),r=n(70655),o=n(6308),s={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"},a=function(e){function t(n){var i=e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this;return i.shakeAnimationEndHandler_=function(){return i.handleShakeAnimationEnd_()},i}return(0,r.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return s},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.getWidth=function(){return this.adapter.getWidth()},t.prototype.shake=function(e){var n=t.cssClasses.LABEL_SHAKE;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.float=function(e){var n=t.cssClasses,i=n.LABEL_FLOAT_ABOVE,r=n.LABEL_SHAKE;e?this.adapter.addClass(i):(this.adapter.removeClass(i),this.adapter.removeClass(r))},t.prototype.setRequired=function(e){var n=t.cssClasses.LABEL_REQUIRED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleShakeAnimationEnd_=function(){var e=t.cssClasses.LABEL_SHAKE;this.adapter.removeClass(e)},t}(o.K),c=n(68568),l=n(47658);function u(e){let t,n,r,o,s,a,c,u,d;const h=e[22].default,p=(0,i.nuO)(h,e,e[21],null);let m=[{class:n=(0,l.$o)({[e[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":e[0],"mdc-floating-label--required":e[1],...e[8]})},{style:r=Object.entries(e[9]).map(f).concat([e[4]]).join(" ")},{for:o=e[5]||(e[11]?e[11].id:void 0)},e[12]],g={};for(let e=0;e<m.length;e+=1)g=(0,i.f0i)(g,m[e]);return{c(){t=(0,i.bGB)("label"),p&&p.c(),(0,i.UF7)(t,g)},m(n,r){(0,i.$Tr)(n,t,r),p&&p.m(t,null),e[24](t),c=!0,u||(d=[(0,i.TVh)(s=l.ol.call(null,t,e[2])),(0,i.TVh)(a=e[10].call(null,t))],u=!0)},p(e,a){p&&p.p&&(!c||2097152&a)&&(0,i.kmG)(p,h,e,e[21],c?(0,i.u2N)(h,e[21],a,null):(0,i.VOJ)(e[21]),null),(0,i.UF7)(t,g=(0,i.LoY)(m,[(!c||267&a&&n!==(n=(0,l.$o)({[e[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":e[0],"mdc-floating-label--required":e[1],...e[8]})))&&{class:n},(!c||528&a&&r!==(r=Object.entries(e[9]).map(f).concat([e[4]]).join(" ")))&&{style:r},(!c||32&a&&o!==(o=e[5]||(e[11]?e[11].id:void 0)))&&{for:o},4096&a&&e[12]])),s&&(0,i.sBU)(s.update)&&4&a&&s.update.call(null,e[2])},i(e){c||((0,i.Ui)(p,e),c=!0)},o(e){(0,i.etI)(p,e),c=!1},d(n){n&&(0,i.ogt)(t),p&&p.d(n),e[24](null),u=!1,(0,i.j7q)(d)}}}function d(e){let t,n,r,o,s,a,c,u;const d=e[22].default,h=(0,i.nuO)(d,e,e[21],null);let f=[{class:n=(0,l.$o)({[e[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":e[0],"mdc-floating-label--required":e[1],...e[8]})},{style:r=Object.entries(e[9]).map(p).concat([e[4]]).join(" ")},e[12]],m={};for(let e=0;e<f.length;e+=1)m=(0,i.f0i)(m,f[e]);return{c(){t=(0,i.bGB)("span"),h&&h.c(),(0,i.UF7)(t,m)},m(n,r){(0,i.$Tr)(n,t,r),h&&h.m(t,null),e[23](t),a=!0,c||(u=[(0,i.TVh)(o=l.ol.call(null,t,e[2])),(0,i.TVh)(s=e[10].call(null,t))],c=!0)},p(e,s){h&&h.p&&(!a||2097152&s)&&(0,i.kmG)(h,d,e,e[21],a?(0,i.u2N)(d,e[21],s,null):(0,i.VOJ)(e[21]),null),(0,i.UF7)(t,m=(0,i.LoY)(f,[(!a||267&s&&n!==(n=(0,l.$o)({[e[3]]:!0,"mdc-floating-label":!0,"mdc-floating-label--float-above":e[0],"mdc-floating-label--required":e[1],...e[8]})))&&{class:n},(!a||528&s&&r!==(r=Object.entries(e[9]).map(p).concat([e[4]]).join(" ")))&&{style:r},4096&s&&e[12]])),o&&(0,i.sBU)(o.update)&&4&s&&o.update.call(null,e[2])},i(e){a||((0,i.Ui)(h,e),a=!0)},o(e){(0,i.etI)(h,e),a=!1},d(n){n&&(0,i.ogt)(t),h&&h.d(n),e[23](null),c=!1,(0,i.j7q)(u)}}}function h(e){let t,n,r,o;const s=[d,u],a=[];function c(e,t){return e[6]?0:1}return t=c(e),n=a[t]=s[t](e),{c(){n.c(),r=(0,i.cSb)()},m(e,n){a[t].m(e,n),(0,i.$Tr)(e,r,n),o=!0},p(e,[o]){let l=t;t=c(e),t===l?a[t].p(e,o):((0,i.dvw)(),(0,i.etI)(a[l],1,1,(()=>{a[l]=null})),(0,i.gbL)(),n=a[t],n?n.p(e,o):(n=a[t]=s[t](e),n.c()),(0,i.Ui)(n,1),n.m(r.parentNode,r))},i(e){o||((0,i.Ui)(n),o=!0)},o(e){(0,i.etI)(n),o=!1},d(e){a[t].d(e),e&&(0,i.ogt)(r)}}}const p=([e,t])=>`${e}: ${t};`,f=([e,t])=>`${e}: ${t};`;function m(e,t,n){const r=["use","class","style","for","floatAbove","required","wrapped","shake","float","setRequired","getWidth","getElement"];let o=(0,i.q2N)(t,r),{$$slots:s={},$$scope:u}=t;var d;const h=(0,l.PD)((0,i.w2L)());let p,f,{use:m=[]}=t,{class:g=""}=t,{style:v=""}=t,{for:y}=t,{floatAbove:b=!1}=t,{required:E=!1}=t,{wrapped:S=!1}=t,w={},_={},T=null!==(d=(0,c.fw)("SMUI:generic:input:props"))&&void 0!==d?d:{},x=b,C=E;function I(e){w[e]||n(8,w[e]=!0,w)}function k(e){e in w&&!w[e]||n(8,w[e]=!1,w)}function M(e,t){_[e]!=t&&(""===t||null==t?(delete _[e],n(9,_)):n(9,_[e]=t,_))}function A(e){e in _&&(delete _[e],n(9,_))}function O(){return p}return(0,c.H3)((()=>{n(18,f=new a({addClass:I,removeClass:k,getWidth:()=>{var e,t;const n=O(),i=n.cloneNode(!0);null===(e=n.parentNode)||void 0===e||e.appendChild(i),i.classList.add("smui-floating-label--remove-transition"),i.classList.add("smui-floating-label--force-size"),i.classList.remove("mdc-floating-label--float-above");const r=i.scrollWidth;return null===(t=n.parentNode)||void 0===t||t.removeChild(i),r},registerInteractionHandler:(e,t)=>O().addEventListener(e,t),deregisterInteractionHandler:(e,t)=>O().removeEventListener(e,t)}));const e={get element(){return O()},addStyle:M,removeStyle:A};return(0,l.WI)(p,"SMUIFloatingLabel:mount",e),f.init(),()=>{(0,l.WI)(p,"SMUIFloatingLabel:unmount",e),f.destroy()}})),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(12,o=(0,i.q2N)(t,r)),"use"in e&&n(2,m=e.use),"class"in e&&n(3,g=e.class),"style"in e&&n(4,v=e.style),"for"in e&&n(5,y=e.for),"floatAbove"in e&&n(0,b=e.floatAbove),"required"in e&&n(1,E=e.required),"wrapped"in e&&n(6,S=e.wrapped),"$$scope"in e&&n(21,u=e.$$scope)},e.$$.update=()=>{786433&e.$$.dirty&&f&&x!==b&&(n(19,x=b),f.float(b)),1310722&e.$$.dirty&&f&&C!==E&&(n(20,C=E),f.setRequired(E))},[b,E,m,g,v,y,S,p,w,_,h,T,o,function(e){f.shake(e)},function(e){n(0,b=e)},function(e){n(1,E=e)},function(){return f.getWidth()},O,f,x,C,u,s,function(e){i.VnY[e?"unshift":"push"]((()=>{p=e,n(7,p)}))},function(e){i.VnY[e?"unshift":"push"]((()=>{p=e,n(7,p)}))}]}class g extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,m,h,i.N8,{use:2,class:3,style:4,for:5,floatAbove:0,required:1,wrapped:6,shake:13,float:14,setRequired:15,getWidth:16,getElement:17})}get shake(){return this.$$.ctx[13]}get float(){return this.$$.ctx[14]}get setRequired(){return this.$$.ctx[15]}get getWidth(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}const v=g},44594:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(24234),r=n(70655),o=n(6308),s={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},a={ARIA_LABEL:"aria-label",ARIA_PRESSED:"aria-pressed",DATA_ARIA_LABEL_OFF:"data-aria-label-off",DATA_ARIA_LABEL_ON:"data-aria-label-on",CHANGE_EVENT:"MDCIconButtonToggle:change"},c=function(e){function t(n){var i=e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this;return i.hasToggledAriaLabel=!1,i}return(0,r.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return s},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return a},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},getAttr:function(){return null},setAttr:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this.adapter.getAttr(a.DATA_ARIA_LABEL_ON),t=this.adapter.getAttr(a.DATA_ARIA_LABEL_OFF);if(e&&t){if(null!==this.adapter.getAttr(a.ARIA_PRESSED))throw new Error("MDCIconButtonToggleFoundation: Button should not set `aria-pressed` if it has a toggled aria label.");this.hasToggledAriaLabel=!0}else this.adapter.setAttr(a.ARIA_PRESSED,String(this.isOn()))},t.prototype.handleClick=function(){this.toggle(),this.adapter.notifyChange({isOn:this.isOn()})},t.prototype.isOn=function(){return this.adapter.hasClass(s.ICON_BUTTON_ON)},t.prototype.toggle=function(e){if(void 0===e&&(e=!this.isOn()),e?this.adapter.addClass(s.ICON_BUTTON_ON):this.adapter.removeClass(s.ICON_BUTTON_ON),this.hasToggledAriaLabel){var t=e?this.adapter.getAttr(a.DATA_ARIA_LABEL_ON):this.adapter.getAttr(a.DATA_ARIA_LABEL_OFF);this.adapter.setAttr(a.ARIA_LABEL,t||"")}else this.adapter.setAttr(a.ARIA_PRESSED,""+e)},t}(o.K),l=n(68568),u=n(47658),d=n(37341),h=n(46504);function p(e){let t;const n=e[28].default,r=(0,i.nuO)(n,e,e[32],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||2&o[1])&&(0,i.kmG)(r,n,e,e[32],t?(0,i.u2N)(n,e[32],o,null):(0,i.VOJ)(e[32]),null)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function f(e){let t,n,r;const o=[{use:[[d.Z,{ripple:e[4],unbounded:!0,color:e[5],disabled:!!e[25].disabled,addClass:e[22],removeClass:e[23],addStyle:e[24]}],e[18],...e[1]]},{class:(0,u.$o)({[e[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!e[19](e[0])&&e[0],"mdc-card__action":"card:action"===e[20],"mdc-card__action--icon":"card:action"===e[20],"mdc-top-app-bar__navigation-icon":"top-app-bar:navigation"===e[20],"mdc-top-app-bar__action-item":"top-app-bar:action"===e[20],"mdc-snackbar__dismiss":"snackbar:actions"===e[20],"mdc-data-table__pagination-button":"data-table:pagination"===e[20],"mdc-data-table__sort-icon-button":"data-table:sortable-header-cell"===e[20],"mdc-dialog__close":"dialog:header"===e[20]&&"close"===e[9],...e[14]})},{style:Object.entries(e[15]).map(m).concat([e[3]]).join(" ")},{"aria-pressed":e[19](e[0])?null:e[0]?"true":"false"},{"aria-label":e[0]?e[6]:e[7]},{"data-aria-label-on":e[6]},{"data-aria-label-off":e[7]},{"aria-describedby":e[21]},{href:e[8]},e[17],e[16],e[25]];var s=e[10];function a(e){let t={$$slots:{default:[p]},$$scope:{ctx:e}};for(let e=0;e<o.length;e+=1)t=(0,i.f0i)(t,o[e]);return{props:t}}return s&&(t=new s(a(e)),e[29](t),t.$on("click",e[30]),t.$on("click",e[31])),{c(){t&&(0,i.YCL)(t.$$.fragment),n=(0,i.cSb)()},m(e,o){t&&(0,i.yef)(t,e,o),(0,i.$Tr)(e,n,o),r=!0},p(e,r){const c=67093503&r[0]?(0,i.LoY)(o,[63176754&r[0]&&{use:[[d.Z,{ripple:e[4],unbounded:!0,color:e[5],disabled:!!e[25].disabled,addClass:e[22],removeClass:e[23],addStyle:e[24]}],e[18],...e[1]]},1589765&r[0]&&{class:(0,u.$o)({[e[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!e[19](e[0])&&e[0],"mdc-card__action":"card:action"===e[20],"mdc-card__action--icon":"card:action"===e[20],"mdc-top-app-bar__navigation-icon":"top-app-bar:navigation"===e[20],"mdc-top-app-bar__action-item":"top-app-bar:action"===e[20],"mdc-snackbar__dismiss":"snackbar:actions"===e[20],"mdc-data-table__pagination-button":"data-table:pagination"===e[20],"mdc-data-table__sort-icon-button":"data-table:sortable-header-cell"===e[20],"mdc-dialog__close":"dialog:header"===e[20]&&"close"===e[9],...e[14]})},32776&r[0]&&{style:Object.entries(e[15]).map(m).concat([e[3]]).join(" ")},524289&r[0]&&{"aria-pressed":e[19](e[0])?null:e[0]?"true":"false"},193&r[0]&&{"aria-label":e[0]?e[6]:e[7]},64&r[0]&&{"data-aria-label-on":e[6]},128&r[0]&&{"data-aria-label-off":e[7]},2097152&r[0]&&{"aria-describedby":e[21]},256&r[0]&&{href:e[8]},131072&r[0]&&(0,i.gCg)(e[17]),65536&r[0]&&(0,i.gCg)(e[16]),33554432&r[0]&&(0,i.gCg)(e[25])]):{};if(2&r[1]&&(c.$$scope={dirty:r,ctx:e}),s!==(s=e[10])){if(t){(0,i.dvw)();const e=t;(0,i.etI)(e.$$.fragment,1,0,(()=>{(0,i.vpE)(e,1)})),(0,i.gbL)()}s?(t=new s(a(e)),e[29](t),t.$on("click",e[30]),t.$on("click",e[31]),(0,i.YCL)(t.$$.fragment),(0,i.Ui)(t.$$.fragment,1),(0,i.yef)(t,n.parentNode,n)):t=null}else s&&t.$set(c)},i(e){r||(t&&(0,i.Ui)(t.$$.fragment,e),r=!0)},o(e){t&&(0,i.etI)(t.$$.fragment,e),r=!1},d(r){e[29](null),r&&(0,i.ogt)(n),t&&(0,i.vpE)(t,r)}}}const m=([e,t])=>`${e}: ${t};`;function g(e,t,n){let r;const o=["use","class","style","ripple","color","toggle","pressed","ariaLabelOn","ariaLabelOff","href","action","component","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:d}=t;const p=(0,u.PD)((0,i.w2L)());let f=()=>{};function m(e){return e===f}let g,v,{use:y=[]}=t,{class:b=""}=t,{style:E=""}=t,{ripple:S=!0}=t,{color:w}=t,{toggle:_=!1}=t,{pressed:T=f}=t,{ariaLabelOn:x}=t,{ariaLabelOff:C}=t,{href:I}=t,{action:k}=t,M={},A={},O={},R=(0,l.fw)("SMUI:icon-button:context"),L=(0,l.fw)("SMUI:icon-button:aria-describedby"),{component:D=(null==I?h.zx:h.A)}=t;(0,l.v)("SMUI:icon:context","icon-button");let N=null;function P(e){return e in M?M[e]:j().classList.contains(e)}function $(e){M[e]||n(14,M[e]=!0,M)}function U(e){e in M&&!M[e]||n(14,M[e]=!1,M)}function B(e){var t;return e in O?null!==(t=O[e])&&void 0!==t?t:null:j().getAttribute(e)}function F(e,t){O[e]!==t&&n(16,O[e]=t,O)}function j(){return g.getElement()}return(0,l.ev)((()=>{v&&v.destroy()})),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(25,s=(0,i.q2N)(t,o)),"use"in e&&n(1,y=e.use),"class"in e&&n(2,b=e.class),"style"in e&&n(3,E=e.style),"ripple"in e&&n(4,S=e.ripple),"color"in e&&n(5,w=e.color),"toggle"in e&&n(26,_=e.toggle),"pressed"in e&&n(0,T=e.pressed),"ariaLabelOn"in e&&n(6,x=e.ariaLabelOn),"ariaLabelOff"in e&&n(7,C=e.ariaLabelOff),"href"in e&&n(8,I=e.href),"action"in e&&n(9,k=e.action),"component"in e&&n(10,D=e.component),"$$scope"in e&&n(32,d=e.$$scope)},e.$$.update=()=>{512&e.$$.dirty[0]&&n(17,r=(()=>{if("data-table:pagination"!==R)return"dialog:header"===R?{"data-mdc-dialog-action":k}:{action:k};switch(k){case"first-page":return{"data-first-page":"true"};case"prev-page":return{"data-prev-page":"true"};case"next-page":return{"data-next-page":"true"};case"last-page":return{"data-last-page":"true"};default:return{"data-action":"true"}}})()),201338880&e.$$.dirty[0]&&g&&j()&&_!==N&&(_&&!v?(n(13,v=new c({addClass:$,hasClass:P,notifyChange:e=>{!function(e){n(0,T=e.isOn)}(e),(0,u.WI)(j(),"MDCIconButtonToggle:change",e)},removeClass:U,getAttr:B,setAttr:F})),v.init()):!_&&v&&(v.destroy(),n(13,v=void 0),n(14,M={}),n(16,O={})),n(27,N=_)),8193&e.$$.dirty[0]&&v&&!m(T)&&v.isOn()!==T&&v.toggle(T)},[T,y,b,E,S,w,x,C,I,k,D,j,g,v,M,A,O,r,p,m,R,L,$,U,function(e,t){A[e]!=t&&(""===t||null==t?(delete A[e],n(15,A)):n(15,A[e]=t,A))},s,_,N,a,function(e){i.VnY[e?"unshift":"push"]((()=>{g=e,n(12,g)}))},()=>v&&v.handleClick(),()=>"top-app-bar:navigation"===R&&(0,u.WI)(j(),"SMUITopAppBarIconButton:nav"),d]}class v extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,g,f,i.N8,{use:1,class:2,style:3,ripple:4,color:5,toggle:26,pressed:0,ariaLabelOn:6,ariaLabelOff:7,href:8,action:9,component:10,getElement:11},null,[-1,-1])}get getElement(){return this.$$.ctx[11]}}const y=v;n(32091);const b=y},78268:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(24234),r=n(70655),o=n(6308),s={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},a=function(e){function t(n){var i=e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this;return i.transitionEndHandler_=function(e){return i.handleTransitionEnd(e)},i}return(0,r.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return s},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.activate=function(){this.adapter.removeClass(s.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(s.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter.addClass(s.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var t=this.adapter.hasClass(s.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter.removeClass(s.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(s.LINE_RIPPLE_DEACTIVATING))},t}(o.K),c=n(68568),l=n(47658);function u(e){let t,n,r,o,s,a,c,u=[{class:n=(0,l.$o)({[e[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":e[3],...e[5]})},{style:r=Object.entries(e[6]).map(d).concat([e[2]]).join(" ")},e[8]],h={};for(let e=0;e<u.length;e+=1)h=(0,i.f0i)(h,u[e]);return{c(){t=(0,i.bGB)("div"),(0,i.UF7)(t,h)},m(n,r){(0,i.$Tr)(n,t,r),e[13](t),a||(c=[(0,i.TVh)(o=l.ol.call(null,t,e[0])),(0,i.TVh)(s=e[7].call(null,t))],a=!0)},p(e,[s]){(0,i.UF7)(t,h=(0,i.LoY)(u,[42&s&&n!==(n=(0,l.$o)({[e[1]]:!0,"mdc-line-ripple":!0,"mdc-line-ripple--active":e[3],...e[5]}))&&{class:n},68&s&&r!==(r=Object.entries(e[6]).map(d).concat([e[2]]).join(" "))&&{style:r},256&s&&e[8]])),o&&(0,i.sBU)(o.update)&&1&s&&o.update.call(null,e[0])},i:i.ZTd,o:i.ZTd,d(n){n&&(0,i.ogt)(t),e[13](null),a=!1,(0,i.j7q)(c)}}}const d=([e,t])=>`${e}: ${t};`;function h(e,t,n){const r=["use","class","style","active","activate","deactivate","setRippleCenter","getElement"];let o=(0,i.q2N)(t,r);const s=(0,l.PD)((0,i.w2L)());let u,d,{use:h=[]}=t,{class:p=""}=t,{style:f=""}=t,{active:m=!1}=t,g={},v={};function y(e){return e in g?g[e]:w().classList.contains(e)}function b(e){g[e]||n(5,g[e]=!0,g)}function E(e){e in g&&!g[e]||n(5,g[e]=!1,g)}function S(e,t){v[e]!=t&&(""===t||null==t?(delete v[e],n(6,v)):n(6,v[e]=t,v))}function w(){return u}return(0,c.H3)((()=>(d=new a({addClass:b,removeClass:E,hasClass:y,setStyle:S,registerEventHandler:(e,t)=>w().addEventListener(e,t),deregisterEventHandler:(e,t)=>w().removeEventListener(e,t)}),d.init(),()=>{d.destroy()}))),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(8,o=(0,i.q2N)(t,r)),"use"in e&&n(0,h=e.use),"class"in e&&n(1,p=e.class),"style"in e&&n(2,f=e.style),"active"in e&&n(3,m=e.active)},[h,p,f,m,u,g,v,s,o,function(){d.activate()},function(){d.deactivate()},function(e){d.setRippleCenter(e)},w,function(e){i.VnY[e?"unshift":"push"]((()=>{u=e,n(4,u)}))}]}class p extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,h,u,i.N8,{use:0,class:1,style:2,active:3,activate:9,deactivate:10,setRippleCenter:11,getElement:12})}get activate(){return this.$$.ctx[9]}get deactivate(){return this.$$.ctx[10]}get setRippleCenter(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}const f=p},14868:(e,t,n)=>{"use strict";n.d(t,{zs:()=>K,ck:()=>H,Z0:()=>q,xv:()=>D,ZP:()=>V});var i=n(24234),r=n(70655),o=n(6308),s=n(99502),a=n(55794),c=["input","button","textarea","select"],l=function(e){var t=e.target;if(t){var n=(""+t.tagName).toLowerCase();-1===c.indexOf(n)&&e.preventDefault()}};function u(e,t){var n,i=e.nextChar,r=e.focusItemAtIndex,o=e.sortedIndexByFirstChar,s=e.focusedItemIndex,c=e.skipFocus,l=e.isItemAtIndexDisabled;return clearTimeout(t.bufferClearTimeout),t.bufferClearTimeout=setTimeout((function(){h(t)}),a.KT.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),t.typeaheadBuffer=t.typeaheadBuffer+i,n=1===t.typeaheadBuffer.length?function(e,t,n,i){var r=i.typeaheadBuffer[0],o=e.get(r);if(!o)return-1;if(r===i.currentFirstChar&&o[i.sortedIndexCursor].index===t){i.sortedIndexCursor=(i.sortedIndexCursor+1)%o.length;var s=o[i.sortedIndexCursor].index;if(!n(s))return s}i.currentFirstChar=r;var a,c=-1;for(a=0;a<o.length;a++)if(!n(o[a].index)){c=a;break}for(;a<o.length;a++)if(o[a].index>t&&!n(o[a].index)){c=a;break}return-1!==c?(i.sortedIndexCursor=c,o[i.sortedIndexCursor].index):-1}(o,s,l,t):function(e,t,n){var i=n.typeaheadBuffer[0],r=e.get(i);if(!r)return-1;var o=r[n.sortedIndexCursor];if(0===o.text.lastIndexOf(n.typeaheadBuffer,0)&&!t(o.index))return o.index;for(var s=(n.sortedIndexCursor+1)%r.length,a=-1;s!==n.sortedIndexCursor;){var c=r[s],l=0===c.text.lastIndexOf(n.typeaheadBuffer,0),u=!t(c.index);if(l&&u){a=s;break}s=(s+1)%r.length}return-1!==a?(n.sortedIndexCursor=a,r[n.sortedIndexCursor].index):-1}(o,l,t),-1===n||c||r(n),n}function d(e){return e.typeaheadBuffer.length>0}function h(e){e.typeaheadBuffer=""}function p(e,t){var n=e.event,i=e.isTargetListItem,r=e.focusedItemIndex,o=e.focusItemAtIndex,a=e.sortedIndexByFirstChar,c=e.isItemAtIndexDisabled,h="ArrowLeft"===(0,s.ku)(n),p="ArrowUp"===(0,s.ku)(n),f="ArrowRight"===(0,s.ku)(n),m="ArrowDown"===(0,s.ku)(n),g="Home"===(0,s.ku)(n),v="End"===(0,s.ku)(n),y="Enter"===(0,s.ku)(n),b="Spacebar"===(0,s.ku)(n);return n.ctrlKey||n.metaKey||h||p||f||m||g||v||y?-1:b||1!==n.key.length?b?(i&&l(n),i&&d(t)?u({focusItemAtIndex:o,focusedItemIndex:r,nextChar:" ",sortedIndexByFirstChar:a,skipFocus:!1,isItemAtIndexDisabled:c},t):-1):-1:(l(n),u({focusItemAtIndex:o,focusedItemIndex:r,nextChar:n.key.toLowerCase(),sortedIndexByFirstChar:a,skipFocus:!1,isItemAtIndexDisabled:c},t))}var f=function(e){function t(n){var i=e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this;return i.wrapFocus_=!1,i.isVertical_=!0,i.isSingleSelectionList_=!1,i.selectedIndex_=a.KT.UNSET_INDEX,i.focusedItemIndex=a.KT.UNSET_INDEX,i.useActivatedClass_=!1,i.useSelectedAttr_=!1,i.ariaCurrentAttrValue_=null,i.isCheckboxList_=!1,i.isRadioList_=!1,i.hasTypeahead=!1,i.typeaheadState={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""},i.sortedIndexByFirstChar=new Map,i}return(0,r.ZT)(t,e),Object.defineProperty(t,"strings",{get:function(){return a.j2},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return a.UX},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return a.KT},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),t.prototype.layout=function(){0!==this.adapter.getListItemCount()&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList_=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList_=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},t.prototype.setWrapFocus=function(e){this.wrapFocus_=e},t.prototype.setVerticalOrientation=function(e){this.isVertical_=e},t.prototype.setSingleSelection=function(e){this.isSingleSelectionList_=e,e&&this.maybeInitializeSingleSelection()},t.prototype.maybeInitializeSingleSelection=function(){for(var e=this.adapter.getListItemCount(),t=0;t<e;t++){var n=this.adapter.listItemAtIndexHasClass(t,a.UX.LIST_ITEM_SELECTED_CLASS),i=this.adapter.listItemAtIndexHasClass(t,a.UX.LIST_ITEM_ACTIVATED_CLASS);if(n||i)return i&&this.setUseActivatedClass(!0),this.isSingleSelectionList_=!0,void(this.selectedIndex_=t)}},t.prototype.setHasTypeahead=function(e){this.hasTypeahead=e,e&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},t.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&d(this.typeaheadState)},t.prototype.setUseActivatedClass=function(e){this.useActivatedClass_=e},t.prototype.setUseSelectedAttribute=function(e){this.useSelectedAttr_=e},t.prototype.getSelectedIndex=function(){return this.selectedIndex_},t.prototype.setSelectedIndex=function(e){this.isIndexValid_(e)&&(this.isCheckboxList_?this.setCheckboxAtIndex_(e):this.isRadioList_?this.setRadioAtIndex_(e):this.setSingleSelectionAtIndex_(e))},t.prototype.handleFocusIn=function(e,t){t>=0&&(this.focusedItemIndex=t,this.adapter.setAttributeForElementIndex(t,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(t,"0"))},t.prototype.handleFocusOut=function(e,t){var n=this;t>=0&&(this.adapter.setAttributeForElementIndex(t,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(t,"-1")),setTimeout((function(){n.adapter.isFocusInsideList()||n.setTabindexToFirstSelectedOrFocusedItem()}),0)},t.prototype.handleKeydown=function(e,t,n){var i=this,r="ArrowLeft"===(0,s.ku)(e),o="ArrowUp"===(0,s.ku)(e),c="ArrowRight"===(0,s.ku)(e),u="ArrowDown"===(0,s.ku)(e),d="Home"===(0,s.ku)(e),h="End"===(0,s.ku)(e),f="Enter"===(0,s.ku)(e),m="Spacebar"===(0,s.ku)(e),g="A"===e.key||"a"===e.key;if(this.adapter.isRootFocused())o||h?(e.preventDefault(),this.focusLastElement()):(u||d)&&(e.preventDefault(),this.focusFirstElement()),this.hasTypeahead&&p({event:e,focusItemAtIndex:function(e){i.focusItemAtIndex(e)},focusedItemIndex:-1,isTargetListItem:t,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(e){return i.adapter.listItemAtIndexHasClass(e,a.UX.LIST_ITEM_DISABLED_CLASS)}},this.typeaheadState);else{var v=this.adapter.getFocusedElementIndex();if(!(-1===v&&(v=n)<0)){if(this.isVertical_&&u||!this.isVertical_&&c)l(e),this.focusNextElement(v);else if(this.isVertical_&&o||!this.isVertical_&&r)l(e),this.focusPrevElement(v);else if(d)l(e),this.focusFirstElement();else if(h)l(e),this.focusLastElement();else if(g&&e.ctrlKey&&this.isCheckboxList_)e.preventDefault(),this.toggleAll(this.selectedIndex_===a.KT.UNSET_INDEX?[]:this.selectedIndex_);else if((f||m)&&t){var y=e.target;if(y&&"A"===y.tagName&&f)return;if(l(e),this.adapter.listItemAtIndexHasClass(v,a.UX.LIST_ITEM_DISABLED_CLASS))return;this.isTypeaheadInProgress()||(this.isSelectableList_()&&this.setSelectedIndexOnAction_(v),this.adapter.notifyAction(v))}this.hasTypeahead&&p({event:e,focusItemAtIndex:function(e){i.focusItemAtIndex(e)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:t,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(e){return i.adapter.listItemAtIndexHasClass(e,a.UX.LIST_ITEM_DISABLED_CLASS)}},this.typeaheadState)}}},t.prototype.handleClick=function(e,t){e!==a.KT.UNSET_INDEX&&(this.adapter.listItemAtIndexHasClass(e,a.UX.LIST_ITEM_DISABLED_CLASS)||(this.isSelectableList_()&&this.setSelectedIndexOnAction_(e,t),this.adapter.notifyAction(e)))},t.prototype.focusNextElement=function(e){var t=e+1;if(t>=this.adapter.getListItemCount()){if(!this.wrapFocus_)return e;t=0}return this.focusItemAtIndex(t),t},t.prototype.focusPrevElement=function(e){var t=e-1;if(t<0){if(!this.wrapFocus_)return e;t=this.adapter.getListItemCount()-1}return this.focusItemAtIndex(t),t},t.prototype.focusFirstElement=function(){return this.focusItemAtIndex(0),0},t.prototype.focusLastElement=function(){var e=this.adapter.getListItemCount()-1;return this.focusItemAtIndex(e),e},t.prototype.focusInitialElement=function(){var e=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(e),e},t.prototype.setEnabled=function(e,t){this.isIndexValid_(e)&&(t?(this.adapter.removeClassForElementIndex(e,a.UX.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(e,a.j2.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(e,a.UX.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(e,a.j2.ARIA_DISABLED,"true")))},t.prototype.setSingleSelectionAtIndex_=function(e){if(this.selectedIndex_!==e){var t=a.UX.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass_&&(t=a.UX.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex_!==a.KT.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex_,t),this.setAriaForSingleSelectionAtIndex_(e),this.setTabindexAtIndex(e),e!==a.KT.UNSET_INDEX&&this.adapter.addClassForElementIndex(e,t),this.selectedIndex_=e}},t.prototype.setAriaForSingleSelectionAtIndex_=function(e){this.selectedIndex_===a.KT.UNSET_INDEX&&(this.ariaCurrentAttrValue_=this.adapter.getAttributeForElementIndex(e,a.j2.ARIA_CURRENT));var t=null!==this.ariaCurrentAttrValue_,n=t?a.j2.ARIA_CURRENT:a.j2.ARIA_SELECTED;if(this.selectedIndex_!==a.KT.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex_,n,"false"),e!==a.KT.UNSET_INDEX){var i=t?this.ariaCurrentAttrValue_:"true";this.adapter.setAttributeForElementIndex(e,n,i)}},t.prototype.getSelectionAttribute=function(){return this.useSelectedAttr_?a.j2.ARIA_SELECTED:a.j2.ARIA_CHECKED},t.prototype.setRadioAtIndex_=function(e){var t=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(e,!0),this.selectedIndex_!==a.KT.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex_,t,"false"),this.adapter.setAttributeForElementIndex(e,t,"true"),this.selectedIndex_=e},t.prototype.setCheckboxAtIndex_=function(e){for(var t=this.getSelectionAttribute(),n=0;n<this.adapter.getListItemCount();n++){var i=!1;e.indexOf(n)>=0&&(i=!0),this.adapter.setCheckedCheckboxOrRadioAtIndex(n,i),this.adapter.setAttributeForElementIndex(n,t,i?"true":"false")}this.selectedIndex_=e},t.prototype.setTabindexAtIndex=function(e){this.focusedItemIndex===a.KT.UNSET_INDEX&&0!==e?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==e&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),this.selectedIndex_ instanceof Array||this.selectedIndex_===e||this.adapter.setAttributeForElementIndex(this.selectedIndex_,"tabindex","-1"),e!==a.KT.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(e,"tabindex","0")},t.prototype.isSelectableList_=function(){return this.isSingleSelectionList_||this.isCheckboxList_||this.isRadioList_},t.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var e=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(e)},t.prototype.getFirstSelectedOrFocusedItemIndex=function(){var e=this.focusedItemIndex>=0?this.focusedItemIndex:0;return this.isSelectableList_()&&("number"==typeof this.selectedIndex_&&this.selectedIndex_!==a.KT.UNSET_INDEX?e=this.selectedIndex_:this.selectedIndex_ instanceof Array&&this.selectedIndex_.length>0&&(e=this.selectedIndex_.reduce((function(e,t){return Math.min(e,t)})))),e},t.prototype.isIndexValid_=function(e){var t=this;if(e instanceof Array){if(!this.isCheckboxList_)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return 0===e.length||e.some((function(e){return t.isIndexInRange_(e)}))}if("number"==typeof e){if(this.isCheckboxList_)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+e);return this.isIndexInRange_(e)||this.isSingleSelectionList_&&e===a.KT.UNSET_INDEX}return!1},t.prototype.isIndexInRange_=function(e){var t=this.adapter.getListItemCount();return e>=0&&e<t},t.prototype.setSelectedIndexOnAction_=function(e,t){void 0===t&&(t=!0),this.isCheckboxList_?this.toggleCheckboxAtIndex_(e,t):this.setSelectedIndex(e)},t.prototype.toggleCheckboxAtIndex_=function(e,t){var n=this.getSelectionAttribute(),i=this.adapter.isCheckboxCheckedAtIndex(e);t&&(i=!i,this.adapter.setCheckedCheckboxOrRadioAtIndex(e,i)),this.adapter.setAttributeForElementIndex(e,n,i?"true":"false");var r=this.selectedIndex_===a.KT.UNSET_INDEX?[]:this.selectedIndex_.slice();i?r.push(e):r=r.filter((function(t){return t!==e})),this.selectedIndex_=r},t.prototype.focusItemAtIndex=function(e){this.adapter.focusItemAtIndex(e),this.focusedItemIndex=e},t.prototype.toggleAll=function(e){var t=this.adapter.getListItemCount();if(e.length===t)this.setCheckboxAtIndex_([]);else{for(var n=[],i=0;i<t;i++)(!this.adapter.listItemAtIndexHasClass(i,a.UX.LIST_ITEM_DISABLED_CLASS)||e.indexOf(i)>-1)&&n.push(i);this.setCheckboxAtIndex_(n)}},t.prototype.typeaheadMatchItem=function(e,t,n){var i=this;return void 0===n&&(n=!1),u({focusItemAtIndex:function(e){i.focusItemAtIndex(e)},focusedItemIndex:t||this.focusedItemIndex,nextChar:e,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:n,isItemAtIndexDisabled:function(e){return i.adapter.listItemAtIndexHasClass(e,a.UX.LIST_ITEM_DISABLED_CLASS)}},this.typeaheadState)},t.prototype.typeaheadInitSortedIndex=function(){return function(e,t){for(var n=new Map,i=0;i<e;i++){var r=t(i).trim();if(r){var o=r[0].toLowerCase();n.has(o)||n.set(o,[]),n.get(o).push({text:r.toLowerCase(),index:i})}}return n.forEach((function(e){e.sort((function(e,t){return e.index-t.index}))})),n}(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},t.prototype.clearTypeaheadBuffer=function(){h(this.typeaheadState)},t}(o.K),m=n(42851),g=n(68568),v=n(47658),y=n(46504);function b(e){let t;const n=e[36].default,r=(0,i.nuO)(n,e,e[42],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||2048&o[1])&&(0,i.kmG)(r,n,e,e[42],t?(0,i.u2N)(n,e[42],o,null):(0,i.VOJ)(e[42]),null)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function E(e){let t,n,r;const o=[{use:[e[17],...e[0]]},{class:(0,v.$o)({[e[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":e[2],"mdc-deprecated-list--dense":e[3],"mdc-deprecated-list--textual-list":e[4],"mdc-deprecated-list--avatar-list":e[5]||e[18],"mdc-deprecated-list--icon-list":e[6],"mdc-deprecated-list--image-list":e[7],"mdc-deprecated-list--thumbnail-list":e[8],"mdc-deprecated-list--video-list":e[9],"mdc-deprecated-list--two-line":e[10],"smui-list--three-line":e[11]&&!e[10]})},{role:e[15]},e[23]];var s=e[12];function a(e){let t={$$slots:{default:[b]},$$scope:{ctx:e}};for(let e=0;e<o.length;e+=1)t=(0,i.f0i)(t,o[e]);return{props:t}}return s&&(t=new s(a(e)),e[37](t),t.$on("keydown",e[38]),t.$on("focusin",e[39]),t.$on("focusout",e[40]),t.$on("click",e[41]),t.$on("SMUIListItem:mount",e[19]),t.$on("SMUIListItem:unmount",e[20]),t.$on("SMUI:action",e[21])),{c(){t&&(0,i.YCL)(t.$$.fragment),n=(0,i.cSb)()},m(e,o){t&&(0,i.yef)(t,e,o),(0,i.$Tr)(e,n,o),r=!0},p(e,r){const c=8818687&r[0]?(0,i.LoY)(o,[131073&r[0]&&{use:[e[17],...e[0]]},266238&r[0]&&{class:(0,v.$o)({[e[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":e[2],"mdc-deprecated-list--dense":e[3],"mdc-deprecated-list--textual-list":e[4],"mdc-deprecated-list--avatar-list":e[5]||e[18],"mdc-deprecated-list--icon-list":e[6],"mdc-deprecated-list--image-list":e[7],"mdc-deprecated-list--thumbnail-list":e[8],"mdc-deprecated-list--video-list":e[9],"mdc-deprecated-list--two-line":e[10],"smui-list--three-line":e[11]&&!e[10]})},32768&r[0]&&{role:e[15]},8388608&r[0]&&(0,i.gCg)(e[23])]):{};if(2048&r[1]&&(c.$$scope={dirty:r,ctx:e}),s!==(s=e[12])){if(t){(0,i.dvw)();const e=t;(0,i.etI)(e.$$.fragment,1,0,(()=>{(0,i.vpE)(e,1)})),(0,i.gbL)()}s?(t=new s(a(e)),e[37](t),t.$on("keydown",e[38]),t.$on("focusin",e[39]),t.$on("focusout",e[40]),t.$on("click",e[41]),t.$on("SMUIListItem:mount",e[19]),t.$on("SMUIListItem:unmount",e[20]),t.$on("SMUI:action",e[21]),(0,i.YCL)(t.$$.fragment),(0,i.Ui)(t.$$.fragment,1),(0,i.yef)(t,n.parentNode,n)):t=null}else s&&t.$set(c)},i(e){r||(t&&(0,i.Ui)(t.$$.fragment,e),r=!0)},o(e){t&&(0,i.etI)(t.$$.fragment,e),r=!1},d(r){e[37](null),r&&(0,i.ogt)(n),t&&(0,i.vpE)(t,r)}}}function S(e,t,n){const r=["use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","selectedIndex","radioList","checkList","hasTypeahead","component","layout","setEnabled","getTypeaheadInProgress","getSelectedIndex","getElement"];let o=(0,i.q2N)(t,r),{$$slots:s={},$$scope:a}=t;var c;const{closest:l,matches:u}=m,d=(0,v.PD)((0,i.w2L)());let h,p,{use:b=[]}=t,{class:E=""}=t,{nonInteractive:S=!1}=t,{dense:w=!1}=t,{textualList:_=!1}=t,{avatarList:T=!1}=t,{iconList:x=!1}=t,{imageList:C=!1}=t,{thumbnailList:I=!1}=t,{videoList:k=!1}=t,{twoLine:M=!1}=t,{threeLine:A=!1}=t,{vertical:O=!0}=t,{wrapFocus:R=null!==(c=(0,g.fw)("SMUI:list:wrapFocus"))&&void 0!==c&&c}=t,{singleSelection:L=!1}=t,{selectedIndex:D=-1}=t,{radioList:N=!1}=t,{checkList:P=!1}=t,{hasTypeahead:$=!1}=t,U=[],B=(0,g.fw)("SMUI:list:role"),F=(0,g.fw)("SMUI:list:nav");const j=new WeakMap;let H,K=(0,g.fw)("SMUI:dialog:selection"),q=(0,g.fw)("SMUI:addLayoutListener"),{component:V=(F?y.JL:y.Ul)}=t;function G(){return null==h?[]:[...ie().children].map((e=>j.get(e))).filter((e=>e&&e._smui_list_item_accessor))}function W(e){const t=G()[e];t&&"focus"in t.element&&t.element.focus()}function z(e,t){var n;const i=G()[e];return null!==(n=i&&i.hasClass(t))&&void 0!==n&&n}function Y(e,t){const n=G()[e];n&&n.addClass(t)}function X(e,t){const n=G()[e];n&&n.removeClass(t)}function J(e,t,n){const i=G()[e];i&&i.addAttr(t,n)}function Q(e,t){const n=G()[e];n&&n.removeAttr(t)}function Z(e){var t;const n=G()[e];return null!==(t=n&&n.getPrimaryText())&&void 0!==t?t:""}function ee(e){const t=l(e,".mdc-deprecated-list-item, .mdc-deprecated-list");return t&&u(t,".mdc-deprecated-list-item")?G().map((e=>null==e?void 0:e.element)).indexOf(t):-1}function te(){return p.layout()}function ne(){return p.getSelectedIndex()}function ie(){return h.getElement()}return(0,g.v)("SMUI:list:nonInteractive",S),(0,g.v)("SMUI:separator:context","list"),B||(L?(B="listbox",(0,g.v)("SMUI:list:item:role","option")):N?(B="radiogroup",(0,g.v)("SMUI:list:item:role","radio")):P?(B="group",(0,g.v)("SMUI:list:item:role","checkbox")):(B="list",(0,g.v)("SMUI:list:item:role",void 0))),q&&(H=q(te)),(0,g.H3)((()=>{n(13,p=new f({addClassForElementIndex:Y,focusItemAtIndex:W,getAttributeForElementIndex:(e,t)=>{var n,i;return null!==(i=null===(n=G()[e])||void 0===n?void 0:n.getAttr(t))&&void 0!==i?i:null},getFocusedElementIndex:()=>document.activeElement?G().map((e=>e.element)).indexOf(document.activeElement):-1,getListItemCount:()=>U.length,getPrimaryTextAtIndex:Z,hasCheckboxAtIndex:e=>{var t,n;return null!==(n=null===(t=G()[e])||void 0===t?void 0:t.hasCheckbox)&&void 0!==n&&n},hasRadioAtIndex:e=>{var t,n;return null!==(n=null===(t=G()[e])||void 0===t?void 0:t.hasRadio)&&void 0!==n&&n},isCheckboxCheckedAtIndex:e=>{var t;const n=G()[e];return null!==(t=(null==n?void 0:n.hasCheckbox)&&n.checked)&&void 0!==t&&t},isFocusInsideList:()=>null!=h&&ie()!==document.activeElement&&ie().contains(document.activeElement),isRootFocused:()=>null!=h&&document.activeElement===ie(),listItemAtIndexHasClass:z,notifyAction:e=>{n(24,D=e),null!=h&&(0,v.WI)(ie(),"MDCList:action",{index:e})},removeClassForElementIndex:X,setAttributeForElementIndex:J,setCheckedCheckboxOrRadioAtIndex:(e,t)=>{G()[e].checked=t},setTabIndexForListItemChildren:(e,t)=>{const n=G()[e];Array.prototype.forEach.call(n.element.querySelectorAll("button:not(:disabled), a"),(e=>{e.setAttribute("tabindex",t)}))}}));const e={get element(){return ie()},get items(){return U},get typeaheadInProgress(){return p.isTypeaheadInProgress()},typeaheadMatchItem:(e,t)=>p.typeaheadMatchItem(e,t,!0),getOrderedList:G,focusItemAtIndex:W,addClassForElementIndex:Y,removeClassForElementIndex:X,setAttributeForElementIndex:J,removeAttributeForElementIndex:Q,getPrimaryTextAtIndex:Z};return(0,v.WI)(ie(),"SMUIList:mount",e),p.init(),()=>{p.destroy()}})),(0,g.ev)((()=>{H&&H()})),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(23,o=(0,i.q2N)(t,r)),"use"in e&&n(0,b=e.use),"class"in e&&n(1,E=e.class),"nonInteractive"in e&&n(2,S=e.nonInteractive),"dense"in e&&n(3,w=e.dense),"textualList"in e&&n(4,_=e.textualList),"avatarList"in e&&n(5,T=e.avatarList),"iconList"in e&&n(6,x=e.iconList),"imageList"in e&&n(7,C=e.imageList),"thumbnailList"in e&&n(8,I=e.thumbnailList),"videoList"in e&&n(9,k=e.videoList),"twoLine"in e&&n(10,M=e.twoLine),"threeLine"in e&&n(11,A=e.threeLine),"vertical"in e&&n(25,O=e.vertical),"wrapFocus"in e&&n(26,R=e.wrapFocus),"singleSelection"in e&&n(27,L=e.singleSelection),"selectedIndex"in e&&n(24,D=e.selectedIndex),"radioList"in e&&n(28,N=e.radioList),"checkList"in e&&n(29,P=e.checkList),"hasTypeahead"in e&&n(30,$=e.hasTypeahead),"component"in e&&n(12,V=e.component),"$$scope"in e&&n(42,a=e.$$scope)},e.$$.update=()=>{33562624&e.$$.dirty[0]&&p&&p.setVerticalOrientation(O),67117056&e.$$.dirty[0]&&p&&p.setWrapFocus(R),1073750016&e.$$.dirty[0]&&p&&p.setHasTypeahead($),134225920&e.$$.dirty[0]&&p&&p.setSingleSelection(L),151003136&e.$$.dirty[0]&&p&&L&&ne()!==D&&p.setSelectedIndex(D)},[b,E,S,w,_,T,x,C,I,k,M,A,V,p,h,B,u,d,K,function(e){U.push(e.detail),j.set(e.detail.element,e.detail),L&&e.detail.selected&&n(24,D=ee(e.detail.element)),e.stopPropagation()},function(e){var t;const n=null!==(t=e.detail&&U.indexOf(e.detail))&&void 0!==t?t:-1;-1!==n&&(U.splice(n,1),j.delete(e.detail.element)),e.stopPropagation()},function(e){if(N||P){const t=ee(e.target);if(-1!==t){const e=G()[t];e&&(N&&!e.checked||P)&&(e.checked=!e.checked,e.activateRipple(),window.requestAnimationFrame((()=>{e.deactivateRipple()})))}}},ee,o,D,O,R,L,N,P,$,te,function(e,t){return p.setEnabled(e,t)},function(){return p.isTypeaheadInProgress()},ne,ie,s,function(e){i.VnY[e?"unshift":"push"]((()=>{h=e,n(14,h)}))},e=>p&&p.handleKeydown(e,e.target.classList.contains("mdc-deprecated-list-item"),ee(e.target)),e=>p&&p.handleFocusIn(e,ee(e.target)),e=>p&&p.handleFocusOut(e,ee(e.target)),e=>p&&p.handleClick(ee(e.target),!u(e.target,'input[type="checkbox"], input[type="radio"]')),a]}class w extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,S,E,i.N8,{use:0,class:1,nonInteractive:2,dense:3,textualList:4,avatarList:5,iconList:6,imageList:7,thumbnailList:8,videoList:9,twoLine:10,threeLine:11,vertical:25,wrapFocus:26,singleSelection:27,selectedIndex:24,radioList:28,checkList:29,hasTypeahead:30,component:12,layout:31,setEnabled:32,getTypeaheadInProgress:33,getSelectedIndex:34,getElement:35},null,[-1,-1])}get layout(){return this.$$.ctx[31]}get setEnabled(){return this.$$.ctx[32]}get getTypeaheadInProgress(){return this.$$.ctx[33]}get getSelectedIndex(){return this.$$.ctx[34]}get getElement(){return this.$$.ctx[35]}}const _=w;var T=n(37341);function x(e){let t;return{c(){t=(0,i.bGB)("span"),(0,i.Ljt)(t,"class","mdc-deprecated-list-item__ripple")},m(e,n){(0,i.$Tr)(e,t,n)},d(e){e&&(0,i.ogt)(t)}}}function C(e){let t,n,r=e[6]&&x();const o=e[31].default,s=(0,i.nuO)(o,e,e[34],null);return{c(){r&&r.c(),t=(0,i.cSb)(),s&&s.c()},m(e,o){r&&r.m(e,o),(0,i.$Tr)(e,t,o),s&&s.m(e,o),n=!0},p(e,a){e[6]?r||(r=x(),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),s&&s.p&&(!n||8&a[1])&&(0,i.kmG)(s,o,e,e[34],n?(0,i.u2N)(o,e[34],a,null):(0,i.VOJ)(e[34]),null)},i(e){n||((0,i.Ui)(s,e),n=!0)},o(e){(0,i.etI)(s,e),n=!1},d(e){r&&r.d(e),e&&(0,i.ogt)(t),s&&s.d(e)}}}function I(e){let t,n,r;const o=[{use:[...e[5]?[]:[[T.Z,{ripple:!e[12],unbounded:!1,color:(e[7]||e[0])&&null==e[4]?"primary":e[4],disabled:e[9],addClass:e[20],removeClass:e[21],addStyle:e[22]}]],e[18],...e[1]]},{class:(0,v.$o)({[e[2]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":e[7],"mdc-deprecated-list-item--selected":e[0],"mdc-deprecated-list-item--disabled":e[9],"mdc-menu-item--selected":!e[19]&&"menuitem"===e[8]&&e[0],"smui-menu-item--non-interactive":e[5],...e[14]})},{style:Object.entries(e[15]).map(M).concat([e[3]]).join(" ")},e[19]&&e[7]?{"aria-current":"page"}:{},e[19]?{}:{role:e[8]},e[19]||"option"!==e[8]?{}:{"aria-selected":e[0]?"true":"false"},e[19]||"radio"!==e[8]&&"checkbox"!==e[8]?{}:{"aria-checked":e[12]&&e[12].checked?"true":"false"},e[19]?{}:{"aria-disabled":e[9]?"true":"false"},{tabindex:e[17]},{href:e[10]},e[16],e[26]];var s=e[11];function a(e){let t={$$slots:{default:[C]},$$scope:{ctx:e}};for(let e=0;e<o.length;e+=1)t=(0,i.f0i)(t,o[e]);return{props:t}}return s&&(t=new s(a(e)),e[32](t),t.$on("click",e[23]),t.$on("keydown",e[24]),t.$on("SMUIGenericInput:mount",e[25]),t.$on("SMUIGenericInput:unmount",e[33])),{c(){t&&(0,i.YCL)(t.$$.fragment),n=(0,i.cSb)()},m(e,o){t&&(0,i.yef)(t,e,o),(0,i.$Tr)(e,n,o),r=!0},p(e,r){const c=75487167&r[0]?(0,i.LoY)(o,[7606963&r[0]&&{use:[...e[5]?[]:[[T.Z,{ripple:!e[12],unbounded:!1,color:(e[7]||e[0])&&null==e[4]?"primary":e[4],disabled:e[9],addClass:e[20],removeClass:e[21],addStyle:e[22]}]],e[18],...e[1]]},541605&r[0]&&{class:(0,v.$o)({[e[2]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":e[7],"mdc-deprecated-list-item--selected":e[0],"mdc-deprecated-list-item--disabled":e[9],"mdc-menu-item--selected":!e[19]&&"menuitem"===e[8]&&e[0],"smui-menu-item--non-interactive":e[5],...e[14]})},32776&r[0]&&{style:Object.entries(e[15]).map(M).concat([e[3]]).join(" ")},524416&r[0]&&(0,i.gCg)(e[19]&&e[7]?{"aria-current":"page"}:{}),524544&r[0]&&(0,i.gCg)(e[19]?{}:{role:e[8]}),524545&r[0]&&(0,i.gCg)(e[19]||"option"!==e[8]?{}:{"aria-selected":e[0]?"true":"false"}),528640&r[0]&&(0,i.gCg)(e[19]||"radio"!==e[8]&&"checkbox"!==e[8]?{}:{"aria-checked":e[12]&&e[12].checked?"true":"false"}),524800&r[0]&&(0,i.gCg)(e[19]?{}:{"aria-disabled":e[9]?"true":"false"}),131072&r[0]&&{tabindex:e[17]},1024&r[0]&&{href:e[10]},65536&r[0]&&(0,i.gCg)(e[16]),67108864&r[0]&&(0,i.gCg)(e[26])]):{};if(64&r[0]|8&r[1]&&(c.$$scope={dirty:r,ctx:e}),s!==(s=e[11])){if(t){(0,i.dvw)();const e=t;(0,i.etI)(e.$$.fragment,1,0,(()=>{(0,i.vpE)(e,1)})),(0,i.gbL)()}s?(t=new s(a(e)),e[32](t),t.$on("click",e[23]),t.$on("keydown",e[24]),t.$on("SMUIGenericInput:mount",e[25]),t.$on("SMUIGenericInput:unmount",e[33]),(0,i.YCL)(t.$$.fragment),(0,i.Ui)(t.$$.fragment,1),(0,i.yef)(t,n.parentNode,n)):t=null}else s&&t.$set(c)},i(e){r||(t&&(0,i.Ui)(t.$$.fragment,e),r=!0)},o(e){t&&(0,i.etI)(t.$$.fragment,e),r=!1},d(r){e[32](null),r&&(0,i.ogt)(n),t&&(0,i.vpE)(t,r)}}}let k=0;const M=([e,t])=>`${e}: ${t};`;function A(e,t,n){let r;const o=["use","class","style","color","nonInteractive","ripple","activated","role","selected","disabled","tabindex","inputId","href","component","getPrimaryText","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t;var l;const u=(0,v.PD)((0,i.w2L)());let d=()=>{},{use:h=[]}=t,{class:p=""}=t,{style:f=""}=t,{color:m}=t,{nonInteractive:b=null!==(l=(0,g.fw)("SMUI:list:nonInteractive"))&&void 0!==l&&l}=t;(0,g.v)("SMUI:list:nonInteractive",void 0);let{ripple:E=!b}=t,{activated:S=!1}=t,{role:w=(0,g.fw)("SMUI:list:item:role")}=t;(0,g.v)("SMUI:list:item:role",void 0);let _,T,x,{selected:C=!1}=t,{disabled:I=!1}=t,{tabindex:M=d}=t,{inputId:A="SMUI-form-field-list-"+k++}=t,{href:O}=t,R={},L={},D={},N=(0,g.fw)("SMUI:list:item:nav"),{component:P=(N?O?y.A:y.Dr:y.Li)}=t;function $(e){return e in R?R[e]:G().classList.contains(e)}function U(e){R[e]||n(14,R[e]=!0,R)}function B(e){e in R&&!R[e]||n(14,R[e]=!1,R)}function F(e){var t;return e in D?null!==(t=D[e])&&void 0!==t?t:null:G().getAttribute(e)}function j(e,t){D[e]!==t&&n(16,D[e]=t,D)}function H(e){e in D&&null==D[e]||n(16,D[e]=void 0,D)}function K(){let e=!0,t=_.getElement();for(;t.nextElementSibling;)if(t=t.nextElementSibling,1===t.nodeType&&t.classList.contains("mdc-deprecated-list-item")){const n=t.attributes.getNamedItem("tabindex");if(n&&"0"===n.value){e=!1;break}}e&&n(17,r=0)}function q(e){I||(0,v.WI)(G(),"SMUI:action",e)}function V(){var e,t,n;const i=G(),r=i.querySelector(".mdc-deprecated-list-item__primary-text");if(r)return null!==(e=r.textContent)&&void 0!==e?e:"";const o=i.querySelector(".mdc-deprecated-list-item__text");return o?null!==(t=o.textContent)&&void 0!==t?t:"":null!==(n=i.textContent)&&void 0!==n?n:""}function G(){return _.getElement()}return(0,g.v)("SMUI:generic:input:props",{id:A}),(0,g.v)("SMUI:separator:context",void 0),(0,g.H3)((()=>{if(!C&&!b){let e=!0,t=_;for(;t.previousSibling;)if(t=t.previousSibling,1===t.nodeType&&t.classList.contains("mdc-deprecated-list-item")&&!t.classList.contains("mdc-deprecated-list-item--disabled")){e=!1;break}e&&(x=window.requestAnimationFrame(K))}const e={_smui_list_item_accessor:!0,get element(){return G()},get selected(){return C},set selected(e){n(0,C=e)},hasClass:$,addClass:U,removeClass:B,getAttr:F,addAttr:j,removeAttr:H,getPrimaryText:V,get checked(){var e;return null!==(e=T&&T.checked)&&void 0!==e&&e},set checked(e){T&&n(12,T.checked=!!e,T)},get hasCheckbox(){return!(!T||!("_smui_checkbox_accessor"in T))},get hasRadio(){return!(!T||!("_smui_radio_accessor"in T))},activateRipple(){T&&T.activateRipple()},deactivateRipple(){T&&T.deactivateRipple()},getValue:()=>s.value};return(0,v.WI)(G(),"SMUIListItem:mount",e),()=>{(0,v.WI)(G(),"SMUIListItem:unmount",e)}})),(0,g.ev)((()=>{x&&window.cancelAnimationFrame(x)})),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(26,s=(0,i.q2N)(t,o)),"use"in e&&n(1,h=e.use),"class"in e&&n(2,p=e.class),"style"in e&&n(3,f=e.style),"color"in e&&n(4,m=e.color),"nonInteractive"in e&&n(5,b=e.nonInteractive),"ripple"in e&&n(6,E=e.ripple),"activated"in e&&n(7,S=e.activated),"role"in e&&n(8,w=e.role),"selected"in e&&n(0,C=e.selected),"disabled"in e&&n(9,I=e.disabled),"tabindex"in e&&n(27,M=e.tabindex),"inputId"in e&&n(28,A=e.inputId),"href"in e&&n(10,O=e.href),"component"in e&&n(11,P=e.component),"$$scope"in e&&n(34,c=e.$$scope)},e.$$.update=()=>{134222369&e.$$.dirty[0]&&n(17,r=M===d?b||I||!(C||T&&T.checked)?-1:0:M)},[C,h,p,f,m,b,E,S,w,I,O,P,T,_,R,L,D,r,u,N,U,B,function(e,t){L[e]!=t&&(""===t||null==t?(delete L[e],n(15,L)):n(15,L[e]=t,L))},q,function(e){const t="Enter"===e.key,n="Space"===e.key;(t||n)&&q(e)},function(e){("_smui_checkbox_accessor"in e.detail||"_smui_radio_accessor"in e.detail)&&n(12,T=e.detail)},s,M,A,V,G,a,function(e){i.VnY[e?"unshift":"push"]((()=>{_=e,n(13,_)}))},()=>n(12,T=void 0),c]}class O extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,A,I,i.N8,{use:1,class:2,style:3,color:4,nonInteractive:5,ripple:6,activated:7,role:8,selected:0,disabled:9,tabindex:27,inputId:28,href:10,component:11,getPrimaryText:29,getElement:30},null,[-1,-1])}get getPrimaryText(){return this.$$.ctx[29]}get getElement(){return this.$$.ctx[30]}}const R=O;var L=n(58858);const D=(0,L.C)({class:"mdc-deprecated-list-item__text",component:y.Dr});function N(e){let t,n,r,o,s,a,c;const l=e[8].default,u=(0,i.nuO)(l,e,e[7],null);let d=[{class:n=(0,v.$o)({[e[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":e[4]})},e[5]],h={};for(let e=0;e<d.length;e+=1)h=(0,i.f0i)(h,d[e]);return{c(){t=(0,i.bGB)("span"),u&&u.c(),(0,i.UF7)(t,h)},m(n,l){(0,i.$Tr)(n,t,l),u&&u.m(t,null),e[9](t),s=!0,a||(c=[(0,i.TVh)(r=v.ol.call(null,t,e[0])),(0,i.TVh)(o=e[3].call(null,t))],a=!0)},p(e,[o]){u&&u.p&&(!s||128&o)&&(0,i.kmG)(u,l,e,e[7],s?(0,i.u2N)(l,e[7],o,null):(0,i.VOJ)(e[7]),null),(0,i.UF7)(t,h=(0,i.LoY)(d,[(!s||2&o&&n!==(n=(0,v.$o)({[e[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":e[4]})))&&{class:n},32&o&&e[5]])),r&&(0,i.sBU)(r.update)&&1&o&&r.update.call(null,e[0])},i(e){s||((0,i.Ui)(u,e),s=!0)},o(e){(0,i.etI)(u,e),s=!1},d(n){n&&(0,i.ogt)(t),u&&u.d(n),e[9](null),a=!1,(0,i.j7q)(c)}}}function P(e,t,n){const r=["use","class","getElement"];let o=(0,i.q2N)(t,r),{$$slots:s={},$$scope:a}=t;const c=(0,v.PD)((0,i.w2L)());let l,{use:u=[]}=t,{class:d=""}=t,h=(0,g.fw)("SMUI:list:graphic:menu-selection-group");return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(5,o=(0,i.q2N)(t,r)),"use"in e&&n(0,u=e.use),"class"in e&&n(1,d=e.class),"$$scope"in e&&n(7,a=e.$$scope)},[u,d,l,c,h,o,function(){return l},a,s,function(e){i.VnY[e?"unshift":"push"]((()=>{l=e,n(2,l)}))}]}(0,L.C)({class:"mdc-deprecated-list-item__primary-text",component:y.Dr}),(0,L.C)({class:"mdc-deprecated-list-item__secondary-text",component:y.Dr});class $ extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,P,N,i.N8,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}const U=$;function B(e){let t,n,r;const o=[{use:[e[9],...e[0]]},{class:(0,v.$o)({[e[1]]:!0,"mdc-deprecated-list-divider":!0,"mdc-deprecated-list-divider--padded":e[2],"mdc-deprecated-list-divider--inset":e[3],"mdc-deprecated-list-divider--inset-leading":e[4],"mdc-deprecated-list-divider--inset-trailing":e[5],"mdc-deprecated-list-divider--inset-padding":e[6]})},{role:"separator"},e[10]];var s=e[7];function a(e){let t={};for(let e=0;e<o.length;e+=1)t=(0,i.f0i)(t,o[e]);return{props:t}}return s&&(t=new s(a()),e[12](t)),{c(){t&&(0,i.YCL)(t.$$.fragment),n=(0,i.cSb)()},m(e,o){t&&(0,i.yef)(t,e,o),(0,i.$Tr)(e,n,o),r=!0},p(e,[r]){const c=1663&r?(0,i.LoY)(o,[513&r&&{use:[e[9],...e[0]]},126&r&&{class:(0,v.$o)({[e[1]]:!0,"mdc-deprecated-list-divider":!0,"mdc-deprecated-list-divider--padded":e[2],"mdc-deprecated-list-divider--inset":e[3],"mdc-deprecated-list-divider--inset-leading":e[4],"mdc-deprecated-list-divider--inset-trailing":e[5],"mdc-deprecated-list-divider--inset-padding":e[6]})},o[2],1024&r&&(0,i.gCg)(e[10])]):{};if(s!==(s=e[7])){if(t){(0,i.dvw)();const e=t;(0,i.etI)(e.$$.fragment,1,0,(()=>{(0,i.vpE)(e,1)})),(0,i.gbL)()}s?(t=new s(a()),e[12](t),(0,i.YCL)(t.$$.fragment),(0,i.Ui)(t.$$.fragment,1),(0,i.yef)(t,n.parentNode,n)):t=null}else s&&t.$set(c)},i(e){r||(t&&(0,i.Ui)(t.$$.fragment,e),r=!0)},o(e){t&&(0,i.etI)(t.$$.fragment,e),r=!1},d(r){e[12](null),r&&(0,i.ogt)(n),t&&(0,i.vpE)(t,r)}}}function F(e,t,n){const r=["use","class","padded","inset","insetLeading","insetTrailing","insetPadding","component","getElement"];let o=(0,i.q2N)(t,r);const s=(0,v.PD)((0,i.w2L)());let a,{use:c=[]}=t,{class:l=""}=t,{padded:u=!1}=t,{inset:d=!1}=t,{insetLeading:h=!1}=t,{insetTrailing:p=!1}=t,{insetPadding:f=!1}=t,m=(0,g.fw)("SMUI:list:item:nav"),b=(0,g.fw)("SMUI:separator:context"),{component:E=(m||"list"!==b?y.Hr:y.Li)}=t;return e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(10,o=(0,i.q2N)(t,r)),"use"in e&&n(0,c=e.use),"class"in e&&n(1,l=e.class),"padded"in e&&n(2,u=e.padded),"inset"in e&&n(3,d=e.inset),"insetLeading"in e&&n(4,h=e.insetLeading),"insetTrailing"in e&&n(5,p=e.insetTrailing),"insetPadding"in e&&n(6,f=e.insetPadding),"component"in e&&n(7,E=e.component)},[c,l,u,d,h,p,f,E,a,s,o,function(){return a.getElement()},function(e){i.VnY[e?"unshift":"push"]((()=>{a=e,n(8,a)}))}]}(0,L.C)({class:"mdc-deprecated-list-item__meta",component:y.Dr}),(0,L.C)({class:"mdc-deprecated-list-group",component:y.ZC}),(0,L.C)({class:"mdc-deprecated-list-group__subheader",component:y.H3});class j extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,F,B,i.N8,{use:0,class:1,padded:2,inset:3,insetLeading:4,insetTrailing:5,insetPadding:6,component:7,getElement:11})}get getElement(){return this.$$.ctx[11]}}const H=R,K=U,q=j,V=_},41139:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>f});var i=n(24234),r=n(17277),o={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}};var s=n(68568),a=n(47658),c=n(85479);const{document:l}=i.lig;function u(e){let t,n,r,o,s,c,u,h,p;const f=e[29].default,m=(0,i.nuO)(f,e,e[28],null);let g=[{class:r=(0,a.$o)({[e[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":e[5],"mdc-menu-surface--open":e[4],"smui-menu-surface--static":e[4],"mdc-menu-surface--fullwidth":e[6],...e[9]})},{style:o=Object.entries(e[10]).map(d).concat([e[3]]).join(" ")},e[12]],v={};for(let e=0;e<g.length;e+=1)v=(0,i.f0i)(v,g[e]);return{c(){t=(0,i.DhX)(),n=(0,i.bGB)("div"),m&&m.c(),(0,i.UF7)(n,v)},m(r,o){(0,i.$Tr)(r,t,o),(0,i.$Tr)(r,n,o),m&&m.m(n,null),e[31](n),u=!0,h||(p=[(0,i.oLt)(l.body,"click",e[30],!0),(0,i.TVh)(s=a.ol.call(null,n,e[1])),(0,i.TVh)(c=e[11].call(null,n)),(0,i.oLt)(n,"keydown",e[32])],h=!0)},p(e,t){m&&m.p&&(!u||268435456&t[0])&&(0,i.kmG)(m,f,e,e[28],u?(0,i.u2N)(f,e[28],t,null):(0,i.VOJ)(e[28]),null),(0,i.UF7)(n,v=(0,i.LoY)(g,[(!u||628&t[0]&&r!==(r=(0,a.$o)({[e[2]]:!0,"mdc-menu-surface":!0,"mdc-menu-surface--fixed":e[5],"mdc-menu-surface--open":e[4],"smui-menu-surface--static":e[4],"mdc-menu-surface--fullwidth":e[6],...e[9]})))&&{class:r},(!u||1032&t[0]&&o!==(o=Object.entries(e[10]).map(d).concat([e[3]]).join(" ")))&&{style:o},4096&t[0]&&e[12]])),s&&(0,i.sBU)(s.update)&&2&t[0]&&s.update.call(null,e[1])},i(e){u||((0,i.Ui)(m,e),u=!0)},o(e){(0,i.etI)(m,e),u=!1},d(r){r&&(0,i.ogt)(t),r&&(0,i.ogt)(n),m&&m.d(r),e[31](null),h=!1,(0,i.j7q)(p)}}}const d=([e,t])=>`${e}: ${t};`;function h(e,t,n){const l=["use","class","style","static","anchor","fixed","open","fullWidth","quickOpen","anchorElement","anchorCorner","anchorMargin","maxHeight","horizontallyCenteredOnViewport","isOpen","setOpen","setAbsolutePosition","setIsHoisted","getElement"];let u=(0,i.q2N)(t,l),{$$slots:d={},$$scope:h}=t;var p,f,m;const g=(0,a.PD)((0,i.w2L)());let v,y,b,{use:E=[]}=t,{class:S=""}=t,{style:w=""}=t,{static:_=!1}=t,{anchor:T=!0}=t,{fixed:x=!1}=t,{open:C=_}=t,{fullWidth:I=!1}=t,{quickOpen:k=!1}=t,{anchorElement:M}=t,{anchorCorner:A}=t,{anchorMargin:O={top:0,right:0,bottom:0,left:0}}=t,{maxHeight:R=0}=t,{horizontallyCenteredOnViewport:L=!1}=t,D={},N={};(0,s.v)("SMUI:list:role","menu"),(0,s.v)("SMUI:list:item:role","menuitem");const P=c.Ns;function $(e){return e in D?D[e]:j().classList.contains(e)}function U(e){D[e]||n(9,D[e]=!0,D)}function B(e){e in D&&!D[e]||n(9,D[e]=!1,D)}function F(e){y.close(e),n(0,C=!1)}function j(){return v}return(0,s.H3)((()=>{n(8,y=new r.k({addClass:U,removeClass:B,hasClass:$,hasAnchor:()=>!!M,notifyClose:()=>{n(0,C=_),C||(0,a.WI)(v,"MDCMenuSurface:closed")},notifyClosing:()=>{n(0,C=_),C||(0,a.WI)(v,"MDCMenuSurface:closing")},notifyOpen:()=>{n(0,C=!0),(0,a.WI)(v,"MDCMenuSurface:opened")},isElementInContainer:e=>v.contains(e),isRtl:()=>"rtl"===getComputedStyle(v).getPropertyValue("direction"),setTransformOrigin:e=>{const t=`${function(e,t){if(function(e){return Boolean(e.document)&&"function"==typeof e.document.createElement}(e)&&t in o){var n=e.document.createElement("div"),i=o.transform,r=i.standard,s=i.prefixed;return r in n.style?r:s}return t}(window,"transform")}-origin`;n(10,N[t]=e,N)},isFocused:()=>document.activeElement===v,saveFocus:()=>{var e;b=null!==(e=document.activeElement)&&void 0!==e?e:void 0},restoreFocus:()=>{v.contains(document.activeElement)&&b&&"focus"in b&&b.focus()},getInnerDimensions:()=>({width:v.offsetWidth,height:v.offsetHeight}),getAnchorDimensions:()=>M?M.getBoundingClientRect():null,getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:e=>{n(10,N.left="left"in e?`${e.left}px`:"",N),n(10,N.right="right"in e?`${e.right}px`:"",N),n(10,N.top="top"in e?`${e.top}px`:"",N),n(10,N.bottom="bottom"in e?`${e.bottom}px`:"",N)},setMaxHeight:e=>{n(10,N.maxHeight=e,N)}}));const e={get open(){return C},set open(e){n(0,C=e)},closeProgrammatic:F};return(0,a.WI)(v,"SMUIMenuSurface:mount",e),y.init(),()=>{var e;const t=y.isHoistedElement;y.destroy(),t&&(null===(e=v.parentNode)||void 0===e||e.removeChild(v))}})),(0,s.ev)((()=>{var e;T&&v&&(null===(e=v.parentElement)||void 0===e||e.classList.remove("mdc-menu-surface--anchor"))})),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(12,u=(0,i.q2N)(t,l)),"use"in e&&n(1,E=e.use),"class"in e&&n(2,S=e.class),"style"in e&&n(3,w=e.style),"static"in e&&n(4,_=e.static),"anchor"in e&&n(14,T=e.anchor),"fixed"in e&&n(5,x=e.fixed),"open"in e&&n(0,C=e.open),"fullWidth"in e&&n(6,I=e.fullWidth),"quickOpen"in e&&n(15,k=e.quickOpen),"anchorElement"in e&&n(13,M=e.anchorElement),"anchorCorner"in e&&n(16,A=e.anchorCorner),"anchorMargin"in e&&n(17,O=e.anchorMargin),"maxHeight"in e&&n(18,R=e.maxHeight),"horizontallyCenteredOnViewport"in e&&n(19,L=e.horizontallyCenteredOnViewport),"$$scope"in e&&n(28,h=e.$$scope)},e.$$.update=()=>{234897536&e.$$.dirty[0]&&v&&T&&!(null===n(25,p=v.parentElement)||void 0===p?void 0:p.classList.contains("mdc-menu-surface--anchor"))&&(null===n(26,f=v.parentElement)||void 0===f||f.classList.add("mdc-menu-surface--anchor"),n(13,M=null!==n(27,m=v.parentElement)&&void 0!==m?m:void 0)),257&e.$$.dirty[0]&&y&&y.isOpen()!==C&&(C?y.open():y.close()),33024&e.$$.dirty[0]&&y&&y.setQuickOpen(k),288&e.$$.dirty[0]&&y&&y.setFixedPosition(x),262400&e.$$.dirty[0]&&y&&R>0&&y.setMaxHeight(R),524544&e.$$.dirty[0]&&y&&y.setIsHorizontallyCenteredOnViewport(L),65792&e.$$.dirty[0]&&y&&null!=A&&("string"==typeof A?y.setAnchorCorner(P[A]):y.setAnchorCorner(A)),131328&e.$$.dirty[0]&&y&&y.setAnchorMargin(O)},[C,E,S,w,_,x,I,v,y,D,N,g,u,M,T,k,A,O,R,L,function(){return C},function(e){n(0,C=e)},function(e,t){return y.setAbsolutePosition(e,t)},function(e){return y.setIsHoisted(e)},j,p,f,m,h,d,e=>y&&C&&y.handleBodyClick(e),function(e){i.VnY[e?"unshift":"push"]((()=>{v=e,n(7,v)}))},e=>y&&y.handleKeydown(e)]}class p extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,h,u,i.N8,{use:1,class:2,style:3,static:4,anchor:14,fixed:5,open:0,fullWidth:6,quickOpen:15,anchorElement:13,anchorCorner:16,anchorMargin:17,maxHeight:18,horizontallyCenteredOnViewport:19,isOpen:20,setOpen:21,setAbsolutePosition:22,setIsHoisted:23,getElement:24},null,[-1,-1])}get isOpen(){return this.$$.ctx[20]}get setOpen(){return this.$$.ctx[21]}get setAbsolutePosition(){return this.$$.ctx[22]}get setIsHoisted(){return this.$$.ctx[23]}get getElement(){return this.$$.ctx[24]}}const f=p},76264:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(24234),r=n(70655),o=n(6308),s={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},a={NOTCH_ELEMENT_PADDING:8},c={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"},l=function(e){function t(n){return e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this}return(0,r.ZT)(t,e),Object.defineProperty(t,"strings",{get:function(){return s},enumerable:!1,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return a},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!1,configurable:!0}),t.prototype.notch=function(e){var n=t.cssClasses.OUTLINE_NOTCHED;e>0&&(e+=a.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(e),this.adapter.addClass(n)},t.prototype.closeNotch=function(){var e=t.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(e),this.adapter.removeNotchWidthProperty()},t}(o.K),u=n(68568),d=n(47658);function h(e){let t,n,r;const o=e[14].default,s=(0,i.nuO)(o,e,e[13],null);return{c(){t=(0,i.bGB)("div"),s&&s.c(),(0,i.Ljt)(t,"class","mdc-notched-outline__notch"),(0,i.Ljt)(t,"style",n=Object.entries(e[7]).map(f).join(" "))},m(e,n){(0,i.$Tr)(e,t,n),s&&s.m(t,null),r=!0},p(e,a){s&&s.p&&(!r||8192&a)&&(0,i.kmG)(s,o,e,e[13],r?(0,i.u2N)(o,e[13],a,null):(0,i.VOJ)(e[13]),null),(!r||128&a&&n!==(n=Object.entries(e[7]).map(f).join(" ")))&&(0,i.Ljt)(t,"style",n)},i(e){r||((0,i.Ui)(s,e),r=!0)},o(e){(0,i.etI)(s,e),r=!1},d(e){e&&(0,i.ogt)(t),s&&s.d(e)}}}function p(e){let t,n,r,o,s,a,c,l,u,p,f,m=!e[3]&&h(e),g=[{class:a=(0,d.$o)({[e[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":e[2],"mdc-notched-outline--no-label":e[3],...e[6]})},e[9]],v={};for(let e=0;e<g.length;e+=1)v=(0,i.f0i)(v,g[e]);return{c(){t=(0,i.bGB)("div"),n=(0,i.bGB)("div"),r=(0,i.DhX)(),m&&m.c(),o=(0,i.DhX)(),s=(0,i.bGB)("div"),(0,i.Ljt)(n,"class","mdc-notched-outline__leading"),(0,i.Ljt)(s,"class","mdc-notched-outline__trailing"),(0,i.UF7)(t,v)},m(a,h){(0,i.$Tr)(a,t,h),(0,i.R3I)(t,n),(0,i.R3I)(t,r),m&&m.m(t,null),(0,i.R3I)(t,o),(0,i.R3I)(t,s),e[15](t),u=!0,p||(f=[(0,i.TVh)(c=d.ol.call(null,t,e[0])),(0,i.TVh)(l=e[8].call(null,t)),(0,i.oLt)(t,"SMUIFloatingLabel:mount",e[16]),(0,i.oLt)(t,"SMUIFloatingLabel:unmount",e[17])],p=!0)},p(e,[n]){e[3]?m&&((0,i.dvw)(),(0,i.etI)(m,1,1,(()=>{m=null})),(0,i.gbL)()):m?(m.p(e,n),8&n&&(0,i.Ui)(m,1)):(m=h(e),m.c(),(0,i.Ui)(m,1),m.m(t,o)),(0,i.UF7)(t,v=(0,i.LoY)(g,[(!u||78&n&&a!==(a=(0,d.$o)({[e[1]]:!0,"mdc-notched-outline":!0,"mdc-notched-outline--notched":e[2],"mdc-notched-outline--no-label":e[3],...e[6]})))&&{class:a},512&n&&e[9]])),c&&(0,i.sBU)(c.update)&&1&n&&c.update.call(null,e[0])},i(e){u||((0,i.Ui)(m),u=!0)},o(e){(0,i.etI)(m),u=!1},d(n){n&&(0,i.ogt)(t),m&&m.d(),e[15](null),p=!1,(0,i.j7q)(f)}}}const f=([e,t])=>`${e}: ${t};`;function m(e,t,n){const r=["use","class","notched","noLabel","notch","closeNotch","getElement"];let o=(0,i.q2N)(t,r),{$$slots:s={},$$scope:a}=t;const c=(0,d.PD)((0,i.w2L)());let h,p,f,{use:m=[]}=t,{class:g=""}=t,{notched:v=!1}=t,{noLabel:y=!1}=t,b={},E={};function S(e){b[e]||n(6,b[e]=!0,b)}function w(e){e in b&&!b[e]||n(6,b[e]=!1,b)}return(0,u.H3)((()=>(p=new l({addClass:S,removeClass:w,setNotchWidthProperty:e=>{return t=e+"px",void(E["width"]!=t&&(""===t||null==t?(delete E.width,n(7,E)):n(7,E.width=t,E)));var t},removeNotchWidthProperty:()=>{"width"in E&&(delete E.width,n(7,E))}}),p.init(),()=>{p.destroy()}))),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(9,o=(0,i.q2N)(t,r)),"use"in e&&n(0,m=e.use),"class"in e&&n(1,g=e.class),"notched"in e&&n(2,v=e.notched),"noLabel"in e&&n(3,y=e.noLabel),"$$scope"in e&&n(13,a=e.$$scope)},e.$$.update=()=>{16&e.$$.dirty&&(f?(f.addStyle("transition-duration","0s"),S("mdc-notched-outline--upgraded"),requestAnimationFrame((()=>{f&&f.removeStyle("transition-duration")}))):w("mdc-notched-outline--upgraded"))},[m,g,v,y,f,h,b,E,c,o,function(e){p.notch(e)},function(){p.closeNotch()},function(){return h},a,s,function(e){i.VnY[e?"unshift":"push"]((()=>{h=e,n(5,h)}))},e=>n(4,f=e.detail),()=>n(4,f=void 0)]}class g extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,m,p,i.N8,{use:0,class:1,notched:2,noLabel:3,notch:10,closeNotch:11,getElement:12})}get notch(){return this.$$.ctx[10]}get closeNotch(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}const v=g},47028:(e,t,n)=>{"use strict";n.d(t,{Dx:()=>o}),n(24234),n(47658);var i=n(58858),r=n(46504);(0,i.C)({class:"smui-paper__content",component:r.ZC});const o=(0,i.C)({class:"smui-paper__title",component:r.H5});(0,i.C)({class:"smui-paper__subtitle",component:r.H6})},37341:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i,r=n(70655),o=n(6308),s={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},a={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},c={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},l=["touchstart","pointerdown","mousedown","keydown"],u=["touchend","pointerup","mouseup","contextmenu"],d=[],h=function(e){function t(n){var i=e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this;return i.activationAnimationHasEnded_=!1,i.activationTimer_=0,i.fgDeactivationRemovalTimer_=0,i.fgScale_="0",i.frame_={width:0,height:0},i.initialSize_=0,i.layoutFrame_=0,i.maxRadius_=0,i.unboundedCoords_={left:0,top:0},i.activationState_=i.defaultActivationState_(),i.activationTimerCallback_=function(){i.activationAnimationHasEnded_=!0,i.runDeactivationUXLogicIfReady_()},i.activateHandler_=function(e){return i.activate_(e)},i.deactivateHandler_=function(){return i.deactivate_()},i.focusHandler_=function(){return i.handleFocus()},i.blurHandler_=function(){return i.handleBlur()},i.resizeHandler_=function(){return i.layout()},i}return(0,r.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return s},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return a},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this,n=this.supportsPressRipple_();if(this.registerRootHandlers_(n),n){var i=t.cssClasses,r=i.ROOT,o=i.UNBOUNDED;requestAnimationFrame((function(){e.adapter.addClass(r),e.adapter.isUnbounded()&&(e.adapter.addClass(o),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,i=n.ROOT,r=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter.removeClass(i),e.adapter.removeClass(r),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&(l.forEach((function(e){t.adapter.registerInteractionHandler(e,t.activateHandler_)})),this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler_)),this.adapter.registerInteractionHandler("focus",this.focusHandler_),this.adapter.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter.registerInteractionHandler("keyup",this.deactivateHandler_):u.forEach((function(e){t.adapter.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;l.forEach((function(t){e.adapter.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler_),u.forEach((function(t){e.adapter.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,n=t.strings;Object.keys(n).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter.updateCssVariable(n[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var i=this.previousActivationEvent_;i&&void 0!==e&&i.type!==e.type||(n.isActivated=!0,n.isProgrammatic=void 0===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type),void 0!==e&&d.length>0&&d.some((function(e){return t.adapter.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(d.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){d=[],n.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())}))))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,n=t.strings,i=n.VAR_FG_TRANSLATE_START,r=n.VAR_FG_TRANSLATE_END,o=t.cssClasses,s=o.FG_DEACTIVATION,a=o.FG_ACTIVATION,c=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var l="",u="";if(!this.adapter.isUnbounded()){var d=this.getFgTranslationCoordinates_(),h=d.startPoint,p=d.endPoint;l=h.x+"px, "+h.y+"px",u=p.x+"px, "+p.y+"px"}this.adapter.updateCssVariable(i,l),this.adapter.updateCssVariable(r,u),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter.removeClass(s),this.adapter.computeBoundingRect(),this.adapter.addClass(a),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),c)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,n=t.activationEvent;return{startPoint:e={x:(e=t.wasActivatedByPointer?function(e,t,n){if(!e)return{x:0,y:0};var i,r,o=t.x,s=t.y,a=o+n.left,c=s+n.top;if("touchstart"===e.type){var l=e;i=l.changedTouches[0].pageX-a,r=l.changedTouches[0].pageY-c}else{var u=e;i=u.pageX-a,r=u.pageY-c}return{x:i,y:r}}(n,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,i=this.activationState_,r=i.hasDeactivationUXRun,o=i.isActivated;(r||!o)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter.removeClass(n)}),c.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var n=(0,r.pi)({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(n)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(n),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,n=e.wasElementMadeActive;(t||n)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){this.frame_=this.adapter.computeBoundingRect();var e=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter.isUnbounded()?e:Math.sqrt(Math.pow(this.frame_.width,2)+Math.pow(this.frame_.height,2))+t.numbers.PADDING;var n=Math.floor(e*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&n%2!=0?this.initialSize_=n-1:this.initialSize_=n,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,n=e.VAR_FG_SIZE,i=e.VAR_LEFT,r=e.VAR_TOP,o=e.VAR_FG_SCALE;this.adapter.updateCssVariable(n,this.initialSize_+"px"),this.adapter.updateCssVariable(o,this.fgScale_),this.adapter.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter.updateCssVariable(i,this.unboundedCoords_.left+"px"),this.adapter.updateCssVariable(r,this.unboundedCoords_.top+"px"))},t}(o.K),p=n(79397),f=n(42851),m=n(68568);const{applyPassive:g}=p,{matches:v}=f,y=function(e,{ripple:t=!0,surface:n=!1,unbounded:r=!1,disabled:o=!1,color:s,active:a,eventTarget:c,activeTarget:l,addClass:u=(t=>e.classList.add(t)),removeClass:d=(t=>e.classList.remove(t)),addStyle:p=((t,n)=>e.style.setProperty(t,n)),initPromise:f=Promise.resolve()}={}){let y,b,E=(0,m.fw)("SMUI:addLayoutListener"),S=a,w=c,_=l;function T(){n&&(u("mdc-ripple-surface"),"primary"===s?(u("smui-ripple-surface--primary"),d("smui-ripple-surface--secondary")):"secondary"===s?(d("smui-ripple-surface--primary"),u("smui-ripple-surface--secondary")):(d("smui-ripple-surface--primary"),d("smui-ripple-surface--secondary"))),y&&S!==a&&(S=a,a?y.activate():!1===a&&y.deactivate()),t&&!y?(y=new h({addClass:u,browserSupportsCssVars:()=>function(e,t){void 0===t&&(t=!1);var n,r=window.CSS;if("boolean"==typeof i&&!t)return i;if(!r||"function"!=typeof r.supports)return!1;var o=r.supports("--css-vars","yes"),s=r.supports("(--css-vars: yes)")&&r.supports("color","#00000000");return n=o||s,t||(i=n),n}(),computeBoundingRect:()=>e.getBoundingClientRect(),containsEventTarget:t=>e.contains(t),deregisterDocumentInteractionHandler:(e,t)=>document.documentElement.removeEventListener(e,t,g()),deregisterInteractionHandler:(t,n)=>(c||e).removeEventListener(t,n,g()),deregisterResizeHandler:e=>window.removeEventListener("resize",e),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset}),isSurfaceActive:()=>null==a?v(l||e,":active"):a,isSurfaceDisabled:()=>!!o,isUnbounded:()=>!!r,registerDocumentInteractionHandler:(e,t)=>document.documentElement.addEventListener(e,t,g()),registerInteractionHandler:(t,n)=>(c||e).addEventListener(t,n,g()),registerResizeHandler:e=>window.addEventListener("resize",e),removeClass:d,updateCssVariable:p}),f.then((()=>{y&&(y.init(),y.setUnbounded(r))}))):y&&!t&&f.then((()=>{y&&(y.destroy(),y=void 0)})),!y||w===c&&_===l||(w=c,_=l,y.destroy(),requestAnimationFrame((()=>{y&&(y.init(),y.setUnbounded(r))}))),!t&&r&&u("mdc-ripple-upgraded--unbounded")}return T(),E&&(b=E((function(){y&&y.layout()}))),{update(i){({ripple:t,surface:n,unbounded:r,disabled:o,color:s,active:a,eventTarget:c,activeTarget:l,addClass:u,removeClass:d,addStyle:p,initPromise:f}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,eventTarget:void 0,activeTarget:void 0,addClass:t=>e.classList.add(t),removeClass:t=>e.classList.remove(t),addStyle:(t,n)=>e.style.setProperty(t,n),initPromise:Promise.resolve()},i)),T()},destroy(){y&&(y.destroy(),y=void 0,d("mdc-ripple-surface"),d("smui-ripple-surface--primary"),d("smui-ripple-surface--secondary")),b&&b()}}}},26564:(e,t,n)=>{"use strict";n.d(t,{Wx:()=>Te,ZP:()=>xe});var i=n(24234),r=n(70655),o=n(6308),s=n(99502),a=n(85479),c={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",MENU_INVALID:"mdc-select__menu--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},l={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",HIDDEN_INPUT_SELECTOR:'input[type="hidden"]',LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},u={LABEL_SCALE:.75,UNSET_INDEX:-1,CLICK_DEBOUNCE_TIMEOUT_MS:330},d=function(e){function t(n,i){void 0===i&&(i={});var o=e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this;return o.disabled=!1,o.isMenuOpen=!1,o.useDefaultValidation=!0,o.customValidity=!0,o.lastSelectedIndex=u.UNSET_INDEX,o.clickDebounceTimeout=0,o.recentlyClicked=!1,o.leadingIcon=i.leadingIcon,o.helperText=i.helperText,o}return(0,r.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return u},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedIndex:function(){return-1},setSelectedIndex:function(){},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},setLabelRequired:function(){},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectAnchorFocused:function(){return!1},getSelectAnchorAttr:function(){return""},setSelectAnchorAttr:function(){},removeSelectAnchorAttr:function(){},addMenuClass:function(){},removeMenuClass:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},isTypeaheadInProgress:function(){return!1},typeaheadMatchItem:function(){return-1}}},enumerable:!1,configurable:!0}),t.prototype.getSelectedIndex=function(){return this.adapter.getSelectedIndex()},t.prototype.setSelectedIndex=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),e>=this.adapter.getMenuItemCount()||(e===u.UNSET_INDEX?this.adapter.setSelectedText(""):this.adapter.setSelectedText(this.adapter.getMenuItemTextAtIndex(e).trim()),this.adapter.setSelectedIndex(e),t&&this.adapter.closeMenu(),n||this.lastSelectedIndex===e||this.handleChange(),this.lastSelectedIndex=e)},t.prototype.setValue=function(e,t){void 0===t&&(t=!1);var n=this.adapter.getMenuItemValues().indexOf(e);this.setSelectedIndex(n,!1,t)},t.prototype.getValue=function(){var e=this.adapter.getSelectedIndex(),t=this.adapter.getMenuItemValues();return e!==u.UNSET_INDEX?t[e]:""},t.prototype.getDisabled=function(){return this.disabled},t.prototype.setDisabled=function(e){this.disabled=e,this.disabled?(this.adapter.addClass(c.DISABLED),this.adapter.closeMenu()):this.adapter.removeClass(c.DISABLED),this.leadingIcon&&this.leadingIcon.setDisabled(this.disabled),this.disabled?this.adapter.removeSelectAnchorAttr("tabindex"):this.adapter.setSelectAnchorAttr("tabindex","0"),this.adapter.setSelectAnchorAttr("aria-disabled",this.disabled.toString())},t.prototype.openMenu=function(){this.adapter.addClass(c.ACTIVATED),this.adapter.openMenu(),this.isMenuOpen=!0,this.adapter.setSelectAnchorAttr("aria-expanded","true")},t.prototype.setHelperTextContent=function(e){this.helperText&&this.helperText.setContent(e)},t.prototype.layout=function(){if(this.adapter.hasLabel()){var e=this.getValue().length>0,t=this.adapter.hasClass(c.FOCUSED),n=e||t,i=this.adapter.hasClass(c.REQUIRED);this.notchOutline(n),this.adapter.floatLabel(n),this.adapter.setLabelRequired(i)}},t.prototype.layoutOptions=function(){var e=this.adapter.getMenuItemValues().indexOf(this.getValue());this.setSelectedIndex(e,!1,!0)},t.prototype.handleMenuOpened=function(){if(0!==this.adapter.getMenuItemValues().length){var e=this.getSelectedIndex(),t=e>=0?e:0;this.adapter.focusMenuItemAtIndex(t)}},t.prototype.handleMenuClosing=function(){this.adapter.setSelectAnchorAttr("aria-expanded","false")},t.prototype.handleMenuClosed=function(){this.adapter.removeClass(c.ACTIVATED),this.isMenuOpen=!1,this.adapter.isSelectAnchorFocused()||this.blur()},t.prototype.handleChange=function(){this.layout(),this.adapter.notifyChange(this.getValue()),this.adapter.hasClass(c.REQUIRED)&&this.useDefaultValidation&&this.setValid(this.isValid())},t.prototype.handleMenuItemAction=function(e){this.setSelectedIndex(e,!0)},t.prototype.handleFocus=function(){this.adapter.addClass(c.FOCUSED),this.layout(),this.adapter.activateBottomLine()},t.prototype.handleBlur=function(){this.isMenuOpen||this.blur()},t.prototype.handleClick=function(e){this.disabled||this.recentlyClicked||(this.setClickDebounceTimeout(),this.isMenuOpen?this.adapter.closeMenu():(this.adapter.setRippleCenter(e),this.openMenu()))},t.prototype.handleKeydown=function(e){if(!this.isMenuOpen&&this.adapter.hasClass(c.FOCUSED)){var t=(0,s.ku)(e)===s.Fn.ENTER,n=(0,s.ku)(e)===s.Fn.SPACEBAR,i=(0,s.ku)(e)===s.Fn.ARROW_UP,r=(0,s.ku)(e)===s.Fn.ARROW_DOWN;if(!e.ctrlKey&&!e.metaKey&&(!n&&e.key&&1===e.key.length||n&&this.adapter.isTypeaheadInProgress())){var o=n?" ":e.key,a=this.adapter.typeaheadMatchItem(o,this.getSelectedIndex());return a>=0&&this.setSelectedIndex(a),void e.preventDefault()}(t||n||i||r)&&(i&&this.getSelectedIndex()>0?this.setSelectedIndex(this.getSelectedIndex()-1):r&&this.getSelectedIndex()<this.adapter.getMenuItemCount()-1&&this.setSelectedIndex(this.getSelectedIndex()+1),this.openMenu(),e.preventDefault())}},t.prototype.notchOutline=function(e){if(this.adapter.hasOutline()){var t=this.adapter.hasClass(c.FOCUSED);if(e){var n=u.LABEL_SCALE,i=this.adapter.getLabelWidth()*n;this.adapter.notchOutline(i)}else t||this.adapter.closeOutline()}},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon&&this.leadingIcon.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon&&this.leadingIcon.setContent(e)},t.prototype.setUseDefaultValidation=function(e){this.useDefaultValidation=e},t.prototype.setValid=function(e){this.useDefaultValidation||(this.customValidity=e),this.adapter.setSelectAnchorAttr("aria-invalid",(!e).toString()),e?(this.adapter.removeClass(c.INVALID),this.adapter.removeMenuClass(c.MENU_INVALID)):(this.adapter.addClass(c.INVALID),this.adapter.addMenuClass(c.MENU_INVALID)),this.syncHelperTextValidity(e)},t.prototype.isValid=function(){return this.useDefaultValidation&&this.adapter.hasClass(c.REQUIRED)&&!this.adapter.hasClass(c.DISABLED)?this.getSelectedIndex()!==u.UNSET_INDEX&&(0!==this.getSelectedIndex()||Boolean(this.getValue())):this.customValidity},t.prototype.setRequired=function(e){e?this.adapter.addClass(c.REQUIRED):this.adapter.removeClass(c.REQUIRED),this.adapter.setSelectAnchorAttr("aria-required",e.toString()),this.adapter.setLabelRequired(e)},t.prototype.getRequired=function(){return"true"===this.adapter.getSelectAnchorAttr("aria-required")},t.prototype.init=function(){var e=this.adapter.getAnchorElement();e&&(this.adapter.setMenuAnchorElement(e),this.adapter.setMenuAnchorCorner(a.Ns.BOTTOM_START)),this.adapter.setMenuWrapFocus(!1),this.setDisabled(this.adapter.hasClass(c.DISABLED)),this.syncHelperTextValidity(!this.adapter.hasClass(c.INVALID)),this.layout(),this.layoutOptions()},t.prototype.blur=function(){this.adapter.removeClass(c.FOCUSED),this.layout(),this.adapter.deactivateBottomLine(),this.adapter.hasClass(c.REQUIRED)&&this.useDefaultValidation&&this.setValid(this.isValid())},t.prototype.syncHelperTextValidity=function(e){if(this.helperText){this.helperText.setValidity(e);var t=this.helperText.isVisible(),n=this.helperText.getId();t&&n?this.adapter.setSelectAnchorAttr(l.ARIA_DESCRIBEDBY,n):this.adapter.removeSelectAnchorAttr(l.ARIA_DESCRIBEDBY)}},t.prototype.setClickDebounceTimeout=function(){var e=this;clearTimeout(this.clickDebounceTimeout),this.clickDebounceTimeout=setTimeout((function(){e.recentlyClicked=!1}),u.CLICK_DEBOUNCE_TIMEOUT_MS),this.recentlyClicked=!0},t}(o.K),h=n(68568),p=n(48261),f=n(47658),m=n(37341);function g(e,{addClass:t=(t=>e.classList.add(t)),removeClass:n=(t=>e.classList.remove(t))}={}){return t("mdc-menu-surface--anchor"),{destroy(){n("mdc-menu-surface--anchor")}}}var v,y=n(55794),b=n(17277),E={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},S={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",SELECTED_EVENT:"MDCMenu:selected"},w={FOCUS_ROOT_INDEX:-1};!function(e){e[e.NONE=0]="NONE",e[e.LIST_ROOT=1]="LIST_ROOT",e[e.FIRST_ITEM=2]="FIRST_ITEM",e[e.LAST_ITEM=3]="LAST_ITEM"}(v||(v={}));var _=function(e){function t(n){var i=e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this;return i.closeAnimationEndTimerId_=0,i.defaultFocusState_=v.LIST_ROOT,i}return(0,r.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return E},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return S},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return w},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.closeAnimationEndTimerId_&&clearTimeout(this.closeAnimationEndTimerId_),this.adapter.closeSurface()},t.prototype.handleKeydown=function(e){var t=e.key,n=e.keyCode;("Tab"===t||9===n)&&this.adapter.closeSurface(!0)},t.prototype.handleItemAction=function(e){var t=this,n=this.adapter.getElementIndex(e);n<0||(this.adapter.notifySelected({index:n}),this.adapter.closeSurface(),this.closeAnimationEndTimerId_=setTimeout((function(){var n=t.adapter.getElementIndex(e);n>=0&&t.adapter.isSelectableItemAtIndex(n)&&t.setSelectedIndex(n)}),b.k.numbers.TRANSITION_CLOSE_DURATION))},t.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState_){case v.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case v.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case v.NONE:break;default:this.adapter.focusListRoot()}},t.prototype.setDefaultFocusState=function(e){this.defaultFocusState_=e},t.prototype.setSelectedIndex=function(e){if(this.validatedIndex_(e),!this.adapter.isSelectableItemAtIndex(e))throw new Error("MDCMenuFoundation: No selection group at specified index.");var t=this.adapter.getSelectedSiblingOfItemAtIndex(e);t>=0&&(this.adapter.removeAttributeFromElementAtIndex(t,S.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(t,E.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(e,E.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(e,S.ARIA_CHECKED_ATTR,"true")},t.prototype.setEnabled=function(e,t){this.validatedIndex_(e),t?(this.adapter.removeClassFromElementAtIndex(e,y.UX.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(e,S.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(e,y.UX.LIST_ITEM_DISABLED_CLASS),this.adapter.addAttributeToElementAtIndex(e,S.ARIA_DISABLED_ATTR,"true"))},t.prototype.validatedIndex_=function(e){var t=this.adapter.getMenuItemCount();if(!(e>=0&&e<t))throw new Error("MDCMenuFoundation: No list item at specified index.")},t}(o.K),T=n(42851),x=n(41139);function C(e){let t;const n=e[15].default,r=(0,i.nuO)(n,e,e[20],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||1048576&o)&&(0,i.kmG)(r,n,e,e[20],t?(0,i.u2N)(n,e[20],o,null):(0,i.VOJ)(e[20]),null)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function I(e){let t,n,r;const o=[{use:e[5]},{class:(0,f.$o)({[e[1]]:!0,"mdc-menu":!0})},e[9]];function s(t){e[17](t)}let a={$$slots:{default:[C]},$$scope:{ctx:e}};for(let e=0;e<o.length;e+=1)a=(0,i.f0i)(a,o[e]);return void 0!==e[0]&&(a.open=e[0]),t=new x.ZP({props:a}),e[16](t),i.VnY.push((()=>(0,i.akz)(t,"open",s))),t.$on("SMUIMenuSurface:mount",e[7]),t.$on("SMUIList:mount",e[8]),t.$on("MDCMenuSurface:opened",e[18]),t.$on("keydown",e[6]),t.$on("MDCList:action",e[19]),{c(){(0,i.YCL)(t.$$.fragment)},m(e,n){(0,i.yef)(t,e,n),r=!0},p(e,[r]){const s=546&r?(0,i.LoY)(o,[32&r&&{use:e[5]},2&r&&{class:(0,f.$o)({[e[1]]:!0,"mdc-menu":!0})},512&r&&(0,i.gCg)(e[9])]):{};1048576&r&&(s.$$scope={dirty:r,ctx:e}),!n&&1&r&&(n=!0,s.open=e[0],(0,i.hjT)((()=>n=!1))),t.$set(s)},i(e){r||((0,i.Ui)(t.$$.fragment,e),r=!0)},o(e){(0,i.etI)(t.$$.fragment,e),r=!1},d(n){e[16](null),(0,i.vpE)(t,n)}}}function k(e,t,n){let r;const o=["use","class","open","isOpen","setOpen","setDefaultFocusState","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t;const{closest:l}=T,u=(0,f.PD)((0,i.w2L)());let d,p,m,g,{use:v=[]}=t,{class:y=""}=t,{open:b=!1}=t;function S(){return d.getElement()}return(0,h.H3)((()=>(n(3,p=new _({addClassToElementAtIndex:(e,t)=>{g.addClassForElementIndex(e,t)},removeClassFromElementAtIndex:(e,t)=>{g.removeClassForElementIndex(e,t)},addAttributeToElementAtIndex:(e,t,n)=>{g.setAttributeForElementIndex(e,t,n)},removeAttributeFromElementAtIndex:(e,t)=>{g.removeAttributeForElementIndex(e,t)},elementContainsClass:(e,t)=>e.classList.contains(t),closeSurface:e=>m.closeProgrammatic(e),getElementIndex:e=>g.getOrderedList().map((e=>e.element)).indexOf(e),notifySelected:e=>(0,f.WI)(S(),"MDCMenu:selected",{index:e.index,item:g.getOrderedList()[e.index].element}),getMenuItemCount:()=>g.items.length,focusItemAtIndex:e=>g.focusItemAtIndex(e),focusListRoot:()=>"focus"in g.element&&g.element.focus(),isSelectableItemAtIndex:e=>!!l(g.getOrderedList()[e].element,`.${E.MENU_SELECTION_GROUP}`),getSelectedSiblingOfItemAtIndex:e=>{const t=g.getOrderedList(),n=l(t[e].element,`.${E.MENU_SELECTION_GROUP}`),i=null==n?void 0:n.querySelector(`.${E.MENU_SELECTED_LIST_ITEM}`);return i?t.map((e=>e.element)).indexOf(i):-1}})),(0,f.WI)(S(),"SMUIMenu:mount",p),p.init(),()=>{p.destroy()}))),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(9,s=(0,i.q2N)(t,o)),"use"in e&&n(10,v=e.use),"class"in e&&n(1,y=e.class),"open"in e&&n(0,b=e.open),"$$scope"in e&&n(20,c=e.$$scope)},e.$$.update=()=>{1024&e.$$.dirty&&n(5,r=[u,...v])},[b,y,d,p,g,r,function(e){p&&p.handleKeydown(e)},function(e){m||(m=e.detail)},function(e){g||n(4,g=e.detail)},s,v,function(){return b},function(e){n(0,b=e)},function(e){p.setDefaultFocusState(e)},S,a,function(e){i.VnY[e?"unshift":"push"]((()=>{d=e,n(2,d)}))},function(e){b=e,n(0,b)},()=>p&&p.handleMenuSurfaceOpened(),e=>p&&p.handleItemAction(g.getOrderedList()[e.detail.index].element),c]}class M extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,k,I,i.N8,{use:10,class:1,open:0,isOpen:11,setOpen:12,setDefaultFocusState:13,getElement:14})}get isOpen(){return this.$$.ctx[11]}get setOpen(){return this.$$.ctx[12]}get setDefaultFocusState(){return this.$$.ctx[13]}get getElement(){return this.$$.ctx[14]}}const A=M;var O=n(58858),R=n(14868);(0,O.C)({class:"mdc-menu__selection-group-icon",component:R.zs});const L=A;var D=n(58820),N=n(78268),P=n(76264),$={ARIA_HIDDEN:"aria-hidden",ROLE:"role"},U={HELPER_TEXT_VALIDATION_MSG:"mdc-select-helper-text--validation-msg",HELPER_TEXT_VALIDATION_MSG_PERSISTENT:"mdc-select-helper-text--validation-msg-persistent"},B=function(e){function t(n){return e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this}return(0,r.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return U},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return $},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},getAttr:function(){return null},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),t.prototype.getId=function(){return this.adapter.getAttr("id")},t.prototype.isVisible=function(){return"true"!==this.adapter.getAttr($.ARIA_HIDDEN)},t.prototype.setContent=function(e){this.adapter.setContent(e)},t.prototype.setValidation=function(e){e?this.adapter.addClass(U.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(U.HELPER_TEXT_VALIDATION_MSG)},t.prototype.setValidationMsgPersistent=function(e){e?this.adapter.addClass(U.HELPER_TEXT_VALIDATION_MSG_PERSISTENT):this.adapter.removeClass(U.HELPER_TEXT_VALIDATION_MSG_PERSISTENT)},t.prototype.setValidity=function(e){if(this.adapter.hasClass(U.HELPER_TEXT_VALIDATION_MSG)){var t=this.adapter.hasClass(U.HELPER_TEXT_VALIDATION_MSG_PERSISTENT);if(!e||t)return this.showToScreenReader(),void(e?this.adapter.removeAttr($.ROLE):this.adapter.setAttr($.ROLE,"alert"));this.adapter.removeAttr($.ROLE),this.hide()}},t.prototype.showToScreenReader=function(){this.adapter.removeAttr($.ARIA_HIDDEN)},t.prototype.hide=function(){this.adapter.setAttr($.ARIA_HIDDEN,"true")},t}(o.K);function F(e){let t;return{c(){t=(0,i.fLW)(e[8])},m(e,n){(0,i.$Tr)(e,t,n)},p(e,n){256&n&&(0,i.rTO)(t,e[8])},i:i.ZTd,o:i.ZTd,d(e){e&&(0,i.ogt)(t)}}}function j(e){let t;const n=e[13].default,r=(0,i.nuO)(n,e,e[12],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||4096&o)&&(0,i.kmG)(r,n,e,e[12],t?(0,i.u2N)(n,e[12],o,null):(0,i.VOJ)(e[12]),null)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function H(e){let t,n,r,o,s,a,c,l,u,d;const h=[j,F],p=[];function m(e,t){return null==e[8]?0:1}n=m(e),r=p[n]=h[n](e);let g=[{class:o=(0,f.$o)({[e[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":e[4],"mdc-select-helper-text--validation-msg-persistent":e[3],...e[6]})},{"aria-hidden":s=e[3]?void 0:"true"},{id:e[2]},e[7],e[10]],v={};for(let e=0;e<g.length;e+=1)v=(0,i.f0i)(v,g[e]);return{c(){t=(0,i.bGB)("div"),r.c(),(0,i.UF7)(t,v)},m(r,o){(0,i.$Tr)(r,t,o),p[n].m(t,null),e[14](t),l=!0,u||(d=[(0,i.TVh)(a=f.ol.call(null,t,e[0])),(0,i.TVh)(c=e[9].call(null,t))],u=!0)},p(e,[c]){let u=n;n=m(e),n===u?p[n].p(e,c):((0,i.dvw)(),(0,i.etI)(p[u],1,1,(()=>{p[u]=null})),(0,i.gbL)(),r=p[n],r?r.p(e,c):(r=p[n]=h[n](e),r.c()),(0,i.Ui)(r,1),r.m(t,null)),(0,i.UF7)(t,v=(0,i.LoY)(g,[(!l||90&c&&o!==(o=(0,f.$o)({[e[1]]:!0,"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":e[4],"mdc-select-helper-text--validation-msg-persistent":e[3],...e[6]})))&&{class:o},(!l||8&c&&s!==(s=e[3]?void 0:"true"))&&{"aria-hidden":s},(!l||4&c)&&{id:e[2]},128&c&&e[7],1024&c&&e[10]])),a&&(0,i.sBU)(a.update)&&1&c&&a.update.call(null,e[0])},i(e){l||((0,i.Ui)(r),l=!0)},o(e){(0,i.etI)(r),l=!1},d(r){r&&(0,i.ogt)(t),p[n].d(),e[14](null),u=!1,(0,i.j7q)(d)}}}let K=0;function q(e,t,n){const r=["use","class","id","persistent","validationMsg","getElement"];let o=(0,i.q2N)(t,r),{$$slots:s={},$$scope:a}=t;const c=(0,f.PD)((0,i.w2L)());let l,u,d,{use:p=[]}=t,{class:m=""}=t,{id:g="SMUI-select-helper-text-"+K++}=t,{persistent:v=!1}=t,{validationMsg:y=!1}=t,b={},E={};function S(e){return e in b?b[e]:I().classList.contains(e)}function w(e){b[e]||n(6,b[e]=!0,b)}function _(e){e in b&&!b[e]||n(6,b[e]=!1,b)}function T(e){var t;return e in E?null!==(t=E[e])&&void 0!==t?t:null:I().getAttribute(e)}function x(e,t){E[e]!==t&&n(7,E[e]=t,E)}function C(e){e in E&&null==E[e]||n(7,E[e]=void 0,E)}function I(){return l}return(0,h.H3)((()=>(u=new B({addClass:w,removeClass:_,hasClass:S,getAttr:T,setAttr:x,removeAttr:C,setContent:e=>{n(8,d=e)}}),g.startsWith("SMUI-select-helper-text-")&&(0,f.WI)(I(),"SMUISelectHelperText:id",g),(0,f.WI)(I(),"SMUISelectHelperText:mount",u),u.init(),()=>{(0,f.WI)(I(),"SMUISelectHelperText:unmount",u),u.destroy()}))),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(10,o=(0,i.q2N)(t,r)),"use"in e&&n(0,p=e.use),"class"in e&&n(1,m=e.class),"id"in e&&n(2,g=e.id),"persistent"in e&&n(3,v=e.persistent),"validationMsg"in e&&n(4,y=e.validationMsg),"$$scope"in e&&n(12,a=e.$$scope)},[p,m,g,v,y,l,b,E,d,c,o,I,a,s,function(e){i.VnY[e?"unshift":"push"]((()=>{l=e,n(5,l)}))}]}class V extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,q,H,i.N8,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}const G=V,W=e=>({}),z=e=>({}),Y=e=>({}),X=e=>({}),J=e=>({}),Q=e=>({}),Z=e=>({}),ee=e=>({});function te(e){let t,n=[{type:"hidden"},{required:e[10]},{disabled:e[6]},{value:e[0]},(0,f.bO)(e[53],"input$")],r={};for(let e=0;e<n.length;e+=1)r=(0,i.f0i)(r,n[e]);return{c(){t=(0,i.bGB)("input"),(0,i.UF7)(t,r)},m(e,n){(0,i.$Tr)(e,t,n),t.autofocus&&t.focus()},p(e,o){(0,i.UF7)(t,r=(0,i.LoY)(n,[{type:"hidden"},1024&o[0]&&{required:e[10]},64&o[0]&&{disabled:e[6]},1&o[0]&&{value:e[0]},4194304&o[1]&&(0,f.bO)(e[53],"input$")]))},d(e){e&&(0,i.ogt)(t)}}}function ne(e){let t;return{c(){t=(0,i.bGB)("span"),(0,i.Ljt)(t,"class","mdc-select__ripple")},m(e,n){(0,i.$Tr)(e,t,n)},d(e){e&&(0,i.ogt)(t)}}}function ie(e){let t,n;const r=[{id:e[11]+"-smui-label"},{floatAbove:""!==e[43]},{required:e[10]},(0,f.bO)(e[53],"label$")];let o={$$slots:{default:[re]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=(0,i.f0i)(o,r[e]);return t=new D.Z({props:o}),e[64](t),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const o=3072&n[0]|4198400&n[1]?(0,i.LoY)(r,[2048&n[0]&&{id:e[11]+"-smui-label"},4096&n[1]&&{floatAbove:""!==e[43]},1024&n[0]&&{required:e[10]},4194304&n[1]&&(0,i.gCg)((0,f.bO)(e[53],"label$"))]):{};512&n[0]|33554432&n[2]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(n){e[64](null),(0,i.vpE)(t,n)}}}function re(e){let t,n,r=(null==e[9]?"":e[9])+"";const o=e[61].label,s=(0,i.nuO)(o,e,e[87],ee);return{c(){t=(0,i.fLW)(r),s&&s.c()},m(e,r){(0,i.$Tr)(e,t,r),s&&s.m(e,r),n=!0},p(e,a){(!n||512&a[0])&&r!==(r=(null==e[9]?"":e[9])+"")&&(0,i.rTO)(t,r),s&&s.p&&(!n||33554432&a[2])&&(0,i.kmG)(s,o,e,e[87],n?(0,i.u2N)(o,e[87],a,Z):(0,i.VOJ)(e[87]),ee)},i(e){n||((0,i.Ui)(s,e),n=!0)},o(e){(0,i.etI)(s,e),n=!1},d(e){e&&(0,i.ogt)(t),s&&s.d(e)}}}function oe(e){let t,n;const r=[{noLabel:e[8]||null==e[9]&&!e[52].label},(0,f.bO)(e[53],"outline$")];let o={$$slots:{default:[ce]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=(0,i.f0i)(o,r[e]);return t=new P.Z({props:o}),e[66](t),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const o=768&n[0]|6291456&n[1]?(0,i.LoY)(r,[768&n[0]|2097152&n[1]&&{noLabel:e[8]||null==e[9]&&!e[52].label},4194304&n[1]&&(0,i.gCg)((0,f.bO)(e[53],"outline$"))]):{};3840&n[0]|6296064&n[1]|33554432&n[2]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(n){e[66](null),(0,i.vpE)(t,n)}}}function se(e){let t,n;const r=[{id:e[11]+"-smui-label"},{floatAbove:""!==e[43]},{required:e[10]},(0,f.bO)(e[53],"label$")];let o={$$slots:{default:[ae]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=(0,i.f0i)(o,r[e]);return t=new D.Z({props:o}),e[65](t),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const o=3072&n[0]|4198400&n[1]?(0,i.LoY)(r,[2048&n[0]&&{id:e[11]+"-smui-label"},4096&n[1]&&{floatAbove:""!==e[43]},1024&n[0]&&{required:e[10]},4194304&n[1]&&(0,i.gCg)((0,f.bO)(e[53],"label$"))]):{};512&n[0]|33554432&n[2]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(n){e[65](null),(0,i.vpE)(t,n)}}}function ae(e){let t,n,r=(null==e[9]?"":e[9])+"";const o=e[61].label,s=(0,i.nuO)(o,e,e[87],Q);return{c(){t=(0,i.fLW)(r),s&&s.c()},m(e,r){(0,i.$Tr)(e,t,r),s&&s.m(e,r),n=!0},p(e,a){(!n||512&a[0])&&r!==(r=(null==e[9]?"":e[9])+"")&&(0,i.rTO)(t,r),s&&s.p&&(!n||33554432&a[2])&&(0,i.kmG)(s,o,e,e[87],n?(0,i.u2N)(o,e[87],a,J):(0,i.VOJ)(e[87]),Q)},i(e){n||((0,i.Ui)(s,e),n=!0)},o(e){(0,i.etI)(s,e),n=!1},d(e){e&&(0,i.ogt)(t),s&&s.d(e)}}}function ce(e){let t,n,r=!e[8]&&(null!=e[9]||e[52].label)&&se(e);return{c(){r&&r.c(),t=(0,i.cSb)()},m(e,o){r&&r.m(e,o),(0,i.$Tr)(e,t,o),n=!0},p(e,n){e[8]||null==e[9]&&!e[52].label?r&&((0,i.dvw)(),(0,i.etI)(r,1,1,(()=>{r=null})),(0,i.gbL)()):r?(r.p(e,n),768&n[0]|2097152&n[1]&&(0,i.Ui)(r,1)):(r=se(e),r.c(),(0,i.Ui)(r,1),r.m(t.parentNode,t))},i(e){n||((0,i.Ui)(r),n=!0)},o(e){(0,i.etI)(r),n=!1},d(e){r&&r.d(e),e&&(0,i.ogt)(t)}}}function le(e){let t,n;const r=[(0,f.bO)(e[53],"ripple$")];let o={};for(let e=0;e<r.length;e+=1)o=(0,i.f0i)(o,r[e]);return t=new N.Z({props:o}),e[68](t),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const o=4194304&n[1]?(0,i.LoY)(r,[(0,i.gCg)((0,f.bO)(e[53],"ripple$"))]):{};t.$set(o)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(n){e[68](null),(0,i.vpE)(t,n)}}}function ue(e){let t;const n=e[61].default,r=(0,i.nuO)(n,e,e[87],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||33554432&o[2])&&(0,i.kmG)(r,n,e,e[87],t?(0,i.u2N)(n,e[87],o,null):(0,i.VOJ)(e[87]),null)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function de(e){let t,n,r;const o=[{role:"listbox"},{wrapFocus:e[36]},(0,f.bO)(e[53],"list$")];function s(t){e[74](t)}let a={$$slots:{default:[ue]},$$scope:{ctx:e}};for(let e=0;e<o.length;e+=1)a=(0,i.f0i)(a,o[e]);return void 0!==e[24]&&(a.selectedIndex=e[24]),t=new R.ZP({props:a}),i.VnY.push((()=>(0,i.akz)(t,"selectedIndex",s))),t.$on("SMUIList:mount",e[75]),{c(){(0,i.YCL)(t.$$.fragment)},m(e,n){(0,i.yef)(t,e,n),r=!0},p(e,r){const s=4194336&r[1]?(0,i.LoY)(o,[o[0],32&r[1]&&{wrapFocus:e[36]},4194304&r[1]&&(0,i.gCg)((0,f.bO)(e[53],"list$"))]):{};33554432&r[2]&&(s.$$scope={dirty:r,ctx:e}),!n&&16777216&r[0]&&(n=!0,s.selectedIndex=e[24],(0,i.hjT)((()=>n=!1))),t.$set(s)},i(e){r||((0,i.Ui)(t.$$.fragment,e),r=!0)},o(e){(0,i.etI)(t.$$.fragment,e),r=!1},d(e){(0,i.vpE)(t,e)}}}function he(e){let t,n;const r=[(0,f.bO)(e[53],"helperText$")];let o={$$slots:{default:[pe]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=(0,i.f0i)(o,r[e]);return t=new G({props:o}),t.$on("SMUISelectHelperText:id",e[84]),t.$on("SMUISelectHelperText:mount",e[85]),t.$on("SMUISelectHelperText:unmount",e[86]),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const o=4194304&n[1]?(0,i.LoY)(r,[(0,i.gCg)((0,f.bO)(e[53],"helperText$"))]):{};33554432&n[2]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(e){(0,i.vpE)(t,e)}}}function pe(e){let t;const n=e[61].helperText,r=(0,i.nuO)(n,e,e[87],z);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||33554432&o[2])&&(0,i.kmG)(r,n,e,e[87],t?(0,i.u2N)(n,e[87],o,W):(0,i.VOJ)(e[87]),z)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function fe(e){let t,n,r,o,s,a,c,l,u,d,h,p,v,y,b,E,S,w,_,T,x,C,I,k,M,A,O,R,D,N,P,$,U,B,F,j,H,K,q,V,G,W,z=e[12]&&te(e),J="filled"===e[7]&&ne(),Q="outlined"!==e[7]&&!e[8]&&(null!=e[9]||e[52].label)&&ie(e),Z="outlined"===e[7]&&oe(e);const ee=e[61].leadingIcon,re=(0,i.nuO)(ee,e,e[87],X);let se=[{id:h=e[11]+"-smui-selected-text"},{class:p=(0,f.$o)({[e[19]]:!0,"mdc-select__selected-text":!0})},{role:"button"},{"aria-haspopup":"listbox"},{"aria-labelledby":v=e[11]+"-smui-label"},(0,f.bO)(e[53],"selectedText$")],ae={};for(let e=0;e<se.length;e+=1)ae=(0,i.f0i)(ae,se[e]);let ce=[{class:b=(0,f.$o)({[e[17]]:!0,"mdc-select__selected-text-container":!0})},(0,f.bO)(e[53],"selectedTextContainer$")],ue={};for(let e=0;e<ce.length;e+=1)ue=(0,i.f0i)(ue,ce[e]);let pe=[{class:C=(0,f.$o)({[e[21]]:!0,"mdc-select__dropdown-icon":!0})},(0,f.bO)(e[53],"dropdownIcon$")],fe={};for(let e=0;e<pe.length;e+=1)fe=(0,i.f0i)(fe,pe[e]);let me="outlined"!==e[7]&&e[5]&&le(e),ve=[{class:M=(0,f.$o)({[e[15]]:!0,"mdc-select__anchor":!0})},{"aria-required":A=e[10]?"true":void 0},{"aria-disabled":O=e[6]?"true":void 0},{"aria-controls":e[31]},{"aria-describedby":e[31]},e[29],(0,f.bO)(e[53],"anchor$")],ye={};for(let e=0;e<ve.length;e+=1)ye=(0,i.f0i)(ye,ve[e]);const be=[{class:(0,f.$o)({[e[22]]:!0,"mdc-select__menu":!0,...e[33]})},{fullWidth:!0},{anchor:!1},{anchorElement:e[34]},{anchorCorner:e[35]},(0,f.bO)(e[53],"menu$")];function Ee(t){e[76](t)}let Se={$$slots:{default:[de]},$$scope:{ctx:e}};for(let e=0;e<be.length;e+=1)Se=(0,i.f0i)(Se,be[e]);void 0!==e[32]&&(Se.open=e[32]),N=new L({props:Se}),i.VnY.push((()=>(0,i.akz)(N,"open",Ee))),N.$on("MDCMenu:selected",e[77]),N.$on("MDCMenuSurface:closing",e[78]),N.$on("MDCMenuSurface:closed",e[79]),N.$on("MDCMenuSurface:opened",e[80]);let we=[{class:$=(0,f.$o)({[e[3]]:!0,"mdc-select":!0,"mdc-select--required":e[10],"mdc-select--disabled":e[6],"mdc-select--filled":"filled"===e[7],"mdc-select--outlined":"outlined"===e[7],"smui-select--standard":"standard"===e[7],"mdc-select--with-leading-icon":e[45](e[13])?e[52].leadingIcon:e[13],"mdc-select--no-label":e[8]||null==e[9]&&!e[52].label,"mdc-select--invalid":e[1],"mdc-select--activated":e[32],"mdc-data-table__pagination-rows-per-page-select":"data-table:pagination"===e[46],...e[26]})},{style:U=Object.entries(e[27]).map(ge).concat([e[4]]).join(" ")},(0,f.De)(e[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])],_e={};for(let e=0;e<we.length;e+=1)_e=(0,i.f0i)(_e,we[e]);let Te=e[52].helperText&&he(e);return{c(){t=(0,i.bGB)("div"),z&&z.c(),n=(0,i.DhX)(),r=(0,i.bGB)("div"),J&&J.c(),o=(0,i.DhX)(),Q&&Q.c(),s=(0,i.DhX)(),Z&&Z.c(),a=(0,i.DhX)(),re&&re.c(),c=(0,i.DhX)(),l=(0,i.bGB)("span"),u=(0,i.bGB)("span"),d=(0,i.fLW)(e[43]),S=(0,i.DhX)(),w=(0,i.bGB)("span"),_=(0,i.bi5)("svg"),T=(0,i.bi5)("polygon"),x=(0,i.bi5)("polygon"),k=(0,i.DhX)(),me&&me.c(),D=(0,i.DhX)(),(0,i.YCL)(N.$$.fragment),K=(0,i.DhX)(),Te&&Te.c(),q=(0,i.cSb)(),(0,i.UF7)(u,ae),(0,i.UF7)(l,ue),(0,i.Ljt)(T,"class","mdc-select__dropdown-icon-inactive"),(0,i.Ljt)(T,"stroke","none"),(0,i.Ljt)(T,"fill-rule","evenodd"),(0,i.Ljt)(T,"points","7 10 12 15 17 10"),(0,i.Ljt)(x,"class","mdc-select__dropdown-icon-active"),(0,i.Ljt)(x,"stroke","none"),(0,i.Ljt)(x,"fill-rule","evenodd"),(0,i.Ljt)(x,"points","7 15 12 10 17 15"),(0,i.Ljt)(_,"class","mdc-select__dropdown-icon-graphic"),(0,i.Ljt)(_,"viewBox","7 10 10 5"),(0,i.Ljt)(_,"focusable","false"),(0,i.UF7)(w,fe),(0,i.UF7)(r,ye),(0,i.UF7)(t,_e)},m(h,p){(0,i.$Tr)(h,t,p),z&&z.m(t,null),(0,i.R3I)(t,n),(0,i.R3I)(t,r),J&&J.m(r,null),(0,i.R3I)(r,o),Q&&Q.m(r,null),(0,i.R3I)(r,s),Z&&Z.m(r,null),(0,i.R3I)(r,a),re&&re.m(r,null),(0,i.R3I)(r,c),(0,i.R3I)(r,l),(0,i.R3I)(l,u),(0,i.R3I)(u,d),e[67](u),(0,i.R3I)(r,S),(0,i.R3I)(r,w),(0,i.R3I)(w,_),(0,i.R3I)(_,T),(0,i.R3I)(_,x),(0,i.R3I)(r,k),me&&me.m(r,null),e[69](r),(0,i.R3I)(t,D),(0,i.yef)(N,t,null),e[81](t),(0,i.$Tr)(h,K,p),Te&&Te.m(h,p),(0,i.$Tr)(h,q,p),V=!0,G||(W=[(0,i.TVh)(y=f.ol.call(null,u,e[18])),(0,i.TVh)(E=f.ol.call(null,l,e[16])),(0,i.TVh)(I=f.ol.call(null,w,e[20])),(0,i.TVh)(R=f.ol.call(null,r,e[14])),(0,i.oLt)(r,"focus",e[70]),(0,i.oLt)(r,"blur",e[71]),(0,i.oLt)(r,"click",e[72]),(0,i.oLt)(r,"keydown",e[73]),(0,i.oLt)(r,"focus",e[62]),(0,i.oLt)(r,"blur",e[63]),(0,i.TVh)(B=m.Z.call(null,t,{ripple:"filled"===e[7],unbounded:!1,addClass:e[49],removeClass:e[50],addStyle:e[51]})),(0,i.TVh)(F=g.call(null,t,{addClass:e[49],removeClass:e[50]})),(0,i.TVh)(j=f.ol.call(null,t,e[2])),(0,i.TVh)(H=e[44].call(null,t)),(0,i.oLt)(t,"SMUISelectLeadingIcon:mount",e[82]),(0,i.oLt)(t,"SMUISelectLeadingIcon:unmount",e[83])],G=!0)},p(e,c){e[12]?z?z.p(e,c):(z=te(e),z.c(),z.m(t,n)):z&&(z.d(1),z=null),"filled"===e[7]?J||(J=ne(),J.c(),J.m(r,o)):J&&(J.d(1),J=null),"outlined"===e[7]||e[8]||null==e[9]&&!e[52].label?Q&&((0,i.dvw)(),(0,i.etI)(Q,1,1,(()=>{Q=null})),(0,i.gbL)()):Q?(Q.p(e,c),896&c[0]|2097152&c[1]&&(0,i.Ui)(Q,1)):(Q=ie(e),Q.c(),(0,i.Ui)(Q,1),Q.m(r,s)),"outlined"===e[7]?Z?(Z.p(e,c),128&c[0]&&(0,i.Ui)(Z,1)):(Z=oe(e),Z.c(),(0,i.Ui)(Z,1),Z.m(r,a)):Z&&((0,i.dvw)(),(0,i.etI)(Z,1,1,(()=>{Z=null})),(0,i.gbL)()),re&&re.p&&(!V||33554432&c[2])&&(0,i.kmG)(re,ee,e,e[87],V?(0,i.u2N)(ee,e[87],c,Y):(0,i.VOJ)(e[87]),X),(!V||4096&c[1])&&(0,i.rTO)(d,e[43]),(0,i.UF7)(u,ae=(0,i.LoY)(se,[(!V||2048&c[0]&&h!==(h=e[11]+"-smui-selected-text"))&&{id:h},(!V||524288&c[0]&&p!==(p=(0,f.$o)({[e[19]]:!0,"mdc-select__selected-text":!0})))&&{class:p},{role:"button"},{"aria-haspopup":"listbox"},(!V||2048&c[0]&&v!==(v=e[11]+"-smui-label"))&&{"aria-labelledby":v},4194304&c[1]&&(0,f.bO)(e[53],"selectedText$")])),y&&(0,i.sBU)(y.update)&&262144&c[0]&&y.update.call(null,e[18]),(0,i.UF7)(l,ue=(0,i.LoY)(ce,[(!V||131072&c[0]&&b!==(b=(0,f.$o)({[e[17]]:!0,"mdc-select__selected-text-container":!0})))&&{class:b},4194304&c[1]&&(0,f.bO)(e[53],"selectedTextContainer$")])),E&&(0,i.sBU)(E.update)&&65536&c[0]&&E.update.call(null,e[16]),(0,i.UF7)(w,fe=(0,i.LoY)(pe,[(!V||2097152&c[0]&&C!==(C=(0,f.$o)({[e[21]]:!0,"mdc-select__dropdown-icon":!0})))&&{class:C},4194304&c[1]&&(0,f.bO)(e[53],"dropdownIcon$")])),I&&(0,i.sBU)(I.update)&&1048576&c[0]&&I.update.call(null,e[20]),"outlined"!==e[7]&&e[5]?me?(me.p(e,c),160&c[0]&&(0,i.Ui)(me,1)):(me=le(e),me.c(),(0,i.Ui)(me,1),me.m(r,null)):me&&((0,i.dvw)(),(0,i.etI)(me,1,1,(()=>{me=null})),(0,i.gbL)()),(0,i.UF7)(r,ye=(0,i.LoY)(ve,[(!V||32768&c[0]&&M!==(M=(0,f.$o)({[e[15]]:!0,"mdc-select__anchor":!0})))&&{class:M},(!V||1024&c[0]&&A!==(A=e[10]?"true":void 0))&&{"aria-required":A},(!V||64&c[0]&&O!==(O=e[6]?"true":void 0))&&{"aria-disabled":O},(!V||1&c[1])&&{"aria-controls":e[31]},(!V||1&c[1])&&{"aria-describedby":e[31]},536870912&c[0]&&e[29],4194304&c[1]&&(0,f.bO)(e[53],"anchor$")])),R&&(0,i.sBU)(R.update)&&16384&c[0]&&R.update.call(null,e[14]);const m=4194304&c[0]|4194332&c[1]?(0,i.LoY)(be,[4194304&c[0]|4&c[1]&&{class:(0,f.$o)({[e[22]]:!0,"mdc-select__menu":!0,...e[33]})},be[1],be[2],8&c[1]&&{anchorElement:e[34]},16&c[1]&&{anchorCorner:e[35]},4194304&c[1]&&(0,i.gCg)((0,f.bO)(e[53],"menu$"))]):{};16777216&c[0]|4194400&c[1]|33554432&c[2]&&(m.$$scope={dirty:c,ctx:e}),!P&&2&c[1]&&(P=!0,m.open=e[32],(0,i.hjT)((()=>P=!1))),N.$set(m),(0,i.UF7)(t,_e=(0,i.LoY)(we,[(!V||67119050&c[0]|2097154&c[1]&&$!==($=(0,f.$o)({[e[3]]:!0,"mdc-select":!0,"mdc-select--required":e[10],"mdc-select--disabled":e[6],"mdc-select--filled":"filled"===e[7],"mdc-select--outlined":"outlined"===e[7],"smui-select--standard":"standard"===e[7],"mdc-select--with-leading-icon":e[45](e[13])?e[52].leadingIcon:e[13],"mdc-select--no-label":e[8]||null==e[9]&&!e[52].label,"mdc-select--invalid":e[1],"mdc-select--activated":e[32],"mdc-data-table__pagination-rows-per-page-select":"data-table:pagination"===e[46],...e[26]})))&&{class:$},(!V||134217744&c[0]&&U!==(U=Object.entries(e[27]).map(ge).concat([e[4]]).join(" ")))&&{style:U},4194304&c[1]&&(0,f.De)(e[53],["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])])),B&&(0,i.sBU)(B.update)&&128&c[0]&&B.update.call(null,{ripple:"filled"===e[7],unbounded:!1,addClass:e[49],removeClass:e[50],addStyle:e[51]}),j&&(0,i.sBU)(j.update)&&4&c[0]&&j.update.call(null,e[2]),e[52].helperText?Te?(Te.p(e,c),2097152&c[1]&&(0,i.Ui)(Te,1)):(Te=he(e),Te.c(),(0,i.Ui)(Te,1),Te.m(q.parentNode,q)):Te&&((0,i.dvw)(),(0,i.etI)(Te,1,1,(()=>{Te=null})),(0,i.gbL)())},i(e){V||((0,i.Ui)(Q),(0,i.Ui)(Z),(0,i.Ui)(re,e),(0,i.Ui)(me),(0,i.Ui)(N.$$.fragment,e),(0,i.Ui)(Te),V=!0)},o(e){(0,i.etI)(Q),(0,i.etI)(Z),(0,i.etI)(re,e),(0,i.etI)(me),(0,i.etI)(N.$$.fragment,e),(0,i.etI)(Te),V=!1},d(n){n&&(0,i.ogt)(t),z&&z.d(),J&&J.d(),Q&&Q.d(),Z&&Z.d(),re&&re.d(n),e[67](null),me&&me.d(),e[69](null),(0,i.vpE)(N),e[81](null),n&&(0,i.ogt)(K),Te&&Te.d(n),n&&(0,i.ogt)(q),G=!1,(0,i.j7q)(W)}}}let me=0;const ge=([e,t])=>`${e}: ${t};`;function ve(e,t,n){const r=["use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","focus","layout","getElement"];let o,s,a=(0,i.q2N)(t,r),{$$slots:c={},$$scope:l}=t;const u=(0,i.XGm)(c),m=(0,f.PD)((0,i.w2L)());let g=()=>{};function v(e){return e===g}let{use:y=[]}=t,{class:b=""}=t,{style:E=""}=t,{ripple:S=!0}=t,{disabled:w=!1}=t,{variant:_="standard"}=t,{noLabel:T=!1}=t,{label:x}=t,{value:C=""}=t,{key:I=(e=>e)}=t,{dirty:k=!1}=t,{invalid:M=g}=t,{updateInvalid:A=v(M)}=t;v(M)&&(M=!1);let O,R,L,D,N,P,$,U,B,F,j,H,K,q,{required:V=!1}=t,{inputId:G="SMUI-select-"+me++}=t,{hiddenInput:W=!1}=t,{withLeadingIcon:z=g}=t,{anchor$use:Y=[]}=t,{anchor$class:X=""}=t,{selectedTextContainer$use:J=[]}=t,{selectedTextContainer$class:Q=""}=t,{selectedText$use:Z=[]}=t,{selectedText$class:ee=""}=t,{dropdownIcon$use:te=[]}=t,{dropdownIcon$class:ne=""}=t,{menu$class:ie=""}=t,re={},oe={},se={},ae=-1,ce=(0,h.fw)("SMUI:addLayoutListener"),le=!1,ue={},de=!1,he=(0,h.fw)("SMUI:select:context");(0,h.v)("SMUI:list:role",""),(0,h.v)("SMUI:list:nav",!1);const pe=(0,p.fZ)("");(0,i.FIv)(e,pe,(e=>n(43,o=e))),(0,h.v)("SMUI:select:selectedText",pe);const fe=(0,p.fZ)(C);(0,i.FIv)(e,fe,(e=>n(89,s=e))),(0,h.v)("SMUI:select:value",fe);let ge=ae;function ve(e){return e in re?re[e]:Ie().classList.contains(e)}function ye(e){re[e]||n(26,re[e]=!0,re)}function be(e){e in re&&!re[e]||n(26,re[e]=!1,re)}function Ee(e){ue[e]||n(33,ue[e]=!0,ue)}function Se(e){e in ue&&!ue[e]||n(33,ue[e]=!1,ue)}function we(e){var t;return e in se?null!==(t=se[e])&&void 0!==t?t:null:Ie().getAttribute(e)}function _e(e,t){se[e]!==t&&n(29,se[e]=t,se)}function Te(e){e in se&&null==se[e]||n(29,se[e]=void 0,se)}function xe(){return B.getOrderedList().map((e=>e.getValue()))}function Ce(){R.layout()}function Ie(){return O}return ce&&(P=ce(Ce)),(0,h.H3)((()=>(n(23,R=new d({setSelectedText:e=>{(0,i.fxP)(pe,o=e,o)},isSelectAnchorFocused:()=>document.activeElement===L,getSelectAnchorAttr:we,setSelectAnchorAttr:_e,removeSelectAnchorAttr:Te,addMenuClass:Ee,removeMenuClass:Se,openMenu:()=>{n(32,le=!0)},closeMenu:()=>{n(32,le=!1)},getAnchorElement:()=>L,setMenuAnchorElement:e=>{n(34,$=e)},setMenuAnchorCorner:e=>{n(35,U=e)},setMenuWrapFocus:e=>{n(36,de=e)},getSelectedIndex:()=>ae,setSelectedIndex:e=>{n(60,ge=e),n(24,ae=e),n(0,C=xe()[ae])},focusMenuItemAtIndex:e=>{B.focusItemAtIndex(e)},getMenuItemCount:()=>B.items.length,getMenuItemValues:()=>xe().map(I),getMenuItemTextAtIndex:e=>B.getPrimaryTextAtIndex(e),isTypeaheadInProgress:()=>B.typeaheadInProgress,typeaheadMatchItem:(e,t)=>B.typeaheadMatchItem(e,t),addClass:ye,removeClass:be,hasClass:ve,setRippleCenter:e=>K&&K.setRippleCenter(e),activateBottomLine:()=>K&&K.activate(),deactivateBottomLine:()=>K&&K.deactivate(),notifyChange:e=>{n(54,k=!0),A&&n(1,M=!R.isValid()),(0,f.WI)(Ie(),"MDCSelect:change",{value:C,index:ae})},hasOutline:()=>!!q,notchOutline:e=>q&&q.notch(e),closeOutline:()=>q&&q.closeNotch(),hasLabel:()=>!!H,floatLabel:e=>H&&H.float(e),getLabelWidth:()=>H?H.getWidth():0,setLabelRequired:e=>H&&H.setRequired(e)},{get helperText(){return j},get leadingIcon(){return F}})),n(24,ae=xe().indexOf(C)),R.init(),()=>{R.destroy()}))),(0,h.ev)((()=>{P&&P()})),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(53,a=(0,i.q2N)(t,r)),"use"in e&&n(2,y=e.use),"class"in e&&n(3,b=e.class),"style"in e&&n(4,E=e.style),"ripple"in e&&n(5,S=e.ripple),"disabled"in e&&n(6,w=e.disabled),"variant"in e&&n(7,_=e.variant),"noLabel"in e&&n(8,T=e.noLabel),"label"in e&&n(9,x=e.label),"value"in e&&n(0,C=e.value),"key"in e&&n(55,I=e.key),"dirty"in e&&n(54,k=e.dirty),"invalid"in e&&n(1,M=e.invalid),"updateInvalid"in e&&n(56,A=e.updateInvalid),"required"in e&&n(10,V=e.required),"inputId"in e&&n(11,G=e.inputId),"hiddenInput"in e&&n(12,W=e.hiddenInput),"withLeadingIcon"in e&&n(13,z=e.withLeadingIcon),"anchor$use"in e&&n(14,Y=e.anchor$use),"anchor$class"in e&&n(15,X=e.anchor$class),"selectedTextContainer$use"in e&&n(16,J=e.selectedTextContainer$use),"selectedTextContainer$class"in e&&n(17,Q=e.selectedTextContainer$class),"selectedText$use"in e&&n(18,Z=e.selectedText$use),"selectedText$class"in e&&n(19,ee=e.selectedText$class),"dropdownIcon$use"in e&&n(20,te=e.dropdownIcon$use),"dropdownIcon$class"in e&&n(21,ne=e.dropdownIcon$class),"menu$class"in e&&n(22,ie=e.menu$class),"$$scope"in e&&n(87,l=e.$$scope)},e.$$.update=()=>{if(25165825&e.$$.dirty[0]|536870912&e.$$.dirty[1]&&ge!==ae)if(n(60,ge=ae),R)R.setSelectedIndex(ae,!1,!0);else{const e=xe();C!==e[ae]&&n(0,C=e[ae])}1&e.$$.dirty[0]&&(0,i.fxP)(fe,s=C,s),8388609&e.$$.dirty[0]|16777216&e.$$.dirty[1]&&R&&R.getValue()!==I(C)&&R.setValue(I(C)),8388672&e.$$.dirty[0]&&R&&R.getDisabled()!==w&&R.setDisabled(w),8388610&e.$$.dirty[0]|41943040&e.$$.dirty[1]&&R&&k&&R.isValid()!==!M&&(A?n(1,M=!R.isValid()):R.setValid(!M)),8389632&e.$$.dirty[0]&&R&&R.getRequired()!==V&&R.setRequired(V)},[C,M,y,b,E,S,w,_,T,x,V,G,W,z,Y,X,J,Q,Z,ee,te,ne,ie,R,ae,O,re,oe,L,se,D,N,le,ue,$,U,de,B,F,j,H,K,q,o,m,v,he,pe,fe,ye,be,function(e,t){oe[e]!=t&&(""===t||null==t?(delete oe[e],n(27,oe)):n(27,oe[e]=t,oe))},u,a,k,I,A,function(){L.focus()},Ce,Ie,ge,c,function(t){i.cKT.call(this,e,t)},function(t){i.cKT.call(this,e,t)},function(e){i.VnY[e?"unshift":"push"]((()=>{H=e,n(40,H)}))},function(e){i.VnY[e?"unshift":"push"]((()=>{H=e,n(40,H)}))},function(e){i.VnY[e?"unshift":"push"]((()=>{q=e,n(42,q)}))},function(e){i.VnY[e?"unshift":"push"]((()=>{D=e,n(30,D)}))},function(e){i.VnY[e?"unshift":"push"]((()=>{K=e,n(41,K)}))},function(e){i.VnY[e?"unshift":"push"]((()=>{L=e,n(28,L)}))},()=>R&&R.handleFocus(),()=>R&&R.handleBlur(),e=>{L.focus(),R&&R.handleClick(function(e){const t=e.currentTarget.getBoundingClientRect();return(function(e){return"touches"in e}(e)?e.touches[0].clientX:e.clientX)-t.left}(e))},e=>R&&R.handleKeydown(e),function(e){ae=e,n(24,ae)},e=>n(37,B=e.detail),function(e){le=e,n(32,le)},e=>R&&R.handleMenuItemAction(e.detail.index),()=>R&&R.handleMenuClosing(),()=>R&&R.handleMenuClosed(),()=>R&&R.handleMenuOpened(),function(e){i.VnY[e?"unshift":"push"]((()=>{O=e,n(25,O)}))},e=>n(38,F=e.detail),()=>n(38,F=void 0),e=>n(31,N=e.detail),e=>n(39,j=e.detail),()=>{n(31,N=void 0),n(39,j=void 0)},l]}class ye extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,ve,fe,i.N8,{use:2,class:3,style:4,ripple:5,disabled:6,variant:7,noLabel:8,label:9,value:0,key:55,dirty:54,invalid:1,updateInvalid:56,required:10,inputId:11,hiddenInput:12,withLeadingIcon:13,anchor$use:14,anchor$class:15,selectedTextContainer$use:16,selectedTextContainer$class:17,selectedText$use:18,selectedText$class:19,dropdownIcon$use:20,dropdownIcon$class:21,menu$class:22,focus:57,layout:58,getElement:59},null,[-1,-1,-1,-1])}get focus(){return this.$$.ctx[57]}get layout(){return this.$$.ctx[58]}get getElement(){return this.$$.ctx[59]}}const be=ye;function Ee(e){let t;const n=e[11].default,r=(0,i.nuO)(n,e,e[13],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||8192&o)&&(0,i.kmG)(r,n,e,e[13],t?(0,i.u2N)(n,e[13],o,null):(0,i.VOJ)(e[13]),null)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function Se(e){let t,n;const r=[{use:e[3]},{"data-value":e[0]},{value:e[0]},{selected:e[2]},e[6]];let o={$$slots:{default:[Ee]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=(0,i.f0i)(o,r[e]);return t=new R.ck({props:o}),e[12](t),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,[n]){const o=77&n?(0,i.LoY)(r,[8&n&&{use:e[3]},1&n&&{"data-value":e[0]},1&n&&{value:e[0]},4&n&&{selected:e[2]},64&n&&(0,i.gCg)(e[6])]):{};8192&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(n){e[12](null),(0,i.vpE)(t,n)}}}function we(e,t,n){let r,o;const s=["use","class","value","getElement"];let a,c,l=(0,i.q2N)(t,s),{$$slots:u={},$$scope:d}=t;const p=(0,f.PD)((0,i.w2L)());let m,{use:g=[]}=t,{value:v=""}=t;const y=(0,h.fw)("SMUI:select:selectedText");(0,i.FIv)(e,y,(e=>n(14,a=e)));const b=(0,h.fw)("SMUI:select:value");function E(){o&&m&&(0,i.fxP)(y,a=m.getPrimaryText(),a)}return(0,i.FIv)(e,b,(e=>n(10,c=e))),(0,h.v)("SMUI:list:item:role","option"),(0,h.H3)(E),(0,h.ev)(E),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(6,l=(0,i.q2N)(t,s)),"use"in e&&n(7,g=e.use),"value"in e&&n(0,v=e.value),"$$scope"in e&&n(13,d=e.$$scope)},e.$$.update=()=>{128&e.$$.dirty&&n(3,r=[p,...g]),1025&e.$$.dirty&&n(2,o=null!=v&&""!==v&&c===v)},[v,m,o,r,y,b,l,g,"",function(){return m.getElement()},c,u,function(e){i.VnY[e?"unshift":"push"]((()=>{m=e,n(1,m)}))},d]}class _e extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,we,Se,i.N8,{use:7,class:8,value:0,getElement:9})}get class(){return this.$$.ctx[8]}get getElement(){return this.$$.ctx[9]}}const Te=_e,xe=be},24307:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(24234),r=n(70655),o=n(6308),s={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg",ROOT:"mdc-text-field-helper-text"},a={ARIA_HIDDEN:"aria-hidden",ROLE:"role",ROOT_SELECTOR:"."+s.ROOT},c=function(e){function t(n){return e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this}return(0,r.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return s},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return a},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){}}},enumerable:!1,configurable:!0}),t.prototype.getId=function(){return this.adapter.getAttr("id")},t.prototype.isVisible=function(){return"true"!==this.adapter.getAttr(a.ARIA_HIDDEN)},t.prototype.setContent=function(e){this.adapter.setContent(e)},t.prototype.isPersistent=function(){return this.adapter.hasClass(s.HELPER_TEXT_PERSISTENT)},t.prototype.setPersistent=function(e){e?this.adapter.addClass(s.HELPER_TEXT_PERSISTENT):this.adapter.removeClass(s.HELPER_TEXT_PERSISTENT)},t.prototype.isValidation=function(){return this.adapter.hasClass(s.HELPER_TEXT_VALIDATION_MSG)},t.prototype.setValidation=function(e){e?this.adapter.addClass(s.HELPER_TEXT_VALIDATION_MSG):this.adapter.removeClass(s.HELPER_TEXT_VALIDATION_MSG)},t.prototype.showToScreenReader=function(){this.adapter.removeAttr(a.ARIA_HIDDEN)},t.prototype.setValidity=function(e){var t=this.adapter.hasClass(s.HELPER_TEXT_PERSISTENT),n=this.adapter.hasClass(s.HELPER_TEXT_VALIDATION_MSG)&&!e;n?(this.showToScreenReader(),this.adapter.setAttr(a.ROLE,"alert")):this.adapter.removeAttr(a.ROLE),t||n||this.hide_()},t.prototype.hide_=function(){this.adapter.setAttr(a.ARIA_HIDDEN,"true")},t}(o.K),l=n(68568),u=n(47658);function d(e){let t;return{c(){t=(0,i.fLW)(e[8])},m(e,n){(0,i.$Tr)(e,t,n)},p(e,n){256&n&&(0,i.rTO)(t,e[8])},i:i.ZTd,o:i.ZTd,d(e){e&&(0,i.ogt)(t)}}}function h(e){let t;const n=e[13].default,r=(0,i.nuO)(n,e,e[12],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||4096&o)&&(0,i.kmG)(r,n,e,e[12],t?(0,i.u2N)(n,e[12],o,null):(0,i.VOJ)(e[12]),null)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function p(e){let t,n,r,o,s,a,c,l,p,f;const m=[h,d],g=[];function v(e,t){return null==e[8]?0:1}n=v(e),r=g[n]=m[n](e);let y=[{class:o=(0,u.$o)({[e[1]]:!0,"mdc-text-field-helper-text":!0,"mdc-text-field-helper-text--persistent":e[3],"mdc-text-field-helper-text--validation-msg":e[4],...e[6]})},{"aria-hidden":s=e[3]?void 0:"true"},{id:e[2]},e[7],e[10]],b={};for(let e=0;e<y.length;e+=1)b=(0,i.f0i)(b,y[e]);return{c(){t=(0,i.bGB)("div"),r.c(),(0,i.UF7)(t,b)},m(r,o){(0,i.$Tr)(r,t,o),g[n].m(t,null),e[14](t),l=!0,p||(f=[(0,i.TVh)(a=u.ol.call(null,t,e[0])),(0,i.TVh)(c=e[9].call(null,t))],p=!0)},p(e,[c]){let d=n;n=v(e),n===d?g[n].p(e,c):((0,i.dvw)(),(0,i.etI)(g[d],1,1,(()=>{g[d]=null})),(0,i.gbL)(),r=g[n],r?r.p(e,c):(r=g[n]=m[n](e),r.c()),(0,i.Ui)(r,1),r.m(t,null)),(0,i.UF7)(t,b=(0,i.LoY)(y,[(!l||90&c&&o!==(o=(0,u.$o)({[e[1]]:!0,"mdc-text-field-helper-text":!0,"mdc-text-field-helper-text--persistent":e[3],"mdc-text-field-helper-text--validation-msg":e[4],...e[6]})))&&{class:o},(!l||8&c&&s!==(s=e[3]?void 0:"true"))&&{"aria-hidden":s},(!l||4&c)&&{id:e[2]},128&c&&e[7],1024&c&&e[10]])),a&&(0,i.sBU)(a.update)&&1&c&&a.update.call(null,e[0])},i(e){l||((0,i.Ui)(r),l=!0)},o(e){(0,i.etI)(r),l=!1},d(r){r&&(0,i.ogt)(t),g[n].d(),e[14](null),p=!1,(0,i.j7q)(f)}}}let f=0;function m(e,t,n){const r=["use","class","id","persistent","validationMsg","getElement"];let o=(0,i.q2N)(t,r),{$$slots:s={},$$scope:a}=t;const d=(0,u.PD)((0,i.w2L)());let h,p,m,{use:g=[]}=t,{class:v=""}=t,{id:y="SMUI-textfield-helper-text-"+f++}=t,{persistent:b=!1}=t,{validationMsg:E=!1}=t,S={},w={};function _(e){return e in S?S[e]:M().classList.contains(e)}function T(e){S[e]||n(6,S[e]=!0,S)}function x(e){e in S&&!S[e]||n(6,S[e]=!1,S)}function C(e){var t;return e in w?null!==(t=w[e])&&void 0!==t?t:null:M().getAttribute(e)}function I(e,t){w[e]!==t&&n(7,w[e]=t,w)}function k(e){e in w&&null==w[e]||n(7,w[e]=void 0,w)}function M(){return h}return(0,l.H3)((()=>(p=new c({addClass:T,removeClass:x,hasClass:_,getAttr:C,setAttr:I,removeAttr:k,setContent:e=>{n(8,m=e)}}),y.startsWith("SMUI-textfield-helper-text-")&&(0,u.WI)(M(),"SMUITextfieldHelperText:id",y),(0,u.WI)(M(),"SMUITextfieldHelperText:mount",p),p.init(),()=>{(0,u.WI)(M(),"SMUITextfieldHelperText:unmount",p),p.destroy()}))),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(10,o=(0,i.q2N)(t,r)),"use"in e&&n(0,g=e.use),"class"in e&&n(1,v=e.class),"id"in e&&n(2,y=e.id),"persistent"in e&&n(3,b=e.persistent),"validationMsg"in e&&n(4,E=e.validationMsg),"$$scope"in e&&n(12,a=e.$$scope)},[g,v,y,b,E,h,S,w,m,d,o,M,a,s,function(e){i.VnY[e?"unshift":"push"]((()=>{h=e,n(5,h)}))}]}class g extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,m,p,i.N8,{use:0,class:1,id:2,persistent:3,validationMsg:4,getElement:11})}get getElement(){return this.$$.ctx[11]}}const v=g},26901:(e,t,n)=>{"use strict";n.d(t,{uw:()=>T,ZP:()=>Le});var i=n(24234),r=n(70655),o=n(6308),s={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",PREFIX_SELECTOR:".mdc-text-field__affix--prefix",SUFFIX_SELECTOR:".mdc-text-field__affix--suffix",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},a={DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",LABEL_FLOATING:"mdc-text-field--label-floating",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon"},c={LABEL_SCALE:.75},l=["pattern","min","max","required","step","minlength","maxlength"],u=["color","date","datetime-local","month","range","time","week"],d=["mousedown","touchstart"],h=["click","keydown"],p=function(e){function t(n,i){void 0===i&&(i={});var o=e.call(this,(0,r.pi)((0,r.pi)({},t.defaultAdapter),n))||this;return o.isFocused_=!1,o.receivedUserInput_=!1,o.isValid_=!0,o.useNativeValidation_=!0,o.validateOnValueChange_=!0,o.helperText_=i.helperText,o.characterCounter_=i.characterCounter,o.leadingIcon_=i.leadingIcon,o.trailingIcon_=i.trailingIcon,o.inputFocusHandler_=function(){return o.activateFocus()},o.inputBlurHandler_=function(){return o.deactivateFocus()},o.inputInputHandler_=function(){return o.handleInput()},o.setPointerXOffset_=function(e){return o.setTransformOrigin(e)},o.textFieldInteractionHandler_=function(){return o.handleTextFieldInteraction()},o.validationAttributeChangeHandler_=function(e){return o.handleValidationAttributeChange(e)},o}return(0,r.ZT)(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return a},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return s},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldAlwaysFloat_",{get:function(){var e=this.getNativeInput_().type;return u.indexOf(e)>=0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat_||this.isFocused_||!!this.getValue()||this.isBadInput_()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldShake",{get:function(){return!this.isFocused_&&!this.isValid()&&!!this.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},setInputAttr:function(){},removeInputAttr:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver((function(){}))},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},setLabelRequired:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=this;this.adapter.hasLabel()&&this.getNativeInput_().required&&this.adapter.setLabelRequired(!0),this.adapter.isFocused()?this.inputFocusHandler_():this.adapter.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter.floatLabel(!0),this.styleFloating_(!0)),this.adapter.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter.registerInputInteractionHandler("input",this.inputInputHandler_),d.forEach((function(t){e.adapter.registerInputInteractionHandler(t,e.setPointerXOffset_)})),h.forEach((function(t){e.adapter.registerTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.validationObserver_=this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_),this.setCharacterCounter_(this.getValue().length)},t.prototype.destroy=function(){var e=this;this.adapter.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter.deregisterInputInteractionHandler("input",this.inputInputHandler_),d.forEach((function(t){e.adapter.deregisterInputInteractionHandler(t,e.setPointerXOffset_)})),h.forEach((function(t){e.adapter.deregisterTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver_)},t.prototype.handleTextFieldInteraction=function(){var e=this.adapter.getNativeInput();e&&e.disabled||(this.receivedUserInput_=!0)},t.prototype.handleValidationAttributeChange=function(e){var t=this;e.some((function(e){return l.indexOf(e)>-1&&(t.styleValidity_(!0),t.adapter.setLabelRequired(t.getNativeInput_().required),!0)})),e.indexOf("maxlength")>-1&&this.setCharacterCounter_(this.getValue().length)},t.prototype.notchOutline=function(e){if(this.adapter.hasOutline()&&this.adapter.hasLabel())if(e){var t=this.adapter.getLabelWidth()*c.LABEL_SCALE;this.adapter.notchOutline(t)}else this.adapter.closeOutline()},t.prototype.activateFocus=function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.adapter.activateLineRipple(),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),!this.helperText_||!this.helperText_.isPersistent()&&this.helperText_.isValidation()&&this.isValid_||this.helperText_.showToScreenReader()},t.prototype.setTransformOrigin=function(e){if(!this.isDisabled()&&!this.adapter.hasOutline()){var t=e.touches,n=t?t[0]:e,i=n.target.getBoundingClientRect(),r=n.clientX-i.left;this.adapter.setLineRippleTransformOrigin(r)}},t.prototype.handleInput=function(){this.autoCompleteFocus(),this.setCharacterCounter_(this.getValue().length)},t.prototype.autoCompleteFocus=function(){this.receivedUserInput_||this.activateFocus()},t.prototype.deactivateFocus=function(){this.isFocused_=!1,this.adapter.deactivateLineRipple();var e=this.isValid();this.styleValidity_(e),this.styleFocused_(this.isFocused_),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput_=!1)},t.prototype.getValue=function(){return this.getNativeInput_().value},t.prototype.setValue=function(e){if(this.getValue()!==e&&(this.getNativeInput_().value=e),this.setCharacterCounter_(e.length),this.validateOnValueChange_){var t=this.isValid();this.styleValidity_(t)}this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.validateOnValueChange_&&this.adapter.shakeLabel(this.shouldShake))},t.prototype.isValid=function(){return this.useNativeValidation_?this.isNativeInputValid_():this.isValid_},t.prototype.setValid=function(e){this.isValid_=e,this.styleValidity_(e);var t=!e&&!this.isFocused_&&!!this.getValue();this.adapter.hasLabel()&&this.adapter.shakeLabel(t)},t.prototype.setValidateOnValueChange=function(e){this.validateOnValueChange_=e},t.prototype.getValidateOnValueChange=function(){return this.validateOnValueChange_},t.prototype.setUseNativeValidation=function(e){this.useNativeValidation_=e},t.prototype.isDisabled=function(){return this.getNativeInput_().disabled},t.prototype.setDisabled=function(e){this.getNativeInput_().disabled=e,this.styleDisabled_(e)},t.prototype.setHelperTextContent=function(e){this.helperText_&&this.helperText_.setContent(e)},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon_&&this.leadingIcon_.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon_&&this.leadingIcon_.setContent(e)},t.prototype.setTrailingIconAriaLabel=function(e){this.trailingIcon_&&this.trailingIcon_.setAriaLabel(e)},t.prototype.setTrailingIconContent=function(e){this.trailingIcon_&&this.trailingIcon_.setContent(e)},t.prototype.setCharacterCounter_=function(e){if(this.characterCounter_){var t=this.getNativeInput_().maxLength;if(-1===t)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter_.setCounterValue(e,t)}},t.prototype.isBadInput_=function(){return this.getNativeInput_().validity.badInput||!1},t.prototype.isNativeInputValid_=function(){return this.getNativeInput_().validity.valid},t.prototype.styleValidity_=function(e){var n=t.cssClasses.INVALID;if(e?this.adapter.removeClass(n):this.adapter.addClass(n),this.helperText_){if(this.helperText_.setValidity(e),!this.helperText_.isValidation())return;var i=this.helperText_.isVisible(),r=this.helperText_.getId();i&&r?this.adapter.setInputAttr(s.ARIA_DESCRIBEDBY,r):this.adapter.removeInputAttr(s.ARIA_DESCRIBEDBY)}},t.prototype.styleFocused_=function(e){var n=t.cssClasses.FOCUSED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.styleDisabled_=function(e){var n=t.cssClasses,i=n.DISABLED,r=n.INVALID;e?(this.adapter.addClass(i),this.adapter.removeClass(r)):this.adapter.removeClass(i),this.leadingIcon_&&this.leadingIcon_.setDisabled(e),this.trailingIcon_&&this.trailingIcon_.setDisabled(e)},t.prototype.styleFloating_=function(e){var n=t.cssClasses.LABEL_FLOATING;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.getNativeInput_=function(){return(this.adapter?this.adapter.getNativeInput():null)||{disabled:!1,maxLength:-1,required:!1,type:"input",validity:{badInput:!1,valid:!0},value:""}},t}(o.K),f=n(79397),m=n(68568),g=n(47658),v=n(32091),y=n(37341),b=n(58820),E=n(78268),S=n(76264),w=n(58858),_=n(46504);const T=(0,w.C)({class:"mdc-text-field-helper-line",component:_.ZC}),x=(0,w.C)({class:"mdc-text-field__affix mdc-text-field__affix--prefix",component:_.Dr}),C=(0,w.C)({class:"mdc-text-field__affix mdc-text-field__affix--suffix",component:_.Dr});function I(e){let t,n,r,o,s,a,c=[{class:n=(0,g.$o)({[e[1]]:!0,"mdc-text-field__input":!0})},{type:e[2]},{placeholder:e[3]},e[4],e[6],e[10]],l={};for(let e=0;e<c.length;e+=1)l=(0,i.f0i)(l,c[e]);return{c(){t=(0,i.bGB)("input"),(0,i.UF7)(t,l)},m(n,c){(0,i.$Tr)(n,t,c),t.autofocus&&t.focus(),e[25](t),s||(a=[(0,i.TVh)(r=g.ol.call(null,t,e[0])),(0,i.TVh)(o=e[7].call(null,t)),(0,i.oLt)(t,"input",e[26]),(0,i.oLt)(t,"change",e[9]),(0,i.oLt)(t,"blur",e[23]),(0,i.oLt)(t,"focus",e[24])],s=!0)},p(e,[o]){(0,i.UF7)(t,l=(0,i.LoY)(c,[2&o&&n!==(n=(0,g.$o)({[e[1]]:!0,"mdc-text-field__input":!0}))&&{class:n},4&o&&{type:e[2]},8&o&&{placeholder:e[3]},16&o&&e[4],64&o&&e[6],1024&o&&e[10]])),r&&(0,i.sBU)(r.update)&&1&o&&r.update.call(null,e[0])},i:i.ZTd,o:i.ZTd,d(n){n&&(0,i.ogt)(t),e[25](null),s=!1,(0,i.j7q)(a)}}}function k(e,t,n){const r=["use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","emptyValueNull","emptyValueUndefined","getAttr","addAttr","removeAttr","focus","getElement"];let o=(0,i.q2N)(t,r);const s=(0,g.PD)((0,i.w2L)());let a,{use:c=[]}=t,{class:l=""}=t,{type:u="text"}=t,{placeholder:d=" "}=t,{value:h=""}=t,{files:p=null}=t,{dirty:f=!1}=t,{invalid:v=!1}=t,{updateInvalid:y=!0}=t,{emptyValueNull:b=null===h}=t,{emptyValueUndefined:E=void 0===h}=t,S={},w={};function _(e){if("file"!==u)if(""===e.currentTarget.value&&b)n(11,h=null);else if(""===e.currentTarget.value&&E)n(11,h=void 0);else switch(u){case"number":case"range":n(11,h=function(e){if(""===e){const e=new Number(Number.NaN);return e.length=0,e}return+e}(e.currentTarget.value));break;default:n(11,h=e.currentTarget.value)}else n(12,p=e.currentTarget.files)}function T(){return a}return(0,m.H3)((()=>{y&&n(14,v=a.matches(":invalid"))})),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(10,o=(0,i.q2N)(t,r)),"use"in e&&n(0,c=e.use),"class"in e&&n(1,l=e.class),"type"in e&&n(2,u=e.type),"placeholder"in e&&n(3,d=e.placeholder),"value"in e&&n(11,h=e.value),"files"in e&&n(12,p=e.files),"dirty"in e&&n(13,f=e.dirty),"invalid"in e&&n(14,v=e.invalid),"updateInvalid"in e&&n(15,y=e.updateInvalid),"emptyValueNull"in e&&n(16,b=e.emptyValueNull),"emptyValueUndefined"in e&&n(17,E=e.emptyValueUndefined)},e.$$.update=()=>{2068&e.$$.dirty&&("file"===u?(delete w.value,n(4,w),n(2,u),n(11,h)):n(4,w.value=null==h?"":h,w))},[c,l,u,d,w,a,S,s,_,function(e){"file"!==u&&"range"!==u||_(e),n(13,f=!0),y&&n(14,v=a.matches(":invalid"))},o,h,p,f,v,y,b,E,function(e){var t;return e in S?null!==(t=S[e])&&void 0!==t?t:null:T().getAttribute(e)},function(e,t){S[e]!==t&&n(6,S[e]=t,S)},function(e){e in S&&null==S[e]||n(6,S[e]=void 0,S)},function(){T().focus()},T,function(t){i.cKT.call(this,e,t)},function(t){i.cKT.call(this,e,t)},function(e){i.VnY[e?"unshift":"push"]((()=>{a=e,n(5,a)}))},e=>"file"!==u&&_(e)]}class M extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,k,I,i.N8,{use:0,class:1,type:2,placeholder:3,value:11,files:12,dirty:13,invalid:14,updateInvalid:15,emptyValueNull:16,emptyValueUndefined:17,getAttr:18,addAttr:19,removeAttr:20,focus:21,getElement:22})}get getAttr(){return this.$$.ctx[18]}get addAttr(){return this.$$.ctx[19]}get removeAttr(){return this.$$.ctx[20]}get focus(){return this.$$.ctx[21]}get getElement(){return this.$$.ctx[22]}}const A=M;function O(e){let t,n,r,o,s,a,c,l=[{class:n=(0,g.$o)({[e[2]]:!0,"mdc-text-field__input":!0})},{style:r=`${e[4]?"":"resize: none; "}${e[3]}`},e[6],e[9]],u={};for(let e=0;e<l.length;e+=1)u=(0,i.f0i)(u,l[e]);return{c(){t=(0,i.bGB)("textarea"),(0,i.UF7)(t,u)},m(n,r){(0,i.$Tr)(n,t,r),t.autofocus&&t.focus(),e[20](t),(0,i.BmG)(t,e[0]),a||(c=[(0,i.TVh)(o=g.ol.call(null,t,e[1])),(0,i.TVh)(s=e[7].call(null,t)),(0,i.oLt)(t,"change",e[8]),(0,i.oLt)(t,"blur",e[18]),(0,i.oLt)(t,"focus",e[19]),(0,i.oLt)(t,"input",e[21])],a=!0)},p(e,[s]){(0,i.UF7)(t,u=(0,i.LoY)(l,[4&s&&n!==(n=(0,g.$o)({[e[2]]:!0,"mdc-text-field__input":!0}))&&{class:n},24&s&&r!==(r=`${e[4]?"":"resize: none; "}${e[3]}`)&&{style:r},64&s&&e[6],512&s&&e[9]])),o&&(0,i.sBU)(o.update)&&2&s&&o.update.call(null,e[1]),1&s&&(0,i.BmG)(t,e[0])},i:i.ZTd,o:i.ZTd,d(n){n&&(0,i.ogt)(t),e[20](null),a=!1,(0,i.j7q)(c)}}}function R(e,t,n){const r=["use","class","style","value","dirty","invalid","updateInvalid","resizable","getAttr","addAttr","removeAttr","focus","getElement"];let o=(0,i.q2N)(t,r);const s=(0,g.PD)((0,i.w2L)());let a,{use:c=[]}=t,{class:l=""}=t,{style:u=""}=t,{value:d=""}=t,{dirty:h=!1}=t,{invalid:p=!1}=t,{updateInvalid:f=!0}=t,{resizable:v=!0}=t,y={};function b(){return a}return(0,m.H3)((()=>{f&&n(11,p=a.matches(":invalid"))})),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(9,o=(0,i.q2N)(t,r)),"use"in e&&n(1,c=e.use),"class"in e&&n(2,l=e.class),"style"in e&&n(3,u=e.style),"value"in e&&n(0,d=e.value),"dirty"in e&&n(10,h=e.dirty),"invalid"in e&&n(11,p=e.invalid),"updateInvalid"in e&&n(12,f=e.updateInvalid),"resizable"in e&&n(4,v=e.resizable)},[d,c,l,u,v,a,y,s,function(){n(10,h=!0),f&&n(11,p=a.matches(":invalid"))},o,h,p,f,function(e){var t;return e in y?null!==(t=y[e])&&void 0!==t?t:null:b().getAttribute(e)},function(e,t){y[e]!==t&&n(6,y[e]=t,y)},function(e){e in y&&null==y[e]||n(6,y[e]=void 0,y)},function(){b().focus()},b,function(t){i.cKT.call(this,e,t)},function(t){i.cKT.call(this,e,t)},function(e){i.VnY[e?"unshift":"push"]((()=>{a=e,n(5,a)}))},function(){d=this.value,n(0,d)}]}class L extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,R,O,i.N8,{use:1,class:2,style:3,value:0,dirty:10,invalid:11,updateInvalid:12,resizable:4,getAttr:13,addAttr:14,removeAttr:15,focus:16,getElement:17})}get getAttr(){return this.$$.ctx[13]}get addAttr(){return this.$$.ctx[14]}get removeAttr(){return this.$$.ctx[15]}get focus(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}const D=L,N=e=>({}),P=e=>({}),$=e=>({}),U=e=>({}),B=e=>({}),F=e=>({}),j=e=>({}),H=e=>({}),K=e=>({}),q=e=>({}),V=e=>({}),G=e=>({}),W=e=>({}),z=e=>({}),Y=e=>({}),X=e=>({}),J=e=>({}),Q=e=>({}),Z=e=>({}),ee=e=>({}),te=e=>({}),ne=e=>({}),ie=e=>({}),re=e=>({});function oe(e){let t,n,r,o,s,a,c,l,u,d,h,p,f,m,b;const E=e[50].label,S=(0,i.nuO)(E,e,e[89],q);r=new v.FW({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[ae]},$$scope:{ctx:e}}});const w=e[50].default,_=(0,i.nuO)(w,e,e[89],null);a=new v.FW({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[ce]},$$scope:{ctx:e}}});const T=e[50].ripple,x=(0,i.nuO)(T,e,e[89],U);let C=[{class:l=(0,g.$o)({[e[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":e[12],"mdc-text-field--textarea":e[14],"mdc-text-field--filled":"filled"===e[15],"mdc-text-field--outlined":"outlined"===e[15],"smui-text-field--standard":"standard"===e[15]&&!e[14],"mdc-text-field--no-label":e[16]||!e[41].label,"mdc-text-field--with-leading-icon":e[41].leadingIcon,"mdc-text-field--with-trailing-icon":e[41].trailingIcon,"mdc-text-field--invalid":e[1],...e[25]})},{style:u=Object.entries(e[26]).map(Ae).concat([e[10]]).join(" ")},(0,g.De)(e[42],["input$","label$","ripple$","outline$","helperLine$"])],I={};for(let e=0;e<C.length;e+=1)I=(0,i.f0i)(I,C[e]);return{c(){t=(0,i.bGB)("div"),S&&S.c(),n=(0,i.DhX)(),(0,i.YCL)(r.$$.fragment),o=(0,i.DhX)(),_&&_.c(),s=(0,i.DhX)(),(0,i.YCL)(a.$$.fragment),c=(0,i.DhX)(),x&&x.c(),(0,i.UF7)(t,I)},m(l,u){(0,i.$Tr)(l,t,u),S&&S.m(t,null),(0,i.R3I)(t,n),(0,i.yef)(r,t,null),(0,i.R3I)(t,o),_&&_.m(t,null),(0,i.R3I)(t,s),(0,i.yef)(a,t,null),(0,i.R3I)(t,c),x&&x.m(t,null),e[79](t),f=!0,m||(b=[(0,i.TVh)(d=y.Z.call(null,t,{ripple:e[11],unbounded:!1,addClass:e[38],removeClass:e[39],addStyle:e[40]})),(0,i.TVh)(h=g.ol.call(null,t,e[8])),(0,i.TVh)(p=e[34].call(null,t)),(0,i.oLt)(t,"SMUITextfieldLeadingIcon:mount",e[80]),(0,i.oLt)(t,"SMUITextfieldLeadingIcon:unmount",e[81]),(0,i.oLt)(t,"SMUITextfieldTrailingIcon:mount",e[82]),(0,i.oLt)(t,"SMUITextfieldTrailingIcon:unmount",e[83])],m=!0)},p(e,n){S&&S.p&&(!f||134217728&n[2])&&(0,i.kmG)(S,E,e,e[89],f?(0,i.u2N)(E,e[89],n,K):(0,i.VOJ)(e[89]),q);const o={};134217728&n[2]&&(o.$$scope={dirty:n,ctx:e}),r.$set(o),_&&_.p&&(!f||134217728&n[2])&&(0,i.kmG)(_,w,e,e[89],f?(0,i.u2N)(w,e[89],n,null):(0,i.VOJ)(e[89]),null);const s={};134217728&n[2]&&(s.$$scope={dirty:n,ctx:e}),a.$set(s),x&&x.p&&(!f||134217728&n[2])&&(0,i.kmG)(x,T,e,e[89],f?(0,i.u2N)(T,e[89],n,$):(0,i.VOJ)(e[89]),U),(0,i.UF7)(t,I=(0,i.LoY)(C,[(!f||33673730&n[0]|1024&n[1]&&l!==(l=(0,g.$o)({[e[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":e[12],"mdc-text-field--textarea":e[14],"mdc-text-field--filled":"filled"===e[15],"mdc-text-field--outlined":"outlined"===e[15],"smui-text-field--standard":"standard"===e[15]&&!e[14],"mdc-text-field--no-label":e[16]||!e[41].label,"mdc-text-field--with-leading-icon":e[41].leadingIcon,"mdc-text-field--with-trailing-icon":e[41].trailingIcon,"mdc-text-field--invalid":e[1],...e[25]})))&&{class:l},(!f||67109888&n[0]&&u!==(u=Object.entries(e[26]).map(Ae).concat([e[10]]).join(" ")))&&{style:u},2048&n[1]&&(0,g.De)(e[42],["input$","label$","ripple$","outline$","helperLine$"])])),d&&(0,i.sBU)(d.update)&&2048&n[0]&&d.update.call(null,{ripple:e[11],unbounded:!1,addClass:e[38],removeClass:e[39],addStyle:e[40]}),h&&(0,i.sBU)(h.update)&&256&n[0]&&h.update.call(null,e[8])},i(e){f||((0,i.Ui)(S,e),(0,i.Ui)(r.$$.fragment,e),(0,i.Ui)(_,e),(0,i.Ui)(a.$$.fragment,e),(0,i.Ui)(x,e),f=!0)},o(e){(0,i.etI)(S,e),(0,i.etI)(r.$$.fragment,e),(0,i.etI)(_,e),(0,i.etI)(a.$$.fragment,e),(0,i.etI)(x,e),f=!1},d(n){n&&(0,i.ogt)(t),S&&S.d(n),(0,i.vpE)(r),_&&_.d(n),(0,i.vpE)(a),x&&x.d(n),e[79](null),m=!1,(0,i.j7q)(b)}}}function se(e){let t,n,r,o,s,a,c,l,u,d,h,p,f,m,b,E,S,w,_,T=!e[14]&&"outlined"!==e[15]&&le(e),x=(e[14]||"outlined"===e[15])&&pe(e);o=new v.FW({props:{key:"SMUI:textfield:icon:leading",value:!0,$$slots:{default:[ve]},$$scope:{ctx:e}}});const C=e[50].default,I=(0,i.nuO)(C,e,e[89],null),k=[be,ye],M=[];function A(e,t){return e[14]&&"string"==typeof e[0]?0:1}c=A(e),l=M[c]=k[c](e),d=new v.FW({props:{key:"SMUI:textfield:icon:leading",value:!1,$$slots:{default:[Te]},$$scope:{ctx:e}}});let O=!e[14]&&"outlined"!==e[15]&&e[11]&&xe(e),R=[{class:p=(0,g.$o)({[e[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":e[12],"mdc-text-field--textarea":e[14],"mdc-text-field--filled":"filled"===e[15],"mdc-text-field--outlined":"outlined"===e[15],"smui-text-field--standard":"standard"===e[15]&&!e[14],"mdc-text-field--no-label":e[16]||null==e[17]&&!e[41].label,"mdc-text-field--label-floating":e[28]||null!=e[0]&&""!==e[0],"mdc-text-field--with-leading-icon":e[35](e[22])?e[41].leadingIcon:e[22],"mdc-text-field--with-trailing-icon":e[35](e[23])?e[41].trailingIcon:e[23],"mdc-text-field--with-internal-counter":e[14]&&e[41].internalCounter,"mdc-text-field--invalid":e[1],...e[25]})},{style:f=Object.entries(e[26]).map(Me).concat([e[10]]).join(" ")},{for:void 0},(0,g.De)(e[42],["input$","label$","ripple$","outline$","helperLine$"])],L={};for(let e=0;e<R.length;e+=1)L=(0,i.f0i)(L,R[e]);return{c(){t=(0,i.bGB)("label"),T&&T.c(),n=(0,i.DhX)(),x&&x.c(),r=(0,i.DhX)(),(0,i.YCL)(o.$$.fragment),s=(0,i.DhX)(),I&&I.c(),a=(0,i.DhX)(),l.c(),u=(0,i.DhX)(),(0,i.YCL)(d.$$.fragment),h=(0,i.DhX)(),O&&O.c(),(0,i.UF7)(t,L)},m(l,p){(0,i.$Tr)(l,t,p),T&&T.m(t,null),(0,i.R3I)(t,n),x&&x.m(t,null),(0,i.R3I)(t,r),(0,i.yef)(o,t,null),(0,i.R3I)(t,s),I&&I.m(t,null),(0,i.R3I)(t,a),M[c].m(t,null),(0,i.R3I)(t,u),(0,i.yef)(d,t,null),(0,i.R3I)(t,h),O&&O.m(t,null),e[72](t),S=!0,w||(_=[(0,i.TVh)(m=y.Z.call(null,t,{ripple:!e[14]&&"filled"===e[15],unbounded:!1,addClass:e[38],removeClass:e[39],addStyle:e[40],eventTarget:e[33],activeTarget:e[33],initPromise:e[37]})),(0,i.TVh)(b=g.ol.call(null,t,e[8])),(0,i.TVh)(E=e[34].call(null,t)),(0,i.oLt)(t,"SMUITextfieldLeadingIcon:mount",e[73]),(0,i.oLt)(t,"SMUITextfieldLeadingIcon:unmount",e[74]),(0,i.oLt)(t,"SMUITextfieldTrailingIcon:mount",e[75]),(0,i.oLt)(t,"SMUITextfieldTrailingIcon:unmount",e[76]),(0,i.oLt)(t,"SMUITextfieldCharacterCounter:mount",e[77]),(0,i.oLt)(t,"SMUITextfieldCharacterCounter:unmount",e[78])],w=!0)},p(e,s){e[14]||"outlined"===e[15]?T&&((0,i.dvw)(),(0,i.etI)(T,1,1,(()=>{T=null})),(0,i.gbL)()):T?(T.p(e,s),49152&s[0]&&(0,i.Ui)(T,1)):(T=le(e),T.c(),(0,i.Ui)(T,1),T.m(t,n)),e[14]||"outlined"===e[15]?x?(x.p(e,s),49152&s[0]&&(0,i.Ui)(x,1)):(x=pe(e),x.c(),(0,i.Ui)(x,1),x.m(t,r)):x&&((0,i.dvw)(),(0,i.etI)(x,1,1,(()=>{x=null})),(0,i.gbL)());const a={};134217728&s[2]&&(a.$$scope={dirty:s,ctx:e}),o.$set(a),I&&I.p&&(!S||134217728&s[2])&&(0,i.kmG)(I,C,e,e[89],S?(0,i.u2N)(C,e[89],s,null):(0,i.VOJ)(e[89]),null);let h=c;c=A(e),c===h?M[c].p(e,s):((0,i.dvw)(),(0,i.etI)(M[h],1,1,(()=>{M[h]=null})),(0,i.gbL)(),l=M[c],l?l.p(e,s):(l=M[c]=k[c](e),l.c()),(0,i.Ui)(l,1),l.m(t,u));const v={};134217728&s[2]&&(v.$$scope={dirty:s,ctx:e}),d.$set(v),!e[14]&&"outlined"!==e[15]&&e[11]?O?(O.p(e,s),51200&s[0]&&(0,i.Ui)(O,1)):(O=xe(e),O.c(),(0,i.Ui)(O,1),O.m(t,null)):O&&((0,i.dvw)(),(0,i.etI)(O,1,1,(()=>{O=null})),(0,i.gbL)()),(0,i.UF7)(t,L=(0,i.LoY)(R,[(!S||314823171&s[0]|1024&s[1]&&p!==(p=(0,g.$o)({[e[9]]:!0,"mdc-text-field":!0,"mdc-text-field--disabled":e[12],"mdc-text-field--textarea":e[14],"mdc-text-field--filled":"filled"===e[15],"mdc-text-field--outlined":"outlined"===e[15],"smui-text-field--standard":"standard"===e[15]&&!e[14],"mdc-text-field--no-label":e[16]||null==e[17]&&!e[41].label,"mdc-text-field--label-floating":e[28]||null!=e[0]&&""!==e[0],"mdc-text-field--with-leading-icon":e[35](e[22])?e[41].leadingIcon:e[22],"mdc-text-field--with-trailing-icon":e[35](e[23])?e[41].trailingIcon:e[23],"mdc-text-field--with-internal-counter":e[14]&&e[41].internalCounter,"mdc-text-field--invalid":e[1],...e[25]})))&&{class:p},(!S||67109888&s[0]&&f!==(f=Object.entries(e[26]).map(Me).concat([e[10]]).join(" ")))&&{style:f},{for:void 0},2048&s[1]&&(0,g.De)(e[42],["input$","label$","ripple$","outline$","helperLine$"])])),m&&(0,i.sBU)(m.update)&&49152&s[0]|4&s[1]&&m.update.call(null,{ripple:!e[14]&&"filled"===e[15],unbounded:!1,addClass:e[38],removeClass:e[39],addStyle:e[40],eventTarget:e[33],activeTarget:e[33],initPromise:e[37]}),b&&(0,i.sBU)(b.update)&&256&s[0]&&b.update.call(null,e[8])},i(e){S||((0,i.Ui)(T),(0,i.Ui)(x),(0,i.Ui)(o.$$.fragment,e),(0,i.Ui)(I,e),(0,i.Ui)(l),(0,i.Ui)(d.$$.fragment,e),(0,i.Ui)(O),S=!0)},o(e){(0,i.etI)(T),(0,i.etI)(x),(0,i.etI)(o.$$.fragment,e),(0,i.etI)(I,e),(0,i.etI)(l),(0,i.etI)(d.$$.fragment,e),(0,i.etI)(O),S=!1},d(n){n&&(0,i.ogt)(t),T&&T.d(),x&&x.d(),(0,i.vpE)(o),I&&I.d(n),M[c].d(),(0,i.vpE)(d),O&&O.d(),e[72](null),w=!1,(0,i.j7q)(_)}}}function ae(e){let t;const n=e[50].leadingIcon,r=(0,i.nuO)(n,e,e[89],H);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||134217728&o[2])&&(0,i.kmG)(r,n,e,e[89],t?(0,i.u2N)(n,e[89],o,j):(0,i.VOJ)(e[89]),H)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function ce(e){let t;const n=e[50].trailingIcon,r=(0,i.nuO)(n,e,e[89],F);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||134217728&o[2])&&(0,i.kmG)(r,n,e,e[89],t?(0,i.u2N)(n,e[89],o,B):(0,i.VOJ)(e[89]),F)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function le(e){let t,n,r,o="filled"===e[15]&&ue(),s=!e[16]&&(null!=e[17]||e[41].label)&&de(e);return{c(){o&&o.c(),t=(0,i.DhX)(),s&&s.c(),n=(0,i.cSb)()},m(e,a){o&&o.m(e,a),(0,i.$Tr)(e,t,a),s&&s.m(e,a),(0,i.$Tr)(e,n,a),r=!0},p(e,r){"filled"===e[15]?o||(o=ue(),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),e[16]||null==e[17]&&!e[41].label?s&&((0,i.dvw)(),(0,i.etI)(s,1,1,(()=>{s=null})),(0,i.gbL)()):s?(s.p(e,r),196608&r[0]|1024&r[1]&&(0,i.Ui)(s,1)):(s=de(e),s.c(),(0,i.Ui)(s,1),s.m(n.parentNode,n))},i(e){r||((0,i.Ui)(s),r=!0)},o(e){(0,i.etI)(s),r=!1},d(e){o&&o.d(e),e&&(0,i.ogt)(t),s&&s.d(e),e&&(0,i.ogt)(n)}}}function ue(e){let t;return{c(){t=(0,i.bGB)("span"),(0,i.Ljt)(t,"class","mdc-text-field__ripple")},m(e,n){(0,i.$Tr)(e,t,n)},d(e){e&&(0,i.ogt)(t)}}}function de(e){let t,n;const r=[{floatAbove:e[28]||null!=e[0]&&""!==e[0]},{required:e[13]},{wrapped:!0},(0,g.bO)(e[42],"label$")];let o={$$slots:{default:[he]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=(0,i.f0i)(o,r[e]);return t=new b.Z({props:o}),e[51](t),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const o=268443649&n[0]|2048&n[1]?(0,i.LoY)(r,[268435457&n[0]&&{floatAbove:e[28]||null!=e[0]&&""!==e[0]},8192&n[0]&&{required:e[13]},r[2],2048&n[1]&&(0,i.gCg)((0,g.bO)(e[42],"label$"))]):{};131072&n[0]|134217728&n[2]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(n){e[51](null),(0,i.vpE)(t,n)}}}function he(e){let t,n,r=(null==e[17]?"":e[17])+"";const o=e[50].label,s=(0,i.nuO)(o,e,e[89],re);return{c(){t=(0,i.fLW)(r),s&&s.c()},m(e,r){(0,i.$Tr)(e,t,r),s&&s.m(e,r),n=!0},p(e,a){(!n||131072&a[0])&&r!==(r=(null==e[17]?"":e[17])+"")&&(0,i.rTO)(t,r),s&&s.p&&(!n||134217728&a[2])&&(0,i.kmG)(s,o,e,e[89],n?(0,i.u2N)(o,e[89],a,ie):(0,i.VOJ)(e[89]),re)},i(e){n||((0,i.Ui)(s,e),n=!0)},o(e){(0,i.etI)(s,e),n=!1},d(e){e&&(0,i.ogt)(t),s&&s.d(e)}}}function pe(e){let t,n;const r=[{noLabel:e[16]||null==e[17]&&!e[41].label},(0,g.bO)(e[42],"outline$")];let o={$$slots:{default:[ge]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=(0,i.f0i)(o,r[e]);return t=new S.Z({props:o}),e[53](t),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const o=196608&n[0]|3072&n[1]?(0,i.LoY)(r,[196608&n[0]|1024&n[1]&&{noLabel:e[16]||null==e[17]&&!e[41].label},2048&n[1]&&(0,i.gCg)((0,g.bO)(e[42],"outline$"))]):{};268640289&n[0]|3072&n[1]|134217728&n[2]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(n){e[53](null),(0,i.vpE)(t,n)}}}function fe(e){let t,n;const r=[{floatAbove:e[28]||null!=e[0]&&""!==e[0]},{required:e[13]},{wrapped:!0},(0,g.bO)(e[42],"label$")];let o={$$slots:{default:[me]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=(0,i.f0i)(o,r[e]);return t=new b.Z({props:o}),e[52](t),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const o=268443649&n[0]|2048&n[1]?(0,i.LoY)(r,[268435457&n[0]&&{floatAbove:e[28]||null!=e[0]&&""!==e[0]},8192&n[0]&&{required:e[13]},r[2],2048&n[1]&&(0,i.gCg)((0,g.bO)(e[42],"label$"))]):{};131072&n[0]|134217728&n[2]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(n){e[52](null),(0,i.vpE)(t,n)}}}function me(e){let t,n,r=(null==e[17]?"":e[17])+"";const o=e[50].label,s=(0,i.nuO)(o,e,e[89],ne);return{c(){t=(0,i.fLW)(r),s&&s.c()},m(e,r){(0,i.$Tr)(e,t,r),s&&s.m(e,r),n=!0},p(e,a){(!n||131072&a[0])&&r!==(r=(null==e[17]?"":e[17])+"")&&(0,i.rTO)(t,r),s&&s.p&&(!n||134217728&a[2])&&(0,i.kmG)(s,o,e,e[89],n?(0,i.u2N)(o,e[89],a,te):(0,i.VOJ)(e[89]),ne)},i(e){n||((0,i.Ui)(s,e),n=!0)},o(e){(0,i.etI)(s,e),n=!1},d(e){e&&(0,i.ogt)(t),s&&s.d(e)}}}function ge(e){let t,n,r=!e[16]&&(null!=e[17]||e[41].label)&&fe(e);return{c(){r&&r.c(),t=(0,i.cSb)()},m(e,o){r&&r.m(e,o),(0,i.$Tr)(e,t,o),n=!0},p(e,n){e[16]||null==e[17]&&!e[41].label?r&&((0,i.dvw)(),(0,i.etI)(r,1,1,(()=>{r=null})),(0,i.gbL)()):r?(r.p(e,n),196608&n[0]|1024&n[1]&&(0,i.Ui)(r,1)):(r=fe(e),r.c(),(0,i.Ui)(r,1),r.m(t.parentNode,t))},i(e){n||((0,i.Ui)(r),n=!0)},o(e){(0,i.etI)(r),n=!1},d(e){r&&r.d(e),e&&(0,i.ogt)(t)}}}function ve(e){let t;const n=e[50].leadingIcon,r=(0,i.nuO)(n,e,e[89],ee);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||134217728&o[2])&&(0,i.kmG)(r,n,e,e[89],t?(0,i.u2N)(n,e[89],o,Z):(0,i.VOJ)(e[89]),ee)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function ye(e){let t,n,r,o,s,a,c,l,u,d;const h=e[50].prefix,p=(0,i.nuO)(h,e,e[89],X);let f=null!=e[20]&&Ee(e);const m=[{type:e[18]},{disabled:e[12]},{required:e[13]},{updateInvalid:e[19]},{"aria-controls":e[27]},{"aria-describedby":e[27]},e[16]&&null!=e[17]?{placeholder:e[17]}:{},(0,g.bO)(e[42],"input$")];function v(t){e[63](t)}function y(t){e[64](t)}function b(t){e[65](t)}function E(t){e[66](t)}let S={};for(let e=0;e<m.length;e+=1)S=(0,i.f0i)(S,m[e]);void 0!==e[0]&&(S.value=e[0]),void 0!==e[3]&&(S.files=e[3]),void 0!==e[4]&&(S.dirty=e[4]),void 0!==e[1]&&(S.invalid=e[1]),r=new A({props:S}),e[62](r),i.VnY.push((()=>(0,i.akz)(r,"value",v))),i.VnY.push((()=>(0,i.akz)(r,"files",y))),i.VnY.push((()=>(0,i.akz)(r,"dirty",b))),i.VnY.push((()=>(0,i.akz)(r,"invalid",E))),r.$on("blur",e[67]),r.$on("focus",e[68]),r.$on("blur",e[69]),r.$on("focus",e[70]);let w=null!=e[21]&&we(e);const _=e[50].suffix,T=(0,i.nuO)(_,e,e[89],z);return{c(){p&&p.c(),t=(0,i.DhX)(),f&&f.c(),n=(0,i.DhX)(),(0,i.YCL)(r.$$.fragment),l=(0,i.DhX)(),w&&w.c(),u=(0,i.DhX)(),T&&T.c()},m(e,o){p&&p.m(e,o),(0,i.$Tr)(e,t,o),f&&f.m(e,o),(0,i.$Tr)(e,n,o),(0,i.yef)(r,e,o),(0,i.$Tr)(e,l,o),w&&w.m(e,o),(0,i.$Tr)(e,u,o),T&&T.m(e,o),d=!0},p(e,t){p&&p.p&&(!d||134217728&t[2])&&(0,i.kmG)(p,h,e,e[89],d?(0,i.u2N)(h,e[89],t,Y):(0,i.VOJ)(e[89]),X),null!=e[20]?f?(f.p(e,t),1048576&t[0]&&(0,i.Ui)(f,1)):(f=Ee(e),f.c(),(0,i.Ui)(f,1),f.m(n.parentNode,n)):f&&((0,i.dvw)(),(0,i.etI)(f,1,1,(()=>{f=null})),(0,i.gbL)());const l=135213056&t[0]|2048&t[1]?(0,i.LoY)(m,[262144&t[0]&&{type:e[18]},4096&t[0]&&{disabled:e[12]},8192&t[0]&&{required:e[13]},524288&t[0]&&{updateInvalid:e[19]},134217728&t[0]&&{"aria-controls":e[27]},134217728&t[0]&&{"aria-describedby":e[27]},196608&t[0]&&(0,i.gCg)(e[16]&&null!=e[17]?{placeholder:e[17]}:{}),2048&t[1]&&(0,i.gCg)((0,g.bO)(e[42],"input$"))]):{};!o&&1&t[0]&&(o=!0,l.value=e[0],(0,i.hjT)((()=>o=!1))),!s&&8&t[0]&&(s=!0,l.files=e[3],(0,i.hjT)((()=>s=!1))),!a&&16&t[0]&&(a=!0,l.dirty=e[4],(0,i.hjT)((()=>a=!1))),!c&&2&t[0]&&(c=!0,l.invalid=e[1],(0,i.hjT)((()=>c=!1))),r.$set(l),null!=e[21]?w?(w.p(e,t),2097152&t[0]&&(0,i.Ui)(w,1)):(w=we(e),w.c(),(0,i.Ui)(w,1),w.m(u.parentNode,u)):w&&((0,i.dvw)(),(0,i.etI)(w,1,1,(()=>{w=null})),(0,i.gbL)()),T&&T.p&&(!d||134217728&t[2])&&(0,i.kmG)(T,_,e,e[89],d?(0,i.u2N)(_,e[89],t,W):(0,i.VOJ)(e[89]),z)},i(e){d||((0,i.Ui)(p,e),(0,i.Ui)(f),(0,i.Ui)(r.$$.fragment,e),(0,i.Ui)(w),(0,i.Ui)(T,e),d=!0)},o(e){(0,i.etI)(p,e),(0,i.etI)(f),(0,i.etI)(r.$$.fragment,e),(0,i.etI)(w),(0,i.etI)(T,e),d=!1},d(o){p&&p.d(o),o&&(0,i.ogt)(t),f&&f.d(o),o&&(0,i.ogt)(n),e[62](null),(0,i.vpE)(r,o),o&&(0,i.ogt)(l),w&&w.d(o),o&&(0,i.ogt)(u),T&&T.d(o)}}}function be(e){let t,n,r,o,s,a,c,l;const u=[{disabled:e[12]},{required:e[13]},{updateInvalid:e[19]},{"aria-controls":e[27]},{"aria-describedby":e[27]},(0,g.bO)(e[42],"input$")];function d(t){e[55](t)}function h(t){e[56](t)}function p(t){e[57](t)}let f={};for(let e=0;e<u.length;e+=1)f=(0,i.f0i)(f,u[e]);void 0!==e[0]&&(f.value=e[0]),void 0!==e[4]&&(f.dirty=e[4]),void 0!==e[1]&&(f.invalid=e[1]),n=new D({props:f}),e[54](n),i.VnY.push((()=>(0,i.akz)(n,"value",d))),i.VnY.push((()=>(0,i.akz)(n,"dirty",h))),i.VnY.push((()=>(0,i.akz)(n,"invalid",p))),n.$on("blur",e[58]),n.$on("focus",e[59]),n.$on("blur",e[60]),n.$on("focus",e[61]);const m=e[50].internalCounter,v=(0,i.nuO)(m,e,e[89],Q);return{c(){t=(0,i.bGB)("span"),(0,i.YCL)(n.$$.fragment),a=(0,i.DhX)(),v&&v.c(),(0,i.Ljt)(t,"class",c=(0,g.$o)({"mdc-text-field__resizer":!("input$resizable"in e[42])||e[42].input$resizable}))},m(e,r){(0,i.$Tr)(e,t,r),(0,i.yef)(n,t,null),(0,i.R3I)(t,a),v&&v.m(t,null),l=!0},p(e,a){const d=134754304&a[0]|2048&a[1]?(0,i.LoY)(u,[4096&a[0]&&{disabled:e[12]},8192&a[0]&&{required:e[13]},524288&a[0]&&{updateInvalid:e[19]},134217728&a[0]&&{"aria-controls":e[27]},134217728&a[0]&&{"aria-describedby":e[27]},2048&a[1]&&(0,i.gCg)((0,g.bO)(e[42],"input$"))]):{};!r&&1&a[0]&&(r=!0,d.value=e[0],(0,i.hjT)((()=>r=!1))),!o&&16&a[0]&&(o=!0,d.dirty=e[4],(0,i.hjT)((()=>o=!1))),!s&&2&a[0]&&(s=!0,d.invalid=e[1],(0,i.hjT)((()=>s=!1))),n.$set(d),v&&v.p&&(!l||134217728&a[2])&&(0,i.kmG)(v,m,e,e[89],l?(0,i.u2N)(m,e[89],a,J):(0,i.VOJ)(e[89]),Q),(!l||2048&a[1]&&c!==(c=(0,g.$o)({"mdc-text-field__resizer":!("input$resizable"in e[42])||e[42].input$resizable})))&&(0,i.Ljt)(t,"class",c)},i(e){l||((0,i.Ui)(n.$$.fragment,e),(0,i.Ui)(v,e),l=!0)},o(e){(0,i.etI)(n.$$.fragment,e),(0,i.etI)(v,e),l=!1},d(r){r&&(0,i.ogt)(t),e[54](null),(0,i.vpE)(n),v&&v.d(r)}}}function Ee(e){let t,n;return t=new x({props:{$$slots:{default:[Se]},$$scope:{ctx:e}}}),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const i={};1048576&n[0]|134217728&n[2]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(e){(0,i.vpE)(t,e)}}}function Se(e){let t;return{c(){t=(0,i.fLW)(e[20])},m(e,n){(0,i.$Tr)(e,t,n)},p(e,n){1048576&n[0]&&(0,i.rTO)(t,e[20])},d(e){e&&(0,i.ogt)(t)}}}function we(e){let t,n;return t=new C({props:{$$slots:{default:[_e]},$$scope:{ctx:e}}}),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const i={};2097152&n[0]|134217728&n[2]&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(e){(0,i.vpE)(t,e)}}}function _e(e){let t;return{c(){t=(0,i.fLW)(e[21])},m(e,n){(0,i.$Tr)(e,t,n)},p(e,n){2097152&n[0]&&(0,i.rTO)(t,e[21])},d(e){e&&(0,i.ogt)(t)}}}function Te(e){let t;const n=e[50].trailingIcon,r=(0,i.nuO)(n,e,e[89],G);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||134217728&o[2])&&(0,i.kmG)(r,n,e,e[89],t?(0,i.u2N)(n,e[89],o,V):(0,i.VOJ)(e[89]),G)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function xe(e){let t,n;const r=[(0,g.bO)(e[42],"ripple$")];let o={};for(let e=0;e<r.length;e+=1)o=(0,i.f0i)(o,r[e]);return t=new E.Z({props:o}),e[71](t),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const o=2048&n[1]?(0,i.LoY)(r,[(0,i.gCg)((0,g.bO)(e[42],"ripple$"))]):{};t.$set(o)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(n){e[71](null),(0,i.vpE)(t,n)}}}function Ce(e){let t,n;const r=[(0,g.bO)(e[42],"helperLine$")];let o={$$slots:{default:[Ie]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=(0,i.f0i)(o,r[e]);return t=new T({props:o}),t.$on("SMUITextfieldHelperText:id",e[84]),t.$on("SMUITextfieldHelperText:mount",e[85]),t.$on("SMUITextfieldHelperText:unmount",e[86]),t.$on("SMUITextfieldCharacterCounter:mount",e[87]),t.$on("SMUITextfieldCharacterCounter:unmount",e[88]),{c(){(0,i.YCL)(t.$$.fragment)},m(e,r){(0,i.yef)(t,e,r),n=!0},p(e,n){const o=2048&n[1]?(0,i.LoY)(r,[(0,i.gCg)((0,g.bO)(e[42],"helperLine$"))]):{};134217728&n[2]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.etI)(t.$$.fragment,e),n=!1},d(e){(0,i.vpE)(t,e)}}}function Ie(e){let t;const n=e[50].helper,r=(0,i.nuO)(n,e,e[89],P);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||134217728&o[2])&&(0,i.kmG)(r,n,e,e[89],t?(0,i.u2N)(n,e[89],o,N):(0,i.VOJ)(e[89]),P)},i(e){t||((0,i.Ui)(r,e),t=!0)},o(e){(0,i.etI)(r,e),t=!1},d(e){r&&r.d(e)}}}function ke(e){let t,n,r,o,s;const a=[se,oe],c=[];t=function(e,t){return e[36]?0:1}(e),n=c[t]=a[t](e);let l=e[41].helper&&Ce(e);return{c(){n.c(),r=(0,i.DhX)(),l&&l.c(),o=(0,i.cSb)()},m(e,n){c[t].m(e,n),(0,i.$Tr)(e,r,n),l&&l.m(e,n),(0,i.$Tr)(e,o,n),s=!0},p(e,t){n.p(e,t),e[41].helper?l?(l.p(e,t),1024&t[1]&&(0,i.Ui)(l,1)):(l=Ce(e),l.c(),(0,i.Ui)(l,1),l.m(o.parentNode,o)):l&&((0,i.dvw)(),(0,i.etI)(l,1,1,(()=>{l=null})),(0,i.gbL)())},i(e){s||((0,i.Ui)(n),(0,i.Ui)(l),s=!0)},o(e){(0,i.etI)(n),(0,i.etI)(l),s=!1},d(e){c[t].d(e),e&&(0,i.ogt)(r),l&&l.d(e),e&&(0,i.ogt)(o)}}}const Me=([e,t])=>`${e}: ${t};`,Ae=([e,t])=>`${e}: ${t};`;function Oe(e,t,n){let r;const o=["use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","focus","layout","getElement"];let s=(0,i.q2N)(t,o),{$$slots:a={},$$scope:c}=t;const l=(0,i.XGm)(a),{applyPassive:u}=f,d=(0,g.PD)((0,i.w2L)());let h=()=>{};function v(e){return e===h}let{use:y=[]}=t,{class:b=""}=t,{style:E=""}=t,{ripple:S=!0}=t,{disabled:w=!1}=t,{required:_=!1}=t,{textarea:T=!1}=t,{variant:x=(T?"outlined":"standard")}=t,{noLabel:C=!1}=t,{label:I}=t,{type:k="text"}=t,{value:M=h}=t,{files:A=h}=t;const O=!v(M)||!v(A);v(M)&&(M=void 0),v(A)&&(A=null);let{invalid:R=h}=t,{updateInvalid:L=v(R)}=t;v(R)&&(R=!1);let D,N,P,$,U,B,F,j,H,{dirty:K=!1}=t,{prefix:q}=t,{suffix:V}=t,{validateOnValueChange:G=L}=t,{useNativeValidation:W=L}=t,{withLeadingIcon:z=h}=t,{withTrailingIcon:Y=h}=t,{input:X}=t,{floatingLabel:J}=t,{lineRipple:Q}=t,{notchedOutline:Z}=t,ee={},te={},ne=!1,ie=(0,m.fw)("SMUI:addLayoutListener"),re=new Promise((e=>U=e)),oe=M;function se(e){var t;return e in ee?null!==(t=ee[e])&&void 0!==t?t:null:ue().classList.contains(e)}function ae(e){ee[e]||n(25,ee[e]=!0,ee)}function ce(e){e in ee&&!ee[e]||n(25,ee[e]=!1,ee)}function le(){if(N){const e=N.shouldFloat;N.notchOutline(e)}}function ue(){return D}return ie&&($=ie(le)),(0,m.H3)((()=>{if(n(48,N=new p({addClass:ae,removeClass:ce,hasClass:se,registerTextFieldInteractionHandler:(e,t)=>ue().addEventListener(e,t),deregisterTextFieldInteractionHandler:(e,t)=>ue().removeEventListener(e,t),registerValidationAttributeChangeHandler:e=>{const t=new MutationObserver((t=>{W&&e((e=>e.map((e=>e.attributeName)).filter((e=>e)))(t))}));return X&&t.observe(X.getElement(),{attributes:!0}),t},deregisterValidationAttributeChangeHandler:e=>{e.disconnect()},getNativeInput:()=>{var e;return null!==(e=null==X?void 0:X.getElement())&&void 0!==e?e:null},setInputAttr:(e,t)=>{null==X||X.addAttr(e,t)},removeInputAttr:e=>{null==X||X.removeAttr(e)},isFocused:()=>document.activeElement===(null==X?void 0:X.getElement()),registerInputInteractionHandler:(e,t)=>{null==X||X.getElement().addEventListener(e,t,u())},deregisterInputInteractionHandler:(e,t)=>{null==X||X.getElement().removeEventListener(e,t,u())},floatLabel:e=>J&&J.float(e),getLabelWidth:()=>J?J.getWidth():0,hasLabel:()=>!!J,shakeLabel:e=>J&&J.shake(e),setLabelRequired:e=>J&&J.setRequired(e),activateLineRipple:()=>Q&&Q.activate(),deactivateLineRipple:()=>Q&&Q.deactivate(),setLineRippleTransformOrigin:e=>Q&&Q.setRippleCenter(e),closeOutline:()=>Z&&Z.closeNotch(),hasOutline:()=>!!Z,notchOutline:e=>Z&&Z.notch(e)},{get helperText(){return j},get characterCounter(){return H},get leadingIcon(){return B},get trailingIcon(){return F}})),O){if(null==X)throw new Error("SMUI Textfield initialized without Input component.");N.init()}else(0,m.Ky)().then((()=>{if(null==X)throw new Error("SMUI Textfield initialized without Input component.");N.init()}));return U(),()=>{N.destroy()}})),(0,m.ev)((()=>{$&&$()})),e.$$set=e=>{t=(0,i.f0i)((0,i.f0i)({},t),(0,i.Jvk)(e)),n(42,s=(0,i.q2N)(t,o)),"use"in e&&n(8,y=e.use),"class"in e&&n(9,b=e.class),"style"in e&&n(10,E=e.style),"ripple"in e&&n(11,S=e.ripple),"disabled"in e&&n(12,w=e.disabled),"required"in e&&n(13,_=e.required),"textarea"in e&&n(14,T=e.textarea),"variant"in e&&n(15,x=e.variant),"noLabel"in e&&n(16,C=e.noLabel),"label"in e&&n(17,I=e.label),"type"in e&&n(18,k=e.type),"value"in e&&n(0,M=e.value),"files"in e&&n(3,A=e.files),"invalid"in e&&n(1,R=e.invalid),"updateInvalid"in e&&n(19,L=e.updateInvalid),"dirty"in e&&n(4,K=e.dirty),"prefix"in e&&n(20,q=e.prefix),"suffix"in e&&n(21,V=e.suffix),"validateOnValueChange"in e&&n(43,G=e.validateOnValueChange),"useNativeValidation"in e&&n(44,W=e.useNativeValidation),"withLeadingIcon"in e&&n(22,z=e.withLeadingIcon),"withTrailingIcon"in e&&n(23,Y=e.withTrailingIcon),"input"in e&&n(2,X=e.input),"floatingLabel"in e&&n(5,J=e.floatingLabel),"lineRipple"in e&&n(6,Q=e.lineRipple),"notchedOutline"in e&&n(7,Z=e.notchedOutline),"$$scope"in e&&n(89,c=e.$$scope)},e.$$.update=()=>{if(4&e.$$.dirty[0]&&n(33,r=X&&X.getElement()),524290&e.$$.dirty[0]|131072&e.$$.dirty[1]&&N&&N.isValid()!==!R&&(L?n(1,R=!N.isValid()):N.setValid(!R)),135168&e.$$.dirty[1]&&N&&N.getValidateOnValueChange()!==G&&N.setValidateOnValueChange(!v(G)&&G),139264&e.$$.dirty[1]&&N&&N.setUseNativeValidation(!!v(W)||W),4096&e.$$.dirty[0]|131072&e.$$.dirty[1]&&N&&N.setDisabled(w),1&e.$$.dirty[0]|393216&e.$$.dirty[1]&&N&&O&&oe!==M){n(49,oe=M);const e=`${M}`;N.getValue()!==e&&N.setValue(e)}},[M,R,X,A,K,J,Q,Z,y,b,E,S,w,_,T,x,C,I,k,L,q,V,z,Y,D,ee,te,P,ne,B,F,j,H,r,d,v,O,re,ae,ce,function(e,t){te[e]!=t&&(""===t||null==t?(delete te[e],n(26,te)):n(26,te[e]=t,te))},l,s,G,W,function(){null==X||X.focus()},le,ue,N,oe,a,function(e){i.VnY[e?"unshift":"push"]((()=>{J=e,n(5,J)}))},function(e){i.VnY[e?"unshift":"push"]((()=>{J=e,n(5,J)}))},function(e){i.VnY[e?"unshift":"push"]((()=>{Z=e,n(7,Z)}))},function(e){i.VnY[e?"unshift":"push"]((()=>{X=e,n(2,X)}))},function(e){M=e,n(0,M)},function(e){K=e,n(4,K)},function(e){R=e,n(1,R),n(48,N),n(19,L)},()=>n(28,ne=!1),()=>n(28,ne=!0),e=>(0,g.WI)(D,"blur",e),e=>(0,g.WI)(D,"focus",e),function(e){i.VnY[e?"unshift":"push"]((()=>{X=e,n(2,X)}))},function(e){M=e,n(0,M)},function(e){A=e,n(3,A)},function(e){K=e,n(4,K)},function(e){R=e,n(1,R),n(48,N),n(19,L)},()=>n(28,ne=!1),()=>n(28,ne=!0),e=>(0,g.WI)(D,"blur",e),e=>(0,g.WI)(D,"focus",e),function(e){i.VnY[e?"unshift":"push"]((()=>{Q=e,n(6,Q)}))},function(e){i.VnY[e?"unshift":"push"]((()=>{D=e,n(24,D)}))},e=>n(29,B=e.detail),()=>n(29,B=void 0),e=>n(30,F=e.detail),()=>n(30,F=void 0),e=>n(32,H=e.detail),()=>n(32,H=void 0),function(e){i.VnY[e?"unshift":"push"]((()=>{D=e,n(24,D)}))},e=>n(29,B=e.detail),()=>n(29,B=void 0),e=>n(30,F=e.detail),()=>n(30,F=void 0),e=>n(27,P=e.detail),e=>n(31,j=e.detail),()=>{n(27,P=void 0),n(31,j=void 0)},e=>n(32,H=e.detail),()=>n(32,H=void 0),c]}class Re extends i.f_C{constructor(e){super(),(0,i.S1n)(this,e,Oe,ke,i.N8,{use:8,class:9,style:10,ripple:11,disabled:12,required:13,textarea:14,variant:15,noLabel:16,label:17,type:18,value:0,files:3,invalid:1,updateInvalid:19,dirty:4,prefix:20,suffix:21,validateOnValueChange:43,useNativeValidation:44,withLeadingIcon:22,withTrailingIcon:23,input:2,floatingLabel:5,lineRipple:6,notchedOutline:7,focus:45,layout:46,getElement:47},null,[-1,-1,-1,-1])}get focus(){return this.$$.ctx[45]}get layout(){return this.$$.ctx[46]}get getElement(){return this.$$.ctx[47]}}const Le=Re},44300:(e,t,n)=>{"use strict";n.d(t,{GE:()=>i.yRu,_e:()=>r});var i=n(24234);function r(e){const t=e-1;return t*t*t+1}},68568:(e,t,n)=>{"use strict";n.d(t,{gx:()=>i.gx3,x:()=>i.xa3,fw:()=>i.fwp,ev:()=>i.evW,H3:()=>i.H3E,v:()=>i.vax,Ky:()=>i.KyG});var i=n(24234)},24234:(e,t,n)=>{"use strict";function i(){}n.d(t,{f_C:()=>ot,TVh:()=>k,hjT:()=>Ae,P$F:()=>Me,orW:()=>de,gx3:()=>me,R3I:()=>P,f0i:()=>o,Ljt:()=>X,akz:()=>et,VnY:()=>we,cKT:()=>Ee,gbL:()=>je,FIv:()=>v,q2N:()=>T,XGm:()=>x,xa3:()=>ve,wVP:()=>le,uPJ:()=>We,YCL:()=>tt,HCz:()=>Ve,eZl:()=>Ge,nuO:()=>y,vpE:()=>it,RMB:()=>j,ogt:()=>F,bGB:()=>H,cSb:()=>G,Jvk:()=>_,g3Q:()=>Ye,uYD:()=>ue,fwp:()=>be,VOJ:()=>w,w2L:()=>pe,u2N:()=>E,gCg:()=>Qe,LoY:()=>Je,$XI:()=>g,lig:()=>ze,dvw:()=>Fe,yRu:()=>r,S1n:()=>rt,$Tr:()=>B,sBU:()=>l,oLt:()=>W,VXY:()=>D,yef:()=>nt,ZTd:()=>i,AqN:()=>p,zOc:()=>A,H1I:()=>C,evW:()=>ge,H3E:()=>fe,AT7:()=>z,j7q:()=>c,N8:()=>u,vax:()=>ye,UF7:()=>J,rTO:()=>Z,BmG:()=>ee,fxP:()=>I,czc:()=>te,NVz:()=>Q,DhX:()=>V,Jn4:()=>h,XET:()=>Y,LdU:()=>m,bi5:()=>K,fLW:()=>q,KyG:()=>ke,VHj:()=>ne,Ui:()=>He,etI:()=>Ke,GQg:()=>Xe,kmG:()=>S}),n(25108);const r=e=>e;function o(e,t){for(const n in t)e[n]=t[n];return e}function s(e){return e()}function a(){return Object.create(null)}function c(e){e.forEach(s)}function l(e){return"function"==typeof e}function u(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let d;function h(e,t){return d||(d=document.createElement("a")),d.href=t,e===d.href}function p(e,t){return e!=e?t==t:e!==t}function f(e){return 0===Object.keys(e).length}function m(e,...t){if(null==e)return i;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function g(e){let t;return m(e,(e=>t=e))(),t}function v(e,t,n){e.$$.on_destroy.push(m(t,n))}function y(e,t,n,i){if(e){const r=b(e,t,n,i);return e[0](r)}}function b(e,t,n,i){return e[1]&&i?o(n.ctx.slice(),e[1](i(t))):n.ctx}function E(e,t,n,i){if(e[2]&&i){const r=e[2](i(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|r[i];return e}return t.dirty|r}return t.dirty}function S(e,t,n,i,r,o){if(r){const s=b(t,n,i,o);e.p(s,r)}}function w(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function _(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function T(e,t){const n={};t=new Set(t);for(const i in e)t.has(i)||"$"===i[0]||(n[i]=e[i]);return n}function x(e){const t={};for(const n in e)t[n]=!0;return t}function C(e){return null==e?"":e}function I(e,t,n){return e.set(n),t}function k(e){return e&&l(e.destroy)?e.destroy:i}const M="undefined"!=typeof window;let A=M?()=>window.performance.now():()=>Date.now(),O=M?e=>requestAnimationFrame(e):i;const R=new Set;function L(e){R.forEach((t=>{t.c(e)||(R.delete(t),t.f())})),0!==R.size&&O(L)}function D(e){let t;return 0===R.size&&O(L),{promise:new Promise((n=>{R.add(t={c:e,f:n})})),abort(){R.delete(t)}}}let N=!1;function P(e,t){e.appendChild(t)}function $(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function U(e){const t=H("style");return function(e,t){P(e.head||e,t)}($(e),t),t.sheet}function B(e,t,n){e.insertBefore(t,n||null)}function F(e){e.parentNode.removeChild(e)}function j(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function H(e){return document.createElement(e)}function K(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function q(e){return document.createTextNode(e)}function V(){return q(" ")}function G(){return q("")}function W(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function z(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Y(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function X(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function J(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const i in t)null==t[i]?e.removeAttribute(i):"style"===i?e.style.cssText=t[i]:"__value"===i?e.value=e[i]=t[i]:n[i]&&n[i].set?e[i]=t[i]:X(e,i,t[i])}function Q(e,t){for(const n in t)X(e,n,t[n])}function Z(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ee(e,t){e.value=null==t?"":t}function te(e,t,n,i){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function ne(e,t,n){e.classList[n?"add":"remove"](t)}function ie(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,i,t),r}const re=new Map;let oe,se=0;function ae(e,t,n,i,r,o,s,a=0){const c=16.666/i;let l="{\n";for(let e=0;e<=1;e+=c){const i=t+(n-t)*o(e);l+=100*e+`%{${s(i,1-i)}}\n`}const u=l+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,h=$(e),{stylesheet:p,rules:f}=re.get(h)||function(e,t){const n={stylesheet:U(t),rules:{}};return re.set(e,n),n}(h,e);f[d]||(f[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${d} ${i}ms linear ${r}ms 1 both`,se+=1,d}function ce(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),r=n.length-i.length;r&&(e.style.animation=i.join(", "),se-=r,se||O((()=>{se||(re.forEach((e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}})),re.clear())})))}function le(e,t,n,o){if(!t)return i;const s=e.getBoundingClientRect();if(t.left===s.left&&t.right===s.right&&t.top===s.top&&t.bottom===s.bottom)return i;const{delay:a=0,duration:c=300,easing:l=r,start:u=A()+a,end:d=u+c,tick:h=i,css:p}=n(e,{from:t,to:s},o);let f,m=!0,g=!1;function v(){p&&ce(e,f),m=!1}return D((e=>{if(!g&&e>=u&&(g=!0),g&&e>=d&&(h(1,0),v()),!m)return!1;if(g){const t=0+1*l((e-u)/c);h(t,1-t)}return!0})),p&&(f=ae(e,0,1,c,a,l,p)),a||(g=!0),h(0,1),v}function ue(e){const t=getComputedStyle(e);if("absolute"!==t.position&&"fixed"!==t.position){const{width:n,height:i}=t,r=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,de(e,r)}}function de(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),r="none"===i.transform?"":i.transform;e.style.transform=`${r} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}function he(e){oe=e}function pe(){if(!oe)throw new Error("Function called outside component initialization");return oe}function fe(e){pe().$$.on_mount.push(e)}function me(e){pe().$$.after_update.push(e)}function ge(e){pe().$$.on_destroy.push(e)}function ve(){const e=pe();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const o=ie(t,n,{cancelable:i});return r.slice().forEach((t=>{t.call(e,o)})),!o.defaultPrevented}return!0}}function ye(e,t){return pe().$$.context.set(e,t),t}function be(e){return pe().$$.context.get(e)}function Ee(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const Se=[],we=[],_e=[],Te=[],xe=Promise.resolve();let Ce=!1;function Ie(){Ce||(Ce=!0,xe.then(De))}function ke(){return Ie(),xe}function Me(e){_e.push(e)}function Ae(e){Te.push(e)}const Oe=new Set;let Re,Le=0;function De(){const e=oe;do{for(;Le<Se.length;){const e=Se[Le];Le++,he(e),Ne(e.$$)}for(he(null),Se.length=0,Le=0;we.length;)we.pop()();for(let e=0;e<_e.length;e+=1){const t=_e[e];Oe.has(t)||(Oe.add(t),t())}_e.length=0}while(Se.length);for(;Te.length;)Te.pop()();Ce=!1,Oe.clear(),he(e)}function Ne(e){if(null!==e.fragment){e.update(),c(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Me)}}function Pe(){return Re||(Re=Promise.resolve(),Re.then((()=>{Re=null}))),Re}function $e(e,t,n){e.dispatchEvent(ie(`${t?"intro":"outro"}${n}`))}const Ue=new Set;let Be;function Fe(){Be={r:0,c:[],p:Be}}function je(){Be.r||c(Be.c),Be=Be.p}function He(e,t){e&&e.i&&(Ue.delete(e),e.i(t))}function Ke(e,t,n,i){if(e&&e.o){if(Ue.has(e))return;Ue.add(e),Be.c.push((()=>{Ue.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}else i&&i()}const qe={duration:0};function Ve(e,t,n){let o,s,a=t(e,n),c=!1,u=0;function d(){o&&ce(e,o)}function h(){const{delay:t=0,duration:n=300,easing:l=r,tick:h=i,css:p}=a||qe;p&&(o=ae(e,0,1,n,t,l,p,u++)),h(0,1);const f=A()+t,m=f+n;s&&s.abort(),c=!0,Me((()=>$e(e,!0,"start"))),s=D((t=>{if(c){if(t>=m)return h(1,0),$e(e,!0,"end"),d(),c=!1;if(t>=f){const e=l((t-f)/n);h(e,1-e)}}return c}))}let p=!1;return{start(){p||(p=!0,ce(e),l(a)?(a=a(),Pe().then(h)):h())},invalidate(){p=!1},end(){c&&(d(),c=!1)}}}function Ge(e,t,n){let o,s=t(e,n),a=!0;const u=Be;function d(){const{delay:t=0,duration:n=300,easing:l=r,tick:d=i,css:h}=s||qe;h&&(o=ae(e,1,0,n,t,l,h));const p=A()+t,f=p+n;Me((()=>$e(e,!1,"start"))),D((t=>{if(a){if(t>=f)return d(0,1),$e(e,!1,"end"),--u.r||c(u.c),!1;if(t>=p){const e=l((t-p)/n);d(1-e,e)}}return a}))}return u.r+=1,l(s)?Pe().then((()=>{s=s(),d()})):d(),{end(t){t&&s.tick&&s.tick(1,0),a&&(o&&ce(e,o),a=!1)}}}function We(e,t,n,o){let s=t(e,n),a=o?0:1,u=null,d=null,h=null;function p(){h&&ce(e,h)}function f(e,t){const n=e.b-a;return t*=Math.abs(n),{a,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function m(t){const{delay:n=0,duration:o=300,easing:l=r,tick:m=i,css:g}=s||qe,v={start:A()+n,b:t};t||(v.group=Be,Be.r+=1),u||d?d=v:(g&&(p(),h=ae(e,a,t,o,n,l,g)),t&&m(0,1),u=f(v,o),Me((()=>$e(e,t,"start"))),D((t=>{if(d&&t>d.start&&(u=f(d,o),d=null,$e(e,u.b,"start"),g&&(p(),h=ae(e,a,u.b,u.duration,0,l,s.css))),u)if(t>=u.end)m(a=u.b,1-a),$e(e,u.b,"end"),d||(u.b?p():--u.group.r||c(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;a=u.a+u.d*l(e/u.duration),m(a,1-a)}return!(!u&&!d)})))}return{run(e){l(s)?Pe().then((()=>{s=s(),m(e)})):m(e)},end(){p(),u=d=null}}}const ze="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Ye(e,t){e.f(),function(e,t){Ke(e,1,1,(()=>{t.delete(e.key)}))}(e,t)}function Xe(e,t,n,i,r,o,s,a,c,l,u,d){let h=e.length,p=o.length,f=h;const m={};for(;f--;)m[e[f].key]=f;const g=[],v=new Map,y=new Map;for(f=p;f--;){const e=d(r,o,f),a=n(e);let c=s.get(a);c?i&&c.p(e,t):(c=l(a,e),c.c()),v.set(a,g[f]=c),a in m&&y.set(a,Math.abs(f-m[a]))}const b=new Set,E=new Set;function S(e){He(e,1),e.m(a,u),s.set(e.key,e),u=e.first,p--}for(;h&&p;){const t=g[p-1],n=e[h-1],i=t.key,r=n.key;t===n?(u=t.first,h--,p--):v.has(r)?!s.has(i)||b.has(i)?S(t):E.has(r)?h--:y.get(i)>y.get(r)?(E.add(i),S(t)):(b.add(r),h--):(c(n,s),h--)}for(;h--;){const t=e[h];v.has(t.key)||c(t,s)}for(;p;)S(g[p-1]);return g}function Je(e,t){const n={},i={},r={$$scope:1};let o=e.length;for(;o--;){const s=e[o],a=t[o];if(a){for(const e in s)e in a||(i[e]=1);for(const e in a)r[e]||(n[e]=a[e],r[e]=1);e[o]=a}else for(const e in s)r[e]=1}for(const e in i)e in n||(n[e]=void 0);return n}function Qe(e){return"object"==typeof e&&null!==e?e:{}}let Ze;function et(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function tt(e){e&&e.c()}function nt(e,t,n,i){const{fragment:r,on_mount:o,on_destroy:a,after_update:u}=e.$$;r&&r.m(t,n),i||Me((()=>{const t=o.map(s).filter(l);a?a.push(...t):c(t),e.$$.on_mount=[]})),u.forEach(Me)}function it(e,t){const n=e.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function rt(e,t,n,r,o,s,l,u=[-1]){const d=oe;he(e);const h=e.$$={fragment:null,ctx:null,props:s,update:i,not_equal:o,bound:a(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:a(),dirty:u,skip_bound:!1,root:t.target||d.$$.root};l&&l(h.root);let p=!1;if(h.ctx=n?n(e,t.props||{},((t,n,...i)=>{const r=i.length?i[0]:n;return h.ctx&&o(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),p&&function(e,t){-1===e.$$.dirty[0]&&(Se.push(e),Ie(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],h.update(),p=!0,c(h.before_update),h.fragment=!!r&&r(h.ctx),t.target){if(t.hydrate){N=!0;const e=function(e){return Array.from(e.childNodes)}(t.target);h.fragment&&h.fragment.l(e),e.forEach(F)}else h.fragment&&h.fragment.c();t.intro&&He(e.$$.fragment),nt(e,t.target,t.anchor,t.customElement),N=!1,De()}he(d)}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(Ze=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(s).filter(l);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){c(this.$$.on_disconnect)}$destroy(){it(this,1),this.$destroy=i}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!f(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class ot{$destroy(){it(this,1),this.$destroy=i}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!f(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}},48261:(e,t,n)=>{"use strict";n.d(t,{U2:()=>i.$XI,nK:()=>s,fZ:()=>o});var i=n(24234);const r=[];function o(e,t=i.ZTd){let n;const o=new Set;function s(t){if((0,i.N8)(e,t)&&(e=t,n)){const t=!r.length;for(const t of o)t[1](),r.push(t,e);if(t){for(let e=0;e<r.length;e+=2)r[e][0](r[e+1]);r.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(r,a=i.ZTd){const c=[r,a];return o.add(c),1===o.size&&(n=t(s)||i.ZTd),r(e),()=>{o.delete(c),0===o.size&&(n(),n=null)}}}}function s(e,t,n){const r=!Array.isArray(e),s=r?[e]:e,a=t.length<2;return{subscribe:o(n,(e=>{let n=!1;const o=[];let c=0,l=i.ZTd;const u=()=>{if(c)return;l();const n=t(r?o[0]:o,e);a?e(n):l=(0,i.sBU)(n)?n:i.ZTd},d=s.map(((e,t)=>(0,i.LdU)(e,(e=>{o[t]=e,c&=~(1<<t),n&&u()}),(()=>{c|=1<<t}))));return n=!0,u(),function(){(0,i.j7q)(d),l()}})).subscribe}}},26318:(e,t,n)=>{"use strict";n.d(t,{U1:()=>r,Zw:()=>o,JD:()=>s});var i=n(44300);function r(e,{delay:t=0,duration:n=400,easing:r=i.GE}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:e=>"opacity: "+e*o}}function o(e,{delay:t=0,duration:n=400,easing:r=i._e,x:o=0,y:s=0,opacity:a=0}={}){const c=getComputedStyle(e),l=+c.opacity,u="none"===c.transform?"":c.transform,d=l*(1-a);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${u} translate(${(1-e)*o}px, ${(1-e)*s}px);\n\t\t\topacity: ${l-d*t}`}}function s(e,{delay:t=0,duration:n=400,easing:r=i._e}={}){const o=getComputedStyle(e),s=+o.opacity,a=parseFloat(o.height),c=parseFloat(o.paddingTop),l=parseFloat(o.paddingBottom),u=parseFloat(o.marginTop),d=parseFloat(o.marginBottom),h=parseFloat(o.borderTopWidth),p=parseFloat(o.borderBottomWidth);return{delay:t,duration:n,easing:r,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*s};height: ${e*a}px;padding-top: ${e*c}px;padding-bottom: ${e*l}px;margin-top: ${e*u}px;margin-bottom: ${e*d}px;border-top-width: ${e*h}px;border-bottom-width: ${e*p}px;`}}n(24234)},44946:e=>{"use strict";e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},75207:e=>{"use strict";e.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},1308:e=>{"use strict";e.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},68348:e=>{"use strict";e.exports=JSON.parse('{"nbsp":"","iexcl":"","cent":"","pound":"","curren":"","yen":"","brvbar":"","sect":"","uml":"","copy":"","ordf":"","laquo":"","not":"","shy":"","reg":"","macr":"","deg":"","plusmn":"","sup2":"","sup3":"","acute":"","micro":"","para":"","middot":"","cedil":"","sup1":"","ordm":"","raquo":"","frac14":"","frac12":"","frac34":"","iquest":"","Agrave":"","Aacute":"","Acirc":"","Atilde":"","Auml":"","Aring":"","AElig":"","Ccedil":"","Egrave":"","Eacute":"","Ecirc":"","Euml":"","Igrave":"","Iacute":"","Icirc":"","Iuml":"","ETH":"","Ntilde":"","Ograve":"","Oacute":"","Ocirc":"","Otilde":"","Ouml":"","times":"","Oslash":"","Ugrave":"","Uacute":"","Ucirc":"","Uuml":"","Yacute":"","THORN":"","szlig":"","agrave":"","aacute":"","acirc":"","atilde":"","auml":"","aring":"","aelig":"","ccedil":"","egrave":"","eacute":"","ecirc":"","euml":"","igrave":"","iacute":"","icirc":"","iuml":"","eth":"","ntilde":"","ograve":"","oacute":"","ocirc":"","otilde":"","ouml":"","divide":"","oslash":"","ugrave":"","uacute":"","ucirc":"","uuml":"","yacute":"","thorn":"","yuml":"","fnof":"","Alpha":"","Beta":"","Gamma":"","Delta":"","Epsilon":"","Zeta":"","Eta":"","Theta":"","Iota":"","Kappa":"","Lambda":"","Mu":"","Nu":"","Xi":"","Omicron":"","Pi":"","Rho":"","Sigma":"","Tau":"","Upsilon":"","Phi":"","Chi":"","Psi":"","Omega":"","alpha":"","beta":"","gamma":"","delta":"","epsilon":"","zeta":"","eta":"","theta":"","iota":"","kappa":"","lambda":"","mu":"","nu":"","xi":"","omicron":"","pi":"","rho":"","sigmaf":"","sigma":"","tau":"","upsilon":"","phi":"","chi":"","psi":"","omega":"","thetasym":"","upsih":"","piv":"","bull":"","hellip":"","prime":"","Prime":"","oline":"","frasl":"","weierp":"","image":"","real":"","trade":"","alefsym":"","larr":"","uarr":"","rarr":"","darr":"","harr":"","crarr":"","lArr":"","uArr":"","rArr":"","dArr":"","hArr":"","forall":"","part":"","exist":"","empty":"","nabla":"","isin":"","notin":"","ni":"","prod":"","sum":"","minus":"","lowast":"","radic":"","prop":"","infin":"","ang":"","and":"","or":"","cap":"","cup":"","int":"","there4":"","sim":"","cong":"","asymp":"","ne":"","equiv":"","le":"","ge":"","sub":"","sup":"","nsub":"","sube":"","supe":"","oplus":"","otimes":"","perp":"","sdot":"","lceil":"","rceil":"","lfloor":"","rfloor":"","lang":"","rang":"","loz":"","spades":"","clubs":"","hearts":"","diams":"","quot":"\\"","amp":"&","lt":"<","gt":">","OElig":"","oelig":"","Scaron":"","scaron":"","Yuml":"","circ":"","tilde":"","ensp":"","emsp":"","thinsp":"","zwnj":"","zwj":"","lrm":"","rlm":"","ndash":"","mdash":"","lsquo":"","rsquo":"","sbquo":"","ldquo":"","rdquo":"","bdquo":"","dagger":"","Dagger":"","permil":"","lsaquo":"","rsaquo":"","euro":""}')},37452:e=>{"use strict";e.exports=JSON.parse('{"AElig":"","AMP":"&","Aacute":"","Acirc":"","Agrave":"","Aring":"","Atilde":"","Auml":"","COPY":"","Ccedil":"","ETH":"","Eacute":"","Ecirc":"","Egrave":"","Euml":"","GT":">","Iacute":"","Icirc":"","Igrave":"","Iuml":"","LT":"<","Ntilde":"","Oacute":"","Ocirc":"","Ograve":"","Oslash":"","Otilde":"","Ouml":"","QUOT":"\\"","REG":"","THORN":"","Uacute":"","Ucirc":"","Ugrave":"","Uuml":"","Yacute":"","aacute":"","acirc":"","acute":"","aelig":"","agrave":"","amp":"&","aring":"","atilde":"","auml":"","brvbar":"","ccedil":"","cedil":"","cent":"","copy":"","curren":"","deg":"","divide":"","eacute":"","ecirc":"","egrave":"","eth":"","euml":"","frac12":"","frac14":"","frac34":"","gt":">","iacute":"","icirc":"","iexcl":"","igrave":"","iquest":"","iuml":"","laquo":"","lt":"<","macr":"","micro":"","middot":"","nbsp":"","not":"","ntilde":"","oacute":"","ocirc":"","ograve":"","ordf":"","ordm":"","oslash":"","otilde":"","ouml":"","para":"","plusmn":"","pound":"","quot":"\\"","raquo":"","reg":"","sect":"","shy":"","sup1":"","sup2":"","sup3":"","szlig":"","thorn":"","times":"","uacute":"","ucirc":"","ugrave":"","uml":"","uuml":"","yacute":"","yen":"","yuml":""}')},29799:e=>{"use strict";e.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},18597:e=>{"use strict";e.exports={i8:"6.5.4"}},29370:e=>{"use strict";e.exports=JSON.parse('{"strip":["script"],"clobberPrefix":"user-content-","clobber":["name","id"],"ancestors":{"tbody":["table"],"tfoot":["table"],"thead":["table"],"td":["table"],"th":["table"],"tr":["table"]},"protocols":{"href":["http","https","mailto","xmpp","irc","ircs"],"cite":["http","https"],"src":["http","https"],"longDesc":["http","https"]},"tagNames":["h1","h2","h3","h4","h5","h6","br","b","i","strong","em","a","pre","code","img","tt","div","ins","del","sup","sub","p","ol","ul","table","thead","tbody","tfoot","blockquote","dl","dt","dd","kbd","q","samp","var","hr","ruby","rt","rp","li","tr","td","th","s","strike","summary","details","caption","figure","figcaption","abbr","bdo","cite","dfn","mark","small","span","time","wbr","input"],"attributes":{"a":["href"],"img":["src","longDesc"],"input":[["type","checkbox"],["disabled",true]],"li":[["className","task-list-item"]],"div":["itemScope","itemType"],"blockquote":["cite"],"del":["cite"],"ins":["cite"],"q":["cite"],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","ariaDescribedBy","ariaHidden","ariaLabel","ariaLabelledBy","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","cols","colSpan","color","compact","coords","dateTime","dir","disabled","encType","htmlFor","frame","headers","height","hrefLang","hSpace","isMap","id","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rel","rev","rows","rowSpan","rules","scope","selected","shape","size","span","start","summary","tabIndex","target","title","type","useMap","vAlign","value","vSpace","width","itemProp"]},"required":{"input":{"type":"checkbox","disabled":true}}}')},76947:e=>{"use strict";e.exports=JSON.parse('["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"]')},69878:e=>{"use strict";e.exports=JSON.parse('["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"]')},12590:e=>{"use strict";e.exports=JSON.parse('{"application/1d-interleaved-parityfec":{"source":"iana"},"application/3gpdash-qoe-report+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/3gpp-ims+xml":{"source":"iana","compressible":true},"application/3gpphal+json":{"source":"iana","compressible":true},"application/3gpphalforms+json":{"source":"iana","compressible":true},"application/a2l":{"source":"iana"},"application/ace+cbor":{"source":"iana"},"application/activemessage":{"source":"iana"},"application/activity+json":{"source":"iana","compressible":true},"application/alto-costmap+json":{"source":"iana","compressible":true},"application/alto-costmapfilter+json":{"source":"iana","compressible":true},"application/alto-directory+json":{"source":"iana","compressible":true},"application/alto-endpointcost+json":{"source":"iana","compressible":true},"application/alto-endpointcostparams+json":{"source":"iana","compressible":true},"application/alto-endpointprop+json":{"source":"iana","compressible":true},"application/alto-endpointpropparams+json":{"source":"iana","compressible":true},"application/alto-error+json":{"source":"iana","compressible":true},"application/alto-networkmap+json":{"source":"iana","compressible":true},"application/alto-networkmapfilter+json":{"source":"iana","compressible":true},"application/alto-updatestreamcontrol+json":{"source":"iana","compressible":true},"application/alto-updatestreamparams+json":{"source":"iana","compressible":true},"application/aml":{"source":"iana"},"application/andrew-inset":{"source":"iana","extensions":["ez"]},"application/applefile":{"source":"iana"},"application/applixware":{"source":"apache","extensions":["aw"]},"application/at+jwt":{"source":"iana"},"application/atf":{"source":"iana"},"application/atfx":{"source":"iana"},"application/atom+xml":{"source":"iana","compressible":true,"extensions":["atom"]},"application/atomcat+xml":{"source":"iana","compressible":true,"extensions":["atomcat"]},"application/atomdeleted+xml":{"source":"iana","compressible":true,"extensions":["atomdeleted"]},"application/atomicmail":{"source":"iana"},"application/atomsvc+xml":{"source":"iana","compressible":true,"extensions":["atomsvc"]},"application/atsc-dwd+xml":{"source":"iana","compressible":true,"extensions":["dwd"]},"application/atsc-dynamic-event-message":{"source":"iana"},"application/atsc-held+xml":{"source":"iana","compressible":true,"extensions":["held"]},"application/atsc-rdt+json":{"source":"iana","compressible":true},"application/atsc-rsat+xml":{"source":"iana","compressible":true,"extensions":["rsat"]},"application/atxml":{"source":"iana"},"application/auth-policy+xml":{"source":"iana","compressible":true},"application/bacnet-xdd+zip":{"source":"iana","compressible":false},"application/batch-smtp":{"source":"iana"},"application/bdoc":{"compressible":false,"extensions":["bdoc"]},"application/beep+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/calendar+json":{"source":"iana","compressible":true},"application/calendar+xml":{"source":"iana","compressible":true,"extensions":["xcs"]},"application/call-completion":{"source":"iana"},"application/cals-1840":{"source":"iana"},"application/captive+json":{"source":"iana","compressible":true},"application/cbor":{"source":"iana"},"application/cbor-seq":{"source":"iana"},"application/cccex":{"source":"iana"},"application/ccmp+xml":{"source":"iana","compressible":true},"application/ccxml+xml":{"source":"iana","compressible":true,"extensions":["ccxml"]},"application/cdfx+xml":{"source":"iana","compressible":true,"extensions":["cdfx"]},"application/cdmi-capability":{"source":"iana","extensions":["cdmia"]},"application/cdmi-container":{"source":"iana","extensions":["cdmic"]},"application/cdmi-domain":{"source":"iana","extensions":["cdmid"]},"application/cdmi-object":{"source":"iana","extensions":["cdmio"]},"application/cdmi-queue":{"source":"iana","extensions":["cdmiq"]},"application/cdni":{"source":"iana"},"application/cea":{"source":"iana"},"application/cea-2018+xml":{"source":"iana","compressible":true},"application/cellml+xml":{"source":"iana","compressible":true},"application/cfw":{"source":"iana"},"application/clr":{"source":"iana"},"application/clue+xml":{"source":"iana","compressible":true},"application/clue_info+xml":{"source":"iana","compressible":true},"application/cms":{"source":"iana"},"application/cnrp+xml":{"source":"iana","compressible":true},"application/coap-group+json":{"source":"iana","compressible":true},"application/coap-payload":{"source":"iana"},"application/commonground":{"source":"iana"},"application/conference-info+xml":{"source":"iana","compressible":true},"application/cose":{"source":"iana"},"application/cose-key":{"source":"iana"},"application/cose-key-set":{"source":"iana"},"application/cpl+xml":{"source":"iana","compressible":true},"application/csrattrs":{"source":"iana"},"application/csta+xml":{"source":"iana","compressible":true},"application/cstadata+xml":{"source":"iana","compressible":true},"application/csvm+json":{"source":"iana","compressible":true},"application/cu-seeme":{"source":"apache","extensions":["cu"]},"application/cwt":{"source":"iana"},"application/cybercash":{"source":"iana"},"application/dart":{"compressible":true},"application/dash+xml":{"source":"iana","compressible":true,"extensions":["mpd"]},"application/dashdelta":{"source":"iana"},"application/davmount+xml":{"source":"iana","compressible":true,"extensions":["davmount"]},"application/dca-rft":{"source":"iana"},"application/dcd":{"source":"iana"},"application/dec-dx":{"source":"iana"},"application/dialog-info+xml":{"source":"iana","compressible":true},"application/dicom":{"source":"iana"},"application/dicom+json":{"source":"iana","compressible":true},"application/dicom+xml":{"source":"iana","compressible":true},"application/dii":{"source":"iana"},"application/dit":{"source":"iana"},"application/dns":{"source":"iana"},"application/dns+json":{"source":"iana","compressible":true},"application/dns-message":{"source":"iana"},"application/docbook+xml":{"source":"apache","compressible":true,"extensions":["dbk"]},"application/dots+cbor":{"source":"iana"},"application/dskpp+xml":{"source":"iana","compressible":true},"application/dssc+der":{"source":"iana","extensions":["dssc"]},"application/dssc+xml":{"source":"iana","compressible":true,"extensions":["xdssc"]},"application/dvcs":{"source":"iana"},"application/ecmascript":{"source":"iana","compressible":true,"extensions":["es","ecma"]},"application/edi-consent":{"source":"iana"},"application/edi-x12":{"source":"iana","compressible":false},"application/edifact":{"source":"iana","compressible":false},"application/efi":{"source":"iana"},"application/elm+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/elm+xml":{"source":"iana","compressible":true},"application/emergencycalldata.cap+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/emergencycalldata.comment+xml":{"source":"iana","compressible":true},"application/emergencycalldata.control+xml":{"source":"iana","compressible":true},"application/emergencycalldata.deviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.ecall.msd":{"source":"iana"},"application/emergencycalldata.providerinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.serviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.subscriberinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.veds+xml":{"source":"iana","compressible":true},"application/emma+xml":{"source":"iana","compressible":true,"extensions":["emma"]},"application/emotionml+xml":{"source":"iana","compressible":true,"extensions":["emotionml"]},"application/encaprtp":{"source":"iana"},"application/epp+xml":{"source":"iana","compressible":true},"application/epub+zip":{"source":"iana","compressible":false,"extensions":["epub"]},"application/eshop":{"source":"iana"},"application/exi":{"source":"iana","extensions":["exi"]},"application/expect-ct-report+json":{"source":"iana","compressible":true},"application/express":{"source":"iana","extensions":["exp"]},"application/fastinfoset":{"source":"iana"},"application/fastsoap":{"source":"iana"},"application/fdt+xml":{"source":"iana","compressible":true,"extensions":["fdt"]},"application/fhir+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/fhir+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/fido.trusted-apps+json":{"compressible":true},"application/fits":{"source":"iana"},"application/flexfec":{"source":"iana"},"application/font-sfnt":{"source":"iana"},"application/font-tdpfr":{"source":"iana","extensions":["pfr"]},"application/font-woff":{"source":"iana","compressible":false},"application/framework-attributes+xml":{"source":"iana","compressible":true},"application/geo+json":{"source":"iana","compressible":true,"extensions":["geojson"]},"application/geo+json-seq":{"source":"iana"},"application/geopackage+sqlite3":{"source":"iana"},"application/geoxacml+xml":{"source":"iana","compressible":true},"application/gltf-buffer":{"source":"iana"},"application/gml+xml":{"source":"iana","compressible":true,"extensions":["gml"]},"application/gpx+xml":{"source":"apache","compressible":true,"extensions":["gpx"]},"application/gxf":{"source":"apache","extensions":["gxf"]},"application/gzip":{"source":"iana","compressible":false,"extensions":["gz"]},"application/h224":{"source":"iana"},"application/held+xml":{"source":"iana","compressible":true},"application/hjson":{"extensions":["hjson"]},"application/http":{"source":"iana"},"application/hyperstudio":{"source":"iana","extensions":["stk"]},"application/ibe-key-request+xml":{"source":"iana","compressible":true},"application/ibe-pkg-reply+xml":{"source":"iana","compressible":true},"application/ibe-pp-data":{"source":"iana"},"application/iges":{"source":"iana"},"application/im-iscomposing+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/index":{"source":"iana"},"application/index.cmd":{"source":"iana"},"application/index.obj":{"source":"iana"},"application/index.response":{"source":"iana"},"application/index.vnd":{"source":"iana"},"application/inkml+xml":{"source":"iana","compressible":true,"extensions":["ink","inkml"]},"application/iotp":{"source":"iana"},"application/ipfix":{"source":"iana","extensions":["ipfix"]},"application/ipp":{"source":"iana"},"application/isup":{"source":"iana"},"application/its+xml":{"source":"iana","compressible":true,"extensions":["its"]},"application/java-archive":{"source":"apache","compressible":false,"extensions":["jar","war","ear"]},"application/java-serialized-object":{"source":"apache","compressible":false,"extensions":["ser"]},"application/java-vm":{"source":"apache","compressible":false,"extensions":["class"]},"application/javascript":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["js","mjs"]},"application/jf2feed+json":{"source":"iana","compressible":true},"application/jose":{"source":"iana"},"application/jose+json":{"source":"iana","compressible":true},"application/jrd+json":{"source":"iana","compressible":true},"application/jscalendar+json":{"source":"iana","compressible":true},"application/json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["json","map"]},"application/json-patch+json":{"source":"iana","compressible":true},"application/json-seq":{"source":"iana"},"application/json5":{"extensions":["json5"]},"application/jsonml+json":{"source":"apache","compressible":true,"extensions":["jsonml"]},"application/jwk+json":{"source":"iana","compressible":true},"application/jwk-set+json":{"source":"iana","compressible":true},"application/jwt":{"source":"iana"},"application/kpml-request+xml":{"source":"iana","compressible":true},"application/kpml-response+xml":{"source":"iana","compressible":true},"application/ld+json":{"source":"iana","compressible":true,"extensions":["jsonld"]},"application/lgr+xml":{"source":"iana","compressible":true,"extensions":["lgr"]},"application/link-format":{"source":"iana"},"application/load-control+xml":{"source":"iana","compressible":true},"application/lost+xml":{"source":"iana","compressible":true,"extensions":["lostxml"]},"application/lostsync+xml":{"source":"iana","compressible":true},"application/lpf+zip":{"source":"iana","compressible":false},"application/lxf":{"source":"iana"},"application/mac-binhex40":{"source":"iana","extensions":["hqx"]},"application/mac-compactpro":{"source":"apache","extensions":["cpt"]},"application/macwriteii":{"source":"iana"},"application/mads+xml":{"source":"iana","compressible":true,"extensions":["mads"]},"application/manifest+json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["webmanifest"]},"application/marc":{"source":"iana","extensions":["mrc"]},"application/marcxml+xml":{"source":"iana","compressible":true,"extensions":["mrcx"]},"application/mathematica":{"source":"iana","extensions":["ma","nb","mb"]},"application/mathml+xml":{"source":"iana","compressible":true,"extensions":["mathml"]},"application/mathml-content+xml":{"source":"iana","compressible":true},"application/mathml-presentation+xml":{"source":"iana","compressible":true},"application/mbms-associated-procedure-description+xml":{"source":"iana","compressible":true},"application/mbms-deregister+xml":{"source":"iana","compressible":true},"application/mbms-envelope+xml":{"source":"iana","compressible":true},"application/mbms-msk+xml":{"source":"iana","compressible":true},"application/mbms-msk-response+xml":{"source":"iana","compressible":true},"application/mbms-protection-description+xml":{"source":"iana","compressible":true},"application/mbms-reception-report+xml":{"source":"iana","compressible":true},"application/mbms-register+xml":{"source":"iana","compressible":true},"application/mbms-register-response+xml":{"source":"iana","compressible":true},"application/mbms-schedule+xml":{"source":"iana","compressible":true},"application/mbms-user-service-description+xml":{"source":"iana","compressible":true},"application/mbox":{"source":"iana","extensions":["mbox"]},"application/media-policy-dataset+xml":{"source":"iana","compressible":true},"application/media_control+xml":{"source":"iana","compressible":true},"application/mediaservercontrol+xml":{"source":"iana","compressible":true,"extensions":["mscml"]},"application/merge-patch+json":{"source":"iana","compressible":true},"application/metalink+xml":{"source":"apache","compressible":true,"extensions":["metalink"]},"application/metalink4+xml":{"source":"iana","compressible":true,"extensions":["meta4"]},"application/mets+xml":{"source":"iana","compressible":true,"extensions":["mets"]},"application/mf4":{"source":"iana"},"application/mikey":{"source":"iana"},"application/mipc":{"source":"iana"},"application/missing-blocks+cbor-seq":{"source":"iana"},"application/mmt-aei+xml":{"source":"iana","compressible":true,"extensions":["maei"]},"application/mmt-usd+xml":{"source":"iana","compressible":true,"extensions":["musd"]},"application/mods+xml":{"source":"iana","compressible":true,"extensions":["mods"]},"application/moss-keys":{"source":"iana"},"application/moss-signature":{"source":"iana"},"application/mosskey-data":{"source":"iana"},"application/mosskey-request":{"source":"iana"},"application/mp21":{"source":"iana","extensions":["m21","mp21"]},"application/mp4":{"source":"iana","extensions":["mp4s","m4p"]},"application/mpeg4-generic":{"source":"iana"},"application/mpeg4-iod":{"source":"iana"},"application/mpeg4-iod-xmt":{"source":"iana"},"application/mrb-consumer+xml":{"source":"iana","compressible":true},"application/mrb-publish+xml":{"source":"iana","compressible":true},"application/msc-ivr+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msc-mixer+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msword":{"source":"iana","compressible":false,"extensions":["doc","dot"]},"application/mud+json":{"source":"iana","compressible":true},"application/multipart-core":{"source":"iana"},"application/mxf":{"source":"iana","extensions":["mxf"]},"application/n-quads":{"source":"iana","extensions":["nq"]},"application/n-triples":{"source":"iana","extensions":["nt"]},"application/nasdata":{"source":"iana"},"application/news-checkgroups":{"source":"iana","charset":"US-ASCII"},"application/news-groupinfo":{"source":"iana","charset":"US-ASCII"},"application/news-transmission":{"source":"iana"},"application/nlsml+xml":{"source":"iana","compressible":true},"application/node":{"source":"iana","extensions":["cjs"]},"application/nss":{"source":"iana"},"application/oauth-authz-req+jwt":{"source":"iana"},"application/ocsp-request":{"source":"iana"},"application/ocsp-response":{"source":"iana"},"application/octet-stream":{"source":"iana","compressible":false,"extensions":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{"source":"iana","extensions":["oda"]},"application/odm+xml":{"source":"iana","compressible":true},"application/odx":{"source":"iana"},"application/oebps-package+xml":{"source":"iana","compressible":true,"extensions":["opf"]},"application/ogg":{"source":"iana","compressible":false,"extensions":["ogx"]},"application/omdoc+xml":{"source":"apache","compressible":true,"extensions":["omdoc"]},"application/onenote":{"source":"apache","extensions":["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{"source":"iana","compressible":true},"application/oscore":{"source":"iana"},"application/oxps":{"source":"iana","extensions":["oxps"]},"application/p21":{"source":"iana"},"application/p21+zip":{"source":"iana","compressible":false},"application/p2p-overlay+xml":{"source":"iana","compressible":true,"extensions":["relo"]},"application/parityfec":{"source":"iana"},"application/passport":{"source":"iana"},"application/patch-ops-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/pdf":{"source":"iana","compressible":false,"extensions":["pdf"]},"application/pdx":{"source":"iana"},"application/pem-certificate-chain":{"source":"iana"},"application/pgp-encrypted":{"source":"iana","compressible":false,"extensions":["pgp"]},"application/pgp-keys":{"source":"iana"},"application/pgp-signature":{"source":"iana","extensions":["asc","sig"]},"application/pics-rules":{"source":"apache","extensions":["prf"]},"application/pidf+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pidf-diff+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pkcs10":{"source":"iana","extensions":["p10"]},"application/pkcs12":{"source":"iana"},"application/pkcs7-mime":{"source":"iana","extensions":["p7m","p7c"]},"application/pkcs7-signature":{"source":"iana","extensions":["p7s"]},"application/pkcs8":{"source":"iana","extensions":["p8"]},"application/pkcs8-encrypted":{"source":"iana"},"application/pkix-attr-cert":{"source":"iana","extensions":["ac"]},"application/pkix-cert":{"source":"iana","extensions":["cer"]},"application/pkix-crl":{"source":"iana","extensions":["crl"]},"application/pkix-pkipath":{"source":"iana","extensions":["pkipath"]},"application/pkixcmp":{"source":"iana","extensions":["pki"]},"application/pls+xml":{"source":"iana","compressible":true,"extensions":["pls"]},"application/poc-settings+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/postscript":{"source":"iana","compressible":true,"extensions":["ai","eps","ps"]},"application/ppsp-tracker+json":{"source":"iana","compressible":true},"application/problem+json":{"source":"iana","compressible":true},"application/problem+xml":{"source":"iana","compressible":true},"application/provenance+xml":{"source":"iana","compressible":true,"extensions":["provx"]},"application/prs.alvestrand.titrax-sheet":{"source":"iana"},"application/prs.cww":{"source":"iana","extensions":["cww"]},"application/prs.cyn":{"source":"iana","charset":"7-BIT"},"application/prs.hpub+zip":{"source":"iana","compressible":false},"application/prs.nprend":{"source":"iana"},"application/prs.plucker":{"source":"iana"},"application/prs.rdf-xml-crypt":{"source":"iana"},"application/prs.xsf+xml":{"source":"iana","compressible":true},"application/pskc+xml":{"source":"iana","compressible":true,"extensions":["pskcxml"]},"application/pvd+json":{"source":"iana","compressible":true},"application/qsig":{"source":"iana"},"application/raml+yaml":{"compressible":true,"extensions":["raml"]},"application/raptorfec":{"source":"iana"},"application/rdap+json":{"source":"iana","compressible":true},"application/rdf+xml":{"source":"iana","compressible":true,"extensions":["rdf","owl"]},"application/reginfo+xml":{"source":"iana","compressible":true,"extensions":["rif"]},"application/relax-ng-compact-syntax":{"source":"iana","extensions":["rnc"]},"application/remote-printing":{"source":"iana"},"application/reputon+json":{"source":"iana","compressible":true},"application/resource-lists+xml":{"source":"iana","compressible":true,"extensions":["rl"]},"application/resource-lists-diff+xml":{"source":"iana","compressible":true,"extensions":["rld"]},"application/rfc+xml":{"source":"iana","compressible":true},"application/riscos":{"source":"iana"},"application/rlmi+xml":{"source":"iana","compressible":true},"application/rls-services+xml":{"source":"iana","compressible":true,"extensions":["rs"]},"application/route-apd+xml":{"source":"iana","compressible":true,"extensions":["rapd"]},"application/route-s-tsid+xml":{"source":"iana","compressible":true,"extensions":["sls"]},"application/route-usd+xml":{"source":"iana","compressible":true,"extensions":["rusd"]},"application/rpki-ghostbusters":{"source":"iana","extensions":["gbr"]},"application/rpki-manifest":{"source":"iana","extensions":["mft"]},"application/rpki-publication":{"source":"iana"},"application/rpki-roa":{"source":"iana","extensions":["roa"]},"application/rpki-updown":{"source":"iana"},"application/rsd+xml":{"source":"apache","compressible":true,"extensions":["rsd"]},"application/rss+xml":{"source":"apache","compressible":true,"extensions":["rss"]},"application/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"application/rtploopback":{"source":"iana"},"application/rtx":{"source":"iana"},"application/samlassertion+xml":{"source":"iana","compressible":true},"application/samlmetadata+xml":{"source":"iana","compressible":true},"application/sarif+json":{"source":"iana","compressible":true},"application/sarif-external-properties+json":{"source":"iana","compressible":true},"application/sbe":{"source":"iana"},"application/sbml+xml":{"source":"iana","compressible":true,"extensions":["sbml"]},"application/scaip+xml":{"source":"iana","compressible":true},"application/scim+json":{"source":"iana","compressible":true},"application/scvp-cv-request":{"source":"iana","extensions":["scq"]},"application/scvp-cv-response":{"source":"iana","extensions":["scs"]},"application/scvp-vp-request":{"source":"iana","extensions":["spq"]},"application/scvp-vp-response":{"source":"iana","extensions":["spp"]},"application/sdp":{"source":"iana","extensions":["sdp"]},"application/secevent+jwt":{"source":"iana"},"application/senml+cbor":{"source":"iana"},"application/senml+json":{"source":"iana","compressible":true},"application/senml+xml":{"source":"iana","compressible":true,"extensions":["senmlx"]},"application/senml-etch+cbor":{"source":"iana"},"application/senml-etch+json":{"source":"iana","compressible":true},"application/senml-exi":{"source":"iana"},"application/sensml+cbor":{"source":"iana"},"application/sensml+json":{"source":"iana","compressible":true},"application/sensml+xml":{"source":"iana","compressible":true,"extensions":["sensmlx"]},"application/sensml-exi":{"source":"iana"},"application/sep+xml":{"source":"iana","compressible":true},"application/sep-exi":{"source":"iana"},"application/session-info":{"source":"iana"},"application/set-payment":{"source":"iana"},"application/set-payment-initiation":{"source":"iana","extensions":["setpay"]},"application/set-registration":{"source":"iana"},"application/set-registration-initiation":{"source":"iana","extensions":["setreg"]},"application/sgml":{"source":"iana"},"application/sgml-open-catalog":{"source":"iana"},"application/shf+xml":{"source":"iana","compressible":true,"extensions":["shf"]},"application/sieve":{"source":"iana","extensions":["siv","sieve"]},"application/simple-filter+xml":{"source":"iana","compressible":true},"application/simple-message-summary":{"source":"iana"},"application/simplesymbolcontainer":{"source":"iana"},"application/sipc":{"source":"iana"},"application/slate":{"source":"iana"},"application/smil":{"source":"iana"},"application/smil+xml":{"source":"iana","compressible":true,"extensions":["smi","smil"]},"application/smpte336m":{"source":"iana"},"application/soap+fastinfoset":{"source":"iana"},"application/soap+xml":{"source":"iana","compressible":true},"application/sparql-query":{"source":"iana","extensions":["rq"]},"application/sparql-results+xml":{"source":"iana","compressible":true,"extensions":["srx"]},"application/spdx+json":{"source":"iana","compressible":true},"application/spirits-event+xml":{"source":"iana","compressible":true},"application/sql":{"source":"iana"},"application/srgs":{"source":"iana","extensions":["gram"]},"application/srgs+xml":{"source":"iana","compressible":true,"extensions":["grxml"]},"application/sru+xml":{"source":"iana","compressible":true,"extensions":["sru"]},"application/ssdl+xml":{"source":"apache","compressible":true,"extensions":["ssdl"]},"application/ssml+xml":{"source":"iana","compressible":true,"extensions":["ssml"]},"application/stix+json":{"source":"iana","compressible":true},"application/swid+xml":{"source":"iana","compressible":true,"extensions":["swidtag"]},"application/tamp-apex-update":{"source":"iana"},"application/tamp-apex-update-confirm":{"source":"iana"},"application/tamp-community-update":{"source":"iana"},"application/tamp-community-update-confirm":{"source":"iana"},"application/tamp-error":{"source":"iana"},"application/tamp-sequence-adjust":{"source":"iana"},"application/tamp-sequence-adjust-confirm":{"source":"iana"},"application/tamp-status-query":{"source":"iana"},"application/tamp-status-response":{"source":"iana"},"application/tamp-update":{"source":"iana"},"application/tamp-update-confirm":{"source":"iana"},"application/tar":{"compressible":true},"application/taxii+json":{"source":"iana","compressible":true},"application/td+json":{"source":"iana","compressible":true},"application/tei+xml":{"source":"iana","compressible":true,"extensions":["tei","teicorpus"]},"application/tetra_isi":{"source":"iana"},"application/thraud+xml":{"source":"iana","compressible":true,"extensions":["tfi"]},"application/timestamp-query":{"source":"iana"},"application/timestamp-reply":{"source":"iana"},"application/timestamped-data":{"source":"iana","extensions":["tsd"]},"application/tlsrpt+gzip":{"source":"iana"},"application/tlsrpt+json":{"source":"iana","compressible":true},"application/tnauthlist":{"source":"iana"},"application/token-introspection+jwt":{"source":"iana"},"application/toml":{"compressible":true,"extensions":["toml"]},"application/trickle-ice-sdpfrag":{"source":"iana"},"application/trig":{"source":"iana","extensions":["trig"]},"application/ttml+xml":{"source":"iana","compressible":true,"extensions":["ttml"]},"application/tve-trigger":{"source":"iana"},"application/tzif":{"source":"iana"},"application/tzif-leap":{"source":"iana"},"application/ubjson":{"compressible":false,"extensions":["ubj"]},"application/ulpfec":{"source":"iana"},"application/urc-grpsheet+xml":{"source":"iana","compressible":true},"application/urc-ressheet+xml":{"source":"iana","compressible":true,"extensions":["rsheet"]},"application/urc-targetdesc+xml":{"source":"iana","compressible":true,"extensions":["td"]},"application/urc-uisocketdesc+xml":{"source":"iana","compressible":true},"application/vcard+json":{"source":"iana","compressible":true},"application/vcard+xml":{"source":"iana","compressible":true},"application/vemmi":{"source":"iana"},"application/vividence.scriptfile":{"source":"apache"},"application/vnd.1000minds.decision-model+xml":{"source":"iana","compressible":true,"extensions":["1km"]},"application/vnd.3gpp-prose+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose-pc3ch+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-v2x-local-service-information":{"source":"iana"},"application/vnd.3gpp.5gnas":{"source":"iana"},"application/vnd.3gpp.access-transfer-events+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.bsf+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gmop+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gtpc":{"source":"iana"},"application/vnd.3gpp.interworking-data":{"source":"iana"},"application/vnd.3gpp.lpp":{"source":"iana"},"application/vnd.3gpp.mc-signalling-ear":{"source":"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-payload":{"source":"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-signalling":{"source":"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-floor-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-signed+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-init-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-transmission-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mid-call+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ngap":{"source":"iana"},"application/vnd.3gpp.pfcp":{"source":"iana"},"application/vnd.3gpp.pic-bw-large":{"source":"iana","extensions":["plb"]},"application/vnd.3gpp.pic-bw-small":{"source":"iana","extensions":["psb"]},"application/vnd.3gpp.pic-bw-var":{"source":"iana","extensions":["pvb"]},"application/vnd.3gpp.s1ap":{"source":"iana"},"application/vnd.3gpp.sms":{"source":"iana"},"application/vnd.3gpp.sms+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-ext+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.state-and-event-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ussd+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.bcmcsinfo+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.sms":{"source":"iana"},"application/vnd.3gpp2.tcap":{"source":"iana","extensions":["tcap"]},"application/vnd.3lightssoftware.imagescal":{"source":"iana"},"application/vnd.3m.post-it-notes":{"source":"iana","extensions":["pwn"]},"application/vnd.accpac.simply.aso":{"source":"iana","extensions":["aso"]},"application/vnd.accpac.simply.imp":{"source":"iana","extensions":["imp"]},"application/vnd.acucobol":{"source":"iana","extensions":["acu"]},"application/vnd.acucorp":{"source":"iana","extensions":["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{"source":"apache","compressible":false,"extensions":["air"]},"application/vnd.adobe.flash.movie":{"source":"iana"},"application/vnd.adobe.formscentral.fcdt":{"source":"iana","extensions":["fcdt"]},"application/vnd.adobe.fxp":{"source":"iana","extensions":["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{"source":"iana"},"application/vnd.adobe.xdp+xml":{"source":"iana","compressible":true,"extensions":["xdp"]},"application/vnd.adobe.xfdf":{"source":"iana","extensions":["xfdf"]},"application/vnd.aether.imp":{"source":"iana"},"application/vnd.afpc.afplinedata":{"source":"iana"},"application/vnd.afpc.afplinedata-pagedef":{"source":"iana"},"application/vnd.afpc.cmoca-cmresource":{"source":"iana"},"application/vnd.afpc.foca-charset":{"source":"iana"},"application/vnd.afpc.foca-codedfont":{"source":"iana"},"application/vnd.afpc.foca-codepage":{"source":"iana"},"application/vnd.afpc.modca":{"source":"iana"},"application/vnd.afpc.modca-cmtable":{"source":"iana"},"application/vnd.afpc.modca-formdef":{"source":"iana"},"application/vnd.afpc.modca-mediummap":{"source":"iana"},"application/vnd.afpc.modca-objectcontainer":{"source":"iana"},"application/vnd.afpc.modca-overlay":{"source":"iana"},"application/vnd.afpc.modca-pagesegment":{"source":"iana"},"application/vnd.age":{"source":"iana","extensions":["age"]},"application/vnd.ah-barcode":{"source":"iana"},"application/vnd.ahead.space":{"source":"iana","extensions":["ahead"]},"application/vnd.airzip.filesecure.azf":{"source":"iana","extensions":["azf"]},"application/vnd.airzip.filesecure.azs":{"source":"iana","extensions":["azs"]},"application/vnd.amadeus+json":{"source":"iana","compressible":true},"application/vnd.amazon.ebook":{"source":"apache","extensions":["azw"]},"application/vnd.amazon.mobi8-ebook":{"source":"iana"},"application/vnd.americandynamics.acc":{"source":"iana","extensions":["acc"]},"application/vnd.amiga.ami":{"source":"iana","extensions":["ami"]},"application/vnd.amundsen.maze+xml":{"source":"iana","compressible":true},"application/vnd.android.ota":{"source":"iana"},"application/vnd.android.package-archive":{"source":"apache","compressible":false,"extensions":["apk"]},"application/vnd.anki":{"source":"iana"},"application/vnd.anser-web-certificate-issue-initiation":{"source":"iana","extensions":["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{"source":"apache","extensions":["fti"]},"application/vnd.antix.game-component":{"source":"iana","extensions":["atx"]},"application/vnd.apache.arrow.file":{"source":"iana"},"application/vnd.apache.arrow.stream":{"source":"iana"},"application/vnd.apache.thrift.binary":{"source":"iana"},"application/vnd.apache.thrift.compact":{"source":"iana"},"application/vnd.apache.thrift.json":{"source":"iana"},"application/vnd.api+json":{"source":"iana","compressible":true},"application/vnd.aplextor.warrp+json":{"source":"iana","compressible":true},"application/vnd.apothekende.reservation+json":{"source":"iana","compressible":true},"application/vnd.apple.installer+xml":{"source":"iana","compressible":true,"extensions":["mpkg"]},"application/vnd.apple.keynote":{"source":"iana","extensions":["key"]},"application/vnd.apple.mpegurl":{"source":"iana","extensions":["m3u8"]},"application/vnd.apple.numbers":{"source":"iana","extensions":["numbers"]},"application/vnd.apple.pages":{"source":"iana","extensions":["pages"]},"application/vnd.apple.pkpass":{"compressible":false,"extensions":["pkpass"]},"application/vnd.arastra.swi":{"source":"iana"},"application/vnd.aristanetworks.swi":{"source":"iana","extensions":["swi"]},"application/vnd.artisan+json":{"source":"iana","compressible":true},"application/vnd.artsquare":{"source":"iana"},"application/vnd.astraea-software.iota":{"source":"iana","extensions":["iota"]},"application/vnd.audiograph":{"source":"iana","extensions":["aep"]},"application/vnd.autopackage":{"source":"iana"},"application/vnd.avalon+json":{"source":"iana","compressible":true},"application/vnd.avistar+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmml+xml":{"source":"iana","compressible":true,"extensions":["bmml"]},"application/vnd.balsamiq.bmpr":{"source":"iana"},"application/vnd.banana-accounting":{"source":"iana"},"application/vnd.bbf.usp.error":{"source":"iana"},"application/vnd.bbf.usp.msg":{"source":"iana"},"application/vnd.bbf.usp.msg+json":{"source":"iana","compressible":true},"application/vnd.bekitzur-stech+json":{"source":"iana","compressible":true},"application/vnd.bint.med-content":{"source":"iana"},"application/vnd.biopax.rdf+xml":{"source":"iana","compressible":true},"application/vnd.blink-idb-value-wrapper":{"source":"iana"},"application/vnd.blueice.multipass":{"source":"iana","extensions":["mpm"]},"application/vnd.bluetooth.ep.oob":{"source":"iana"},"application/vnd.bluetooth.le.oob":{"source":"iana"},"application/vnd.bmi":{"source":"iana","extensions":["bmi"]},"application/vnd.bpf":{"source":"iana"},"application/vnd.bpf3":{"source":"iana"},"application/vnd.businessobjects":{"source":"iana","extensions":["rep"]},"application/vnd.byu.uapi+json":{"source":"iana","compressible":true},"application/vnd.cab-jscript":{"source":"iana"},"application/vnd.canon-cpdl":{"source":"iana"},"application/vnd.canon-lips":{"source":"iana"},"application/vnd.capasystems-pg+json":{"source":"iana","compressible":true},"application/vnd.cendio.thinlinc.clientconf":{"source":"iana"},"application/vnd.century-systems.tcp_stream":{"source":"iana"},"application/vnd.chemdraw+xml":{"source":"iana","compressible":true,"extensions":["cdxml"]},"application/vnd.chess-pgn":{"source":"iana"},"application/vnd.chipnuts.karaoke-mmd":{"source":"iana","extensions":["mmd"]},"application/vnd.ciedi":{"source":"iana"},"application/vnd.cinderella":{"source":"iana","extensions":["cdy"]},"application/vnd.cirpack.isdn-ext":{"source":"iana"},"application/vnd.citationstyles.style+xml":{"source":"iana","compressible":true,"extensions":["csl"]},"application/vnd.claymore":{"source":"iana","extensions":["cla"]},"application/vnd.cloanto.rp9":{"source":"iana","extensions":["rp9"]},"application/vnd.clonk.c4group":{"source":"iana","extensions":["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{"source":"iana","extensions":["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{"source":"iana","extensions":["c11amz"]},"application/vnd.coffeescript":{"source":"iana"},"application/vnd.collabio.xodocuments.document":{"source":"iana"},"application/vnd.collabio.xodocuments.document-template":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation-template":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{"source":"iana"},"application/vnd.collection+json":{"source":"iana","compressible":true},"application/vnd.collection.doc+json":{"source":"iana","compressible":true},"application/vnd.collection.next+json":{"source":"iana","compressible":true},"application/vnd.comicbook+zip":{"source":"iana","compressible":false},"application/vnd.comicbook-rar":{"source":"iana"},"application/vnd.commerce-battelle":{"source":"iana"},"application/vnd.commonspace":{"source":"iana","extensions":["csp"]},"application/vnd.contact.cmsg":{"source":"iana","extensions":["cdbcmsg"]},"application/vnd.coreos.ignition+json":{"source":"iana","compressible":true},"application/vnd.cosmocaller":{"source":"iana","extensions":["cmc"]},"application/vnd.crick.clicker":{"source":"iana","extensions":["clkx"]},"application/vnd.crick.clicker.keyboard":{"source":"iana","extensions":["clkk"]},"application/vnd.crick.clicker.palette":{"source":"iana","extensions":["clkp"]},"application/vnd.crick.clicker.template":{"source":"iana","extensions":["clkt"]},"application/vnd.crick.clicker.wordbank":{"source":"iana","extensions":["clkw"]},"application/vnd.criticaltools.wbs+xml":{"source":"iana","compressible":true,"extensions":["wbs"]},"application/vnd.cryptii.pipe+json":{"source":"iana","compressible":true},"application/vnd.crypto-shade-file":{"source":"iana"},"application/vnd.cryptomator.encrypted":{"source":"iana"},"application/vnd.cryptomator.vault":{"source":"iana"},"application/vnd.ctc-posml":{"source":"iana","extensions":["pml"]},"application/vnd.ctct.ws+xml":{"source":"iana","compressible":true},"application/vnd.cups-pdf":{"source":"iana"},"application/vnd.cups-postscript":{"source":"iana"},"application/vnd.cups-ppd":{"source":"iana","extensions":["ppd"]},"application/vnd.cups-raster":{"source":"iana"},"application/vnd.cups-raw":{"source":"iana"},"application/vnd.curl":{"source":"iana"},"application/vnd.curl.car":{"source":"apache","extensions":["car"]},"application/vnd.curl.pcurl":{"source":"apache","extensions":["pcurl"]},"application/vnd.cyan.dean.root+xml":{"source":"iana","compressible":true},"application/vnd.cybank":{"source":"iana"},"application/vnd.cyclonedx+json":{"source":"iana","compressible":true},"application/vnd.cyclonedx+xml":{"source":"iana","compressible":true},"application/vnd.d2l.coursepackage1p0+zip":{"source":"iana","compressible":false},"application/vnd.d3m-dataset":{"source":"iana"},"application/vnd.d3m-problem":{"source":"iana"},"application/vnd.dart":{"source":"iana","compressible":true,"extensions":["dart"]},"application/vnd.data-vision.rdz":{"source":"iana","extensions":["rdz"]},"application/vnd.datapackage+json":{"source":"iana","compressible":true},"application/vnd.dataresource+json":{"source":"iana","compressible":true},"application/vnd.dbf":{"source":"iana","extensions":["dbf"]},"application/vnd.debian.binary-package":{"source":"iana"},"application/vnd.dece.data":{"source":"iana","extensions":["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{"source":"iana","compressible":true,"extensions":["uvt","uvvt"]},"application/vnd.dece.unspecified":{"source":"iana","extensions":["uvx","uvvx"]},"application/vnd.dece.zip":{"source":"iana","extensions":["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{"source":"iana","extensions":["fe_launch"]},"application/vnd.desmume.movie":{"source":"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{"source":"iana"},"application/vnd.dm.delegation+xml":{"source":"iana","compressible":true},"application/vnd.dna":{"source":"iana","extensions":["dna"]},"application/vnd.document+json":{"source":"iana","compressible":true},"application/vnd.dolby.mlp":{"source":"apache","extensions":["mlp"]},"application/vnd.dolby.mobile.1":{"source":"iana"},"application/vnd.dolby.mobile.2":{"source":"iana"},"application/vnd.doremir.scorecloud-binary-document":{"source":"iana"},"application/vnd.dpgraph":{"source":"iana","extensions":["dpg"]},"application/vnd.dreamfactory":{"source":"iana","extensions":["dfac"]},"application/vnd.drive+json":{"source":"iana","compressible":true},"application/vnd.ds-keypoint":{"source":"apache","extensions":["kpxx"]},"application/vnd.dtg.local":{"source":"iana"},"application/vnd.dtg.local.flash":{"source":"iana"},"application/vnd.dtg.local.html":{"source":"iana"},"application/vnd.dvb.ait":{"source":"iana","extensions":["ait"]},"application/vnd.dvb.dvbisl+xml":{"source":"iana","compressible":true},"application/vnd.dvb.dvbj":{"source":"iana"},"application/vnd.dvb.esgcontainer":{"source":"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess2":{"source":"iana"},"application/vnd.dvb.ipdcesgpdd":{"source":"iana"},"application/vnd.dvb.ipdcroaming":{"source":"iana"},"application/vnd.dvb.iptv.alfec-base":{"source":"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{"source":"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-container+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-generic+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-msglist+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-request+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-response+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-init+xml":{"source":"iana","compressible":true},"application/vnd.dvb.pfr":{"source":"iana"},"application/vnd.dvb.service":{"source":"iana","extensions":["svc"]},"application/vnd.dxr":{"source":"iana"},"application/vnd.dynageo":{"source":"iana","extensions":["geo"]},"application/vnd.dzr":{"source":"iana"},"application/vnd.easykaraoke.cdgdownload":{"source":"iana"},"application/vnd.ecdis-update":{"source":"iana"},"application/vnd.ecip.rlp":{"source":"iana"},"application/vnd.ecowin.chart":{"source":"iana","extensions":["mag"]},"application/vnd.ecowin.filerequest":{"source":"iana"},"application/vnd.ecowin.fileupdate":{"source":"iana"},"application/vnd.ecowin.series":{"source":"iana"},"application/vnd.ecowin.seriesrequest":{"source":"iana"},"application/vnd.ecowin.seriesupdate":{"source":"iana"},"application/vnd.efi.img":{"source":"iana"},"application/vnd.efi.iso":{"source":"iana"},"application/vnd.emclient.accessrequest+xml":{"source":"iana","compressible":true},"application/vnd.enliven":{"source":"iana","extensions":["nml"]},"application/vnd.enphase.envoy":{"source":"iana"},"application/vnd.eprints.data+xml":{"source":"iana","compressible":true},"application/vnd.epson.esf":{"source":"iana","extensions":["esf"]},"application/vnd.epson.msf":{"source":"iana","extensions":["msf"]},"application/vnd.epson.quickanime":{"source":"iana","extensions":["qam"]},"application/vnd.epson.salt":{"source":"iana","extensions":["slt"]},"application/vnd.epson.ssf":{"source":"iana","extensions":["ssf"]},"application/vnd.ericsson.quickcall":{"source":"iana"},"application/vnd.espass-espass+zip":{"source":"iana","compressible":false},"application/vnd.eszigno3+xml":{"source":"iana","compressible":true,"extensions":["es3","et3"]},"application/vnd.etsi.aoc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.asic-e+zip":{"source":"iana","compressible":false},"application/vnd.etsi.asic-s+zip":{"source":"iana","compressible":false},"application/vnd.etsi.cug+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvcommand+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-bc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-cod+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-npvr+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvservice+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsync+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvueprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mcid+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mheg5":{"source":"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{"source":"iana","compressible":true},"application/vnd.etsi.pstn+xml":{"source":"iana","compressible":true},"application/vnd.etsi.sci+xml":{"source":"iana","compressible":true},"application/vnd.etsi.simservs+xml":{"source":"iana","compressible":true},"application/vnd.etsi.timestamp-token":{"source":"iana"},"application/vnd.etsi.tsl+xml":{"source":"iana","compressible":true},"application/vnd.etsi.tsl.der":{"source":"iana"},"application/vnd.eudora.data":{"source":"iana"},"application/vnd.evolv.ecig.profile":{"source":"iana"},"application/vnd.evolv.ecig.settings":{"source":"iana"},"application/vnd.evolv.ecig.theme":{"source":"iana"},"application/vnd.exstream-empower+zip":{"source":"iana","compressible":false},"application/vnd.exstream-package":{"source":"iana"},"application/vnd.ezpix-album":{"source":"iana","extensions":["ez2"]},"application/vnd.ezpix-package":{"source":"iana","extensions":["ez3"]},"application/vnd.f-secure.mobile":{"source":"iana"},"application/vnd.fastcopy-disk-image":{"source":"iana"},"application/vnd.fdf":{"source":"iana","extensions":["fdf"]},"application/vnd.fdsn.mseed":{"source":"iana","extensions":["mseed"]},"application/vnd.fdsn.seed":{"source":"iana","extensions":["seed","dataless"]},"application/vnd.ffsns":{"source":"iana"},"application/vnd.ficlab.flb+zip":{"source":"iana","compressible":false},"application/vnd.filmit.zfc":{"source":"iana"},"application/vnd.fints":{"source":"iana"},"application/vnd.firemonkeys.cloudcell":{"source":"iana"},"application/vnd.flographit":{"source":"iana","extensions":["gph"]},"application/vnd.fluxtime.clip":{"source":"iana","extensions":["ftc"]},"application/vnd.font-fontforge-sfd":{"source":"iana"},"application/vnd.framemaker":{"source":"iana","extensions":["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{"source":"iana","extensions":["fnc"]},"application/vnd.frogans.ltf":{"source":"iana","extensions":["ltf"]},"application/vnd.fsc.weblaunch":{"source":"iana","extensions":["fsc"]},"application/vnd.fujifilm.fb.docuworks":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.container":{"source":"iana"},"application/vnd.fujifilm.fb.jfi+xml":{"source":"iana","compressible":true},"application/vnd.fujitsu.oasys":{"source":"iana","extensions":["oas"]},"application/vnd.fujitsu.oasys2":{"source":"iana","extensions":["oa2"]},"application/vnd.fujitsu.oasys3":{"source":"iana","extensions":["oa3"]},"application/vnd.fujitsu.oasysgp":{"source":"iana","extensions":["fg5"]},"application/vnd.fujitsu.oasysprs":{"source":"iana","extensions":["bh2"]},"application/vnd.fujixerox.art-ex":{"source":"iana"},"application/vnd.fujixerox.art4":{"source":"iana"},"application/vnd.fujixerox.ddd":{"source":"iana","extensions":["ddd"]},"application/vnd.fujixerox.docuworks":{"source":"iana","extensions":["xdw"]},"application/vnd.fujixerox.docuworks.binder":{"source":"iana","extensions":["xbd"]},"application/vnd.fujixerox.docuworks.container":{"source":"iana"},"application/vnd.fujixerox.hbpl":{"source":"iana"},"application/vnd.fut-misnet":{"source":"iana"},"application/vnd.futoin+cbor":{"source":"iana"},"application/vnd.futoin+json":{"source":"iana","compressible":true},"application/vnd.fuzzysheet":{"source":"iana","extensions":["fzs"]},"application/vnd.genomatix.tuxedo":{"source":"iana","extensions":["txd"]},"application/vnd.gentics.grd+json":{"source":"iana","compressible":true},"application/vnd.geo+json":{"source":"iana","compressible":true},"application/vnd.geocube+xml":{"source":"iana","compressible":true},"application/vnd.geogebra.file":{"source":"iana","extensions":["ggb"]},"application/vnd.geogebra.slides":{"source":"iana"},"application/vnd.geogebra.tool":{"source":"iana","extensions":["ggt"]},"application/vnd.geometry-explorer":{"source":"iana","extensions":["gex","gre"]},"application/vnd.geonext":{"source":"iana","extensions":["gxt"]},"application/vnd.geoplan":{"source":"iana","extensions":["g2w"]},"application/vnd.geospace":{"source":"iana","extensions":["g3w"]},"application/vnd.gerber":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt-response":{"source":"iana"},"application/vnd.gmx":{"source":"iana","extensions":["gmx"]},"application/vnd.google-apps.document":{"compressible":false,"extensions":["gdoc"]},"application/vnd.google-apps.presentation":{"compressible":false,"extensions":["gslides"]},"application/vnd.google-apps.spreadsheet":{"compressible":false,"extensions":["gsheet"]},"application/vnd.google-earth.kml+xml":{"source":"iana","compressible":true,"extensions":["kml"]},"application/vnd.google-earth.kmz":{"source":"iana","compressible":false,"extensions":["kmz"]},"application/vnd.gov.sk.e-form+xml":{"source":"iana","compressible":true},"application/vnd.gov.sk.e-form+zip":{"source":"iana","compressible":false},"application/vnd.gov.sk.xmldatacontainer+xml":{"source":"iana","compressible":true},"application/vnd.grafeq":{"source":"iana","extensions":["gqf","gqs"]},"application/vnd.gridmp":{"source":"iana"},"application/vnd.groove-account":{"source":"iana","extensions":["gac"]},"application/vnd.groove-help":{"source":"iana","extensions":["ghf"]},"application/vnd.groove-identity-message":{"source":"iana","extensions":["gim"]},"application/vnd.groove-injector":{"source":"iana","extensions":["grv"]},"application/vnd.groove-tool-message":{"source":"iana","extensions":["gtm"]},"application/vnd.groove-tool-template":{"source":"iana","extensions":["tpl"]},"application/vnd.groove-vcard":{"source":"iana","extensions":["vcg"]},"application/vnd.hal+json":{"source":"iana","compressible":true},"application/vnd.hal+xml":{"source":"iana","compressible":true,"extensions":["hal"]},"application/vnd.handheld-entertainment+xml":{"source":"iana","compressible":true,"extensions":["zmm"]},"application/vnd.hbci":{"source":"iana","extensions":["hbci"]},"application/vnd.hc+json":{"source":"iana","compressible":true},"application/vnd.hcl-bireports":{"source":"iana"},"application/vnd.hdt":{"source":"iana"},"application/vnd.heroku+json":{"source":"iana","compressible":true},"application/vnd.hhe.lesson-player":{"source":"iana","extensions":["les"]},"application/vnd.hp-hpgl":{"source":"iana","extensions":["hpgl"]},"application/vnd.hp-hpid":{"source":"iana","extensions":["hpid"]},"application/vnd.hp-hps":{"source":"iana","extensions":["hps"]},"application/vnd.hp-jlyt":{"source":"iana","extensions":["jlt"]},"application/vnd.hp-pcl":{"source":"iana","extensions":["pcl"]},"application/vnd.hp-pclxl":{"source":"iana","extensions":["pclxl"]},"application/vnd.httphone":{"source":"iana"},"application/vnd.hydrostatix.sof-data":{"source":"iana","extensions":["sfd-hdstx"]},"application/vnd.hyper+json":{"source":"iana","compressible":true},"application/vnd.hyper-item+json":{"source":"iana","compressible":true},"application/vnd.hyperdrive+json":{"source":"iana","compressible":true},"application/vnd.hzn-3d-crossword":{"source":"iana"},"application/vnd.ibm.afplinedata":{"source":"iana"},"application/vnd.ibm.electronic-media":{"source":"iana"},"application/vnd.ibm.minipay":{"source":"iana","extensions":["mpy"]},"application/vnd.ibm.modcap":{"source":"iana","extensions":["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{"source":"iana","extensions":["irm"]},"application/vnd.ibm.secure-container":{"source":"iana","extensions":["sc"]},"application/vnd.iccprofile":{"source":"iana","extensions":["icc","icm"]},"application/vnd.ieee.1905":{"source":"iana"},"application/vnd.igloader":{"source":"iana","extensions":["igl"]},"application/vnd.imagemeter.folder+zip":{"source":"iana","compressible":false},"application/vnd.imagemeter.image+zip":{"source":"iana","compressible":false},"application/vnd.immervision-ivp":{"source":"iana","extensions":["ivp"]},"application/vnd.immervision-ivu":{"source":"iana","extensions":["ivu"]},"application/vnd.ims.imsccv1p1":{"source":"iana"},"application/vnd.ims.imsccv1p2":{"source":"iana"},"application/vnd.ims.imsccv1p3":{"source":"iana"},"application/vnd.ims.lis.v2.result+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy.id+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{"source":"iana","compressible":true},"application/vnd.informedcontrol.rms+xml":{"source":"iana","compressible":true},"application/vnd.informix-visionary":{"source":"iana"},"application/vnd.infotech.project":{"source":"iana"},"application/vnd.infotech.project+xml":{"source":"iana","compressible":true},"application/vnd.innopath.wamp.notification":{"source":"iana"},"application/vnd.insors.igm":{"source":"iana","extensions":["igm"]},"application/vnd.intercon.formnet":{"source":"iana","extensions":["xpw","xpx"]},"application/vnd.intergeo":{"source":"iana","extensions":["i2g"]},"application/vnd.intertrust.digibox":{"source":"iana"},"application/vnd.intertrust.nncp":{"source":"iana"},"application/vnd.intu.qbo":{"source":"iana","extensions":["qbo"]},"application/vnd.intu.qfx":{"source":"iana","extensions":["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.conceptitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.knowledgeitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsmessage+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.packageitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.planningitem+xml":{"source":"iana","compressible":true},"application/vnd.ipunplugged.rcprofile":{"source":"iana","extensions":["rcprofile"]},"application/vnd.irepository.package+xml":{"source":"iana","compressible":true,"extensions":["irp"]},"application/vnd.is-xpr":{"source":"iana","extensions":["xpr"]},"application/vnd.isac.fcs":{"source":"iana","extensions":["fcs"]},"application/vnd.iso11783-10+zip":{"source":"iana","compressible":false},"application/vnd.jam":{"source":"iana","extensions":["jam"]},"application/vnd.japannet-directory-service":{"source":"iana"},"application/vnd.japannet-jpnstore-wakeup":{"source":"iana"},"application/vnd.japannet-payment-wakeup":{"source":"iana"},"application/vnd.japannet-registration":{"source":"iana"},"application/vnd.japannet-registration-wakeup":{"source":"iana"},"application/vnd.japannet-setstore-wakeup":{"source":"iana"},"application/vnd.japannet-verification":{"source":"iana"},"application/vnd.japannet-verification-wakeup":{"source":"iana"},"application/vnd.jcp.javame.midlet-rms":{"source":"iana","extensions":["rms"]},"application/vnd.jisp":{"source":"iana","extensions":["jisp"]},"application/vnd.joost.joda-archive":{"source":"iana","extensions":["joda"]},"application/vnd.jsk.isdn-ngn":{"source":"iana"},"application/vnd.kahootz":{"source":"iana","extensions":["ktz","ktr"]},"application/vnd.kde.karbon":{"source":"iana","extensions":["karbon"]},"application/vnd.kde.kchart":{"source":"iana","extensions":["chrt"]},"application/vnd.kde.kformula":{"source":"iana","extensions":["kfo"]},"application/vnd.kde.kivio":{"source":"iana","extensions":["flw"]},"application/vnd.kde.kontour":{"source":"iana","extensions":["kon"]},"application/vnd.kde.kpresenter":{"source":"iana","extensions":["kpr","kpt"]},"application/vnd.kde.kspread":{"source":"iana","extensions":["ksp"]},"application/vnd.kde.kword":{"source":"iana","extensions":["kwd","kwt"]},"application/vnd.kenameaapp":{"source":"iana","extensions":["htke"]},"application/vnd.kidspiration":{"source":"iana","extensions":["kia"]},"application/vnd.kinar":{"source":"iana","extensions":["kne","knp"]},"application/vnd.koan":{"source":"iana","extensions":["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{"source":"iana","extensions":["sse"]},"application/vnd.las":{"source":"iana"},"application/vnd.las.las+json":{"source":"iana","compressible":true},"application/vnd.las.las+xml":{"source":"iana","compressible":true,"extensions":["lasxml"]},"application/vnd.laszip":{"source":"iana"},"application/vnd.leap+json":{"source":"iana","compressible":true},"application/vnd.liberty-request+xml":{"source":"iana","compressible":true},"application/vnd.llamagraphics.life-balance.desktop":{"source":"iana","extensions":["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{"source":"iana","compressible":true,"extensions":["lbe"]},"application/vnd.logipipe.circuit+zip":{"source":"iana","compressible":false},"application/vnd.loom":{"source":"iana"},"application/vnd.lotus-1-2-3":{"source":"iana","extensions":["123"]},"application/vnd.lotus-approach":{"source":"iana","extensions":["apr"]},"application/vnd.lotus-freelance":{"source":"iana","extensions":["pre"]},"application/vnd.lotus-notes":{"source":"iana","extensions":["nsf"]},"application/vnd.lotus-organizer":{"source":"iana","extensions":["org"]},"application/vnd.lotus-screencam":{"source":"iana","extensions":["scm"]},"application/vnd.lotus-wordpro":{"source":"iana","extensions":["lwp"]},"application/vnd.macports.portpkg":{"source":"iana","extensions":["portpkg"]},"application/vnd.mapbox-vector-tile":{"source":"iana","extensions":["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.conftoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.license+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.mdcf":{"source":"iana"},"application/vnd.mason+json":{"source":"iana","compressible":true},"application/vnd.maxmind.maxmind-db":{"source":"iana"},"application/vnd.mcd":{"source":"iana","extensions":["mcd"]},"application/vnd.medcalcdata":{"source":"iana","extensions":["mc1"]},"application/vnd.mediastation.cdkey":{"source":"iana","extensions":["cdkey"]},"application/vnd.meridian-slingshot":{"source":"iana"},"application/vnd.mfer":{"source":"iana","extensions":["mwf"]},"application/vnd.mfmp":{"source":"iana","extensions":["mfm"]},"application/vnd.micro+json":{"source":"iana","compressible":true},"application/vnd.micrografx.flo":{"source":"iana","extensions":["flo"]},"application/vnd.micrografx.igx":{"source":"iana","extensions":["igx"]},"application/vnd.microsoft.portable-executable":{"source":"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{"source":"iana"},"application/vnd.miele+json":{"source":"iana","compressible":true},"application/vnd.mif":{"source":"iana","extensions":["mif"]},"application/vnd.minisoft-hp3000-save":{"source":"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{"source":"iana"},"application/vnd.mobius.daf":{"source":"iana","extensions":["daf"]},"application/vnd.mobius.dis":{"source":"iana","extensions":["dis"]},"application/vnd.mobius.mbk":{"source":"iana","extensions":["mbk"]},"application/vnd.mobius.mqy":{"source":"iana","extensions":["mqy"]},"application/vnd.mobius.msl":{"source":"iana","extensions":["msl"]},"application/vnd.mobius.plc":{"source":"iana","extensions":["plc"]},"application/vnd.mobius.txf":{"source":"iana","extensions":["txf"]},"application/vnd.mophun.application":{"source":"iana","extensions":["mpn"]},"application/vnd.mophun.certificate":{"source":"iana","extensions":["mpc"]},"application/vnd.motorola.flexsuite":{"source":"iana"},"application/vnd.motorola.flexsuite.adsi":{"source":"iana"},"application/vnd.motorola.flexsuite.fis":{"source":"iana"},"application/vnd.motorola.flexsuite.gotap":{"source":"iana"},"application/vnd.motorola.flexsuite.kmr":{"source":"iana"},"application/vnd.motorola.flexsuite.ttc":{"source":"iana"},"application/vnd.motorola.flexsuite.wem":{"source":"iana"},"application/vnd.motorola.iprm":{"source":"iana"},"application/vnd.mozilla.xul+xml":{"source":"iana","compressible":true,"extensions":["xul"]},"application/vnd.ms-3mfdocument":{"source":"iana"},"application/vnd.ms-artgalry":{"source":"iana","extensions":["cil"]},"application/vnd.ms-asf":{"source":"iana"},"application/vnd.ms-cab-compressed":{"source":"iana","extensions":["cab"]},"application/vnd.ms-color.iccprofile":{"source":"apache"},"application/vnd.ms-excel":{"source":"iana","compressible":false,"extensions":["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{"source":"iana","extensions":["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{"source":"iana","extensions":["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{"source":"iana","extensions":["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{"source":"iana","extensions":["xltm"]},"application/vnd.ms-fontobject":{"source":"iana","compressible":true,"extensions":["eot"]},"application/vnd.ms-htmlhelp":{"source":"iana","extensions":["chm"]},"application/vnd.ms-ims":{"source":"iana","extensions":["ims"]},"application/vnd.ms-lrm":{"source":"iana","extensions":["lrm"]},"application/vnd.ms-office.activex+xml":{"source":"iana","compressible":true},"application/vnd.ms-officetheme":{"source":"iana","extensions":["thmx"]},"application/vnd.ms-opentype":{"source":"apache","compressible":true},"application/vnd.ms-outlook":{"compressible":false,"extensions":["msg"]},"application/vnd.ms-package.obfuscated-opentype":{"source":"apache"},"application/vnd.ms-pki.seccat":{"source":"apache","extensions":["cat"]},"application/vnd.ms-pki.stl":{"source":"apache","extensions":["stl"]},"application/vnd.ms-playready.initiator+xml":{"source":"iana","compressible":true},"application/vnd.ms-powerpoint":{"source":"iana","compressible":false,"extensions":["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{"source":"iana","extensions":["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{"source":"iana","extensions":["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{"source":"iana","extensions":["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{"source":"iana","extensions":["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{"source":"iana","extensions":["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{"source":"iana","compressible":true},"application/vnd.ms-printing.printticket+xml":{"source":"apache","compressible":true},"application/vnd.ms-printschematicket+xml":{"source":"iana","compressible":true},"application/vnd.ms-project":{"source":"iana","extensions":["mpp","mpt"]},"application/vnd.ms-tnef":{"source":"iana"},"application/vnd.ms-windows.devicepairing":{"source":"iana"},"application/vnd.ms-windows.nwprinting.oob":{"source":"iana"},"application/vnd.ms-windows.printerpairing":{"source":"iana"},"application/vnd.ms-windows.wsd.oob":{"source":"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.lic-resp":{"source":"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.meter-resp":{"source":"iana"},"application/vnd.ms-word.document.macroenabled.12":{"source":"iana","extensions":["docm"]},"application/vnd.ms-word.template.macroenabled.12":{"source":"iana","extensions":["dotm"]},"application/vnd.ms-works":{"source":"iana","extensions":["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{"source":"iana","extensions":["wpl"]},"application/vnd.ms-xpsdocument":{"source":"iana","compressible":false,"extensions":["xps"]},"application/vnd.msa-disk-image":{"source":"iana"},"application/vnd.mseq":{"source":"iana","extensions":["mseq"]},"application/vnd.msign":{"source":"iana"},"application/vnd.multiad.creator":{"source":"iana"},"application/vnd.multiad.creator.cif":{"source":"iana"},"application/vnd.music-niff":{"source":"iana"},"application/vnd.musician":{"source":"iana","extensions":["mus"]},"application/vnd.muvee.style":{"source":"iana","extensions":["msty"]},"application/vnd.mynfc":{"source":"iana","extensions":["taglet"]},"application/vnd.nacamar.ybrid+json":{"source":"iana","compressible":true},"application/vnd.ncd.control":{"source":"iana"},"application/vnd.ncd.reference":{"source":"iana"},"application/vnd.nearst.inv+json":{"source":"iana","compressible":true},"application/vnd.nebumind.line":{"source":"iana"},"application/vnd.nervana":{"source":"iana"},"application/vnd.netfpx":{"source":"iana"},"application/vnd.neurolanguage.nlu":{"source":"iana","extensions":["nlu"]},"application/vnd.nimn":{"source":"iana"},"application/vnd.nintendo.nitro.rom":{"source":"iana"},"application/vnd.nintendo.snes.rom":{"source":"iana"},"application/vnd.nitf":{"source":"iana","extensions":["ntf","nitf"]},"application/vnd.noblenet-directory":{"source":"iana","extensions":["nnd"]},"application/vnd.noblenet-sealer":{"source":"iana","extensions":["nns"]},"application/vnd.noblenet-web":{"source":"iana","extensions":["nnw"]},"application/vnd.nokia.catalogs":{"source":"iana"},"application/vnd.nokia.conml+wbxml":{"source":"iana"},"application/vnd.nokia.conml+xml":{"source":"iana","compressible":true},"application/vnd.nokia.iptv.config+xml":{"source":"iana","compressible":true},"application/vnd.nokia.isds-radio-presets":{"source":"iana"},"application/vnd.nokia.landmark+wbxml":{"source":"iana"},"application/vnd.nokia.landmark+xml":{"source":"iana","compressible":true},"application/vnd.nokia.landmarkcollection+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.ac+xml":{"source":"iana","compressible":true,"extensions":["ac"]},"application/vnd.nokia.n-gage.data":{"source":"iana","extensions":["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{"source":"iana","extensions":["n-gage"]},"application/vnd.nokia.ncd":{"source":"iana"},"application/vnd.nokia.pcd+wbxml":{"source":"iana"},"application/vnd.nokia.pcd+xml":{"source":"iana","compressible":true},"application/vnd.nokia.radio-preset":{"source":"iana","extensions":["rpst"]},"application/vnd.nokia.radio-presets":{"source":"iana","extensions":["rpss"]},"application/vnd.novadigm.edm":{"source":"iana","extensions":["edm"]},"application/vnd.novadigm.edx":{"source":"iana","extensions":["edx"]},"application/vnd.novadigm.ext":{"source":"iana","extensions":["ext"]},"application/vnd.ntt-local.content-share":{"source":"iana"},"application/vnd.ntt-local.file-transfer":{"source":"iana"},"application/vnd.ntt-local.ogw_remote-access":{"source":"iana"},"application/vnd.ntt-local.sip-ta_remote":{"source":"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{"source":"iana"},"application/vnd.oasis.opendocument.chart":{"source":"iana","extensions":["odc"]},"application/vnd.oasis.opendocument.chart-template":{"source":"iana","extensions":["otc"]},"application/vnd.oasis.opendocument.database":{"source":"iana","extensions":["odb"]},"application/vnd.oasis.opendocument.formula":{"source":"iana","extensions":["odf"]},"application/vnd.oasis.opendocument.formula-template":{"source":"iana","extensions":["odft"]},"application/vnd.oasis.opendocument.graphics":{"source":"iana","compressible":false,"extensions":["odg"]},"application/vnd.oasis.opendocument.graphics-template":{"source":"iana","extensions":["otg"]},"application/vnd.oasis.opendocument.image":{"source":"iana","extensions":["odi"]},"application/vnd.oasis.opendocument.image-template":{"source":"iana","extensions":["oti"]},"application/vnd.oasis.opendocument.presentation":{"source":"iana","compressible":false,"extensions":["odp"]},"application/vnd.oasis.opendocument.presentation-template":{"source":"iana","extensions":["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{"source":"iana","compressible":false,"extensions":["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{"source":"iana","extensions":["ots"]},"application/vnd.oasis.opendocument.text":{"source":"iana","compressible":false,"extensions":["odt"]},"application/vnd.oasis.opendocument.text-master":{"source":"iana","extensions":["odm"]},"application/vnd.oasis.opendocument.text-template":{"source":"iana","extensions":["ott"]},"application/vnd.oasis.opendocument.text-web":{"source":"iana","extensions":["oth"]},"application/vnd.obn":{"source":"iana"},"application/vnd.ocf+cbor":{"source":"iana"},"application/vnd.oci.image.manifest.v1+json":{"source":"iana","compressible":true},"application/vnd.oftn.l10n+json":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessdownload+xml":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessstreaming+xml":{"source":"iana","compressible":true},"application/vnd.oipf.cspg-hexbinary":{"source":"iana"},"application/vnd.oipf.dae.svg+xml":{"source":"iana","compressible":true},"application/vnd.oipf.dae.xhtml+xml":{"source":"iana","compressible":true},"application/vnd.oipf.mippvcontrolmessage+xml":{"source":"iana","compressible":true},"application/vnd.oipf.pae.gem":{"source":"iana"},"application/vnd.oipf.spdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.oipf.spdlist+xml":{"source":"iana","compressible":true},"application/vnd.oipf.ueprofile+xml":{"source":"iana","compressible":true},"application/vnd.oipf.userprofile+xml":{"source":"iana","compressible":true},"application/vnd.olpc-sugar":{"source":"iana","extensions":["xo"]},"application/vnd.oma-scws-config":{"source":"iana"},"application/vnd.oma-scws-http-request":{"source":"iana"},"application/vnd.oma-scws-http-response":{"source":"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.drm-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.imd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.ltkm":{"source":"iana"},"application/vnd.oma.bcast.notification+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.provisioningtrigger":{"source":"iana"},"application/vnd.oma.bcast.sgboot":{"source":"iana"},"application/vnd.oma.bcast.sgdd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sgdu":{"source":"iana"},"application/vnd.oma.bcast.simple-symbol-container":{"source":"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sprov+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.stkm":{"source":"iana"},"application/vnd.oma.cab-address-book+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-feature-handler+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-pcc+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-subs-invite+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-user-prefs+xml":{"source":"iana","compressible":true},"application/vnd.oma.dcd":{"source":"iana"},"application/vnd.oma.dcdc":{"source":"iana"},"application/vnd.oma.dd2+xml":{"source":"iana","compressible":true,"extensions":["dd2"]},"application/vnd.oma.drm.risd+xml":{"source":"iana","compressible":true},"application/vnd.oma.group-usage-list+xml":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+cbor":{"source":"iana"},"application/vnd.oma.lwm2m+json":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+tlv":{"source":"iana"},"application/vnd.oma.pal+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.detailed-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.final-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.groups+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.invocation-descriptor+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.optimized-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.push":{"source":"iana"},"application/vnd.oma.scidm.messages+xml":{"source":"iana","compressible":true},"application/vnd.oma.xcap-directory+xml":{"source":"iana","compressible":true},"application/vnd.omads-email+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-file+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-folder+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omaloc-supl-init":{"source":"iana"},"application/vnd.onepager":{"source":"iana"},"application/vnd.onepagertamp":{"source":"iana"},"application/vnd.onepagertamx":{"source":"iana"},"application/vnd.onepagertat":{"source":"iana"},"application/vnd.onepagertatp":{"source":"iana"},"application/vnd.onepagertatx":{"source":"iana"},"application/vnd.openblox.game+xml":{"source":"iana","compressible":true,"extensions":["obgx"]},"application/vnd.openblox.game-binary":{"source":"iana"},"application/vnd.openeye.oeb":{"source":"iana"},"application/vnd.openofficeorg.extension":{"source":"apache","extensions":["oxt"]},"application/vnd.openstreetmap.data+xml":{"source":"iana","compressible":true,"extensions":["osm"]},"application/vnd.opentimestamps.ots":{"source":"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawing+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{"source":"iana","compressible":false,"extensions":["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slide":{"source":"iana","extensions":["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{"source":"iana","extensions":["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.template":{"source":"iana","extensions":["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"source":"iana","compressible":false,"extensions":["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{"source":"iana","extensions":["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.theme+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.vmldrawing":{"source":"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"source":"iana","compressible":false,"extensions":["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{"source":"iana","extensions":["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.core-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.relationships+xml":{"source":"iana","compressible":true},"application/vnd.oracle.resource+json":{"source":"iana","compressible":true},"application/vnd.orange.indata":{"source":"iana"},"application/vnd.osa.netdeploy":{"source":"iana"},"application/vnd.osgeo.mapguide.package":{"source":"iana","extensions":["mgp"]},"application/vnd.osgi.bundle":{"source":"iana"},"application/vnd.osgi.dp":{"source":"iana","extensions":["dp"]},"application/vnd.osgi.subsystem":{"source":"iana","extensions":["esa"]},"application/vnd.otps.ct-kip+xml":{"source":"iana","compressible":true},"application/vnd.oxli.countgraph":{"source":"iana"},"application/vnd.pagerduty+json":{"source":"iana","compressible":true},"application/vnd.palm":{"source":"iana","extensions":["pdb","pqa","oprc"]},"application/vnd.panoply":{"source":"iana"},"application/vnd.paos.xml":{"source":"iana"},"application/vnd.patentdive":{"source":"iana"},"application/vnd.patientecommsdoc":{"source":"iana"},"application/vnd.pawaafile":{"source":"iana","extensions":["paw"]},"application/vnd.pcos":{"source":"iana"},"application/vnd.pg.format":{"source":"iana","extensions":["str"]},"application/vnd.pg.osasli":{"source":"iana","extensions":["ei6"]},"application/vnd.piaccess.application-licence":{"source":"iana"},"application/vnd.picsel":{"source":"iana","extensions":["efif"]},"application/vnd.pmi.widget":{"source":"iana","extensions":["wg"]},"application/vnd.poc.group-advertisement+xml":{"source":"iana","compressible":true},"application/vnd.pocketlearn":{"source":"iana","extensions":["plf"]},"application/vnd.powerbuilder6":{"source":"iana","extensions":["pbd"]},"application/vnd.powerbuilder6-s":{"source":"iana"},"application/vnd.powerbuilder7":{"source":"iana"},"application/vnd.powerbuilder7-s":{"source":"iana"},"application/vnd.powerbuilder75":{"source":"iana"},"application/vnd.powerbuilder75-s":{"source":"iana"},"application/vnd.preminet":{"source":"iana"},"application/vnd.previewsystems.box":{"source":"iana","extensions":["box"]},"application/vnd.proteus.magazine":{"source":"iana","extensions":["mgz"]},"application/vnd.psfs":{"source":"iana"},"application/vnd.publishare-delta-tree":{"source":"iana","extensions":["qps"]},"application/vnd.pvi.ptid1":{"source":"iana","extensions":["ptid"]},"application/vnd.pwg-multiplexed":{"source":"iana"},"application/vnd.pwg-xhtml-print+xml":{"source":"iana","compressible":true},"application/vnd.qualcomm.brew-app-res":{"source":"iana"},"application/vnd.quarantainenet":{"source":"iana"},"application/vnd.quark.quarkxpress":{"source":"iana","extensions":["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{"source":"iana"},"application/vnd.radisys.moml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conn+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-stream+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-base+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-detect+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-group+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-speech+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-transform+xml":{"source":"iana","compressible":true},"application/vnd.rainstor.data":{"source":"iana"},"application/vnd.rapid":{"source":"iana"},"application/vnd.rar":{"source":"iana","extensions":["rar"]},"application/vnd.realvnc.bed":{"source":"iana","extensions":["bed"]},"application/vnd.recordare.musicxml":{"source":"iana","extensions":["mxl"]},"application/vnd.recordare.musicxml+xml":{"source":"iana","compressible":true,"extensions":["musicxml"]},"application/vnd.renlearn.rlprint":{"source":"iana"},"application/vnd.resilient.logic":{"source":"iana"},"application/vnd.restful+json":{"source":"iana","compressible":true},"application/vnd.rig.cryptonote":{"source":"iana","extensions":["cryptonote"]},"application/vnd.rim.cod":{"source":"apache","extensions":["cod"]},"application/vnd.rn-realmedia":{"source":"apache","extensions":["rm"]},"application/vnd.rn-realmedia-vbr":{"source":"apache","extensions":["rmvb"]},"application/vnd.route66.link66+xml":{"source":"iana","compressible":true,"extensions":["link66"]},"application/vnd.rs-274x":{"source":"iana"},"application/vnd.ruckus.download":{"source":"iana"},"application/vnd.s3sms":{"source":"iana"},"application/vnd.sailingtracker.track":{"source":"iana","extensions":["st"]},"application/vnd.sar":{"source":"iana"},"application/vnd.sbm.cid":{"source":"iana"},"application/vnd.sbm.mid2":{"source":"iana"},"application/vnd.scribus":{"source":"iana"},"application/vnd.sealed.3df":{"source":"iana"},"application/vnd.sealed.csf":{"source":"iana"},"application/vnd.sealed.doc":{"source":"iana"},"application/vnd.sealed.eml":{"source":"iana"},"application/vnd.sealed.mht":{"source":"iana"},"application/vnd.sealed.net":{"source":"iana"},"application/vnd.sealed.ppt":{"source":"iana"},"application/vnd.sealed.tiff":{"source":"iana"},"application/vnd.sealed.xls":{"source":"iana"},"application/vnd.sealedmedia.softseal.html":{"source":"iana"},"application/vnd.sealedmedia.softseal.pdf":{"source":"iana"},"application/vnd.seemail":{"source":"iana","extensions":["see"]},"application/vnd.seis+json":{"source":"iana","compressible":true},"application/vnd.sema":{"source":"iana","extensions":["sema"]},"application/vnd.semd":{"source":"iana","extensions":["semd"]},"application/vnd.semf":{"source":"iana","extensions":["semf"]},"application/vnd.shade-save-file":{"source":"iana"},"application/vnd.shana.informed.formdata":{"source":"iana","extensions":["ifm"]},"application/vnd.shana.informed.formtemplate":{"source":"iana","extensions":["itp"]},"application/vnd.shana.informed.interchange":{"source":"iana","extensions":["iif"]},"application/vnd.shana.informed.package":{"source":"iana","extensions":["ipk"]},"application/vnd.shootproof+json":{"source":"iana","compressible":true},"application/vnd.shopkick+json":{"source":"iana","compressible":true},"application/vnd.shp":{"source":"iana"},"application/vnd.shx":{"source":"iana"},"application/vnd.sigrok.session":{"source":"iana"},"application/vnd.simtech-mindmapper":{"source":"iana","extensions":["twd","twds"]},"application/vnd.siren+json":{"source":"iana","compressible":true},"application/vnd.smaf":{"source":"iana","extensions":["mmf"]},"application/vnd.smart.notebook":{"source":"iana"},"application/vnd.smart.teacher":{"source":"iana","extensions":["teacher"]},"application/vnd.snesdev-page-table":{"source":"iana"},"application/vnd.software602.filler.form+xml":{"source":"iana","compressible":true,"extensions":["fo"]},"application/vnd.software602.filler.form-xml-zip":{"source":"iana"},"application/vnd.solent.sdkm+xml":{"source":"iana","compressible":true,"extensions":["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{"source":"iana","extensions":["dxp"]},"application/vnd.spotfire.sfs":{"source":"iana","extensions":["sfs"]},"application/vnd.sqlite3":{"source":"iana"},"application/vnd.sss-cod":{"source":"iana"},"application/vnd.sss-dtf":{"source":"iana"},"application/vnd.sss-ntf":{"source":"iana"},"application/vnd.stardivision.calc":{"source":"apache","extensions":["sdc"]},"application/vnd.stardivision.draw":{"source":"apache","extensions":["sda"]},"application/vnd.stardivision.impress":{"source":"apache","extensions":["sdd"]},"application/vnd.stardivision.math":{"source":"apache","extensions":["smf"]},"application/vnd.stardivision.writer":{"source":"apache","extensions":["sdw","vor"]},"application/vnd.stardivision.writer-global":{"source":"apache","extensions":["sgl"]},"application/vnd.stepmania.package":{"source":"iana","extensions":["smzip"]},"application/vnd.stepmania.stepchart":{"source":"iana","extensions":["sm"]},"application/vnd.street-stream":{"source":"iana"},"application/vnd.sun.wadl+xml":{"source":"iana","compressible":true,"extensions":["wadl"]},"application/vnd.sun.xml.calc":{"source":"apache","extensions":["sxc"]},"application/vnd.sun.xml.calc.template":{"source":"apache","extensions":["stc"]},"application/vnd.sun.xml.draw":{"source":"apache","extensions":["sxd"]},"application/vnd.sun.xml.draw.template":{"source":"apache","extensions":["std"]},"application/vnd.sun.xml.impress":{"source":"apache","extensions":["sxi"]},"application/vnd.sun.xml.impress.template":{"source":"apache","extensions":["sti"]},"application/vnd.sun.xml.math":{"source":"apache","extensions":["sxm"]},"application/vnd.sun.xml.writer":{"source":"apache","extensions":["sxw"]},"application/vnd.sun.xml.writer.global":{"source":"apache","extensions":["sxg"]},"application/vnd.sun.xml.writer.template":{"source":"apache","extensions":["stw"]},"application/vnd.sus-calendar":{"source":"iana","extensions":["sus","susp"]},"application/vnd.svd":{"source":"iana","extensions":["svd"]},"application/vnd.swiftview-ics":{"source":"iana"},"application/vnd.sycle+xml":{"source":"iana","compressible":true},"application/vnd.symbian.install":{"source":"apache","extensions":["sis","sisx"]},"application/vnd.syncml+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xsm"]},"application/vnd.syncml.dm+wbxml":{"source":"iana","charset":"UTF-8","extensions":["bdm"]},"application/vnd.syncml.dm+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xdm"]},"application/vnd.syncml.dm.notification":{"source":"iana"},"application/vnd.syncml.dmddf+wbxml":{"source":"iana"},"application/vnd.syncml.dmddf+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{"source":"iana"},"application/vnd.syncml.dmtnds+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.syncml.ds.notification":{"source":"iana"},"application/vnd.tableschema+json":{"source":"iana","compressible":true},"application/vnd.tao.intent-module-archive":{"source":"iana","extensions":["tao"]},"application/vnd.tcpdump.pcap":{"source":"iana","extensions":["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{"source":"iana","compressible":true},"application/vnd.tmd.mediaflex.api+xml":{"source":"iana","compressible":true},"application/vnd.tml":{"source":"iana"},"application/vnd.tmobile-livetv":{"source":"iana","extensions":["tmo"]},"application/vnd.tri.onesource":{"source":"iana"},"application/vnd.trid.tpt":{"source":"iana","extensions":["tpt"]},"application/vnd.triscape.mxs":{"source":"iana","extensions":["mxs"]},"application/vnd.trueapp":{"source":"iana","extensions":["tra"]},"application/vnd.truedoc":{"source":"iana"},"application/vnd.ubisoft.webplayer":{"source":"iana"},"application/vnd.ufdl":{"source":"iana","extensions":["ufd","ufdl"]},"application/vnd.uiq.theme":{"source":"iana","extensions":["utz"]},"application/vnd.umajin":{"source":"iana","extensions":["umj"]},"application/vnd.unity":{"source":"iana","extensions":["unityweb"]},"application/vnd.uoml+xml":{"source":"iana","compressible":true,"extensions":["uoml"]},"application/vnd.uplanet.alert":{"source":"iana"},"application/vnd.uplanet.alert-wbxml":{"source":"iana"},"application/vnd.uplanet.bearer-choice":{"source":"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{"source":"iana"},"application/vnd.uplanet.cacheop":{"source":"iana"},"application/vnd.uplanet.cacheop-wbxml":{"source":"iana"},"application/vnd.uplanet.channel":{"source":"iana"},"application/vnd.uplanet.channel-wbxml":{"source":"iana"},"application/vnd.uplanet.list":{"source":"iana"},"application/vnd.uplanet.list-wbxml":{"source":"iana"},"application/vnd.uplanet.listcmd":{"source":"iana"},"application/vnd.uplanet.listcmd-wbxml":{"source":"iana"},"application/vnd.uplanet.signal":{"source":"iana"},"application/vnd.uri-map":{"source":"iana"},"application/vnd.valve.source.material":{"source":"iana"},"application/vnd.vcx":{"source":"iana","extensions":["vcx"]},"application/vnd.vd-study":{"source":"iana"},"application/vnd.vectorworks":{"source":"iana"},"application/vnd.vel+json":{"source":"iana","compressible":true},"application/vnd.verimatrix.vcas":{"source":"iana"},"application/vnd.veritone.aion+json":{"source":"iana","compressible":true},"application/vnd.veryant.thin":{"source":"iana"},"application/vnd.ves.encrypted":{"source":"iana"},"application/vnd.vidsoft.vidconference":{"source":"iana"},"application/vnd.visio":{"source":"iana","extensions":["vsd","vst","vss","vsw"]},"application/vnd.visionary":{"source":"iana","extensions":["vis"]},"application/vnd.vividence.scriptfile":{"source":"iana"},"application/vnd.vsf":{"source":"iana","extensions":["vsf"]},"application/vnd.wap.sic":{"source":"iana"},"application/vnd.wap.slc":{"source":"iana"},"application/vnd.wap.wbxml":{"source":"iana","charset":"UTF-8","extensions":["wbxml"]},"application/vnd.wap.wmlc":{"source":"iana","extensions":["wmlc"]},"application/vnd.wap.wmlscriptc":{"source":"iana","extensions":["wmlsc"]},"application/vnd.webturbo":{"source":"iana","extensions":["wtb"]},"application/vnd.wfa.dpp":{"source":"iana"},"application/vnd.wfa.p2p":{"source":"iana"},"application/vnd.wfa.wsc":{"source":"iana"},"application/vnd.windows.devicepairing":{"source":"iana"},"application/vnd.wmc":{"source":"iana"},"application/vnd.wmf.bootstrap":{"source":"iana"},"application/vnd.wolfram.mathematica":{"source":"iana"},"application/vnd.wolfram.mathematica.package":{"source":"iana"},"application/vnd.wolfram.player":{"source":"iana","extensions":["nbp"]},"application/vnd.wordperfect":{"source":"iana","extensions":["wpd"]},"application/vnd.wqd":{"source":"iana","extensions":["wqd"]},"application/vnd.wrq-hp3000-labelled":{"source":"iana"},"application/vnd.wt.stf":{"source":"iana","extensions":["stf"]},"application/vnd.wv.csp+wbxml":{"source":"iana"},"application/vnd.wv.csp+xml":{"source":"iana","compressible":true},"application/vnd.wv.ssp+xml":{"source":"iana","compressible":true},"application/vnd.xacml+json":{"source":"iana","compressible":true},"application/vnd.xara":{"source":"iana","extensions":["xar"]},"application/vnd.xfdl":{"source":"iana","extensions":["xfdl"]},"application/vnd.xfdl.webform":{"source":"iana"},"application/vnd.xmi+xml":{"source":"iana","compressible":true},"application/vnd.xmpie.cpkg":{"source":"iana"},"application/vnd.xmpie.dpkg":{"source":"iana"},"application/vnd.xmpie.plan":{"source":"iana"},"application/vnd.xmpie.ppkg":{"source":"iana"},"application/vnd.xmpie.xlim":{"source":"iana"},"application/vnd.yamaha.hv-dic":{"source":"iana","extensions":["hvd"]},"application/vnd.yamaha.hv-script":{"source":"iana","extensions":["hvs"]},"application/vnd.yamaha.hv-voice":{"source":"iana","extensions":["hvp"]},"application/vnd.yamaha.openscoreformat":{"source":"iana","extensions":["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{"source":"iana","compressible":true,"extensions":["osfpvg"]},"application/vnd.yamaha.remote-setup":{"source":"iana"},"application/vnd.yamaha.smaf-audio":{"source":"iana","extensions":["saf"]},"application/vnd.yamaha.smaf-phrase":{"source":"iana","extensions":["spf"]},"application/vnd.yamaha.through-ngn":{"source":"iana"},"application/vnd.yamaha.tunnel-udpencap":{"source":"iana"},"application/vnd.yaoweme":{"source":"iana"},"application/vnd.yellowriver-custom-menu":{"source":"iana","extensions":["cmp"]},"application/vnd.youtube.yt":{"source":"iana"},"application/vnd.zul":{"source":"iana","extensions":["zir","zirz"]},"application/vnd.zzazz.deck+xml":{"source":"iana","compressible":true,"extensions":["zaz"]},"application/voicexml+xml":{"source":"iana","compressible":true,"extensions":["vxml"]},"application/voucher-cms+json":{"source":"iana","compressible":true},"application/vq-rtcpxr":{"source":"iana"},"application/wasm":{"source":"iana","compressible":true,"extensions":["wasm"]},"application/watcherinfo+xml":{"source":"iana","compressible":true},"application/webpush-options+json":{"source":"iana","compressible":true},"application/whoispp-query":{"source":"iana"},"application/whoispp-response":{"source":"iana"},"application/widget":{"source":"iana","extensions":["wgt"]},"application/winhlp":{"source":"apache","extensions":["hlp"]},"application/wita":{"source":"iana"},"application/wordperfect5.1":{"source":"iana"},"application/wsdl+xml":{"source":"iana","compressible":true,"extensions":["wsdl"]},"application/wspolicy+xml":{"source":"iana","compressible":true,"extensions":["wspolicy"]},"application/x-7z-compressed":{"source":"apache","compressible":false,"extensions":["7z"]},"application/x-abiword":{"source":"apache","extensions":["abw"]},"application/x-ace-compressed":{"source":"apache","extensions":["ace"]},"application/x-amf":{"source":"apache"},"application/x-apple-diskimage":{"source":"apache","extensions":["dmg"]},"application/x-arj":{"compressible":false,"extensions":["arj"]},"application/x-authorware-bin":{"source":"apache","extensions":["aab","x32","u32","vox"]},"application/x-authorware-map":{"source":"apache","extensions":["aam"]},"application/x-authorware-seg":{"source":"apache","extensions":["aas"]},"application/x-bcpio":{"source":"apache","extensions":["bcpio"]},"application/x-bdoc":{"compressible":false,"extensions":["bdoc"]},"application/x-bittorrent":{"source":"apache","extensions":["torrent"]},"application/x-blorb":{"source":"apache","extensions":["blb","blorb"]},"application/x-bzip":{"source":"apache","compressible":false,"extensions":["bz"]},"application/x-bzip2":{"source":"apache","compressible":false,"extensions":["bz2","boz"]},"application/x-cbr":{"source":"apache","extensions":["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{"source":"apache","extensions":["vcd"]},"application/x-cfs-compressed":{"source":"apache","extensions":["cfs"]},"application/x-chat":{"source":"apache","extensions":["chat"]},"application/x-chess-pgn":{"source":"apache","extensions":["pgn"]},"application/x-chrome-extension":{"extensions":["crx"]},"application/x-cocoa":{"source":"nginx","extensions":["cco"]},"application/x-compress":{"source":"apache"},"application/x-conference":{"source":"apache","extensions":["nsc"]},"application/x-cpio":{"source":"apache","extensions":["cpio"]},"application/x-csh":{"source":"apache","extensions":["csh"]},"application/x-deb":{"compressible":false},"application/x-debian-package":{"source":"apache","extensions":["deb","udeb"]},"application/x-dgc-compressed":{"source":"apache","extensions":["dgc"]},"application/x-director":{"source":"apache","extensions":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{"source":"apache","extensions":["wad"]},"application/x-dtbncx+xml":{"source":"apache","compressible":true,"extensions":["ncx"]},"application/x-dtbook+xml":{"source":"apache","compressible":true,"extensions":["dtb"]},"application/x-dtbresource+xml":{"source":"apache","compressible":true,"extensions":["res"]},"application/x-dvi":{"source":"apache","compressible":false,"extensions":["dvi"]},"application/x-envoy":{"source":"apache","extensions":["evy"]},"application/x-eva":{"source":"apache","extensions":["eva"]},"application/x-font-bdf":{"source":"apache","extensions":["bdf"]},"application/x-font-dos":{"source":"apache"},"application/x-font-framemaker":{"source":"apache"},"application/x-font-ghostscript":{"source":"apache","extensions":["gsf"]},"application/x-font-libgrx":{"source":"apache"},"application/x-font-linux-psf":{"source":"apache","extensions":["psf"]},"application/x-font-pcf":{"source":"apache","extensions":["pcf"]},"application/x-font-snf":{"source":"apache","extensions":["snf"]},"application/x-font-speedo":{"source":"apache"},"application/x-font-sunos-news":{"source":"apache"},"application/x-font-type1":{"source":"apache","extensions":["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{"source":"apache"},"application/x-freearc":{"source":"apache","extensions":["arc"]},"application/x-futuresplash":{"source":"apache","extensions":["spl"]},"application/x-gca-compressed":{"source":"apache","extensions":["gca"]},"application/x-glulx":{"source":"apache","extensions":["ulx"]},"application/x-gnumeric":{"source":"apache","extensions":["gnumeric"]},"application/x-gramps-xml":{"source":"apache","extensions":["gramps"]},"application/x-gtar":{"source":"apache","extensions":["gtar"]},"application/x-gzip":{"source":"apache"},"application/x-hdf":{"source":"apache","extensions":["hdf"]},"application/x-httpd-php":{"compressible":true,"extensions":["php"]},"application/x-install-instructions":{"source":"apache","extensions":["install"]},"application/x-iso9660-image":{"source":"apache","extensions":["iso"]},"application/x-iwork-keynote-sffkey":{"extensions":["key"]},"application/x-iwork-numbers-sffnumbers":{"extensions":["numbers"]},"application/x-iwork-pages-sffpages":{"extensions":["pages"]},"application/x-java-archive-diff":{"source":"nginx","extensions":["jardiff"]},"application/x-java-jnlp-file":{"source":"apache","compressible":false,"extensions":["jnlp"]},"application/x-javascript":{"compressible":true},"application/x-keepass2":{"extensions":["kdbx"]},"application/x-latex":{"source":"apache","compressible":false,"extensions":["latex"]},"application/x-lua-bytecode":{"extensions":["luac"]},"application/x-lzh-compressed":{"source":"apache","extensions":["lzh","lha"]},"application/x-makeself":{"source":"nginx","extensions":["run"]},"application/x-mie":{"source":"apache","extensions":["mie"]},"application/x-mobipocket-ebook":{"source":"apache","extensions":["prc","mobi"]},"application/x-mpegurl":{"compressible":false},"application/x-ms-application":{"source":"apache","extensions":["application"]},"application/x-ms-shortcut":{"source":"apache","extensions":["lnk"]},"application/x-ms-wmd":{"source":"apache","extensions":["wmd"]},"application/x-ms-wmz":{"source":"apache","extensions":["wmz"]},"application/x-ms-xbap":{"source":"apache","extensions":["xbap"]},"application/x-msaccess":{"source":"apache","extensions":["mdb"]},"application/x-msbinder":{"source":"apache","extensions":["obd"]},"application/x-mscardfile":{"source":"apache","extensions":["crd"]},"application/x-msclip":{"source":"apache","extensions":["clp"]},"application/x-msdos-program":{"extensions":["exe"]},"application/x-msdownload":{"source":"apache","extensions":["exe","dll","com","bat","msi"]},"application/x-msmediaview":{"source":"apache","extensions":["mvb","m13","m14"]},"application/x-msmetafile":{"source":"apache","extensions":["wmf","wmz","emf","emz"]},"application/x-msmoney":{"source":"apache","extensions":["mny"]},"application/x-mspublisher":{"source":"apache","extensions":["pub"]},"application/x-msschedule":{"source":"apache","extensions":["scd"]},"application/x-msterminal":{"source":"apache","extensions":["trm"]},"application/x-mswrite":{"source":"apache","extensions":["wri"]},"application/x-netcdf":{"source":"apache","extensions":["nc","cdf"]},"application/x-ns-proxy-autoconfig":{"compressible":true,"extensions":["pac"]},"application/x-nzb":{"source":"apache","extensions":["nzb"]},"application/x-perl":{"source":"nginx","extensions":["pl","pm"]},"application/x-pilot":{"source":"nginx","extensions":["prc","pdb"]},"application/x-pkcs12":{"source":"apache","compressible":false,"extensions":["p12","pfx"]},"application/x-pkcs7-certificates":{"source":"apache","extensions":["p7b","spc"]},"application/x-pkcs7-certreqresp":{"source":"apache","extensions":["p7r"]},"application/x-pki-message":{"source":"iana"},"application/x-rar-compressed":{"source":"apache","compressible":false,"extensions":["rar"]},"application/x-redhat-package-manager":{"source":"nginx","extensions":["rpm"]},"application/x-research-info-systems":{"source":"apache","extensions":["ris"]},"application/x-sea":{"source":"nginx","extensions":["sea"]},"application/x-sh":{"source":"apache","compressible":true,"extensions":["sh"]},"application/x-shar":{"source":"apache","extensions":["shar"]},"application/x-shockwave-flash":{"source":"apache","compressible":false,"extensions":["swf"]},"application/x-silverlight-app":{"source":"apache","extensions":["xap"]},"application/x-sql":{"source":"apache","extensions":["sql"]},"application/x-stuffit":{"source":"apache","compressible":false,"extensions":["sit"]},"application/x-stuffitx":{"source":"apache","extensions":["sitx"]},"application/x-subrip":{"source":"apache","extensions":["srt"]},"application/x-sv4cpio":{"source":"apache","extensions":["sv4cpio"]},"application/x-sv4crc":{"source":"apache","extensions":["sv4crc"]},"application/x-t3vm-image":{"source":"apache","extensions":["t3"]},"application/x-tads":{"source":"apache","extensions":["gam"]},"application/x-tar":{"source":"apache","compressible":true,"extensions":["tar"]},"application/x-tcl":{"source":"apache","extensions":["tcl","tk"]},"application/x-tex":{"source":"apache","extensions":["tex"]},"application/x-tex-tfm":{"source":"apache","extensions":["tfm"]},"application/x-texinfo":{"source":"apache","extensions":["texinfo","texi"]},"application/x-tgif":{"source":"apache","extensions":["obj"]},"application/x-ustar":{"source":"apache","extensions":["ustar"]},"application/x-virtualbox-hdd":{"compressible":true,"extensions":["hdd"]},"application/x-virtualbox-ova":{"compressible":true,"extensions":["ova"]},"application/x-virtualbox-ovf":{"compressible":true,"extensions":["ovf"]},"application/x-virtualbox-vbox":{"compressible":true,"extensions":["vbox"]},"application/x-virtualbox-vbox-extpack":{"compressible":false,"extensions":["vbox-extpack"]},"application/x-virtualbox-vdi":{"compressible":true,"extensions":["vdi"]},"application/x-virtualbox-vhd":{"compressible":true,"extensions":["vhd"]},"application/x-virtualbox-vmdk":{"compressible":true,"extensions":["vmdk"]},"application/x-wais-source":{"source":"apache","extensions":["src"]},"application/x-web-app-manifest+json":{"compressible":true,"extensions":["webapp"]},"application/x-www-form-urlencoded":{"source":"iana","compressible":true},"application/x-x509-ca-cert":{"source":"iana","extensions":["der","crt","pem"]},"application/x-x509-ca-ra-cert":{"source":"iana"},"application/x-x509-next-ca-cert":{"source":"iana"},"application/x-xfig":{"source":"apache","extensions":["fig"]},"application/x-xliff+xml":{"source":"apache","compressible":true,"extensions":["xlf"]},"application/x-xpinstall":{"source":"apache","compressible":false,"extensions":["xpi"]},"application/x-xz":{"source":"apache","extensions":["xz"]},"application/x-zmachine":{"source":"apache","extensions":["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{"source":"iana"},"application/xacml+xml":{"source":"iana","compressible":true},"application/xaml+xml":{"source":"apache","compressible":true,"extensions":["xaml"]},"application/xcap-att+xml":{"source":"iana","compressible":true,"extensions":["xav"]},"application/xcap-caps+xml":{"source":"iana","compressible":true,"extensions":["xca"]},"application/xcap-diff+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/xcap-el+xml":{"source":"iana","compressible":true,"extensions":["xel"]},"application/xcap-error+xml":{"source":"iana","compressible":true},"application/xcap-ns+xml":{"source":"iana","compressible":true,"extensions":["xns"]},"application/xcon-conference-info+xml":{"source":"iana","compressible":true},"application/xcon-conference-info-diff+xml":{"source":"iana","compressible":true},"application/xenc+xml":{"source":"iana","compressible":true,"extensions":["xenc"]},"application/xhtml+xml":{"source":"iana","compressible":true,"extensions":["xhtml","xht"]},"application/xhtml-voice+xml":{"source":"apache","compressible":true},"application/xliff+xml":{"source":"iana","compressible":true,"extensions":["xlf"]},"application/xml":{"source":"iana","compressible":true,"extensions":["xml","xsl","xsd","rng"]},"application/xml-dtd":{"source":"iana","compressible":true,"extensions":["dtd"]},"application/xml-external-parsed-entity":{"source":"iana"},"application/xml-patch+xml":{"source":"iana","compressible":true},"application/xmpp+xml":{"source":"iana","compressible":true},"application/xop+xml":{"source":"iana","compressible":true,"extensions":["xop"]},"application/xproc+xml":{"source":"apache","compressible":true,"extensions":["xpl"]},"application/xslt+xml":{"source":"iana","compressible":true,"extensions":["xsl","xslt"]},"application/xspf+xml":{"source":"apache","compressible":true,"extensions":["xspf"]},"application/xv+xml":{"source":"iana","compressible":true,"extensions":["mxml","xhvml","xvml","xvm"]},"application/yang":{"source":"iana","extensions":["yang"]},"application/yang-data+json":{"source":"iana","compressible":true},"application/yang-data+xml":{"source":"iana","compressible":true},"application/yang-patch+json":{"source":"iana","compressible":true},"application/yang-patch+xml":{"source":"iana","compressible":true},"application/yin+xml":{"source":"iana","compressible":true,"extensions":["yin"]},"application/zip":{"source":"iana","compressible":false,"extensions":["zip"]},"application/zlib":{"source":"iana"},"application/zstd":{"source":"iana"},"audio/1d-interleaved-parityfec":{"source":"iana"},"audio/32kadpcm":{"source":"iana"},"audio/3gpp":{"source":"iana","compressible":false,"extensions":["3gpp"]},"audio/3gpp2":{"source":"iana"},"audio/aac":{"source":"iana"},"audio/ac3":{"source":"iana"},"audio/adpcm":{"source":"apache","extensions":["adp"]},"audio/amr":{"source":"iana","extensions":["amr"]},"audio/amr-wb":{"source":"iana"},"audio/amr-wb+":{"source":"iana"},"audio/aptx":{"source":"iana"},"audio/asc":{"source":"iana"},"audio/atrac-advanced-lossless":{"source":"iana"},"audio/atrac-x":{"source":"iana"},"audio/atrac3":{"source":"iana"},"audio/basic":{"source":"iana","compressible":false,"extensions":["au","snd"]},"audio/bv16":{"source":"iana"},"audio/bv32":{"source":"iana"},"audio/clearmode":{"source":"iana"},"audio/cn":{"source":"iana"},"audio/dat12":{"source":"iana"},"audio/dls":{"source":"iana"},"audio/dsr-es201108":{"source":"iana"},"audio/dsr-es202050":{"source":"iana"},"audio/dsr-es202211":{"source":"iana"},"audio/dsr-es202212":{"source":"iana"},"audio/dv":{"source":"iana"},"audio/dvi4":{"source":"iana"},"audio/eac3":{"source":"iana"},"audio/encaprtp":{"source":"iana"},"audio/evrc":{"source":"iana"},"audio/evrc-qcp":{"source":"iana"},"audio/evrc0":{"source":"iana"},"audio/evrc1":{"source":"iana"},"audio/evrcb":{"source":"iana"},"audio/evrcb0":{"source":"iana"},"audio/evrcb1":{"source":"iana"},"audio/evrcnw":{"source":"iana"},"audio/evrcnw0":{"source":"iana"},"audio/evrcnw1":{"source":"iana"},"audio/evrcwb":{"source":"iana"},"audio/evrcwb0":{"source":"iana"},"audio/evrcwb1":{"source":"iana"},"audio/evs":{"source":"iana"},"audio/flexfec":{"source":"iana"},"audio/fwdred":{"source":"iana"},"audio/g711-0":{"source":"iana"},"audio/g719":{"source":"iana"},"audio/g722":{"source":"iana"},"audio/g7221":{"source":"iana"},"audio/g723":{"source":"iana"},"audio/g726-16":{"source":"iana"},"audio/g726-24":{"source":"iana"},"audio/g726-32":{"source":"iana"},"audio/g726-40":{"source":"iana"},"audio/g728":{"source":"iana"},"audio/g729":{"source":"iana"},"audio/g7291":{"source":"iana"},"audio/g729d":{"source":"iana"},"audio/g729e":{"source":"iana"},"audio/gsm":{"source":"iana"},"audio/gsm-efr":{"source":"iana"},"audio/gsm-hr-08":{"source":"iana"},"audio/ilbc":{"source":"iana"},"audio/ip-mr_v2.5":{"source":"iana"},"audio/isac":{"source":"apache"},"audio/l16":{"source":"iana"},"audio/l20":{"source":"iana"},"audio/l24":{"source":"iana","compressible":false},"audio/l8":{"source":"iana"},"audio/lpc":{"source":"iana"},"audio/melp":{"source":"iana"},"audio/melp1200":{"source":"iana"},"audio/melp2400":{"source":"iana"},"audio/melp600":{"source":"iana"},"audio/mhas":{"source":"iana"},"audio/midi":{"source":"apache","extensions":["mid","midi","kar","rmi"]},"audio/mobile-xmf":{"source":"iana","extensions":["mxmf"]},"audio/mp3":{"compressible":false,"extensions":["mp3"]},"audio/mp4":{"source":"iana","compressible":false,"extensions":["m4a","mp4a"]},"audio/mp4a-latm":{"source":"iana"},"audio/mpa":{"source":"iana"},"audio/mpa-robust":{"source":"iana"},"audio/mpeg":{"source":"iana","compressible":false,"extensions":["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{"source":"iana"},"audio/musepack":{"source":"apache"},"audio/ogg":{"source":"iana","compressible":false,"extensions":["oga","ogg","spx","opus"]},"audio/opus":{"source":"iana"},"audio/parityfec":{"source":"iana"},"audio/pcma":{"source":"iana"},"audio/pcma-wb":{"source":"iana"},"audio/pcmu":{"source":"iana"},"audio/pcmu-wb":{"source":"iana"},"audio/prs.sid":{"source":"iana"},"audio/qcelp":{"source":"iana"},"audio/raptorfec":{"source":"iana"},"audio/red":{"source":"iana"},"audio/rtp-enc-aescm128":{"source":"iana"},"audio/rtp-midi":{"source":"iana"},"audio/rtploopback":{"source":"iana"},"audio/rtx":{"source":"iana"},"audio/s3m":{"source":"apache","extensions":["s3m"]},"audio/scip":{"source":"iana"},"audio/silk":{"source":"apache","extensions":["sil"]},"audio/smv":{"source":"iana"},"audio/smv-qcp":{"source":"iana"},"audio/smv0":{"source":"iana"},"audio/sofa":{"source":"iana"},"audio/sp-midi":{"source":"iana"},"audio/speex":{"source":"iana"},"audio/t140c":{"source":"iana"},"audio/t38":{"source":"iana"},"audio/telephone-event":{"source":"iana"},"audio/tetra_acelp":{"source":"iana"},"audio/tetra_acelp_bb":{"source":"iana"},"audio/tone":{"source":"iana"},"audio/tsvcis":{"source":"iana"},"audio/uemclip":{"source":"iana"},"audio/ulpfec":{"source":"iana"},"audio/usac":{"source":"iana"},"audio/vdvi":{"source":"iana"},"audio/vmr-wb":{"source":"iana"},"audio/vnd.3gpp.iufp":{"source":"iana"},"audio/vnd.4sb":{"source":"iana"},"audio/vnd.audiokoz":{"source":"iana"},"audio/vnd.celp":{"source":"iana"},"audio/vnd.cisco.nse":{"source":"iana"},"audio/vnd.cmles.radio-events":{"source":"iana"},"audio/vnd.cns.anp1":{"source":"iana"},"audio/vnd.cns.inf1":{"source":"iana"},"audio/vnd.dece.audio":{"source":"iana","extensions":["uva","uvva"]},"audio/vnd.digital-winds":{"source":"iana","extensions":["eol"]},"audio/vnd.dlna.adts":{"source":"iana"},"audio/vnd.dolby.heaac.1":{"source":"iana"},"audio/vnd.dolby.heaac.2":{"source":"iana"},"audio/vnd.dolby.mlp":{"source":"iana"},"audio/vnd.dolby.mps":{"source":"iana"},"audio/vnd.dolby.pl2":{"source":"iana"},"audio/vnd.dolby.pl2x":{"source":"iana"},"audio/vnd.dolby.pl2z":{"source":"iana"},"audio/vnd.dolby.pulse.1":{"source":"iana"},"audio/vnd.dra":{"source":"iana","extensions":["dra"]},"audio/vnd.dts":{"source":"iana","extensions":["dts"]},"audio/vnd.dts.hd":{"source":"iana","extensions":["dtshd"]},"audio/vnd.dts.uhd":{"source":"iana"},"audio/vnd.dvb.file":{"source":"iana"},"audio/vnd.everad.plj":{"source":"iana"},"audio/vnd.hns.audio":{"source":"iana"},"audio/vnd.lucent.voice":{"source":"iana","extensions":["lvp"]},"audio/vnd.ms-playready.media.pya":{"source":"iana","extensions":["pya"]},"audio/vnd.nokia.mobile-xmf":{"source":"iana"},"audio/vnd.nortel.vbk":{"source":"iana"},"audio/vnd.nuera.ecelp4800":{"source":"iana","extensions":["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{"source":"iana","extensions":["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{"source":"iana","extensions":["ecelp9600"]},"audio/vnd.octel.sbc":{"source":"iana"},"audio/vnd.presonus.multitrack":{"source":"iana"},"audio/vnd.qcelp":{"source":"iana"},"audio/vnd.rhetorex.32kadpcm":{"source":"iana"},"audio/vnd.rip":{"source":"iana","extensions":["rip"]},"audio/vnd.rn-realaudio":{"compressible":false},"audio/vnd.sealedmedia.softseal.mpeg":{"source":"iana"},"audio/vnd.vmx.cvsd":{"source":"iana"},"audio/vnd.wave":{"compressible":false},"audio/vorbis":{"source":"iana","compressible":false},"audio/vorbis-config":{"source":"iana"},"audio/wav":{"compressible":false,"extensions":["wav"]},"audio/wave":{"compressible":false,"extensions":["wav"]},"audio/webm":{"source":"apache","compressible":false,"extensions":["weba"]},"audio/x-aac":{"source":"apache","compressible":false,"extensions":["aac"]},"audio/x-aiff":{"source":"apache","extensions":["aif","aiff","aifc"]},"audio/x-caf":{"source":"apache","compressible":false,"extensions":["caf"]},"audio/x-flac":{"source":"apache","extensions":["flac"]},"audio/x-m4a":{"source":"nginx","extensions":["m4a"]},"audio/x-matroska":{"source":"apache","extensions":["mka"]},"audio/x-mpegurl":{"source":"apache","extensions":["m3u"]},"audio/x-ms-wax":{"source":"apache","extensions":["wax"]},"audio/x-ms-wma":{"source":"apache","extensions":["wma"]},"audio/x-pn-realaudio":{"source":"apache","extensions":["ram","ra"]},"audio/x-pn-realaudio-plugin":{"source":"apache","extensions":["rmp"]},"audio/x-realaudio":{"source":"nginx","extensions":["ra"]},"audio/x-tta":{"source":"apache"},"audio/x-wav":{"source":"apache","extensions":["wav"]},"audio/xm":{"source":"apache","extensions":["xm"]},"chemical/x-cdx":{"source":"apache","extensions":["cdx"]},"chemical/x-cif":{"source":"apache","extensions":["cif"]},"chemical/x-cmdf":{"source":"apache","extensions":["cmdf"]},"chemical/x-cml":{"source":"apache","extensions":["cml"]},"chemical/x-csml":{"source":"apache","extensions":["csml"]},"chemical/x-pdb":{"source":"apache"},"chemical/x-xyz":{"source":"apache","extensions":["xyz"]},"font/collection":{"source":"iana","extensions":["ttc"]},"font/otf":{"source":"iana","compressible":true,"extensions":["otf"]},"font/sfnt":{"source":"iana"},"font/ttf":{"source":"iana","compressible":true,"extensions":["ttf"]},"font/woff":{"source":"iana","extensions":["woff"]},"font/woff2":{"source":"iana","extensions":["woff2"]},"image/aces":{"source":"iana","extensions":["exr"]},"image/apng":{"compressible":false,"extensions":["apng"]},"image/avci":{"source":"iana"},"image/avcs":{"source":"iana"},"image/avif":{"source":"iana","compressible":false,"extensions":["avif"]},"image/bmp":{"source":"iana","compressible":true,"extensions":["bmp"]},"image/cgm":{"source":"iana","extensions":["cgm"]},"image/dicom-rle":{"source":"iana","extensions":["drle"]},"image/emf":{"source":"iana","extensions":["emf"]},"image/fits":{"source":"iana","extensions":["fits"]},"image/g3fax":{"source":"iana","extensions":["g3"]},"image/gif":{"source":"iana","compressible":false,"extensions":["gif"]},"image/heic":{"source":"iana","extensions":["heic"]},"image/heic-sequence":{"source":"iana","extensions":["heics"]},"image/heif":{"source":"iana","extensions":["heif"]},"image/heif-sequence":{"source":"iana","extensions":["heifs"]},"image/hej2k":{"source":"iana","extensions":["hej2"]},"image/hsj2":{"source":"iana","extensions":["hsj2"]},"image/ief":{"source":"iana","extensions":["ief"]},"image/jls":{"source":"iana","extensions":["jls"]},"image/jp2":{"source":"iana","compressible":false,"extensions":["jp2","jpg2"]},"image/jpeg":{"source":"iana","compressible":false,"extensions":["jpeg","jpg","jpe"]},"image/jph":{"source":"iana","extensions":["jph"]},"image/jphc":{"source":"iana","extensions":["jhc"]},"image/jpm":{"source":"iana","compressible":false,"extensions":["jpm"]},"image/jpx":{"source":"iana","compressible":false,"extensions":["jpx","jpf"]},"image/jxr":{"source":"iana","extensions":["jxr"]},"image/jxra":{"source":"iana","extensions":["jxra"]},"image/jxrs":{"source":"iana","extensions":["jxrs"]},"image/jxs":{"source":"iana","extensions":["jxs"]},"image/jxsc":{"source":"iana","extensions":["jxsc"]},"image/jxsi":{"source":"iana","extensions":["jxsi"]},"image/jxss":{"source":"iana","extensions":["jxss"]},"image/ktx":{"source":"iana","extensions":["ktx"]},"image/ktx2":{"source":"iana","extensions":["ktx2"]},"image/naplps":{"source":"iana"},"image/pjpeg":{"compressible":false},"image/png":{"source":"iana","compressible":false,"extensions":["png"]},"image/prs.btif":{"source":"iana","extensions":["btif"]},"image/prs.pti":{"source":"iana","extensions":["pti"]},"image/pwg-raster":{"source":"iana"},"image/sgi":{"source":"apache","extensions":["sgi"]},"image/svg+xml":{"source":"iana","compressible":true,"extensions":["svg","svgz"]},"image/t38":{"source":"iana","extensions":["t38"]},"image/tiff":{"source":"iana","compressible":false,"extensions":["tif","tiff"]},"image/tiff-fx":{"source":"iana","extensions":["tfx"]},"image/vnd.adobe.photoshop":{"source":"iana","compressible":true,"extensions":["psd"]},"image/vnd.airzip.accelerator.azv":{"source":"iana","extensions":["azv"]},"image/vnd.cns.inf2":{"source":"iana"},"image/vnd.dece.graphic":{"source":"iana","extensions":["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{"source":"iana","extensions":["djvu","djv"]},"image/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"image/vnd.dwg":{"source":"iana","extensions":["dwg"]},"image/vnd.dxf":{"source":"iana","extensions":["dxf"]},"image/vnd.fastbidsheet":{"source":"iana","extensions":["fbs"]},"image/vnd.fpx":{"source":"iana","extensions":["fpx"]},"image/vnd.fst":{"source":"iana","extensions":["fst"]},"image/vnd.fujixerox.edmics-mmr":{"source":"iana","extensions":["mmr"]},"image/vnd.fujixerox.edmics-rlc":{"source":"iana","extensions":["rlc"]},"image/vnd.globalgraphics.pgb":{"source":"iana"},"image/vnd.microsoft.icon":{"source":"iana","compressible":true,"extensions":["ico"]},"image/vnd.mix":{"source":"iana"},"image/vnd.mozilla.apng":{"source":"iana"},"image/vnd.ms-dds":{"compressible":true,"extensions":["dds"]},"image/vnd.ms-modi":{"source":"iana","extensions":["mdi"]},"image/vnd.ms-photo":{"source":"apache","extensions":["wdp"]},"image/vnd.net-fpx":{"source":"iana","extensions":["npx"]},"image/vnd.pco.b16":{"source":"iana","extensions":["b16"]},"image/vnd.radiance":{"source":"iana"},"image/vnd.sealed.png":{"source":"iana"},"image/vnd.sealedmedia.softseal.gif":{"source":"iana"},"image/vnd.sealedmedia.softseal.jpg":{"source":"iana"},"image/vnd.svf":{"source":"iana"},"image/vnd.tencent.tap":{"source":"iana","extensions":["tap"]},"image/vnd.valve.source.texture":{"source":"iana","extensions":["vtf"]},"image/vnd.wap.wbmp":{"source":"iana","extensions":["wbmp"]},"image/vnd.xiff":{"source":"iana","extensions":["xif"]},"image/vnd.zbrush.pcx":{"source":"iana","extensions":["pcx"]},"image/webp":{"source":"apache","extensions":["webp"]},"image/wmf":{"source":"iana","extensions":["wmf"]},"image/x-3ds":{"source":"apache","extensions":["3ds"]},"image/x-cmu-raster":{"source":"apache","extensions":["ras"]},"image/x-cmx":{"source":"apache","extensions":["cmx"]},"image/x-freehand":{"source":"apache","extensions":["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{"source":"apache","compressible":true,"extensions":["ico"]},"image/x-jng":{"source":"nginx","extensions":["jng"]},"image/x-mrsid-image":{"source":"apache","extensions":["sid"]},"image/x-ms-bmp":{"source":"nginx","compressible":true,"extensions":["bmp"]},"image/x-pcx":{"source":"apache","extensions":["pcx"]},"image/x-pict":{"source":"apache","extensions":["pic","pct"]},"image/x-portable-anymap":{"source":"apache","extensions":["pnm"]},"image/x-portable-bitmap":{"source":"apache","extensions":["pbm"]},"image/x-portable-graymap":{"source":"apache","extensions":["pgm"]},"image/x-portable-pixmap":{"source":"apache","extensions":["ppm"]},"image/x-rgb":{"source":"apache","extensions":["rgb"]},"image/x-tga":{"source":"apache","extensions":["tga"]},"image/x-xbitmap":{"source":"apache","extensions":["xbm"]},"image/x-xcf":{"compressible":false},"image/x-xpixmap":{"source":"apache","extensions":["xpm"]},"image/x-xwindowdump":{"source":"apache","extensions":["xwd"]},"message/cpim":{"source":"iana"},"message/delivery-status":{"source":"iana"},"message/disposition-notification":{"source":"iana","extensions":["disposition-notification"]},"message/external-body":{"source":"iana"},"message/feedback-report":{"source":"iana"},"message/global":{"source":"iana","extensions":["u8msg"]},"message/global-delivery-status":{"source":"iana","extensions":["u8dsn"]},"message/global-disposition-notification":{"source":"iana","extensions":["u8mdn"]},"message/global-headers":{"source":"iana","extensions":["u8hdr"]},"message/http":{"source":"iana","compressible":false},"message/imdn+xml":{"source":"iana","compressible":true},"message/news":{"source":"iana"},"message/partial":{"source":"iana","compressible":false},"message/rfc822":{"source":"iana","compressible":true,"extensions":["eml","mime"]},"message/s-http":{"source":"iana"},"message/sip":{"source":"iana"},"message/sipfrag":{"source":"iana"},"message/tracking-status":{"source":"iana"},"message/vnd.si.simp":{"source":"iana"},"message/vnd.wfa.wsc":{"source":"iana","extensions":["wsc"]},"model/3mf":{"source":"iana","extensions":["3mf"]},"model/e57":{"source":"iana"},"model/gltf+json":{"source":"iana","compressible":true,"extensions":["gltf"]},"model/gltf-binary":{"source":"iana","compressible":true,"extensions":["glb"]},"model/iges":{"source":"iana","compressible":false,"extensions":["igs","iges"]},"model/mesh":{"source":"iana","compressible":false,"extensions":["msh","mesh","silo"]},"model/mtl":{"source":"iana","extensions":["mtl"]},"model/obj":{"source":"iana","extensions":["obj"]},"model/step":{"source":"iana"},"model/step+xml":{"source":"iana","compressible":true,"extensions":["stpx"]},"model/step+zip":{"source":"iana","compressible":false,"extensions":["stpz"]},"model/step-xml+zip":{"source":"iana","compressible":false,"extensions":["stpxz"]},"model/stl":{"source":"iana","extensions":["stl"]},"model/vnd.collada+xml":{"source":"iana","compressible":true,"extensions":["dae"]},"model/vnd.dwf":{"source":"iana","extensions":["dwf"]},"model/vnd.flatland.3dml":{"source":"iana"},"model/vnd.gdl":{"source":"iana","extensions":["gdl"]},"model/vnd.gs-gdl":{"source":"apache"},"model/vnd.gs.gdl":{"source":"iana"},"model/vnd.gtw":{"source":"iana","extensions":["gtw"]},"model/vnd.moml+xml":{"source":"iana","compressible":true},"model/vnd.mts":{"source":"iana","extensions":["mts"]},"model/vnd.opengex":{"source":"iana","extensions":["ogex"]},"model/vnd.parasolid.transmit.binary":{"source":"iana","extensions":["x_b"]},"model/vnd.parasolid.transmit.text":{"source":"iana","extensions":["x_t"]},"model/vnd.pytha.pyox":{"source":"iana"},"model/vnd.rosette.annotated-data-model":{"source":"iana"},"model/vnd.sap.vds":{"source":"iana","extensions":["vds"]},"model/vnd.usdz+zip":{"source":"iana","compressible":false,"extensions":["usdz"]},"model/vnd.valve.source.compiled-map":{"source":"iana","extensions":["bsp"]},"model/vnd.vtu":{"source":"iana","extensions":["vtu"]},"model/vrml":{"source":"iana","compressible":false,"extensions":["wrl","vrml"]},"model/x3d+binary":{"source":"apache","compressible":false,"extensions":["x3db","x3dbz"]},"model/x3d+fastinfoset":{"source":"iana","extensions":["x3db"]},"model/x3d+vrml":{"source":"apache","compressible":false,"extensions":["x3dv","x3dvz"]},"model/x3d+xml":{"source":"iana","compressible":true,"extensions":["x3d","x3dz"]},"model/x3d-vrml":{"source":"iana","extensions":["x3dv"]},"multipart/alternative":{"source":"iana","compressible":false},"multipart/appledouble":{"source":"iana"},"multipart/byteranges":{"source":"iana"},"multipart/digest":{"source":"iana"},"multipart/encrypted":{"source":"iana","compressible":false},"multipart/form-data":{"source":"iana","compressible":false},"multipart/header-set":{"source":"iana"},"multipart/mixed":{"source":"iana"},"multipart/multilingual":{"source":"iana"},"multipart/parallel":{"source":"iana"},"multipart/related":{"source":"iana","compressible":false},"multipart/report":{"source":"iana"},"multipart/signed":{"source":"iana","compressible":false},"multipart/vnd.bint.med-plus":{"source":"iana"},"multipart/voice-message":{"source":"iana"},"multipart/x-mixed-replace":{"source":"iana"},"text/1d-interleaved-parityfec":{"source":"iana"},"text/cache-manifest":{"source":"iana","compressible":true,"extensions":["appcache","manifest"]},"text/calendar":{"source":"iana","extensions":["ics","ifb"]},"text/calender":{"compressible":true},"text/cmd":{"compressible":true},"text/coffeescript":{"extensions":["coffee","litcoffee"]},"text/cql":{"source":"iana"},"text/cql-expression":{"source":"iana"},"text/cql-identifier":{"source":"iana"},"text/css":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["css"]},"text/csv":{"source":"iana","compressible":true,"extensions":["csv"]},"text/csv-schema":{"source":"iana"},"text/directory":{"source":"iana"},"text/dns":{"source":"iana"},"text/ecmascript":{"source":"iana"},"text/encaprtp":{"source":"iana"},"text/enriched":{"source":"iana"},"text/fhirpath":{"source":"iana"},"text/flexfec":{"source":"iana"},"text/fwdred":{"source":"iana"},"text/gff3":{"source":"iana"},"text/grammar-ref-list":{"source":"iana"},"text/html":{"source":"iana","compressible":true,"extensions":["html","htm","shtml"]},"text/jade":{"extensions":["jade"]},"text/javascript":{"source":"iana","compressible":true},"text/jcr-cnd":{"source":"iana"},"text/jsx":{"compressible":true,"extensions":["jsx"]},"text/less":{"compressible":true,"extensions":["less"]},"text/markdown":{"source":"iana","compressible":true,"extensions":["markdown","md"]},"text/mathml":{"source":"nginx","extensions":["mml"]},"text/mdx":{"compressible":true,"extensions":["mdx"]},"text/mizar":{"source":"iana"},"text/n3":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["n3"]},"text/parameters":{"source":"iana","charset":"UTF-8"},"text/parityfec":{"source":"iana"},"text/plain":{"source":"iana","compressible":true,"extensions":["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{"source":"iana","charset":"UTF-8"},"text/prs.fallenstein.rst":{"source":"iana"},"text/prs.lines.tag":{"source":"iana","extensions":["dsc"]},"text/prs.prop.logic":{"source":"iana"},"text/raptorfec":{"source":"iana"},"text/red":{"source":"iana"},"text/rfc822-headers":{"source":"iana"},"text/richtext":{"source":"iana","compressible":true,"extensions":["rtx"]},"text/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"text/rtp-enc-aescm128":{"source":"iana"},"text/rtploopback":{"source":"iana"},"text/rtx":{"source":"iana"},"text/sgml":{"source":"iana","extensions":["sgml","sgm"]},"text/shaclc":{"source":"iana"},"text/shex":{"source":"iana","extensions":["shex"]},"text/slim":{"extensions":["slim","slm"]},"text/spdx":{"source":"iana","extensions":["spdx"]},"text/strings":{"source":"iana"},"text/stylus":{"extensions":["stylus","styl"]},"text/t140":{"source":"iana"},"text/tab-separated-values":{"source":"iana","compressible":true,"extensions":["tsv"]},"text/troff":{"source":"iana","extensions":["t","tr","roff","man","me","ms"]},"text/turtle":{"source":"iana","charset":"UTF-8","extensions":["ttl"]},"text/ulpfec":{"source":"iana"},"text/uri-list":{"source":"iana","compressible":true,"extensions":["uri","uris","urls"]},"text/vcard":{"source":"iana","compressible":true,"extensions":["vcard"]},"text/vnd.a":{"source":"iana"},"text/vnd.abc":{"source":"iana"},"text/vnd.ascii-art":{"source":"iana"},"text/vnd.curl":{"source":"iana","extensions":["curl"]},"text/vnd.curl.dcurl":{"source":"apache","extensions":["dcurl"]},"text/vnd.curl.mcurl":{"source":"apache","extensions":["mcurl"]},"text/vnd.curl.scurl":{"source":"apache","extensions":["scurl"]},"text/vnd.debian.copyright":{"source":"iana","charset":"UTF-8"},"text/vnd.dmclientscript":{"source":"iana"},"text/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"text/vnd.esmertec.theme-descriptor":{"source":"iana","charset":"UTF-8"},"text/vnd.familysearch.gedcom":{"source":"iana","extensions":["ged"]},"text/vnd.ficlab.flt":{"source":"iana"},"text/vnd.fly":{"source":"iana","extensions":["fly"]},"text/vnd.fmi.flexstor":{"source":"iana","extensions":["flx"]},"text/vnd.gml":{"source":"iana"},"text/vnd.graphviz":{"source":"iana","extensions":["gv"]},"text/vnd.hans":{"source":"iana"},"text/vnd.hgl":{"source":"iana"},"text/vnd.in3d.3dml":{"source":"iana","extensions":["3dml"]},"text/vnd.in3d.spot":{"source":"iana","extensions":["spot"]},"text/vnd.iptc.newsml":{"source":"iana"},"text/vnd.iptc.nitf":{"source":"iana"},"text/vnd.latex-z":{"source":"iana"},"text/vnd.motorola.reflex":{"source":"iana"},"text/vnd.ms-mediapackage":{"source":"iana"},"text/vnd.net2phone.commcenter.command":{"source":"iana"},"text/vnd.radisys.msml-basic-layout":{"source":"iana"},"text/vnd.senx.warpscript":{"source":"iana"},"text/vnd.si.uricatalogue":{"source":"iana"},"text/vnd.sosi":{"source":"iana"},"text/vnd.sun.j2me.app-descriptor":{"source":"iana","charset":"UTF-8","extensions":["jad"]},"text/vnd.trolltech.linguist":{"source":"iana","charset":"UTF-8"},"text/vnd.wap.si":{"source":"iana"},"text/vnd.wap.sl":{"source":"iana"},"text/vnd.wap.wml":{"source":"iana","extensions":["wml"]},"text/vnd.wap.wmlscript":{"source":"iana","extensions":["wmls"]},"text/vtt":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["vtt"]},"text/x-asm":{"source":"apache","extensions":["s","asm"]},"text/x-c":{"source":"apache","extensions":["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{"source":"nginx","extensions":["htc"]},"text/x-fortran":{"source":"apache","extensions":["f","for","f77","f90"]},"text/x-gwt-rpc":{"compressible":true},"text/x-handlebars-template":{"extensions":["hbs"]},"text/x-java-source":{"source":"apache","extensions":["java"]},"text/x-jquery-tmpl":{"compressible":true},"text/x-lua":{"extensions":["lua"]},"text/x-markdown":{"compressible":true,"extensions":["mkd"]},"text/x-nfo":{"source":"apache","extensions":["nfo"]},"text/x-opml":{"source":"apache","extensions":["opml"]},"text/x-org":{"compressible":true,"extensions":["org"]},"text/x-pascal":{"source":"apache","extensions":["p","pas"]},"text/x-processing":{"compressible":true,"extensions":["pde"]},"text/x-sass":{"extensions":["sass"]},"text/x-scss":{"extensions":["scss"]},"text/x-setext":{"source":"apache","extensions":["etx"]},"text/x-sfv":{"source":"apache","extensions":["sfv"]},"text/x-suse-ymp":{"compressible":true,"extensions":["ymp"]},"text/x-uuencode":{"source":"apache","extensions":["uu"]},"text/x-vcalendar":{"source":"apache","extensions":["vcs"]},"text/x-vcard":{"source":"apache","extensions":["vcf"]},"text/xml":{"source":"iana","compressible":true,"extensions":["xml"]},"text/xml-external-parsed-entity":{"source":"iana"},"text/yaml":{"compressible":true,"extensions":["yaml","yml"]},"video/1d-interleaved-parityfec":{"source":"iana"},"video/3gpp":{"source":"iana","extensions":["3gp","3gpp"]},"video/3gpp-tt":{"source":"iana"},"video/3gpp2":{"source":"iana","extensions":["3g2"]},"video/av1":{"source":"iana"},"video/bmpeg":{"source":"iana"},"video/bt656":{"source":"iana"},"video/celb":{"source":"iana"},"video/dv":{"source":"iana"},"video/encaprtp":{"source":"iana"},"video/ffv1":{"source":"iana"},"video/flexfec":{"source":"iana"},"video/h261":{"source":"iana","extensions":["h261"]},"video/h263":{"source":"iana","extensions":["h263"]},"video/h263-1998":{"source":"iana"},"video/h263-2000":{"source":"iana"},"video/h264":{"source":"iana","extensions":["h264"]},"video/h264-rcdo":{"source":"iana"},"video/h264-svc":{"source":"iana"},"video/h265":{"source":"iana"},"video/iso.segment":{"source":"iana","extensions":["m4s"]},"video/jpeg":{"source":"iana","extensions":["jpgv"]},"video/jpeg2000":{"source":"iana"},"video/jpm":{"source":"apache","extensions":["jpm","jpgm"]},"video/jxsv":{"source":"iana"},"video/mj2":{"source":"iana","extensions":["mj2","mjp2"]},"video/mp1s":{"source":"iana"},"video/mp2p":{"source":"iana"},"video/mp2t":{"source":"iana","extensions":["ts"]},"video/mp4":{"source":"iana","compressible":false,"extensions":["mp4","mp4v","mpg4"]},"video/mp4v-es":{"source":"iana"},"video/mpeg":{"source":"iana","compressible":false,"extensions":["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{"source":"iana"},"video/mpv":{"source":"iana"},"video/nv":{"source":"iana"},"video/ogg":{"source":"iana","compressible":false,"extensions":["ogv"]},"video/parityfec":{"source":"iana"},"video/pointer":{"source":"iana"},"video/quicktime":{"source":"iana","compressible":false,"extensions":["qt","mov"]},"video/raptorfec":{"source":"iana"},"video/raw":{"source":"iana"},"video/rtp-enc-aescm128":{"source":"iana"},"video/rtploopback":{"source":"iana"},"video/rtx":{"source":"iana"},"video/scip":{"source":"iana"},"video/smpte291":{"source":"iana"},"video/smpte292m":{"source":"iana"},"video/ulpfec":{"source":"iana"},"video/vc1":{"source":"iana"},"video/vc2":{"source":"iana"},"video/vnd.cctv":{"source":"iana"},"video/vnd.dece.hd":{"source":"iana","extensions":["uvh","uvvh"]},"video/vnd.dece.mobile":{"source":"iana","extensions":["uvm","uvvm"]},"video/vnd.dece.mp4":{"source":"iana"},"video/vnd.dece.pd":{"source":"iana","extensions":["uvp","uvvp"]},"video/vnd.dece.sd":{"source":"iana","extensions":["uvs","uvvs"]},"video/vnd.dece.video":{"source":"iana","extensions":["uvv","uvvv"]},"video/vnd.directv.mpeg":{"source":"iana"},"video/vnd.directv.mpeg-tts":{"source":"iana"},"video/vnd.dlna.mpeg-tts":{"source":"iana"},"video/vnd.dvb.file":{"source":"iana","extensions":["dvb"]},"video/vnd.fvt":{"source":"iana","extensions":["fvt"]},"video/vnd.hns.video":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.ttsavc":{"source":"iana"},"video/vnd.iptvforum.ttsmpeg2":{"source":"iana"},"video/vnd.motorola.video":{"source":"iana"},"video/vnd.motorola.videop":{"source":"iana"},"video/vnd.mpegurl":{"source":"iana","extensions":["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{"source":"iana","extensions":["pyv"]},"video/vnd.nokia.interleaved-multimedia":{"source":"iana"},"video/vnd.nokia.mp4vr":{"source":"iana"},"video/vnd.nokia.videovoip":{"source":"iana"},"video/vnd.objectvideo":{"source":"iana"},"video/vnd.radgamettools.bink":{"source":"iana"},"video/vnd.radgamettools.smacker":{"source":"iana"},"video/vnd.sealed.mpeg1":{"source":"iana"},"video/vnd.sealed.mpeg4":{"source":"iana"},"video/vnd.sealed.swf":{"source":"iana"},"video/vnd.sealedmedia.softseal.mov":{"source":"iana"},"video/vnd.uvvu.mp4":{"source":"iana","extensions":["uvu","uvvu"]},"video/vnd.vivo":{"source":"iana","extensions":["viv"]},"video/vnd.youtube.yt":{"source":"iana"},"video/vp8":{"source":"iana"},"video/vp9":{"source":"iana"},"video/webm":{"source":"apache","compressible":false,"extensions":["webm"]},"video/x-f4v":{"source":"apache","extensions":["f4v"]},"video/x-fli":{"source":"apache","extensions":["fli"]},"video/x-flv":{"source":"apache","compressible":false,"extensions":["flv"]},"video/x-m4v":{"source":"apache","extensions":["m4v"]},"video/x-matroska":{"source":"apache","compressible":false,"extensions":["mkv","mk3d","mks"]},"video/x-mng":{"source":"apache","extensions":["mng"]},"video/x-ms-asf":{"source":"apache","extensions":["asf","asx"]},"video/x-ms-vob":{"source":"apache","extensions":["vob"]},"video/x-ms-wm":{"source":"apache","extensions":["wm"]},"video/x-ms-wmv":{"source":"apache","compressible":false,"extensions":["wmv"]},"video/x-ms-wmx":{"source":"apache","extensions":["wmx"]},"video/x-ms-wvx":{"source":"apache","extensions":["wvx"]},"video/x-msvideo":{"source":"apache","extensions":["avi"]},"video/x-sgi-movie":{"source":"apache","extensions":["movie"]},"video/x-smv":{"source":"apache","extensions":["smv"]},"x-conference/x-cooltalk":{"source":"apache","extensions":["ice"]},"x-shader/x-fragment":{"compressible":true},"x-shader/x-vertex":{"compressible":true}}')},22562:e=>{"use strict";e.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},99640:e=>{"use strict";e.exports=JSON.parse('{"classId":"classID","dataType":"datatype","itemId":"itemID","strokeDashArray":"strokeDasharray","strokeDashOffset":"strokeDashoffset","strokeLineCap":"strokeLinecap","strokeLineJoin":"strokeLinejoin","strokeMiterLimit":"strokeMiterlimit","typeOf":"typeof","xLinkActuate":"xlinkActuate","xLinkArcRole":"xlinkArcrole","xLinkHref":"xlinkHref","xLinkRole":"xlinkRole","xLinkShow":"xlinkShow","xLinkTitle":"xlinkTitle","xLinkType":"xlinkType","xmlnsXLink":"xmlnsXlink"}')},52930:e=>{"use strict";e.exports=JSON.parse('["cent","copy","divide","gt","lt","not","para","times"]')},47873:e=>{"use strict";e.exports=JSON.parse('{"0":"O","1":"l","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","\\u2028":" ","\\u2029":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":" ","":"_","":"_","":"_","":"_","":"-","":"-","":"-","":"-","":"-","":"-","":"-","":"-","":"-","":"-","":"-","":"-","":"-","":"-","":"-","":"-","":"-.","":"","":",","":",","":",","":",","":",","":"","":"","":";","":"","":":","":":","":":","":":","":":","":":","":":","":":","":":","":":","":":","":":","":":","":":","":":","":":","":":","":"::=","":":","":"!","":"!","":"!","":"!!","":"!?","":"?","":"?","":"?","":"?","":"?","":"?!","":"??","":"","":".","":".","":".","":".","":".","":".","":".","":".","":".","":".,","":"..","":"..","":"...","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"<","":">","":">","":">","":"4","":"b","":"b","":"d","":"J","":"L","":"P","":"U","":"V","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","`":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'","":"\'\'","\\"":"\'\'","":"\'\'","":"\'\'","":"\'\'","":"\'\'","":"\'\'","":"\'\'","":"\'\'","":"\'\'","":"\'\'","":"\'\'","":"\'\'","":"\'\'","":"\'\'","":"\'\'\'","":"\'\'\'","":"\'\'\'\'","":"\'B","":"\'D","":"\'n","":"\'P","":"\'T","":"\'Y","":"(","":"(","":"(","":"(","":"(","":"((","":"()","":"(2)","":"(2O)","":"(3)","":"(4)","":"(5)","":"(6)","":"(7)","":"(8)","":"(9)","":"(a)","":"(A)","":"(b)","":"(B)","":"(c)","":"(C)","":"(d)","":"(D)","":"(e)","":"(E)","":"(f)","":"(F)","":"(g)","":"(G)","":"(h)","":"(H)","":"(i)","":"(j)","":"(J)","":"(k)","":"(K)","":"(l)","":"(l)","":"(l)","":"(L)","":"(l2)","":"(l3)","":"(l4)","":"(l5)","":"(l6)","":"(l7)","":"(l8)","":"(l9)","":"(ll)","":"(lO)","":"(M)","":"(n)","":"(N)","":"(o)","":"(O)","":"(p)","":"(P)","":"(q)","":"(Q)","":"(r)","":"(R)","":"(rn)","":"(s)","":"(S)","":"(S)","":"(t)","":"(T)","":"(u)","":"(U)","":"(v)","":"(V)","":"(w)","":"(W)","":"(x)","":"(X)","":"(y)","":"(Y)","":"(z)","":"(Z)","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":"()","":")","":")","":")","":")","":")","":"))","":"{","":"{","":"}","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"*","":"*","":"*","":"*","":"/","":"/","":"/","":"/","":"/","":"/","":"/","":"/","":"/","":"/","":"/","":"/","":"/","":"/","":"/","":"//","":"///","":"\\\\","":"\\\\","":"\\\\","":"\\\\","":"\\\\","":"\\\\","":"\\\\","":"\\\\","":"\\\\","":"\\\\","":"\\\\","":"\\\\\\\\","":"\\\\\\\\","":"\\\\","":"&","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"^","":"^","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"b","":"bi","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"C","":"F","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"+","":"+","":"+","":"+","":"+","":"+","":"+","":"+","":"+","":"+","":"","":"<","":"<","":"<","":"<","":"<","":"<","":"<","":"<","":"<","":"<<","":"<<<","":"=","":"=","":"=","":"=","":"=","":"=","":"=","":"=","":"=","":"=","":"==","":"===","":"=","":">","":">","":">","":">","":">","":">","":">","":"><","":">>","":">>","":">>>","":"~","":"~","":"~","":"~","":"~","":"~","":"~","":"~","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"$","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"2","":"2","":"2","":"2","":"2","":"2","":"2","":"2","":"2","":"2","":"2","":"2","":"","":"","":"","":"","":"","":"","":"2","":"2,","":"2.","":"22","":"22","":"23","":"23","":"24","":"24","":"25","":"26","":"27","":"28","":"29","":"2l","":"2l","":"2O.","":"2O","":"2O","":"","":"","":"2","":"2","":"2","":"3","":"3","":"3","":"3","":"3","":"3","":"3","":"3","":"3","":"3","":"3","":"3","":"3","":"3","":"3","":"3","":"","":"","":"","":"","":"3","":"3,","":"3.","":"3l","":"3O","":"3","":"3","":"3","":"4","":"4","":"4","":"4","":"4","":"4","":"4","":"4","":"","":"","":"","":"4,","":"4.","":"4","":"4","":"4","":"4","":"5","":"5","":"5","":"5","":"5","":"5","":"5","":"5","":"","":"5,","":"5.","":"5","":"5","":"5","":"6","":"6","":"6","":"6","":"6","":"6","":"6","":"6","":"6","":"6","":"","":"","":"","":"6,","":"6.","":"6","":"6","":"6","":"7","":"7","":"7","":"7","":"7","":"7","":"7","":"7","":"7","":"","":"7,","":"7.","":"7","":"7","":"7","":"8","":"8","":"8","":"8","":"8","":"8","":"8","":"8","":"8","":"8","":"8","":"8","":"8","":"","":"","":"8,","":"8.","":"8","":"8","":"8","":"9","":"9","":"9","":"9","":"9","":"9","":"9","":"9","":"9","":"9","":"9","":"9","":"9","":"9","":"9","":"","":"","":"","":"","":"","":"9,","":"9.","":"9","":"9","":"9","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"","":"","":"","":"","":"","":"a/c","":"a/s","":"aa","":"AA","":"ae","":"ae","":"AE","":"AE","":"ao","":"AO","":"AR","":"au","":"AU","":"av","":"av","":"AV","":"AV","":"ay","":"AY","":"","":"","":"","":"","":"","":"","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b\'","":"bl","":"","":"","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"c","":"c","":"C","":"C","":"c","":"c","":"C","":"C","":"C\'","":"c/o","":"c/u","":"\\t","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"d","":"d","":"d","":"d","":"D","":"D","":"D","":"d","":"","":"d","":"d\'","":"d","":"dz","":"dz","":"Dz","":"DZ","":"d","":"D","":"D","":"d","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"","":"","":"e","":"E","":"e","":"","":"","":"","":"","":"","":"","":"","":"o","":"o","":"o","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"f","":"f","":"f","":"f","":"f","":"f","":"f","":"f","":"f","":"f","":"f","":"f","":"f","":"f","":"f","":"f","":"f","":"f","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"F","":"f","":"F","":"f","":"FAX","":"ff","":"ffi","":"ffl","":"fi","":"fl","":"f","":"","":"","":"","":"","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"","":"g","":"","":"","":"","":"g","":"G","":"G\'","":"","":"","":"","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"","":"h","":"h","":"h","":"H","":"H","":"h","":"h","":"h","":"H","":"H","":"H","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"","":"i","":"","":"","":"i","":"i","":"i","":"ii","":"iii","":"ij","":"iv","":"ix","":"j","":"j","":"j","":"j","":"j","":"j","":"j","":"j","":"j","":"j","":"j","":"j","":"j","":"j","":"j","":"j","":"j","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"J","":"j","":"J","":"J","":"","":"","":"","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"k","":"K","":"K","":"K","":"K","":"K","":"K\'","":"l","|":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","I":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"L","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l,","":"l.","":"l\'","":"l2.","":"l2","":"l2","":"l2","":"l3.","":"l3","":"l3","":"l4.","":"l4","":"l4","":"l5.","":"l5","":"l5","":"l6.","":"l6","":"l6","":"l7.","":"l7","":"l7","":"l8.","":"l8","":"l8","":"l9.","":"l9","":"l9","":"lj","":"lJ","":"Lj","":"LJ","":"ll","":"ll","":"ll","":"ll","":"ll","":"ll","":"ll.","":"lll","":"llS","":"ll","":"ll","":"ll","":"lO","":"lO.","":"lO","":"lO","":"lO","":"ls","":"lt","":"lV","":"lX","":"l","":"lz","":"l","":"l","":"l","":"l","":"l","":"l","":"lo","":"l","":"l","":"l","":"","":"","":"","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"MB","":"","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"N","":"n","":"nj","":"Nj","":"NJ","":"No","":"","":"","":"","":"","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"","":"","":"","":"","":"o","":"","":"o","":"o","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"O,","":"O.","":"o\'","":"O\'","":"O\'","%":"/","":"/","":"/","":"/","":"/","":"/","":"/","":"oe","":"OE","":"o","":"oo","":"oo","":"oo","":"OO","":"OO","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oo","":"o","":"O","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"e","":"","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"p","":"p","":"p","":"P\'","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"q","":"q","":"q","":"q","":"q","":"q","":"q","":"q","":"q","":"q","":"q","":"q","":"q","":"q","":"q","":"q","":"Q","":"Q","":"Q","":"Q","":"Q","":"Q","":"Q","":"Q","":"Q","":"Q","":"Q","":"Q","":"Q","":"Q","":"q","":"QE","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"r","":"r","":"r","":"r","":"r","":"r\'","":"rn","m":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"rn","":"Rs","":"","":"","":"","":"","":"","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"s","":"s","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"sss","":"st","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"t","":"T","":"T","":"","":"T","":"T","":"T","":"t","":"T","":"t","":"","":"T3","":"t","":"TEL","":"tf","":"ts","":"t","":"t","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"","":"","":"u","":"u","":"U","":"U","":"U","":"U\'","":"ue","":"uo","":"","":"","":"","":"","":"","":"","":"","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VB","":"vi","":"vii","":"viii","":"Vl","":"Vll","":"Vlll","":"V","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"w","":"w","":"W","":"w","":"","":"","":"","":"","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"x","":"","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"X","":"x","":"X","":"X","":"xi","":"xii","":"Xl","":"Xll","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"y","":"y","":"y","":"Y","":"Y","":"Y","":"","":"","":"","":"","":"","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"z","":"z","":"Z","":"z","":"Z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"i","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"\'","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"l","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"\'","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"o","":"o","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"o","":"o","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":" lo","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"l","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"o","":"o","":"o","":"o","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":" lo o ","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"o","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"l","":"l","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"l","":"l","":"l","":"l","":"l","":"l","":"o","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"l","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"o","":"o","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"o","":"o","":"o","":"","":"","":"","":"","":"","":"","":"l","":"l","":"o","":"o","":"o","":"o","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"\'","":"/","":"","":"","":"","":"","":"","":"\'","":"","":"","":"\'","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"<","":"b","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"b","":"b","":"d","":"P","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"J","":"","":"","":"","":"","":"","":"","":"","":"J","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""}')},70006:e=>{"use strict";e.exports=JSON.parse('{"html":"http://www.w3.org/1999/xhtml","mathml":"http://www.w3.org/1998/Math/MathML","svg":"http://www.w3.org/2000/svg","xlink":"http://www.w3.org/1999/xlink","xml":"http://www.w3.org/XML/1998/namespace","xmlns":"http://www.w3.org/2000/xmlns/"}')}}]);